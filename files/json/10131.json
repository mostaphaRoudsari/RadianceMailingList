{"body": "\nHi Axel,\n\nYour sky is probably twice as bright because without turning on direct\njittering, all ray samples will be taken from the zenith, neglecting\nto integrate the cosine factor.  You can try again with -dj 1, but I\ndon't think you'll like the noisy results.\n\nA better approach is to remove the significant low frequencies from\nyour sky, replacing them with the desired gensky or gendaylit\ndistribution.  See the following entry in a thread from a couple years\nago:\n\nhttp://www.radiance-online.org/pipermail/radiance-general/2008-May/005046.html\n\nChristopher's suggestion is also a good one.  You can save the depth\nbuffer using the -z option, convert it to an image, then use pcomb to\nselect for depths greater than 1e9 as the sky, like so:\n\nrpict ... -x 1024 -y 768 -pa 0 -pj 0 -vf view1.vf -z view1.zbf\nscene.oct > view1.hdr\nrpict ... -x 1024 -y 768 -pa 0 -pj 0 -vf view1.vf sky_only.oct >\nview1sky.hdr\npvalue -r -h -y 768 +x 1024 -df view1.zbf | pcomb -e\n'sel=if(gi(3)-1e9,2,1)' \\\n-e 'ro=ri(sel);go=gi(sel);bo=bi(sel)' view1.hdr view1sky.hdr - \\\n| pfilt -1 -r .6 -x /3 -y /3 > filtered.hdr\n\nThe sky_only.oct contains the nice, captured sky you wish to\nreproduce.  The final pfilt improves the appearance substantially.\nThe -pj 0 turns off the usual pixel jittering, which can lead to some\naliasing but is necessary to get exact pixel correspondence between\nrenderings.  I'm sure you can figure out the rest, fixing any mistakes\nI made above.\n\nCheers,\n-Greg\n\n\n", "replyTo": "Subject: [Radiance-general] illum-like behaviour for sky dome", "sender": "Greg Ward", "isquestion": false, "tags": [], "id": "<D31977F1-82EB-45BF-92C5-42B677FBF21E@lmi.net>", "refs": ["<4BF9A378.4060003@gmail.com>"], "datetime": "Mon May 24 09:46:18 2010", "email": "gregoryjward at gmail.com", "subject": "[Radiance-general] illum-like behaviour for sky dome"}