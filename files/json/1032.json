{"refs": [], "id": "<67542EFC-4CAF-11D9-B36E-000D93AF79C2@servidor.unam.mx>", "subject": "[Radiance-general] macbeth problems", "email": "lucet at servidor.unam.mx", "body": "\nHi everybody,\n\nI have some problems applying macbeth correction to some images. These\nare raw files converted to tiff with GraphicConverter, and then to pic,\nusing ra_tiff. When I use macbethcal, it looks like it is working fine,\nno message, nevertheless if I view the debug.pic image, the right part\nof the squares stay black, which means that the calculation of the new\ncolor is not done. Here is the cal file I obtain where we can see that\nthe variables are not calculated.\n\n{\nColor correction file computed by:\nmacbethcal -d A1.debug2.pic -p 1791 489 1724 2087 2839 539 2753 2134\nA1_M.pic2 A1_2.cal\n\nUsage: pcomb -f A1_2.cal uncorrected.pic > corrected.pic\n}\nrxa(i) :\nselect(i,0.00243504,0.0188038,0.0882526,0.293579,0.800897,0.994141);\nrya(i) :\nselect(i,0.0309326,0.0889489,0.201031,0.361486,0.602564,0.919236);\nrfi(n) = if(n-4.5, 5, if(rxa(n+1)-r, n, rfi(n+1)));\nrndx = rfi(1);\nrn = ((rxa(rndx+1)-r)*rya(rndx) + (r-rxa(rndx))*rya(rndx+1)) /\n(rxa(rndx+1) - rxa(rndx)) ;\ngxa(i) :\nselect(i,0.00234237,0.0200952,0.0949858,0.297096,0.832963,0.994141);\ngya(i) :\nselect(i,0.0308484,0.0876956,0.200415,0.366194,0.606247,0.919034);\ngfi(n) = if(n-4.5, 5, if(gxa(n+1)-g, n, gfi(n+1)));\ngndx = gfi(1);\ngn = ((gxa(gndx+1)-g)*gya(gndx) + (g-gxa(gndx))*gya(gndx+1)) /\n(gxa(gndx+1) - gxa(gndx)) ;\nbxa(i) :\nselect(i,0.0040146,0.0385061,0.178308,0.545997,0.994141,0.994141);\nbya(i) :\nselect(i,0.0303486,0.0852925,0.19516,0.360336,0.597103,0.884932);\nbfi(n) = if(n-4.5, 5, if(bxa(n+1)-b, n, bfi(n+1)));\nbndx = bfi(1);\nbn = ((bxa(bndx+1)-b)*bya(bndx) + (b-bxa(bndx))*bya(bndx+1)) /\n(bxa(bndx+1) - bxa(bndx)) ;\nr = ri(1); g = gi(1); b = bi(1);\nro = nan*rn + nan*gn + nan*bn ;\ngo = nan*rn + nan*gn + nan*bn ;\nbo = nan*rn + nan*gn + nan*bn ;\n\n\nI have no idea of what happens there. I tryed with an another file and\nhad the same result. I also tryed with a blur. Is it because of the\noriginal raw format? or because I have no color profile? What should I\ndo?\n\ngenevieve lucet\n\n\n", "isquestion": true, "replyTo": "", "tags": [], "sender": "genevieve lucet", "datetime": "Mon Dec 13 03:33:58 2004"}