{"refs": [], "id": "<84F05BA9118BBD4A8FC6409808CE266C234092@ENGRMAIL2.engr.psu.edu>", "subject": "[Radiance-general] RE: Sun Color", "email": "Marcus Jacobs", "body": "\nI modified the script.Use it as follows:\n\n# generate a radiance sun:  gensky 3 21 8\n...\nvoid light solar\n0\n0\n3 5.18e+006 5.18e+006 5.18e+006\n...\nYL=179*(5.18e+006 *.265+5.18e+006 *.67+5.18e+006*.0648)= 927034556\n\n\nproc Kelvin_to_sun_RGB {T YL} {\n\n# converts a color temperature of degrees Kelvin into RGB\n# given: color temp. T and the luminance YL of the source\n# convert the blackbody temperature T into \"RGB\"\n# Both fits have R^2= 1.000 over the range from 2000K\n# to 11000K. Both look ill behaved above 11000K\nset x [expr 0.8405 - 2.17834e-04 *$T  \\\n+ 3.52544e-08 *$T*$T \\\n- 2.7046e-12*$T*$T*$T \\\n+ 7.9696e-17*$T*$T*$T*$T]\nset y [expr 0.30587 + 1.3655e-4 *$T \\\n- 5.6154e-8 *$T*$T \\\n+ 8.9484e-12*$T*$T*$T \\\n- 6.5352e-16*$T*$T*$T*$T \\\n+ 1.8158e-20*$T*$T*$T*$T*$T]\n\nset z [expr 1.0-$x-$y]\nset X [expr $x*$YL/$y]\nset Z [expr $z*$YL/$y]\n# X, YL, Z are the spectral tristimulus values\n# the following formulae assume the monitor alignments given in the book :\n# \"procedural elements for computer graphics\" by David F. Rogers, 1985 McGraw-Hill; pp. 397\nset R [expr  2.739*$X - 1.145*$YL - 0.424*$Z]\nset G [expr -1.119*$X + 2.029*$YL + 0.033*$Z]\nset B [expr 0.138 *$X - 0.333*$YL + 1.105*$Z]\nif {$B<0} {set B 0.0}\nreturn \"$R $G $B\"\n}\n__________________________________\nKelvin_to_sun_RGB 2100.0 $YL\n...\n# a sun with a color temperature of 2100 K and a luminance of YL\nvoid light solar\n0 0 3\n2017646607     601412803   19892974\n...\n\nThe script does not work for very low sun angles, as the sun changes to pink orange, which cannot be represented by a blackbody. Use some filter colors from Lee or Rosco for that.\n\nMartin Moeck\n\n\n\n-----Original Message-----\nSent: Fri 1/7/2005 8:10 PM\nTo: radiance-general@radiance-online.org\nCc:\n\n\nThanks Martin and Greg for the help for my question about the sun color.\n\n\nI have done some light research on of the sun's color temperature. I think\nMartin's may be the method that I would prefer in converting a color\ntemperature and luminance of the sun to the RGB used with the light\nprimative. I have had some problems running the script. In a comment line it\nstates:\n\n\nconverts a color temperature of degrees Kelvin into RGB given: color temp. T\nand the luminance YL of the source\n\n\nMy problem is that this script takes three variables (T, YL, and\nsolar_radiance) but the comment only mentions two variables (T and YL). What\nis the solar_radiance and how does it differ from the luminance of the\nsource (the source I am assuming is the sun)? Also, what are the units of\nmeasurement for the 3 variables? Do you have an example for this?\n\nThanks\n\nMarcus Jacobs\n\n\n\n_______________________________________________\nRadiance-general mailing list\nRadiance-general@radiance-online.org\nhttp://www.radiance-online.org/mailman/listinfo/radiance-general\n\n\n-------------- next part --------------\nA non-text attachment was scrubbed...\nName: not available\nType: application/ms-tnef\nSize: 7506 bytes\nDesc: not available\nUrl : http://radiance-online.org/pipermail/radiance-general/attachments/20050108/44e7f9e2/attachment.bin\n", "isquestion": true, "replyTo": "", "tags": [], "sender": "marcdevon@hotmail.com", "datetime": "Sat Jan  8 14:46:46 2005"}