{"body": "\nHi Lars/ Greg,\n\nI tried with small expression in a cal file.\n\nAs i know camera position and Camera view direction from camera.vp file.\nI suppose rpict is similar to rtrace in terms of internal processing.\n\nThe depth of the 3d point will be = T *cos theta\nI suppose \" T \" returns distance from camera to point of intersection as per\nrayinit.cal\n\nIf CP = Normalized Vector from camera to Point of intersection ( Px, Py, Pz)\n\n\ncos theta = (CP) dot product  (normalized view vector)\n\ntherefore my cal file has\n{\n3dDepthshader.cal\n}\n\nred=T * ( (CPx * ViewX)+CPy * ViewY)+Cpz * ViewZ)) ;\n\nis the correct way to compute ?\n\nAnyway i will try with your given techniques too.\n\nBest Regards,     Brajesh Lal\n\n\n\n\n________________________________\nTo: Radiance general discussion <radiance-general at radiance-online.org>\nSent: Thu, March 17, 2011 4:40:42 PM\nHi Brajesh,\n\nLars is right that you can use vwrays with rtrace to get more flexible output.\nThe Z-buffer file is a string of binary floats, and not formatted as such.  You\nneed to pass it through pvalue if you want to produce a (grayscale) image.  You\ncan use the following sequence if you like:\n\nrpict -x ResX -y ResY -z  depth.zbf  -vf  camera.vp  scene.oct > scene.hdr\npvalue -r -h -df -b `getinfo -d < scene.hdr` depth.zbf > depth.hdr\n\nNotice the back-quotes above, which substitute the resolution output of getinfo\n-d on the command line.  You can then view \"depth.hdr\" as a grayscale image or\nconvert to color using falsecolor:\n\nfalsecolor -l Depth -s auto -m 1 -i depth.hdr > depth_fc.hdr\n\nIf you don't want the grayscale image at all, you can combine your pvalue and\nfalsecolor commands like so:\n\npvalue -r -h -df -b `getinfo -d < scene.hdr` depth.zbf | falsecolor -l Depth\n-s auto -m 1 > depth_fc.hdr\n\nBest,\n-Greg\n\n\n_______________________________________________\nRadiance-general mailing list\nRadiance-general at radiance-online.org\nhttp://www.radiance-online.org/mailman/listinfo/radiance-general\n\n\n\n\n-------------- next part --------------\nAn HTML attachment was scrubbed...\nURL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110318/24b1cbcf/attachment.html>\n\n", "replyTo": "Subject: [Radiance-general] 3d Depth of a pixel", "sender": "gregoryjward at gmail.com", "isquestion": false, "tags": [], "id": "<219473.76452.qm@web57304.mail.re1.yahoo.com>", "refs": ["<928572.9599.qm@web57311.mail.re1.yahoo.com>", "<59223A21-3989-4893-936A-2A1276EB7824@lmi.net>", "<381239.43715.qm@web57311.mail.re1.yahoo.com>", "<103B0A5F-81E5-4486-96F4-010DC55CA8C0@lmi.net>"], "datetime": "Fri, 18 Mar 2011 02:36:32 -0700 (PDT)", "email": "Greg Ward", "subject": "Re: [Radiance-general] 3d Depth of a pixel"}