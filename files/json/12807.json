{"body": "\nHi Iebele,\n\nJust so this answer doesn't get lost like Francesco's, I'm taking us back online to discuss this.  Thanks for sharing your model and results.\n\nThe problem occurs because of a hack I introduced into the glass material type, about which I had completely forgotten.  It was my answer to the question, \"Should a texture applied to an infinitely thin layer of glass perturb transmitted rays?\"  I decided it should, because in most cases, a texture is applied to introduce some effect to the surface.\n\nThe problem here is that the texture is being applied to correct the effects of triangulation, thus smoothing rather than roughening the surface.  Without a texture, the transmitted component would be unaffected, but the reflected component would show your model's tessellation.  There are three possible solutions.\n\nThe first possible solution is to give your car windows real thickness and use a dielectric material rather than glass.  You would need to be careful that your surface normals were directed outwards for the outer layer and inwards for the inner layer.\n\nThe second possible solution is to turn off surface normal smooth just for the window layer.  This will as I said show up the tessellation of your reflections, but it would fix the transmission.\n\nThe third possible solution is to re-hack the source file rt/glass.c.  At line 114, simplify:\n\nif (!(r->crtype & SHADOW) && hastexture) {\nVSUM(p.rdir, r->rdir, r->pert, 2.*(1.-rindex));\nif (normalize(p.rdir) == 0.0) {\nobjerror(m, WARNING, \"bad perturbation\");\nVCOPY(p.rdir, r->rdir);\n}\n} else {\nVCOPY(p.rdir, r->rdir);\ntranstest = 2;\n}\n\nto read:\n\nVCOPY(p.rdir, r->rdir);\ntranstest = 2;\n\nThis should fix the problem without having to change your model.  Of course, the problem will come back the next time you update Radiance, unless folks convince me that my hack was ill-conceived to begin with.  I'm open to the possibility.\n\nCheers,\n-Greg\n\n\n\n", "replyTo": "<CAD_et2Xd9KkPdg1gzB4T0==JWzJtwUChrMiBnJiwa+ipOaE4FA@mail.gmail.com>", "sender": "Greg Ward", "isquestion": false, "tags": [], "id": "<62B0FF52-30C8-4318-8786-9F2A49D89B25@lmi.net>", "refs": ["<CAD_et2Xd9KkPdg1gzB4T0==JWzJtwUChrMiBnJiwa+ipOaE4FA@mail.gmail.com>"], "datetime": "Thu, 2 Feb 2012 19:34:26 -0800", "email": "gregoryjward at gmail.com", "subject": "[Radiance-general] artifact while rendering glass in tmeshsolved?"}