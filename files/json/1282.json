{"body": "\nNick Devlin wrote:\n\nThe good news is that falsecolor is really just a shell script -- no\ncompiling necessary.  I've attached a copy of falsecolor from my\ncomputer, which has the -lw & -lh options.  Place this in your bin\ndirectory -- or wherever you installed the radiance binaries -- and you\nshould be good to go. (make sure you reset the permissions to make it\nexecutable.)\n\n----\n\nRob Guglielmetti\n\ne. rpg@rumblestrip.org\nw. www.rumblestrip.org\n-------------- next part --------------\n#!/bin/csh -fe\n# RCSid: $Id: falsecolor.csh,v 2.9 2004/03/08 21:39:32 greg Exp $\n#\n# Create false color image with legend\n#\n# Added user-definable legend 2004/01/20 Rob Guglielmetti\n\nset td=/usr/tmp/fc$$\nonintr quit\nset mult=179\nset label=Nits\nset scale=1000\nset decades=0\nset redv='1.6*v-.6'\nset grnv='if(v-.375,1.6-1.6*v,8/3*v)'\nset bluv='1-8/3*v'\nset ndivs=8\nset picture='-'\nset cpict=\nset loff=0\nset legwidth=100\nset legheight=200\nwhile ($#argv > 0)\nswitch ($argv[1])\ncase -lw:\nshift argv\nset legwidth=\"$argv[1]\"\nbreaksw\ncase -lh:\nshift argv\nset legheight=\"$argv[1]\"\nbreaksw\ncase -m:\nshift argv\nset mult=\"$argv[1]\"\nbreaksw\ncase -s:\nshift argv\nset scale=\"$argv[1]\"\nbreaksw\ncase -l:\nshift argv\nset label=\"$argv[1]\"\nbreaksw\ncase -log:\nshift argv\nset decades=$argv[1]\nbreaksw\ncase -r:\nshift argv\nset redv=\"$argv[1]\"\nbreaksw\ncase -g:\nshift argv\nset grnv=\"$argv[1]\"\nbreaksw\ncase -b:\nshift argv\nset bluv=\"$argv[1]\"\nbreaksw\ncase -i:\nshift argv\nset picture=\"$argv[1]\"\nbreaksw\ncase -p:\nshift argv\nset cpict=\"$argv[1]\"\nbreaksw\ncase -ip:\ncase -pi:\nshift argv\nset picture=\"$argv[1]\"\nset cpict=\"$argv[1]\"\nbreaksw\ncase -cl:\nset docont=a\nset loff=12\nbreaksw\ncase -cb:\nset docont=b\nset loff=13\nbreaksw\ncase -e:\nset doextrem\nset needfile\nbreaksw\ncase -n:\nshift argv\nset ndivs=\"$argv[1]\"\nbreaksw\ndefault:\necho bad option \"'$argv[1]'\" >/dev/tty\nexit 1\nendsw\nshift argv\nend\nmkdir $td\ncat > $td/pc0.cal <<_EOF_\nPI : 3.14159265358979323846 ;\nscale : $scale ;\nmult : $mult ;\nndivs : $ndivs ;\n\nor(a,b) : if(a,a,b);\nEPS : 1e-7;\nneq(a,b) : if(a-b-EPS,1,b-a-EPS);\nbtwn(a,x,b) : if(a-x,-1,b-x);\nclip(x) : if(x-1,1,if(x,x,0));\nfrac(x) : x - floor(x);\nboundary(a,b) : neq(floor(ndivs*a+.5),floor(ndivs*b+.5));\n\nisconta = if(btwn(0,v,1),or(boundary(vleft,vright),boundary(vabove,vbelow)),-1);\niscontb = if(btwn(0,v,1),btwn(.4,frac(ndivs*v),.6),-1);\n\nro = if(in,clip($redv),ra);\ngo = if(in,clip($grnv),ga);\nbo = if(in,clip($bluv),ba);\n\nra = 0;\nga = 0;\nba = 0;\n\nin = 1;\n_EOF_\ncat > $td/pc1.cal <<_EOF_\nnorm : mult/scale/le(1);\n\nv = map(li(1)*norm);\n\nvleft = map(li(1,-1,0)*norm);\nvright = map(li(1,1,0)*norm);\nvabove = map(li(1,0,1)*norm);\nvbelow = map(li(1,0,-1)*norm);\n\nmap(x) = x;\n\nra = ri(nfiles);\nga = gi(nfiles);\nba = bi(nfiles);\n_EOF_\nset pc0args=(-f $td/pc0.cal)\nset pc1args=(-f $td/pc1.cal)\nif ($?docont) then\nset pc0args=($pc0args -e \"in=iscont$docont\")\nendif\nif (\"$cpict\" == \"\") then\nset pc1args=($pc1args -e 'ra=0;ga=0;ba=0')\nelse if (\"$cpict\" == \"$picture\") then\nset cpict=\nendif\nif ($?needfile && \"$picture\" == '-') then\ncat > $td/picture\nset picture=$td/picture\nendif\nif (\"$decades\" != \"0\") then\nset pc1args=($pc1args -e \"map(x)=if(x-10^-$decades,log10(x)/$decades+1,0)\")\nset imap=\"imap(y)=10^((y-1)*$decades)\"\nelse\nset imap=\"imap(y)=y\"\nendif\nif ( $legwidth > 20 && $legheight > 40 ) then\npcomb $pc0args -e 'v=(y+.5)/yres;vleft=v;vright=v' \\\n-e 'vbelow=(y-.5)/yres;vabove=(y+1.5)/yres' \\\n-x $legwidth -y $legheight > $td/scol.pic\n( echo $label; cnt $ndivs \\\n| rcalc -e '$1='\"($scale)*imap(($ndivs-.5-\"'$1'\")/$ndivs)\" \\\n-e \"$imap\" | sed -e 's/\\(\\.[0-9][0-9][0-9]\\)[0-9]*/\\1/' ) \\\n| psign -s -.15 -cf 1 1 1 -cb 0 0 0 \\\n-h `ev \"floor($legheight/$ndivs+.5)\"` > $td/slab.pic\nelse\nset legwidth=0\nset legheight=0\n(echo \"\" ; echo \"-Y 1 +X 1\" ; echo \"aaa\" ) > $td/scol.pic\ncp $td/scol.pic $td/slab.pic\nendif\nif ( $?doextrem ) then\npextrem -o $picture > $td/extrema\nset minpos=`sed 2d $td/extrema | rcalc -e '$2=$2;$1=$1+'\"$legwidth\"`\nset minval=`rcalc -e '$1=($3*.27+$4*.67+$5*.06)*'\"$mult\" $td/extrema | sed -e 2d -e 's/\\(\\.[0-9][0-9][0-9]\\)[0-9]*/\\1/'`\nset maxpos=`sed 1d $td/extrema | rcalc -e '$2=$2;$1=$1+'\"$legwidth\"`\nset maxval=`rcalc -e '$1=($3*.27+$4*.67+$5*.06)*'\"$mult\" $td/extrema | sed -e 1d -e 's/\\(\\.[0-9][0-9][0-9]\\)[0-9]*/\\1/'`\npsign -s -.15 -a 2 -h 16 $minval > $td/minv.pic\npsign -s -.15 -a 2 -h 16 $maxval > $td/maxv.pic\npcomb $pc0args $pc1args $picture $cpict \\\n| pcompos $td/scol.pic 0 0 -t .2 $td/slab.pic 0 $loff \\\n- $legwidth 0 $td/minv.pic $minpos $td/maxv.pic $maxpos\nelse\npcomb $pc0args $pc1args $picture $cpict \\\n| pcompos $td/scol.pic 0 0 -t .2 $td/slab.pic 0 $loff - $legwidth 0\nendif\nquit:\nrm -rf $td\n", "replyTo": "Subject: [Radiance-general] Rendering Exclude Options - follow up", "sender": "Rob Guglielmetti", "isquestion": false, "tags": [], "id": "<417FA423.6060103@rumblestrip.org>", "refs": ["<000001c4bc26$9993b5b0$2568a8c0@Nick>"], "datetime": "Wed Oct 27 15:35:39 2004", "email": "rpg at rumblestrip.org", "subject": "[Radiance-general] Rendering Exclude Options - follow up"}