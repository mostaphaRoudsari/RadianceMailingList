{"body": "\nHi Lars~\n\nI modified the script as follows, because i use just one channel out of RGB\nchannels.\n\nset N=10000\ncnt 10 10 10 $N | rcalc -of -e 'Dz=1-2*($4+rand(.77-.61*recno))/'$N \\\n-e 'phi=2*PI*($4+rand(-.10+.39*recno))'/$N \\\n-e 'rxy=sqrt(1-Dz*Dz);Dx=rxy*cos(phi);Dy=rxy*sin(phi)' \\\n-e 'Ox=$1*.02+0.02;Oy=$2*0.02+0.02;Oz=$3*0.02+0.02' \\\n-e '$1=Ox;$2=Oy;$3=Oz;$4=Dx;$5=Dy;$6=Dz' \\\n| rtrace -h -ff -oov -ar 256 -as 256 -ad 512 -ab 3 scene.oct \\\n| total -if4 -10000 -m \\\n| rcalc -e '$1=$1;$2=$2;$3=$3;$4=4*PI*$4' > fluence.dat\n\nI checked appropriate number of rays to trace for some positions and\nchanges below 1% in results were observed between 10000 and more rays, but\nless than 10000 was not desirable. I need to check for all the positions\nconcerned.\n\nMany thank you~\n\nBest,\nMinki\n\n-----------------------------------------------------------------------------------------------------------\n\nHi Minki!\nThe script can do that, you just need to remove the multiplication with\nRadiance's assumed luminous efficacy (179) and the color weighting\n(R*.265+G*.670+B*.065) in the last line. So let the script end as\n\n(...)\n| total -if3 -m\n\nAnd remove the backslash and the last line. I am assuming that you have\nset equal values in all channels (R=G=B in all source, material\ndefinitions).\n\nUnfortunately, especially for small light sources of high intensity, you\nmust set a rather high sampling density N not to miss out important\nsources. The script sends out rays to random directions, other then\nRadiance's integrated direct calculation which keeps a list of sources\nwith known locations to check.\n\nCheers, Lars.\n\n--\nMinki Sung, Ph.D.\n\nBuilding Technology Team\nKorea Institute of Construction Technology\nTEL.+82-31-9100-586\nFAX.+82-31-9100-361\n-------------- next part --------------\nAn HTML attachment was scrubbed...\nURL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120422/dcd56d52/attachment.html>\n\n", "replyTo": "", "sender": "Minki Sung", "isquestion": true, "tags": [], "id": "<CANi9k9SVoTFEtv7QfyHCDohMXzeg5TMgqddGeuM8kDwuJA6MWg@mail.gmail.com>", "refs": [], "datetime": "Sun, 22 Apr 2012 03:48:41 +0900", "email": "minki.sung at gmail.com", "subject": "[Radiance-general] Spherical sensor"}