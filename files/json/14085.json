{"body": "\nSorry to keep bothering you...  Just add some additional information. I\nsearch \"transmission back\" and \"transmission front\" in the code and find\n\"Transmission Front\" is more likely used according to the code.  The\nfollowing two code snippets from bsdf_m.c and bsdf.c shows \"Transmission\nFront\" data will be loaded or preferred ?\n\nAnother issue,  I remember Greg mention that even if only \"Transmission\nFront\" is present, the BSDF library in Radiance can still computer\nTransmission matrix. But my simple test case (download\nhere<https://dl.dropbox.com/u/15562376/test_10_21.zip>)\ndid not show that.  If you change \"Transmission Back\" in the .xml file to\n\"Transmission Front\". The results will be zero.\n\n\n*//  ray/src/common/bsdf_m.c*\n/*\n* Remember that front and back are reversed from WINDOW 6 orientations\n* *Favor their \"Front\" (incoming light) since that's more often valid*\n*/\ntfront = !strcasecmp(sdata, \"Transmission Back\");\nif (!strcasecmp(sdata, \"Transmission Front\") ||\ntfront & (sd->tf == NULL)) {\nif (sd->tf != NULL)\nSDfreeSpectralDF(sd->tf);\nif ((sd->tf = SDnewSpectralDF(1)) == NULL)\nreturn RC_MEMERR;\ndf = sd->tf;\n\n*// ray/src/common/bsdf.c*\n\nfor (wld = ezxml_child(wtl, \"WavelengthData\");\nwld != NULL; wld = wld->next) {\nif (strcasecmp(ezxml_txt(ezxml_child(wld,\"Wavelength\")),\n\"Visible\"))\ncontinue;\nfor (wdb = ezxml_child(wld, \"WavelengthDataBlock\");\nwdb != NULL; wdb = wdb->next)\nif (!strcasecmp(ezxml_txt(ezxml_child(wdb,\n\"WavelengthDataDirection\")),\n*\"Transmission Front\"))*\nbreak;\nif (wdb != NULL) { */* load front BTDF */*\nload_bsdf_data(dp, wdb);\nbreak; /* ignore the rest */\n}\n}\n\nThanks,\n\nJia\n\nOn Sat, Oct 20, 2012 at 4:01 PM, Jia Hu <hujia06 at gmail.com> wrote:\n\n-------------- next part --------------\nAn HTML attachment was scrubbed...\nURL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20121020/e0764fb7/attachment-0001.html>\n\n", "replyTo": "<CABzgtwq1WwQ8zXaND6O8=3A3p3AnWc1i1dEAuDcmRr5DgK9WiQ@mail.gmail.com>", "sender": "Jia Hu", "isquestion": false, "tags": [], "id": "<CABzgtwp0nzUTB0zdaW96WdGwOhcy3Ay-+5z572UAbV_T+gBX4g@mail.gmail.com>", "refs": ["<CABzgtwpW5PoM5-QNh0SE-2MhT5__cs5X3BCrPivKvyzU7mQXiQ@mail.gmail.com>", "<CABzgtwq1WwQ8zXaND6O8=3A3p3AnWc1i1dEAuDcmRr5DgK9WiQ@mail.gmail.com>"], "datetime": "Sat, 20 Oct 2012 20:38:24 -0400", "email": "hujia06 at gmail.com", "subject": "[Radiance-general] possible inconsistency of bin numbersbetween BSDF and kelms_int.cal"}