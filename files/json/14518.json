{"body": "\nDear Lars,\n\nI had the same problem approximately two years ago: rtrace -I does not\ngive you the right answer when being applied after a dielectric surface.\nWith the -i option of rtrace, I do not have any experience.\nI suggest a workaround for your problem. As you did, I would chose a\ndielectric surface followed by a plastic surface. For rtrace -I inside a\nmaterial, in theory the integral\n\nE = int [ L cos(theta_m) d Omega_m ]\n\nhas to be calculated, m naming the angles inside the material.\nUnfortunately, at least the specular path does not remember the light\nrefraction for the rtrace -I calculation. However, if you substitute the\nangles in the integral by the old ones before the material, rtrace -I\nworks. The substitution theta_m=arcsin(n1/n2*theta), including\ncos(theta_m)=sqrt[1-sin^2(theta_m)], leads to a complicated integral that\nfinally can be simplified to\n\nE = n1^2/n2^2 int [ L cos(theta) d Omega ]\n\nrtrace -I only calculates this integral. With the correction factor\nn1^2/n2^2, the rtrace -I results can be applied.\nThe ambient path, however, seems to work perfectly without any correction\nfactor.\nI haven't done any research on what is exactly going on in the source\ncodes. However, the results are fine.\nI do not have an answer for your third question.\n\nCheers,\nWendelin\n\n\n\n\n\nOriginal message:\n\nTo: Radiance general discussion <radiance-general at radiance-online.org>\nContent-Type: text/plain; charset=\"us-ascii\"\n\nHi all,\n\nwhile it is one of the most fundamental material types in Radiance,\ndielectric is hardly used in simulations with Radiance as far as I know. I\nonce or twice had to use it, but never for critical parts of a model.\n\nNow, I need to find the irradiance in (!) a glass pane on the second\nsurface S2 in this simple sketch:\n\n|        |\n|        |\n| o      |    * source\n| sensor |\n|        |\n\nS2      S1\n\nThe glass material applied to a flat surface through S1 obviously does not\nwork here, as it includes reflection at S2 into the plane through S1. That\nwould lead to an underestimate of about 4% at normal incidence. What I did\nis to model S1 as a dielectric, S2 as plastic, and ran the rtrace command\nwith the -i switch, location as marked by the o-letter in the sketch and\nthe view vector towards S2.\n\n- My first question - is this a valid model in Radiance, with a volume\nhaving a dielectric interface on one, a plastic surface on the other side?\n\n- Second question, can I expect rtrace to calculate a valid irradiance\nreading under these circumstances?\n\n- Third question, and that is funny - how do I find the transmissivity\nparameters for a glass, as dielectric would expect them, if I have\ntransmission T measured?\n\nIf someone here could share some insight how to find a valid dielectric\ndescription from a typical transmission measurement for the visible\nspectrum, that would be of great help for me....\n\nCheers and TIA,\nLars.\n\n-------------- next part --------------\nAn HTML attachment was scrubbed...\nURL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20130131/b214f5f5/attachment-0001.html>\n\n", "replyTo": "Subject: [Radiance-general] usage of rtrace within a material", "sender": "grobe at gmx.net", "isquestion": false, "tags": [], "id": "<4CCD6425-B096-44B6-8B39-69741B53E1AD at gmx.net>", "refs": ["<mailman.360.1359644522.2200.radiance-general@radiance-online.org>"], "datetime": "Thu, 31 Jan 2013 20:58:57 +0800", "email": "\"Lars O. Grobe\"", "subject": "[Radiance-general] useage of the dielectric material type"}