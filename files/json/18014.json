{"body": "\nHi Andy,\n\nthat helped a lot, thanks!\nI get results now, a rgb triple for each luminaire.\n(koeffizientenmatrix_rgb.mtx)\n\nI tried to use the -c 0 option to sum up the rgb values of rtcontrib but 0 seems to be unsupported\nSo I use rcalc and sum up the values afterwards.\n\nSince we used \"-I+\" I don't have to multiply them with \"$1=179*($1*.265+$2*.67+$3*.065)\" but just add them together, right?\nIf I just add them, I got a tenth of the value it should be. (koeffizientenmatrix_lux2.mtx)\nIf I use the conversion formula, it's much higher as it should be. (koeffizientenmatrix_lux.mtx)\n\nDo you have an hint for me?\n\nBest ragards and thanks,\nBerat\n\n\n\nVon: Andrew McNeil [mailto:amcneil at lbl.gov]\nGesendet: Montag, 11. Mai 2015 20:16\nAn: Radiance general discussion\nBetreff: Re: [Radiance-general] Calculating transfer matrix for measurement points with luminaires in a room\n\nAktuna,\n\nYou need to change the modifier of each light, not the name as follows (note that I'm using -m instead of -n):\n#@rfluxmtx h=u\n!xform -m L1_direkt -t 1.21 2.6 2.6  k_direkt.rad\n#@rfluxmtx h=u\n!xform -m L2_direkt -t 3 2.6 2.6  k_direkt.rad\n\nAnd you need to define all these new modifiers in k_direkt.rad:\nvoid brightdata k_direkt_dist\n5 flatcorr k_direkt.dat source.cal src_phi4 src_theta\n0\n1 22.7273\n\nk_direkt_dist light L1_direkt\n0\n0\n3 1 1 1\n\nk_direkt_dist light L2_direkt\n0\n0\n3 1 1 1\n\nAnd you need to delete the top polygon of your light fixture, you can't do hemispherical sampling for two polygons that have opposite surface normals.\n\nThen finally here is the proper command syntax:\nrfluxmtx -V+ -I+ @szene.opt - lights.rad < messpunkte.xyz szene.rad > koeffizientenmatrix.mtx\n\n\nIf the top polygon is important (ie it contributes significant light) then you can either calculate separate contributions from up vs. down, or you can use rcontrib:\nrcontrib -V+ -I+ @szene.opt -m L1_direkt -m L2_direkt -m L3_direkt -m L4_direkt -m L5_direkt -m L6_direkt szene.oct <messpunkte.xyz > koeffizientenmatrix.mtx\n\nBest,\nAndy\n\n\n\n\n\nOn Mon, May 11, 2015 at 8:51 AM, Aktuna, Berat <berat.aktuna at ibp.fraunhofer.de<mailto:berat.aktuna at ibp.fraunhofer.de>> wrote:\nHello Radiance community,\n\nI have a room with a few luminaires (no daylight) and given measurement points, and want to have the transfer matrix (influence of each luminaire on each measurement point) for this room.\n\nSince a few days I am trying around with rfluxmtx but got stuck in an error message: \"missing receiver surface!\"\n\nI'm using radiance on windows with no gui.\nI made a batch file to call:\noconv szene.rad lights.rad > szene.oct\nrfluxmtx -I+ szene.oct @szene.opt - lights.rad < messpunkte.xyz > koeffizientenmatrix.mtx\n\n\nin szene.rad I used #@rfluxmtx h=u before some polygons where the measurement points (messpunkte.xyz) are.\n\nSzene.opt is: -I+ -h -dp 512 -ar 128 -ds .15 -dj .7 -dt .05 -dc .5 -dr 3 -ss .7 -st .1 -ab 0 -aa .1 -ad 512 -as 256 -lr 10 -lw .002 -av 0 0 0\n\nLights.rad positions the luminaires with xform and calls #@rfluxmtx h=u before each.\n#@rfluxmtx h=u\n!xform -n L1_direkt        -t 1.21 2.6 2.6                    k_direkt.rad\n#@rfluxmtx h=u\n!xform -n L2_direkt        -t 3 2.6 2.6                          k_direkt.rad\n...\n\nI also tried to write #@rfluxmtx h=u inside the k_direkt.rad luminaire file, no difference.\n\nFeels like I tried every combination I can imagine for the luminaires and polygons but it just won't work.\nI have attached the files.\n\nDoes anyone have an idea or has a working example I could learn from?\n\nThanks,\nBerat\n\n\n\n_______________________________________________\nRadiance-general mailing list\nRadiance-general at radiance-online.org<mailto:Radiance-general at radiance-online.org>\nhttp://www.radiance-online.org/mailman/listinfo/radiance-general\n\n-------------- next part --------------\nAn HTML attachment was scrubbed...\nURL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20150512/df55bc78/attachment-0001.html>\n-------------- next part --------------\nA non-text attachment was scrubbed...\nName: koeffizientenmatrix_rgb.mtx\nType: application/octet-stream\nSize: 16764 bytes\nDesc: koeffizientenmatrix_rgb.mtx\nURL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20150512/df55bc78/attachment-0001.obj>\n\n", "replyTo": "<CAOG+NizRC=VO9jWiqGQ+TGknVBTsRQT6YdaLxTMBb2VMnCFaKA@mail.gmail.com>", "sender": "Aktuna, Berat", "isquestion": false, "tags": [], "id": "<B7C7EC576E73DA4791A2956F99AE30BF462A5D4E@fgdemucimp01exc.ads.fraunhofer.de>", "refs": ["<B7C7EC576E73DA4791A2956F99AE30BF462A5CBB@fgdemucimp01exc.ads.fraunhofer.de>", "<CAOG+NizRC=VO9jWiqGQ+TGknVBTsRQT6YdaLxTMBb2VMnCFaKA@mail.gmail.com>"], "datetime": "Tue, 12 May 2015 15:01:45 +0000", "email": "berat.aktuna at ibp.fraunhofer.de", "subject": "[Radiance-general] Calculating transfer matrix for measurementpoints with luminaires in a room"}