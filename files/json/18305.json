{"body": "\nI had some time over the weekend to an HDR map applied to a box. The glow\nmaterial does indeed block out the light from a directional light source.\nYou can work around this by using the \"source\" material type with a 360\ndegree angle to define a sky dome that has the HDR image applied.\n\nvoid colorpict sky_map\n7 red green blue envmap.hdr skymap.cal map_u map_v\n0\n1 1.0\n\nsky_map glow sky_mat\n0\n0\n4 1 1 1 0\n\nsky_mat source sky\n0\n0\n4 0 0 1 360\n\nI have uploaded an example scene that contains an image based sky and a\nlight source. The necessary \"skymap.cal\" file and a suitable HDR image for\nthe sky map are included.\n\nhttps://www.dropbox.com/s/t2d682sm1grrfbx/env_and_light.zip?dl=0\n\nThis mapping requires the image to be a rectangular panoramic image. I\nthink there was a command line to convert the angular HDR images to a\npanoramic projection but I couldn't find it.\n\nWith this method you can place your object in the scene and place some\nadditional lights in addition to the lighting embedded in the environment\nmap. If you want to illuminate the object by a different HDR image than the\nenvironment map you can create a scene and for the lighting and render the\nobject with clipping planes just before and after the object to remove all\nof the lighting map from the image. Then you render the \"background\" using\nthe environment map without object and combine both images with pcomb:\n\npcomb -e 'ro=if(ri(1)-.5,ri(1),ri(2));go=if(gi(1)-.5,gi(1),gi(2));\nbo=if(bi(1)-.5,bi(1),bi(2));' \\\nobject.hdr background.hdr > combined.hdr\n\nYou can read more on this here:\n\nhttps://sites.google.com/site/tbleicher/radiance/stencil\n\nHth,\nThomas\n\n\nOn Wed, Jul 22, 2015 at 4:42 PM, Minjung Kim <mkim85 at gmail.com> wrote:\n\n-------------- next part --------------\nAn HTML attachment was scrubbed...\nURL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20150726/93695882/attachment.html>\n\n", "replyTo": "Subject: [Radiance-general] rendering with environment maps", "sender": "Thomas Bleicher", "isquestion": false, "tags": [], "id": "<CAKGV-k2afjRKLjirwmLgQt8Wy8zx2tLF1_hTuQnyvcLdqWfc8g@mail.gmail.com>", "refs": ["<CAKDBSuC2=+_ddOb4x-86pdBw0QKmjpEi2a5msjk29fNveAmAOQ@mail.gmail.com>", "<CAKGV-k3DXcoRu5vgAAx37qJ7kwiZm6jzB0=6fTSbdH60Bya5YQ@mail.gmail.com>", "<CAKDBSuAM954=_NM4fVimJLcEJG2Z82VPpaHgrOs23XhNM-jq-A@mail.gmail.com>", "<CAKGV-k2016ZMagY4tS59jvLeLJecyipZRnNY5Ai63fy0TTQTbA@mail.gmail.com>", "<CAKDBSuBTO2YHUkb4q_ni=oY=q2pzFGdoLgHYNWmzERW1xQB18g@mail.gmail.com>"], "datetime": "Sun, 26 Jul 2015 20:22:41 -0500", "email": "tbleicher at gmail.com", "subject": "[Radiance-general] rendering with environment maps"}