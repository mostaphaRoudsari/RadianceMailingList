{"refs": ["<43D6716E.4040906@gmx.de>"], "id": "<1CDD89F5-4D79-4D93-9B17-D94DF3441D38@gmail.com>", "subject": "[Radiance-general] calculating correct illuminance from irradian", "email": "gregoryjward at gmail.com", "body": "\nHi Christian,\n\nThanks for reading through the documentation.  I know it can be a\nfrustrating exercise, trying to find what you're looking for in the\nmany, widely dispersed sources available.  It looks like you did a\nthorough job.\n\n\nYes, sort of.  If your scene consisted of purely gray surfaces with\nno radiation outside the visible wavelength limits, then the numbers\nwould correspond to watts/meter^2 exactly.  However, the real world\nhas stuff going on in UV and IR wavelengths (and beyond), and these\nshould be included in a true measure of radiant flux.\n\nMore technically, the values used in Radiance (by convention)\ncorrespond to a transformation of the CIE XYZ coordinates to an RGB\ncolor space, with a conversion factor of 179 lumens/watt to make a\nvague correspondence to radiometric units with the above\nassumptions.  So long as the same conversion is applied in reverse\nwhen getting back to photometric quantities, all is well.  The exact\ncolor transform used is your next question.\n\n\nThe RGB color space used in Radiance is defined by the following\nconstants, defined in ray/src/common/color.h:\n\n#define  CIE_x_r                0.640           /* nominal CRT\nprimaries */\n#define  CIE_y_r                0.330\n#define  CIE_x_g                0.290\n#define  CIE_y_g                0.600\n#define  CIE_x_b                0.150\n#define  CIE_y_b                0.060\n#define  CIE_x_w                0.3333          /* use true white */\n#define  CIE_y_w                0.3333\n\nThese same constants are defined in ray/src/cal/cal/xyz_rgb.cal for\nconvenient conversion between XYZ and RGB coordinates.  The Y(R,G,B)\nfunction from this file reduces to:\n\nY(R,G,B) = 0.26510582*R + 0.67010582*G + 0.0647883598*B;\n\nwhich is basically the same as what you have above.  Except for the\ndifference in the green channel chromaticities and the white point,\nthese primaries are in fact the same as used for the standard sRGB\ncolor space.  If it wouldn't have thrown everything off slightly with\nlittle benefit, I might have switched to the sRGB primaries in\nRadiance when this standard came out.\n\nIn fact, the color primaries in Radiance can be whatever you choose\nthem to be.  As I said, this is all by convention, and the actual\ncalculation only converts from RGB to luminance to determine whether\nor not to truncate the ray tree with the -lw option.  Since this is\nreally a minor effect, it actually doesn't matter what color space\nyou render in, and if you want to know how Radiance may be used to\nobtain more accurate color results, consult the following paper:\n\nhttp://www.anyhere.com/gward/papers/egwr02/\n\nI hope this helps.\n-Greg\n\n", "isquestion": false, "replyTo": "Subject: [Radiance-general] calculating correct illuminance from irradianc", "tags": [], "sender": "Gregory J. Ward", "datetime": "Wed Jan 25 01:43:53 2006"}