{"refs": ["<4447A1E3.80806@gmx.de>"], "id": "<C7234011-9313-428D-AC4D-E5A7BA133106@gmail.com>", "subject": "[Radiance-general] Re Re:  trans or glass material, rectangular,luminous opening problem", "email": "gregoryjward at gmail.com", "body": "\nHi Christian,\n\n\nI really don't know where you got the 0.92 value from a normal\ntransmittance of 0.642, assuming that's what Y is.  The proper\nprocedure is to figure out the transmission from the transmittance\nusing ray/src/cal/cal/trans.cal, which is also discussed on p. 240 of\n\"Rendering with Radiance.\"  First, you need to normalize your RGB\nvalues to match your Y normal transmittance.  For this, you can use\nray/src/cal/xyz_rgb.cal.  Run the following:\n\ncd ray/src/cal/cal\nicalc xyz_rgb.cal trans.cal\n\nLet's say you have a measured RGB of 82 53 19, you would define a\nnormalization factor like so:\n\nnf = 0.642 / Y(82,53,19)\n\nThen, compute the actual RGB normal transmittances using:\n\n82 * nf\n$1=0.900124166\n\n53 * nf\n$2=0.581787571\n\n19 * nf\n$3=0.208565356\n\n(The lines with '$' in front are the outputs of icalc.)  Then, set\nthese values one by one to the Tn (normal transmittance) variable\nused in trans.cal, and query the tn (normal transmission) value that\ncorresponds:\n\nTn = $1\ntn\n$4=0.980257446\n\nTn = $2\ntn\n$5=0.6342239\n\nTn = $3\ntn\n$6=0.227507866\n\nThese are the values you actually use in glass:\n\nvoid glass LeeGlass\n0\n0\n3 0.980 0.634 0.228\n\nThis assumes your glass has an index of refraction of 1.52.  If this\nis wrong, then you should assign a different value of n before you\ncompute the tn values, and add the appropriate value to the glass\nprimitive.\n\n\nI have no clue what a Lee filter looks like.  Is it smokey?  Is it\nrough?  There is no roughness value for glass -- Radiance assumes\nthis is a polished surface.  In case of a rough front surface and a\nsmooth back surface, you will have to do something special.  In the\ncase of scattering in the transmission distribution, you can use the\ntrans type and use the winxmit.cal file with a brightfunc to\napproximate the angular transmission.\n\n-Greg\n\n", "isquestion": false, "replyTo": "<4447A1E3.80806@gmx.de>", "tags": [], "sender": "Gregory J. Ward", "datetime": "Thu Apr 20 17:51:25 2006"}