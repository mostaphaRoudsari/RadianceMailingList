{"body": "\nHi Jay,\n\nYou have to offer us some clues as to how you are attempting this\ncalculation.  The website you give shows a bunch of JPEG thumbnails.\nAre you converting those?  It seems that the author of this page is\nconverting them without considering gamma, then computing the log of\nthe non-linear gray values, which is basically nonsense.  However, in\nthe interest of reproducing their results, you can use:\n\n% djpeg egret2.jpg | ra_ppm -r -g 1 \\\n| pvalue -h -H -d -b | rcalc -e '$1=log($1)' | total -m\n\nUsing the egret pictures, this then gives:\n\n-2.08354495\n\nTo get the final log-average luminance, simply apply the exponent\nfunction:\n\n% ev 'exp(-2.0835)'\n\nThis yeilds:\n\n0.124493721\n\nNot exactly the 0.1212 value they give on the website, but close.\nNote that I didn't use a delta value in my calculation, but adding\none should raise this value rather than lower it.  A more intelligent\napplication of log averaging would apply a gamma to get back to a\nlinear color space, e.g.:\n\n% djpeg egret2.jpg | ra_ppm -r -g 2.4 \\\n| pvalue -h -H -d -b | rcalc -e '$1=log($1)' | total -m\n\nApply the exp() function to this result gives a much smaller result:\n\n0.00687406256\n\n-Greg\n\n\n", "replyTo": "Subject: [Radiance-general] Average luminance calculation", "sender": "Gregory J. Ward", "isquestion": false, "tags": [], "id": "<A08E5BFA-813D-44F5-960F-3AA4BE04737A@gmail.com>", "refs": ["<42AF15CD.3010205@uccs.edu>"], "datetime": "Tue Jun 14 20:44:55 2005", "email": "gregoryjward at gmail.com", "subject": "[Radiance-general] Average luminance calculation"}