{"body": "\nHi Greg,\nI am using OpenCV to do the image manipulation. I am using c to do the\ncalculation. following is the code that i had written.\nI know its of topic -use of opencv. but i couldnt find any other useful\ninformation/help thats why i posted my query on the mailing list.\nI am basically caluclating the log of pixel values. and hten dividing it\nby no of pixels in an image. and finally taking exponent of that.\nThanks for the prompt reply.\nJay\n/////////////////////////////////////////////////////////CODE\nSNIPPET-OPENCV,C///////////////////////////////////////\n/for( y = 1; y <height ; y++ )\n{\nfor( x = 1; x < width; x++ )\n{\nuchar temp_blue =(uchar)(src->imageData +\nsrc->widthStep*y)[x*3];\nuchar temp_green = (uchar)(src->imageData +\nsrc->widthStep*y)[x*3+1];\nuchar temp_red  = (uchar)(src->imageData +\nsrc->widthStep*y)[x*3+2];\n\ntemp = (0.27*temp_red) + (0.67*temp_green) +\n(0.06*temp_blue);\ntemp1 = log10(temp);\ntemp2 = log(temp);\n\nluminance_10 = temp1 + luminance_10;\nluminance_e = temp2 + luminance_e;\n}\n}\n\nint pixel = src->width * src->height;\nprintf(\"Width-%d,Height-%d\\n\",width,height);\ndouble luminance10_per_pixel = (luminance_10/pixel);\ndouble luminanceE_per_pixel = (luminance_e/pixel);\n// double image_key = pow (pixel,luminance);\nprintf(\"NO of pixels ->%d\\n\\n\",pixel);\n//luminance values for log10\nprintf(\"----luminance values for log10------\\n\");\n//printf(\"Luminance  ->%f\\n\",luminance);\n//printf(\"luminance/pixel ->%f\\n\",value);\nprintf(\"exp(luminance10)/pixel->%f\\n\",exp(luminance_10)/pixel);\n\nprintf(\"exp(luminance10/pixel)->%f\\n\\n\\n\",exp(luminance10_per_pixel));\n//luminance values for loge\nprintf(\"----luminance values for loge------\\n\");\nprintf(\"exp(luminanceE)/pixel->%f\\n\",exp(luminance_e)/pixel);\nprintf(\"exp(luminanceE/pixel)->%f\\n\",exp(luminanceE_per_pixel));/\n\n", "replyTo": "", "sender": "Jay", "isquestion": true, "tags": [], "id": "<42AF348D.2090607@uccs.edu>", "refs": [], "datetime": "Tue Jun 14 21:49:21 2005", "email": "jpothara at uccs.edu", "subject": "[Radiance-general] Average luminance calculation"}