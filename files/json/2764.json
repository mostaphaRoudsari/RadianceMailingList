{"body": "\n--- (previous message was messed up a bit, hope this times it is better) ---\n\nHi all,\n\nI am writing a BRTD material which I want to use to change the diffuse component of a surface, related to a certain direction and the surface\nnormal. Radiance reports: \"error bad arguments for BRTDfunc\n\nI get the impression that the rfdif, gfdif, bfdif, rbdif, gbdif and bbdif are not variables ?\nIf these are not variables, how can I change/calculate/define the diffuse component in a BRTDfunc?\nSee the bold lines of the example in my cal file.\n\nI appreciate any suggestions !\n\nIebele\n\n<--- snip  ---->\n\n{\n\ndirectional.cal\n\narg10 red diffuse\narg11 green diffuse\narg12 blue diffuse\narg13 direction x\narg14 direction y\narg15 direction z\n\n}\n\n{ RGB values for the reflection  }\n\nvalr  = arg(10);\nvalg  = arg(11);\nvalb  = arg(12);\nxdir = arg(13);\nydir = arg(14);\nzdir = arg(15);\n\n\n{ dot product direction and normal }\nDdN = (xdir*Nx)+(ydir*Ny)+(zdir*Nz);\n\n{ always return a positive value }\nmulti = if(DdN, DdN, -DdN) ;\n\n*reflr* = CrP + (multi*valr)  ;\n*reflg* = CgP + (multi*valg)  ;\n*reflb* = CbP + (multi*valb)  ;\n\n{\n\nexample usage:\n\nvoid BRTDfunc LAYER114\n10\n0 0 0                          / reflection\n0 0 0                          / specular\n0 0 0\ndirectional.cal\n0\n15\n*reflr reflg reflb*              / diffuse front\n*reflr reflg reflb*              / diffuse back\n0 0 0                          / trans\n0.8 0.7 0.6                    / color of surface\n0.57735 0.57735 0.57735        / vector defining bright side of surface\n\n}\n\n\n\n-------------- next part --------------\nAn HTML attachment was scrubbed...\nURL: http://radiance-online.org/pipermail/radiance-general/attachments/20050930/633ef963/attachment.html\n", "replyTo": "Subject: [Radiance-general] Calculating diffuse component in a BRTDfunc", "sender": "atelier iebele abel", "isquestion": false, "tags": [], "id": "<433D4A33.9030206@iebele.nl>", "refs": ["<07fa01c5c5a7$c52e3fc0$0c01a8c0@JELLE> <433D4749.5010302@iebele.nl>"], "datetime": "Fri Sep 30 16:20:41 2005", "email": "atelier at iebele.nl", "subject": "[Radiance-general] Calculating diffuse component in a BRTDfunc"}