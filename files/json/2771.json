{"body": "\nHi all,\n\nI am writing a BRTD material which I want to use to change the diffuse\ncomponent of a surface, related to a certain direction an the surface\nnormal.\nRadiance reports: error bad arguments for BRTDfunc\nWhat am I doing wrong here?\n\nI get the impression that the rfdif, gfdif, bfdif, rbdif, gbdif and\nbbdif are not variables ???\nIf these are not variables, how can I change/calculate/define the\ndiffuse component in a BRTDfunc?\nSee the bold lines of the example in my cal file.\n\nI appreciate any suggestions !\n\nIebele\n\n\n<--- snip  ---->\n\n\n{\ndirectional.cal\n\narg10 red diffuse\narg11 green diffuse\narg12 blue diffuse\narg13 direction x\narg14 direction y\narg15 direction z\n}\n\n{ RGB values for the reflection  }\nvalr  = arg(10);\nvalg  = arg(11);\nvalb  = arg(12);\nxdir = arg(13);\nydir = arg(14);\nzdir = arg(15);\n\n{ dot product direction and normal }\nDdN = (xdir*Nx)+(ydir*Ny)+(zdir*Nz);\n\n{ always return a positive value }\nmulti = if(DdN, DdN, -DdN) ;\n\n*reflr = CrP + (multi*valr)  ;\nreflg = CgP + (multi*valg)  ;\nreflb = CbP + (multi*valb)  ;*\n\n\n{\nexample usage:\nvoid BRTDfunc LAYER114\n10\n0 0 0                          / reflection\n0 0 0                          / specular\n0 0 0\ndirectional.cal\n0\n15\n* reflr reflg reflb              */ diffuse front*\nreflr reflg reflb  *            / diffuse back\n0 0 0                          / trans\n0.8 0.7 0.6                    / color of surface\n0.57735 0.57735 0.57735        / vector defining bright side of\nsurface\n}\n\n\n\n\n", "replyTo": "Subject: [Radiance-general] Calculating diffuse component in a BRTDfunc", "sender": "atelier iebele abel", "isquestion": false, "tags": [], "id": "<433D4749.5010302@iebele.nl>", "refs": ["<07fa01c5c5a7$c52e3fc0$0c01a8c0@JELLE>"], "datetime": "Fri Sep 30 16:08:17 2005", "email": "atelier at iebele.nl", "subject": "[Radiance-general] Calculating diffuse component in a BRTDfunc"}