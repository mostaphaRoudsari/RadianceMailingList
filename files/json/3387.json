{"body": "\nHi Bob,\n\nYou need to use a mapping that indexes off the ray directions rather\nthan locations, which are meaningless for sources (as you\ndiscovered).  The fisheye.cal file included in the ray/lib directory\nshould be a good starting point:\n\n{\nCalculate coordinates for a 180 degree fisheye lens.\nAssume view direction is (0,1,0), view up (0,0,1), (1,0,0)\nright.\n\n4/30/90\n}\n\nfish_u = .5 + Dx/fish_Rxz * fish_Ry;\nfish_v = .5 + Dz/fish_Rxz * fish_Ry;\n\nfish_Rxz = sqrt(Dx*Dx + Dz*Dz);\nfish_Ry = Acos(Dy) / PI;\n\n----------\nYou may need to apply a rotation to this if your z-axis points up, as\nis usually the case.  Something like:\n\nvoid colorpict cloud_pat\n9 red green blue clouds.pic fisheye.cal fish_u fish_v -rx 90\n0\n0\n\ncloud_pat brightfunc skyfunc\n2 skybr skybright.cal\n0\n7 1 3.58e+01 3.07e+01 1.55e+00 0.054270 -0.269929 0.961350\n\n-------\nIn this example, I have added your cloud pattern to a sky created by\ngensky.  If you have an HDR image of the sky you're working from, you\nmay just be able to go with that.\n\nAdditional resources:\n\nMark Stock's Radiance Miscellany page:\nhttp://mark.technolope.org/pages/radmisc.html\n\nLink to Simon Crone's Radiance skies collection:\nhttp://radsite.lbl.gov/radiance/pub/libraries/\n\n-Greg\n\n\n", "replyTo": "Subject: [Radiance-general] clouds textures", "sender": "Greg Ward", "isquestion": false, "tags": [], "id": "<2F7D51C0-E653-4435-92B6-3069513A6EBF@gmail.com>", "refs": ["<43DFA2F4.5090005@semanticlight.com>"], "datetime": "Tue Jan 31 18:01:53 2006", "email": "gregoryjward at gmail.com", "subject": "[Radiance-general] clouds textures"}