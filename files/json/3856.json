{"body": "\nHi Will,\n\n\nThis is the correct method.  Converting to and from works for me:\n\n% icalc xyz_rgb.cal\nX(.351,.918,.015)\n$1=0.480220278\nY(.351,.918,.015)\n$2=0.709181111\nZ(.351,.918,.015)\n$3=0.134033796\nR($1,$2,$3)\n$4=0.351\nG($1,$2,$3)\n$5=0.918\nB($1,$2,$3)\n$6=0.015\n\nYou could have a problem if you go from XYZ through RGB to XYZ again,\nsince RGB gets truncated to zero, where negative values do in fact\nexist for some visible XYZ colors.\n\n\nNo, it really assumes that you are viewing under the same tungsten\nilluminant.  To complete the white point conversion to some other\nadaptation, you need to apply the final matrix equation in Section 2\nof the paper.  This can be done using ra_xyze and the -p option if\nyou happen to know your display's primaries, e.g.:\n\n% ra_xyze -r -p .603 .352 .289 .590 .146 .066 .319 .348 sharp.pic\ndisplay.pic\n\nThis does not account for the surround condition, but I don't know\nwhat to do for that, either.\n\n\nNope, they should all be between 0 and 1.  Since they are not, you\nshould assume these are percentages and divide them by 100.  This\nstill yields a negative value for green, but I get a Sharp RGB of\n(0.2614, -0.0143, 0.0035).  I'm not sure how you got your values --\nare they not Sharp RGB?  The xyz_rgb.cal file should truncate the\ngreen value to zero.  Your XYZ value seems to be right on the edge of\nthe visible boundary.  A Z value of 0 is highly unusual.\n\n\nYes, or nearly.  Actually, you can have values slightly greater than\n1 in some cases, but negative values won't even be storable in a\nRadiance picture unless you use some fancy means to render with\nrtrace and convert from RGB to XYZ prior to storing the picture.\n\n\nNo, don't do that.\n\n-Greg\n\n", "replyTo": "Subject: [Radiance-general] specifying sources", "sender": "Gregory J. Ward", "isquestion": false, "tags": [], "id": "<2CE14865-D4C4-4D0F-9AD8-D08DFF3570C2@gmail.com>", "refs": ["<44275907.1060204@oriel.ox.ac.uk>\t<1F9D2A0E-480A-419C-B8DD-C69445718C6E@gmail.com>\t<4428173E.4050909@oriel.ox.ac.uk>\t<D10F8691-3A5F-4142-A92D-F3B454AF5CEC@gmail.com>\t<44283E82.1020102@oriel.ox.ac.uk>", "<BB7EBF9F-50CA-417D-9286-8C90CF482682@gmail.com>", "<44288065.5030108@oriel.ox.ac.uk>"], "datetime": "Tue Mar 28 03:34:44 2006", "email": "gregoryjward at gmail.com", "subject": "[Radiance-general] specifying sources"}