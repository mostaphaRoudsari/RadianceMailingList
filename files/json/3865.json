{"body": "\nHi Will,\n\n\nI don't have a ready example to offer, but the basic idea is to apply\nthe HDR capture as a pattern to your light source, indexing the image\na perspective projection:\n\nvoid colorpict spot_dist\n7 red green blue capture.hdr .\n(-Dx/Dz)/A1+.5  (Dy/Dz)/A1+.5\n0\n1 0.404026\n\nspot_dist light spot_output\n0\n0\n3 3881 3881 3881\n\nThe value given in the colorpict's first argument (A1) is the tangent\nof the subtended horizontal angle.  The image (capture.hdr) is\nassumed to be square.\n\nTo get the right output value for your lamp, you can create as scene\nto match the lux measurement you have and render it in rvu with the -\ni option, having it report on the illuminance for a surface at the\nsame distance with the 'trace' command.  Then, apply a correction\nequal to the ratio between this value and the measured one to your\nlight color (3881 in the example above).\n\n\nRendering with an RGB color isn't very accurate and won't look right\nunless you apply a more sophisticated spectral technique, such as the\none described in the paper:\n\nhttp://www.anyhere.com/gward/papers/egwr02/\n\n\nThe following command will take XYZ values on its input (triplets)\nand produce Radiance RGB values on its output:\n\nrcalc -f ray/src/cal/xyz_rgb.cal -e '$1=R($1,$2,$3);$2=G($1,$2,$3);\n$3=B($1,$2,$3);'\n\nExpect to be disappointed by the results if you don't apply white-\nbalancing afterwards.\n\n-Greg\n\n", "replyTo": "Subject: [Radiance-general] specifying sources", "sender": "Gregory J. Ward", "isquestion": false, "tags": [], "id": "<1F9D2A0E-480A-419C-B8DD-C69445718C6E@gmail.com>", "refs": ["<44275907.1060204@oriel.ox.ac.uk>"], "datetime": "Mon Mar 27 07:18:35 2006", "email": "gregoryjward at gmail.com", "subject": "[Radiance-general] specifying sources"}