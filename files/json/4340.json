{"refs": ["<49378E3A.8050803@gmx.net>\t<4938DB56.7070208@ise.fraunhofer.de>\t<4938DF21.5000804@gmx.net>\t<4938F959.6040208@ise.fraunhofer.de>\t<494F1759.9080707@nus.edu.sg>", "<494F5801.3070902@ise.fraunhofer.de> <495DE980.3010902@nus.edu.sg>"], "id": "<A2D9379A-F566-455D-83AC-A0B761F21BCD@lmi.net>", "subject": "[Radiance-general] experiences with the photon map", "email": "gregoryjward at gmail.com", "body": "\nHi Lars,\n\nIf you use the hemispherical fisheye type (-vth), you just need the\nstraight average of the circular area times pi to get the irradiance\n(times 179 for illuminance).  For angular fisheye perspectives, as\nyou might get from a camera or the -vta option, you need a solid\nangle correction equal to the cosine of the angle times the sine of\nthe angle divided by the angle itself (in radians) and additional\nnormalization .  It's a strange correction term, but here it is in a\npcomb command for a 190-degree fisheye lens:\n\npcomb -e 'sq(x):x*x' \\\n-e 'ar=190/2*PI/180*sqrt(sq(2/xmax*x-1)+sq(2/ymax*y-1))' \\\n-e 'cf=WE*sq(190*PI/180*2/(xmax+ymax))*if(ar-PI/2,0,if(ar-.01,cos(ar)\n*sin(ar)/ar,1))' \\\n-e 'lo=cf*li(1)'  input.hdr > corrected.hdr\n\nI believe this is correct.\n-Greg\n\n\n", "isquestion": false, "replyTo": "Subject: [Radiance-general] experiences with the photon ma", "tags": [], "sender": "Greg Ward", "datetime": "Fri Jan  2 09:42:55 2009"}