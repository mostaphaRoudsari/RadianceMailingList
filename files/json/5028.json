{"refs": ["<C746CF80.E0B7%andrew.mcneil@arup.com>"], "id": "<01240018-3522-480A-9E9D-EF02354899D2@lmi.net>", "subject": "[Radiance-general] Mkillum bsdf + sample density", "email": "gregoryjward at gmail.com", "body": "\nHi Andy,\n\nThat's some good guessing!  Yes, the difference is due to the very\ndifferent sampling strata.  I had to check my code (line 444 of src/\ngen/mkillum2.c) to verify.  I don't add 1, but round-off to the\nnearest integer, rather than the lesser one.\n\nWith regards to the mismatch of samples, this does cause some issues,\nparticularly near the zenith, where the altitude/azimuth strata used\nby mkillum are a very poor match to the Klems/Tregenza strata used for\nthe BSDF.  Mkillum does a reasonable job with normalization and sample\ndistribution to make sure some rays go through each little window (and\nthe s= setting can still affect this).  So long as the light and\ndistribution are not simultaneously \"peaky,\" it all works out.\n\nCheers,\n-Greg\n\n\n", "isquestion": false, "replyTo": "Subject: [Radiance-general] Mkillum bsdf + sample densit", "tags": [], "sender": "Greg Ward", "datetime": "Thu Dec 10 20:29:57 2009"}