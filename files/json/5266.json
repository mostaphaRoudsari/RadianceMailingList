{"refs": ["<001701cac07e$a4d33d80$ee79b880$@com>\t<ae80439c1003101043ufbcb5c6h32acf7be20852f41@mail.gmail.com>", "<367af6671003101053v423b2427o14831ae4018abb3@mail.gmail.com>"], "id": "<4B9847E5.6020405@gmx.net>", "subject": "[Radiance-general] calculating percentages of a given value ina \t.dat / .ok file", "email": "grobe at gmx.net", "body": "\nHi,\n\nI am not sure whether Nick wants to find out the fraction of the\nrequired illuminance level each point achieves (that is what Andrew\ncalculates) or the fraction of (the amount of) points that meet the\ncriteria. For the second you have three steps involved:\n\n1) filter the input according to you treshold (300lx)\n2) count the value meeting the criteria\n3) divide by the total number of points and multiply by 100 to get a\npercentage\n\nThis can be translated like into:\n\ncat test.dat | rcalc -e '$1=1; $2=if($1-299,1,0)' | total | rcalc -e\n'$1=100*$2/$1'\n\nThe first step, rcalc, takes one column (you can adapt this according to\nyour input file) and writes out two columns. The first is set to 1 for\nany input, the second is set to one for inputs > 2990 and to 0 for\nanything below.\n\nThe second step, total, sums up the result of the first step. You get\nthe sums of two columns - two numbers, the first being the amount of\noriginal input values, the second the amount of values that are above 299.\n\nThe third step, rcalc again, divides the number of points meeting the\ncriteria by the total number of values and multiplies this by 100. This\nresults in the percentage of values meeting the criteria.\n\nThere are quicker ways to achieve this, but I wanted a transparent\nformat that one can explain. Hope this helps, cheers\n\nLars.\n\n", "isquestion": false, "replyTo": "<367af6671003101053v423b2427o14831ae4018abb3@mail.gmail.com>", "tags": [], "sender": "Lars O. Grobe", "datetime": "Wed Mar 10 17:31:23 2010"}