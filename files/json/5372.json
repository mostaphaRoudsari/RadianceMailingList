{"body": "\nHi Iebele,\n\nTo use local u,v coordinate mapping (Lu,Lv) you need to use obj2mesh\nrather than obj2rad.\n\nHere is the process for making a mesh element:\n\nDefine mats.tree.rad using simple materials first as an example. The\nnames of the materials must correspond to the names of the materials\nindicated for the .obj geometry (take a look in the .mtl file to get\nthe names).\n\nmats.tree.rad:\n\nvoid plastic Bark\n0\n0\n5 1 1 1 0 0\n\nvoid plastic Leaf\n0\n0\n5 1 1 1 0 0\n\nGenerate tree.rtm as follows:\n\nobj2mesh -a mats.tree.rad tree.obj > tree.rtm\n\nCreat tree.mesh.rad as follows:\n\ntree.mesh.rad:\n\nvoid mesh tree\n1 tree.rtm\n0\n0\n\nTest you mesh:\n\nobjview tree.mesh.rad\n\nNow lets apply more complex materials using local u,v coordinate\nmapping. To do this you need the following image data:\n\n1. bark.pic\n2. aspect ratio for bark.pic (y/x), lets call it <arB>\n3. leaf.pic\n4. aspect ration for leaf.pic (y/x), lets call it <arL>\n5. leaf.matte.pic - this is the alpha/matte channel for the leaf.\nThe correct way to setup the matte is  for white to represent\nthe leaf and black to represent what is not the leaf. This\nmeans that you may have to invert the matte the comes from xfrog.\n\nNow lets create the complex materials in mats.tree.rad\n\nmats.tree.rad:\n\n#BARK definition\nvoid colorpict bark.tile\n7 red green blue Bark.pic . frac(Lu) frac(Lv)*<arB>\n0\n0\n\nbark.tile plastic Bark\n0\n0\n5 1 1 1 0 0\n\n#LEAF definition\nvoid colorpict leaf.tile\n7 red green blue Bark.pic . frac(Lu) frac(Lv)*<arL>\n0\n0\n\nleaf.tile plastic leaf.map\n0\n0\n5 1 1 1 0 0\n\nleaf mixpict Leaf\n7 leaf.map void green leaf.matte.pic . frac(Lu) frac(Lv)*<arL>\n0\n0\n\nNow recompile your mesh:\n\nobj2mesh -a mats.tree.rad tree.obj > tree.rtm\n\nNow view it:\n\nobjview tree.mesh.rad\n\nYou should add Bark and Leaf to your ambient exclude file/list if you do\nnot want them in the ambient calculation. You can use tree.mesh.rad\nalong with replmarks, xform or some other method to deploy the tree\nobject in the scene.\n\nThis should work fine. Let me know if you have any questions.\n\n-Jack\n\nGregory J. Ward wrote:\n\n--\n# Jack de Valpine\n# president\n#\n# visarc incorporated\n# http://www.visarc.com\n#\n# channeling technology for superior design and construction\n\n-------------- next part --------------\nAn HTML attachment was scrubbed...\nURL: http://radiance-online.org/pipermail/radiance-general/attachments/20070403/f60f4f6e/attachment.html\n", "replyTo": "<3A5269C9-5FB1-4650-AB2E-B053E73C6830@gmail.com>", "sender": "Jack de Valpine", "isquestion": false, "tags": [], "id": "<46128A7A.20305@visarc.com>", "refs": ["<CC0B19F4C6132F4D9FDDEBF194200FB502CDEDC9@ldcexc02.global.arup.com>\t<46112A63.60802@iebele.nl>\t<0A962F3E-9A34-47BF-9B37-5CCC55F55805@gmail.com>\t<46116EF4.9060604@visarc.com>", "<46127520.7090302@iebele.nl>", "<3A5269C9-5FB1-4650-AB2E-B053E73C6830@gmail.com>"], "datetime": "Tue Apr  3 19:10:57 2007", "email": "jedev at visarc.com", "subject": "[Radiance-general] Ambient exclude transfomed materialin\tinstances"}