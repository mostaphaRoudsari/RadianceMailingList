{"refs": ["<4bf4354e.0eed8c0a.5930.ffffddf5SMTPIN_ADDED@mx.google.com>"], "id": "<4BFACB64.2060609@gmail.com>", "subject": "[Radiance-general] Re: illum-like behaviour for sky dom", "email": "jacobs.axel at gmail.com", "body": "\nChris, Greg,\n\nthank you for the suggestions and for reminding me about the -pj 0\noption which is important in this case.\n\nI took the liberty of uploading a zbuffer image for those of you that\nhave never seen one (I don't think there is that many applications for it):\nhttp://www.luxal.eu/pickup/zbf_normtiff.jpg\n\nA zbuffer stores the distance to the objects as a grey value: Black is\nvery close, white very far away. When converting the zbuffer file to an\nimage, the -p[RGB] option needs to be set, since the zbuffer has only\none channel.\n\npvalue -r -h -y 768 +x 1024 -df -pG view1.zbf > zbf.hdr\n\nThe approach suggested by Greg works well. However, I ended up with a\nslightly different approach: Image one has the normal sky and is\nrendered with 'normal' options. Image two has the fancy sky in it and is\nrendered with -ab 0, making all objects except the sky black (as long as\nthe sun is switched off). I then use pcomb, telling it to use the pixel\nfrom the normal image if the fancy sky image is black at that point, and\nto use the pixel from the fancy sky otherwise.\n\nRES=600\nrpict $AMB -pj 0 -x $RES -y $RES -vf views/nice.vf \\\nnormal.oct > images/normal.hdr\nrpict $AMB -ab 0 -pj 0 -x $RES -y $RES -vf views/nice.vf \\\nbracelet.oct > images/fancymask.hdr\n\npcomb -e 'sel=if(gi(2),2,1)' -e 'ro=ri(sel);go=gi(sel);bo=bi(sel)' \\\nimages/normal.hdr images/fancymask.hdr > images/combined.hdr\n\nHere is the final result, with the solar bracelet 'painted' onto the\nsky. The zebra stripes indicate the hours of the day:\nhttp://www.luxal.eu/pickup/combined_pfilt.jpg\n\nI did not pursue the mapping approach further since my solar bracelet is\nparametric rather than an image.\n\nCheers\n\nAxel\n\n", "isquestion": false, "replyTo": "Subject: [Radiance-general] Re: illum-like behaviour for sky dom", "tags": [], "sender": "Axel Jacobs", "datetime": "Mon May 24 11:50:47 2010"}