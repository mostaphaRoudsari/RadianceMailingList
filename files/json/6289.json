{"refs": ["<928572.9599.qm@web57311.mail.re1.yahoo.com>", "<59223A21-3989-4893-936A-2A1276EB7824@lmi.net>", "<381239.43715.qm@web57311.mail.re1.yahoo.com>"], "id": "<103B0A5F-81E5-4486-96F4-010DC55CA8C0@lmi.net>", "subject": "[Radiance-general] 3d Depth of a pixel", "email": "gregoryjward at gmail.com", "body": "\nHi Brajesh,\n\nLars is right that you can use vwrays with rtrace to get more flexible output.  The Z-buffer file is a string of binary floats, and not formatted as such.  You need to pass it through pvalue if you want to produce a (grayscale) image.  You can use the following sequence if you like:\n\nrpict -x ResX -y ResY -z  depth.zbf  -vf  camera.vp  scene.oct > scene.hdr\npvalue -r -h -df -b `getinfo -d < scene.hdr` depth.zbf > depth.hdr\n\nNotice the back-quotes above, which substitute the resolution output of getinfo -d on the command line.  You can then view \"depth.hdr\" as a grayscale image or convert to color using falsecolor:\n\nfalsecolor -l Depth -s auto -m 1 -i depth.hdr > depth_fc.hdr\n\nIf you don't want the grayscale image at all, you can combine your pvalue and falsecolor commands like so:\n\npvalue -r -h -df -b `getinfo -d < scene.hdr` depth.zbf | falsecolor -l Depth -s auto -m 1 > depth_fc.hdr\n\nBest,\n-Greg\n\n\n\n", "isquestion": false, "replyTo": "Subject: [Radiance-general] 3d Depth of a pix", "tags": [], "sender": "Greg Ward", "datetime": "Thu, 17 Mar 2011 08:40:42 -0700"}