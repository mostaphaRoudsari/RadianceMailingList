{"refs": ["<C9CC9A39.D82C%kevinv@uidaho.edu>"], "id": "<76D88DD7-BDCE-4274-8269-C651E32FA089@lmi.net>", "subject": "[Radiance-general] HDR image absolute calibration cmd lin", "email": "gregoryjward at gmail.com", "body": "\nHi Kevin,\n\nWhat you ask is a very tricky scripting operation.  If you know exactly where the point you want to calibrate is in every image, you can script it with some combination of the Radiance ra_xyze, pcompos, pvalue, and total programs.  Let's say you know that you have a value of 322 cd/m^2 in the square from (x,y)=(300,450) to (380,530) -- y pixels measured from the bottom of the image and x from the left, you could compute the average using:\n\nset img_val=`ra_rxyze -o capture.hdr | pcompos -x 80 -y 80 - -300 -450 | pvalue -h -H -d -pG | total -m`\n\nYou could then use this to compute a correction (calibration) factor to the image exposure:\n\nset meas=322\nset ecorr=`ev \"179*$img_val/$meas\"`\n\nThe 179 value is the standard lumens/watt conversion used in Radiance, and the 322 value is your measured luminance value.  You then need to add the above to your image header, which can be accomplished with getinfo like so:\n\n(getinfo < capture.hdr ; echo EXPOSURE=$ecorr ; getinfo - < capture.hdr) > calibrated.hdr\n\nI hope this helps.\n\n-Greg\n\n-------------- next part --------------\nAn HTML attachment was scrubbed...\nURL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110414/27cd955b/attachment.html>\n\n", "isquestion": false, "replyTo": "Subject: [Radiance-general] HDR image absolute calibration cmd li", "tags": [], "sender": "Greg Ward", "datetime": "Thu, 14 Apr 2011 11:52:05 -0700"}