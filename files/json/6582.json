{"refs": [], "id": "", "subject": "[Radiance-general] rtcontrib - setting maximum number of open fileson OSX 10.6.8", "email": "ichael at coolshadow.com", "body": "Message-ID: <66BA0299-F9AE-45C0-8CF6-11C5429EC6D4@coolshadow.com>\n\nMy second question is for Radiance users running OSX. I'm having trouble setting the maximum number of open files to more than 1024. I'm running OSX 10.6.8, and there seems to be two ways to change the maximum number of open files - one using ulimit and one using launchctl.\n\nIn .bash_profile I have this line:\n\nulimit -S -n 4096\n\nIn etc/launchchd.conf I have this:\n\nlimit maxfiles 4096\nsysctl -w kern.maxfiles=4096\n\nand in etc/sysctl.conf I have:\n\nkern.maxfiles=4096 kern.maxfilesperproc=4096\n\nIn a terminal line, when I enter launchctl limit  I see this:\n\ncpu         unlimited      unlimited\nfilesize    unlimited      unlimited\ndata        unlimited      unlimited\nstack       8388608        67104768\ncore        0              unlimited\nrss         unlimited      unlimited\nmemlock     unlimited      unlimited\nmaxproc     266            532\nmaxfiles    4096           4096\n\nWhich is good. 4096 is more than the 2306 files I want rtcontrib to talk to at the same time.\n\nBut then, looking at ulimit -a in a terminal, I see this:\n\ncore file size          (blocks, -c) 0\ndata seg size           (kbytes, -d) unlimited\nfile size               (blocks, -f) unlimited\nmax locked memory       (kbytes, -l) unlimited\nmax memory size         (kbytes, -m) unlimited\nopen files                      (-n) 1024\npipe size            (512 bytes, -p) 1\nstack size              (kbytes, -s) 8192\ncpu time               (seconds, -t) unlimited\nmax user processes              (-u) 266\nvirtual memory          (kbytes, -v) unlimited\n\nWhich is bad - 1024 is less than the 2306 files I want rtcontrib to talk to at the same time. Its also surprising given that it should be set to 4096 by .bash_profile.\n\nThen when I try ulimit -n 4096, I get this:\n\nbash: ulimit: open files: cannot modify limit: Operation not permitted\n\nIf I use sudo, it takes the command, but when I look at ulimit -a again, the open files limit still says 1024, and despite what launchctl limit says, 1024 is the governing number of maximum open files.\n\nHas anyone out there had success setting this in OSX 10.6 or higher? Or has anyone updated to 10.7 (just released today) and had success?\n\nMany thanks,\nMichael\n\n-------------- next part --------------\nAn HTML attachment was scrubbed...\nURL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110720/d70525df/attachment.html>\n\n", "isquestion": true, "replyTo": "", "tags": [], "sender": "Michael Martinez", "datetime": "Wed, 20 Jul 2011 12:01:18 -0700"}