{"refs": ["<CANi9k9QpazzCACKTmB8=B+TkqKzHh1d0d52D81noCX470q7hCA@mail.gmail.com>"], "id": "<EB7EB623-E4EC-4831-9E9E-E134FBDFF291@lmi.net>", "subject": "[Radiance-general] Spherical sensor", "email": "gregoryjward at gmail.com", "body": "\nHi Minki,\n\nIf this quantity is equal to the integral of luminance over the full sphere, then it would be the same as 4*PI times the average luminance in all directions.  You can compute the latter quantity by averaging the output of an appropriate rtrace calculation of random rays over the sphere.  Something like the following should work:\n\nset N=10000\nset orig=(0 0 0)\ncnt $N | rcalc -of -e 'Dz=1-2*($1+rand(.77-.61*recno))/'$N -e 'phi=2*PI*($1+rand(-.10+.39*recno))'/$N \\\n-e 'rxy=sqrt(1-Dz*Dz);Dx=rxy*cos(phi);Dy=rxy*sin(phi)' \\\n-e \"Ox:$orig[1];Oy:$orig[2];Oz:$orig[3]\" \\\n-e '$1=Ox;$2=Oy;$3=Oz;$4=Dx;$5=Dy;$6=Dz' \\\n| rtrace -h -ff [options] scene.oct \\\n| total -if3 -m \\\n| rcalc -e '$1=179*4*PI*($1*.265+$2*.670+$3*.065)'\n\nThis should take ray samples in a stratified random spiral over the sphere.  The 3 averaged radiance values (RGB) output should be multiplied by 179 and 4*PI as above, unless I misunderstand the definition of spherical illuminance.\n\nBest,\n-Greg\n\n\n\n", "isquestion": false, "replyTo": "Subject: [Radiance-general] Spherical sensor", "tags": [], "sender": "Greg Ward", "datetime": "Wed, 14 Dec 2011 22:07:12 -0800"}