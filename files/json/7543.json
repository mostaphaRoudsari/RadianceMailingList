{"refs": ["<CAMxTbri9-2+CYCjBe0O80GN9NDWvhnsWT=TTheAKi96faYM-uA@mail.gmail.com>"], "id": "<50825B2F.7040505@gmx.net>", "subject": "[Radiance-general] sky visibility", "email": "grobe at gmx.net", "body": "\nHi Patrick,\n\nDid you consider genklemsamp?\n\nIf you just want to not apply the cosine but get either 1 or 0 for rays\nhitting the sky or not, pipe the output from rtrace to rcalc. E.g. sum\nthe rays that are above the treshold (0.00001 here) and total number of\nrays traced, and then get the fraction of rays over the treshold using\nrtrace again:\n\n<your rtrace command> | rcalc -e ?$1=if($1-.00001,1,0); $2=1? | total |\nrcalc -e ?$1=$1/$2?\n\nThat could be done using binary floats instead of ascii to make it a bit\nmore efficient using proper -if3, -of options for all commands. The same\ncan be done on e.g. fisheye images using pcomb.\n\nA general hint, you can also get the surface identifier (-os) at the\nfirst ray intersection instead of e.g. the radiance value from rtrace\nand pass that through grep.\n\nCheers, Lars.\n\n\n", "isquestion": false, "replyTo": "Subject: [Radiance-general] sky visibilit", "tags": [], "sender": "Lars O. Grobe", "datetime": "Sat, 20 Oct 2012 10:05:03 +0200"}