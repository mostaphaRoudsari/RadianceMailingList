{"refs": ["<000AF3DF-CFF8-40C1-9055-9B76D646471F@coolshadow.com>"], "id": "<5FA90BD9-A861-4A54-9FB8-0988EEA4CDDF@coolshadow.com>", "subject": "[Radiance-general] Falsecolor tricks", "email": "chris at coolshadow.com", "body": "\nHi Michael,\n\nI had asked a similar question several years ago on how to extract a value at a specific pixel location in the original HDR image. Greg responded with the following (you'll have to pass the result to the equivalent pixel location in the false color HDR using psign  piped into pcompos *don't forget to add the pixel width of the false color scale  to the x-location in the false color image);\n\nFrom Greg??.\nIf you haven't passed the picture through pfilt or otherwise introduced an exposure change, then it would be much faster to use pcompos to extract the value you're interested in.  E.g.:\n\npcompos -x 1 -y 1 rendered_image.hdr -Xpos -Ypos | pvalue -h -H -d | rcalc -e '$1=($1*0.265+$2*0.670+$3*0.065)*179'\n\nIf getinfo shows one or more EXPOSURE= lines in the header, then the above won't quite work and you'll need to use pvalue.  The syntax for the command you want is:\n\npvalue -o -h -H rendered_image.hdr | rcalc -e 'eq(a,b):if(a-b+.5,b-a+.5,-1);and(a,b):if(a,b,a)' \\\n-e 'cond=and(eq($1,x_location),eq($2,y_location))' -e '$1=$3;$2=$4;$3=$5'\n\nNasty, eh?  It's also slow.  Use pcompos if you can.  A faster alternative to the above is to use sed:\n\npvalue -o -h -H rendered_image.hdr | sed -n 's/^ *x_location  *y_location //p'\n\nEXAMPLE:\npvalue -o -h -H dec_cie_43-63tvis_dome_sit_west.hdr  | sed -n 's/^ *284  *248 //p' | rcalc -e \\ '$1=($1*0.265+$2*0.670+$3*0.065)*179' > value.txt\n_________________________\n\nFor the second part\n\nex:\npsign -cf 1 1 1 -cb 0 0 0 -h 16 the_value_from above  | pompos     falsecolor_image.hdr +t .5 - x_location y_location >     image_out.hdr\n\n\n\nHope this helps,\n\nChris\nOn Sep 24, 2013, at 1:25 PM, Michael Martinez <michael at coolshadow.com> wrote:\n\n\n-------------- next part --------------\nAn HTML attachment was scrubbed...\nURL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20130924/5f93f095/attachment.html>\n\n", "isquestion": false, "replyTo": "Subject: [Radiance-general] Falsecolor tricks", "tags": [], "sender": "Christian Humann", "datetime": "Tue, 24 Sep 2013 14:54:04 -0700"}