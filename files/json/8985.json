{"refs": ["<CA+BymkajDdGwKtU-FwV-1Wf5wVY+bqApbD1p0_Oy9Vu99LaVAQ@mail.gmail.com>", "<53E8865C.50104@gmx.net>"], "id": "<73218BA6-18DD-4633-A082-EB7020FAFB6D@lmi.net>", "subject": "[Radiance-general] Texture Baking?", "email": "gregoryjward at gmail.com", "body": "\nHello Trygve,\n\nTo create an \"illumination map,\" which is really just a map of (u,v) texture pixels that correspond to RGB irradiance values, you need to generate the (X,Y,Z) Cartesian world coordinates and (Nx,Ny,Nz) world surface normal direction vectors for each pixel in your map.\n\nFeed these values to rtrace as ASCII (-fac) or raw floating-point (-ffc) to create your illumination map like so:\n\nrtrace -I -fac -x $xres -y $yres -n $nproc $render_options scene.oct < surface_positions.txt > illumination_map.hdr\n\nThe first option, upper-case \"-I\", tells rtrace to compute irradiance rather than radiance, and to expect surface positions and normals rather than ray origins and directions.  Your input file (surface_positions.txt) might start like this for a wall parallel to the X-Z plane:\n\n10.0\t3.70\t1.51\t0\t1\t0\n10.1\t3.70\t1.51\t0\t1\t0\n10.2\t3.70\t1.51\t0\t1\t0\n...\n10.0\t3.70\t1.61\t0\t1\t0\n10.1\t3.70\t1.61\t0\t1\t0\n...\n\nI think you get the idea.  You need to specify the -x and -y options to rtrace to get it to generate a valid Radiance picture, which you may then convert to another format if you like.  The -n option allows you to run rtrace on multiple processors to speed the calculation up.  If you are computing interreflections, be sure to specify an ambient file (-af option) in that case.\n\nI hope this is enough to get you started.\n\n\n\n", "isquestion": false, "replyTo": "Subject: [Radiance-general] Texture Baking?", "tags": [], "sender": "Greg Ward", "datetime": "Mon, 11 Aug 2014 08:51:51 -0700"}