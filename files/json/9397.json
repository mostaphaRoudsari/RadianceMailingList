{"body": "\nHi Andrew,\n\nThank you for your reply. Nothing happens when I play with the FTINY. The image remains the same if I remove FTINY and also if I change the expecting rounding error to 2e-3 or larger. I guess the error might be elsewhere.\n\nBelow you will find the input for the illum and falsecolor image.\n\n# calculating illumince values on a virtual plan using vwrays\nvwrays -x 600 -y 600 -vf views/kontor_ned.vp \\\n| rcalc -e '$1=$1; $2=$2; $3=0.8; $4=$4; $5=$5; $6=1' \\\n| rtrace -ab 3 -aa 0.1 -ar 128 -ad 512 -as 256 -fac -w -I -ov `vwrays -d -vf views/kontor_ned.vp -x 600 -y 600` \\\noctrees/kontor_CIE.oct > images/vwrays_illum.pic\n\n# making falsecolor image of the illuminace image\nfalsecolor -n 10 -s 1000 -lw 0 -cl -i images/vwrays_illum.pic >\nimages/vwrays_illum_falsecolor.pic\n\nBelow is the viewfile kontor_ned.vp\n\nrview -vtl -vp 6.4 8.4 2.79 -vd 0 0 -1 -vu 1 0 0 -vh 16.6 -vv 12.8 -vo 0 -va 0 -vs 0 -vl 0\n\nBelow is the input for the working plane image:\n\nvoid colorpict fc_val\n7 red green blue images/vwrays_illum_falsecolor.pic fc_4.cal fc_u fc_v\n0\n0\n\nfc_val glow fc_glow\n0\n0\n4 10 10 10 0\n\nfc_glow polygon office.working_plane\n0\n0\n12\n??? ???????????????? 0.2??? ?????????????? 0.2??? ???????????????? 0.8\n??? ???????????????? 13.0??? ?????????????? 0.2???\n????????????????\n0.8\n??? ???????????????? 13.0??? ????????????? 16.8??? ???????????????? 0.8\n??? ???????????????? 0.2??? ????????????? 16.8??? ???????????????? 0.8\n\nvoid mixpict mp\n7 fc_glow void nonzero images/vwrays_illum_falsecolor.pic fc_4.cal fc_u fc_v\n0\n0\n\nmp polygon\noffice.working_plane.2\n0\n0\n12\n??????????????????????? 0.2?????????????????? 0.2?????????????????????? 0.8\n??????????????????????? 13.0????????????????? 0.2?????????????????????? 0.8\n???????????????????????\n13.0???????????????? 16.8?????????????????????? 0.8\n??????????????????????? 0.2????????????????? 16.8?????????????????????? 0.8\n\nAnd below is the fc_4.cal file\n\nnonzero(r,g,b) = if(max(r,max(g,b))-FTINY, 1, 0);\nfc_u = -(Py-16.6)/12.8;\nfc_v = (Px-0.2)/12.8;\n\nI have not been working with HDR images. Maybe you can update on how to easily convert from pic-files to hdr-files in Linux, so I can upload these for illustration purposes.\n\nBest regards\n\nPer,\n\n--- Den man 11/1/10 skrev Andrew McNeil <andrew.mcneil@arup.com>:\n\nFra: Andrew McNeil\n<andrew.mcneil@arup.com>\nEmne: Re: [Radiance-general] Removing black areas in imagemapping\nTil: perhaugaard@yahoo.dk, \"Radiance general discussion\" <radiance-general@radiance-online.org>\nDato: mandag 11. januar 2010 19.19\n\n\n\nRe: [Radiance-general] Removing black areas in imagemapping\nHi Per,\n\n\n\nPerhaps you are experiencing rounding error larger than FTINY. ?I?d suggest replacing FTINY with a larger value (ie 2e-3) and seeing if black spots reduce. ?A bit of trial and error might be necessary.\n\n\n\nIf that doesn?t work can you send more scene info? ?I?d like to see your falsecolor statement, your colorpict and mixpict material definitions and perhaps you could post your contour image in hdr format.\n\n\n\nBest,\n\nAndy\n\n\n\n\n\nOn 1/11/10 4:10 AM, \"Per Haugaard\" <perhaugaard@yahoo.dk> wrote:\n\n\n\nDear users,\n\n\n\nI am mapping a falsecolor image on a working in a room but there is still some black parts left in the image. ?I have FTINY as a guard against rounding errors but it does not remove everything.\n\n\n\nAs written i Axel J. tutorial I have build a ..cal file with a nonzero function:\n\n\n\nnonzero(r,g,b) = if(max(r,max(g,b))-FTINY, 1, 0);\n\nfc_u = -(Py-16.6)/12.8;\n\nfc_v = (Px-0.2)/12.8;\n\n\n\nAny idea of how to remove the remaining black spots in the image?\n\n\n\nThe images can be seen at:\n\nhttp://perhaugaard.blogspot.com/2010/01/removing-black-parts-in-imagemapping-in.html\n\n\n\n\n\nHappy new year\n\n\n\n/Per\n\n\n\n?\n\n\n\n?Tr?nger du til at se det store billede? Kelkoo giver dig gode tilbud p? LCD TV <http://dk.yahoo.com/r/pat/lcd> !\n\n_______________________________________________\n\nRadiance-general mailing list\n\nRadiance-general@radiance-online.org\n\nhttp://www.radiance-online.org/mailman/listinfo/radiance-general\n\n\n____________________________________________________________\nElectronic mail messages entering and leaving Arup  business\nsystems are scanned for acceptability of content and viruses\n\n\n\n\nTr?nger du til at se det store billede? Kelkoo giver dig gode tilbud p? LCD TV! Se her http://dk.yahoo.com/r/pat/lcd\n-------------- next part --------------\nAn HTML attachment was scrubbed...\nURL: http://radiance-online.org/pipermail/radiance-general/attachments/20100112/f7a3968c/attachment.html\n", "replyTo": "", "sender": "Per Haugaard", "isquestion": true, "tags": [], "id": "<957699.45447.qm@web26605.mail.ukl.yahoo.com>", "refs": [], "datetime": "Tue Jan 12 01:09:45 2010", "email": "perhaugaard at yahoo.dk", "subject": "[Radiance-general] Removing black areas in imagemapping"}