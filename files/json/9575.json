{"refs": ["<CAPysv6D_mcUiAH8xXWcZkEKrnnd+F-5EB4XLmaZZ86i24tx_2A@mail.gmail.com>", "<D1AD8C3F.1A632%Robert.Guglielmetti@nrel.gov>", "<91E74B04-4F27-49F7-81EB-BF45AB5BFE9F@gmail.com>"], "id": "<CF0B4046-DA6E-482B-8BB0-19F64EA4D069@lmi.net>", "subject": "[Radiance-general] Weighting factors used in the irradiancalculation", "email": "gregoryjward at gmail.com", "body": "\nIf I may jump in, here...\n\nUltimately the 179 lumens/watt conversion derives from the peak defined efficacy of 683 lumens/watt at 555nm and my particular choice of endpoints for the visible spectrum in integrating an equal energy source.  Since the power-to-photopic conversion is very sensitive to the choice of endpoints (for the very reason that viewers are *not* sensitive to those endpoints), I thought to standardize it at some point and end the confusion.  Divide by 179 going from photometric units and multiply by 179 going to and the two factors cancel, problem solved.\n\nThat said, the factor is somewhat arbitrary and Radiance does not really care what lighting units it works in.  This is why Jan's trick of substituting solar reflectances and solar radiances works just fine.  If you dig through most of the Radiance code, you will find very few references to wavelength, and in the end you can compute in infrared and ultraviolet and nothing will go wrong, so long as you can get by with 3 channels or don't mind doing multiple runs.\n\nThe RGB coefficients for luminance (ignoring the 179 conversion factor) add up to 1.0 again as a convention, but it's a common one for conversion between color spaces.  In this case, we're converting RGB to one channel of CIE XYZ, the Y channel.  The other matrix coefficients can be found in ray/src/cal/cal/xyz_rgb.cal, or ray/src/common/spec_rgb.c if you prefer C code.\n\nIf you would tell us your precise application, what you have as input and what you expect as output, it would help us to better answer your question.\n\nCheers,\n-Greg\n\n\n\n", "isquestion": false, "replyTo": "<91E74B04-4F27-49F7-81EB-BF45AB5BFE9F@gmail.com>", "tags": [], "sender": "Greg Ward", "datetime": "Mon, 22 Jun 2015 14:57:24 -0700"}