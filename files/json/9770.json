{"body": "\nAndy,\n\nThis should work great. Thanks for the quick reply!\n\nNick\n\n\n\n[mailto:radiance-general-bounces@radiance-online.org] On Behalf Of Andrew\nMcneil\nSent: Wednesday, March 10, 2010 11:53 AM\nTo: Radiance general discussion\n\n\n\nHi Nick,\n\n\n\nyou can use rtrace's -f option to change the output format from floating\npoint to ascii.  (-faa)\n\n\n\nThe conversion from RGB irradiance to illuminance is:\n\n179 * ( 0.265*R + 0.670*G + 0.065*B )\n\n\n\nso you can use rcalc to calculate the percentage you desire like so:\n\nrtrace ...  |  rcalc -e 'ill=($1*0.265+$2*0.670+$3*0.065)*179' -e\n'$1=ill/300'\n\n\n\nBest,\n\nAndy\n\n\n\n\n\n\n\nOn Wed, Mar 10, 2010 at 10:22 AM, Nick Hubof <nhubof@gmail.com> wrote:\n\nHi,\nI am trying to do a similar process as below email, but with an illuminance\nplot.\nI would like to know the % above a lighting threshold of 300lux in an\nillumination grid output from radiance.\n\nMy office uses Ecotect to build daylight models with 2d analysis grids\n(.pts). After running radiance the analysis grid is populated into a .dat\nfile that is renamed in the Ecotect Batch to a .ok file.\nThe .ok file consists of illumination data by point.\nSo when I open the .ok file in a text editor the values are in exponential\nform, ie.. (1.501146e+000   1.570207e+000   9.277438e-001).\nWhen viewed in the Ecotect grid this value is 270.316 lux.\n\nIs there a way to have rtrace give me that percentage while the batch is\nrunning or at least convert the data from exponential form to 'real' values?\n\nPlease let me know what to add to the batch, I assume it will be at the\nrtrace section or after in the batch:\nrtrace .rendering settings. gridtest.oct < gridtest.pts > gridtest.dat\n@RENAME gridtest3.dat gridtest3.ok\n\nThanks,\nNick\n\n\n\n\n\n\n\nAnd here is one of the many possible standard Radiance tools ways:\n\npvalue -h -H -o -b -df input.pic | rcalc -if -of -e '$1=1;$2=if(179*\n$1-THRESHOLD,1,0)' | total -if2\n\nYou need to set THRESHOLD to the desired luminance value (in cd/\nm^2).  This will give you two numbers, the ratio of which is the\npercentage you seek.  If you want to do it all on the command line,\nyou can add:\n\n| rcalc -e '$1=100*$2/$1'\n\nto the end of the pipe.\n\nBest,\n-Greg\n\n<http://www.radiance-online.org/mailman/listinfo/radiance-general> >\n<http://www.radiance-online.org/mailman/listinfo/radiance-general> >\n\n\n\n\n_______________________________________________\nRadiance-general mailing list\nRadiance-general@radiance-online.org\nhttp://www.radiance-online.org/mailman/listinfo/radiance-general\n\n\n\n\n\n-------------- next part --------------\nAn HTML attachment was scrubbed...\nURL: http://radiance-online.org/pipermail/radiance-general/attachments/20100310/9085d493/attachment.html\n", "replyTo": "<367af6671003101053v423b2427o14831ae4018abb3@mail.gmail.com>", "sender": "radiance-general-bounces@radiance-online.or", "isquestion": false, "tags": [], "id": "<003301cac090$917ecb70$b47c6250$@com>", "refs": ["<001701cac07e$a4d33d80$ee79b880$@com>", "<ae80439c1003101043ufbcb5c6h32acf7be20852f41@mail.gmail.com>", "<367af6671003101053v423b2427o14831ae4018abb3@mail.gmail.com>"], "datetime": "Wed Mar 10 12:35:38 2010", "email": "radiance-general-bounces@radiance-online.org", "subject": "Re: [Radiance-general] calculating percentages of a given value ina .dat / .ok file"}