{"body": "\nDear Radiance gurus,\n\nFirst, thank you all very much for your help and suggestions. I also\nshould have mentioned that I initially turned to Daysim, but it was\nhaving trouble with the geometry, and the only way to get the geometry\nto compile was to use meshes.\n\nI guess I have two actual questions out of all of this:\nA. If I wanted to get a Radiance scene description that would [best]\nmatch the climate, what are the best data to use as inputs?\nB. Is gendaylit a prudent way forward instead of gensky CIE skies for\nthis climate? What about other climates?\n\nSo, keeping those in mind, let's see if I can address some other\npeople's questions:\n1. I double checked everything and am quite certain I was picking the\nright columns (see test code below email).\n2. As far as Greg's thought about basically having a large intensity\nto generate high enough horizontal illuminance values, shouldn't that\nbe the case in the morning as well?\n3. I had never used gendaylit before, but gave that a chance. I'm\nunsure how to catch errors on the output though, so I ended up\nignoring the errors (script assumes illuminance is 0 and outputs that\ninstead).\n4. I also ran an empty Daysim scene using the same weather file (60\nminute step) with a sensor point at 0 0 0 in direction 0 0 1. I pulled\nin the .ill file to the mix to compare it to the rest as well.\n5. The vector to the sun is parsed out of gensky output, I assume that\nit is very similar to the gendaylit vector, but I didn't check.\n\nI ended up running the test loop over again with these additional bits\nof information as well as plotting the actual information within the\nweather file.\n\nI've posted a chart of the June hourly averages for Abu Dhabi here:\nhttp://i47.tinypic.com/2r7a98m.png\n\nSome thoughts:\n+ I have a lot of confidence in the Daysim and gendaylit outputs that\nseem to follow each other and other lines' trends.\n+ I haven't looked at the Radmap code to see how it handles the\ninformation, and I'm only part way through wrapping my head around\nsome of the annual simulation readings that were recently introduced\nto the list.\n+ I've read the ASHRAE papers on how the weather files were made. It's\nlike making laws or sausages - best not to look behind the scenes if\nyou want to appreciate them.\n\nAny further insight is appreciated. Again, thank you.\n\nCheers,\n\n--Dave\n\n\n\n============ Python code snippet =============\n\n# Important: Python is white-space sensitive, your (or my) mail\nprogram may have fiddled with line breaks and the white-space\n\n# Super simple unzipping of an epw file (comma separated values) into\nan indexed dictionary\n# Posted to Radiance general mailing list 20100302\n\nimport os\n\n# define the files\npath = \"/home/dave/rad/test_annual\"\nepwfile = \"abu.epw\"\n\n# define all the fields\ndata_types = \"year,month,day,hour,minute,uncertainty,dry_bulb,dew_point,relative_humidity,pressure,extraterrestrial_horizontal_radiation,extraterrestrial_direct_normal_radiation,horizontal_ir_radiation,global_horizontal_radiation,direct_normal_radiation,diffuse_horizontal_radiation,global_horizontal_illuminance,direct_normal_illuminance,diffuse_horizontal_illuminance,zenith_luminance,wind_direction,wind_speed,total_sky_cover,opaque_sky_cover,visibility,ceiling,weather_observation,weather_codes,precipitation,aerosol_optical_depth,snow_depth,days_since_last_snowfall\"\n\n# get data from the weather file\nos.chdir(path)\nhandle = open(path+os.sep+epwfile,\"r\")\nraw = handle.read()\nhandle.close()\nlines = raw.splitlines()\n\n# figure out the average number of columns in each line, it's going to\nbe really close to the lengths of the data lines\ncounter = 0\ntally = 0\nfor line in lines:\ncounter+=1\nwxarray = line.split(',')\ntally+=len(wxarray)\nlinelength = int(round(1.0*tally/counter))\n\n# try getting data out\nfor line in lines:\nif len(line.split(','))==linelength:\nwxarray = dict(map(None,data_types.split(','),line.split(',')))\nm = str(int(wxarray[\"month\"]))\nd = str(int(wxarray[\"day\"]))\nh = str(int(wxarray[\"hour\"]))\ndirect = str(int(wxarray[\"direct_normal_radiation\"]))\ndiffuse = str(int(wxarray[\"diffuse_horizontal_radiation\"]))\n\nprint m,d,h,direct,diffuse\n\n", "replyTo": "", "sender": "David Smith", "isquestion": true, "tags": [], "id": "<694e132c1003021605o2b27d2fbgbadb99571da24f07@mail.gmail.com>", "refs": [], "datetime": "Tue Mar  2 16:06:02 2010", "email": "dbs176 at gmail.com", "subject": "[Radiance-general] Annual illuminance simulation anomaly"}