{"body": "Hi!\n\n\nWhile waiting for an answer to my first message, here is a second question.\n\n\nI get a strange behaviour when I use rtrace to get irradiance/illuminance \nvalues from sky patches described using the primitive \"source\" with modifier\n\"glow\". Here is an example:\n\n\n--------8<--------8<--------8<--------8<--------8<--------8<--------8<--------\n#file: patch1.rad = patch located at altitude gamma=30\u00b0; theta=90\u00b0-30\u00b0=60\u00b0\nvoid glow skyglow\n0\n0\n4 1 1 1 0\n\n\nskyglow source skypatch\n0\n0\n4 0.836516 0.224144 0.500000 11.500000\n--------8<--------8<--------8<--------8<--------8<--------8<--------8<--------\n#file: patch2.rad = patch located at altitude gamma=90\u00b0; theta=90\u00b0-90\u00b0=0\u00b0\nvoid glow skyglow\n0\n0\n4 1 1 1 0\n\n\nskyglow source zenith_skypatch\n0\n0\n4 0.000000 0.000000 1.000000 11.500000\n--------8<--------8<--------8<--------8<--------8<--------8<--------8<--------\n\n\nThe solid angles subtended by the patches are equal to 0.0316 steradians in \nboth cases.\n\n\nThen I \"oconv\" the two files to get the octrees (respectively p1.oct and \np2.oct) and I want to get the direct daylight coefficients for the two \npatches.\nThe patch radiance is 1 and the scene is made only by each patch and a \nmeasurement point located at 0 0 0, direction 0 0 1. So ...\n\n\n$ echo '0 0 0 0 0 1' | rtrace -h -w -I+ -ab 1 p1.oct | rcalc -e \\       \n      '$1=$1/0.0316'\n0.373048734\n\n\nok! in this simple case it should be equal to sin(30)=cos(60)=0.5\nso I increase the -ad and -as values:\n\n\n$ echo '0 0 0 0 0 1' | rtrace -ad 2048 -as 1024 -h -w -I+ -ab 1 \\\np1oct | rcalc -e '$1=$1/0.0316'\n0.497311709\n\n\nthat is very close to the correct value.\n\n\nLet's make the same with the second patch (orthogonal to the measurement \npoint):\n\n\n$ echo '0 0 0 0 0 1' | rtrace -h -w -I+ -ab 1 p2.oct | rcalc -e \\\n'$1=$1/0.0316'\n1.1191462\n\n\nuhm ok! let's increase the -ad and -as values:\n\n\n$echo '0 0 0 0 0 1' | rtrace -ad 2048 -as 1024 -h -w -I+ -ab 1 \\\np2.oct | rcalc -e '$1=$1/0.0316'\n0.413590506\n\n\nHey! What happened?\n\n\nIf I set -as 0 I still get a good value ... is it a trouble with my way of \nusing it or something wrong with the code?\nShould I use some other -a* switch?\n\n\nThank you!\n\n\n\n\nFrancesco Anselmo\nanselmo@dream.unipa.it\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2002-October/000466.html).</sup>", "attachments": [], "created_by_name": "Francesco Anselmo", "created_at": "October 25, 2002 at 06:58PM", "created_by": "Francesco_Anselmo", "parent_id": "radiance-general_000467", "id": "radiance-general_000466"}