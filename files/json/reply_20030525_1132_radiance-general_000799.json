{"body": "On Sat, May 24, 2003 at 09:28:36AM -0700, Greg Ward wrote:\n> Hi Randolph,\n> \n> I believe there's a bug either in the code that determines rotation \n> angles for cylinders in src/common/rglsurf.c or many OpenGL \n> implementations.  I suspect the former, but need to do some further \n> investigation to figure it out for sure.\n\n\nSorry if this is old news (I have only the 3r1p20 source installed at\nthe moment). I had a quick look at src/common/rglsurf.c and I think there\nare some missing \"glPopMatrix()\" calls:\n\n\nIn o_cone (and o_ring) is this sequence (line 266 in my file):\n\n\n   glPushMatrix();\n                                   /* do base translation */\n   glTranslated((GLdouble)o->oargs.farg[0], (GLdouble)o->oargs.farg[1],\n                    (GLdouble)o->oargs.farg[2]);\n                                   /* compute height & rotation angle */\n   h = sqrt(dist2(o->oargs.farg,o->oargs.farg+3));\n   if (h <= FTINY)\n       return;\n\n\n\n\nIf this test returns 1 (ie. a \"flat\" cylinder) glPopMatrix() is \nnever called but the system is already translated. This will at least \nmisplace all of the following objects (up to the next \"glLoadIdentity\")\nand it should raise an error when buffers are swaped. IIRC \"Pushes\" \nand \"Pops\" have to match up.\n\n\nI only used OpenGL via Python bindings (one year ago) and I'm not at all \nC literate so I didn't dare looking at the rotation calculation ;) \n\n\nI think sometimes this _could_ cause this sort of display problems.\n\n\nThomas\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2003-May/000799.html).</sup>", "attachments": [], "created_by_name": "Thomas Bleicher", "created_at": "May 25, 2003 at 11:32AM", "created_by": "Thomas_Bleicher", "parent_id": "radiance-general_000791", "id": "radiance-general_000799"}