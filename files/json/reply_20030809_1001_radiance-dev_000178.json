{"body": "This message is in MIME format.  The first part should be readable text,\n  while the remaining parts are likely unreadable without MIME-aware tools.\n  Send mail to mime@docserver.cac.washington.edu for more info.\n\n\n--0-536982328-1060437705=:60093\nContent-Type: TEXT/PLAIN; charset=US-ASCII\n\n\nRandolph Fritz wrote:\n\n\n> I decided to put my money where my mouth was, and try to make scons\n> build the Radiance libraries in \"src/common\".\n>\n> [...]\n>\n> What I have is a global configuration script, and a script that\n> describes the build of the common library.  They are attached, and you\n> can read them and try them.  I think they're pretty straightforward.\n\n\n\n\nNice start. I played around with this a bit, added a SConscript\nfile for src/rt, and after some more fiddling, I ended up with\nthe following:\n\n\n- If you use triple quotes (''' or \"\"\"), then you don't need to\n  escape line wraps in literal Python strings.\n\n\n- I changed the imports of the standard modules to just import\n  the module. It is usually less confusing to explicitly refer\n  eg. to the fully qualified sys.platform in the code, especially\n  for such generic names.\n\n\n- (\"this\") is just \"this\" in Python. But I think you already\n  figured this out on your own...\n\n\n- You created one environment named \"env\". I changed that name to\n  \"build\", so that we can later establish a seperate \"install\"\n  target (those names are used when you do eg. an \"scons install\").\n  There should also be a way to have \"install\" depend on \"build\".\n\n\n- Check what the man page says about opts.Update(). I don't think\n  it really makes a functional difference, but what they\n  recommend is probably better style and may have other\n  advantages down the road (not changed yet).\n\n\n- The compile options flag is named CCFLAGS, not CFLAGS.\n\n\n- I changed the configure routines to look for the GL library\n  like you already did with X11, and not just for the headers.\n  Then I moved those routines to a seperate module\n  build_utils/find_libs.py. Maybe the option related routines can\n  go into build_utils as well.\n\n\n- When checking for X11, I don't include the resulting paths in\n  the global CPPPATH and LIBPATH. It seems better to store them\n  in seperate variables, and add them as overrides to only those\n  files that actually need them. You can then also skip building\n  eg. rview if the respective variables aren't set.\n\n\n- Similarly, I pass [NO]STEREO and SPEED as seperate variables,\n  which may be used to override the defaults further down.\n\n\n- I have named all Radiance specific variables \"RAD_XXX\", so that\n  there will never be any confusion.\n\n\n- In src/common/SConscript, you can use \"#src/lib/rt\" as a target\n  for the library, so it will be built in the correct place.\n\n\n- Adding a library to env['LIBS'] means that every single\n  executable will be linked with it after that. I'm sure that a\n  majority currently does use librt.a, but maybe we can be more\n  specific here to improve the performance of the linking.\n  In src/rt, I'm making a copy of the \"build\" environment with\n  the changes required for all the targets there.\n\n\n- The env['PLATFORM'] value is tuned for internal use by SCons.\n  I have decided to use the more standard sys.platform (and\n  os.name, where that isn't enough) for our own purposes.\n  SConstruct now supposts (almost) the full range of settings\n  from makeall.\n\n\n  If that still isn't enough, we also have os.uname(), at least\n  when os.name == 'posix'. This may be necessary eg. in case we\n  need to distinguish between Solaris or Linux on different\n  hardware.\n\n\n- I moved unix_process.c resp. win_process.c to a variable named\n  \"RAD_PROCESS\", which then gets added to the right file list in\n  src/common. Other files like \"win_popen.c\" may follow.\n\n\n- I'll have to experiment a bit more with automatically\n  generating C files from a Python function, so that we can\n  replace the current \"ed\" script in a platform independent way.\n\n\n- Interestingly, SCons uses c++ to link the executables on my\n  system. I think they do so to improve flexibility, in case\n  there might be any C++ object files involved. At first, I was a\n  bit confused by that, but I couldn't find any disadvantages of\n  this approach.\n\n\n\n\nThe results of my fiddling are attached as a tgz, which expands\ndirectly into the build tree from ray/.\n\n\nSome of my experiments uncovered general build issues in Radiance\n(eg. duplicate function names), which I'll address seperately.\nI did build the binaries in src/rt (and everything they depend\non), and it worked very nicely.\n\n\nI'm inclined to check this into CVS, so that we can use the\nrevision management there. For the moment, I don't think it will\ninterfere in any way with the old build system, so that a\ncoexistence of the two shouldn't be a problem.\n\n\n\n\n-schorsch\n\n\n\n\nGeorg Mischler  --  simulations developer  --  schorsch at schorsch com\n+schorsch.com+  --  lighting design tools  --  http://www.schorsch.com/\n\n\n--0-536982328-1060437705=:60093\nContent-Type: APPLICATION/octet-stream; name=\"raysc02.tgz\"\nContent-Transfer-Encoding: BASE64\nContent-ID: <Pine.BSF.4.44.0308091001450.60093@emancholl.pair.com>\nContent-Description: \nContent-Disposition: attachment; filename=\"raysc02.tgz\"\n\n\n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\n--0-536982328-1060437705=:60093--\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-dev/2003-August/000178.html).</sup>", "attachments": [], "created_by_name": "Georg Mischler", "created_at": "August 09, 2003 at 10:01AM", "created_by": "Georg_Mischler", "parent_id": "radiance-dev_000176", "id": "radiance-dev_000178"}