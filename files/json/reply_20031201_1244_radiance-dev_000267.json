{"body": "Roland Schregle wrote:\n\n\n> Currently all of the more common (?) materials are supported. What's\n> defnitely not supported are user defined BRDFs, i.e.\n> {Met,Plas,Trans}{Data,Func} and BtdfFunc.\n\n\nSo what does actually happen when those are encountered?\n\n\n\n\n> -- the spotlight focus is ignored by the photon map,\n\n\nWould it be difficult to do this \"right\"? Not saying that it's\nnecessary, just for the sake of completeness.\n\n\n\n\n> -- the Glow primitive acts like a standard light source with the photon\n> map. There are no restricitions I'm aware of as far as sources are\n> concerned. All types are supported, including light source modifiers to\n> simulate goniometric diagrams such as IES and EULUMDAT files.\n\n\nI think the glow radius was introduced exclusively as a\nperformance optimisation for backwards raytracing, and usually\nhas a negative effect on simulation accuracy. If that is indeed\nso, then I see no harm in ignoring it for the photon map, as\ndoing so will only improve the result, at a presumably very low\nperformance penalty.\n\n\nThe documentation never even mentions illum sources. Are they\nignored? If so, I think that would be one of the key problems yet\nto solve. Since illums are often used as impostors to replace\nother sources (or arbitrary geometry), I assume that any photon\nhitting an illum source would need to be dropped, at least if it\nhits from behind. Actually, what happens in general when photons\nhit other light sources, from either side?\n\n\n\n\n> -- distant light sources (defined with the Source primitive) get special\n> treatment and are inherently slow (photons are emitted from the scene\n> cube surfaces).\n\n\nWhat that means is that photon maps are not generally adequate to\nrender exterior scenes.\n\n\n\n\n> The photon port mechanism can be used here to speed\n> things up (by defining windows and skylights as emitters, for example),\n> but this requires user intervention.\n\n\nIf I'm not mistaken (and assuming illum support), then photon\nports are at least partly exchangeable with the use of mkillum\nor other local preprocessing algorithms in window openings. This\nalso means that mkillum type programs would have to be run first,\nand the resulting sources might serve as input into the photon\npool. Is this correct?\n\n\n\n\nI'm just trying to consider a number of daylighting use cases, to\ndetermine how the classic methods may or may not play well\ntogether with the use of photon maps. In the following, the\noutput of each mkillum (or alternative) run might be fed into the\nphoton map, even though I didn't bother to explicitly mention it\neach time.\n\n\nA) Opening with simple window material like glass/trans/etc\n   (or void surface if there is no window pane).\n   Treatment choices:\n   m: Apply mkillum to pane.\n      Advantage: Takes exterior interreflections into account\n      Disadvantage: May be slower if exterior is complex.\n   p: Use the pane as photon port.\n      Advantage: Probably very fast\n      Disadvantage: Ignores exterior interreflections\n   n: Do nothing special (if opening is very large)\n      Advantage: Simple\n      Disadvantage: Less accurate and slower than the above.\n\n\nB) Opening contains some kind of approximately planar redirection\n   system that can be geometrically modelled and traced.\n   Treatment choices:\n   m: Apply mkillum to surface on interior side.\n      Advantage: Simple to implement and understand\n      Disadvantage: Usually not very accurate, depending on the\n      system.\n   d: Apply a specialized mkillum replacement to simulate the\n      effects of the redirection system.\n      Advantage: Simple to use and understand as well as accurate\n      Disadvantage: Requires custom algorithm/data for each type\n      of system. Currently only available as a proprietary\n      product, and for a very limited set of systems.\n   p: Use a surface on exterior side as photon port.\n      Advantage: Simple to use and understand\n      Disadvantage: How robust is this with very complex\n      reflection paths through the system?\n   n: Do nothing special\n      Advantage: No need to understand anything\n      Disadvantage: Extremely inaccurate\n\n\nC) Opening with shading/redirection system that is hard to model\n   geometrically, let alone to trace (TWD, aerogel, etc.)\n   Treatment choices:\n   d: Apply a specialized mkillum replacement to simulate the\n      effects of the system.\n      Advantage: Simple to use and understand as well as accurate\n      Disadvantage: Requires custom algorithm/data for each type\n      of system. Not yet publicly available for this type of systems.\n   n: No other solution yet that I know of.\n\n\nD) Light pipes.\n   Treatment choices:\n   p: Photon port at entry of pipe.\n      Advantage: Appears to work. ;)\n      Disadvantage: Are there restrictions on the pipe geometry\n      and/or proportions?\n   m: Mkillum surface at entry of pipe, feeding the result into\n      the photon map.\n      Advantage: Would that improve anything?\n      Disadvantage: No idea...\n\n\n- Any interesting situations I forgot?\n\n\n\n\n> -- light sources must be enclosed in bubbles in order to delineate\n> participating media and obtain volume photons.\n\n\nNo surprise, really. This is equivalent to the requirement that\nview points and sensors be located outside of participating media\nvolumes.\n\n\n\n\n> Admittedly, the addon has seen limited use with really complex geometry,\n> at least on my end. Most of the scenes I used are simple and tractable\n> for the sake of debugging, which is why I'm relying on feedback from\n> users with suitably complex scenes.\n\n\nThat situation could be improved by an experimental HEAD merge.\nParticularly, it would give Windows users access to photon maps\ncombined with all the recent improvements to Radiance, and\nFrancesco Anselmo wouldn't have to provide two seperate Cygwin\nbuilds anymore.\n\n\n\n\n-schorsch\n\n\n\n\nGeorg Mischler  --  simulations developer  --  schorsch at schorsch com\n+schorsch.com+  --  lighting design tools  --  http://www.schorsch.com/\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-dev/2003-December/000267.html).</sup>", "attachments": [], "created_by_name": "Georg Mischler", "created_at": "December 01, 2003 at 12:44PM", "created_by": "Georg_Mischler", "parent_id": "radiance-dev_000263", "id": "radiance-dev_000267"}