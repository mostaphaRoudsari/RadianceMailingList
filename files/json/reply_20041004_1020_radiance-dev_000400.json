{"body": "Randolph Fritz wrote:\n\n\n> \"void *\" does work with gcc, whereas I'm not sure a \"char *\"\n> version always will.\n\n\nI'd think it's the other way round. The void* obviously doesn't\nwork everywhere. The char* works the way Greg originally intended.\n\n\nThis is so, because sizeof() is garanteed to return values relative\nto the size of a char, whatever that is. And the size values\ngiven as arguments to those two functions should always be determined\nby sizeof() (as they should when you use plain malloc() and friends).\n\n\n\n\n> > > That code is intended to improve virtual memory\n> > > performance; such code is, unfortunately, system-dependent and belongs\n> > > in the non-existant bottle we need to keep system-dependent stuff.\n> >\n> > I can't find anything system-dependent in that code, other\n> > than it may help more on some platforms than on others.\n> >\n>\n> You have not had a youth wasted programming in too many weird\n> assembler languages!  (At least, I hope not.)  The \"void *\" version\n> only works if...\n\n\nThe void* version was indeed system-dependent, as has been shown.\n\n\nThe char* version isn't. Maybe the exact size of the memory\nchunks handed out would vary on 64 bit systems, but that's just\npotentially suboptimal memory use, not a dependency.\n\n\nRadiance is explicitly *not* 64 bit clean, and even if we were\nto change that, this would probably be one of the simplest and\nmost obvious parts to optimize (after all the things that really\nneed to get fixed).\n\n\n\n\n>  More\n> seriously, one might encounter systems where the alignment requirement\n> is \"long double\" rather than \"double\", and future code which attempted\n> to cast the result of bmalloc() to \"long double\" would fail.\n\n\nSo on some systems you won't be able to increment a char* pointer\nanymore? I'm not quite as pessimistic... ;)\n\n\n\n\n-schorsch\n\n\n\n\nGeorg Mischler  --  simulations developer  --  schorsch at schorsch com\n+schorsch.com+  --  lighting design tools  --  http://www.schorsch.com/\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-dev/2004-October/000400.html).</sup>", "attachments": [], "created_by_name": "Georg Mischler", "created_at": "October 04, 2004 at 10:20AM", "created_by": "Georg_Mischler", "parent_id": "radiance-dev_000395", "id": "radiance-dev_000400"}