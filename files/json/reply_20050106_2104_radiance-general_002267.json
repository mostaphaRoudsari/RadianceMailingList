{"body": "Here is tcl code to convert the sun color from a blackbody temperature \"T\" to Radiance RGB:\n\n\n_______________________________________________\n\n\n# input = \n\n\nproc Kelvin_to_sun_RGB {T YL solar_radiance} {\n\n\n\n\n# converts a color temperature of degrees Kelvin into RGB\n# given: color temp. T and the luminance YL of the source\n\n\n# convert the blackbody temperature T into \"RGB\" \n# Both fits have R^2= 1.000 over the range from 2000K\n# to 11000K. Both look ill behaved above 11000K\n\n\nset x [expr 0.8405 - 2.1783*pow(10,-4) *$T  \\\n\t\t   + 3.5254*pow(10,-8) *$T*$T \\\n\t\t   - 2.7046*pow(10,-12)*$T*$T*$T \\\n\t\t   + 7.9696*pow(10,-17)*$T*$T*$T*$T]\n\n\nset y [expr 0.30587 + 1.3655*pow(10,-4) *$T \\\n\t\t    - 5.6154*pow(10,-8) *$T*$T \\\n\t\t    + 8.9484*pow(10,-12)*$T*$T*$T \\\n\t\t    - 6.5352*pow(10,-16)*$T*$T*$T*$T \\\n\t\t    + 1.8158*pow(10,-20)*$T*$T*$T*$T*$T]\n\n\n\n\nset z [expr 1.00000000 -$x-$y]\n\n\nset X [expr $x*$YL/$y]\nset Z [expr $z*$YL/$y]\n# X, YL, Z are the spectral tristimulus values\n\n\n# the following formulae assume the monitor alignments given in the book :\n# \"procedural elements for computer graphics\" by David F. Rogers, 1985 McGraw-Hill; pp. 397\n\n\nset R [expr  2.739*$X - 1.145*$YL - 0.424*$Z]\nset G [expr -1.119*$X + 2.029*$YL + 0.033*$Z]\nset B [expr 0.138 *$X - 0.333*$YL + 1.105*$Z]\nif {$B<0} {set B 0.0}\n\n\nset k1 [expr (0.3*$R+0.59*$G+0.11*$B)]\n# fact*k1=solar$radiance; correct RGB to actual values given in \"void light solar\" \n# from the gensky output\nset fact [expr $solar_radiance/$k1]\nset R [expr $R*$fact]; set G [expr $G*$fact]; set B [expr $B*$fact]\nreturn \"$R $G $B\"\n\n\n}\n\n\n_______________________________________________________________________\n\n\nMartin Moeck, Penn State\n\n\n\n\n\n\n\n\n\n\n-----Original Message-----\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2005-January/002267.html).</sup>", "attachments": [], "created_by_name": "Martin Moeck", "created_at": "January 06, 2005 at 09:04PM", "created_by": "Martin_Moeck", "parent_id": "radiance-general_002261", "id": "radiance-general_002267"}