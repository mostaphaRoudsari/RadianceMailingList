{"body": "Hi Katja ---\n\n\nHere's the hack I use.  Pass the viewpoint as arguments to the .cal \nfunction.  Then view direction is just:\n\n\nVx = -(arg(1) - Px);\nVy = -(arg(2) - Py);\nVz = -(arg(3) - Pz);\n\n\nwhere Px, Py and Pz are the Radiance predefined variable names for the \nray intersection points.\n\n\nHope this helps,\nRoland\n\n\n\n\nOn Jul 18, 2005, at 5:26 PM, Katja Doerschner wrote:\n\n\n> I sent this message earlier - but I think it may have gotten lost. I\n> apologize if you receive it twice!\n>\n> Hello,\n>\n> Has anyone an example of how to write a .cal function for plasfunc,\n> for a given BRDF?\n> Specifically, I am not sure which predefined variables correspond to\n> the view direction vector.\n>\n> This is the BRDF I want to use in Radiance:\n> V(i,j,n,a)=(1/PI)*(a/(a+(i dot n)(j dot n))\n> :i is unit vector from the source direction, j is unit vector of view\n> direction, n is surface normal, a some other parameter.\n>\n> I know the Radiance-predefined variable names for the source direction\n> (x,y,z) and surface normal (Nx,Ny,Nz), but I am not sure what to use\n> for the view direction.\n>\n> Can anyone help?\n> Thank you!\n> katja\n>\n>\n>\n>\n> _______________________________________________\n> Radiance-general mailing list\n> Radiance-general at radiance-online.org\n> http://www.radiance-online.org/mailman/listinfo/radiance-general\n>\nr o l a n d   f l e m i n g   p h d\nr e s e a r c h   s c i e n t i s t\n\n\nm a x   p l a n c k   i n s t i t u t e   f o r   b i o l o g i c a l   \nc y b e r n e t i c s\ns p e m a n n s t r .   3 8\n7 2 0 7 6    t u e b i n g e n\ng e r m a n y\n\n\nt e l ::   [ + 4 9 ]   0 7 0 7 1   6 0 1 - 6 0 9\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2005-July/002836.html).</sup>", "attachments": [], "created_by_name": "Roland William Fleming", "created_at": "July 18, 2005 at 05:44PM", "created_by": "Roland_William_Fleming", "parent_id": "radiance-general_002835", "id": "radiance-general_002836"}