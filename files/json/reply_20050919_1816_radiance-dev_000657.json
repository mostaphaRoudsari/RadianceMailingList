{"body": "Randolph Fritz wrote:\n\n\n> Greg Ward wrote:\n>\n> > Your description of -DBSD is fine.  I forgot about\n> > compile_switches.  I just noticed (and fixed) the fact that -\n> > DALIGN= was changed to -DALIGNT=.  If there's some way to get rid\n> > of -DBSD, that would be great.  We seem to need it for the resource\n> > stuff at the moment.\n>\n> I think it changes he behavior of some library routines on some\n> systems that support both BSD-like and POSIX-like code, but I'm not\n> entirely sure of that.  On Mac OS X it is actually defined in <sys/\n> param.h>--anyone know about other implementations?\n\n\nFreeBSD has it defined in the same place as follows:\n\n\n #define  BSD 199506  /* System version (year & month). */\n\n\nIt doesn't influence anything else as it seems (and I don't\nthink it really should, either).\n\n\nThe question is rather how we get rid of those instances\nin our own code where it makes Radiance behave differently.\n\n\nThere seem to be three problem areas:\n\n\nIn rpict.c, it includes resource.h, which is necessary\nfor getrusage(). I can't do a comprehensive check, but on\nthose BSDish systems I have access to, the SYSV times()\ncall is also available, so we could probably switch to that\non all posix platforms. We still need a seperate report()\nfunction for Windows, of course.\n\n\nIn random.h, BSD uses random() instead of lrand48()/drand48().\nThe latter also seem to be available everywhere nowadays,\nso we could switch this one too.\n\n\nThe last issue is the different behaviour when IO calls are\ninterrupted. This is handled by readbuf()/writebuf() in\nprocess.c, which gets called from various places. I have no\nidea whether this problem still exists (probably) or if there\nare other ways to work around it.\n\n\n\n\n-schorsch\n\n\n\n\nGeorg Mischler  --  simulations developer  --  schorsch at schorsch com\n+schorsch.com+  --  lighting design tools  --  http://www.schorsch.com/\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-dev/2005-September/000657.html).</sup>", "attachments": [], "created_by_name": "Georg Mischler", "created_at": "September 19, 2005 at 06:16PM", "created_by": "Georg_Mischler", "parent_id": "radiance-dev_000650", "id": "radiance-dev_000657"}