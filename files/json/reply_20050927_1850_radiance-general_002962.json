{"body": "On Mon, 26 Sep 2005 19:41:00 -0400\n<bei.xiao at gmail.com> wrote:\n\n\n> hi,\n>   I want to generate a pool-ball like object. Basically, instead of\n> having a uniform colored object, I want to add some other color to the\n> object but the object is made of uniform material. Can I generate a\n> .cal file and directly manipulate the color at specific location using\n> local coordinates and use colorFunc to add the pattern? It sounds\n> trival to do but I m having trouble generating it right. Thank you\n> very much.\n\n\nSorry for the late reply. Here's some examples from my work:\n\n\no_ball-1.rad:\n\n\nvoid mixfunc ball_1_surf\n6\tclear_plastic\tyellow_billiard\n\tnum_disc\tbilliards.cal\n\t-s 57.15\n0\n1\t18.0\n\n\nball_1_surf sphere ball_1\n0\n0\n4\t0\t0\t0\n\t57.15\n\n\nwhite_flat colorpict ball_1_unlit\n9\tunlit_red\tunlit_green\tunlit_blue\n\tlcd-01.pic\n\tbilliards.cal\tballmap_u\tballmap_v\n\t-s 57.15\n0\n3\t0.65\t\t0.45\t\t0.45\n\n\nvoid mixpict ball_1_num\n9\tredled\t\tball_1_unlit\n\tlit\t\tlcd-01.pic\n\tbilliards.cal\tballmap_u\tballmap_v\n\t-s 57.15\n0\n0\n\n\nball_1_num ring face-1a\n0\n0\n8\t0\t54.35288\t0\n\t0\t1\t\t0\n\t0\t17.660321\n\n\nball_1_num ring face-1b\n0\n0\n8\t0\t-54.35288\t0\n\t0\t-1\t\t0\n\t0\t17.660321\n\n\n\n\n\n\no_ball-9.rad:\n\n\nwhite_billiard colorfunc ball_9_col\n6\tbh_red\t\tbh_green\tbh_blue\n\tbilliards.cal\n\t-s 57.15\n0\n4\t0.9\t\t0.9\t\t0.0\n\t60.0\n\n\nvoid mixfunc ball_9_surf\n6\tclear_plastic\tball_9_col\n\tnum_disc\tbilliards.cal\n\t-s 57.15\n0\n1\t18.0\n\n\nball_9_surf sphere ball_9\n0\n0\n4\t0\t0\t0\n\t57.15\n\n\nwhite_flat colorpict ball_9_unlit\n9\tunlit_red\tunlit_green\tunlit_blue\n\tlcd-09.pic\n\tbilliards.cal\tballmap_u\tballmap_v\n\t-s 57.15\n0\n3\t0.65\t\t0.45\t\t0.45\n\n\nvoid mixpict ball_9_num\n9\tredled\t\tball_9_unlit\n\tlit\t\tlcd-09.pic\n\tbilliards.cal\tballmap_u\tballmap_v\n\t-s 57.15\n0\n0\n\n\nball_9_num ring face-9a\n0\n0\n8\t0\t54.35288\t0\n\t0\t1\t\t0\n\t0\t17.660321\n\n\nball_9_num ring face-9b\n0\n0\n8\t0\t-54.35288\t0\n\t0\t-1\t\t0\n\t0\t17.660321\n\n\n\n\n\n\nm_balls.rad:\n\n\nvoid plastic white_flat\n0\n0\n5\t0.6\t0.6\t0.6\n\t0.0\t0.1\n\n\nvoid texfunc rough1\n4\tgloss_dx\tgloss_dy\tgloss_dz\n\tgloss.cal\n0\n3\t0.02\t0.02\t0.02\n\n\nvoid plastic white_billiard\n0\n0\n5\t0.6\t0.6\t0.6\n\t0.03\t0.02\n\n\n# 0.9\t0.9\t0.0\nvoid plastic yellow_billiard\n0\n0\n5\t0.54\t0.54\t0.0\n\t0.03\t0.02\n\n\netc...\n\n\nrough1 dielectric clear_plastic\n0\n0\n5\t1.25\t1.25\t1.25\n\t1.3\t0.0\n\n\nvoid light redled\n0\n0\n3\t500\t0\t0\n\n\n\n\n\n\nbilliards.cal:\n\n\nballmap_u = 0.5+if(Py, -Px, Px)*0.5;\nballmap_v = 0.5+Pz*0.5;\n\n\nRADIAN : 180 / PI;\n\n\npy_angle = acos(abs(Py)) * RADIAN;\npz_angle = acos(abs(Pz)) * RADIAN;\n\n\nnum_disc = if(A1 - py_angle, 1, 0);\n\n\nbh_red = if(A4 - pz_angle, 1.0, A1);\nbh_green = if(A4 - pz_angle, 1.0, A2);\nbh_blue = if(A4 - pz_angle, 1.0, A3);\n\n\nrgb_grey(r,g,b) = r + g + b;\n\n\nmax3(a,b,c) : if(a-b, if(a-c, a, c), if(b-c, b, c));\n\n\nlit(r,g,b) = r - (1/255);\nunlit(r,g,b) : g - (1/255);\nunlit_red(r,g,b) = clip((unlit(r,g,b) * A1) + (1 - unlit(r,g,b)));\nunlit_green(r,g,b) = clip((unlit(r,g,b) * A2) + (1 - unlit(r,g,b)));\nunlit_blue(r,g,b) = clip((unlit(r,g,b) * A3) + (1 - unlit(r,g,b)));\n\n\non : 1;\noff : 0;\n\n\nhalf : 0.5;\n\n\n\n\n\n\nHopefully that'll help you. All of the balls are very similar. Just have\nyour seven colours defined (in m_balls.rad in my example) plus black for\nthe 8-ball. Then it's just a copy-and-paste job for the other balls, just\nchanging the names slightly. The 'low' balls have a solid colour, the\n'high' balls have only a band of colour. That's what the\nbh_{red,green,blue} functions are modifying. Then just place the balls in\nthe scene with an !xform line. This is needed to have the functions\nmodifying the material transform with the rest of the ball.\n\n\nbye\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2005-September/002962.html).</sup>", "attachments": [], "created_by_name": "Ian Tester", "created_at": "September 27, 2005 at 06:50PM", "created_by": "Ian_Tester", "parent_id": "radiance-general_002960", "id": "radiance-general_002962"}