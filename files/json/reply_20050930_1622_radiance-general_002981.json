{"body": "--- (previous message was messed up a bit, hope this times it is better) ---\n\n\nHi all,\n\n\nI am writing a BRTD material which I want to use to change the diffuse component of a surface, related to a certain direction and the surface \nnormal. Radiance reports: \"error bad arguments for BRTDfunc\n\n\nI get the impression that the rfdif, gfdif, bfdif, rbdif, gbdif and bbdif are not variables ?\nIf these are not variables, how can I change/calculate/define the diffuse component in a BRTDfunc?\nSee the bold lines of the example in my cal file.\n\n\nI appreciate any suggestions !\n\n\nIebele\n\n\n<--- snip  ---->\n\n\n{\n\n\n   directional.cal\n\n\n   arg10 red diffuse\n   arg11 green diffuse\n   arg12 blue diffuse\n   arg13 direction x \n   arg14 direction y\n   arg15 direction z\n\n\n}\n\n\n{ RGB values for the reflection  }\n\n\n\tvalr  = arg(10);\n\tvalg  = arg(11);\n\tvalb  = arg(12);\n\txdir = arg(13);\n\tydir = arg(14);\n\tzdir = arg(15);\n\n\n\n\n{ dot product direction and normal }\n\tDdN = (xdir*Nx)+(ydir*Ny)+(zdir*Nz); \n\n\n{ always return a positive value }\n\tmulti = if(DdN, DdN, -DdN) ;\n\n\n\t*reflr* = CrP + (multi*valr)  ;\n\t*reflg* = CgP + (multi*valg)  ;\n\t*reflb* = CbP + (multi*valb)  ;\n\n\n{\n\n\n   \texample usage: \n\n\n       \tvoid BRTDfunc LAYER114\n\t10\n\t0 0 0                          / reflection\n\t0 0 0                          / specular\n\t0 0 0          \n       \tdirectional.cal\n\t0\n\t15\n\t*reflr reflg reflb*              / diffuse front\n\t*reflr reflg reflb*              / diffuse back\n\t0 0 0                          / trans\n\t0.8 0.7 0.6                    / color of surface\n\t0.57735 0.57735 0.57735        / vector defining bright side of surface\n\n\n}\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2005-September/002981.html).</sup>", "attachments": [], "created_by_name": "Iebele Abel", "created_at": "September 30, 2005 at 04:22PM", "created_by": "Iebele_Abel", "parent_id": "radiance-general_002980", "id": "radiance-general_002981"}