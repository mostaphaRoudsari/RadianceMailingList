{"body": "Hi Greg and Georg,\n\n\nI've just re-compiled Radiance with mingw, and it has been easier.\nAlso, the rtcontrib file output problem has disappeared, and I think\nit has been fixed at revision 1.27\n\n\nHere is the list of changes I've done to the Scons scripts,\nI hope this time they make more sense:\n\n\ndiff -r ray/platform/mingw.cfg ray_ok/platform/mingw.cfg\n13c13\n< CPPDEFINES: _WIN32 NDEBUG _CONSOLE _MBCS HDSUF=.exe fseeko=fseek\n\n\n> CPPDEFINES: _WIN32 MINGW NDEBUG _CONSOLE _MBCS HDSUF=.exe fseeko=fseek\n18c18\n< CPPDEFINES: _WIN32 _DEBUG _CONSOLE _MBCS HDSUF=.exe fseeko=fseek\n\n\n> CPPDEFINES: _WIN32 MINGW _DEBUG _CONSOLE _MBCS HDSUF=.exe fseeko=fseek\n\n\n(I've added the MINGW macro to fix the following problem in rpict)\n\n\ndiff -r ray/src/rt/rpict.c ray_ok/src/rt/rpict.c\n16a17\n> #ifndef MINGW\n17a19,21\n> #else\n> #include  <sys/time.h>\n> #endif /* MINGW */\n\n\n(this is because <sys/times.h> is not available with mingw,\nwhile <sys/time.h> is)\n\n\ndiff -r ray/src/gen/SConscript ray_ok/src/gen/SConscript\n6a7\n> socketlib = env['RAD_SOCKETLIB']\n27,28c28,29\n< ('mkillum',     Split('mkillum.c mkillum2.c mkillum3.c'),\n<     ['rtproc','rtscene','rtpath','rtmath','rtio','rtcont','rterror']),\n\n\n> #('mkillum',     Split('mkillum.c mkillum2.c mkillum3.c'),\n> #    ['rtproc','rtscene','rtpath','rtmath','rtio','rtcont','rterror']),\n33a35\n>\n44c46,53\n< \t\t'rtmath','rtcont','rtmem','rtargs','rtpath','rterror'] + mlib)\n\n\n> \t\t'rtmath','rtcont','rtmem','rtargs','rtpath','rterror','rtproc'] + mlib)\n> progs.append(prog)\n>\n> prog = env.Program(target=os.path.join('$RAD_BUILDBIN', 'mkillum'),\n> \t\tsource=Split('mkillum.c mkillum2.c mkillum3.c'),\n> \t\tCPPPATH=env.get('CPPPATH', []) + ['#src/rt'],\n> \t\tLIBS=['raycalls','rttrace','rtscene','rtpic','rtfunc','rtio',\n> \t\t'rtmath','rtcont','rtmem','rtargs','rtpath','rterror','rtproc'] + mlib\n+ socketlib)\n\n\n(I've taken mkillum out of the prog targets, because it needs \"socketlib\",\nand slightly changed the mksource library list)\n\n\n\n\ndiff -r ray/src/ot/SConscript ray_ok/src/ot/SConscript\n17,18c17,18\n< \t\t\tsource=p[1], LIBS=['rtproc','rtscene','rtio','rtpath','rtmath',\n< \t\t\t'rtargs','rtcont','rtmem','rterror']+mlib)\n\n\n> \t\t\tsource=p[1], LIBS=['rtscene','rtio','rtpath','rtmath',\n> \t\t\t'rtargs','rtcont','rtmem','rterror','rtproc']+mlib)\n\n\n(worked only when I moved rtproc to the end of the list)\n\n\n\n\ndiff -r ray/src/px/SConscript ray_ok/src/px/SConscript\n43c43\n< ('ra_bmp',   ['ra_bmp.c'],    ['rtpic','rtproc','rtio','rtmem']),\n\n\n> ('ra_bmp',   ['ra_bmp.c'],   \n['rtpic','rtmem','rtproc','rtio','rtargs','rterror','rtpath']),\n\n\n(additional libraries required to compile ra_bmp)\n\n\n\n\ndiff -r ray/src/util/rad.c ray_ok/src/util/rad.c\n1515c1515,1516\n< RT_PID pid, sig;\n\n\n> RT_PID pid;\n> int sig;\n\n\n(sig needs to be declared as int)\n\n\ndiff -r ray/src/util/rpiece.c ray_ok/src/util/rpiece.c\n11a12,13\n> #include \"platform.h\"\n>\n16d17\n< #include \"platform.h\"\n\n\n(platform.h needs to be included before #ifndef NON_POSIX)\n\n\nThe binaries are available here:\n\n\nhttp://www.bozzograo.net/radiance/modules.php?op=modload&name=Downloads&file=index&req=getit&lid=12\n\n\nThanks,\n\n\nFrancesco\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-dev/2005-October/000659.html).</sup>", "attachments": [], "created_by_name": "Francesco Anselmo", "created_at": "October 08, 2005 at 04:35PM", "created_by": "Francesco_Anselmo", "parent_id": "radiance-dev_000641", "id": "radiance-dev_000659"}