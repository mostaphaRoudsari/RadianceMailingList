{"body": "Hi Bob,\n\n\nYou need to use a mapping that indexes off the ray directions rather  \nthan locations, which are meaningless for sources (as you  \ndiscovered).  The fisheye.cal file included in the ray/lib directory  \nshould be a good starting point:\n\n\n{\n         Calculate coordinates for a 180 degree fisheye lens.\n         Assume view direction is (0,1,0), view up (0,0,1), (1,0,0)  \nright.\n\n\n         4/30/90\n}\n\n\nfish_u = .5 + Dx/fish_Rxz * fish_Ry;\nfish_v = .5 + Dz/fish_Rxz * fish_Ry;\n\n\nfish_Rxz = sqrt(Dx*Dx + Dz*Dz);\nfish_Ry = Acos(Dy) / PI;\n\n\n\n\nYou may need to apply a rotation to this if your z-axis points up, as  \nis usually the case.  Something like:\n\n\nvoid colorpict cloud_pat\n9 red green blue clouds.pic fisheye.cal fish_u fish_v -rx 90\n0\n0\n\n\ncloud_pat brightfunc skyfunc\n2 skybr skybright.cal\n0\n7 1 3.58e+01 3.07e+01 1.55e+00 0.054270 -0.269929 0.961350\n\n\n\n\nIn this example, I have added your cloud pattern to a sky created by  \ngensky.  If you have an HDR image of the sky you're working from, you  \nmay just be able to go with that.\n\n\nAdditional resources:\n\n\nMark Stock's Radiance Miscellany page:\n\thttp://mark.technolope.org/pages/radmisc.html\n\n\nLink to Simon Crone's Radiance skies collection:\n\thttp://radsite.lbl.gov/radiance/pub/libraries/\n\n\n-Greg\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2006-January/003342.html).</sup>", "attachments": [], "created_by_name": "Greg Ward", "created_at": "January 31, 2006 at 06:00PM", "created_by": "Greg_Ward", "parent_id": "radiance-general_003341", "id": "radiance-general_003342"}