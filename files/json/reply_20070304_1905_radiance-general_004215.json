{"body": "Hi John and Greg.\n\n\nThanks for sharing this tip. I tried it on a simple scene and it works\nnearly out of the box:\n\n\n\n\n> \tvwrays -ff -x 512 -y 512 -vf best.vf \\\n> \t\t| rlam -if6 - -if1 '\\!pvalue -h -H -df -b stencil.pic' \\\n> \t\t| rcalc -if7 -of -e '$1=$1;$2=$2;$3=$3' -e 'out(v)=if($7-.5,v,0)' \\\n> \t\t\t-e '$4=out($4);$5=out($5);$6=out($6)' \\\n> \t\t| rtrace -ffc `vwrays -d -x 512 -y 512 -vf best.vf` -i scene.oct \\\n> \t\t> stencilled_ill.pic\n\n\n\n\nI had to change the 'rlam' command in the second line to\n\n\n\t| rlam -if6 - -if1 '!pvalue -h -H -df -b stencil.pic' \\\n\n\ni. e. no backslash in front of the exclamation mark.\n\n\nAfter that I created a view of the scene and a falsecolor image from the\nilluminance picture and used pcomb to combine them:\n\n\npcomb -e 'ro=if(ri(1),ri(2),ri(3));go=if(gi(1),gi(2),gi(3));bo=if(bi \n(1),bi(2),bi(3))' \\\n       stencilled_ill.pic fc.pic scene.pic > combined.pic\n\n\nThis command uses the stencilled_ill.pic as a mask for the  \ncombination of the scene image\nand the illuminance plot: where there is a bright pixel in the  \nstencilled_ill.pic the value\nof fc.pic is used, else it's the scene.pic. The result is a view of  \nthe scene with the\nfalsecolor workplane 'floating' in it. I'm sure there is a more elegant\nway to do this but I'm happy with mine.\n\n\nThe only problem here is that pcomb requires images of equal size.  \nWhile resizing\nthe background to the exact resolution of the mask image is no  \nproblem, the falsecolor\nimage can have no legend. If you want to create a combined image with  \nfalsecolor legend\nyou have to add a space to the left of the scene.pic and the  \nstencilled_ill.pic\nbefore you combine the images.\n\n\nIf I can find some time I'll illustrate the whole process.\n\n\n\n\nThomas\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2007-March/004215.html).</sup>", "attachments": [], "created_by_name": "Thomas Bleicher", "created_at": "March 04, 2007 at 07:05PM", "created_by": "Thomas_Bleicher", "parent_id": "radiance-general_004214", "id": "radiance-general_004215"}