{"body": "Hi Greg,\n\n\n\n\n\n\nThanks for the reply.\n\n\n\n\n\n\nI've solved the Illegal Power problem by setting some constraints on my\nvalues when fitting the model to the data.\n\n\n\n\n\n\nHowever, I seem to have run into a different problem when implementing the\nmodel:\n\n\nI need to calculate the relevant values for rbrtd(x,y,z), gbrtd(x,y,z) and\nbbrtd(x,y,z) in my BRTDfunc function file.\nIn order to calculate the values using the Lafortune cosine lobe model (with\nparameter fitted to my measured data) I need to find the angle between the\nsurface and the incoming ray from the light source.\nUnfortunately when I try to do this, like so:\n\n\nangle(x,y,z) = Asin(x*Nx + y*Ny + z*Nz);\n\n\nI get an error, saying that x is an unknown variable (and so presumably are\ny and z).\n\n\nIs there a way of getting the light source vector when using BRTDfunc?\n\n\nThanks,\nGlen.\n\n\n\n\n\n\nGlen Harding\n\n\nDivision of Optometry\n\n\nUniversity of Bradford \n\n\nBradford, BD7 1DP.\n\n\nTel: 07969 797391\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2007-December/004634.html).</sup>", "attachments": [], "created_by_name": "G HARDING", "created_at": "December 06, 2007 at 08:23AM", "created_by": "G_HARDING", "parent_id": "radiance-general_004632", "id": "radiance-general_004634"}