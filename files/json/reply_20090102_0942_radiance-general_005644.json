{"body": "Hi Lars,\n\n\nIf you use the hemispherical fisheye type (-vth), you just need the  \nstraight average of the circular area times pi to get the irradiance  \n(times 179 for illuminance).  For angular fisheye perspectives, as  \nyou might get from a camera or the -vta option, you need a solid  \nangle correction equal to the cosine of the angle times the sine of  \nthe angle divided by the angle itself (in radians) and additional  \nnormalization .  It's a strange correction term, but here it is in a  \npcomb command for a 190-degree fisheye lens:\n\n\n\tpcomb -e 'sq(x):x*x' \\\n\t -e 'ar=190/2*PI/180*sqrt(sq(2/xmax*x-1)+sq(2/ymax*y-1))' \\\n\t-e 'cf=WE*sq(190*PI/180*2/(xmax+ymax))*if(ar-PI/2,0,if(ar-.01,cos(ar) \n*sin(ar)/ar,1))' \\\n\t-e 'lo=cf*li(1)'  input.hdr > corrected.hdr\n\n\nI believe this is correct.\n-Greg\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2009-January/005644.html).</sup>", "attachments": [], "created_by_name": "Greg Ward", "created_at": "January 02, 2009 at 09:42AM", "created_by": "Greg_Ward", "parent_id": "radiance-general_005555", "id": "radiance-general_005644"}