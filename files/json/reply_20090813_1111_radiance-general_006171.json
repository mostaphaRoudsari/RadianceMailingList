{"body": "Hello Sotiris.\n\n\n2009/8/13 \u03a3\u03c9\u03c4\u03ae\u03c1\u03b7\u03c2 \u03a0\u03b1\u03c0\u03b1\u03bd\u03c4\u03c9\u03bd\u03af\u03bf\u03c5 <sotos.enveng at gmail.com>:\n> Hello again with a new question,\n>\n> the pool I am trying to simulate has a bottom that it's depth varies. This\n> means that i can not use the poolcoords.cal formula as it is and i need to\n> make some necessary changes.\n\n\nI don't think you need to change anything in this formula. It returns\nthe bin number for a point (Px,Py) based on the x and y resolution.\nThe \"depth\" of the plane is not taken into account. If you would add\nanother component you would split the 2-d array into a 3-d array.\nI don't think that's what you want to do.\n\n\n> The part of formula i don't understand, but i\n> think can not work as it is, is the following:\n>\n> \"floor_bin = floor(FloorXres*(Px - FloorOrigX)/FloorWidth) +\n> floor(FloorYres*(1 - (Py - FloorOrigY)/FloorLength))*FloorXres;\"\n\n\nThis formula returns the number of the bin for the particular\n\"tile\" in the Xres (columns) * Yres (rows) grid.\n\n\nfloor_bin = column position + ( row position * columns)\n\n\nfloor() is the math formula to return the next smaller integer number.\n\n\nIt's easy to understand if you replace all the variables with\nactual values. Example:\n\n\nFloorXres = 13\nFloorYres = 17\nFloorOrigX = 0\nFloorOrigY = 0\nFloorWidth = 26\nFloorLength = 34\n\n\nPx = 5.67\nPy = 12.34\n\n\nfloor_bin = floor( 13 * ( 5.67 - 0 ) / 26 ) + floor( 17 * ( 1 - ( 12.34 - 0\n) / 34 ) ) * 13\n\n\nfloor_bin = floor( 13 * rel X position ) + floor ( 17 * ( 1 - rel Y postion)\n) * 13\n\n\n> In this formula 3 more parameters must be added in my opinion: FloorOrigZ,\n> FloorZres, FloorDepth.\n\n\nZ is not taken into account here.\n\n\n> The role of the this formula is to calculate how many points (bins) should\n> be used for calculating how much energy falls on them,\n\n\nNot \"how many\" bins but \"which\" bin. The \"how many\" is set by Xres and Yres.\n\n\n> If someone can explain how the specific formula works [ floor(...) , Px,\nPy\n> ], or give me directly a new one with the parameters of depth in it, I\n> whould be grateful.\n\n\nI hope you can go on with the explanation above. If your floor slopes down\nyou might have adjust the area of the floor relative to a horizontal plane.\nBut that should be all.\n\n\n\n\nThomas\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2009-August/006171.html).</sup>", "attachments": [], "created_by_name": "Thomas Bleicher", "created_at": "August 13, 2009 at 11:11AM", "created_by": "Thomas_Bleicher", "parent_id": "radiance-general_006169", "id": "radiance-general_006171"}