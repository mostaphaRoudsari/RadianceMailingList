{"body": "Hi Andrew,\n\n\nThank you for your reply. Nothing happens when I play with the FTINY. The image remains the same if I remove FTINY and also if I change the expecting rounding error to 2e-3 or larger. I guess the error might be elsewhere. \n\n\nBelow you will find the input for the illum and falsecolor image.\n\n\n# calculating illumince values on a virtual plan using vwrays\nvwrays -x 600 -y 600 -vf views/kontor_ned.vp \\\n| rcalc -e '$1=$1; $2=$2; $3=0.8; $4=$4; $5=$5; $6=1' \\\n| rtrace -ab 3 -aa 0.1 -ar 128 -ad 512 -as 256 -fac -w -I -ov `vwrays -d -vf views/kontor_ned.vp -x 600 -y 600` \\\noctrees/kontor_CIE.oct > images/vwrays_illum.pic\n\n\n# making falsecolor image of the illuminace image\nfalsecolor -n 10 -s 1000 -lw 0 -cl -i images/vwrays_illum.pic >\n images/vwrays_illum_falsecolor.pic\n\n\nBelow is the viewfile kontor_ned.vp\n\n\nrview -vtl -vp 6.4 8.4 2.79 -vd 0 0 -1 -vu 1 0 0 -vh 16.6 -vv 12.8 -vo 0 -va 0 -vs 0 -vl 0\n\n\nBelow is the input for the working plane image:\n\n\nvoid colorpict fc_val\n7 red green blue images/vwrays_illum_falsecolor.pic fc_4.cal fc_u fc_v\n0\n0\n\n\nfc_val glow fc_glow\n0\n0\n4 10 10 10 0\n\n\nfc_glow polygon office.working_plane\n0\n0\n12\n\u00a0\u00a0\u00a0 \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 0.2\u00a0\u00a0\u00a0 \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 0.2\u00a0\u00a0\u00a0 \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 0.8\n\u00a0\u00a0\u00a0 \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 13.0\u00a0\u00a0\u00a0 \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 0.2\u00a0\u00a0\u00a0\n \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\n 0.8\n\u00a0\u00a0\u00a0 \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 13.0\u00a0\u00a0\u00a0 \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 16.8\u00a0\u00a0\u00a0 \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 0.8\n\u00a0\u00a0\u00a0 \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 0.2\u00a0\u00a0\u00a0 \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 16.8\u00a0\u00a0\u00a0 \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 0.8\n\n\nvoid mixpict mp\n7 fc_glow void nonzero images/vwrays_illum_falsecolor.pic fc_4.cal fc_u fc_v\n0\n0\n\n\nmp polygon\n office.working_plane.2\n0\n0\n12\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 0.2\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 0.2\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 0.8\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 13.0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 0.2\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 0.8\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\n 13.0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 16.8\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 0.8\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 0.2\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 16.8\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 0.8\n\n\nAnd below is the fc_4.cal file \n\n\nnonzero(r,g,b) = if(max(r,max(g,b))-FTINY, 1, 0);\nfc_u = -(Py-16.6)/12.8;\nfc_v = (Px-0.2)/12.8;\n\n\nI have not been working with HDR images. Maybe you can update on how to easily convert from pic-files to hdr-files in Linux, so I can upload these for illustration purposes.\n\n\nBest regards\n\n\nPer,\n\n\n--- Den man 11/1/10 skrev Andrew McNeil <andrew.mcneil at arup.com>:\n\n\nFra: Andrew McNeil\n <andrew.mcneil at arup.com>\nEmne: Re: [Radiance-general] Removing black areas in imagemapping\nTil: perhaugaard at yahoo.dk, \"Radiance general discussion\" <radiance-general at radiance-online.org>\nDato: mandag 11. januar 2010 19.19\n\n\n\n\n\n\nRe: [Radiance-general] Removing black areas in imagemapping\nHi Per,\n\n\n\n\n\n\nPerhaps you are experiencing rounding error larger than FTINY. \u00a0I\u2019d suggest replacing FTINY with a larger value (ie 2e-3) and seeing if black spots reduce. \u00a0A bit of trial and error might be necessary.\n\n\n\n\n\n\nIf that doesn\u2019t work can you send more scene info? \u00a0I\u2019d like to see your falsecolor statement, your colorpict and mixpict material definitions and perhaps you could post your contour image in hdr format.\n\n\n\n\n\n\nBest,\n\n\nAndy\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2010-January/006458.html).</sup>", "attachments": [], "created_by_name": "Per Haugaard", "created_at": "January 12, 2010 at 01:09AM", "created_by": "Per_Haugaard", "parent_id": "radiance-general_006455", "id": "radiance-general_006458"}