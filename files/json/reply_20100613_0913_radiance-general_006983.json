{"body": "Using a cube map and actually mapping a cube are separable issues.   \nYou don't need local geometry to do this in other words.  The mapping,  \nwhich you can translate pretty easily to a .cal file, is given in Paul  \nDebevec's image-based lighting chapter in the HDR Imaging book,  \nSection 9.4.4.  Quoting:\n\n\nWorld to Image:\nif Dz<0 and Dz<Dx and Dz<Dy\nu = 1.5 - 0.5 * Dx / Dz\nv = 2.5 - 0.5 * Dy / Dz\nelse if Dz>0 and Dz>Dx and Dz>Dy\nu = 1.5 + 0.5 * Dx / Dz\nv = 0.5 + 0.5 * Dy / Dz\nelse if Dy<0 and Dy<Dx and Dy<Dz\nu = 1.5 + 0.5 * Dx / Dy\nv = 1.5 - 0.5 * Dz / Dy\nelse if Dy>0 and Dy>Dx and Dy>Dz\nu = 1.5 + 0.5 * Dx / Dy\nv = 3.5 + 0.5 * Dz / Dy\nelse if Dx<0 and Dx<Dy and Dx<Dz\nu = 0.5 - 0.5 * Dz / Dx\nv = 2.5 + 0.5 * Dy / Dx\nelse if Dx>0 and Dx>Dy and Dx>Dz\nu = 2.5 + 0.5 * Dz / Dx\nv = 2.5 + 0.5 * Dy / Dx\n\n\nImage to World:\nif u>=1 and u <=2 and v>=0 and v<=1 // up\nVx = (u - 0.5) * 6\nVy = 1.0\nVz = (v - 0.125) * -8\nelse if u>=0 and u <=1 and v>=1 and v<=2 // left\nVx = -1.0;\nVy = (v - 0.375) * -8;\nVz = (u \u2013 1/6) * -6;\nelse if u>=1 and u <=2 and v>=1 and v<=2 // forward\nVx = (u - 0.5) * 6;\nVy = (v - 0.375) * -8;\nVz = -1.0;\nelse if u>=2 and u <=3 and v>=1 and v<=2 // right\nVx = 1.0;\nVy = (v - 0.375) * -8;\nVz = (u \u2013 5/6) * 6;\nelse if u>=1 and u <=2 and v>=2 and v<=4 // down\nVx = (u - 0.5) * 6;\nVy = -1.0;\nVz = (v - 0.625) * 8;\nelse if u>=1 and u <=2 and v>=3 and v<=4 // backward\nVx = (u - 0.5) * 6;\nVy = (v - 0.875) * 8;\nVz = 1.0;\nnormalize = 1 / sqrt(Vx * Vx + Vy * Vy + Vz * Vz)\nDx = normalize* Vx\nDy = normalize* Vy\nDz = normalize* Vz\n\n\nBest,\n-Greg\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2010-June/006983.html).</sup>", "attachments": [], "created_by_name": "Greg Ward", "created_at": "June 13, 2010 at 09:13AM", "created_by": "Greg_Ward", "parent_id": "radiance-general_006966", "id": "radiance-general_006983"}