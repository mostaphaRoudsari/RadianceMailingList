{"body": "Jia\n\n\nComments are below\n\n\nOn Tue, Jul 13, 2010 at 6:37 AM, Jia Hu <hujia06 at gmail.com> wrote:\n> Hello:\n>\n> I\u00a0\u00a0made a simplified python code as\u00a0bellow.\n>\n> #!/usr/bin/python\n> import subprocess\n> fileHandle\u00a0= open ('final.txt', 'w')\n> fileHandle.write ('%s %s %s \\n' % (12,25,89))\n> fileHandle.close()\n> # valueIll = open ('final.txt', 'a')\n> creBlinds = subprocess.Popen(\"genblinds %s %s %d %d %d %d %d \\\n> \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 | xform -rz -90 -t 2 2 2 >> final.txt \" % ('white', 'VBlinds', \\\n> \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 0.03, 2, 3, 15, 30), shell=True)\n> fileHandle\u00a0.close()\n> fileHandle = open ('final.txt', 'a')\n> fileHandle.write ('%s %s %s \\n' % (52,86,506))\n> fileHandle.close()\n>\n> What I\u00a0expect is the text\u00a0generated by \"Gneblinds\" are located between '12\n> 25 89\" and \"52 86 506\". But I find the text in the second line is (52 86\n> 506) and the following text is generated by \"genblinds\". Could someone give\n> me some advice\u00a0 to fix this problem?\n\n\nYou have two processes accessing the same file in a very short time.\nDue to some caching that's controlled by the OS you can't guarantee\nthat the access happens in the right order. The best way to solve this\nis to use Python to do all the writing:\n\n\n#!/usr/bin/python\nimport subprocess\nfileHandle\u00a0= open ('final.txt', 'w')\nfileHandle.write (\"%s %s %s \\n\" % (12,25,89))\n\n\n## create gensky command\ncmd = \"genblinds %s %s %d %d %d %d %d | xform -rz -90 -t 2 2 2 \" %\n('white', 'VBlinds', 0.03, 2, 3, 15, 30)\n\n\n## execute in subprocess and read output of gensky command\noutput = subprocess.Popen(cmd.split(), stdout=PIPE, shell=True).communicate()[0]\n\n\n## now write to file\nfileHandle.write(output + \"\\n\")\n\n\nfileHandle.write ('%s %s %s \\n' % (52,86,506))\nfileHandle.close()\n\n\n\n\nThis is untested. The pipe to xform might mess things up here but I\nhope it works.\n\n\nRegards,\nThomas\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2010-July/007060.html).</sup>", "attachments": [], "created_by_name": "Thomas Bleicher", "created_at": "July 13, 2010 at 01:58AM", "created_by": "Thomas_Bleicher", "parent_id": "radiance-general_007046", "id": "radiance-general_007060"}