{"body": "Hi Kevin,\n\n\nWhat you ask is a very tricky scripting operation.  If you know exactly where the point you want to calibrate is in every image, you can script it with some combination of the Radiance ra_xyze, pcompos, pvalue, and total programs.  Let's say you know that you have a value of 322 cd/m^2 in the square from (x,y)=(300,450) to (380,530) -- y pixels measured from the bottom of the image and x from the left, you could compute the average using:\n\n\n\tset img_val=`ra_rxyze -o capture.hdr | pcompos -x 80 -y 80 - -300 -450 | pvalue -h -H -d -pG | total -m`\n\n\nYou could then use this to compute a correction (calibration) factor to the image exposure:\n\n\n\tset meas=322\n\tset ecorr=`ev \"179*$img_val/$meas\"`\n\n\nThe 179 value is the standard lumens/watt conversion used in Radiance, and the 322 value is your measured luminance value.  You then need to add the above to your image header, which can be accomplished with getinfo like so:\n\n\n\t(getinfo < capture.hdr ; echo EXPOSURE=$ecorr ; getinfo - < capture.hdr) > calibrated.hdr\n\n\nI hope this helps.\n\n\n-Greg\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2011-April/007757.html).</sup>", "attachments": [], "created_by_name": "Greg Ward", "created_at": "April 14, 2011 at 11:52AM", "created_by": "Greg_Ward", "parent_id": "radiance-general_007756", "id": "radiance-general_007757"}