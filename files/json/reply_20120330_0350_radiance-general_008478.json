{"body": "Hi Chris, \n\n\nI had something similar a few weeks ago, and figured out this:\n\n\npcomb -e 'sens=1.5;difr=(ri(1)-sens)-ri(2);difg=(gi(1)-sens)-gi(2); difb=(bi(1)-sens)-bi(2); ro=if(difr,ri(1),ri(2)); go=if(difg,gi(1),gi(2)); bo=if(difb,bi(1),bi(2)); '  sun.hdr blue_sky.hdr   |   ximage\n\n\nYou can tweak the \"sens\" variable to get the result you want. In my case (which was not a sky picture) the value was around 0.9 to get the result I was after. The value you need to mask the sun out of the sun.hdr image must probably be higher. If the value is too low, the result will be just a copy of blue_sky.hdr. \n\n\nThe command first finds the difference between pixel values for red, green and blue in sun.hdr and blue_sky.hdr. The difference (tweaked by 'sens' ) determines from which input file the pixel component value is written to the output.\n\n\nIf you are only interested in changing the luminance values of blue_sky.hdr at those spots where the sun (or clouds) are bright in sun.hdr you may try something like this:\n\n\npcomb -e 'sens=1.5;difl=(li(1)-sens)-li(2);ro=if(difl, li(1)*ri(2),li(2)*ri(2) ); go=if(difl, li(1)*gi(2),li(2)*gi(2) ); bo=if(difl, li(1)*bi(2),li(2)*bi(2) );  ' sun.hdr blue_sky.hdr | image\n\n\nUsing these commands, the sun (and clouds) will appear with sharp boundary edges (not blurred) in the resulting composite image. \n\n\nHope this helps a bit, \n\n\nIebele\n\n\n\n\n\n\nOp 30 mrt. 2012, om 07:45 heeft Greg Ward het volgende geschreven:\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2012-March/008478.html).</sup>", "attachments": [], "created_by_name": "Iebele Abel", "created_at": "March 30, 2012 at 03:50AM", "created_by": "Iebele_Abel", "parent_id": "radiance-general_008474", "id": "radiance-general_008478"}