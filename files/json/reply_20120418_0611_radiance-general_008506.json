{"body": "Hi Chris,\n\n\nI have used pcomb to blend different sky images that were capturing different luminance ranges. The result was never very good as the flare around the sun was always a problem.\n\n\nIebele's answer below is a great example, but please note this is merging two images (one with the sun and one with the sky) into one full sky. If you need the reverse, the command will be very similar, only that instead of using the input from the second image, you can just use a zero value.\n\n\nSo you can replace ri(2), bi(2), gi(2), etc. with 0, which will give you an image with only values that are above the threshold, and zero for the rest (or below the threshold, if you invert \"difr=sens-ri(1)\"... etc.)\n\n\npcomb -e 'sens=1.5;difr=ri(1)-sens;difg=gi(1)-sens; difb=bi(1)-sens; ro=if(difr,ri(1),0); go=if(difg,gi(1),0); bo=if(difb,bi(1),0); '  full_sky.hdr   |   ximage\n\n\nI can imagine the cloud edge can be difficult to separate. One solution might be to use the difference between blue and red channels to try and separate the blue sky from the rest (like using a red filter, as Axel suggested, this will probably also include the circumsolar region, which can be separated in a second step). It might look something like this:\n\n\npcomb -e 'sens=0.5; dif=bi(1)-ri(1)-sens; ro=if(dif,ri(1),0); go=if(dif,gi(1),0); bo=if(dif,bi(1),0); '  full_sky.hdr   |   ximage\n\n\nI've never tried something like this, so most probably there are some errors, also I have no idea what might be an appropriate threshold, but I hope this helps.\nCheers,\nSantiago\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2012-April/008506.html).</sup>", "attachments": [], "created_by_name": "Santiago Torres", "created_at": "April 18, 2012 at 06:11AM", "created_by": "Santiago_Torres", "parent_id": "radiance-general_008474", "id": "radiance-general_008506"}