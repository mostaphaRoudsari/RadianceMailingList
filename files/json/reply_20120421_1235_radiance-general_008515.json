{"body": "Hi Minki,\n\n\nThere's a small error in your script.  It should read:\n\n\nset N=10000\ncnt 10 10 10 $N | rcalc -of -e 'Dz=1-2*($4+rand(.77-.61*recno))/'$N \\\n              -e 'phi=2*PI*($4+rand(-.10+.39*recno))'/$N \\\n              -e 'rxy=sqrt(1-Dz*Dz);Dx=rxy*cos(phi);Dy=rxy*sin(phi)' \\\n              -e 'Ox=$1*.02+0.02;Oy=$2*0.02+0.02;Oz=$3*0.02+0.02' \\\n              -e '$1=Ox;$2=Oy;$3=Oz;$4=Dx;$5=Dy;$6=Dz' \\\n      | rtrace -h -ff -oov -ar 256 -as 256 -ad 512 -ab 3 scene.oct \\\n      | total -if6 -10000 -m \\\n      | rcalc -e '$1=$1;$2=$2;$3=$3;$4=4*PI*($4+$5+$6)/3' > fluence.dat\n\n\nThe \"-oov\" option of rtrace will output 6 floating point values, the XYZ origin for the ray and the RGB value.  Your \"total\" command with \"-if4\" was not matching record boundaries, so the results would be all wrong.\n\n\nBest,\n-Greg\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2012-April/008515.html).</sup>", "attachments": [], "created_by_name": "Greg Ward", "created_at": "April 21, 2012 at 12:35PM", "created_by": "Greg_Ward", "parent_id": "radiance-general_008295", "id": "radiance-general_008515"}