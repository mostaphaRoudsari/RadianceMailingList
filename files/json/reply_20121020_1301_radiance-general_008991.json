{"body": "Hi all:\n\n\nIn the Klems_init.cal file, for south window (using kbinS), the Klems\ncoordinate is defined as:\n\n\nz+: pointing to inside (that is, (0,1, 0)  )\nx+: pointing to West ( that is (-1, 0, 0) )\ny+: pointing to Up (0,0,1)\n\n\nThis coordinate is consistent with the Klems coordinate system used in\nWINDOW 6 (see this: https://dl.dropbox.com/u/15562376/coordinate.jpg). In\nthe figure, Klems coordinate system defines: x or xr points to (-1, 0, 0)\nand  y or yr points to (0, 0, 1).\n\n\nHowever, if using this command to calculate view matrix:\n\n\n$ rtcontrib < test.pts -f klems_int.cal -bn Nkbins -b *kbinS* -bn Nkbins -m\nwindow_mat -I+ -ab 3 -ad 2000 -lw 1e-4 interior.oct > south.vmx\n\n\nwhere, kbinS defines z axis in the Klems coordinate system as (0 1 0), that\nis, pointing to room interior.\n\n\nThus, the bin number calculated by Klems_init.cal is actually based on z\nhemisphere <https://dl.dropbox.com/u/15562376/coordinate.jpg> (the\nhemisphere protrudes towards room). the bin number corresponds with\n\"Transmittance Front\" in BSDF xml file. For example, ray direction (-1, -1,\n0) (backward, ray travels from inside to outside room) hits the bin\n58<https://dl.dropbox.com/u/15562376/bin.jpg>\ndefined in z hemisphere because the hemisphere protrudes towards (0 1 0).\n But ray direction (-1 -1 0) hits bin\n46<https://dl.dropbox.com/u/15562376/bin.jpg> defined in\nz reverse (i.e., zr) coordinate because the hemisphere protrudes towards (0\n-1 0) (towards outside).\n\n\nWhen calculating Daylighting Matrix, it still uses Klems_init.cal and\nkbinS, that is, z hemisphere coordinate system, therefore, Radiance seems\nneeding to use \"Transmission Front\", which is defined in z hemisphere.  But\ncurrently Radiance uses \"Transmission Back\" (from inside to outside), which\ndefined in zr hemisphere,\n\n\nSo, should we need to\n\n\n (a) use \"*kbinN*\" (defining z axis of Klems coordinate towards (0 -1 0) )\n and \"Transmission Back\" for south window,  or\n (b) use \"Transmission Front\" and *kbinS*?\n\n\n I am very confused about this. Does anyone know the possible reasons?\n\n\nThank you !\n\n\nJia\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2012-October/008991.html).</sup>", "attachments": [], "created_by_name": "Jia Hu", "created_at": "October 20, 2012 at 01:01PM", "created_by": "Jia_Hu", "parent_id": "radiance-general_008988", "id": "radiance-general_008991"}