{"body": "Just to round this out.\n\n\nMe:  For a hemispherical fish-eye view the total should of course be 2pi.  Now I expected a little shortfall as things get 'wonky' towards the horizon, but not quite as big as this -\n\n\npcomb -e 'lo=S(1)' del.hdr | pvalue -H -h -o -b -d | total\n\n\non various size images gives:\n\n\n256 sq\t5.73709888\n512 sq\t5.90116727\n1024 sq\t6.01635629\n4096 sq\t6.14755086\n\n\nGreg: The solid angle calculation in pcomb relies on being able to compute the neighboring pixel ray directions.  For one side of the hemispherical view, these pixels fall off the image and so the returned solid angle is zero when it should not be.  On the other side of the view, the solid angle is non-zero but still underestimated as the area isn't taken around the pixel center as it should be.\n\n\nFor normal views, this isn't a big deal, but since so much solid angle is packed into the rim of a hemispherical fisheye, the errors really add up!  The accuracy anywhere away from the rim is probably fine.\n\n\n\n\n\n\nMarija, I was mindful of your comment \"to see how calculation is exactly done\".  As Greg indicates, solid angle in these instances is really, really hard to get right.  Expect similar errors with hemispherical images depending on the image size.\n\n\nCheers\nJohn \n\n\nJohn Mardaljevic PhD FSLL\nProfessor of Building Daylight Modelling\nSchool of Civil & Building Engineering\nLoughborough University\nLoughborough\nLeicestershire\nLE11 3TU, UK\n\n\nTel: +44 1509 222630 (Direct)\nTel: +44 1509 228529 (Pam Allen, secretary)\n\n\nj.mardaljevic at lboro.ac.uk\nhttp://www.lboro.ac.uk/departments/cv/staff/profile/367.html\n\n\nPersonal daylighting website:\nhttp://climate-based-daylighting.com\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2013-February/009285.html).</sup>", "attachments": [], "created_by_name": "John Mardaljevic", "created_at": "February 18, 2013 at 09:17AM", "created_by": "John_Mardaljevic", "parent_id": "radiance-general_009271", "id": "radiance-general_009285"}