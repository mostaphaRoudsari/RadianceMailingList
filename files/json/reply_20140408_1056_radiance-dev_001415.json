{"body": "Hi Greg,\n\n\nI've sketched a collection of analysis tools that operate on Radiance output. Some of these tools should operate on Radiance output data whatever, regardless of source (e.g. rtrace, dctimestep) and provide sanity checks where possible. For argument's sake, assume I'm writing a C-based tool for calculating dot products with RGB triplets in a file with a variable number of records. A few approaches:\n\n\n1.) Accept input data as-is. Collect/emit values with strtok_r, exiting on malformed/misaligned input. Because there's no way (?) to consistently distinguish records from fields without parsing the header (which may be missing), there's no safety net in the event the user accidentally provides wrongly typed data (say, an illuminance dat file vs irradiance values).\n\n\n2.) Provide an \"rcheck\" command/function to perform record/field standardization up front. I currently approximate this by wrapping rcollate. This works well, as it isolates record parsing from the analysis logic. Data processing on RGB triplets (one per record) now can be treated consistently:\n\n\nwhile not EOF:\n   rec = next_records(1)\n   assert length(rec)==3\n   process_rec(rec)\n\n\nUnfortunately, this adds an additional scan of the input stream.\n\n\n3.) Unify the field/record specification within Radiance itself in order to simplify the logic of analysis tools.\n\n\nSome of these sketched programs operate on a single record, while others collect n (12,24,60) records before processing. By munching tabs and spaces without discretion, it seems difficult to validate input format/record types during processing. For now I've opted for option (2), but figured I'd ask about alternative approaches.\n\n\nMany thanks \u2014 Devon\n\n\nDevon Sparks\nConsultant  |  Lighting Group\n\n\nArup\n560 Mission Street  Seventh Floor   San Francisco CA 94105   United States\nt +1 415 957 9445  d +1 415 946 0240\nf +1 415 957 9096\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-dev/2014-April/001415.html).</sup>", "attachments": [], "created_by_name": "Devon Sparks", "created_at": "April 08, 2014 at 10:56AM", "created_by": "Devon_Sparks", "parent_id": "radiance-dev_001413", "id": "radiance-dev_001415"}