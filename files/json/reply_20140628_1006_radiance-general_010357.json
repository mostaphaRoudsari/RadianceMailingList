{"body": "Hi, I found 2 references and did a test to generate HDR image-based\nrendering, steps are explained below.\n\n\nBut I'm still rubbing my head to understand how the Cartesian coordinates\nor the postion vector of a point on the sky is transformed as UV\ncoordinates of the fisheye image as shown in the \"angmap.cal\" file. So,\nadvices are greatly appreciated!\n\n\nThanks!\nJoe\n\n\n\n\nReferences:\n1. Debevec, P. (2002). Image-based lighting. IEEE Computer Graphics and\nApplications, 22(2), 26-34. doi: 10.1109/38.988744\n2. Au, P. Y. P. (2013). HDR Luminance Measurement: Comparing real and\nsimulated data. (Master of Building Science Thesis), Victoria University of\nWellington.\n\n\n\n\nSteps:\nStep1. prepare the following 6 files and put them in the same folder\n\n\n#### 1.1 geom.rad ################################################\nred_plastic sphere ball\n0\n0\n4 2 2 0.5 0.5\n\n\nsteel sphere ball1\n0\n0\n4 2 -2 0.5 0.5\n\n\ngold sphere ball2\n0\n0\n4 -2 -2 0.5 0.5\n\n\nwhite_matte sphere ball3\n0\n0\n4 -2 2 0.5 0.5\n\n\ncrystal sphere ball4\n0\n0\n4 0 0 1 1\n\n\n!genbox gray_plastic pedestal_top 8 8 0.5 | xform -t -4 -4 -0.5\n\n\n\n\n#### 1.2 materials.mat ################################################\nvoid plastic red_plastic\n0\n0\n5 .7 .1 .1 .06 .1\n\n\nvoid metal steel\n0\n0\n5 0.6 0.62 0.68 1 0\n\n\nvoid metal gold\n0\n0\n5 0.75 0.55 0.25 0.85 0.2\n\n\nvoid plastic white_matte\n0\n0\n5 .8 .8 .8 0 0\n\n\nvoid dielectric crystal\n0\n0\n5 .5 .5 .5 1.5 0\n\n\nvoid plastic black_matte\n0\n0\n5 .02 .02 .02 .00 .00\n\n\nvoid plastic gray_plastic\n0\n0\n5 0.25 0.25 0.25 0.06 0.0\n\n\n\n\n\n\n#### 1.3 sky_and_ground.rad ################################################\nvoid colorpict hdr_image\n7 red green blue 140621_1530.hdr angmap.cal u v\n0\n0\n\n\nhdr_image glow sky_glow\n0\n0\n4 1 1 1 0\n\n\nsky_glow source HDR_sky\n0\n0\n4 0 0 1 180\n\n\n# ground\nvoid glow ground_glow\n0\n0\n4 1 1 1 0\n\n\nground_glow source ground\n0\n0\n4 0 0 -1 180\n\n\n\n\n#### 1.4 angmap.cal ################################################\n{\nangmap.cal\n\n\nConvert from directions in the world (Dx, Dy, Dz) into (u,v)\ncoordinates on the light probe image\n\n\n+z is up (toward top of sphere, i.e. the zenith)\n+y is North\n}\n\n\nd = sqrt(Dx*Dx + Dy*Dy);\n\n\nr = acos(Dz)/PI;\n\n\nu = 0.5 - Dx/d * r;\nv = 0.5 + Dy/d * r;\n\n\n\n\n#### 1.5 view.vf ################################################\n# looking towards east\n#rvu -vtv -vp -12 0 0.5 -vd 1 0 0 -vu 0 0 1 -vh 60 -vv 40\n# looking towards west\n#rvu -vtv -vp 12 0 0.5 -vd -1 0 0 -vu 0 0 1 -vh 60 -vv 40\n# looking towards north\nrvu -vtv -vp 0 -12 0.5 -vd 0 1 0 -vu 0 0 1 -vh 60 -vv 40\n# looking towards south\n#rvu -vtv -vp 0 12 0.5 -vd 0 -1 0 -vu 0 0 1 -vh 60 -vv 40\n\n\n\n\n#### 1.6 cmd.sh ################################################\noconv ./materials.mat ./sky_and_ground.rad ./geom.rad > ./scene.oct\n\n\nrvu -vf ./view.vf ./scene.oct\n\n\n#ximage ./sky.hdr\n\n\nrpict -x 2400 -y 2400 -t 30 -ab 1 -ar 50000 -aa 0.08 -ad 128 -as 64 -st 0\n-lw 0 -lr 8 -vf ./view.vf ./scene.oct > ./image.hdr\n\n\npfilt -1 -x /3 -y /3 -r 1 ./image.hdr > ./image_filtered.hdr\n\n\n\n\nStep2. put the 140621_1530.hdr file provided by LBNL (\nhttp://flexskycam.lbl.gov) in the same folder\n\n\nStep3. run the cmd.sh batch file to produce the rendering\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2014-June/010357.html).</sup>", "attachments": [], "created_by_name": "Joe Smith", "created_at": "June 28, 2014 at 10:06AM", "created_by": "Joe_Smith", "parent_id": "radiance-general_010347", "id": "radiance-general_010357"}