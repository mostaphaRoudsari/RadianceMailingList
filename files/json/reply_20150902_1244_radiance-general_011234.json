{"body": "This was indeed a bug in the new photon-mapping code, and well-spotted by Martin!\n\n\nI introduced this over-counting bug in my zealous attempt to simplify what Roland had done so skillfully the first time.  I took out a macro test that it turns out we need after all, so it has been reinstated in the routines I checked into the HEAD just this morning.  It certainly solves the problem in Martin's test case, and hopefully doesn't introduce any new issues.  (It shouldn't, being more or less an \"undo\" of my earlier modification.)\n\n\nCheers,\n-Greg\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2015-September/011234.html).</sup>", "attachments": [], "created_by_name": "Greg Ward", "created_at": "September 02, 2015 at 12:44PM", "created_by": "Greg_Ward", "parent_id": "radiance-general_011179", "id": "radiance-general_011234"}