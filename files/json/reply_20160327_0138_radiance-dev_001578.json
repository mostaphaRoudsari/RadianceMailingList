{"body": "Good thing I tested with fgetline() before starting to roll my own\nfgets(). The suspicion I had from stepping through fgets() was\nconfirmed, and it's actually the underlying stream that's broken.\nPlugging our own buffering text stream might be theoretically\npossible, but is probably not worth the effort.\n\n\nSo pending a fix from Microsoft, we need to consider Visual Studio\n2015 in default settings as unsuitable for production use.\n\n\nMicrosoft seems to be quite proud of having massively refactored their\nC/C++ runtime libraries for Windows 10 into what they call the\n\"universal crt\". And that new version of the CRT is now included in VS\n2015.\n\n\nI'll try and see if (and how) I can link to an older CRT instead, but\nI'm not very optimistic there.\n\n\nThe bug is slightly obscure. It only happens very intermittinlgy and\nat seemingly random intervals. You need to pass a largish number of\nvery short text lines through a pipe to trigger it, and even then\nyou may only notice the problem if you happen to count the lines.\nSending a sequence of numerals simplifies that...\n\n\nOf course that's not really an excuse for a multi-billion-dollar\ncorporation breaking one of the most basic building blocks of\neventually all of their software products. I'm actually wondering if\nsuch a possibility to \"manipulate\" the contents of an interprocess\ndata stream (eg. by changing the default buffer length) has any\nsecurity implications.\n\n\nThis drastically shows the value of having an extremely complete and\nthorough battery of test cases before you start with any major\nrefactoring.\n\n\n-schorsch\n\n\n\n\nAm 2016-03-27 00:28, schrieb Gregory J. Ward:\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-dev/2016-March/001578.html).</sup>", "attachments": [], "created_by_name": "Georg Mischler", "created_at": "March 27, 2016 at 01:38AM", "created_by": "Georg_Mischler", "parent_id": "radiance-dev_001558", "id": "radiance-dev_001578"}