{"body": "Ah, so now I figured that this wasn't actually on radiance-dev to begin \nwith...\nMostapha, have you considered joining the list for a while?\nAnd please see my query just below.\n\n\nCheers\n-schorsch\n\n\nAm 2016-05-12 09:10, schrieb Georg Mischler:\n> \n> There's no way for this to be the same problem we recently identified.\n> For one, I don't think Robs gcc is using the MS Universal CRT from\n> Windows 10 which caused that one. And secondly, the character that gets\n> eaten here is nowhere near a line ending.\n> \n> Mostapha, can you send me your current test dataset? I only have the\n> version with 420 names, which does not seem to cause trouble anymore.\n> Then I'll check if the SCons build has the same issue, and if so,\n> walk through it to see what really happens.\n> \n> Cheers\n> -schorsch\n> \n> PS: I'm following radiance-dev, no need for a seperate cc.\n> \n> \n> Am 2016-05-12 00:39, schrieb Gregory J. Ward:\n>> OK, this seems to happen when a Windows read operation ends halfway\n>> through a \"\\r\\n\" sequence, leaving a '\\r' at the end of one buffer and\n>> reading a '\\n' character at the beginning of the next read() call.  It\n>> isn't a bug in my code as far as I'm concerned, as Unix handles this\n>> case just fine.  Rather, I think there's a bug in the way Windows\n>> replaces \"\\r\\n\" with \"\\n\" so that it ends up replacing \"\\ns\" in this\n>> case with the empty string, effectively lobbing the first character\n>> off the returned buffer.\n>> \n>> We can test this by running a couple of read() calls on an input\n>> buffer such that the length of the read splits an EOL sequence.  This\n>> may be the source of the occasional dropped characters Schorsch was\n>> seeing in his earlier tests.  Microsoft said they will fix this at\n>> some point....\n>> \n>> Meanwhile, we could try setting the _O_BINARY flag in the open()\n>> command in wordfile(), assuming we won't run into the ^Z EOF marker\n>> that Schorsch claims is just a childhood trauma of mine and nothing to\n>> fear these days...\n>> \n>> If Rob is willing to re-compile the librt.a in src/common using the\n>> attached version of wordfile.c and link it with the debug version of\n>> rcontrib, we can see if it makes any difference to test my hypothesis.\n>> \n>> Cheers,\n>> -Greg\n>> \n>> \n>>> FROM: Mostapha Sadeghipour <sadeghipour at gmail.com>\n>>> \n>>> SUBJECT: Re: NREL Radiance re-distribution\n>>> \n>>> DATE: May 11, 2016 3:17:59 PM PDT\n>> \n>>> Thanks Greg! Let me know if there is anything that I can do on my\n>>> side to help.\n>>> Mostapha\n>>> \n>>> On Wed, May 11, 2016 at 6:09 PM, Gregory J. Ward\n>>> <gregoryjward at gmail.com> wrote:\n>>> \n>>> Hi Mostapha,\n>>> \n>>> Your screen capture came through -- now we're getting somewhere!\n>>> The error again happens near the boundary between read() calls, so\n>>> it's a matter of figuring out what could be going wrong on Windows\n>>> even after the earlier bug fix.\n>>> \n>>> Schorsch has noticed issues with dropped bytes on stdin, but I don't\n>>> think we've seen this sort of problem with file input.  It could\n>>> still have something to do with the conversion of \"\\r\\n\" EOL\n>>> sequences to \"\\n\" in O_TEXT input files, but I need to think how\n>>> this might happen.\n>>> \n>>> More later,\n>>> -Greg\n>>> \n>>> FROM: Mostapha Sadeghipour <sadeghipour at gmail.com>\n>>> \n>>> DATE: May 11, 2016 2:44:18 PM PDT\n>>> \n>>> Thanks Rob! Dropbox link worked. Maybe I was doing something wrong.\n>>> \n>>> I think we're close. New rcontrib prints out some notes which show\n>>> that solar1216 is picked up as 8-letter modifier `olar1216` missing\n>>> the starting s. The rest are 9 letter modifiers. That should be why\n>>> it never shows up?\n>>> \n>>> I almost never copy images in an email but I hope this one shows up\n>>> right. Let me know if it wasn't and I can save and attach it.\n>>> \n>>> Mostapha\n>>> \n\n\n\n\n\n\nGeorg Mischler  --  simulations developer  --  schorsch at schorsch com\n+schorsch.com+  --  lighting design tools  --  http://www.schorsch.com/\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-dev/2016-May/001619.html).</sup>", "attachments": [], "created_by_name": "Georg Mischler", "created_at": "May 12, 2016 at 01:09AM", "created_by": "Georg_Mischler", "parent_id": "radiance-dev_001617", "id": "radiance-dev_001619"}