{"body": "Hi Stephen,\n\n\nThis is what I would do -- pcompos doesn't do any processing on pixels, so it would be difficult to come up with something faster.\n\n\nThe only issue with your method is that pcompos shifts header lines on the input, so any EXPOSURE= settings are lost.  As a result, you won't get the desired absolute value from your command if an exposure change has been applied.  This is also why pcompos is problematic when processing HDR images from Photosphere or hdrgen, which typically include the calibration factor as an EXPOSURE= line in the header.\n\n\nThe following fix for this problem is ugly, but quicker than processing the entire image to correct the exposure:\n\n\n\tset val=`pcompos -x 1 -y 1 pic.hdr -300 -450 | pvalue -h -b -H -d`\n\tset expos=`getinfo < pic.hdr | sed -n 's/EXPOSURE=//p' | total -p'\n\tset result = `ev \"$val / $expos\"`\n\n\nThe second line allows for multiple EXPOSURE= lines, which can happen when you process the image with pfilt, for example.\n\n\nCheers,\n-Greg\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2016-May/011754.html).</sup>", "attachments": [], "created_by_name": "Greg Ward", "created_at": "May 31, 2016 at 09:48AM", "created_by": "Greg_Ward", "parent_id": "radiance-general_011753", "id": "radiance-general_011754"}