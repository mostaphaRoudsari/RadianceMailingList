{"body": "Hi Greg,\n\n\nMany thanks for that. The view type I am testing is equirectangular\n(so I've called it VT_EQR). So far I have modified the following:\n\n\ncommon/image.c: setview, viewray and viewloc\n\n\ncommon/view.h: Macro for new view type.\n\n\nutil/rad.c: specview\n\n\nutil/rpiece.c: same as for VT_ANG\n\n\nThe compilation looked generally ok with makeall, but there is an\nerror in my modification of ray.c:\n    rad.c: In function \u2018specview\u2019:\n    rad.c:1224:7: error: \u2018VT_EQR\u2019 undeclared (first use in this function)\nIt is strange because I could not see any of the other types declared there.\nDespite the error, rpict seemed to be working, but other programs were\nmissing (pfilt and pcond at least). I think they were also missing\neven before changing ray.c, is that possible?\nI've made a quick test and the new projection type seems to work. I've\nrendered a squared view (-vh 120 -vv 60) for the following two\nscenarios and different view types (VT_PER, VT_ANG, VT_CYL and\nVT_EQR):\n\n\n1- From the centre of a checked sphere (meridians and parallels).\n\n\n2- From the centre of a box with checked walls.\n\n\nSo far it seems to work!, but I haven't tested all options (vo, va,\nvs, vl...). Is there a standard test to check view types?\n\n\nI've Included the images below. Hopefully they will display.\n\n\ncube VT_PER\n\n\n[image: Inline images 3]\n\n\ncube VT_ANG\n\n\n[image: Inline images 4]\n\n\ncube VT_CYL\n\n\n[image: Inline images 2]\n\n\ncube VT_EQR\n\n\n[image: Inline images 5]\n\n\nsphere VT_PER\n\n\n[image: Inline images 6]\n\n\nsphere VT_ANG\n\n\n[image: Inline images 7]\n\n\nsphere VT_CYL\n\n\n[image: Inline images 8]\n\n\nsphere VT_EQR\n\n\n[image: Inline images 9]\n\n\nCheers,\n\n\nVictor Lopez-Rioboo Gil\n\n\n\n\n\n\nHi Victor,\n\n\nYou are working in the right place.  Besides adding a macro for your\nview type to view.h, you need to implement the correct operations and\nchecks in viewray() and viewloc() in image.c.  For full support, you\nshould also look at util/rad.c and insert your view type in some\nswitch statements therein.  Similarly, there is some code you need to\nwrite to split up your view for rpiece in util/rpiece.c.\n\n\nCan you be more specific when you say that your compilation is not\nworking?  Do you get compile errors, or is something going wrong at\nrun-time?\n\n\nOut of curiosity, what type are you adding?\n\n\nCheers,\n-Greg\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2016-October/011946.html).</sup>", "attachments": [], "created_by_name": "Victor LRG", "created_at": "October 31, 2016 at 02:08AM", "created_by": "Victor_LRG", "parent_id": "radiance-general_011934", "id": "radiance-general_011946"}