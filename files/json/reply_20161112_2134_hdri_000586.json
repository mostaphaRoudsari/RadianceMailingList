{"body": "Hello Iason,\n\n\n\n\nIf you are following the steps in the paper \n<http://asd.sutd.edu.sg/dcc/papers/Jakubiec-Inanici-Van-Den-Wymelenberg_2016_Improving-the-Accuracy-of-Measurements-in-Daylit-Interior-Scenes-Using-HDR.pdf>, \nwhen you mask the image with the command,\n\n\n    pcomb \u2010e \"lo=mask \u2217 li(1); mask=if(li(2)\u2010.1,1,0);\" \u2010o image.hdr \u2010o\n    mask.hdr > image_masked.hdr\n\n\n\n\nAll of the nice things you put in the header before, like the view type \n(-vta -vv 180 -vh 180), get commented out. This keeps the luminance data \nbut eradicates view information; therefore, the S(1) and Dy(1) functions \ndon't work as they are view-dependent.\n\n\n\n\nYou need to somehow re-add the view information to the image header, \nwhich is a bit of a drag. We were doing everything in the paper with \nsome really simple Python scripts. In case its helpful to you, I'm \nincluding a code snippet used below. Basically what it does is to write \na new .hdr file with the header information applied on the third line.\n\n\n    # append view information\n    tmpfile = open(\"masked.hdr\", \"rb\")\n    outfile = open(\"masked_with-view.hdr\", \"wb\")\n    for (n,line) in enumerate(tmpfile):\n         outfile.write(line)\n         if n == 2:\n             outfile.write(\"VIEW= -vta -vh 180 -vv 180\\n\")\n    tmpfile.close()\n    outfile.close()\n\n\n    # remove tmp hdr file missing view information\n    os.remove(\"masked.hdr\")\n\n\n\n\nYou can also achieve this manually with a text editor such as Notepad++ \nor whatever is your favorite as long as it can write in binary formats. \nThe red part is what I inserted into the images.\n\n\n    #?RADIANCE\n    CAPDATE= 2015:02:04 09:30:51\n    GMT= 2015:02:04 01:30:51*\n    VIEW= -vta -vh 180 -vv 180*\n\n\n         (You will see that the commented information is identified as a\n    tab indent in the .hdr file.)\n\n\n\n\nBest regards,\nAlstan\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/hdri/2016-November/000586.html).</sup>", "attachments": [], "created_by_name": "Alstan Jakubiec", "created_at": "November 12, 2016 at 09:34PM", "created_by": "Alstan_Jakubiec", "parent_id": "hdri_000584", "id": "hdri_000586"}