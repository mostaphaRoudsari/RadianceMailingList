{"body": "Oh, I just remembered -- there's also the shadow cache, which gets initialized in marksources() as well.  This also ends up tracing some number of rays, about 400 per source, to look for near-source obstructions before the main calculation begins.  So, that could be part of your slow-down.  I guess 6,000 light sources would be about 2.5 million rays to trace, though I have trouble seeing how that would take 45 minutes even on one process.  It should only take a couple of minutes on a modern processor with enough memory to hold the scene.\n\n\nYou could try recompiling with -DSHADCACHE=0, but I don't think you would want to, as the shadow cache is the thing that really saves you with so many light sources.  I'd only do it to determine if that's what slows down the start-up.  (Although it would be an interesting test of the shadow cache under extreme conditions.)\n\n\nI don't know how to sample running processes on your system, but it would be interesting to find out where rtrace is spending all its time during start-up....\n\n\nCheers,\n-Greg\n\n\nP.S.  More info on shadow cache in 2004 workshop program:\thttp://www.radiance-online.org/community/workshops/2004-fribourg/Ward_talk.pdf\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2017-February/012041.html).</sup>", "attachments": [], "created_by_name": "Greg Ward", "created_at": "February 20, 2017 at 10:00AM", "created_by": "Greg_Ward", "parent_id": "radiance-general_012038", "id": "radiance-general_012041"}