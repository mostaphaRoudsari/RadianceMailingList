{"topic": "sunpath script error", "category": "radiance-general", "attachments": [], "created_by_name": "Rob Guglielmetti", "created_at": "March 14, 2002 at 02:58PM", "body": "Hello all-\n\n\nI have been working on the (excellent) daylight analysis \nchapter in \"Rendering With Radiance\" (chapter six).  I am \nattempting to use the sunpath shell script, but keep \ngetting this error:\n\n\n$1=/2\n^ unexpected character\noconv: system - cannot open scene file \"sky.rad\": No such \nfile or directory\nUsage: pcompos [-x xr][-y yr][-b r g b][-a n][-s p][-o x0 \ny0][-la][-lh h] [-t min1][+t max1][-l lab][=SS] pic1 x1 y1 ..\nrpict: fatal - command line error at '-av'\nrpict: 0 rays, 0.00% after 0.000u 0.000s 0.000r hours on \nlocalhost\npfilt: bad picture size\n\n\nBeing a newbie with not only Radiance but also UNIX, I'm \nwearing out a spot on my head where I keep scratching \nit. It appears that the $skypar variable is not getting \npopulated correctly; oconv then fails to create the \ndaylight component of the model (sky.rad), and \neverything falls apart from there. \nI have looked at this for some time, but I know it's easy \nto miss mistakes in code especially when you don't fully \nunderstand all the nuances of the commands yet.  Could \nsomeone here spot the error of my ways?  I have pasted \nthe script below (some of the long lines may wrap, but \ncompare them to what's in the book -- sorry, I forget \nwhat page it's on but it's in chapter 6). \n\n\nBTW, I'm running this on OS X, using the pre-compiled \nbinaries from Greg Ward. (thanks Greg!)\n\n\n\n\n#!/bin/csh -f\nset mon = 06\nset month = June\nset day = 21\nset coord = ( -a 42.3 -o 71.1 -m 75)\nset ab = 2\nset ad = 512\nset as = 128\nset ar = 64\nset aa = 0.3\nforeach hr (09 10 11)\nset skypar = ($mon $day $hr +i $coord)\nset gambv = `gensky $skypar | rcalc -i '# Ground \nambient\\ level: ${ga}' -e '$1=ga'`\nif ($gambv == 0) goto SKYDARK\nset inamb = `rcalc -n -e '$1='\"$gambv\"'/2'`\nset inamb = ($inamb $inamb $inamb)\nset ambpar = (-ab $ab -ad $ad -as $as -ar $ar -aa $aa -\nav $inamb)\noconv -i room.oct '\\!gensky '\"$skypar\" sky.rad > hr.oct\nrpict -vf 1.vf $ambpar \\\n-x 1024 -y 1024 hr.oct \\\n| pfilt -1 -e 0.06 -x /3 -y /3 \\\n| pcompos -0 0 '\\!psign '\"$month\"' '\"$day\"' '\"$hr\"'h00' 0 0 \n> $month$day$hr.pic\nrm hr.oct\nSKYDARK:\nend\n\n\n\n\n\n\n Rob Guglielmetti <rpg777@earthlink.net>\n    http://home.earthlink.net/~rpg777\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2002-March/000171.html).</sup>", "id": "radiance-general_000171", "created_by": "Rob_Guglielmetti"}