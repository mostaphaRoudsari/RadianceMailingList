{"topic": "Simple separation of the sky dome", "category": "radiance-general", "attachments": [], "created_by_name": "Aris Tsangrassoulis", "created_at": "April 18, 2002 at 01:24PM", "body": "This is a multi-part message in MIME format.\n\n\n------=_NextPart_000_0020_01C1E6DC.594E1E90\nContent-Type: text/plain;\n\tcharset=\"iso-8859-7\"\nContent-Transfer-Encoding: quoted-printable\n\n\nDear Darren,\n\n\nmaybe the following .cal file would be useful to you. Bassicaly is a =\nmodification of skybright.cal and can by used in the same way.\n\n\n{ patch.cal\nmodification of skybright.cal. It's been used to turn on one patch of =\nthe sky.=20\nA liitle axtra effort is needed to create a discrete grid on the sky.=20\n\n\nDr. Aris Tsangrassoulis, 1999}\nskybr =3D wmean((Dz+1.01)^10,select(A1, sunnysky, cloudysky, unifsky, =\nintersky),(Dz+1.01)^-10, A3);\n\n\nwmean(a, x, b, y) =3D (a*x + b*y) / (a + b);\n\n\nsunnysky =3D A2 * (.91 + 10 * EXP(-3 * gamma) + .45 * cosgamma * =\ncosgamma)* if( Dz - .01, 1.0 - exp(-.32/Dz), 1.0) / A4;\n\n\ncloudysky =3D A2 * (1 + 2*Dz)/3;=20\n\n\ndektis1=3Dif(inside( 0 ,azim, 12 ),1,0); {azimuth from 0 to 12 degrees}\n\n\ndektis2=3Dif(inside( 0 ,eta, 12 ),1,0);  {elevation from 0 to 12 =\ndegrees}\n\n\nunifsky=3Dif(and(dektis1,dektis2),100,0); {the patch is turned on}\n\n\nazi=3Datan2(Dx,Dy)*180/3.141592;\n\n\nazim=3Dif(Dx,azi,azi+360);\n\n\nintersky =3D A2 * ( (1.35*sin(5.631-3.59*eta)+3.12)*sin(4.396-2.6*zt)+ =\n6.37 - eta ) / 2.326 *exp(gamma*-.563*((2.629-eta)*(1.562-zt)+.812)) / =\nA4;\n\n\ncosgamma =3D Dx*A5 + Dy*A6 + Dz*A7;\n\n\ngamma=3Dacos(cosgamma);\n\n\nzt=3Dacos(A7);\n\n\neta=3D(1.5707-acos(Dz))*180/3.141592;\n\n\n\n\n\n\nPlease take into account that the existence of the patch can be verified =\nby using the intereflection part of the calculation.\n\n\nRegards,\n\n\nDr. Aris Tsangrassoulis\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n------=_NextPart_000_0020_01C1E6DC.594E1E90\nContent-Type: text/html;\n\tcharset=\"iso-8859-7\"\nContent-Transfer-Encoding: quoted-printable\n\n\n<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\">\n<HTML><HEAD>\n<META http-equiv=3DContent-Type content=3D\"text/html; =\ncharset=3Diso-8859-7\">\n<META content=3D\"MSHTML 5.50.4807.2300\" name=3DGENERATOR>\n<STYLE></STYLE>\n</HEAD>\n<BODY bgColor=3D#ffffff>\n<DIV><FONT face=3DArial size=3D2>Dear Darren,</FONT></DIV>\n<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>\n<DIV><FONT face=3DArial size=3D2>maybe the following .cal file would be =\nuseful to=20\nyou. Bassicaly is a modification of skybright.cal and can by used in the =\nsame=20\nway.</FONT></DIV>\n<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>\n<DIV><FONT face=3DArial color=3D#ff0000 size=3D2>{ =\npatch.cal</FONT></DIV>\n<DIV><FONT face=3DArial color=3D#ff0000 size=3D2>modification of =\nskybright.cal. It's=20\nbeen used to turn on one patch of the sky. </FONT></DIV>\n<DIV><FONT face=3DArial color=3D#ff0000 size=3D2>A liitle axtra effort =\nis needed to=20\ncreate a discrete grid on the sky. </FONT></DIV>\n<DIV><FONT face=3DArial color=3D#ff0000 size=3D2></FONT>&nbsp;</DIV>\n<DIV><FONT face=3DArial color=3D#ff0000 size=3D2>Dr. Aris =\nTsangrassoulis,=20\n1999}</FONT></DIV>\n<DIV><FONT face=3DArial size=3D2><FONT size=3D2>\n<P><FONT color=3D#ff0000>skybr =3D wmean((Dz+1.01)^10,select(A1, =\nsunnysky,=20\ncloudysky, unifsky, intersky),(Dz+1.01)^-10, A3);</FONT></P>\n<P><FONT color=3D#ff0000>wmean(a, x, b, y) =3D (a*x + b*y) / (a + =\nb);</FONT></P>\n<P><FONT color=3D#ff0000>sunnysky =3D A2 * (.91 + 10 * EXP(-3 * gamma) + =\n.45 *=20\ncosgamma * cosgamma)* if( Dz - .01, 1.0 - exp(-.32/Dz), 1.0) / =\nA4;</FONT></P>\n<P><FONT color=3D#ff0000>cloudysky =3D A2 * (1 + 2*Dz)/3; </FONT></P>\n<P><FONT color=3D#ff0000>dektis1=3Dif(inside( 0 ,azim, 12 ),1,0); =\n<STRONG>{azimuth=20\nfrom 0 to 12 degrees}</STRONG></FONT></P>\n<P><FONT color=3D#ff0000>dektis2=3Dif(inside( 0 ,eta, 12 ),1,0);&nbsp;=20\n<STRONG>{elevation from 0 to 12 degrees}</STRONG></FONT></P>\n<P><FONT color=3D#ff0000>unifsky=3Dif(and(dektis1,dektis2),100,0); =\n<STRONG>{the=20\npatch is turned on}</STRONG></FONT></P>\n<P><FONT color=3D#ff0000>azi=3Datan2(Dx,Dy)*180/3.141592;</FONT></P>\n<P><FONT color=3D#ff0000>azim=3Dif(Dx,azi,azi+360);</FONT></P>\n<P><FONT color=3D#ff0000>intersky =3D A2 * (=20\n(1.35*sin(5.631-3.59*eta)+3.12)*sin(4.396-2.6*zt)+ 6.37 - eta ) / 2.326=20\n*exp(gamma*-.563*((2.629-eta)*(1.562-zt)+.812)) / A4;</FONT></P>\n<P><FONT color=3D#ff0000>cosgamma =3D Dx*A5 + Dy*A6 + Dz*A7;</FONT></P>\n<P><FONT color=3D#ff0000>gamma=3Dacos(cosgamma);</FONT></P>\n<P><FONT color=3D#ff0000>zt=3Dacos(A7);</FONT></P>\n<P><FONT =\ncolor=3D#ff0000>eta=3D(1.5707-acos(Dz))*180/3.141592;</FONT></P>\n<P><FONT color=3D#ff0000></FONT>&nbsp;</P>\n<P>Please take into account that the existence of the patch can be =\nverified by=20\nusing the intereflection part of the calculation.</P>\n<P>Regards,</P>\n<P>Dr. Aris Tsangrassoulis</P>\n<P>&nbsp;</P>\n<P>&nbsp;</P>\n<P>&nbsp;</P>\n<P><FONT color=3D#ff0000></FONT>&nbsp;</P>\n<P><FONT =\ncolor=3D#ff0000></FONT>&nbsp;</P></FONT></FONT></DIV></BODY></HTML>\n\n\n------=_NextPart_000_0020_01C1E6DC.594E1E90--\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2002-April/000221.html).</sup>", "id": "radiance-general_000221", "created_by": "Aris_Tsangrassoulis"}