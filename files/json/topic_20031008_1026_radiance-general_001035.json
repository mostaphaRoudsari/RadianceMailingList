{"topic": "Thanks .... Warning message and glass definition", "category": "radiance-general", "attachments": [], "created_by_name": "Greg Ward", "created_at": "October 08, 2003 at 10:26AM", "body": "Hi Arvinder,\n\n\nIt's funny you should write this morning, as I just realized that I \nmade a mistake (two, actually) in my formula for the normal reflectance \nof a simple glazing, and I was just about to post a correction.\n\n\nThere are actually two files in the ray/src/cal/cal directory that \nshould be helpful, which I forgot were there:\n\n\n\ttrans.cal\t- the exact solution for transmissivity based on normal \ntransmittance and index of refraction\n\n\n\ttrans2.cal\t- an approximate solution for the index of refraction and \ntransmissivity based on normal reflectance and transmittance\n\n\nIf you run \"calc trans2.cal\" in the ray/src/cal/cal directory and enter:\n\n\n\tTn = 0.85\n\tRn = 0.05\n\n\nTyping in \"n\" and \"tn\" will give you these results:\n\n\n\tn\n\t$1=1.39992615\n\ttn\n\t$2=0.894736842\n\t^D\n\n\nChecking this against the file trans.cal, to which I've added the \ncorrected formula for Rn:\n\n\n\t% calc trans.cal\n\tRn = rn + rn*sq((1-rn)*tn)/(1-sq(tn*rn));\n\n\n\tn = 1.4\n\tTn = 0.85\n\n\n\tRn\n\t$1=0.0489971986\n\ttn\n\t$2=0.898704882\n\n\nWe can see there's just a slight error in the approximations made in \ntrans2.cal.  Playing around with these values in trans.cal, I was able \nto get closer to the correct parameters for your glass type:\n\n\n\tn = 1.405\n\tRn\n\t$9=0.0500464342\n\ttn\n\t$10=0.899753993\n\n\nActually, the first approximate result is probably good enough, but \nanyway, the correct glass specification should be:\n\n\n\tvoid glass class_lglass\n\t0\n\t0\n\t4\t0.900 0.900 0.900\t1.405\n\n\nSorry for the screw-up.  The advantage of programming is that you can \nfix your errors (usually) before they do irreperable harm.\n\n\n-Greg\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2003-October/001035.html).</sup>", "id": "radiance-general_001035", "created_by": "Greg_Ward"}