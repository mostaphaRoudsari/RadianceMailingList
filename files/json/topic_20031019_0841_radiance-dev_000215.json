{"topic": "rholo restart stalls with \"bad magic number\"", "category": "radiance-dev", "attachments": [], "created_by_name": "Peter Apian-Bennewitz", "created_at": "October 19, 2003 at 08:41AM", "body": "This is a multi-part message in MIME format.\n--------------020606090706070300020809\nContent-Type: text/plain; charset=us-ascii; format=flowed\nContent-Transfer-Encoding: 7bit\n\n\nDear folks,\n\n\nFYI: rholo (HEAD version as of today, 19.10.03) on Linux (tested on slackware and Debian 'sarge') screws writing holodeck files.\nIt works if holofile.c and rholo.c include\n\n\n        #include <sys/types.h>\n        #include <unistd.h>\n\n\nas suggested by the lseek man page\n\n\nnote 2 (mostly for developpers): POSIX lseeks seem to favor macros for the lseek 'whence' parameter: lseek man page says:\n\n\n       When converting old code, substitute values for whence with the following macros:\n         old       new\n        0        SEEK_SET\n        1        SEEK_CUR\n        2        SEEK_END\n        L_SET    SEEK_SET\n        L_INCR   SEEK_CUR\n        L_XTND   SEEK_END\n\n\nat least that keeps me going for now\n\n\nI'm posting this to the general list to keep potential users updated, the cross-post to the dev list is indended for follow ups.\n\n\n-Peter\n\n\nPS: yet another good reason for a test suite\n\n\n\n\n  pab-opto, Freiburg, Germany, www.pab-opto.de\n\n\n\n\n\n\n--------------020606090706070300020809\nContent-Type: text/plain;\n name=\"rholo.c\"\nContent-Transfer-Encoding: base64\nContent-Disposition: inline;\n filename=\"rholo.c\"\n\n\nI2lmbmRlZiBsaW50CnN0YXRpYyBjb25zdCBjaGFyCVJDU2lkW10gPSAiJElkOiByaG9sby5j\nLHYgMy42MCAyMDAzLzA3LzI3IDIyOjEyOjAyIHNjaG9yc2NoIEV4cCAkIjsKI2VuZGlmCi8q\nCiAqIFJhZGlhbmNlIGhvbG9kZWNrIGdlbmVyYXRpb24gY29udHJvbGxlcgogKi8KCiNpbmNs\ndWRlIDxzaWduYWwuaD4KI2luY2x1ZGUgPHN5cy9zdGF0Lmg+CiNpbmNsdWRlIDxzdHJpbmcu\naD4KCiNpbmNsdWRlICJyaG9sby5oIgojaW5jbHVkZSAicmFuZG9tLmgiCgojaWZuZGVmIEZS\nQUdXQVJOCiNkZWZpbmUgRlJBR1dBUk4JMjAJCS8qIGZyYWdtZW50YXRpb24gZm9yIHdhcm5p\nbmcgKCUpICovCiNlbmRpZgojaWZuZGVmIE1BWFFUSU1FCiNkZWZpbmUgTUFYUVRJTUUJNQkJ\nLyogdGFyZ2V0IG1heGltdW0gc2Vjb25kcyBpbiBxdWV1ZSAqLwojZW5kaWYKCQkJCQkvKiBt\nYW51YWwgY2FjaGUgZmx1c2hpbmcgZnJlcXVlbmN5ICovCiNpZm5kZWYgUlRGTFVTSAojaWYg\nTUFYUVRJTUUKI2RlZmluZSBSVEZMVVNICQkoMzAwL01BWFFUSU1FKnRvdHFsZW4pCS8qIDw9\nIDUgbWludXRlcyAqLwojZWxzZQojZGVmaW5lIFJURkxVU0gJCSg1MCp0b3RxbGVuKQkJLyog\nanVzdCBndWVzcyAqLwojZW5kaWYKI2VuZGlmCgkJCS8qIHRoZSBmb2xsb3dpbmcgbXVzdCBi\nZSBjb25zaXN0ZW50IHdpdGggcmhvbG8uaCAqLwppbnQJTlZBUlMgPSBOUkhWQVJTOwkJLyog\ndG90YWwgbnVtYmVyIG9mIHZhcmlhYmxlcyAqLwoKVkFSSUFCTEUJdnZbXSA9IFJIVklOSVQ7\nCQkvKiB2YXJpYWJsZS12YWx1ZSBwYWlycyAqLwoKY2hhcgkqcHJvZ25hbWU7CQkvKiBvdXIg\ncHJvZ3JhbSBuYW1lICovCmNoYXIJKmhka2ZpbGU7CQkvKiBob2xvZGVjayBmaWxlIG5hbWUg\nKi8KY2hhcglmcm9vdFsyNTZdOwkJLyogcm9vdCBmaWxlIG5hbWUgKi8KCmludAluY3Byb2Nz\nID0gMDsJCS8qIGRlc2lyZWQgbnVtYmVyIG9mIGNvbXB1dGUgcHJvY2Vzc2VzICovCgpjaGFy\nCSpvdXRkZXYgPSBOVUxMOwkJLyogb3V0cHV0IGRldmljZSBuYW1lICovCgppbnQJcmVhZGlu\ncCA9IDA7CQkvKiByZWFkIGNvbW1hbmRzIGZyb20gc3RkaW4gKi8KCmludAlmb3JjZSA9IDA7\nCQkvKiBhbGxvdyBvdmVyd3JpdGUgb2YgaG9sb2RlY2sgKC0xID09IHJlYWQtb25seSkgKi8K\nCnRpbWVfdAlzdGFydHRpbWU7CQkvKiB0aW1lIHdlIGdvdCBzdGFydGVkICovCnRpbWVfdAll\nbmR0aW1lOwkJLyogdGltZSB3ZSBzaG91bGQgZW5kIGJ5ICovCnRpbWVfdAlyZXBvcnR0aW1l\nOwkJLyogdGltZSBmb3IgbmV4dCByZXBvcnQgKi8KCm9mZl90CW1heGRpc2s7CQkvKiBtYXhp\nbXVtIGZpbGUgc3BhY2UgKGJ5dGVzKSAqLwoKaW50CXJ0YXJnYyA9IDE7CQkvKiBydHJhY2Ug\nY29tbWFuZCAqLwpjaGFyCSpydGFyZ3ZbMTI4XSA9IHsicnRyYWNlIiwgTlVMTH07CgppbnQJ\nb3JpZ19tb2RlID0gLTE7CQkvKiBvcmlnaW5hbCBmaWxlIG1vZGUgKC0xIGlmIHVuY2hhbmdl\nZCkgKi8KCmxvbmcJbnJheXNkb25lID0gMEw7CQkvKiBudW1iZXIgb2YgcmF5cyBkb25lICov\nCmxvbmcJbnBhY2tzZG9uZSA9IDBMOwkvKiBudW1iZXIgb2YgcGFja2V0cyBkb25lICovCgpQ\nQUNLRVQJKmZyZWVwYWNrczsJCS8qIGF2YWlsYWJsZSBwYWNrZXRzICovCmludAl0b3RxbGVu\nOwkJLyogbWF4aW11bSBxdWV1ZSBsZW5ndGggKG51bWJlciBvZiBwYWNrZXRzKSAqLwoKY2hh\nciAgKnNpZ2VycltOU0lHXTsJCS8qIHNpZ25hbCBlcnJvciBtZXNzYWdlcyAqLwoKZXh0ZXJu\nIGludAlub3dhcm47CQkvKiB0dXJuIHdhcm5pbmdzIG9mZj8gKi8KCmV4dGVybiB0aW1lX3QJ\ndGltZSgpOwoKCm1haW4oYXJnYywgYXJndikKaW50CWFyZ2M7CmNoYXIJKmFyZ3ZbXTsKewoJ\naW50CWk7CgoJaW5pdHVyYW5kKDE2Mzg0KTsJCQkvKiBpbml0aWFsaXplIHVyYW5kICovCglw\ncm9nbmFtZSA9IGFyZ3ZbMF07CQkJLyogZ2V0IGFyZ3VtZW50cyAqLwoJZm9yIChpID0gMTsg\naSA8IGFyZ2MgJiYgYXJndltpXVswXSA9PSAnLSc7IGkrKykKCQlzd2l0Y2ggKGFyZ3ZbaV1b\nMV0pIHsKCQljYXNlICd3JzoJCQkvKiB0dXJuIG9mZiB3YXJuaW5ncyAqLwoJCQlub3dhcm4r\nKzsKCQkJYnJlYWs7CgkJY2FzZSAnZic6CQkJLyogZm9yY2Ugb3ZlcndyaXRlICovCgkJCWZv\ncmNlID0gMTsKCQkJYnJlYWs7CgkJY2FzZSAncic6CQkJLyogcmVhZC1vbmx5IG1vZGUgKi8K\nCQkJZm9yY2UgPSAtMTsKCQkJYnJlYWs7CgkJY2FzZSAnaSc6CQkJLyogcmVhZCBpbnB1dCBm\ncm9tIHN0ZGluICovCgkJCXJlYWRpbnArKzsKCQkJYnJlYWs7CgkJY2FzZSAnbic6CQkJLyog\nY29tcHV0ZSBwcm9jZXNzZXMgKi8KCQkJaWYgKGkgPj0gYXJnYy0yKQoJCQkJZ290byB1c2Vy\ncjsKCQkJbmNwcm9jcyA9IGF0b2koYXJndlsrK2ldKTsKCQkJYnJlYWs7CgkJY2FzZSAnbyc6\nCQkJLyogb3V0cHV0IGRpc3BsYXkgKi8KCQkJaWYgKGkgPj0gYXJnYy0yKQoJCQkJZ290byB1\nc2VycjsKCQkJb3V0ZGV2ID0gYXJndlsrK2ldOwoJCQlicmVhazsKCQlkZWZhdWx0OgoJCQln\nb3RvIHVzZXJyOwoJCX0KCQkJCQkJLyogZ2V0IHJvb3QgZmlsZSBuYW1lICovCglpZiAoaSA+\nPSBhcmdjKQoJCWdvdG8gdXNlcnI7Cglyb290bmFtZShmcm9vdCwgaGRrZmlsZT1hcmd2W2kr\nK10pOwoJCQkJCQkvKiBsb2FkIHZhcmlhYmxlcz8gKi8KCWlmIChpIDwgYXJnYykKCQlpZiAo\nYXJndltpXVswXSAhPSAnLScgJiYgYXJndltpXVswXSAhPSAnKycpCgkJCWxvYWR2YXJzKGFy\nZ3ZbaV0pOwkvKiBsb2FkIHZhcmlhYmxlcyBmcm9tIGZpbGUgKi8KCglpZiAoaSA+PSBhcmdj\nIHx8IGFyZ3ZbaV1bMF0gPT0gJysnKQoJCWxvYWRob2xvKCk7CQkJLyogbG9hZCBleGlzdGlu\nZyBob2xvZGVjayAqLwoKCXdoaWxlICgrK2kgPCBhcmdjKQkJCS8qIGdldCBjb21tYW5kIGxp\nbmUgc2V0dGluZ3MgKi8KCQlpZiAoc2V0dmFyaWFibGUoYXJndltpXSwgbWF0Y2h2YXIpIDwg\nMCkgewoJCQlzcHJpbnRmKGVycm1zZywgInVua25vd24gdmFyaWFibGU6ICVzIiwgYXJndltp\nXSk7CgkJCWVycm9yKFVTRVIsIGVycm1zZyk7CgkJfQoJCQkJCQkvKiBjaGVjayBzZXR0aW5n\ncyAqLwoJY2hlY2t2YWx1ZXMoKTsKCQkJCQkJLyogbG9hZCByYWQgaW5wdXQgZmlsZSAqLwoJ\nZ2V0cmFkZmlsZSgpOwoKCWlmIChoZGxpc3RbMF0gPT0gTlVMTCkgewkJLyogY3JlYXRlIG5l\ndyBob2xvZGVjayAqLwoJCUhER1JJRAloZGdbSERNQVhdOwoJCQkJCQkJLyogc2V0IGRlZmF1\nbHRzICovCgkJc2V0ZGVmYXVsdHMoaGRnKTsKCQkJCQkJCS8qIGNoZWNrIHJlYWQtb25seSAq\nLwoJCWlmIChmb3JjZSA8IDApCgkJCWVycm9yKFVTRVIsICJjYW5ub3QgY3JlYXRlIHJlYWQt\nb25seSBob2xvZGVjayIpOwoJCQkJCQkJLyogaG9sb2RlY2sgZXhpc3RzPyAqLwoJCWlmICgh\nZm9yY2UgJiYgYWNjZXNzKGhka2ZpbGUsIFJfT0t8V19PSykgPT0gMCkKCQkJZXJyb3IoVVNF\nUiwKCQkJCSJob2xvZGVjayBmaWxlIGV4aXN0cyAtLSB1c2UgLWYgdG8gb3ZlcndyaXRlIik7\nCgkJCQkJCQkvKiBjcmVhdGUgaG9sb2RlY2sgKi8KCQljcmVhdGhvbG8oaGRnKTsKCX0gZWxz\nZQkJCQkJLyogZWxzZSBqdXN0IHNldCBkZWZhdWx0cyAqLwoJCXNldGRlZmF1bHRzKE5VTEwp\nOwoJCQkJCQkvKiBpbml0aWFsaXplICovCglpbml0cmhvbG8oKTsKCQkJCQkJLyogbWFpbiBs\nb29wICovCgl3aGlsZSAocmhvbG8oKSkKCQk7CgkJCQkJCS8qIGRvbmUgKi8KCXF1aXQoMCk7\nCnVzZXJyOgoJZnByaW50ZihzdGRlcnIsCiJVc2FnZTogJXMgWy1uIG5wcm9jc11bLW8gZGlz\ncF1bLXddWy1yfC1mXSBvdXRwdXQuaGRrIFtjb250cm9sLmhpZnwrfC0gW1ZBUj12YWwgLi5d\nXVxuIiwKCQkJcHJvZ25hbWUpOwoJcXVpdCgxKTsKfQoKCnZvaWQKb25zaWcoc2lnbm8pCQkJ\nCS8qIGZhdGFsIHNpZ25hbCAqLwppbnQgIHNpZ25vOwp7CglzdGF0aWMgaW50ICBnb3RzaWcg\nPSAwOwoKCWlmIChnb3RzaWcgPiAxKQkJCS8qIHdlJ3JlIGdvaW5nIGFzIGZhc3QgYXMgd2Ug\nY2FuISAqLwoJCXJldHVybjsKCWlmIChnb3RzaWcrKykgewkJCS8qIHR3byBzaWduYWxzIGFu\nZCB3ZSBzcGxpdCAqLwoJCWhkc3luYyhOVUxMLCAwKTsJLyogZG9uJ3QgbGVhdmUgdy9vIHNh\neWluZyBnb29kYnllICovCgkJX2V4aXQoc2lnbm8pOwoJfQoJYWxhcm0oMzAwKTsJCQkvKiBh\nbGxvdyA1IG1pbnV0ZXMgdG8gY2xlYW4gdXAgKi8KCWVwdXRzKCJzaWduYWwgLSAiKTsKCWVw\ndXRzKHNpZ2VycltzaWdub10pOwoJZXB1dHMoIlxuIik7CglxdWl0KDMpOwp9CgoKc2lnZGll\nKHNpZ25vLCBtc2cpCQkJLyogc2V0IGZhdGFsIHNpZ25hbCAqLwppbnQgIHNpZ25vOwpjaGFy\nICAqbXNnOwp7CglpZiAoc2lnbmFsKHNpZ25vLCBvbnNpZykgPT0gU0lHX0lHTikKCQlzaWdu\nYWwoc2lnbm8sIFNJR19JR04pOwoJc2lnZXJyW3NpZ25vXSA9IG1zZzsKfQoKCmludApyZXNm\nbW9kZShmZCwgbW9kKQkJLyogcmVzdHJpY3Qgb3BlbiBmaWxlIGFjY2VzcyBtb2RlICovCmlu\ndAlmZCwgbW9kOwp7CglzdHJ1Y3Qgc3RhdAlzdGJ1ZjsKCQkJCQkvKiBnZXQgb3JpZ2luYWwg\nbW9kZSAqLwoJaWYgKGZzdGF0KGZkLCAmc3RidWYpIDwgMCkKCQllcnJvcihTWVNURU0sICJj\nYW5ub3Qgc3RhdCBvcGVuIGhvbG9kZWNrIGZpbGUiKTsKCW1vZCAmPSBzdGJ1Zi5zdF9tb2Rl\nOwkJLyogYWx3YXlzIG1vcmUgcmVzdHJpY3RpdmUgKi8KCWlmIChtb2QgPT0gKHN0YnVmLnN0\nX21vZGUgJiAwNzc3KSkKCQlyZXR1cm4oLTEpOwkJLyogYWxyZWFkeSBzZXQgKi8KCQkJCQkv\nKiBlbHNlIGNoYW5nZSBpdCAqLwoJaWYgKGZjaG1vZChmZCwgbW9kKSA8IDApIHsKCQllcnJv\ncihXQVJOSU5HLCAiY2Fubm90IGNoYW5nZSBob2xvZGVjayBmaWxlIGFjY2VzcyBtb2RlIik7\nCgkJcmV0dXJuKC0xKTsKCX0KCXJldHVybihzdGJ1Zi5zdF9tb2RlKTsJCS8qIHJldHVybiBv\ncmlnaW5hbCBtb2RlICovCn0KCgppbml0cmhvbG8oKQkJCS8qIGdldCBvdXIgaG9sb2RlY2sg\ncnVubmluZyAqLwp7CglleHRlcm4gaW50CWdsb2JhbF9wYWNrZXQoKTsKCXJlZ2lzdGVyIGlu\ndAlpOwoJCQkJCQkvKiBjbG9zZSBob2xvZGVjayBvbiBleGVjKCkgKi8KCWZjbnRsKGhkbGlz\ndFswXS0+ZmQsIEZfU0VURkQsIEZEX0NMT0VYRUMpOwoKCWlmIChvdXRkZXYgIT0gTlVMTCkJ\nCQkvKiBvcGVuIG91dHB1dCBkZXZpY2UgKi8KCQlkaXNwX29wZW4ob3V0ZGV2KTsKCWVsc2Ug\naWYgKG5jcHJvY3MgPiAwKQkJCS8qIGVsc2UgdXNlIGdsb2JhbCByYXkgZmVlZCAqLwoJCWlu\naXRfZ2xvYmFsKCk7CgkJCQkJCS8qIHJlY29yZCBkaXNrIHNwYWNlIGxpbWl0ICovCglpZiAo\nIXZkZWYoRElTS1NQQUNFKSkKCQltYXhkaXNrID0gKChvZmZfdCkxPDwoc2l6ZW9mKG9mZl90\nKSo4LTIpKSAtIDEwMjQ7CgllbHNlCgkJbWF4ZGlzayA9IDEwMjQuKjEwMjQuKnZmbHQoRElT\nS1NQQUNFKTsKCQkJCQkJLyogc2V0IHVwIG1lbW9yeSBjYWNoZSAqLwoJaWYgKG91dGRldiA9\nPSBOVUxMKQoJCWhkY2FjaGVzaXplID0gMDsJCS8qIG1hbnVhbCBmbHVzaGluZyAqLwoJZWxz\nZSBpZiAodmRlZihDQUNIRSkpCgkJaGRjYWNoZXNpemUgPSAxMDI0LioxMDI0Lip2Zmx0KENB\nQ0hFKTsKCQkJCQkJLyogb3BlbiByZXBvcnQgZmlsZSAqLwoJaWYgKHZkZWYoUkVQT1JUKSkg\newoJCXJlZ2lzdGVyIGNoYXIJKnMgPSBzc2tpcDIodnZhbChSRVBPUlQpLCAxKTsKCQlpZiAo\nKnMgJiYgZnJlb3BlbihzLCAiYSIsIHN0ZGVycikgPT0gTlVMTCkKCQkJcXVpdCgyKTsKCX0K\nCQkJCQkJLyogbWFyayB0aGUgc3RhcnRpbmcgdGltZSAqLwoJc3RhcnR0aW1lID0gdGltZShO\nVUxMKTsKCQkJCQkJLyogY29tcHV0ZSBlbmQgdGltZSAqLwoJaWYgKCF2ZGVmKFRJTUUpIHx8\nIHZmbHQoVElNRSkgPD0gRlRJTlkpCgkJZW5kdGltZSA9IDA7CgllbHNlCgkJZW5kdGltZSA9\nIHN0YXJ0dGltZSArIHZmbHQoVElNRSkqMzYwMC4gKyAuNTsKCQkJCQkJLyogc3RhcnQgcnRy\nYWNlICovCglpZiAobmNwcm9jcyA+IDApIHsKCQl0b3RxbGVuID0gaSA9IHN0YXJ0X3J0cmFj\nZSgpOwoJCWlmIChpIDwgMSkKCQkJZXJyb3IoVVNFUiwgImNhbm5vdCBzdGFydCBydHJhY2Ug\ncHJvY2VzcyhlcykiKTsKCQlpZiAodmRlZihSRVBPUlQpKSB7CQkvKiBtYWtlIGZpcnN0IHJl\ncG9ydCAqLwoJCQlwcmludGFyZ3MocnRhcmdjLCBydGFyZ3YsIHN0ZGVycik7CgkJCXJlcG9y\ndCgwKTsKCQl9CgkJCQkJCS8qIGFsbG9jYXRlIHBhY2tldHMgKi8KCQlmcmVlcGFja3MgPSAo\nUEFDS0VUICopYm1hbGxvYyhpKnNpemVvZihQQUNLRVQpKTsKCQlpZiAoZnJlZXBhY2tzID09\nIE5VTEwpCgkJCWdvdG8gbWVtZXJyOwoJCWZyZWVwYWNrc1stLWldLm5yID0gMDsKCQlmcmVl\ncGFja3NbaV0ubmV4dCA9IE5VTEw7CgkJaWYgKCF2ZGVmKE9CU1RSVUNUSU9OUykgfHwgIXZi\nb29sKE9CU1RSVUNUSU9OUykpIHsKCQkJZnJlZXBhY2tzW2ldLm9mZnNldCA9IChmbG9hdCAq\nKWJtYWxsb2MoCgkJCQkJUlBBQ0tTSVoqc2l6ZW9mKGZsb2F0KSooaSsxKSApOwoJCQlpZiAo\nZnJlZXBhY2tzW2ldLm9mZnNldCA9PSBOVUxMKQoJCQkJZ290byBtZW1lcnI7CgkJfSBlbHNl\nCgkJCWZyZWVwYWNrc1tpXS5vZmZzZXQgPSBOVUxMOwoJCXdoaWxlIChpLS0pIHsKCQkJZnJl\nZXBhY2tzW2ldLm5yID0gMDsKCQkJZnJlZXBhY2tzW2ldLm9mZnNldCA9IGZyZWVwYWNrc1tp\nKzFdLm9mZnNldCA9PSBOVUxMID8KCQkJCQlOVUxMIDogZnJlZXBhY2tzW2krMV0ub2Zmc2V0\nK1JQQUNLU0laIDsKCQkJZnJlZXBhY2tzW2ldLm5leHQgPSAmZnJlZXBhY2tzW2krMV07CgkJ\nfQoJfQoJCQkJCS8qIHNldCB1cCBzaWduYWwgaGFuZGxpbmcgKi8KCXNpZ2RpZShTSUdJTlQs\nICJJbnRlcnJ1cHQiKTsKCXNpZ2RpZShTSUdIVVAsICJIYW5ndXAiKTsKCXNpZ2RpZShTSUdU\nRVJNLCAiVGVybWluYXRlIik7CglzaWdkaWUoU0lHUElQRSwgIkJyb2tlbiBwaXBlIik7Cglz\naWdkaWUoU0lHQUxSTSwgIkFsYXJtIGNsb2NrIik7CiNpZmRlZglTSUdYQ1BVCglzaWdkaWUo\nU0lHWENQVSwgIkNQVSBsaW1pdCBleGNlZWRlZCIpOwoJc2lnZGllKFNJR1hGU1osICJGaWxl\nIHNpemUgZXhjZWVkZWQiKTsKI2VuZGlmCgkJCQkJLyogcHJvdGVjdCBob2xvZGVjayBmaWxl\nICovCglvcmlnX21vZGUgPSByZXNmbW9kZShoZGxpc3RbMF0tPmZkLCAobmNwcm9jcz4wKSAm\nIChmb3JjZT49MCkgPyAwIDogMDQ0NCk7CglyZXR1cm47Cm1lbWVycjoKCWVycm9yKFNZU1RF\nTSwgIm91dCBvZiBtZW1vcnkgaW4gaW5pdHJob2xvIik7Cn0KCgpyaG9sbygpCQkJCS8qIGhv\nbG9kZWNrIG1haW4gbG9vcCAqLwp7CglzdGF0aWMgbG9uZwluZXh0ZnJhZ3dhcm4gPSAxMDAq\nKDFMPDwyMCk7CglzdGF0aWMgaW50CWlkbGUgPSAwOwoJUEFDS0VUCSpwbCA9IE5VTEwsICpw\nbGVuZDsKCW9mZl90CWZzaXo7CglpbnQJcGtzaXo7CglyZWdpc3RlciBQQUNLRVQJKnA7Cgl0\naW1lX3QJdDsKCQkJCQkvKiBjaGVjayBkaXNwbGF5ICovCglpZiAobnByb2NzIDw9IDApCgkJ\naWRsZSA9IDE7CglpZiAob3V0ZGV2ICE9IE5VTEwpIHsKCQlpZiAoIWRpc3BfY2hlY2soaWRs\nZSkpCgkJCXJldHVybigwKTsJLyogcXVpdCByZXF1ZXN0ICovCgkJaWYgKG5wcm9jcyA8PSAw\nKQoJCQlyZXR1cm4oMSk7Cgl9IGVsc2UgaWYgKGlkbGUpCgkJcmV0dXJuKDApOwkJLyogYWxs\nIGRvbmUgKi8KCWZzaXogPSBoZGZpbGVuKGhkbGlzdFswXS0+ZmQpOwkvKiBjaGVjayBmaWxl\nIHNpemUgKi8KCWlmIChtYXhkaXNrID4gMCAmJiBmc2l6ID49IG1heGRpc2spIHsKCQllcnJv\ncihXQVJOSU5HLCAiZmlsZSBsaW1pdCBleGNlZWRlZCIpOwoJCWRvbmVfcnRyYWNlKCk7CgkJ\ncmV0dXJuKDEpOwkvKiBjb21lcyBiYWNrICovCgl9CiNpZiBGUkFHV0FSTgoJaWYgKGZzaXog\nPj0gbmV4dGZyYWd3YXJuICYmCgkJKGZzaXotaGRmaWx1c2UoaGRsaXN0WzBdLT5mZCwwKSkv\nKGZzaXovMTAwKSA+IEZSQUdXQVJOKSB7CgkJc3ByaW50ZihlcnJtc2csICJob2xvZGVjayBm\naWxlIGZyYWdtZW50YXRpb24gaXMgJS4wZiUlIiwKCQkJCTEwMC4qKGZzaXotaGRmaWx1c2Uo\naGRsaXN0WzBdLT5mZCwxKSkvZnNpeik7CgkJZXJyb3IoV0FSTklORywgZXJybXNnKTsKCQlu\nZXh0ZnJhZ3dhcm4gPSBmc2l6ICsgKGZzaXo+PjIpOwkvKiBkZWNlbnQgaW50ZXJ2YWwgKi8K\nCX0KI2VuZGlmCgl0ID0gdGltZShOVUxMKTsJCQkvKiBjaGVjayB0aW1lICovCglpZiAoZW5k\ndGltZSA+IDAgJiYgdCA+PSBlbmR0aW1lKSB7CgkJZXJyb3IoV0FSTklORywgInRpbWUgbGlt\naXQgZXhjZWVkZWQiKTsKCQlkb25lX3J0cmFjZSgpOwoJCXJldHVybigxKTsJLyogY29tZXMg\nYmFjayAqLwoJfQoJaWYgKHJlcG9ydHRpbWUgPiAwICYmIHQgPj0gcmVwb3J0dGltZSkKCQly\nZXBvcnQodCk7CgkJCQkJLyogZmlndXJlIG91dCBnb29kIHBhY2tldCBzaXplICovCglwa3Np\neiA9IFJQQUNLU0laOwojaWYgTUFYUVRJTUUKCWlmICghY2h1bmt5Y21wKSB7CgkJcGtzaXog\nPSBucmF5c2RvbmUqTUFYUVRJTUUvKHRvdHFsZW4qKHQgLSBzdGFydHRpbWUgKyAxTCkpOwoJ\nCWlmIChwa3NpeiA8IDEpIHBrc2l6ID0gMTsKCQllbHNlIGlmIChwa3NpeiA+IFJQQUNLU0la\nKSBwa3NpeiA9IFJQQUNLU0laOwoJfQojZW5kaWYKCWlkbGUgPSAwOwkJCS8qIGdldCBwYWNr\nZXRzIHRvIHByb2Nlc3MgKi8KCXdoaWxlIChmcmVlcGFja3MgIT0gTlVMTCkgewoJCXAgPSBm\ncmVlcGFja3M7IGZyZWVwYWNrcyA9IHAtPm5leHQ7IHAtPm5leHQgPSBOVUxMOwoJCWlmICgh\nbmV4dF9wYWNrZXQocCwgcGtzaXopKSB7CgkJCXAtPm5leHQgPSBmcmVlcGFja3M7IGZyZWVw\nYWNrcyA9IHA7CgkJCWlkbGUgPSAxOwoJCQlicmVhazsKCQl9CgkJaWYgKHBsID09IE5VTEwp\nIHBsID0gcDsKCQllbHNlIHBsZW5kLT5uZXh0ID0gcDsKCQlwbGVuZCA9IHA7Cgl9CgkJCQkJ\nLyogcHJvY2VzcyBwYWNrZXRzICovCglkb25lX3BhY2tldHMoZG9fcGFja2V0cyhwbCkpOwoJ\ncmV0dXJuKDEpOwkJCS8qIGFuZCBjb250aW51ZSAqLwp9CgoKc2V0ZGVmYXVsdHMoZ3ApCQkJ\nLyogc2V0IGRlZmF1bHQgdmFsdWVzICovCnJlZ2lzdGVyIEhER1JJRAkqZ3A7CnsKCWV4dGVy\nbiBjaGFyCSphdG9zKCk7CglyZWdpc3RlciBpbnQJaTsKCWludAluOwoJZG91YmxlCWxlblsz\nXSwgZDsKCWNoYXIJYnVmWzY0XTsKCglpZiAoIXZkZWYoU0VDVElPTikpIHsKCQlzcHJpbnRm\nKGVycm1zZywgIiVzIG11c3QgYmUgZGVmaW5lZCIsIHZuYW0oU0VDVElPTikpOwoJCWVycm9y\nKFVTRVIsIGVycm1zZyk7Cgl9CglpZiAoIXZkZWYoT0NUUkVFKSkgewoJCWlmICgodnZhbChP\nQ1RSRUUpID0gYm1hbGxvYyhzdHJsZW4oZnJvb3QpKzUpKSA9PSBOVUxMKQoJCQllcnJvcihT\nWVNURU0sICJvdXQgb2YgbWVtb3J5Iik7CgkJc3ByaW50Zih2dmFsKE9DVFJFRSksICIlcy5v\nY3QiLCBmcm9vdCk7CgkJdmRlZihPQ1RSRUUpKys7Cgl9CglpZiAoIXZkZWYoVkRJU1QpKSB7\nCgkJdnZhbChWRElTVCkgPSAiRiI7CgkJdmRlZihWRElTVCkrKzsKCX0KCQkJCS8qIGFwcGVu\nZCByZW5kZXJpbmcgb3B0aW9ucyAqLwoJaWYgKHZkZWYoUkVOREVSKSkKCQlydGFyZ2MgKz0g\nd29yZHN0cmluZyhydGFyZ3YrcnRhcmdjLCB2dmFsKFJFTkRFUikpOwoJCglpZiAoZ3AgPT0g\nTlVMTCkJCS8qIGFscmVhZHkgaW5pdGlhbGl6ZWQ/ICovCgkJcmV0dXJuOwoJCQkJLyogc2V0\nIGdyaWQgcGFyYW1ldGVycyAqLwoJZm9yIChuID0gMDsgbiA8IHZkZWYoU0VDVElPTik7IG4r\nKywgZ3ArKykgewoJCWdwLT5ncmlkWzBdID0gZ3AtPmdyaWRbMV0gPSBncC0+Z3JpZFsyXSA9\nIDA7CgkJaWYgKHNzY2FuZihudmFsdWUoU0VDVElPTiwgbiksCgkJIiVsZiAlbGYgJWxmICVs\nZiAlbGYgJWxmICVsZiAlbGYgJWxmICVsZiAlbGYgJWxmICVoZCAlaGQgJWhkIiwKCQkJCSZn\ncC0+b3JpZ1swXSwgJmdwLT5vcmlnWzFdLCAmZ3AtPm9yaWdbMl0sCgkJCQkmZ3AtPnh2WzBd\nWzBdLCAmZ3AtPnh2WzBdWzFdLCAmZ3AtPnh2WzBdWzJdLAoJCQkJJmdwLT54dlsxXVswXSwg\nJmdwLT54dlsxXVsxXSwgJmdwLT54dlsxXVsyXSwKCQkJCSZncC0+eHZbMl1bMF0sICZncC0+\neHZbMl1bMV0sICZncC0+eHZbMl1bMl0sCgkJCQkmZ3AtPmdyaWRbMF0sICZncC0+Z3JpZFsx\nXSwgJmdwLT5ncmlkWzJdKSA8IDEyKQoJCQliYWR2YWx1ZShTRUNUSU9OKTsKCQlmb3IgKGkg\nPSAwOyBpIDwgMzsgaSsrKQoJCQlsZW5baV0gPSBWTEVOKGdwLT54dltpXSk7CgkJaWYgKCF2\nZGVmKEdSSUQpKSB7CgkJCWQgPSAyLzJlNSooIGxlblswXSpsZW5bMF0qKGxlblsxXSpsZW5b\nMV0gKwoJCQkJCWxlblsyXSpsZW5bMl0gKyA0KmxlblsxXSpsZW5bMl0pCgkJCQkrIGxlblsx\nXSpsZW5bMV0qbGVuWzJdKihsZW5bMl0gKyA0KmxlblswXSkKCQkJCSsgNCpsZW5bMF0qbGVu\nWzFdKmxlblsyXSpsZW5bMl0gKTsKCQkJZCA9IHNxcnQoc3FydChkKSk7CgkJfSBlbHNlIGlm\nICgoZCA9IHZmbHQoR1JJRCkpIDw9IEZUSU5ZKQoJCQliYWR2YWx1ZShHUklEKTsKCQlmb3Ig\nKGkgPSAwOyBpIDwgMzsgaSsrKQoJCQlpZiAoZ3AtPmdyaWRbaV0gPD0gMCkKCQkJCWdwLT5n\ncmlkW2ldID0gbGVuW2ldL2QgKyAoMS4tRlRJTlkpOwoJfQp9CgoKY3JlYXRob2xvKGdwKQkJ\nCS8qIGNyZWF0ZSBhIGhvbG9kZWNrIG91dHB1dCBmaWxlICovCkhER1JJRAkqZ3A7CnsKCWV4\ndGVybiBjaGFyCVZlcnNpb25JRFtdOwoJaW50MzIJbGFzdGxvYywgbmV4dGxvYzsKCWludAlu\nOwoJaW50CWZkOwoJRklMRQkqZnA7CgkJCQkJLyogb3BlbiAmIHRydW5jYXRlIGZpbGUgKi8K\nCWlmICgoZnAgPSBmb3BlbihoZGtmaWxlLCAidysiKSkgPT0gTlVMTCkgewoJCXNwcmludGYo\nZXJybXNnLCAiY2Fubm90IG9wZW4gXCIlc1wiIGZvciB3cml0aW5nIiwgaGRrZmlsZSk7CgkJ\nZXJyb3IoU1lTVEVNLCBlcnJtc2cpOwoJfQoJCQkJCS8qIHdyaXRlIGluZm9ybWF0aW9uIGhl\nYWRlciAqLwoJbmV3aGVhZGVyKCJSQURJQU5DRSIsIGZwKTsKCWZwcmludGYoZnAsICJTT0ZU\nV0FSRT0gJXNcbiIsIFZlcnNpb25JRCk7CglwcmludHZhcnMoZnApOwoJZnB1dGZvcm1hdChI\nT0xPRk1ULCBmcCk7CglmcHV0YygnXG4nLCBmcCk7CglwdXR3KEhPTE9NQUdJQywgZnApOwkJ\nLyogcHV0IG1hZ2ljIG51bWJlciAqLwoJaWYoIChmZCA9IGR1cChmaWxlbm8oZnApKSkgPCAw\nICkgewoJCXNwcmludGYoZXJybXNnLCAiY2Fubm90IGR1cCBcIiVzXCIgZm9yIHdyaXRpbmci\nLCBoZGtmaWxlKTsKCQllcnJvcihTWVNURU0sIGVycm1zZyk7Cgl9CglpZiggRU9GPT1mY2xv\nc2UoZnApICkgewkJLyogZmx1c2ggYW5kIGNsb3NlIHN0ZGlvIHN0cmVhbSAqLwoJCXNwcmlu\ndGYoZXJybXNnLCAiY2Fubm90IGZjbG9zZSBcIiVzXCIgZm9yIHdyaXRpbmciLCBoZGtmaWxl\nKTsKCQllcnJvcihTWVNURU0sIGVycm1zZyk7Cgl9CglpZiggKGxhc3Rsb2MgPSBsc2Vlayhm\nZCwgKG9mZl90KTAsIDIpKSA9PSAob2ZmX3QpLTEgKSB7CgkJc3ByaW50ZihlcnJtc2csICJj\nYW5ub3QgbHNlZWsgXCIlc1wiIiwgaGRrZmlsZSk7CgkJZXJyb3IoU1lTVEVNLCBlcnJtc2cp\nOwoJfQoJZm9yIChuID0gdmRlZihTRUNUSU9OKTsgbi0tOyBncCsrKSB7CS8qIGluaXRpYWxp\nemUgZWFjaCBzZWN0aW9uICovCgkJbmV4dGxvYyA9IDBMOwoJCXdyaXRlKGZkLCAoY2hhciAq\nKSZuZXh0bG9jLCBzaXplb2YobmV4dGxvYykpOwoJCWhkaW5pdChmZCwgZ3ApOwkJCS8qIHdy\naXRlcyBiZWFtIGluZGV4ICovCgkJaWYgKCFuKQoJCQlicmVhazsKCQluZXh0bG9jID0gaGRm\naWxlbihmZCk7CQkvKiB3cml0ZSBzZWN0aW9uIHBvaW50ZXIgKi8KCQlpZiAobHNlZWsoZmQs\nIChvZmZfdClsYXN0bG9jLCAwKSA9PSAob2ZmX3QpLTEgKQoJCQllcnJvcihTWVNURU0sCgkJ\nCQkiY2Fubm90IHNlZWsgb24gaG9sb2RlY2sgZmlsZSBpbiBjcmVhdGhvbG8iKTsKCQl3cml0\nZShmZCwgKGNoYXIgKikmbmV4dGxvYywgc2l6ZW9mKG5leHRsb2MpKTsKCQlsc2VlayhmZCwg\nKG9mZl90KShsYXN0bG9jPW5leHRsb2MpLCAwKTsKCX0KfQoKCmludApoZWFkbGluZShzKQkJ\nCS8qIHByb2Nlc3MgaW5mb3JtYXRpb24gaGVhZGVyIGxpbmUgKi8KY2hhcgkqczsKewoJZXh0\nZXJuIGNoYXIJRk1UU1RSW107CglyZWdpc3RlciBjaGFyCSpjcDsKCWNoYXIJZm10WzMyXTsK\nCglpZiAoZm9ybWF0dmFsKGZtdCwgcykpIHsKCQlpZiAoc3RyY21wKGZtdCwgSE9MT0ZNVCkp\nIHsKCQkJc3ByaW50ZihlcnJtc2csICIlcyBmaWxlIFwiJXNcIiBoYXMgJXMlcyIsCgkJCQkJ\nSE9MT0ZNVCwgaGRrZmlsZSwgRk1UU1RSLCBmbXQpOwoJCQllcnJvcihVU0VSLCBlcnJtc2cp\nOwoJCX0KCQlyZXR1cm4oMCk7Cgl9Cglmb3IgKGNwID0gczsgKmNwOyBjcCsrKQkJLyogdGFr\nZSBvZmYgYW55IGNvbW1lbnRzICovCgkJaWYgKCpjcCA9PSAnIycpIHsKCQkJKmNwID0gJ1ww\nJzsKCQkJYnJlYWs7CgkJfQoJc2V0dmFyaWFibGUocywgbWF0Y2h2YXIpOwkvKiBkb24ndCBm\nbGFnIGVycm9ycyAqLwoJcmV0dXJuKDApOwp9CgoKbG9hZGhvbG8oKQkJCS8qIHN0YXJ0IGxv\nYWRpbmcgYSBob2xvZGVjayBmcm9tIGZuYW1lICovCnsKCUZJTEUJKmZwOwoJaW50CWZkOwoJ\naW50CW47CglpbnQzMgluZXh0bG9jOwoJCglpZiAoKG5jcHJvY3MgPiAwKSAmIChmb3JjZSA+\nPSAwKSkKCQlmcCA9IGZvcGVuKGhka2ZpbGUsICJyKyIpOwoJZWxzZQoJCWZwID0gTlVMTDsK\nCWlmIChmcCA9PSBOVUxMKSB7CgkJaWYgKChmcCA9IGZvcGVuKGhka2ZpbGUsICJyIikpID09\nIE5VTEwpIHsKCQkJc3ByaW50ZihlcnJtc2csICJjYW5ub3Qgb3BlbiBcIiVzXCIiLCBoZGtm\naWxlKTsKCQkJZXJyb3IoU1lTVEVNLCBlcnJtc2cpOwoJCX0KCQlpZiAobmNwcm9jcyA+IDAp\nIHsKCQkJc3ByaW50ZihlcnJtc2csCgkJCSJcIiVzXCIgb3BlbmVkIHJlYWQtb25seTsgbmV3\nIHJheXMgd2lsbCBiZSBkaXNjYXJkZWQiLAoJCQkJCWhka2ZpbGUpOwoJCQllcnJvcihXQVJO\nSU5HLCBlcnJtc2cpOwoJCQlmb3JjZSA9IC0xOwoJCX0KCX0KCQkJCQkvKiBsb2FkIHZhcmlh\nYmxlcyBmcm9tIGhlYWRlciAqLwoJZ2V0aGVhZGVyKGZwLCBoZWFkbGluZSwgTlVMTCk7CgkJ\nCQkJLyogY2hlY2sgbWFnaWMgbnVtYmVyICovCglpZiAoZ2V0dyhmcCkgIT0gSE9MT01BR0lD\nKSB7CgkJc3ByaW50ZihlcnJtc2csICJiYWQgbWFnaWMgbnVtYmVyIGluIGhvbG9kZWNrIGZp\nbGUgXCIlc1wiIiwKCQkJCWhka2ZpbGUpOwoJCWVycm9yKFVTRVIsIGVycm1zZyk7Cgl9Cglu\nZXh0bG9jID0gZnRlbGwoZnApOwkJCS8qIGdldCBzdGRpbyBwb3NpdGlvbiAqLwoJZmQgPSBk\ndXAoZmlsZW5vKGZwKSk7CglmY2xvc2UoZnApOwkJCQkvKiBkb25lIHdpdGggc3RkaW8gKi8K\nCWZvciAobiA9IDA7IG5leHRsb2MgPiAwTDsgbisrKSB7CS8qIGluaXRpYWxpemUgZWFjaCBz\nZWN0aW9uICovCgkJbHNlZWsoZmQsIChvZmZfdCluZXh0bG9jLCAwKTsKCQlyZWFkKGZkLCAo\nY2hhciAqKSZuZXh0bG9jLCBzaXplb2YobmV4dGxvYykpOwoJCWhkaW5pdChmZCwgTlVMTCk7\nCgl9CglpZiAobiAhPSB2ZGVmKFNFQ1RJT04pKSB7CgkJc3ByaW50ZihlcnJtc2csICJudW1i\nZXIgb2Ygc2VjdGlvbnMgZG9lcyBub3QgbWF0Y2ggJXMgc2V0dGluZyIsCgkJCQl2bmFtKFNF\nQ1RJT04pKTsKCQllcnJvcihXQVJOSU5HLCBlcnJtc2cpOwoJfQp9CgoKZG9uZV9wYWNrZXRz\nKHBsKQkJLyogaGFuZGxlIGZpbmlzaGVkIHBhY2tldHMgKi8KUEFDS0VUCSpwbDsKewoJc3Rh\ndGljIGludAluMmZsdXNoID0gMDsKCXJlZ2lzdGVyIFBBQ0tFVAkqcDsKCgl3aGlsZSAocGwg\nIT0gTlVMTCkgewoJCXAgPSBwbDsgcGwgPSBwLT5uZXh0OyBwLT5uZXh0ID0gTlVMTDsKCQlp\nZiAocC0+bnIgPiAwKSB7CQkvKiBhZGQgdG8gaG9sb2RlY2sgKi8KCQkJbWVtY3B5KCAodm9p\nZCAqKWhkbmV3cmF5cyhoZGxpc3RbcC0+aGRdLHAtPmJpLHAtPm5yKSwKCQkJCSh2b2lkICop\ncC0+cmEsCgkJCQlwLT5ucipzaXplb2YoUkFZVkFMKSk7CgkJCWlmIChvdXRkZXYgIT0gTlVM\nTCkJLyogZGlzcGxheSBpdCAqLwoJCQkJZGlzcF9wYWNrZXQoKFBBQ0tIRUFEICopcCk7CgkJ\nCWlmIChoZGNhY2hlc2l6ZSA8PSAwKQoJCQkJbjJmbHVzaCsrOwoJCQlucmF5c2RvbmUgKz0g\ncC0+bnI7CgkJCW5wYWNrc2RvbmUrKzsKCQkJcC0+bnIgPSAwOwoJCX0KCQlwLT5uZXh0ID0g\nZnJlZXBhY2tzOwkJLyogcHVzaCBvbnRvIGZyZWUgbGlzdCAqLwoJCWZyZWVwYWNrcyA9IHA7\nCgl9CglpZiAobjJmbHVzaCA+PSBSVEZMVVNIKSB7CgkJaWYgKG91dGRldiAhPSBOVUxMKQoJ\nCQloZHN5bmMoTlVMTCwgMSk7CgkJZWxzZQoJCQloZGZsdXNoKE5VTEwpOwoJCW4yZmx1c2gg\nPSAwOwoJfQp9CgoKcm9vdG5hbWUocm4sIGZuKQkJLyogcmVtb3ZlIHRhaWwgZnJvbSBlbmQg\nb2YgZm4gKi8KcmVnaXN0ZXIgY2hhcgkqcm4sICpmbjsKewoJY2hhcgkqdHAsICpkcDsKCglm\nb3IgKHRwID0gTlVMTCwgZHAgPSBybjsgKCpybiA9ICpmbisrKTsgcm4rKykgewoJCWlmICgq\ncm4gPT0gJy8nKQoJCQlkcCA9IHJuOwoJCWVsc2UgaWYgKCpybiA9PSAnLicpCgkJCXRwID0g\ncm47Cgl9CglpZiAodHAgIT0gTlVMTCAmJiB0cCA+IGRwKQoJCSp0cCA9ICdcMCc7Cn0KCgpi\nYWR2YWx1ZSh2YykJCQkvKiByZXBvcnQgYmFkIHZhcmlhYmxlIHZhbHVlIGFuZCBleGl0ICov\nCmludAl2YzsKewoJc3ByaW50ZihlcnJtc2csICJiYWQgdmFsdWUgZm9yIHZhcmlhYmxlICcl\ncyciLCB2bmFtKHZjKSk7CgllcnJvcihVU0VSLCBlcnJtc2cpOwp9CgoKdm9pZAplcHV0cyhz\nKQkJCS8qIHB1dCBlcnJvciBtZXNzYWdlIHRvIHN0ZGVyciAqLwpyZWdpc3RlciBjaGFyICAq\nczsKewoJc3RhdGljIGludCAgbWlkbGluZSA9IDA7CgoJaWYgKCEqcykKCQlyZXR1cm47Cglp\nZiAoIW1pZGxpbmUrKykgewkvKiBwcmVwZW5kIGxpbmUgd2l0aCBwcm9ncmFtIG5hbWUgKi8K\nCQlmcHV0cyhwcm9nbmFtZSwgc3RkZXJyKTsKCQlmcHV0cygiOiAiLCBzdGRlcnIpOwoJfQoJ\nZnB1dHMocywgc3RkZXJyKTsKCWlmIChzW3N0cmxlbihzKS0xXSA9PSAnXG4nKSB7CgkJZmZs\ndXNoKHN0ZGVycik7CgkJbWlkbGluZSA9IDA7Cgl9Cn0KCgp2b2lkCnF1aXQoZWMpCQkJLyog\nZXhpdCBwcm9ncmFtIGdyYWNlZnVsbHkgKi8KaW50CWVjOwp7CglpbnQJc3RhdHVzID0gMDsK\nCglpZiAoaGRsaXN0WzBdICE9IE5VTEwpIHsJLyogY2xvc2UgaG9sb2RlY2sgKi8KCQlpZiAo\nbnByb2NzID4gMCkKCQkJc3RhdHVzID0gZG9uZV9ydHJhY2UoKTsJCS8qIGNhbGxzIGhkc3lu\nYygpICovCgkJaWYgKChuY3Byb2NzID4gMCkgJiAoZm9yY2UgPj0gMCkgJiYgdmRlZihSRVBP\nUlQpKSB7CgkJCW9mZl90CWZzaXosIGZ1c2U7CgkJCWZzaXogPSBoZGZpbGVuKGhkbGlzdFsw\nXS0+ZmQpOwoJCQlmdXNlID0gaGRmaWx1c2UoaGRsaXN0WzBdLT5mZCwgMSk7CgkJCWZwcmlu\ndGYoc3RkZXJyLAoJCQkiJXM6ICUuMWYgTWJ5dGUgaG9sb2RlY2sgZmlsZSwgJS4xZiUlIGZy\nYWdtZW50YXRpb25cbiIsCgkJCQkJaGRrZmlsZSwgZnNpei8oMTAyNC4qMTAyNC4pLAoJCQkJ\nCTEwMC4qKGZzaXotZnVzZSkvZnNpeik7CgkJfQoJfQoJaWYgKG9yaWdfbW9kZSA+PSAwKQkJ\nLyogcmVzZXQgaG9sb2RlY2sgYWNjZXNzIG1vZGUgKi8KCQlmY2htb2QoaGRsaXN0WzBdLT5m\nZCwgb3JpZ19tb2RlKTsKCWlmIChvdXRkZXYgIT0gTlVMTCkJCS8qIGNsb3NlIGRpc3BsYXkg\nKi8KCQlkaXNwX2Nsb3NlKCk7CglleGl0KGVjID8gZWMgOiBzdGF0dXMpOwkJLyogZXhpdCAq\nLwp9Cg==\n--------------020606090706070300020809--\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-dev/2003-October/000215.html).</sup>", "id": "radiance-dev_000215", "created_by": "Peter_Apian-Bennewitz"}