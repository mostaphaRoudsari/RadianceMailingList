{"topic": "illuminance grid revisited", "category": "radiance-general", "attachments": [], "created_by_name": "John S. An", "created_at": "January 04, 2004 at 12:02PM", "body": "--Apple-Mail-1-439257991\nContent-Transfer-Encoding: 7bit\nContent-Type: text/plain;\n\tcharset=US-ASCII;\n\tformat=flowed\n\n\nI've been away from my dual G5 machine, so could not work on the nfs \nissue (which I have to get back to shortly), but in the meantime, I \nhave noticed something in a past discussion that I find puzzling.  It's \nregarding getting illuminance values across a grid using rtrace.\n\n\n >On 22 May 2002, at 14:21, Greg Ward wrote:\n > > a better example for a grid\n > > of 15 by 30 points spread in a 10x20 room and 2.5 feet\n >off\n > > the floor with a half foot margin on each side would be:\n > >\n > > % cnt 15 30 | rcalc -e \n'$1=(10-.5)/(15-1)*$1;$2=(20-.5)/(30-1)*$2;$3=2.5' \\\n > >  -e '$4=0;$5=0;$6=1' | rtrace -I -h [options] octree \\\n > >  | rcalc -e '$1=179*(.265*$1+.670*$2+.065*$3)' >\n >output.dat\n >\n\n\nI had been using modification of the above to generate the grid and get \nilluminance values.  But recently, I just tried this:\n > > % cnt 6 12 | rcalc -e \n'$1=(162-13.5)/(6-1)*$1;$2=(324-13.5)/(12-1)*$2;$3=36;$4=0;$5=0;$6=1' > \noutput.out\n\n\nThis was for a scene modeled in inches, and the room dimensions are \n13'-5\" x 27'.  I wanted to divide the room into 27\" squares and get \nilluminance readings at their center.  The output I got was\n\n\n0\t0\t36\t0\t0\t1\n0\t28.2272727\t36\t0\t0\t1\n0\t56.4545455\t36\t0\t0\t1\n0\t84.6818182\t36\t0\t0\t1\n0\t112.909091\t36\t0\t0\t1\n0\t141.136364\t36\t0\t0\t1\n0\t169.363636\t36\t0\t0\t1\n0\t197.590909\t36\t0\t0\t1\n0\t225.818182\t36\t0\t0\t1\n0\t254.045455\t36\t0\t0\t1\n0\t282.272727\t36\t0\t0\t1\n0\t310.5\t36\t0\t0\t1\n29.7\t0\t36\t0\t0\t1\n29.7\t28.2272727\t36\t0\t0\t1\n29.7\t56.4545455\t36\t0\t0\t1\n29.7\t84.6818182\t36\t0\t0\t1\n29.7\t112.909091\t36\t0\t0\t1\n29.7\t141.136364\t36\t0\t0\t1\n29.7\t169.363636\t36\t0\t0\t1\n29.7\t197.590909\t36\t0\t0\t1\n29.7\t225.818182\t36\t0\t0\t1\n29.7\t254.045455\t36\t0\t0\t1\n29.7\t282.272727\t36\t0\t0\t1\n29.7\t310.5\t36\t0\t0\t1\n59.4\t0\t36\t0\t0\t1\n59.4\t28.2272727\t36\t0\t0\t1\n59.4\t56.4545455\t36\t0\t0\t1\n59.4\t84.6818182\t36\t0\t0\t1\n59.4\t112.909091\t36\t0\t0\t1\n59.4\t141.136364\t36\t0\t0\t1\n59.4\t169.363636\t36\t0\t0\t1\n59.4\t197.590909\t36\t0\t0\t1\n59.4\t225.818182\t36\t0\t0\t1\n59.4\t254.045455\t36\t0\t0\t1\n59.4\t282.272727\t36\t0\t0\t1\n59.4\t310.5\t36\t0\t0\t1\n89.1\t0\t36\t0\t0\t1\n89.1\t28.2272727\t36\t0\t0\t1\n89.1\t56.4545455\t36\t0\t0\t1\n89.1\t84.6818182\t36\t0\t0\t1\n89.1\t112.909091\t36\t0\t0\t1\n89.1\t141.136364\t36\t0\t0\t1\n89.1\t169.363636\t36\t0\t0\t1\n89.1\t197.590909\t36\t0\t0\t1\n89.1\t225.818182\t36\t0\t0\t1\n89.1\t254.045455\t36\t0\t0\t1\n89.1\t282.272727\t36\t0\t0\t1\n89.1\t310.5\t36\t0\t0\t1\n118.8\t0\t36\t0\t0\t1\n118.8\t28.2272727\t36\t0\t0\t1\n118.8\t56.4545455\t36\t0\t0\t1\n118.8\t84.6818182\t36\t0\t0\t1\n118.8\t112.909091\t36\t0\t0\t1\n118.8\t141.136364\t36\t0\t0\t1\n118.8\t169.363636\t36\t0\t0\t1\n118.8\t197.590909\t36\t0\t0\t1\n118.8\t225.818182\t36\t0\t0\t1\n118.8\t254.045455\t36\t0\t0\t1\n118.8\t282.272727\t36\t0\t0\t1\n118.8\t310.5\t36\t0\t0\t1\n148.5\t0\t36\t0\t0\t1\n148.5\t28.2272727\t36\t0\t0\t1\n148.5\t56.4545455\t36\t0\t0\t1\n148.5\t84.6818182\t36\t0\t0\t1\n148.5\t112.909091\t36\t0\t0\t1\n148.5\t141.136364\t36\t0\t0\t1\n148.5\t169.363636\t36\t0\t0\t1\n148.5\t197.590909\t36\t0\t0\t1\n148.5\t225.818182\t36\t0\t0\t1\n148.5\t254.045455\t36\t0\t0\t1\n148.5\t282.272727\t36\t0\t0\t1\n148.5\t310.5\t36\t0\t0\t1\n\n\nWhat puzzled me was that this output takes some of the reading at \npoints that are in the wall (x values of 0, and y values of 0), and \nthat the grid is actually shifted.  If all the values are taken as an \naverage, then I doubt this shift has a huge impact.  However, if you \nneed to take readings at precise points distributed across the room, it \nseems to me that this grid would be off.\n\n\nSo, I fiddled with what rudimentary mathematics I can handle, tried \nthis instead\n\n\n > > % cnt 6 12 | rcalc -e \n'$1=(162/6)*$1+13.5;$2=(324/12)*$2+13.5;$3=36;$4=0;$5=0;$6=1' > \noutput.out\n\n\n13.5\t13.5\t36\t0\t0\t1\n13.5\t40.5\t36\t0\t0\t1\n13.5\t67.5\t36\t0\t0\t1\n13.5\t94.5\t36\t0\t0\t1\n13.5\t121.5\t36\t0\t0\t1\n13.5\t148.5\t36\t0\t0\t1\n13.5\t175.5\t36\t0\t0\t1\n13.5\t202.5\t36\t0\t0\t1\n13.5\t229.5\t36\t0\t0\t1\n13.5\t256.5\t36\t0\t0\t1\n13.5\t283.5\t36\t0\t0\t1\n13.5\t310.5\t36\t0\t0\t1\n40.5\t13.5\t36\t0\t0\t1\n40.5\t40.5\t36\t0\t0\t1\n40.5\t67.5\t36\t0\t0\t1\n40.5\t94.5\t36\t0\t0\t1\n40.5\t121.5\t36\t0\t0\t1\n40.5\t148.5\t36\t0\t0\t1\n40.5\t175.5\t36\t0\t0\t1\n40.5\t202.5\t36\t0\t0\t1\n40.5\t229.5\t36\t0\t0\t1\n40.5\t256.5\t36\t0\t0\t1\n40.5\t283.5\t36\t0\t0\t1\n40.5\t310.5\t36\t0\t0\t1\n67.5\t13.5\t36\t0\t0\t1\n67.5\t40.5\t36\t0\t0\t1\n67.5\t67.5\t36\t0\t0\t1\n67.5\t94.5\t36\t0\t0\t1\n67.5\t121.5\t36\t0\t0\t1\n67.5\t148.5\t36\t0\t0\t1\n67.5\t175.5\t36\t0\t0\t1\n67.5\t202.5\t36\t0\t0\t1\n67.5\t229.5\t36\t0\t0\t1\n67.5\t256.5\t36\t0\t0\t1\n67.5\t283.5\t36\t0\t0\t1\n67.5\t310.5\t36\t0\t0\t1\n94.5\t13.5\t36\t0\t0\t1\n94.5\t40.5\t36\t0\t0\t1\n94.5\t67.5\t36\t0\t0\t1\n94.5\t94.5\t36\t0\t0\t1\n94.5\t121.5\t36\t0\t0\t1\n94.5\t148.5\t36\t0\t0\t1\n94.5\t175.5\t36\t0\t0\t1\n94.5\t202.5\t36\t0\t0\t1\n94.5\t229.5\t36\t0\t0\t1\n94.5\t256.5\t36\t0\t0\t1\n94.5\t283.5\t36\t0\t0\t1\n94.5\t310.5\t36\t0\t0\t1\n121.5\t13.5\t36\t0\t0\t1\n121.5\t40.5\t36\t0\t0\t1\n121.5\t67.5\t36\t0\t0\t1\n121.5\t94.5\t36\t0\t0\t1\n121.5\t121.5\t36\t0\t0\t1\n121.5\t148.5\t36\t0\t0\t1\n121.5\t175.5\t36\t0\t0\t1\n121.5\t202.5\t36\t0\t0\t1\n121.5\t229.5\t36\t0\t0\t1\n121.5\t256.5\t36\t0\t0\t1\n121.5\t283.5\t36\t0\t0\t1\n121.5\t310.5\t36\t0\t0\t1\n148.5\t13.5\t36\t0\t0\t1\n148.5\t40.5\t36\t0\t0\t1\n148.5\t67.5\t36\t0\t0\t1\n148.5\t94.5\t36\t0\t0\t1\n148.5\t121.5\t36\t0\t0\t1\n148.5\t148.5\t36\t0\t0\t1\n148.5\t175.5\t36\t0\t0\t1\n148.5\t202.5\t36\t0\t0\t1\n148.5\t229.5\t36\t0\t0\t1\n148.5\t256.5\t36\t0\t0\t1\n148.5\t283.5\t36\t0\t0\t1\n148.5\t310.5\t36\t0\t0\t1\n\n\nThe important part is that there were no x or y values of 0, and the \npoints were not shifted.  I probably got something wrong here, but \nthese input positions were the values that I was expecting.\n\n\nI hope somebody finds this useful.\n\n\n\n\n--Apple-Mail-1-439257991\nContent-Transfer-Encoding: 7bit\nContent-Type: text/enriched;\n\tcharset=US-ASCII\n\n\nI've been away from my dual G5 machine, so could not work on the nfs\nissue (which I have to get back to shortly), but in the meantime, I\nhave noticed something in a past discussion that I find puzzling. \nIt's regarding getting illuminance values across a grid using rtrace.\n\n\n\n\n<fontfamily><param>Courier</param><x-tad-bigger>></x-tad-bigger><italic><x-tad-bigger>On\n22 May 2002, at 14:21, Greg Ward wrote:\n\n\n</x-tad-bigger></italic><x-tad-bigger>></x-tad-bigger><italic><x-tad-bigger>\n> a better example for a grid\n\n\n</x-tad-bigger></italic><x-tad-bigger>></x-tad-bigger><italic><x-tad-bigger>\n> of 15 by 30 points spread in a 10x20 room and 2.5 feet\n\n\n</x-tad-bigger></italic><x-tad-bigger>></x-tad-bigger><italic><x-tad-bigger>off\n\n\n</x-tad-bigger></italic><x-tad-bigger>></x-tad-bigger><italic><x-tad-bigger>\n> the floor with a half foot margin on each side would be:\n\n\n</x-tad-bigger></italic><x-tad-bigger>></x-tad-bigger><italic><x-tad-bigger> >\n\n\n</x-tad-bigger></italic><x-tad-bigger>></x-tad-bigger><italic><x-tad-bigger>\n> % cnt 15 30 | rcalc -e\n'$1=(10-.5)/(15-1)*$1;$2=(20-.5)/(30-1)*$2;$3=2.5' \\\n\n\n</x-tad-bigger></italic><x-tad-bigger>></x-tad-bigger><italic><x-tad-bigger>\n>  -e '$4=0;$5=0;$6=1' | rtrace -I -h [options] octree \\\n\n\n</x-tad-bigger></italic><x-tad-bigger>></x-tad-bigger><italic><x-tad-bigger>\n>  | rcalc -e '$1=179*(.265*$1+.670*$2+.065*$3)' >\n\n\n</x-tad-bigger></italic><x-tad-bigger>></x-tad-bigger><italic><x-tad-bigger>output.dat\n\n\n</x-tad-bigger></italic><x-tad-bigger>></x-tad-bigger><italic><x-tad-bigger>\n\n\n\n\n</x-tad-bigger></italic></fontfamily>I had been using modification of\nthe above to generate the grid and get illuminance values.  But\nrecently, I just tried this:\n\n\n<fontfamily><param>Courier</param><x-tad-bigger>></x-tad-bigger><italic><x-tad-bigger>\n> % cnt 6 12 | rcalc -e\n'$1=(162-13.5)/(6-1)*$1;$2=(324-13.5)/(12-1)*$2;$3=36;$4=0;$5=0;$6=1'\n> output.out\n\n\n\n\n</x-tad-bigger></italic></fontfamily>This was for a scene modeled in\ninches, and the room dimensions are 13'-5\" x 27'.  I wanted to divide\nthe room into 27\" squares and get illuminance readings at their\ncenter.  The output I got was\n\n\n\n\n0\t0\t36\t0\t0\t1\n\n\n0\t28.2272727\t36\t0\t0\t1\n\n\n0\t56.4545455\t36\t0\t0\t1\n\n\n0\t84.6818182\t36\t0\t0\t1\n\n\n0\t112.909091\t36\t0\t0\t1\n\n\n0\t141.136364\t36\t0\t0\t1\n\n\n0\t169.363636\t36\t0\t0\t1\n\n\n0\t197.590909\t36\t0\t0\t1\n\n\n0\t225.818182\t36\t0\t0\t1\n\n\n0\t254.045455\t36\t0\t0\t1\n\n\n0\t282.272727\t36\t0\t0\t1\n\n\n0\t310.5\t36\t0\t0\t1\n\n\n29.7\t0\t36\t0\t0\t1\n\n\n29.7\t28.2272727\t36\t0\t0\t1\n\n\n29.7\t56.4545455\t36\t0\t0\t1\n\n\n29.7\t84.6818182\t36\t0\t0\t1\n\n\n29.7\t112.909091\t36\t0\t0\t1\n\n\n29.7\t141.136364\t36\t0\t0\t1\n\n\n29.7\t169.363636\t36\t0\t0\t1\n\n\n29.7\t197.590909\t36\t0\t0\t1\n\n\n29.7\t225.818182\t36\t0\t0\t1\n\n\n29.7\t254.045455\t36\t0\t0\t1\n\n\n29.7\t282.272727\t36\t0\t0\t1\n\n\n29.7\t310.5\t36\t0\t0\t1\n\n\n59.4\t0\t36\t0\t0\t1\n\n\n59.4\t28.2272727\t36\t0\t0\t1\n\n\n59.4\t56.4545455\t36\t0\t0\t1\n\n\n59.4\t84.6818182\t36\t0\t0\t1\n\n\n59.4\t112.909091\t36\t0\t0\t1\n\n\n59.4\t141.136364\t36\t0\t0\t1\n\n\n59.4\t169.363636\t36\t0\t0\t1\n\n\n59.4\t197.590909\t36\t0\t0\t1\n\n\n59.4\t225.818182\t36\t0\t0\t1\n\n\n59.4\t254.045455\t36\t0\t0\t1\n\n\n59.4\t282.272727\t36\t0\t0\t1\n\n\n59.4\t310.5\t36\t0\t0\t1\n\n\n89.1\t0\t36\t0\t0\t1\n\n\n89.1\t28.2272727\t36\t0\t0\t1\n\n\n89.1\t56.4545455\t36\t0\t0\t1\n\n\n89.1\t84.6818182\t36\t0\t0\t1\n\n\n89.1\t112.909091\t36\t0\t0\t1\n\n\n89.1\t141.136364\t36\t0\t0\t1\n\n\n89.1\t169.363636\t36\t0\t0\t1\n\n\n89.1\t197.590909\t36\t0\t0\t1\n\n\n89.1\t225.818182\t36\t0\t0\t1\n\n\n89.1\t254.045455\t36\t0\t0\t1\n\n\n89.1\t282.272727\t36\t0\t0\t1\n\n\n89.1\t310.5\t36\t0\t0\t1\n\n\n118.8\t0\t36\t0\t0\t1\n\n\n118.8\t28.2272727\t36\t0\t0\t1\n\n\n118.8\t56.4545455\t36\t0\t0\t1\n\n\n118.8\t84.6818182\t36\t0\t0\t1\n\n\n118.8\t112.909091\t36\t0\t0\t1\n\n\n118.8\t141.136364\t36\t0\t0\t1\n\n\n118.8\t169.363636\t36\t0\t0\t1\n\n\n118.8\t197.590909\t36\t0\t0\t1\n\n\n118.8\t225.818182\t36\t0\t0\t1\n\n\n118.8\t254.045455\t36\t0\t0\t1\n\n\n118.8\t282.272727\t36\t0\t0\t1\n\n\n118.8\t310.5\t36\t0\t0\t1\n\n\n148.5\t0\t36\t0\t0\t1\n\n\n148.5\t28.2272727\t36\t0\t0\t1\n\n\n148.5\t56.4545455\t36\t0\t0\t1\n\n\n148.5\t84.6818182\t36\t0\t0\t1\n\n\n148.5\t112.909091\t36\t0\t0\t1\n\n\n148.5\t141.136364\t36\t0\t0\t1\n\n\n148.5\t169.363636\t36\t0\t0\t1\n\n\n148.5\t197.590909\t36\t0\t0\t1\n\n\n148.5\t225.818182\t36\t0\t0\t1\n\n\n148.5\t254.045455\t36\t0\t0\t1\n\n\n148.5\t282.272727\t36\t0\t0\t1\n\n\n148.5\t310.5\t36\t0\t0\t1\n\n\n\n\n\n\nWhat puzzled me was that this output takes some of the reading at\npoints that are in the wall (x values of 0, and y values of 0), and\nthat the grid is actually shifted.  If all the values are taken as an\naverage, then I doubt this shift has a huge impact.  However, if you\nneed to take readings at precise points distributed across the room,\nit seems to me that this grid would be off.\n\n\n\n\nSo, I fiddled with what rudimentary mathematics I can handle, tried\nthis instead\n\n\n\n\n<fontfamily><param>Courier</param><x-tad-bigger>></x-tad-bigger><italic><x-tad-bigger>\n> % cnt 6 12 | rcalc -e\n'$1=(162/6)*$1+13.5;$2=(324/12)*$2+13.5;$3=36;$4=0;$5=0;$6=1' >\noutput.out\n\n\n</x-tad-bigger></italic></fontfamily>\n\n\n13.5\t13.5\t36\t0\t0\t1\n\n\n13.5\t40.5\t36\t0\t0\t1\n\n\n13.5\t67.5\t36\t0\t0\t1\n\n\n13.5\t94.5\t36\t0\t0\t1\n\n\n13.5\t121.5\t36\t0\t0\t1\n\n\n13.5\t148.5\t36\t0\t0\t1\n\n\n13.5\t175.5\t36\t0\t0\t1\n\n\n13.5\t202.5\t36\t0\t0\t1\n\n\n13.5\t229.5\t36\t0\t0\t1\n\n\n13.5\t256.5\t36\t0\t0\t1\n\n\n13.5\t283.5\t36\t0\t0\t1\n\n\n13.5\t310.5\t36\t0\t0\t1\n\n\n40.5\t13.5\t36\t0\t0\t1\n\n\n40.5\t40.5\t36\t0\t0\t1\n\n\n40.5\t67.5\t36\t0\t0\t1\n\n\n40.5\t94.5\t36\t0\t0\t1\n\n\n40.5\t121.5\t36\t0\t0\t1\n\n\n40.5\t148.5\t36\t0\t0\t1\n\n\n40.5\t175.5\t36\t0\t0\t1\n\n\n40.5\t202.5\t36\t0\t0\t1\n\n\n40.5\t229.5\t36\t0\t0\t1\n\n\n40.5\t256.5\t36\t0\t0\t1\n\n\n40.5\t283.5\t36\t0\t0\t1\n\n\n40.5\t310.5\t36\t0\t0\t1\n\n\n67.5\t13.5\t36\t0\t0\t1\n\n\n67.5\t40.5\t36\t0\t0\t1\n\n\n67.5\t67.5\t36\t0\t0\t1\n\n\n67.5\t94.5\t36\t0\t0\t1\n\n\n67.5\t121.5\t36\t0\t0\t1\n\n\n67.5\t148.5\t36\t0\t0\t1\n\n\n67.5\t175.5\t36\t0\t0\t1\n\n\n67.5\t202.5\t36\t0\t0\t1\n\n\n67.5\t229.5\t36\t0\t0\t1\n\n\n67.5\t256.5\t36\t0\t0\t1\n\n\n67.5\t283.5\t36\t0\t0\t1\n\n\n67.5\t310.5\t36\t0\t0\t1\n\n\n94.5\t13.5\t36\t0\t0\t1\n\n\n94.5\t40.5\t36\t0\t0\t1\n\n\n94.5\t67.5\t36\t0\t0\t1\n\n\n94.5\t94.5\t36\t0\t0\t1\n\n\n94.5\t121.5\t36\t0\t0\t1\n\n\n94.5\t148.5\t36\t0\t0\t1\n\n\n94.5\t175.5\t36\t0\t0\t1\n\n\n94.5\t202.5\t36\t0\t0\t1\n\n\n94.5\t229.5\t36\t0\t0\t1\n\n\n94.5\t256.5\t36\t0\t0\t1\n\n\n94.5\t283.5\t36\t0\t0\t1\n\n\n94.5\t310.5\t36\t0\t0\t1\n\n\n121.5\t13.5\t36\t0\t0\t1\n\n\n121.5\t40.5\t36\t0\t0\t1\n\n\n121.5\t67.5\t36\t0\t0\t1\n\n\n121.5\t94.5\t36\t0\t0\t1\n\n\n121.5\t121.5\t36\t0\t0\t1\n\n\n121.5\t148.5\t36\t0\t0\t1\n\n\n121.5\t175.5\t36\t0\t0\t1\n\n\n121.5\t202.5\t36\t0\t0\t1\n\n\n121.5\t229.5\t36\t0\t0\t1\n\n\n121.5\t256.5\t36\t0\t0\t1\n\n\n121.5\t283.5\t36\t0\t0\t1\n\n\n121.5\t310.5\t36\t0\t0\t1\n\n\n148.5\t13.5\t36\t0\t0\t1\n\n\n148.5\t40.5\t36\t0\t0\t1\n\n\n148.5\t67.5\t36\t0\t0\t1\n\n\n148.5\t94.5\t36\t0\t0\t1\n\n\n148.5\t121.5\t36\t0\t0\t1\n\n\n148.5\t148.5\t36\t0\t0\t1\n\n\n148.5\t175.5\t36\t0\t0\t1\n\n\n148.5\t202.5\t36\t0\t0\t1\n\n\n148.5\t229.5\t36\t0\t0\t1\n\n\n148.5\t256.5\t36\t0\t0\t1\n\n\n148.5\t283.5\t36\t0\t0\t1\n\n\n148.5\t310.5\t36\t0\t0\t1\n\n\n\n\nThe important part is that there were no x or y values of 0, and the\npoints were not shifted.  I probably got something wrong here, but\nthese input positions were the values that I was expecting.\n\n\n\n\nI hope somebody finds this useful. \n\n\n\n\n\n\n--Apple-Mail-1-439257991--\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2004-January/001371.html).</sup>", "id": "radiance-general_001371", "created_by": "John_S._An"}