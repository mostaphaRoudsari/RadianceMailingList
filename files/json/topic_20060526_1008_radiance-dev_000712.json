{"topic": "Problem with ximage in 3.7.2", "category": "radiance-dev", "attachments": [], "created_by_name": "Oskar Itzinger", "created_at": "May 26, 2006 at 10:08AM", "body": "Greg,\n\n\nI've finally a clue why [on my SGI FUEL, IRIX 6.5.28, \nMipsPro 7.4.4, VPro12] ximage from Radiance 3.7.2 displays \nmy pics color-wise *wrongly* but - on the same machine - \nximage from Radiance 3.1.11 shows them *correctly*; I found this \nby re-compilation with -DDEBUG.\n\n\nAs it turned out, the two Radiance versions actually choose \n*different* \"best\" visuals; 3.1.11 selects \"TrueColor, depth 24\" \n(ximage ok), but 3.7.2 picks \"TrueColor, depth 30\" (ximage wrong) \n(just compare <viscmp>/x11image.c 3.1.11/3.7.2).\n\n\nAs a test, I explicitely set the visual in 3.1.11 to a \n\"TrueColor, depth 30\" visual and then ximage displays my pics \ncolor-wise *wrongly* as well [just like 3.7.2 with its own \"best\" \nvisual does]. Conversely, setting a \"TrueColor, depth 24\" visual\nexplicitely in 3.7.2, pics are displayed correctly.\n\n\nSo, I think that handling of \"TrueColor, depth 30\" is *buggy* in \n*both* 3.1.11 and 3.7.2. BTW, \"DirectColor, depth 24\" doesn't \ndisplay my pics either - I just get a window with black background \n(?) and no image...\n\n\nFor a temporarily by-pass [hopefully only until the next official \nrelease?], I set the visual in 3.7.2 *explicitely* to a \"TrueColor, \ndepth 24\" visual - and 3.7.2 ximage works fine on my FUEL ...\n\n\nOnly as a side-note, I've changed the printed information in \n<getbestvis>/x11image.c for DEBUG defined to\n\n\nfprintf(stderr, \"Supported visuals:\\n\");\nfor (i = 0; i < vismatched; i++)\nfprintf(stderr, \"index= %d, id 0x%lx (%lud), class %s, depth %d\\n\",\ni, XVisualIDFromVisual(xvi[i].visual),\nXVisualIDFromVisual(xvi[i].visual),\nvistype[xvi[i].class], xvi[i].depth);\n\n\nand\n\n\nfprintf(stderr, \"Selected visual: index= %d, id 0x%lx (%lud), class %s, \ndepth %d\\n\",\ni, XVisualIDFromVisual(ourvis.visual), \nXVisualIDFromVisual(ourvis.visual),\nvistype[ourvis.class], ourvis.depth);\n\n\nrespectively, as I found this a bit more informative for my debugging...\n\n\nAnyway, thanks for a great piece of software!\n\n\n/oskar\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-dev/2006-May/000712.html).</sup>", "id": "radiance-dev_000712", "created_by": "Oskar_Itzinger"}