{"topic": "rpiece improper input?", "category": "radiance-dev", "attachments": [], "created_by_name": "Mark Stock", "created_at": "August 22, 2007 at 06:45AM", "body": "I found what might be a prevantable error in rpiece that occurs \nwhen the number of rows in the rpiece array exceeds the number of \npixels in the image. I ran\n\n\n\n\n#!/bin/sh\n\n\n[ -z \"$NCPU\" ] && NCPU=2\n[ -z \"$COLS\" ] && COLS=1\n[ -z \"$ROWS\" ] && ROWS=2560\n\n\necho $COLS $ROWS > syncfile\nrm -f pp\n\n\nwhile [ \"$NCPU\" -gt 0 ]\ndo\n         echo \"running proc $NCPU\"\n         rpiece -v -PP pp -F syncfile @vp_sunrise @opts -t 60 -x 1280 -y 1280 -o img09.pic scene10.oct &\n         NCPU=`expr $NCPU - 1`\ndone\nwait\n\n\nrm -f syncfile pp\n\n\nexit 0\n\n\n\n\nand it emitted the following proper error in my nohup.out file:\n\n\n\n\nrunning proc 2\nrunning proc 1\nrpiece: requested piece (59,2559) out of range\nFRAME 1: -vtv -vp 0 0 0 -vd 0 0 1 -vu -1 0 0 -vh 170 -vv 0.511632 \n-vo 0 -va 0 -vs 5\n9.11 -vl 1612.3\nrpict: warning - empty output picture\nrpict: signal - Broken pipe\nrpict: 95282 rays, 0.00% after 0.001u 0.000s 0.001r hours on \nvortex\nFRAME 1: -vtv -vp 0 0 0 -vd 0 0 1 -vu -1 0 0 -vh 170 -vv 0.511632 \n-vo 0 -va 0 -vs 0\n.11 -vl 1612.3\nrpict: warning - empty output picture\n\n\n\n\nwhich is fine, but it also dumped this to the stdout:\n\n\n*** glibc detected *** double free or corruption (!prev): \n0x000000001c2a8e30 ***\n\n\nHere are the stats:\n\n\n% rpict -version\nRADIANCE 3.8 lastmod Thu Dec 28 15:53:05 EST 2006 by root on vortex\n\n\n% uname -a\nLinux vortex 2.6.9-42.0.3.plus.c4smp #1 SMP Fri Oct 6 11:42:04 \nCDT 2006 x86_64 x86_64 x86_64 GNU/Linux\n\n\n% rpm -qa | grep glib\nglibc-2.3.4-2.25\ndbus-glib-0.22-12.EL.7\nglib2-2.4.7-1\nglib-1.2.10-15\nglib2-devel-2.4.7-1\nglibc-common-2.3.4-2.25\nglibc-2.3.4-2.25\nglibc-devel-2.3.4-2.25\nglibc-kernheaders-2.4-9.1.98.EL\nglibc-headers-2.3.4-2.25\nglib2-2.4.7-1\n\n\n\n\nIs this anything to worry about? Normally when I see an error \nlike that, something weird had happened in the compilation.\n\n\n(Normally, I also code in fortran. Take that as you will.)\n\n\nMark\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-dev/2007-August/000774.html).</sup>", "id": "radiance-dev_000774", "created_by": "Mark_Stock"}