{"topic": "Adding the sun to image based lighting environment", "category": "radiance-general", "attachments": [], "created_by_name": "Anne Iversen", "created_at": "November 19, 2009 at 10:56AM", "body": "Hi list,\n\n\nI have tried to add a description of the sun to my ibl environment generated\nfrom a chrome ball. However the \u2018added\u2019 description of the sun is not taken\ninto account. If anyone can guide me on how to proceed I would really\nappreciate it.\n\n\n\n\n\n\nThanks!\n\n\nAnne\n\n\n\n\n\n\nBelow I have given you information on\n\n\n1)    Description of the lighting environment in Environment.rad\n\n\n2)    The commands I have used to run the environment \u2013 with and without\nmksource.\n\n\n\n\n\n\nFor mapping the chrome ball image to the environment I have applied the\nfollowing approach, taken from the \u2018High Dynamic Range Imaging Book\u2019:\n\n\n\n\n#-------------------------------------------------------------------------\n\n\nAd 1) Environment.rad:\n\n\nvoid colorpict hdr_env\n15 red green blue C_20091002ball at 10h44_tilt38.hdr mirrorsphere.cal sb_u sb_v\n-i 1 -rx 90 -rz 8 -ry 0\n0\n0\n\n\n\n\n# specify a \"glow\" material that will use this image\nhdr_env glow env_glow\n0\n0\n4 1 1 1 0\n\n\nenv_glow sphere sphereenv\n0\n0\n4 0 0 0 -1000\n\n\n #To this I have added the description of the sun, the location of the sun\nhas been derived from the chrome ball image:\n\n\n\n\n\n\n# simulation of the sun, radiance and location\nvoid light lum_sun\n0\n0\n3 46700 46700 46700\n\n\n\n\n\n\nlum_sun source sun\n-rx 90 -rz 8 -ry 0\n\n\n0\n\n\n4 0.6410 0.5537 -0.5315 0.5323\n\n\n\n\n\n\n\n\n\n\n#----------------------------------------------------------------------------------------------------\n\n\nAd 2) When running the environment I have used following approach:\n\n\nWithout mksource, just an oconv:\n\n\n\n\n\n\noconv Environment.rad > ibl1.oct\n\n\n\n\n\n\nWith mksource:\n\n\noconv Environment.rad > iblmksource.oct\n\n\nmksource \u2013a 0.5 iblmksource.oct > srcs.rad\n\n\noconv -i iblmksource.oct srcs.rad > ibl1.oct\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2009-November/006348.html).</sup>", "id": "radiance-general_006348", "created_by": "Anne_Iversen"}