{"topic": "rpict's -pd skewed", "category": "radiance-dev", "attachments": [], "created_by_name": "Mark Stock", "created_at": "May 14, 2010 at 08:25PM", "body": "I was playing with the -pd option in rpict in Apr 27th HEAD and \nnoticed that the blurred portion of the image was always skewed \nto the up and left. See the following movie:\n\n\nhttp://markjstock.org/transfer/dofblur_test.mov\n\n\nI think this change would fix it:\n\n\n--- rpict.c_orig\t2009-05-11 17:46:31.000000000 -0400\n+++ rpict.c_new\t2010-05-14 23:09:33.000000000 -0400\n@@ -701,8 +701,8 @@\n  \tif (dblur > FTINY && vdist > FTINY) {\n  \t\tdouble  vc, dfh, dfv;\n  \t\t\t\t\t\t/* square/circle conv. */\n-\t\tdfh = vc = frandom();\n-\t\tdfv = frandom();\n+\t\tdfh = vc = 2.*frandom() - 1.;\n+\t\tdfv = 2.*frandom() - 1.;\n  \t\tdfh *= .5*dblur*sqrt(1. - .5*dfv*dfv);\n  \t\tdfv *= .5*dblur*sqrt(1. - .5*vc*vc);\n  \t\tif (ourview.type == VT_PER || ourview.type == VT_PAR) {\n\n\nMark\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-dev/2010-May/001030.html).</sup>", "id": "radiance-dev_001030", "created_by": "Mark_Stock"}