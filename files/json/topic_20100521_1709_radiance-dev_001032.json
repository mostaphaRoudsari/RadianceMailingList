{"topic": "Modifications to compile 4.0 with MinGW", "category": "radiance-dev", "attachments": [], "created_by_name": "Christian Kohler", "created_at": "May 21, 2010 at 05:09PM", "body": "We have been working at LBNL to compile Radiance 4.0 for inclusion in\nWINDOW6 (win32).\nWe managed to compile it, based on Francesco's MinGW instructions, but\nhere are a few small code issues we need to resolve.\n\n\nThe gcc compiler complains while compiling mkillum.exe\nit reports that the 'quit' function is defined both in\n/src/rt/raypwin.c and /src/gen/mkillum.c\nWe commented out the 'quit' function in raypwin.c and were able to\ncompile, but there are cleaner solutions. Any suggestions on how to do\nsolve this?\n\n\nAs others reported before, we also found the issue with the call to\ntimegm in /src/common/header.c\n\n\nHere is out proposed change:\nchange this:\ntms.tm_year -= 1900;\n*tloc = timegm(&tms);\n\n\nto this:\ntms.tm_year -= 1900;\n#ifdef _WIN32\n*tloc = time(&tms);\n#else\n*tloc = timegm(&tms);\n#endif\n\n\nWe also made some changes to the Scons scripts, but I will send those\nin a separate e-mail, since it is not a direct source code issue.\n\n\nChristian\n\n\n**************\nChristian Kohler, CJKohler at lbl.gov, (510) 486-5040, http://windows.lbl.gov ,\nWindows & Daylighting Research Group, Lawrence Berkeley National Laboratory\n1 Cyclotron Rd, Berkeley, California, 94720, USA\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-dev/2010-May/001032.html).</sup>", "id": "radiance-dev_001032", "created_by": "Christian_Kohler"}