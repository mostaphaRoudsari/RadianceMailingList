{"topic": "Scons script updates for MinGW compile of 4.0", "category": "radiance-dev", "attachments": [], "created_by_name": "Christian Kohler", "created_at": "May 21, 2010 at 05:22PM", "body": "Here are some changes to make to the Scons scripts, to get 4.0 to\ncompile on Windows using MinGW. These were compiled on Windows 7, but\nit should work for XP as well.\n\n\n************\nThis one was previously reported on the dev-list.\n/ray/build_utils/find_libs.py\n\n\nChange:\nv = env.FindFile('Verdana.fnt', './lib')\n\n\nto:\nv = env.FindFile('Veerdana.fnt', './lib')\n***********\n\n\n***********\nAdd some new files to the script:\n/ray/src/rt/SConscript\n\n\nChange:\n  duphead = env.Object(source=\"duphead.c\")\n  persist = env.Object(source=\"persist.c\")\n  ambio = env.Object(source=\"ambio.c\")\n\n\nto:\n  duphead = env.Object(source=\"duphead.c\")\n  persist = env.Object(source=\"persist.c\")\n  ambio = env.Object(source=\"ambio.c\")\n  rayfifo = env.Object(source=\"rayfifo.c\")\n  raypwin = env.Object(source=\"raypwin.c\")\n  raycalls = env.Object(source=\"raycalls.c\")\n\n\nChange:\nrtsrc = ['rtrace.c', duphead, persist, rtmain]\n\n\nto:\nrtsrc = ['rtrace.c', duphead, persist, rtmain, rayfifo, raypwin, raycalls]\n************\n\n\n*********\nI couldn't figure out how to cleanly set the tools environment from\nwin32 (which uses the Microsoft Visual Studio compiler) to mingw.\nI made this crude change to the main Sconscript, please tell me the\nproper way to force it to use the mingw environment:\n/ray/SConstruct\n\n\nChange:\n# Set up build environment\n -env = Environment()\n\n\nto:\n# Set up build environment\nenv = Environment(tools = ['mingw'])\n*********\n\n\nChristian\n\n\n\n\n**************\nChristian Kohler, CJKohler at lbl.gov, (510) 486-5040, http://windows.lbl.gov ,\nWindows & Daylighting Research Group, Lawrence Berkeley National Laboratory\n1 Cyclotron Rd, Berkeley, California, 94720, USA\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-dev/2010-May/001033.html).</sup>", "id": "radiance-dev_001033", "created_by": "Christian_Kohler"}