{"topic": "computing the standard deviation of pixels above zero", "category": "radiance-general", "attachments": [], "created_by_name": "Kyle Konis", "created_at": "June 14, 2010 at 02:58PM", "body": "I have an HDR image that was generated by combining the original HDR with\nan equally sized bitmap image to mask out an area within the image for\nanalysis. I have a script that enables the average luminance of the masked\narea to be computed via (from the below script):\n\n\ntaskavg=`thpic -o $inp $tdir/$task.pic | toflt | total -if`\n\n\n*I would like to compute the standard deviation of only the non-zero\npixels and am unsure how to do this.\n\n\nthe program \"total\" has a number of options to calculate the mean, max,\nmin, RMS,etc, but i need to filter out all of the zero'ed pixels before/as\nI pass the pixel data to it.\n\n\nAny suggestions would be appreciated. I have put a sample image (out.hdr)\nas well as the script, mask, and orig image (example.hdr) in the following\ndirectory online\n\n\nhttps://gaia.lbl.gov/people/kskonis/share/TEMP/masks_lab/\n\n\nbest,\n\n\nKyle Konis\nPh.D Student\nUC Berkeley / LBNL\n\n\n\n\n################################\n#!/bin/csh -f\n# modified from \"analyz.csh\" 2005\n\n\n# used to apply the mask and return an image with all pixels black,\n# except the un-masked pixels\nalias thpic 'pcomb -e \"lo=if(gi(2)-.5,li(1),0)\" \\!*'\n\n\n\n\n# -h -H\t\tdo not print header or resolution string\n# -pG\t\tprint only the primary GREEN\n# -df       Output [binary 32-bit float values]\nalias toflt 'pvalue -h -H -pG -df \\!*'\n\n\nset task=task\nset mdir=/Users/kyle/HDR/masks_lab/masks\nset tdir=/tmp/anl71t$$\nmkdir $tdir\n\n\n# convert picture [from] Windows BMP image to RADIANCE\n# -r from a Windows BMP image to a RADIANCE picture\nra_bmp -r $mdir/$task.bmp $tdir/$task.pic\n\n\ntoflt $tdir/$task.pic | total -if > $tdir/$task.tot\n\n\nset taskarea=`cat $tdir/$task.tot`\necho \"task area is\" $taskarea\n\n\nset inp = *.hdr\necho \"input image is\" $inp\nset taskavg=`thpic -o $inp $tdir/$task.pic | toflt | total -if`\n\n\necho \"task average is\" $taskavg\nset taskavg=`ev \"179*$taskavg/$taskarea\"`\necho \"task average is now\" $taskavg\n\n\n#output the masked image\nthpic -o $inp $tdir/$task.pic > out.hdr\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2010-June/006990.html).</sup>", "id": "radiance-general_006990", "created_by": "Kyle_Konis"}