{"topic": "convert camera exposure to radiance", "category": "radiance-general", "attachments": [], "created_by_name": "jelle feringa", "created_at": "August 18, 2010 at 04:07AM", "body": "Hi,\n\n\nOn page 330 of RwR there is a nice .cal formula that let's you mimic a camera exposure to a .hdr file.\nI'd like to do the inverse, and use my camera as an approximate radiance / lux / candela measuring device.\nI realize this is pretty approximate, but that will do for now.\nActually, it could have some general usefulness; let's say you visited a beautiful building some time ago took some shots and would like to know the approx. lighting levels there.\nSuch a tool would be a nice aid.\n\n\nTo go all out on this would be to use the exif data from an image, rather than setting these options manually I suppose.\n(That would be pretty easy to do actually)\n\n\nHowever, it seems to me that E is returning an exposure setting ( for use with pfilt -e ? ) rather than a Radiance value ( candela, lux conversion could be handy ).\nHow could I retrieve the approximate radiance value?\n\n\nThanks in advance,\n\n\n-jelle\n\n\n\n\nfrom __future__ import division\nimport optparse, math, sys\n\n\nparser = optparse.OptionParser()\nparser.add_option('-e', '--exposure-time',  action=\"store\", type=float, help=\"exposure time\")\nparser.add_option('-s', '--iso',            action=\"store\", type=int, help=\"film speed (iso/asa)\")\nparser.add_option('-f', '--f-stop',         action=\"store\", type=float, help=\"camera f-stop\")\noptions, remainder = parser.parse_args()\n\n\nfor i in ['exposure_time', 'f_stop', 'iso']:\n    if getattr(options, i) is None:\n        print 'the option %s was not set, but is required' % (i)\n        sys.exit()\n\n\n# honestly stolen from Rendering with Radiance page 330\n# relationship between Radiance exposure and film exposure\n\n\nK = 179*(math.pi/200)\n# C allows you to ^ on floats and python does not?\nE = int( K * options.exposure_time * options.iso / options.f_stop )  ^ 2\nsys.stdout.write('E -> ' + str(E) + '\\n')\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2010-August/007194.html).</sup>", "id": "radiance-general_007194", "created_by": "jelle_feringa"}