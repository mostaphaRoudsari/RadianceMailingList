{"topic": "Compiling Radiance 4.0 HEAD on Windows", "category": "radiance-dev", "attachments": [], "created_by_name": "Guy Vaessen", "created_at": "October 03, 2010 at 11:28AM", "body": "Today I succeeded in compiling Radiance 4.0 HEAD snapshot on Windows.\nI had to make to following modifications to make it work:\n\n\n*Gendaylit*\nTo make Gendaylit compile I had to add the following line in:\nray\\src\\gen\\SConscript under the section PROGS = (\n*('gendaylit',   Split('gendaylit.c sun.c',), ['rtlamps']),\n\n\n*I changed the following line in: ray\\src\\common\\SConscript*\n*RTLAMPS = Split('''fropen.c rexpr.c lamps.c''')*+ [getlibpath]*\n\n\n*Dctimestep*\nTo make dctimestep compile I had to add the following line to:\nray\\src\\common\\SConscript under the section # build libraries*:\nrtall = env.StaticLibrary(target=radlib('rtall'), source=ALL)**\n*\nI changed in ray\\src\\util\\SConscript\n('dctimestep', ['dctimestep.c'],\n    *['rtall'])*\n\n\n(I think that including all library functions for dctimestep probably is way\nto much, but I don't know the minimal set to include. This way dctimestep\ncompiles fine.)\n\n\nAnother problem I ran into:\n\n\nWhen compiling tmapluv.c the compiler complained about a variable\ndeclaration that was already declared elsewhere.\ntmapluv.c includes tiffio.h, which inturn (on Windows) includes windows.h,\nwhich includes windef.h\nIn windef.h the the following declaration is made: typedef unsigned char\nBYTE\nThis declaration gives problems with tmapluv.c where BYTE is also declared.\n\n\nAs a workaround I commented typedef unsigned char BYTE out in windef.h.\nAfter that the compiler compiles tmapluv.c\nAfter that the compiles continues, but very soon fails again I then removed\nthe comments from windef.h and the compiler finally finisches building\nRadiance.\n\n\nQuestion: is it possible to change the declaration of BYTE in tmapluv.c or\ntell the compiler to not include windef.h without producing errors? (I am\nnot a programmer, so I didn't dare mess with it myself)\n\n\nFor compilation I used:\nRadiance 4.0 + latest snapshot of the HEAD archive\nMinGW with gcc 4.5.0\nPhyton 2.7 + scons 1.3.1\ncompiler optimalisations: -O3 -march=native (for a core2duo)\n\n\nI hope this is helpfull.\n\n\nBest Regards,\n\n\nGuy\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-dev/2010-October/001051.html).</sup>", "id": "radiance-dev_001051", "created_by": "Guy_Vaessen"}