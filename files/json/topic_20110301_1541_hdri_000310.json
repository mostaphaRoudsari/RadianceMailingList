{"topic": "HDRI Digest, Vol 39, Issue 1", "category": "hdri", "attachments": [], "created_by_name": "kyle konis", "created_at": "March 01, 2011 at 03:41PM", "body": "Thanks Greg,\n\n\nI have successfully cropped and pfilt'ed my hdr images down into 600 x\n600 pixel images with the appropriate VIEW description\n\n\nThe modified header is below:\n\n\n...................................................................................................\n\n\nVIEW= -vta -vh 180 -vv 180 -vp 0 0 0 -vd 1 0 0 -vu 0 0 1\n#?RADIANCE\nCAPDATE= 2011:03:01 15:29:53\nGMT= 2011:03:01 23:29:53\n<stdin>:\n\tCAMERA= Canon Canon PowerShot A570 IS version v.0\n\tVIEW= -vtv -vh 52.456387 -vv 40.558973\n\tCAPDATE= 2010:10:11 16:06:59\n\thdrgen created HDR image from 'IMG_1100.JPG' 'IMG_1099.JPG'\n'IMG_1098.JPG' 'IMG_1097.JPG' 'IMG_1096.JPG' 'IMG_1095.JPG'\n'IMG_1094.JPG' 'IMG_1093.JPG' 'IMG_1092.JPG' 'IMG_1091.JPG'\n\tpfilt -1 -x /2 -y /2\n\tra_xyze -r -o -u\n\tPRIMARIES= 0.6400 0.3300 0.2900 0.6000 0.1500 0.0600 0.3333 0.3333\npcompos -x 600 - -75 0\nFORMAT=32-bit_rle_rgbe\n\n\n-Y 600 +X 600\n\n\n...................................................................................................\n\n\nThe images can be analyzed using the Radiance program 'findglare' with\nwhat look like reasonable results\n...................................................................................................\n\n\nfindglare -p output/corrected_201010111605.hdr\nVIEW= -vth -vp 0 0 0 -vd 1 0 0 -vu 0 0 1 -vh 180 -vv 180 -vo 0 -va 0 -vs 0 -vl 0\nFORMAT=ascii\n\n\nBEGIN glare source\n\t0.983158 0.158794 0.090470\t0.039193\t5077.962407\n\t0.786589 0.612193 0.080600\t0.014087\t5621.114152\n\t0.321372 -0.943305 0.083034\t0.009191\t3504.607733\n\t0.390327 0.906667 0.160000\t0.028193\t7046.145541\n\t0.755319 -0.622916 0.203640\t0.015073\t3462.277860\n\t0.753612 0.589769 0.290244\t0.032770\t5008.000344\n\t0.905625 -0.347670 0.242835\t0.026667\t3517.498954\n\t0.951442 -0.142012 0.273112\t0.024567\t3538.742064\n\t0.950063 0.162100 0.266651\t0.040324\t4302.979581\n\t0.910482 0.146667 0.386667\t0.019310\t3550.061832\nEND glare source\nBEGIN indirect illuminance\n\t0\t633.402385\nEND indirect illuminance\n\n\n...........................................................................................................\n\n\n\n\nHowever, evalglare is still giving me an error message related to the\nview not being \"-vta\"\n\n\n...........................................................................................................\n\n\n% evalglare output/corrected_201010111605.hdr\nwrong view type! must be vta!!! type = 118 0\n\n\n...........................................................................................................\n\n\nOne initial guess for why evalglare was not accepting the image was\nthat \"#?RADIANCE\" was not at the top of the header, but i've tried\necho'ing a few complete headers from HDR images that evalglare does\nwork on and get the same view error.\n\n\nFor anyone interested, i've placed the \"before\" and \"after\" images\ncreated from the below script online at the following location:\n\n\n\n\nhttps://gaia.lbl.gov/people/kskonis/share/TEMP/evalglare/\n\n\n\n\n...........................................................................................................\n\n\n#!/bin/csh -f\n\n\n# this works on all .hdr images you place in a folder called \"input\"\n\n\nforeach image (`ls input | grep .hdr`)\n\n\n\techo $image\n\n\n\t\techo \"VIEW= -vta -vh 180 -vv 180 -vp 0 0 0 -vd 1 0 0 -vu 0 0 1\" >\noutput/corrected_{$image}\n\t\tpfilt -1 -x /2 -y /2 input/$image | ra_xyze -r -o -u  | pcompos -x\n600 - -85 0 >> output/corrected_{$image}\n\n\n\tend\n...........................................................................................................\n\n\n\n\nbest,\n\n\nKyle\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/hdri/2011-March/000310.html).</sup>", "id": "hdri_000310", "created_by": "kyle_konis"}