{"topic": "RIF file generator class", "category": "radiance-general", "attachments": [], "created_by_name": "Randolph M. Fritz", "created_at": "April 16, 2011 at 01:45PM", "body": "I found this little Python classlet useful when I was running a heap of \nrenderings and thought someone else might, too.  Take it as a fragment, \nsuitable for modification.\n\n\n#!/usr/bin/python\n# -*- coding: utf-8 -*-\n\n\nfrom datetime import datetime\nimport sys\nimport subprocess\n\n\nRIFFMT =\"\"\"# {note}\nmaterials = {matfiles}\nscene = {scenefiles}\n\n\nZONE = {zone} {bounds}\nVARIABILITY = {var}\nQUALITY = {qual}\nINDIRECT = {ind}\nDETAIL = {detail}\nAMBFILE = {ambfile}\n\n\n{views}\n\"\"\"\n\n\nclass radrif:\n    def __init__(\n        self, matfiles, scenefiles,\n        note = None,\n        zone = \"E\", bounds = None,\n        var = \"H\", qual = \"M\", ind = 0, detail = \"M\",\n        ambfile = \"\",\n        views = \"\"):\n\n\n        if note is None:\n            note = datetime.today().ctime()\n        if zone[0].upper() not in \"EI\":\n            raise Exception(\"Zone must begin with E or I\", zone)\n        if bounds is None:\n           bounds = self.getbounds(scenefiles)\n\n\n        self.matfiles = matfiles\n        self.scenefiles = scenefiles\n        self.note = note\n        self.zone = zone\n        self.bounds = bounds\n        self.var = var\n        self.qual = qual\n        self.ind = ind\n        self.detail = detail\n        self.ambfile = ambfile\n        self.views = views\n\n\n\n\n    def __str__(self):\n        return RIFFMT.format(**self.__dict__)\n\n\n    def getbounds(self,scenefiles):\n        \"\"\"Get the bounding box of a model\"\"\"\n        cmd = ['getbbox', '-h'] + scenefiles.split()\n        PIPE = subprocess.PIPE\n        getbb = subprocess.Popen(cmd, stdout = PIPE, stderr = PIPE)\n        (out,err) = getbb.communicate()\n        if getbb.returncode != 0:\n            raise Exception(\n                'Can\\'t get bounds of {0}, error {1}: {2}'.format(\n                    self.scenefiles, getbb.returncode, err))\n        return out\n\n\ndef main():\n    print str(radrif(sys.argv[1],sys.argv[2]))\n\n\nif __name__ == \"__main__\":\n    main()\n\n\n\n\n\n\nRandolph M. Fritz\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2011-April/007767.html).</sup>", "id": "radiance-general_007767", "created_by": "Randolph_M._Fritz"}