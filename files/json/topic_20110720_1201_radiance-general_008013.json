{"topic": "rtcontrib - setting maximum number of open files on OSX 10.6.8", "category": "radiance-general", "attachments": [], "created_by_name": "Michael Martinez", "created_at": "July 20, 2011 at 12:01PM", "body": "My second question is for Radiance users running OSX. I'm having trouble setting the maximum number of open files to more than 1024. I'm running OSX 10.6.8, and there seems to be two ways to change the maximum number of open files - one using ulimit and one using launchctl. \n\n\nIn .bash_profile I have this line: \n\n\nulimit -S -n 4096\n\n\nIn etc/launchchd.conf I have this:\n\n\nlimit maxfiles 4096\nsysctl -w kern.maxfiles=4096\n\n\nand in etc/sysctl.conf I have:\n\n\nkern.maxfiles=4096 kern.maxfilesperproc=4096 \n\n\nIn a terminal line, when I enter launchctl limit  I see this:\n\n\n        cpu         unlimited      unlimited      \n        filesize    unlimited      unlimited      \n        data        unlimited      unlimited      \n        stack       8388608        67104768       \n        core        0              unlimited      \n        rss         unlimited      unlimited      \n        memlock     unlimited      unlimited      \n        maxproc     266            532            \n        maxfiles    4096           4096\n\n\nWhich is good. 4096 is more than the 2306 files I want rtcontrib to talk to at the same time. \n\n\nBut then, looking at ulimit -a in a terminal, I see this:\n\n\ncore file size          (blocks, -c) 0\ndata seg size           (kbytes, -d) unlimited\nfile size               (blocks, -f) unlimited\nmax locked memory       (kbytes, -l) unlimited\nmax memory size         (kbytes, -m) unlimited\nopen files                      (-n) 1024\npipe size            (512 bytes, -p) 1\nstack size              (kbytes, -s) 8192\ncpu time               (seconds, -t) unlimited\nmax user processes              (-u) 266\nvirtual memory          (kbytes, -v) unlimited\n\n\nWhich is bad - 1024 is less than the 2306 files I want rtcontrib to talk to at the same time. Its also surprising given that it should be set to 4096 by .bash_profile. \n\n\nThen when I try ulimit -n 4096, I get this: \n\n\nbash: ulimit: open files: cannot modify limit: Operation not permitted\n\n\nIf I use sudo, it takes the command, but when I look at ulimit -a again, the open files limit still says 1024, and despite what launchctl limit says, 1024 is the governing number of maximum open files. \n\n\nHas anyone out there had success setting this in OSX 10.6 or higher? Or has anyone updated to 10.7 (just released today) and had success? \n\n\nMany thanks,\nMichael\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2011-July/008013.html).</sup>", "id": "radiance-general_008013", "created_by": "Michael_Martinez"}