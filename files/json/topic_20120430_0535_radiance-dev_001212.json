{"topic": "mgf2inv VRML export", "category": "radiance-dev", "attachments": [], "created_by_name": "David Geisler-Moroder", "created_at": "April 30, 2012 at 05:35AM", "body": "Hi Greg, hi list,\n\n\nfrom time to time I am using mgf2inv with the \"-vrml\" option to export and\nview my models.\n\n\nThis time I wanted to do the conversion with rad2mgf and mgf2inv -vrml on\nWindows using the\nNREL binaries. However, the resulting files are corrupt due to bad number\nrepresentations and\nnormal descriptions.\n\n\nFor example the description of a face in the VRML-file created with the\nLinux binaries is:*\n\n\nDEF ceil_fac_001 Group {\n  Separator {\n    USE ceil_mat\n    Coordinate3 {\n      point [ -2.000000000e+00 +4.500000000e+00 +2.162119874e+00,\n              -1.500000000e+00 +4.500000000e+00 +3.000000000e+00,\n              -1.500000000e+00 +5.000000000e+00 +1.461123454e+00,\n              -2.000000000e+00 +5.000000000e+00 +6.232433278e-01 ]\n    }\n    IndexedFaceSet {\n      coordIndex [ 0, 1, 2, 3 ]\n    }\n  }\n}\n*\n\n\nIn the files created with the Windows version the same face is described as:\n*\nDEF ceil_fac_001 Group {\n  Separator {\n    USE ceil_mat\n    Coordinate3 {\n      point [ -2.000000000e+000 +4.500000000e+000 +2.162119874e+,\n              -1.500000000e+000 +4.500000000e+000 +3.000000000e+,\n              -1.500000000e+000 +5.000000000e+000 +1.461123454e+,\n              -2.000000000e+000 +5.000000000e+000 +6.232433278e- ]\n    }\n    Normal {\n      vector [ 00\n+0.000 +0.000 +0.0-1.500000000e+000 +4.500000000e+000 +3.000000000e+,\n               00\n+0.000 +0.000 +0.0-1.500000000e+000 +5.000000000e+000 +1.461123454e+,\n               00\n+0.000 +0.000 +0.0-2.000000000e+000 +5.000000000e+000 +6.232433278e-,\n               01\n+0.000 +0.000 +0.000 ]\n    }\n    IndexedFaceSet {\n      coordIndex [ 0, 1, 2, 3 ]\n      normalIndex [ 0, 1, 2, 3 ]\n    }\n  }\n}\n\n\n\n\n*Obviously, two things are corrupt:\n- the z-coordinates are missing their exponents\n- the normal vector coordinates are messed up\n\n\nMoreover, for me it's unclear why normal vectors are written (needed ??) in\nthe Windows version, while\nthey are completely missing in the Linux version.\n\n\nI believe that all this has something to do with de definition of VERTFMT\nin src/cv/mgf2inv.c\n*#define VERTFMT        \"%+16.9e %+16.9e %+16.9e\\n%+6.3f %+6.3f %+6.3f\"*\n\n\nAny ideas how to solve that for both platforms??\n\n\nCheers,\nDavid\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-dev/2012-April/001212.html).</sup>", "id": "radiance-dev_001212", "created_by": "David_Geisler-Moroder"}