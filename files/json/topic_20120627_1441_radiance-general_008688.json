{"topic": "calculation of one reflection (rtrace)", "category": "radiance-general", "attachments": [], "created_by_name": "Robert Franke", "created_at": "June 27, 2012 at 02:41PM", "body": "Hi,\n\n\nI try to understand how RADIANCE calculate the radiance values, but the \nspecular value for one reflection isn't clear.\nI understand, that  the diffuse value is independent of view. On point \nP_r=(0 1 1)  I got from rtrace for the red channel 0.22361, I calculated:\n\n\nR_r_light=100\nsphere_radius=0.5\ndistance=2.2360\nrho_surf1=0.1\ncos(63,43) = light incoming angle\n\n\nR_r(0,1,1) = R_r_light * (sphere_radius)\u00b2 / (distance)\u00b2 * cos (63,43) * \nrho_surf1 = 0.223606797.\n\n\nOk, this value is fine, but what will happen if I look from (0 -1 1) to \n(0 1 -1) at point (0, 0, 0), I thought  this, but it didn't work:\n\n\ndistance=3\nrho_mirr=0.3\ndiff=0.9\nspec=0.1\ncos(45) = reflected light - observer angle\nP_r=0.22361\n\n\nR_r(0,0,0) = R_r_light * (sphere_radius)\u00b2 / (distance)\u00b2 * rho_mirr * \ndiff + spec * P_r * cos(45) = 0.765811388\n\n\nrtrace = 0.76517\n\n\nCan somebody explain how the specular component is calculated on my test \nscene? I do not get it...\n\n\nHere is my test scene:\n\n\n######materials.rad######\nvoid plastic mirr\n0\n0\n5 .3 .2 .1 0.1 0\n\n\nvoid plastic surf1\n0\n0\n5 .1 .1 .1 0 0\n\n\nvoid light lighty20\n0\n0\n3 100 150 200\n\n\n######test.rad######\nmirr polygon plate1\n0\n0\n12\n-1 -1 0\n  1 -1 0\n  1  1 0\n-1  1 0\n\n\nsurf1 polygon plate2\n0\n0\n12\n-1  1 0\n-1  1 3\n  1  1 3\n  1  1 0\n\n\nlighty20 sphere light_s\n0\n0\n4 0 0 3 0.5\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2012-June/008688.html).</sup>", "id": "radiance-general_008688", "created_by": "Robert_Franke"}