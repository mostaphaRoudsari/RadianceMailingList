{"topic": "Automated head install script", "category": "radiance-general", "attachments": [], "created_by_name": "Andy McNeil", "created_at": "February 05, 2013 at 10:52AM", "body": "Hi Everyone,\n\n\nSince I download and compile the HEAD a lot, I wrote a script that\nautomates it for me.  It might not work for everyone as is, but it should\nbe easy to modify the script to do what you want.\n\n\nThe script copied below does the following:\n - creates a directory in /Applications/Radiance/  with yesterday's date.\n - downloads the head and support files from radiance-online using wget\n - creates a bin directory in ray/ for the binaries\n - compiles the head using expect to answer prompts\n - copies cal files to the library directory\n - updates a symlink (current) to point to the new ray directory\n\n\nI keep the following in my .bash_profile:\nPATH=$PATH:/Applications/Radiance/current/bin\nRAYPATH=/Applications/Radiance/current/lib\nMANPATH=$MANPATH:/Applications/Radiance/current/doc/man\nexport PATH RAYPATH MANPATH\n\n\nWhile this is a not the standard installation location for binaries and\nlibraries, I like it because I can keep previous HEAD releases and go back\nto them if necessary and I can update the symlink to point to new binaries\nwithout having to restart the shell.\n\n\nI keep this script in a directory on my PATH so i just need to issue the\ncommand \"sudo installhead.bsh\" and get a new working head!\n\n\nBest,\nAndy\n\n\n######### installhead.bsh #############################\n\n\n#!/bin/bash\n\n\ndir=`date -v -1d \"+/Applications/Radiance/%Y-%m-%d_HEAD\"`\n\n\nmkdir $dir\ncd $dir\n\n\nwget http://www.radiance-online.org/software/snapshots/radiance-HEAD.tgz\nwget http://www.radiance-online.org/software/non-cvs/rad4R0supp.tar.gz\n\n\nrm -r ray\n\n\ntar -xf radiance-HEAD.tgz\ntar -xf rad4R0supp.tar.gz\n\n\ncd ray\nmkdir bin\n\n\n\n\nexpect <<- FIN\nset timeout -1\n spawn ./makeall install\nexpect \"What is your preferred editor*\"\n send \"\\n\"\nexpect \"Where do you want the executable*\"\nsend \"${dir}/ray/bin\\n\"\n expect \"The Radiance Software License*\"\nsend \" \"\nexpect \"*Do you understand and accept the terms of this agreement*\"\n send \"y\\n\"\nexpect \"*Please select your system*\"\nsend \"3\\n\"\n expect \"*Where do you want the library files*\"\nsend \"${dir}/ray/lib\\n\"\n expect \"*Do you want to change it?*\"\nsend \"n\\n\"\nexpect \"*export PATH*\"\n send \"\\n\"\nFIN\n\n\ncp src/cal/cal/* lib/.\ncd ../../\nrm current\nln -s ${dir}/ray/ current\n\n\n######## end of installhead.bsh ###########################\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2013-February/009266.html).</sup>", "id": "radiance-general_009266", "created_by": "Andy_McNeil"}