{"topic": "gendaylit 2.3", "category": "radiance-dev", "attachments": [], "created_by_name": "Axel Jacobs", "created_at": "August 26, 2013 at 03:09PM", "body": "Dear all,\n\n\nit appears you've had three very interesting and productive days at the \nWS. I am only just catching up with the presentations and videos. \nAmongst the many cool topics, the new v2.3 of gendaylit caught my attention.\n\n\nAs some of you might recall, I ran the old gendaylit (don't remember \nwhat version) against all EPW files that were then available on the E+ \nweb site when I worked on my rtcontrib tutorial.\nhttp://www.jaloxa.eu/resources/radiance/documentation/docs/gendaylit_epw_errors.html\nIf there had been an executive summary, it would have read \"it's a right \nold mess\". There are big problems with the quality of the weather data.\n\n\nI'm re-running this against v2.3 and the latest weather files. It's too \nsoon to present any detailed analysis yet (it's taking for ages on my \ncomputer), but please find below some observations:\n\n\na) Below is from 2_asia_wmo_region_2/CHN_Anhui.Tunxi.585310_CSWD.epw\n\n\nClassic (no -i):\n# gendaylit 1 2 17.5 -a 29.72 -o -118.28 -m -120.0 -W 0 6\n\n\nvoid brightfunc skyfunc\n2 skybright perezlum.cal\n0\n10 0.00 0.00  0.000 0.000 0.000 0.000 0.000  -0.000000 -1.000000 0.000000\n\n\nThis is a dark sky without sun. Return code of 1, but nothing on stderr.\n\n\nNew and improved (-i 60):\n# gendaylit 1 2 17.5 -a 29.72 -o -118.28 -m -120.0 -i 60 -W 0 6\n\n\nvoid brightfunc skyfunc\n2 skybright perezlum.cal\n0\n10 0.00 0.00  0.000 0.000 0.000 0.000 0.000  -0.000000 -1.000000 0.000000\n\n\nStill a dark sky. Return code of 1, but nothing on stderr.\nMaybe the sunset is not within +/- 30 minutes of 17:30?\n\n\n# gendaylit 1 2 17.2 -a 29.72 -o -118.28 -m -120.0 -W 0 6\n\n\nvoid light solar\n0\n0\n3 0.0 0.0 0.0\n\n\nsolar source sun\n0\n0\n4 -0.890913 -0.454035 0.011245 0.533000\n\n\nvoid brightfunc skyfunc\n2 skybright perezlum.cal\n0\n10 7.891e-01 2.051e-01 0.636339 -0.630451 0.478351 -0.421145 -0.036172 \n-0.890913 -0.454035 0.011245\n\n\nBut it is! Sometime between 17.2 and 17.3 hrs\n\n\nb) The usage info (eg when run without options and params) does not show \n-i and -s.\n\n\nc) The old gendaylit used to produce a header just like gensky, with sun \nalti, azi, groundamb etc in it. This was extremely helpful.\n\n\nd) The new -i option now creates a warning message, and an exit status \nof 1 if the new algorithm kicks in. Is this really a good idea? After \nall, by setting -i, we have actually asked gendaylit to do exactly this. \nWould it not be better to have a few extra header lines with corrected \ntime and solar position (possibly even sunrise/sunset for that day)?\n\n\ne) Greg, could you elaborate why we have two gendaylit now? You \nmentioned this in your talk. The version in HEAD seems to be the \nFraunhofer one. Where is the one based on Ian Ashdown's implementation? \nI'm a little confused...\n\n\nf) here is quite a common error with weather files - Positive sun alti, \nbut no irradiance:\n# gendaylit 9 6 7.5 -a -39.01 -o -174.18 -m -180.0 -i 60 -W 0 0\n\n\nvoid brightfunc skyfunc\n2 skybright perezlum.cal\n0\n10 0.00 0.00  0.000 0.000 0.000 0.000 0.000  0.960801 0.245763 0.128307\n\n\nReturn code is 1, stderr is\n\"Solar position corrected at 9 6 7.500\nERROR: Model parameters out of range, skyclearness = -nan\"\n\n\ngensky tells me the alti is 9.0 degrees. This is in New Zealand.\n\n\nThis is not a gendaylit bug, but rather a problem with the Perez model, \nwhich is only calibrated against Berkeley, CA and Watford, UK data. Is \nthere something that can be done about it? There are quite a few such \nproblems in many of the weather files.\n\n\nThanks for your thoughts. I'll report back when I have more results.\n\n\nCheers\n\n\nAxel\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-dev/2013-August/001371.html).</sup>", "id": "radiance-dev_001371", "created_by": "Axel_Jacobs"}