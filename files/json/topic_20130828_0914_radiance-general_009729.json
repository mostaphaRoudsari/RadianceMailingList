{"topic": "Spectral rendering demo: \"picture too dark or too bright\"", "category": "radiance-general", "attachments": [], "created_by_name": "Michael Bannert", "created_at": "August 28, 2013 at 09:14AM", "body": "Dear Radiance community,\n\n\nI would like to do spectral rendering with Radiance using the N-step algorithm (Ruppertsberg & Bloj, 2008, http://www.ncbi.nlm.nih.gov/pubmed/18411553 ). The idea is to model surface reflectance in terms of average radiance per waveband rather than RGB values.\n\n\nI tried to run their demo code and I think I'm really close to reproducing their results :) However, when I run their bash script, I cannot get rid of the following error:\n\n\n\"pfilt: picture too dark or too bright\npvalue: missing resolution\"\n\n\nI suspect that my definition of the light source is not processed properly in the scene description. (On the other hand it does NOT tell me that \"no light source\" has been found.) Anyway, there is nothing to see in the resulting image.\n\n\nI created my light source using ies2rad, as described in that paper. It didn't work right away so I had to make a few adjustments. For example, no lamp type was specified in the original code. So I called ies2rad with the \"-t default\" option.\n\n\nHere is the file that was created by ies2rad :\n\n\n# ies2rad -p stimuli/radiance/hyperspectral/Ruppertsberg-BRM-2008/ -c 0.000387 0.000422 0.000435 -o mylight -t default\n# Dimensions in meters\n#<# light.ies\n#<# <# lamps> <lumens per lamp> <candela multiplier>\n#<# <# vertical angles> <# horizontal angles>\n#<# <photometric type> <units>\n#<# <width> <length> <height>\n#<# <ballast factor> <length> <height>\n# 75 watt luminaire, lamp*ballast factor = 1\n\n\nvoid brightdata mylight_dist\n4 flatcorr stimuli/radiance/hyperspectral/Ruppertsberg-BRM-2008/mylight.dat source.cal src_theta \n0\n1 121615\n\n\nmylight_dist light mylight_light\n0\n0\n3 0.000387 0.000422 0.000435\n\n\nmylight_light ring mylight.d\n0\n0\n8\n\t0 0 -0.00025\n\t0 0 -1\n\t0 0.006096\n\n\nAny help would be greatly appreciated!\n\n\nBest regards,\nMichael\n\n\n\n\n\n\n\n\nMichael Bannert, Dipl.-Psych.\nVision & Cognition Lab, Centre for Integrative Neuroscience, Univ. of T\u00fcbingen & BCCN T\u00fcbingen\nOtfried-M\u00fcller-Str. 25, 72076 T\u00fcbingen, Germany\nPhone: +49 - (0)7071 / 29 - 89031\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2013-August/009729.html).</sup>", "id": "radiance-general_009729", "created_by": "Michael_Bannert"}