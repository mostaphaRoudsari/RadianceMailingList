{"topic": "can the sun material identifier \"solar\" be specified in rcontrib?", "category": "radiance-general", "attachments": [], "created_by_name": "Ji Zhang", "created_at": "December 30, 2013 at 04:50AM", "body": "Dear list,\n\n\nFollowing Axel Jacobs' Rtcontrib tutorial (up to pp.19 so far), I used a\nsky created by gendaylit rather than an overcast/uniform sky used in the\ntutorial.\n\n\nThe hdr image i got by combining the 145 sky patch hdr images shows a dark\nspot around the sun position. I assume this might be because only the \"-m\nsky_glow\" argument is specified in rcontrib, thus the image generated\ndoesn't include the contribution from the sun spot.\n\n\nHowever, when I include an additional \"-m solar\" argument (the material\nidentifier for the sun geometry) to the rcontrib command I only got strange\nsky patch images.\n\n\nMay I ask why this approach is not correct? and how to visualize the\ncontribution from the sun spot?\n\n\nThanks!\nJi\n\n\n\n\n\n\nThe shell script (without sun material identifier):\n##############################\n# create a sky description using gendaylit\n\n\ngendaylit  1 1 9 -a 1.37 -o -103.98 -m -120 -W 70.0 130.0 -O 1 >\n./skies/sky_gendaylit.rad\n\n\n# copy all lines in the original sky.rad and past in the newly generated\nsky_gendaylit.rad above\n\n\noconv ./materials/testroom.mat ./objects/testroom.rad\n./skies/sky_gendaylit.rad > testroom_gendaylit.oct\n\n\n# viz the contribution from each of the 145 patches in the gendaylit sky\nfrom the fisheye viewpoint\n\n\nDIMS=600\n\n\nvw=\"-x $DIMS -y $DIMS -vf ./views/sky.vf\"\n\n\nvwrays -ff $vw | rcontrib -bn 146 @./rtc.opt -ffc \\\n`vwrays -d $vw` -V+ -f tregenza.cal -b tbin \\\n-o ./images/patches_gendaylit_skyview/p%03d.hdr \\\n-m sky_glow ./testroom_gendaylit.oct\n\n\n# use Andy McNeil's approach to merge the 145 hdr images\n\n\npcomb $(for i in {001..145}; do \\\necho \"./images/patches_gendaylit_skyview/p$(printf \"%03d\" $i).hdr\"; done) \\\n> ./images/sky_pcomb_gendaylit_skyview.hdr\n\n\nfalsecolor -ip ./images/sky_pcomb_gendaylit_skyview.hdr -s 10000 -l cd/m2\n-n 10 \\\n> ./images/sky_pcomb_gendaylit_skyview_fc.hdr\n##############################\n\n\n\n\n\n\nThe shell script of rcontrib with the sun material identifier included:\n##############################\nvwrays -ff $vw | rcontrib -bn 146 @./rtc.opt -ffc \\\n`vwrays -d $vw` -V+ -f tregenza.cal -b tbin \\\n-o ./images/patches_gendaylit_backview_withSun/p%03d.hdr \\\n-m sky_glow -m solar ./testroom_gendaylit.oct\n##############################\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2013-December/009920.html).</sup>", "id": "radiance-general_009920", "created_by": "Ji_Zhang"}