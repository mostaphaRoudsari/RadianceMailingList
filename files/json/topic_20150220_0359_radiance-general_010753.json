{"topic": "Three-phase method troubles: NROWS missing after rfluxmtx", "category": "radiance-general", "attachments": [], "created_by_name": "Reinier Zeldenrust", "created_at": "February 20, 2015 at 03:59AM", "body": "Hi all, \n\n\nI am following the latest approach to the three-phase method as described in Andy McNeil's 2014 Radiance Workshop Presentation, but when I generate view matrices my output is botched. \nWith this command (I realise this is low accuracy, but for the moment I'm mainly testing workflow) :\n\trfluxmtx -ab 4 -ad 5000 < ChEast.pts - windows_pts/window_00.rad material.rad ChEast.rad > viewpts_00.mtx\nthe header in the viewmatrix is as follows:\n\t#?RADIANCE\n\toconv -f material.rad ChEast.rad windows_pts/window_01.rad\n\trcontrib -fo+ -ab 4 -ad 5000 -faa -c 1 -f klems_full.cal -bn Nkbins -b kbin(0.525501,0.0136168,-0.850684,0,0,1) -m M-nor\n\tSOFTWARE= RADIANCE 4.3a lastmod  by nrel_nt\n\tgugliel on rgugliel-W7-VM\n\tCAPDATE= 2015:02:19 12:21:14\n\tGMT= 2015:02:19 12:21:14\n\tNCOMP=3\n\tNCOLS=145\n\tFORMAT=ascii\n\n\nWhen I try to do any matrix multiplication to get the three-phase result, I get problems with RMTXOP or dctimestep, which complain they can't load the matrix. If I add the line NROWS=81 (number of sensor points) manually in the header, I do get results. But I'm trying to run the simulation for a lot of windows so adding this line each time manually or with a script is a bit painful. Am I doing something wrong or is this a bug?\n\n\nAdditionally, when I try to run dctimestep in annual mode, using the following command:\n\tdctimestep -n 8760 viewpts_00.mtx grate.xml daylight_00.mtx annual.smx > test.dat\nI get:\n\t'fatal - unexpected EOF reading annual.smx' \neven though my annual.smx has 146 rows (for all 146 Tregenza daylight patches) and 8760 columns. \n\n\nAny idea what is going wrong here?\n\n\nMany thanks,\nReinier\n\n\n\n\n\n\n\n\nReinier Zeldenrust\nEnvironmental Designer\nAtelier Ten\nEnvironmental Design Consultants + Building Services Engineers\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2015-February/010753.html).</sup>", "id": "radiance-general_010753", "created_by": "Reinier_Zeldenrust"}