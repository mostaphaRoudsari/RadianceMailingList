{"topic": "Confirm Procedure to Convert Spectral (SPD) Data to Radiance rgb color triplet", "category": "radiance-general", "attachments": [], "created_by_name": "Andrei Kolomenski", "created_at": "June 09, 2015 at 12:07PM", "body": "Dear Radiance Users,\nI have a fundamental question about how to convert spectrum power distribution (SPD) of a material to its Radiance material counterpart. For now, I'm strictly concerned with the rgb color triplet passed to a material primitive. Below I summarized four steps that I believe accomplish this task. I would appreciate it people could confirm or provide comments on discrepancies in the procedure. Your input is much appreciated!\nI tried the procedure with an experimentally measured SPD of a tan blanket, however my rpict rendering is showing a slightly lighter color than expected. I'm using ambient lighting (-ab 1 1 1) to view a rectangular surface modified by the material primitive obtained from this method.\nvoid plastic material\n0\n0\n5 r_calc g_calc b_calc 0 0\n\n\n#1.) Obtain the SPD data from the spectrophotometer and compute the associated Tristimulus values XYZ. I'm using a CIE 2\u00b0 Standard Observer for color matching functions and a D65 illuminant, as this is the illuminant used by the spectrophotometer.\n[cid:image001.png at 01D0A2BD.9C2A4940]\n[cid:image002.png at 01D0A2BD.9C2A4940]\n[cid:image003.png at 01D0A2BD.9C2A4940]\n[cid:image004.png at 01D0A2BD.9C2A4940]\n#2.) Perform chromatic adaptation on the computed Trisitimulus values, to account for different white point definitions between source (sensor) & destination (Radiance) illuminants. For this transformation, the Tristimulus of the white point of both the source (S) & the destination (D) illuminants must be defined. Also, the Sharp color space is chosen for the chromatic adaptation transformation (Ref 1.), defined by the matrix, [cid:image005.png at 01D0A2BD.9C2A4940] .\n[cid:image006.png at 01D0A2BD.9C2A4940]\n[cid:image007.png at 01D0A2BD.9C2A4940]\n[cid:image008.png at 01D0A2BD.9C2A4940]\n[cid:image009.png at 01D0A2BD.9C2A4940]\n\n\n[cid:image010.png at 01D0A2BD.9C2A4940]\n[cid:image011.png at 01D0A2BD.9C2A4940]\n#3.) Convert white point balanced Tristimulus values to Radiance sRGB color space. For this transformation, the chromaticity of the red, green and blue primaries and the white point must be defined for the sRGB color space used by Radiance. Radiance uses equal-energy white as its white point with the following chromaticity coordinates.\n[cid:image012.png at 01D0A2BD.9C2A4940]\n            Define the primary chromaticity coordinates for sRGB color space, obtained from 'xyz_rgb.cal' file within the Radiance source code.\n[cid:image013.png at 01D0A2BD.9C2A4940]\n[cid:image014.png at 01D0A2BD.9C2A4940]\n[cid:image015.png at 01D0A2BD.9C2A4940]\n[cid:image016.png at 01D0A2BD.9C2A4940]\n[cid:image017.png at 01D0A2BD.9C2A4940]\n[cid:image018.png at 01D0A2BD.9C2A4940]\n[cid:image019.png at 01D0A2BD.9C2A4940]\n[cid:image020.png at 01D0A2BD.9C2A4940]\n\n\n#4.) Scale each channel by the measured reflectance of the material and by the luminous efficacy weighted sum of the input RGB triplet. An equal weight can be applied or the chromaticity coordinates of the green (photopic) primary can be used as RGB channel weights. The obtained rgb values are to be used as input to a material primitive definition.\n[cid:image021.png at 01D0A2BD.9C2A4940]\n[cid:image022.png at 01D0A2BD.9C2A4940]\n[cid:image023.png at 01D0A2BD.9C2A4940]\n[cid:image024.png at 01D0A2BD.9C2A4940]\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2015-June/010997.html).</sup>", "id": "radiance-general_010997", "created_by": "Andrei_Kolomenski"}