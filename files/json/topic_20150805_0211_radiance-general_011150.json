{"topic": "diffuse transmission of BRTDfunc", "category": "radiance-general", "attachments": [], "created_by_name": "Jan Wienold", "created_at": "August 05, 2015 at 02:11AM", "body": "Hi all,\n\n\nI'm a bit stuck by the use of the \"old-fashioned\" BRTDfunc. Maybe it is \na silly question, but I couldn't find anything about this in the \ndiscussions so far.\n\n\nWhat I want to do is to modify the diffuse transmitted light by a \nfunction and using the material BRTDfunc. For the specular transmission \nand reflection this works pretty well, a function can be defined in a \nuser specified function in a cal file.\nBut if I try to do this for the diffuse component, it immediately fails. \nIn addition (or maybe the same issue) the is a problem in parsing. If I \nspecify for \"rbrtd gbrtd bbrtd\" and \"rtdif gtdif btdif \" 0.1 0.1 0.1, \nthe function works properly. But using .1 instead 0.1 it fails as well.\nIt always says \"undefined function\" in both cases.\nAny idea?\nif it is possible to change the diffuse behavior, how would it be \npossible? And how can I access the angle to the light source? Rdot is \ngiving me only the angle of incidence from the incoming ray to the \nsurface normal, but not between light source and surface normal.\nbelow a simple example.\nthanks a lot\n\n\nJan\n\n\n\n\nexample of BRTDfunc working properly:\n\n\nvoid BRTDfunc testmat\n10 0 0 0\ndirtrans dirtrans dirtrans\n0.1 0.1 0.1\ntestfunc.cal\n0\n9 0.2 0.2 0.2\n0.2 0.2 0.2\n0.1 0.1 0.1\n\n\nand testfunc.cal is (for all cases)\n\n\n{test functionfile}\ndirtrans=0.25*Rdot*Rdot;\ndiftrans=0.3*sqrt(Rdot*Rdot);\n\n\nexample of BRTDfunc NOT working:\n\n\nvoid BRTDfunc testmat\n10 0 0 0\ndirtrans dirtrans dirtrans\n.1 .1 .1\ntestfunc.cal\n0\n9 0.2 0.2 0.2\n0.2 0.2 0.2\n.1 .1 .1\n\n\nor also not working:\n\n\nvoid BRTDfunc testmat\n10 0 0 0\ndirtrans dirtrans dirtrans\ndiftrans diftrans diftrans\ntestfunc.cal\n0\n9 0.2 0.2 0.2\n0.2 0.2 0.2\ndiftrans diftrans diftrans\n\n\n\n\n\n\n\n\n\n\n\n\nDr.-Ing.  Jan Wienold\nEcole Polytechnique F\u00e9d\u00e9rale de Lausanne (EPFL)\nEPFL ENAC IA LIPID\n\n\nhttp://people.epfl.ch/jan.wienold\nLE 1 111 (Office)\nPhone    +41 21 69 30849\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2015-August/011150.html).</sup>", "id": "radiance-general_011150", "created_by": "Jan_Wienold"}