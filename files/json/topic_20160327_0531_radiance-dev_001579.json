{"topic": "Pipe problems on Windows - BUG in Universal CRT", "category": "radiance-dev", "attachments": [], "created_by_name": "Georg Mischler", "created_at": "March 27, 2016 at 05:31AM", "body": "I've sent feedback to Microsoft, we'll see what happens.\n\n\nFor anyone who wants to check the weirdness on their own:\n\n\n\n\nsender.c\n\n\n#include <stdio.h>\n#define MAX_TESTLINES 20000\n\n\nint main(void)\n{\n   int i;\n\n\n   for (i = 0; i < MAX_TESTLINES; i++) {\n     fprintf_s(stdout, \"x\\n\");\n   }\n   return 0;\n}\n\n\n\n\n\n\nreceiver.c\n\n\n#include <stdio.h>\n#define MAX_BUF 10\n\n\nint main(void)\n{\n   int i = 0;\n   char inbuf[MAX_BUF];\n\n\n   while (fgets((char*)&inbuf, MAX_BUF, stdin)) {\n     if (inbuf[1] != '\\n') {\n       fprintf_s(stdout, \"Line ending omitted from stream on line %d: \n\\\"%s\\\"\\n\", i++, &inbuf);\n     }\n     i++;\n   }\n   return 0;\n}\n\n\n\n\n\n\nInvoke the two programs in a console as:\n\n\n$ sender | receiver\n\n\n\n\nWith bug present, the output will be something similar to:\n\n\nLine ending omitted from stream on line 2730: \"xx\n\"\nLine ending omitted from stream on line 5461: \"xx\n\"\nLine ending omitted from stream on line 8192: \"xx\n\"\nLine ending omitted from stream on line 10923: \"xx\n\"\nLine ending omitted from stream on line 13654: \"xx\n\"\nLine ending omitted from stream on line 16385: \"xx\n\"\n\n\n\n\nHave fun!\n\n\n-schorsch\n\n\n\n\nAm 2016-03-27 10:38, schrieb Georg Mischler:\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-dev/2016-March/001579.html).</sup>", "id": "radiance-dev_001579", "created_by": "Georg_Mischler"}