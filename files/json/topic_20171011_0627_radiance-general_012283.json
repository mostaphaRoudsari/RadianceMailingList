{"topic": "Render tregenza sky patches by rcontrib and pcomb", "category": "radiance-general", "attachments": [], "created_by_name": "Wang Clarence", "created_at": "October 11, 2017 at 06:27AM", "body": "Dear all,\n\n\nI've been trying to render the Tregenza sky patches by using rcontrib. Each patch was rendered successfully, but when I use \"pcomb\" which contains \"tregsamp.bash\" by Axel Jacobs to combine them, the \"combined.hdr\" was a black picture.\n\n\n#vwrays -ff $vw |rcontrib @rtc1.opt -ffc $(vwrays -d $vw) -V+ -f tregenza.cal -b tbin -bn Ntbins -o first_tre_p%d.hdr -m skyglow test_sky_sun.oct\n\n\n#pcomb -h $(bash apply_tregsamp_1.bash) > combine_1.hdr\n\n\n#the original bash script below by Axel Jacobs was changed in order to be consistent with my code.\n\n\n\n\n# Path to the patch images\n\n\nimgpath=\"image_fisheye/patches_tre/first_tre\"\n\n\n\n\n\n\nfor i in $imgpath_*.hdr; do\n        # Scan patch number from file name\n          patch=$(ls $i \\\n                          |rcalc -i \"$imgpath_p\\${pnum}.hdr\" \\\n                           -e \"\\$1=pnum\")\n        # Get multiplier from dat file, based on record number\n          multi=$(cat tmp_skydist.dat \\\n                          |rcalc -e \"diff=$patch-recno+1;absdiff=if(diff,diff,-1*diff);\n\n\n   \\$1=if(absdiff,0,\\$1);\" |total)\n          echo \" -s $multi $i\"\n\n\ndone\n\n\n\n\n\n\n#EOF\n\n\nThanks,\n\n\nClarence\n___\n<sup>Automatically generated content from [radiance mailing-list](https://radiance-online.org/pipermail/radiance-general/2017-October/012283.html).</sup>", "id": "radiance-general_012283", "created_by": "Wang_Clarence"}