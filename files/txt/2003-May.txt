From radiance-general@radiance-online.org  Thu May  1 02:02:38 2003
From: radiance-general@radiance-online.org (John An)
Date: Wed, 30 Apr 2003 18:02:38 -0700
Subject: [Radiance-general] aiming illums, orthographic projection, and hiding surfaces
Message-ID: <6461058.1051750958626.JavaMail.whollycow@mac.com>

Originally written by Rob Guglielmetti:
<I>Sorry to say, but that book is not out of stock, it's out of print 
(well, OK it's out of stock too, but permanently).  The authors have 
obtained the copyright from Morgan Kaufman, and are looking for a new 
publisher, but so far no joy.  My co-worker tried ordering direct from 
MK and they told him the same "out of stock" thing, but no new copies 
are coming out of MK. A couple of enterprising souls were selling copies 
on Amazon.com for something like $300USD!  =8-(  Hopefully, Greg will 
find a new publisher or some other means of distrubition; it's such a 
valuable piece of the Radiance toolkit.</I>


I had run across some threads discussing trying to find a new publisher, but thought that the situation had been resolved, since Elsevier Science happily took my order.  When I called to inquire about my order, they confidenctly said that they would have the book in stock on May 1st.  Is there any way that I could temporarily get my hands on the book in the meantime?  Is there anyone in the Boston area that would be willing to lend me their book?  After years of hearing how great Radiance was, I finally got the courage to jump in and to learn to use this program.  The lack of availability of Rendering with Radiance has put a HUGE damper on my plans (though I am still determined to use it for my dissertation).


Originally written by Rob Guglielmetti:
<I>That happens when you have an irregularly shaped polygon that is defined 
as an illum.  "L-shaped" polys and triangles are the kinds of shapes I'm 
talking about here.  Break it up into more rectillinear forms and you 
should see that problem go away.</I>


I see.  Thankfully, I only have 4 or 5 windows in my scene.  I dxfed my model from a wondering modeling program called Sketchup (the most intuitive modeling program I've come across), and had been meaning to optimize the .rad file, but didn't realize that the excessive polygons would impact the calculations.  Does this mean that I should optimize (de-triangulate the rectangles) for all surfaces if I want accurate calculations?

Thanks for your response.

Please, if anyone can help me out with getting my hands on Rendering with Radiance, I would truly appreciate it.



John An

From radiance-general@radiance-online.org  Thu May  1 02:50:28 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Wed, 30 Apr 2003 21:50:28 -0400
Subject: [Radiance-general] aiming illums, orthographic projection, and hiding surfaces
In-Reply-To: <6461058.1051750958626.JavaMail.whollycow@mac.com>
Message-ID: <491B7E5A-7B77-11D7-843E-000393824274@rumblestrip.org>

On Wednesday, April 30, 2003, at 09:02 PM, John An wrote:
> I had run across some threads discussing trying to find a new 
> publisher, but thought that the situation had been resolved, since 
> Elsevier Science happily took my order.  When I called to inquire 
> about my order, they confidenctly said that they would have the book 
> in stock on May 1st.  Is there any way that I could temporarily get my 
> hands on the book in the meantime?  Is there anyone in the Boston area 
> that would be willing to lend me their book?  After years of hearing 
> how great Radiance was, I finally got the courage to jump in and to 
> learn to use this program.  The lack of availability of Rendering with 
> Radiance has put a HUGE damper on my plans (though I am still 
> determined to use it for my dissertation).

Well, I guess we'll find out tomorrow then. =8-)  I don't recall any 
announcements from Greg about this situation getting resolved, but if 
it's true that's GREAT!  Do let us all know how you make out.  I'd 
still like to get another copy for the office.

Congrats on taking the plunge with Radiance.  It's a great program 
(that I am only beginning to understand), and the massive effort you 
put into learning it *will* be rewarded.  And this list is frequented 
by many of the gurus, and they are quite open and generous with their 
advice.  It's a great bunch of people on here.

> I see.  Thankfully, I only have 4 or 5 windows in my scene.  I dxfed 
> my model from a wondering modeling program called Sketchup (the most 
> intuitive modeling program I've come across), and had been meaning to 
> optimize the .rad file, but didn't realize that the excessive polygons 
> would impact the calculations.  Does this mean that I should optimize 
> (de-triangulate the rectangles) for all surfaces if I want accurate 
> calculations?

It's not the number of polys that's causing that aiming failure, it's 
the shape.  And it's only with illum sources.  So no, you don't need to 
de-triangulate all your surfaces for accurate calcs.  Just fix those 
illum polygons and that error will go away.  That said, long thin 
polygons are not a "good thing", and others on here could give you a 
better explanation of why, but it's not the end of world if you have 
some in there (I don't think).

I played with Sketchup a little bit, among other modelers, but I always 
crawl back to AutoCAD, for better or worse.  I guess once you get comfy 
with something, it's hard to leave it.  If Skecthup works for you, use 
it.  But I find AutoCAD to be a very precise tool, and Gerog Mischler's 
radout utility is a great .DWG > Radiance exporter.  It's a good combo!

> Thanks for your response.

Ha, it's my pleasure to be able to *answer* a question here, opposed to 
always being the "asker".  (Hopefully I did not steer you wrong, but if 
I did I will surely be corrected here...)  Good luck in your pursuits 
with Radiance!

Rob Guglielmetti
rpg@rumblestrip.org
www.rumblestrip.org


From radiance-general@radiance-online.org  Thu May  1 03:40:08 2003
From: radiance-general@radiance-online.org (Randolph Fritz)
Date: Wed, 30 Apr 2003 19:40:08 -0700
Subject: [Radiance-general] aiming illums, orthographic projection, and hiding surfaces
In-Reply-To: <6461058.1051750958626.JavaMail.whollycow@mac.com>
Message-ID: <38FDAFB8-7B7E-11D7-B071-0030658EA95E@panix.com>

On Wednesday, April 30, 2003, at 06:02  PM, John An wrote:
>
> I had run across some threads discussing trying to find a new 
> publisher, but thought that the situation had been resolved, since 
> Elsevier Science happily took my order.  When I called to inquire 
> about my order, they confidenctly said that they would have the book 
> in stock on May 1st.  Is there any way that I could temporarily get my 
> hands on the book in the meantime?  Is there anyone in the Boston area 
> that would be willing to lend me their book?  After years of hearing 
> how great Radiance was, I finally got the courage to jump in and to 
> learn to use this program.  The lack of availability of Rendering with 
> Radiance has put a HUGE damper on my plans (though I am still 
> determined to use it for my dissertation).

John, have you tried interlibrary loan?  Since you're in Boston I'd 
expect your local library could easily find you a copy.

Randolph


From radiance-general@radiance-online.org  Thu May  1 04:06:38 2003
From: radiance-general@radiance-online.org (Randolph Fritz)
Date: Wed, 30 Apr 2003 20:06:38 -0700
Subject: [Radiance-general] aiming illums, orthographic projection, and hiding surfaces
In-Reply-To: <3EB04974.3060802@rumblestrip.org>
Message-ID: <EC9FC0B6-7B81-11D7-B071-0030658EA95E@panix.com>

On Wednesday, April 30, 2003, at 03:08  PM, Rob Guglielmetti wrote:
>
> > Second, I'm sure this is covered in "Rendering with Radiance," but is
> > there a way to get orthogonal and orthographic projected views in
> > Radiance?  Moreover, is there a way to make a surface invisible, yet
> > be considered in the lighting calculation?  I would like to look into
> > an interior space in an axonometric view, but look through the
> > ceiling and 1 or 2 walls to see the light distribution throughout a
> > single space.
>
> Check the manpage for rpict, it explains all the view parameters.  The 
> way to see "through" a surface is to use clipping planes in your 
> views.  This way, the calculation is correct, but at view time you 
> slice through the building with the use of these clipping planes.  
> These are also explained in the rtrace manual page.

A bit more clarification.

If one has a model which is 100 feet in the x (width) direction and 50 
in the y direction, and one's floor is at z=0, and one is using feet 
(which I prefer for AS units), then the options:
   -vl -vd 0 0 -1 -vu 0 1 0 -vp 50 25 5 -vo 1
will give a plan cut at the conventional four feet off the floor.  
Also, this:
   -vl -vd 0 0 -1 -vu 0 1 0 -vp 50 25 7 -vo -1
I believe will give the reflected ceiling plan so popular with lighting 
designers, cut at eight feet off the floor, which I expect will include 
most overhead luminaires.

Explanatory notes:

"-vl" sets a "parallel" (orthographic or axonometric) projection.

"-vd" (view Direction) sets view direction; the option takes x y and z 
values but these are used to define a vector and (so far as I can tell) 
only the direction of the vector is used.  "-vd 0 0 -1" is a plan, 
since it is a vector pointing straight down.

"-vo" (fOre) sets a clipping plane near the viewpoint and "-va" (Aft) 
sets one behind the space.  "-vo 1" sets a cutting plane 1 unit from 
the viewpoint.  "-vo -1" will--I think--show a reflected image one unit 
behind the viewpoint

"-vp" (viewPoint) sets the viewpoint in model space (this will be the 
center of an orthographic projection.)  "-vp 50 25 5" is a viewpoint 
five feet up in the center of my example model.

"-vu" (up) gives a vector in model space which indicates the "top" 
(maximum y coordinate) of the 2-D projection.  "-vu 0 1 0" (I believe 
this is default) will make the y direction in model space the y 
direction in the projection.

I believe that's a summary of the basics of Radiance parallel 
projections.  Hope it helps!

Randolph


From radiance-general@radiance-online.org  Thu May  1 05:41:44 2003
From: radiance-general@radiance-online.org (gurneet)
Date: Thu, 1 May 2003 10:11:44 +0530
Subject: [Radiance-general] Re: Radiance on bootable CDROM using Linux
References: <A2B098B4E624D511BED900508BB92A57054173FB@exmsb02.curtin.edu.au>
Message-ID: <008401c30f9c$0b895410$190310ac@fundoo>

hi terry and all,
i explored ur radiance on bootable CDROM , everthing was fine except, mouse
was not working , could u help me on how to configure mouse.
gurneet


----- Original Message -----
From: "Terrance Mc Minn" <T.McMinn@exchange.curtin.edu.au>
To: <radiance-general@radiance-online.org>
Sent: Friday, March 14, 2003 7:27 AM
Subject: [Radiance-general] Re: Radiance on bootable CDROM using Linux


> Hello All,
>
> The CDROM image for this "Hard Drive-less Radiance for PC" has now been
> posted at
> http://puffin2.curtin.edu.au/restricted/mcminn/radiance-cdrom.shtml. This
is
> the current version in use by my students as of March 2003.
>
> Please email any comments.
>
> Regards
>
> Terry Mc Minn
> Faculty of Built Environment, Art and Design
> Curtin University of Technology
> GPO Box U 1987
> Perth 6845
> Western Australia
> Email: T.Mcminn@curtin.edu.au
> CRICOS Provider Code: 00301J
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>



From radiance-general@radiance-online.org  Thu May  1 18:40:08 2003
From: radiance-general@radiance-online.org (John An)
Date: Thu, 01 May 2003 10:40:08 -0700
Subject: [Radiance-general] aiming illums, orthographic projection, and hiding surfaces
Message-ID: <3300635.1051810808087.JavaMail.whollycow@mac.com>

Thanks Rob and Randolph for your help.

First off, de-triangulating the illums did the trick; no more aiming problems.  I'm curious to know how inaccurate the calculations are when there are aiming errors.

Secondly, while I had searched the Harvard libraries for Rendering with Radiance, I hadn't searched the MIT libraries.  Low and behold, MIT has a copy, which I quickly snatched up.  And unfortunately, it seems as if Rendering with Radiance is no longer in print.  I found a used copy of it on sale at Amazon for about $150 (I haven't ordered it).  I really do want a copy of my own for future reference, so if anyone finds out more about the availability of Rendering with Radiance, please keep me (and us, I assume) informed.

Now, to my next question.  I've flipped through Rendering with Randiance the last 30 minutes, and haven't found what I needed.  I will be reading through it more carefully, but I haven't seen anything regarding setting up a reference grid.  In Desktop Radiance, there is an option to create a reference grid.

So, how does one go about setting up a reference grid or reference point in the "regular" Radiance?

Thanks again.



John An

From radiance-general@radiance-online.org  Thu May  1 19:23:49 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Thu, 01 May 2003 14:23:49 -0400
Subject: [Radiance-general] aiming illums, orthographic projection, and
 hiding surfaces
References: <3300635.1051810808087.JavaMail.whollycow@mac.com>
Message-ID: <3EB16635.1050908@rumblestrip.org>

John An wrote:

 > First off, de-triangulating the illums did the trick; no more aiming
 > problems.  I'm curious to know how inaccurate the calculations are
 > when there are aiming errors.

AFAIK, error could potentially be quite large.  Since you now have RwR 
in your posession, head over to page 511 for the juicy bits about this 
dilemma.

 > Secondly, while I had searched the Harvard libraries for Rendering
 > with Radiance, I hadn't searched the MIT libraries.  Low and behold,
 > MIT has a copy, which I quickly snatched up.  And unfortunately, it
 > seems as if Rendering with Radiance is no longer in print.  I found a
 > used copy of it on sale at Amazon for about $150 ...

That's only about 50% over list price, certainly the cheapest I've seen 
it in a while.  :\

 > Now, to my next question.  I've flipped through Rendering with
 > Randiance the last 30 minutes, and haven't found what I needed.  I
 > will be reading through it more carefully, but I haven't seen
 > anything regarding setting up a reference grid.  In Desktop Radiance,
 > there is an option to create a reference grid.
 >
 > So, how does one go about setting up a reference grid or reference
 > point in the "regular" Radiance?

This thread might be useful for ya.  Be sure to read the entire thread 
because (surprise!) I made some errors along the way...

http://www.radiance-online.org/pipermail/radiance-general/2002-May/000258.html

Also, Georg Mischler's Rayfront will generate these grids for you 
automatically.

----

      Rob Guglielmetti

e. rpg@rumblestrip.org
w. www.rumblestrip.org


From radiance-general@radiance-online.org  Thu May  1 20:06:56 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Thu, 01 May 2003 15:06:56 -0400
Subject: [Radiance-general] aiming illums, orthographic projection, and
 hiding surfaces
References: <3300635.1051810808087.JavaMail.whollycow@mac.com>
Message-ID: <3EB17050.2080509@rumblestrip.org>

John An wrote:
> Thanks Rob and Randolph for your help.
> 
> First off, de-triangulating the illums did the trick; no more aiming problems.  

Actually, this brings up a question I have for the list.  What to do if 
you have a warped plane that is a skylight?  I mean, I can draw it as a 
warped parallelogram, but Radout is gonna split it into two long thin 
triangles, and I'll get the aiming failure.  Do you use LOTS of 
triangles to approximate the warp, or is there some other way?

----

      Rob Guglielmetti

e. rpg@rumblestrip.org
w. www.rumblestrip.org


From radiance-general@radiance-online.org  Thu May  1 20:51:21 2003
From: radiance-general@radiance-online.org (Georg Mischler)
Date: Thu, 1 May 2003 15:51:21 -0400 (EDT)
Subject: [Radiance-general] aiming illums, orthographic projection, and
 hiding surfaces
In-Reply-To: <3EB17050.2080509@rumblestrip.org>
Message-ID: <Pine.BSF.4.44.0305011548230.92146-100000@emancholl.pair.com>

Rob Guglielmetti wrote:

> John An wrote:
> > Thanks Rob and Randolph for your help.
> >
> > First off, de-triangulating the illums did the trick; no more aiming
> > problems.
>
> Actually, this brings up a question I have for the list.  What to do if
> you have a warped plane that is a skylight?  I mean, I can draw it as a
> warped parallelogram, but Radout is gonna split it into two long thin
> triangles, and I'll get the aiming failure.  Do you use LOTS of
> triangles to approximate the warp, or is there some other way?


Do your windowing contractor a favour, and avoid constructs like
that to begin with? ;)

Note that the illum doesn't have to be the same object as the
window pane. In such a case, you probably want to add an extra
polygon below the window, eg. around the lower outline of the
frame of the skylight. This surface then gets treated by mkillum
instead of the actual window.

If the resulting shape is still very long and thin, then consider
dividing it into two or more sections that are closer to a
square. Otherwise, the source subdivision may result in a very
suboptimal set of virtual light sources (their location is
determined on a regular grid within the bounding rectangle of the
polygon).


-schorsch

-- 
Georg Mischler  --  simulations developer  --  schorsch at schorsch com
+schorsch.com+  --  lighting design tools  --  http://www.schorsch.com/


From radiance-general@radiance-online.org  Thu May  1 21:30:21 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Thu, 01 May 2003 16:30:21 -0400
Subject: [Radiance-general] aiming illums, orthographic projection, and
 hiding surfaces
References: <Pine.BSF.4.44.0305011548230.92146-100000@emancholl.pair.com>
Message-ID: <3EB183DD.101@rumblestrip.org>

Georg Mischler wrote:

> Do your windowing contractor a favour, and avoid constructs like
> that to begin with? ;)

Heh heh, I didn't design the darned thing, I'm just tasked with studying 
it!  =8-/

> Note that the illum doesn't have to be the same object as the
> window pane. In such a case, you probably want to add an extra
> polygon below the window, eg. around the lower outline of the
> frame of the skylight. This surface then gets treated by mkillum
> instead of the actual window.

True, I didn't think of that.  I will try that.  Thanks Georg!

----

      Rob Guglielmetti

e. rpg@rumblestrip.org
w. www.rumblestrip.org


From radiance-general@radiance-online.org  Thu May  1 22:17:38 2003
From: radiance-general@radiance-online.org (Randolph Fritz)
Date: Thu, 1 May 2003 14:17:38 -0700
Subject: [Radiance-general] aiming illums, orthographic projection, and hiding surfaces
In-Reply-To: <Pine.BSF.4.44.0305011548230.92146-100000@emancholl.pair.com>
References: <3EB17050.2080509@rumblestrip.org> <Pine.BSF.4.44.0305011548230.92146-100000@emancholl.pair.com>
Message-ID: <20030501211738.GB25481@panix.com>

On Thu, May 01, 2003 at 03:51:21PM -0400, Georg Mischler wrote:
> Rob Guglielmetti wrote:
> 
> > John An wrote:
> > > Thanks Rob and Randolph for your help.
> > >
> > > First off, de-triangulating the illums did the trick; no more aiming
> > > problems.
> >
> > Actually, this brings up a question I have for the list.  What to do if
> > you have a warped plane that is a skylight?  I mean, I can draw it as a
> > warped parallelogram, but Radout is gonna split it into two long thin
> > triangles, and I'll get the aiming failure.  Do you use LOTS of
> > triangles to approximate the warp, or is there some other way?
> 
> 
> Do your windowing contractor a favour, and avoid constructs like
> that to begin with? ;)
> 

Clearly, your name isn't Aalto. :-) Though I think he may have hired
boat carpenters for some of his reflectors--that's how they're put
together; ribs and slats.  Rob, what does your skylight look like?  Is
the glass actually curved?

Randolph

From radiance-general@radiance-online.org  Fri May  2 00:51:29 2003
From: radiance-general@radiance-online.org (Fitzsimmons, Rob)
Date: Thu, 1 May 2003 16:51:29 -0700
Subject: [Radiance-general] averaging normals
Message-ID: <7B2F6EA5E35E214882CB9828962BC3CF0224A2B0@corvallis.summit.fiserv.com>

I was wondering if there is a way in Radiance to average the normals on
imported polys.
I've been importing dxf's
everything renders with the faceted look

Also - I'm interested in what other people are doing with Radiance.
Anyone want to post their Works in Progress?

This is an interior I'm playing with - a big image - about 250K
http://rastermon.com/images/cath6a.jpg

You'll notice the facets on the columns

Thanks Rob

From radiance-general@radiance-online.org  Fri May  2 00:34:37 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Thu, 1 May 2003 19:34:37 -0400
Subject: [Radiance-general] aiming illums, orthographic projection, and hiding surfaces
In-Reply-To: <3EB1A1BE.5030306@rumblestrip.org>
Message-ID: <78D6DD9A-7C2D-11D7-A6B0-000393824274@rumblestrip.org>

> Clearly, your name isn't Aalto. :-) Though I think he may have hired
> boat carpenters for some of his reflectors--that's how they're put
> together; ribs and slats.  Rob, what does your skylight look like?  Is
> the glass actually curved?

Well, the schematic drawings show it that way, but I'm sure it will be 
more faceted in reality.  At first I didn't care and just modeled it as 
a warped plane.  But now I wanna generate some prettier renderings and 
I can see that the mkillum process really helps in that regard.  I 
guess I'll "straighten it out".

About half the planes in my model need to get fixed, but even with all 
the aiming failures, the renderings generated with illums on all the 
windows are much nicer.  But I can see some artifacts that indicate to 
me that the accuracy is being compromised here.

Rob Guglielmetti
rpg@rumblestrip.org
www.rumblestrip.org


From radiance-general@radiance-online.org  Fri May  2 10:26:25 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Fri, 2 May 2003 10:26:25 +0100
Subject: [Radiance-general] Re: Transform from 3D to 2D Coordinates
In-Reply-To: <1051725523.3eb00ed348b47@webmail.bris.ac.uk>
Message-ID: <2570A59C-7C80-11D7-BAC3-00306540F848@lmi.net>

Hi Jon,

Since, as you point out, I will be at Bristol Univ. next week, anyway, 
we can chat about the viewloc() function while I'm there.  I wasn't 
sure if you were one of Alan's students or somewhere else at the 
university.  The -vs and -vl options default to 0, and you need not 
worry about them.  You can use the stdview global or the STDVIEW macro 
defined in view.h to set the default view parameters.  The ip[0] and 
ip[1] variables return image position on a [0-1) scale.  You need to 
multiply these values by your image resolution to get the actual pixel 
coordinates, which is exactly what the loc2pix function is for.  It 
seems like you have figured this all out, so I'm not sure what is and 
is not working for you at this point.

Hope to see you next week.
-Greg

> From: jb0001@bristol.ac.uk
> Date: Wed Apr 30, 2003  6:58:43  PM Europe/London
> To: radiance-general@radiance-online.org
> Subject: Re: [Radiance-general] Transform from 3D to 2D Coordinates
> Reply-To: radiance-general@radiance-online.org
>
> Dear Greg,
>
> Thanks a lot for you quick reply to my last question. Im sorry to 
> bother
> you again with what is probably another obvious question.
>
>  I have been spending a lot of time trying to use your 'viewloc()'
> function in my program. I believe i know what most of the parameters
> should be but i was hoping you could confirm (or correct) a few of my
> assumptions as I cannot seem to produce any correct output.
>
> Firstly, viewloc() is passed three variables ip, v and p. p is 
> obviously
> the input co-ordinates in the xyz used by the radiance coordinate
> system. v is the details of the view. ip therefore must be the output
> coordinates - are ip[0] and ip[1] the new x and y coordinates?
>
> the only v setttings that i cannot figure out the origin of is hoff and
> voff (the horizontal and vertical offsets). As i do not change many
> rendering parameters with rpict (only -vp and -vd) i am assuming these
> default to 0 - is this correct? i assume the rest of the v variables
> (i.e. hvec, vvec, hn2 etc.) are calculated in the 'setview' function.
>
> Finally, I have been passing ip[0] and ip[1] to the loc2pix function to
> convert this location to a pixel coordinate. My resolution is the
> default 512X512 and my -vv and -vh are also the default 45. Does this
> mean that loc2pix will give me an (x,y) between 0 and 512?
>
> Again sorry to bother you with this - i wouldnt ask unless i really
> couldnt sort it out myself
>
> Your help is greatly appreciated
>
> Jon Bright
>
> ps as a matter of interest i hear you are visiting my university
> (Bristol) on sunday to meet, among other people, my supervisor (Alan
> Chalmers). Small world isnt it!


From radiance-general@radiance-online.org  Fri May  2 10:56:03 2003
From: radiance-general@radiance-online.org (Roland Schregle)
Date: Fri, 02 May 2003 11:56:03 +0200
Subject: [Radiance-general] averaging normals
References: <7B2F6EA5E35E214882CB9828962BC3CF0224A2B0@corvallis.summit.fiserv.com>
Message-ID: <3EB240B3.4D4B8A7D@gmx.net>

"Fitzsimmons, Rob" wrote:

> This is an interior I'm playing with - a big image - about 250K
> http://rastermon.com/images/cath6a.jpg

Neat! Is this model available?

--Roland

-- 
END OF LINE. (MCP)

From radiance-general@radiance-online.org  Fri May  2 14:20:05 2003
From: radiance-general@radiance-online.org (Terrance Mc Minn)
Date: Fri, 2 May 2003 21:20:05 +0800
Subject: [Radiance-general] Radiance on bootable CDROM using Linux
Message-ID: <A2B098B4E624D511BED900508BB92A570541747D@exmsb02.curtin.edu.au>

Gurnett wrote
>i explored ur radiance on bootable CDROM , everthing was fine except, mouse
was not working , could u help me on how to configure mouse. Gurneet

To configure the mouse with X windows, you need to determine the manner in
which the mouse is connected to the computer. See also pages 53 and 59 of
the study guide:
i) USB mouse, use the /dev/input/mice
ii) The PS/2 mouse has a small round 6- pin DIN connector. Use /dev/psaux
iii) A serial mouse has a 9 or 25 pin connector and can be connected on com
port 1. Use /dev/ttyS0
iv) A serial mouse has either a 9 or 25 pin connector and can be connected
on com port 2. Use /dev/ttyS1

Hint: If the rest of your X configuration is working, you can modify the
setup via xreset's 'Complex - text mode' scripts from the console. See from
page 65 onwards in the study guide.

Regards 

Terry Mc Minn 
Faculty of Built Environment, Art and Design 
Curtin University of Technology 
GPO Box U 1987 
Perth 6845 
Western Australia 
Email: T.Mcminn@curtin.edu.au 
CRICOS Provider Code: 00301J 

From radiance-general@radiance-online.org  Fri May  2 14:24:30 2003
From: radiance-general@radiance-online.org (John Mardaljevic)
Date: Fri, 2 May 2003 14:24:30 +0100 (BST)
Subject: [Radiance-general] Sun Solaris binaries for 3.5
Message-ID: <E19BaWC-0004RM-00@saturn.dmu.ac.uk>

This is Greg Ward, e-mailing from John Mardaljevic's account in the U.K.

I just used John's SunBlade running Solaris 5.8 to build the Radiance 3.5 
binaries, which I've added to the list of binaries available from the main 
website download:

http://radsite.lbl.gov/radiance/download.html

I expect Peter A-B will add these to the radiance-online cache as well.  Please 
let me know of any difficulties you have running these executables on your 
system.  I did not link them statically, so there might be dynamic library  
issues.

-Greg


From radiance-general@radiance-online.org  Fri May  2 22:30:36 2003
From: radiance-general@radiance-online.org (radiance-general@radiance-online.org)
Date: Fri, 2 May 2003 23:30:36 +0200 (MEST)
Subject: [Radiance-general] Sun Solaris binaries for 3.5
References: <E19BaWC-0004RM-00@saturn.dmu.ac.uk>
Message-ID: <2712.1051911036@www20.gmx.net>

> I just used John's SunBlade running Solaris 5.8 to build the Radiance 3.5 
> binaries, which I've added to the list of binaries available from the main
> website download:

Hi Greg,

that's great news for someone who has not been able to compile the
3.5-source
on Solaris. Did you use gcc (as I tried) or did you have a native Compiler,
so that
we will have an "optimized" binary for the sparc platform?

CU Lars.

-- 
+++ GMX - Mail, Messaging & more  http://www.gmx.net +++
Bitte lächeln! Fotogalerie online mit GMX ohne eigene Homepage!


From radiance-general@radiance-online.org  Sat May  3 01:45:27 2003
From: radiance-general@radiance-online.org (Lars O. Grobe)
Date: Sat, 3 May 2003 02:45:27 +0200
Subject: [Radiance-general] averaging normals
In-Reply-To: <7B2F6EA5E35E214882CB9828962BC3CF0224A2B0@corvallis.summit.fiserv.com>
References: <7B2F6EA5E35E214882CB9828962BC3CF0224A2B0@corvallis.summit.fiserv.com>
Message-ID: <200305030044.h430iL5x006390@darkside-animation.com>

> I was wondering if there is a way in Radiance to average the normals on
> imported polys.
> I've been importing dxf's
> everything renders with the faceted look

Hi!

AFAIK one of the import tools (3ds2mgf) has a "smooth"-switch.
However, you might also have some luck with ambient resolution settings.
And, of course, you could refine the geometry (and divide the model using
instances to save memory).

CU, Lars.


From radiance-general@radiance-online.org  Sat May  3 02:55:43 2003
From: radiance-general@radiance-online.org (Randolph Fritz)
Date: Fri, 2 May 2003 18:55:43 -0700
Subject: [Radiance-general] FormZ & Radiance
Message-ID: <599F3F16-7D0A-11D7-B78B-0030658EA95E@panix.com>

What are people's experiences with FormZ and Radiance?  I've got a 
school studio project which I would like (if there is time) to do some 
lighting studies on (yes, the one with the shoji) & it's currently 
modelled in FormZ.  Last time I tried that I used OBJ format as a 
Radiance export method.  What do people think--is that the way to go?  
Or...?

Randolph


From radiance-general@radiance-online.org  Sat May  3 08:41:01 2003
From: radiance-general@radiance-online.org (radiance-general@radiance-online.org)
Date: Sat,  3 May 2003 00:41:01 -0700
Subject: [Radiance-general] Sun Solaris binaries for 3.5
In-Reply-To: <2712.1051911036@www20.gmx.net>
References: <E19BaWC-0004RM-00@saturn.dmu.ac.uk> <2712.1051911036@www20.gmx.net>
Message-ID: <1051947661.3eb3728d51382@webmail.lmi.net>

These were compiled with the native Sun compiler, so I'm hoping they're 
optimized.

-G

Quoting grobe@gmx.net:

> > I just used John's SunBlade running Solaris 5.8 to build the Radiance 
3.5 
> > binaries, which I've added to the list of binaries available from the 
main
> > website download:
> 
> Hi Greg,
> 
> that's great news for someone who has not been able to compile the
> 3.5-source
> on Solaris. Did you use gcc (as I tried) or did you have a native 
Compiler,
> so that
> we will have an "optimized" binary for the sparc platform?
> 
> CU Lars.
> 
> -- 
> +++ GMX - Mail, Messaging & more  http://www.gmx.net +++
> Bitte lächeln! Fotogalerie online mit GMX ohne eigene Homepage!
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
> 
> 



From radiance-general@radiance-online.org  Sat May  3 14:33:33 2003
From: radiance-general@radiance-online.org (Thomas Seebohm)
Date: Sat, 03 May 2003 09:33:33 -0400
Subject: [Radiance-general] formZ and Radiance
References: <20030503100002.7797.81337.Mailman@darkside-animation.com>
Message-ID: <3EB3C52C.36558618@fes.uwaterloo.ca>

Hi Randolph,

OBJ is the way to export from formZ to Radiance by way of the obj2rad
translator. We have gone this route for many years. If you want
smoothing on curved surfaces, you have to make sure that you ask for
surface normals to be exported in the obj export options dialogue. I
recommend that the formZ model be broken up into layers and that you
export these one at a time. This allows you to isolate problems if there
are some. For example, in a recent case where I exported surface
normals, there were some lines in the obj files where the surface
normals had 0 for the x, y , z components. obj2rad did not like that. I
also seem to recall that holes in polygons, like windows, will cause
Radiance to fill the opening on rendering. You have to split the
offending polygons before exporting. This is not hard to do in formZ.
Another issue to note is that, if you are working in metric units in
formZ, formZ will multiply sizes by multiples of 10 depending on what
units you are using (for meters the exported sizes are 100 times
larger). It is best to do a test translation and to look at the obj file
to check by what factor the dimensions have been multiplied. You can
then compensate by applying a scale factor in the export options under
transformation. Also, under transformations, uncheck the default
flipping and swapping of axes.

Thomas


> 
> Message: 5
> Date: Fri, 2 May 2003 18:55:43 -0700
> From: Randolph Fritz <randolph@panix.com>
> To: radiance-general@radiance-online.org
> Subject: [Radiance-general] FormZ & Radiance
> Reply-To: radiance-general@radiance-online.org
> 
> What are people's experiences with FormZ and Radiance?  I've got a
> school studio project which I would like (if there is time) to do some
> lighting studies on (yes, the one with the shoji) & it's currently
> modelled in FormZ.  Last time I tried that I used OBJ format as a
> Radiance export method.  What do people think--is that the way to go?
> Or...?
> 
> Randolph
>

From radiance-general@radiance-online.org  Sat May  3 14:38:27 2003
From: radiance-general@radiance-online.org (radiance-general@radiance-online.org)
Date: Sat, 3 May 2003 15:38:27 +0200 (MEST)
Subject: [Radiance-general] FormZ & Radiance
References: <599F3F16-7D0A-11D7-B78B-0030658EA95E@panix.com>
Message-ID: <21843.1051969107@www43.gmx.net>

> What are people's experiences with FormZ and Radiance?  I've got a 
> school studio project which I would like (if there is time) to do some 
> lighting studies on (yes, the one with the shoji) & it's currently 
> modelled in FormZ.  Last time I tried that I used OBJ format as a 
> Radiance export method.  What do people think--is that the way to go?  
> Or...?
> 
> Randolph

Hi Randolph!

I use dxf to export from formZ, and dxf2rad. I usually have one material
per layer, so that I can write one simple mapping file to map the layer
names that will be written by dxf2rad to my material lib. I also have to use
the -s .01 setting of dxf2rad, but that depends on the units you are using
in formZ.

All in all, it works great, and I also choose my views in formZ (in formZ,
if you use the Strg-E on Windows or Apple-E on Mac, you can define your
views, and the resulting view angle settings as well as the position and
direction can be used in radiance).

I didn't use obj as it gives some problems with your coordinate system, and
dxf simply works well.

CU Lars.

-- 
+++ GMX - Mail, Messaging & more  http://www.gmx.net +++
Bitte lächeln! Fotogalerie online mit GMX ohne eigene Homepage!


From radiance-general@radiance-online.org  Sat May  3 15:07:32 2003
From: radiance-general@radiance-online.org (genevieve lucet)
Date: Sat, 3 May 2003 09:07:32 -0500
Subject: [Radiance-general] FormZ & Radiance
Message-ID: <956E1C9C-7D70-11D7-9737-0003937EADB4@servidor.unam.mx>

I think that OBJ is the best way to export from FormZ to  Radiance. 
When I did it, I was really surprised to see that all my geometry could 
be completely transfered, without  problems.
genevieve lucet
  


From radiance-general@radiance-online.org  Sat May  3 16:54:31 2003
From: radiance-general@radiance-online.org (radiance-general@radiance-online.org)
Date: Sat, 3 May 2003 17:54:31 +0200 (MEST)
Subject: [Radiance-general] FormZ & Radiance
References: <599F3F16-7D0A-11D7-B78B-0030658EA95E@panix.com>
Message-ID: <12755.1051977271@www58.gmx.net>

Hi again,

BTW, if you are using the Windows version of formZ, which
is able to export 3ds, you get the colors imported (they are
ugly, not real radiance material definitions, but allow you togenerate
a quick preview to check geometry and material mapping), and
you might even be able to generate a simple animation as you
can get the geometry for all the frames in 3ds-animations if you
use 3ds2mgf. However, I never tried the animation stuff with 3ds.

So, I use dxf, and I only export geometry, the materials are defined
in one library file here.

CU Lars.

-- 
+++ GMX - Mail, Messaging & more  http://www.gmx.net +++
Bitte lächeln! Fotogalerie online mit GMX ohne eigene Homepage!


From radiance-general@radiance-online.org  Sat May  3 13:30:41 2003
From: radiance-general@radiance-online.org (Digital Architectural Illustration Services)
Date: Sat, 3 May 2003 13:30:41 +0100
Subject: [Radiance-general] Assistance required with Rendering error
Message-ID: <000801c31170$9031d4a0$66338351@register>

This is a multi-part message in MIME format.

------=_NextPart_000_0007_01C31178.314D40C0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

RADIANCE RENDERING ARTIFACTS PROBLEM - SEVERE GRAIN IN INDIRECT =
ILLUMINATION

Please can any Radiance users assist with a rendering error on an =
architectural illustration project.

Severe grain appears in a Radiance render where indirect illumination =
strikes an interior floor, similar to a moir=E9 pattern. Some grain in =
Radiance images is easily corrected with PFILT using down-sampling and a =
radial blur filter, but the artifacts encountered were too severe for =
this to be effective.

Please visit my Internet Site :
www.daiservices.btinternet.co.uk/Radiance/Radiance_v3_5_UNIX/Render_Tests=
/Radiance_render_grain_error_01.htm
 to assess images of the problem.

Kind regards

Digital Architectural Illustration Services

------=_NextPart_000_0007_01C31178.314D40C0
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META content=3D"text/html; charset=3Diso-8859-1" =
http-equiv=3DContent-Type>
<META content=3D"MSHTML 5.00.3314.2100" name=3DGENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY background=3D"" bgColor=3D#ffffff>
<DIV>RADIANCE RENDERING ARTIFACTS PROBLEM - SEVERE GRAIN IN INDIRECT=20
ILLUMINATION</DIV>
<DIV><BR>Please can any Radiance users assist with a rendering error on =
an=20
architectural illustration project.</DIV>
<DIV><BR>Severe grain appears in a Radiance render where indirect =
illumination=20
strikes an interior floor, similar to a moir=E9 pattern. Some grain in =
Radiance=20
images is easily corrected with PFILT using down-sampling and a radial =
blur=20
filter, but the artifacts encountered were too severe for this to be=20
effective.</DIV>
<DIV><BR>Please visit my Internet Site :</DIV>
<DIV><A=20
href=3D"http://www.daiservices.btinternet.co.uk/Radiance/Radiance_v3_5_UN=
IX/Render_Tests/Radiance_render_grain_error_01.htm">www.daiservices.btint=
ernet.co.uk/Radiance/Radiance_v3_5_UNIX/Render_Tests/Radiance_render_grai=
n_error_01.htm</A></DIV>
<DIV>&nbsp;to assess images of the problem.</DIV>
<DIV><BR>Kind regards</DIV>
<DIV><BR>Digital Architectural Illustration Services</DIV></BODY></HTML>

------=_NextPart_000_0007_01C31178.314D40C0--


From radiance-general@radiance-online.org  Sat May  3 13:48:22 2003
From: radiance-general@radiance-online.org (Digital Architectural Illustration Services)
Date: Sat, 3 May 2003 13:48:22 +0100
Subject: [Radiance-general] Assistance required with Rendering error - severe grain in indirect illumination
Message-ID: <003201c31172$6affd180$4e028351@register>

RADIANCE RENDERING ARTIFACTS PROBLEM - SEVERE GRAIN IN INDIRECT ILLUMINATION

(correctly posted)

Please can any Radiance users assist with a rendering error on an
architectural illustration project.

Severe grain appears in a Radiance render where indirect illumination
strikes an interior floor, similar to a moiré pattern. Some grain in
Radiance images is easily corrected with PFILT using down-sampling and a
radial blur filter, but the artifacts encountered were too severe for this
to be effective.

Please visit my Internet Site :

www.daiservices.btinternet.co.uk/Radiance/Radiance_v3_5_UNIX/Render_Tests/Ra
diance_render_grain_error_01.htm

to assess images of the problem.

Kind regards

Digital Architectural Illustration Services
daiservices@btinternet.com




From radiance-general@radiance-online.org  Sun May  4 22:58:01 2003
From: radiance-general@radiance-online.org (Randolph Fritz)
Date: Sun, 4 May 2003 14:58:01 -0700
Subject: [Radiance-general] FormZ & Radiance
In-Reply-To: <12755.1051977271@www58.gmx.net>
Message-ID: <797D365B-7E7B-11D7-9316-0030658EA95E@panix.com>

Sounds like for me, the best way to do this is OBJ, since I can't 
easily use 3D Studio.

The last time I tried this, I found that the FormZ "subdivide concave 
faces" was useful; I suspect with curved surfaces its triangulation 
sub-option would be useful as well.

Randolph


From radiance-general@radiance-online.org  Mon May  5 00:17:13 2003
From: radiance-general@radiance-online.org (Carsten Bauer)
Date: Sun, 4 May 2003 23:17:13 +0000
Subject: [Radiance-general] Assistance required with Rendering error
In-Reply-To: <000801c31170$9031d4a0$66338351@register>
References: <000801c31170$9031d4a0$66338351@register>
Message-ID: <200305042317.13941.cbauer-@t-online.de>

Hi DAI-crew,

the artifacts stem most likely from a special random generator  used for all 
kinds of ray jittering applied in the process of penumbra generation. I don't 
really know why this is done, because pictures often look rather strange with 
these patterns. 

Luckily, however, Radiance provides a way to switch this off, just recompile 
the whole stuff with the compiler flag -DMC, and the penumbras will look much 
better.

You might experience problems in compiling with -DMC, at least I did (with 
Linux). I had to change the following:

in ray/src/common/random.h :

put line 71 in #ifndef MC exclusion:
 
#ifndef MC                               /*  <--- inserted */                                                                                                             
extern int      initurand(int size);                                                                                    
#endif                                     /* <---- inserted  */

in ray/src/rt/raycalls.c

the same with line 171ff:

#ifndef MC                              /* <--- inserted   */                                                                                                            
                                        /* initialize urand */                                                           
if (urperm == NULL)                                                                                             
                initurand(2048);                                                                                        
#endif                                    /* <-----inserted */

Apart from this general treatment really strong artifacts may also appear due 
some geometry error in the scene file (for example if a light source is 
partly cut by some object).

-Carsten   


From radiance-general@radiance-online.org  Sun May  4 23:26:39 2003
From: radiance-general@radiance-online.org (Randolph Fritz)
Date: Sun, 4 May 2003 15:26:39 -0700
Subject: [Radiance-general] rholo?
In-Reply-To: <599F3F16-7D0A-11D7-B78B-0030658EA95E@panix.com>
Message-ID: <796B66D4-7E7F-11D7-9316-0030658EA95E@panix.com>

Please, would people talk about about their experiences using rholo?  
With enough preparation, can it be used for real-time walkthroughs as 
the name suggests?  What type of computer would a I need to do 
it--would a 400 MHz PowerMac G4 with a Radeon 9000 card do?

How *much* rendering time would it need to cover, say, the level of a 
detail of a half-inch physical model of a 1200 ft^2 gallery?  (For SI 
users: 1:20 scale, about 100 m^2)  (How much modelling time would it 
take me to finish that, I wonder?  Ulp!)

Randolph


From radiance-general@radiance-online.org  Mon May  5 08:45:41 2003
From: radiance-general@radiance-online.org (Peter Apian-Bennewitz)
Date: Mon, 05 May 2003 09:45:41 +0200
Subject: [Radiance-general] Assistance required with Rendering error /
 random numbers
In-Reply-To: <200305042317.13941.cbauer-@t-online.de>
References: <000801c31170$9031d4a0$66338351@register> <200305042317.13941.cbauer-@t-online.de>
Message-ID: <3EB616A5.4030301@pab-opto.de>

Carsten Bauer wrote:

>Hi DAI-crew,
>
>the artifacts stem most likely from a special random generator  used for all 
>kinds of ray jittering applied in the process of penumbra generation. I don't 
>really know why this is done, because pictures often look rather strange with 
>these patterns. 
>
Basically the idea the is to generate equally distributed random numbers.
A "few" (hundred or thousand) true random numbers (generated with -DMC) 
are a bit "clustered", so, to cover the interval in question ( typically 
[0..1] ) more evenly even with a few  points, an "afterburner" routine 
tries to equalize the distribution of these numbers. The price for this 
is the stupid pattern. Augustinus Topor at FhG-ISE looked into this last 
year too but we found no better idea yet.
-DMC avoids the pattern but the increase in necessary picture size 
before downsampling is substantial (easily a factor of 4). Otherwise the 
random clusters show up in the final image.
A somewhat dis-satisfying situation at present.

-Peter

-- 
 pab-opto, Freiburg, Germany, www.pab-opto.de



From radiance-general@radiance-online.org  Mon May  5 08:47:28 2003
From: radiance-general@radiance-online.org (radiance-general@radiance-online.org)
Date: Mon,  5 May 2003 00:47:28 -0700
Subject: [Radiance-general] Re: Assistance required with Rendering error
Message-ID: <1052120848.3eb61710bcf58@webmail.lmi.net>

Your website is not set up correctly to view the images -- I had to
go into the HTML source in order to get the correct URLs for the referenced
images.

Carsten's suggestion of using the -DMC build option will alter the
appearance of these artifacts, but will not eliminate them.  My guess
is that the sampling noise you are seeing here  arises from specular artifacts
rather than source sampling, which is why altering the -d* options did
not correct the problem.  Unfortunately, there are no quick fixes for
specular sampling noise, but I can offer some suggestions:

1) Make sure only metallic surfaces have specular components greater than 0.06
2) Increase the basic sampling rate (i.e., use greater initial resolutions in 
rpict and greater picture reductions in pfilt)
3) Decrease the value of the -sj parameter.
4) Increase the value of the -st parameter.

The use of low-discrepency sequences is a widely recognized means to
improved Monte Carlo convergence rates, and this is what Radiance
uses by default.  The -DMC option switches over to a "pure" Monte
Carlo approach, which requires longer to converge to an average but
does not contain any visible patterns in its noise.

I hope this helps.
-Greg

------------ Original Message -----------------

RADIANCE RENDERING ARTIFACTS PROBLEM - SEVERE GRAIN IN INDIRECT =
ILLUMINATION

Please can any Radiance users assist with a rendering error on an =
architectural illustration project.

Severe grain appears in a Radiance render where indirect illumination =
strikes an interior floor, similar to a moir=E9 pattern. Some grain in =
Radiance images is easily corrected with PFILT using down-sampling and a =
radial blur filter, but the artifacts encountered were too severe for =
this to be effective.

Please visit my Internet Site :
www.daiservices.btinternet.co.uk/Radiance/Radiance_v3_5_UNIX/Render_Tests=
/Radiance_render_grain_error_01.htm
 to assess images of the problem.

Kind regards

Digital Architectural Illustration Services


From radiance-general@radiance-online.org  Mon May  5 12:55:00 2003
From: radiance-general@radiance-online.org (Carsten Bauer)
Date: Mon, 5 May 2003 11:55:00 +0000
Subject: [Radiance-general] Assistance required with Rendering error / random numbers
In-Reply-To: <3EB616A5.4030301@pab-opto.de>
References: <000801c31170$9031d4a0$66338351@register> <200305042317.13941.cbauer-@t-online.de> <3EB616A5.4030301@pab-opto.de>
Message-ID: <200305051155.00322.cbauer-@t-online.de>

On Monday 05 May 2003 07:45, Peter Apian-Bennewitz wrote:
......
> -DMC avoids the pattern but the increase in necessary picture size
> before downsampling is substantial (easily a factor of 4). Otherwise the
> random clusters show up in the final image.
> A somewhat dis-satisfying situation at present.

Hmmm,... 

Hi Peter,

if you and Greg ascertain that there are calculational advantages (mainly 
speed) in using distributed random numbers will believe it., although I 
haven't noticed a considerable slowing down so far. And I cannot confirm at 
all the mentioned strong effect on necessary picture size before downsampling 
If the relevant parameters are set correctly, I've made very good experiences 
with the -DMC version. For printing, one can even get along with 
downfiltering by a factor less than two, provided the image itself is big 
enough in absolute pixels. But adequate parameter setting is of course vital.

However, penumbra generation is something which affords a bit thinking in 
terms of simulation, how to achieve the effect, not just putting 1:1 RealLife 
to SimLife corresponding geometry into the machine and press return (apology 
to Roland for using his terms without license :-) )

Additionally, when considering PCs becoming faster and faster, I wonder if 
there's a reasonable way to overcome the MonteCarlo mess completey and 
establish a completey different, 'deterministic'  treatment of the problem 
???

-Carsten







From radiance-general@radiance-online.org  Mon May  5 14:00:56 2003
From: radiance-general@radiance-online.org (Roland Schregle)
Date: Mon, 05 May 2003 15:00:56 +0200
Subject: [Radiance-general] Assistance required with Rendering error / random
 numbers
References: <000801c31170$9031d4a0$66338351@register> <200305042317.13941.cbauer-@t-online.de> <3EB616A5.4030301@pab-opto.de> <200305051155.00322.cbauer-@t-online.de>
Message-ID: <3EB66088.5C145A8D@gmx.net>

Carsten Bauer wrote:

> However, penumbra generation is something which affords a bit thinking in
> terms of simulation, how to achieve the effect, not just putting 1:1 RealLife
> to SimLife corresponding geometry into the machine and press return (apology
> to Roland for using his terms without license :-) )

License granted, provided it's clearly marked as [tm]. :^)

-- 
END OF LINE. (MCP)


From radiance-general@radiance-online.org  Mon May  5 14:28:55 2003
From: radiance-general@radiance-online.org (Thomas Seebohm)
Date: Mon, 05 May 2003 09:28:55 -0400
Subject: [Radiance-general] formZ and Radiance
References: <20030505100002.14745.4817.Mailman@darkside-animation.com>
Message-ID: <3EB66716.C06EB89B@fes.uwaterloo.ca>

I forgot to mention that there is a convenient way for dealing with
material colors when exporting to Radiance by way of obj files and the
obj2rad translator. Before exporting make sure that, in the export
options dialogue for obj, the material option is set to "wrapped" rather
than "off". This will produce a materials file (.mtl extension) which
contains parameters for each surface style (=material) in formZ. This
files is exported with the .obj file. If you name the surface styles you
actually use in formZ (rather than leaving them as style_1, style_2
etc.), you can easily identify the surface styles that you will need in
the Radiance material file. The red, green, blue values for each
material are the three numbers after the kd parameter for a material in
the .mtl file. These can be used directly in the Radiance material file
and will produce colors that correspond closely to those that appeared
in formZ renderings (barring differences in monitor calibration).

From radiance-general@radiance-online.org  Mon May  5 16:20:13 2003
From: radiance-general@radiance-online.org (Peter Apian-Bennewitz)
Date: Mon, 05 May 2003 17:20:13 +0200
Subject: [Radiance-general] Assistance required with Rendering error /
 random numbers
In-Reply-To: <200305051155.00322.cbauer-@t-online.de>
References: <000801c31170$9031d4a0$66338351@register> <200305042317.13941.cbauer-@t-online.de> <3EB616A5.4030301@pab-opto.de> <200305051155.00322.cbauer-@t-online.de>
Message-ID: <3EB6812D.40303@pab-opto.de>

Carsten Bauer wrote:

>if you and Greg ascertain that there are calculational advantages (mainly 
>speed) in using distributed random numbers will believe it., although I 
>haven't noticed a considerable slowing down so far. And I cannot confirm at 
>all the mentioned strong effect on necessary picture size before downsampling 
>If the relevant parameters are set correctly, I've made very good experiences 
>with the -DMC version. For printing, one can even get along with 
>downfiltering by a factor less than two, provided the image itself is big 
>enough in absolute pixels. But adequate parameter setting is of course vital.
>
Well, - stratified Monte Carlo does have advantage (lower noise and 
faster convergence speed). "Pure" MC might be feasible per combinations 
of computers and projects, but I still see it's worth considering other 
strategies for evenly spread random numbers in Radiance.

>Additionally, when considering PCs becoming faster and faster, I wonder if 
>there's a reasonable way to overcome the MonteCarlo mess completey and 
>establish a completey different, 'deterministic'  treatment of the problem 
>
A better, yet general, numerical integration would be appreciated by a 
few ...

In specular hightlights and ambient calcs the integrant is stepwise 
defined, non-functional with only very roughly pre-known boundaries. All 
I see as further enhancement is a better adaptive method. All one can do 
with a unknown integrant is to use already gained information as 
"intelligently" as possible. Educated guesses.

It might be well worth looking at the integrant more closely, though. 
Some statistics on the integrant found in all the sceneries of light 
simulations might show some patterns that suggests optimizing the 
integration method.
This proposal is not very scientific, but, RISC CPUs 
("reduced-instruction-set") where suggested by the statistic that only a 
fraction of the many complex instructions of older CPUs was ever used.

-Peter

-- 
 pab-opto, Freiburg, Germany, www.pab-opto.de



From radiance-general@radiance-online.org  Tue May  6 02:41:47 2003
From: radiance-general@radiance-online.org (John An)
Date: Mon, 05 May 2003 18:41:47 -0700
Subject: [Radiance-general] Rendering with Radiance availability
Message-ID: <7688310.1052185307745.JavaMail.whollycow@mac.com>

Just wanted to give people a heads-up.  I just searched amazon.com for Rendering with Radiance, and found both new and used ones being sold for a very reasonable price, $80.61 + shipping and handling.  I don't know how many copies they have left, from the looks of it, it seems as they still have some in stock.

From radiance-general@radiance-online.org  Tue May  6 10:34:47 2003
From: radiance-general@radiance-online.org (Carsten Bauer)
Date: Tue, 6 May 2003 09:34:47 +0000
Subject: [Radiance-general] Assistance required with Rendering error / random numbers
In-Reply-To: <3EB6812D.40303@pab-opto.de>
References: <000801c31170$9031d4a0$66338351@register> <200305051155.00322.cbauer-@t-online.de> <3EB6812D.40303@pab-opto.de>
Message-ID: <200305060934.47460.cbauer-@t-online.de>

On Monday 05 May 2003 15:20, Peter Apian-Bennewitz wrote:
...
> In specular hightlights and ambient calcs the integrant is stepwise
> defined, non-functional with only very roughly pre-known boundaries. All

Aren't you already talking about SimLife[tm] here? In RealLife[tm] almost 
everything is something smooth and integrable and discretization is 
introduced deliberately to allow a numerical calculation. So your idea of 
looking at the characteristics of the underlying physical processes to find a 
suitable form of discretization sounds straightforward and is the way to go, 
I believe.  

But, oh well, just one more academic playing around with some thoughts which 
won't get realized due to the usual reasons ...

-Carsten



From radiance-general@radiance-online.org  Tue May  6 10:38:33 2003
From: radiance-general@radiance-online.org (Peter Apian-Bennewitz)
Date: Tue, 06 May 2003 11:38:33 +0200
Subject: [Radiance-general] Assistance required with Rendering error /
 random numbers
In-Reply-To: <200305060934.47460.cbauer-@t-online.de>
References: <000801c31170$9031d4a0$66338351@register> <200305051155.00322.cbauer-@t-online.de> <3EB6812D.40303@pab-opto.de> <200305060934.47460.cbauer-@t-online.de>
Message-ID: <3EB78299.70805@pab-opto.de>

Carsten Bauer wrote:

>On Monday 05 May 2003 15:20, Peter Apian-Bennewitz wrote:
>...
>  
>
>>In specular hightlights and ambient calcs the integrant is stepwise
>>defined, non-functional with only very roughly pre-known boundaries. All
>>    
>>
>
>Aren't you already talking about SimLife[tm] here? In RealLife[tm] almost 
>everything is something smooth and integrable and discretization is 
>introduced deliberately to allow a numerical calculation.
>  
>
 From an inside viewpoint  through a window, the radiance distribution 
is very much stepwise in reality, isn't it ?
Your argument holds if diffracting at the window border is taken in and 
only on a very detailed scale.

> So your idea of 
>looking at the characteristics of the underlying physical processes to find a 
>suitable form of discretization sounds straightforward and is the way to go, 
>I believe.  
>
It's not so  much the underlying Physics (they're quite clear), but the 
statistics of typical scenery.

>
>But, oh well, just one more academic playing around with some thoughts which 
>won't get realized due to the usual reasons ...
>
>-Carsten
>
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general@radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
>  
>


-- 
 pab-opto, Freiburg, Germany, www.pab-opto.de



From radiance-general@radiance-online.org  Tue May  6 13:13:11 2003
From: radiance-general@radiance-online.org (Carsten Bauer)
Date: Tue, 6 May 2003 12:13:11 +0000
Subject: [Radiance-general] Assistance required with Rendering error / random numbers
In-Reply-To: <3EB78299.70805@pab-opto.de>
References: <000801c31170$9031d4a0$66338351@register> <200305060934.47460.cbauer-@t-online.de> <3EB78299.70805@pab-opto.de>
Message-ID: <200305061213.11593.cbauer-@t-online.de>

On Tuesday 06 May 2003 09:38, Peter Apian-Bennewitz wrote:

>  From an inside viewpoint  through a window, the radiance distribution
> is very much stepwise in reality, isn't it ?

But what about the finite diameter of the sun? Ok, well, let's stop this...:-)
Those occurrences, where the lighting can be perfectly approximated by - or 
more or less really is -  a stepwise function normally don't cause any 
problem. I solely meant diffuse and smoothly distributed lighting which is 
cut into pieces and randomly thrown into the room by some MonteCarlo Chopper 
...

-cb





From radiance-general@radiance-online.org  Thu May  8 01:20:47 2003
From: radiance-general@radiance-online.org (Digital Architectural Illustration Services)
Date: Thu, 8 May 2003 01:20:47 +0100
Subject: [Radiance-general] COMBINING PHONG SMOOTHING AND UV BITMAP MAPPING AT FACE LEVEL
Message-ID: <003501c314f7$de739420$c5058751@register>

Dear RADIANCE users

Thank you for your assistance with my previous request.

I have been attempting to combine two useful rendering features of
RADIANCE: phong smoothing and UV bitmap mapping at face level.

The techniques at achieving either have been established, but I
have attempted to bring them both together to refine the quality of RADIANCE
renders.  I generally use RADIANCE for architectural illustration work and I
am attempting to derive the most out its material rendering capabilities.

Please visit the following hyperlink on my Internet site to view a gallery
of my rendering attempts and the problem discussed in greater detail.
(Previous problems with my Internet site have been corrected).

www.daiservices.btinternet.co.uk/Radiance/Radiance_v3_5_UNIX/Phong_shading_a
nd_bitmap_textures/Phong_shading_and_bitmap_textures.htm

Assistance from users is most appreciated.

Kind regards

John MacKenzie Graham
Digital Architectural Illustration Services
daiservices@btinternet.com








From radiance-general@radiance-online.org  Thu May  8 09:07:21 2003
From: radiance-general@radiance-online.org (radiance-general@radiance-online.org)
Date: Thu,  8 May 2003 01:07:21 -0700
Subject: [Radiance-general] Re: COMBINING PHONG SMOOTHING AND UV BITMAP MAPPING AT FACE LEVEL
In-Reply-To: <003501c314f7$de739420$c5058751@register>
References: <003501c314f7$de739420$c5058751@register>
Message-ID: <1052381241.3eba10392cd33@webmail.lmi.net>

Hi John,

If you can run Radiance 3.5 on Unix, you will have access to the
new "mesh" primitive, which permits both (u,v) local coordinate
mapping and Phong surface normal interpolation.  You can convert
from Wavefront .OBJ files using the new "obj2mesh" program.  See
the following link for details:

  http://radsite.lbl.gov/radiance/man_html/obj2mesh.1.html

Unfortunately, there is a bug in the official 3.5 release in
the index computation for (u,v) coordinates, and you will need
to download and compile the most recent version of the source 
code from radiance-online to get this to work:

  http://www.radiance-online.org/software/

It does not compile on Windows currently, so if you require
a working Windows version, you'll have some time to wait...

-Greg

Quoting Digital Architectural Illustration Services 
<Daiservices@btinternet.com>:

> Dear RADIANCE users
> 
> Thank you for your assistance with my previous request.
> 
> I have been attempting to combine two useful rendering features of
> RADIANCE: phong smoothing and UV bitmap mapping at face level.
> 
> The techniques at achieving either have been established, but I
> have attempted to bring them both together to refine the quality of RADIANCE
> renders.  I generally use RADIANCE for architectural illustration work and I
> am attempting to derive the most out its material rendering capabilities.
> 
> Please visit the following hyperlink on my Internet site to view a gallery
> of my rendering attempts and the problem discussed in greater detail.
> (Previous problems with my Internet site have been corrected).
> 
> www.daiservices.btinternet.co.uk/Radiance/Radiance_v3_5_UNIX/Phong_shading_a
> nd_bitmap_textures/Phong_shading_and_bitmap_textures.htm
> 
> Assistance from users is most appreciated.
> 
> Kind regards
> 
> John MacKenzie Graham
> Digital Architectural Illustration Services

From radiance-general@radiance-online.org  Thu May  8 19:46:21 2003
From: radiance-general@radiance-online.org (Digital Architectural Illustration Services)
Date: Thu, 8 May 2003 19:46:21 +0100
Subject: [Radiance-general] COMBINING PHONG SMOOTHING AND UV BITMAP MAPPING AT FACE LEVEL
Message-ID: <004301c31592$48f91dc0$3e7b8751@register>

Dear Greg

Thank you for your assistance with my request concerning smoothing and UV
bitmap mapping on meshes in RADIANCE renders.

I have just updated my web page again with a new render and further
queries about using OBJ2MESH.  Please can RADIANCE users visit the web page
(below) to view the discussion and view the new image update.

www.daiservices.btinternet.co.uk/Radiance/Radiance_v3_5_UNIX/Phong_shading_a
nd_bitmap_textures/Phong_shading_and_bitmap_textures.htm

Kind regards

John MacKenzie Graham
Digital Architectural Illustration Services
daiservices@btinternet.com




From radiance-general@radiance-online.org  Fri May  9 08:42:48 2003
From: radiance-general@radiance-online.org (Andrew Bettison)
Date: Fri, 09 May 2003 17:12:48 +0930
Subject: [Radiance-general] Infrared outdoor scene simulation
Message-ID: <3EBB5BF8.1090307@acres.com.au>

       ( PLEASE DO NOT QUOTE MY EMAIL ADDRESS IN THE CLEAR
         AS I DO NOT WANT SPAMMERS TO HARVEST IT FROM THE
         MAILING-LIST ARCHIVE WEB PAGES.  Thank you. )

I am currently working on a project that requires high-fidelity,
non-real-time, multi-spectral infrared simulation of large-scale outdoor
scenes.  The horizon may be up to 50 km away from the focal point, and
objects of interest may be anywhere from dozens of metres to dozens of
kilometres distant.

I surveyed the available open-source ray tracers, and RADIANCE is the only
suitable candidate I could find.  I have read and understood most of the
RADIANCE research papers listed on the web site, gone over the rpict(1) man
page in detail, and have skimmed through all the archived mailing lists.  I
have not yet rendered anything nor spent any time reading source code.

I will need to make some modifications to RADIANCE for this project:

* The first modification is a way to specify very irregular subdivision of
the image plane so that the level of detail of and around objects of
interest can be wound up, while "uninteresting" parts of the scene can be
rendered in much lower detail to speed computation.  Essentially, this would
provide a kind of selective oversampling.

* The second modification is a different atmospheric propagation model that
can accurately compute infrared as well as visible spectral path emissions
and attenuations between any two points under specified environmental
conditions.  The model itself is very extensive, highly validated, and of
military pedigree.  The modification to RADIANCE would take the form of an
atmospheric model "plug-in" scheme for rpict(1) and a gensky(1)-like program
that would use the plug-in to compute a sky radiance map and solar/lunar
position+radiance.

I would be more than happy to contribute the results of this work back to
the RADIANCE project, if there is interest.  I have two questions:

- Is anyone aware of any similar work that has already been done or may be
  ongoing?

- Does anyone have any comments that might assist me to plan this work, or
  make the outcome more useful for the RADIANCE community?  I would like to
  know about any issues such as outstanding performance/accuracy concerns
  with the existing ray propagation model, or limitations to be aware of in
  the rendering of large-scale, outdoor scenes, or any wish-list features
  that may dovetail into this work.

-- 
Andrew Bettison
Acacia Research Pty Limited
< andrewb AT acres DOT com DOT au >


From radiance-general@radiance-online.org  Fri May  9 14:38:53 2003
From: radiance-general@radiance-online.org (Digital Architectural Illustration Services)
Date: Fri, 9 May 2003 14:38:53 +0100
Subject: [Radiance-general] Using OBJ2MESH utility
Message-ID: <009901c31630$c3a02700$47657ad5@register>

This is a multi-part message in MIME format.

------=_NextPart_000_007A_01C31638.B6EEF880
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Dear RADIANCE users

I have recently been experimenting with the new MESH primitive =
introduced in RADIANCE 3.5.  Furthermore, after the latest =
diff_HEAD_rad3R5.patch patch file has modified R3.5, the OBJ2MESH =
utility appears to compile a RTM (RADIANCE triangle mesh) without any =
bugs apparent.

The smooth phong shading possible with the MESH primitive renders =
correctly, but I am unclear how to apply a bitmap as a texture map using =
the compiled UV mapping co-ordinates.

The OBJ2MESH help file explains how the utility reads a Wavefront .OBJ =
file, but it does not suggest that the utility reads and compiles the =
corresponding Wavefront material file .MTL.  The help file implies that =
the .MTL file should contain a RADIANCE material description.

My question is how is it possible to interpret the Wavefront .MTL file =
(i.e., in Wavefront format) into a RADIANCE material definition, =
specifically regarding referencing the bitmap(s) that will be applied to =
the RADIANCE triangle mesh file?

John Graham, DAI Services


------=_NextPart_000_007A_01C31638.B6EEF880
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META content=3D"text/html; charset=3Diso-8859-1" =
http-equiv=3DContent-Type>
<META content=3D"MSHTML 5.00.3314.2100" name=3DGENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY bgColor=3D#ffffff>
<DIV>Dear RADIANCE users</DIV>
<DIV>&nbsp;</DIV>
<DIV>I have recently been experimenting with the new MESH primitive =
introduced=20
in RADIANCE 3.5.&nbsp; Furthermore, after the latest =
diff_HEAD_rad3R5.patch=20
patch file has modified R3.5, the OBJ2MESH utility appears to compile a =
RTM=20
(RADIANCE triangle mesh) without any bugs apparent.</DIV>
<DIV>&nbsp;</DIV>
<DIV>The smooth phong shading possible with the MESH primitive renders=20
correctly, but I am unclear how to apply a bitmap as a texture map using =
the=20
compiled UV mapping co-ordinates.</DIV>
<DIV>&nbsp;</DIV>
<DIV>The OBJ2MESH help file explains how the utility reads a Wavefront =
.OBJ=20
file, but it does not suggest that the utility reads and =
compiles&nbsp;the=20
corresponding Wavefront material file .MTL.&nbsp; The help file implies =
that the=20
.MTL file should contain a RADIANCE material description.</DIV>
<DIV>&nbsp;</DIV>
<DIV>My question is how is it possible to interpret the Wavefront .MTL =
file=20
(i.e., in Wavefront format) into a RADIANCE material definition, =
specifically=20
regarding referencing the bitmap(s) that will be applied to the RADIANCE =

triangle mesh file?</DIV>
<DIV>&nbsp;</DIV>
<DIV>John Graham, DAI Services</DIV>
<DIV>&nbsp;</DIV></BODY></HTML>

------=_NextPart_000_007A_01C31638.B6EEF880--


From radiance-general@radiance-online.org  Fri May  9 17:28:25 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Fri, 09 May 2003 12:28:25 -0400
Subject: [Radiance-general] Some trans oddities
Message-ID: <3EBBD729.9050606@rumblestrip.org>

I am struggling to understand some seemingly inconsistent results I'm 
getting with the trans material.  We are doing some fairly complex 
studies of the daylight penetration in a bunch of art galleries.  These 
galleries receive daylight that is filtered through some diffuse glass, 
and further modulated with sun control shades. It is the material 
properties of these shades that is giving me fits at the moment.  In 
brief, certain shade transmissions give wacky results, while most 
perform as expected.  To reduce the possibility of error, I have 
constructed a simple box room (16'x16'x9'), with a single 3' square 
aperture in the ceiling.  this aperture has two panes of diffuse glass 
(as the real building will), between which I have a polygon that I 
assign various shade materials (using trans) to.  I am then computing 
the horizontal illuminance on the floor with rtrace for each shade.

Results:

Test1 (no shade): EhFloor - 222 Lux
Test2 (10% shade): EhFloor - 23 Lux (10.41% of Test1, 4% off)
Test4 (5% shade): EhFloor - 12 Lux (5.4% of Test1, 8% off)

So far, so good!

(in all cases, the exterior horizontal illuminance is being predicted to 
within 10 Lux, so it's not even worth weighting the interior predictions 
for each individual calculation, IMHO.)

Now, we have two shades in the real building, both of which can be 
deployed at a time.  So next I tried simulating a 10% and a 1% shade 
down, but I "cheated", by assigning the net transmission of the two 
shades to the single polygon (IOW, .10 * .01 = .001).

Test3 (10% + 1% shade as a single polygon): EhFloor = 0.4434 Lux (0.20% 
of test1, or 100% off!)

Thinking that maybe the aforementioned cheat was ill advised, I added a 
second polygon to the model, so I had two physical objects to apply 
shade materials to:

Test8 (10% + 1% shades, as two separate polygons): EhFloor - 0.5509 Lux 
(0.25% of Test1, or 148% off)

So much for that theory.  thinking maybe there's a limit to how much you 
can remove from the daylight before the calculation goes awry (hey, I'm 
grasping at straws at this point), I tried another scenario:

Test7 (10% + 5% shades, as two separate polygons): EhFloor - 0.9656 Lux 
(0.43% of Test1, 13% off)

This is certainly close enough for Government work.  But then:

Test9 (single 01% shade): EhFloor - 1.189 Lux (0.54% of test1, 46% off)

So, the 10% + 5% was accurate, which is cutting out more light together 
than a single 1% shade, but the 1% shade calc was fairly inaccurate.  I 
thought maybe it was the inherent variability in the indirect 
calculation, so I ran test9 again and got exactly the same numbers! 
(I'm using rad with Q=M D=M V=H and -ab 3 for these tests, and it's a 
clear sky at noon at a latitude that pretty much places the sun directly 
over this aperture.)

The reason this entire test came about is because I can't seem to affect 
any further light reduction in my model past a certain point.  I even 
tried making the shades totally opaque, and when I do that my model goes 
completely dark, as I expected, so the model seems to be "tight", and 
have no light leaks.  Everything points to my shade material definitions 
but I can't find anything wrong with them, except for the fact that 
certain ones seem far less acurate than others.  I have been trying to 
use Radiance as a relative performance evaluation tool on this project, 
but for this last part of the project where we are trying to knock out a 
very high percentage of the available light, I seem to be getting 
counter-intuitive results.  Does anyone have any insight as to why these 
results are occurring?

Here are the trans parameters for the various shade materials (all are 
assumed to have a 95% transmitted specularity, as they are view 
preserving shades, even tho it probably does not matter too much because 
they are between two pieces of diffuse glass.):

## 10% shade
void trans shade.10
0
0
7 .4 .4 .4 0 0 .25 .95

## 05% shade
void trans shade.05
0
0
7 .25 .25 .25 0 0 .2 .95

## 01% shade
void trans shade.01
0
0
7 .21 .21 .21 0 0 .047619 .95

## 10%+01% shades in single polygon
void trans shade.001
0
0
7 .201 .201 .201 0 0 .004975 .95

## 10%+5% shades as single polygon
void trans shade.005
0
0
7 .205 .205 .205 0 0 .02439 .95

Any help appreciated.


----

      Rob Guglielmetti

e. rpg@rumblestrip.org
w. www.rumblestrip.org


From radiance-general@radiance-online.org  Fri May  9 22:31:47 2003
From: radiance-general@radiance-online.org (Carsten Bauer)
Date: Fri, 9 May 2003 21:31:47 +0000
Subject: [Radiance-general] Some trans oddities
In-Reply-To: <3EBBD729.9050606@rumblestrip.org>
References: <3EBBD729.9050606@rumblestrip.org>
Message-ID: <200305092130.21593.cbauer-@t-online.de>

On Friday 09 May 2003 16:28, Rob Guglielmetti wrote:

>
> (I'm using rad with Q=M D=M V=H and -ab 3 for these tests, and it's a

Hi Rob,

probably this might have an effect: rad uses some default value for the -av 
parameter, which specifies the constant ambient background, accounting for 
the fact that only a finite number of ambient bounces are followed 
(theoretically, in an absolute sense, an infinite number would be necessary)

For very low values of illumination the error of the -av approximation may of 
course become obvious, the default -av certainly is some value correct for an 
average scene with average conditions, this all is, as you might imagine, a 
bit heuristic anyway. (In the RWR book, there's a short section about how to 
determin the correct -av for a specific scene)

But for your extraordinary conditions try again with setting -av 0 0 0.(BTW: I 
I do that often, the pictures look better...) You'll introduce some error 
then, too, of course, but in your example with only 1% transmittance and sun 
direcly overhead most light will stem from direct contribution, so completely 
neglecting ambient light from the third bounce level onwards should produce 
no significant error anymore.
  
Maybe it helps. Maybe not... :-)

-Carsten


From radiance-general@radiance-online.org  Sat May 10 14:47:20 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Sat, 10 May 2003 09:47:20 -0400
Subject: [Radiance-general] Some trans oddities
In-Reply-To: <200305092130.21593.cbauer-@t-online.de>
Message-ID: <EBF70E9C-82ED-11D7-A2EB-000393824274@rumblestrip.org>

On Friday, May 9, 2003, at 05:31 PM, Carsten Bauer wrote:

> On Friday 09 May 2003 16:28, Rob Guglielmetti wrote:
>
>>
>> (I'm using rad with Q=M D=M V=H and -ab 3 for these tests, and it's a
>
> Hi Rob,
>
> probably this might have an effect: rad uses some default value for 
> the -av
> parameter, which specifies the constant ambient background, accounting 
> for
> the fact that only a finite number of ambient bounces are followed
> (theoretically, in an absolute sense, an infinite number would be 
> necessary)
>
> For very low values of illumination the error of the -av approximation 
> may of
> course become obvious, the default -av certainly is some value correct 
> for an
> average scene with average conditions, this all is, as you might 
> imagine, a
> bit heuristic anyway. (In the RWR book, there's a short section about 
> how to
> determin the correct -av for a specific scene)

Hmmm.  I have not been specifying an -av.  Before you all load your 
guns for the firing squad, her me out.  What I am doing is a series of 
full-day sun study calculations, for several says of the year under 
various building configurations.  It amounts to hundreds of individual 
rtrace calculations.  Determining an -av for each one would be time 
prohibitive.  Besides, since I'm using a lot of ambient bounces, I 
thought I could get away with this.  Early tests bore this out; I 
compared some early tests where I had  not set an -av, to the same 
model run with an -av calculated using compamb, and they were very 
close.  I assumed that by specifying four ambient bounces and waiting, 
that I was still getting valid results.  Sort of a brute-force method.

Perhaps that works -- to a point?  Maybe I'm getting to such low light 
levels that four is not enough.  Maybe it's time to finally implement 
the trick Greg thought of for me in this case, where you use compamb to 
find a valid -av for mid afternoon, and then use the ground ambient 
value from gensky to weight that -av for the other times of the day.  
That way I can still put the whole thing into a script.

Does anyone have any guidelines for parameterization as it relates to 
daylight filtration?  IOW, if I'm trying to measure what will likely be 
.001% of the available exterior daylight, is there some minimum number 
of ambient bounces I need to use, or am I trying to find too small a 
number now?  Like I said, everything has tracked pretty logically so 
far, it's just these certain galleries where we are trying to get down 
to very low light levels that I'm getting these strange results...

> But for your extraordinary conditions try again with setting -av 0 0 
> 0.(BTW: I
> I do that often, the pictures look better...) You'll introduce some 
> error
> then, too, of course, but in your example with only 1% transmittance 
> and sun
> direcly overhead most light will stem from direct contribution, so 
> completely
> neglecting ambient light from the third bounce level onwards should 
> produce
> no significant error anymore.

Well, right now all I'm doing is rtraces, I care more about the numbers 
than the look of the pictures, but that's a useful tip for the future.  
True in your example the -av 0 0 0 will probably not make a difference 
because I'm calculating direct contribution primarily, but in the real 
model I am computing values that are all about the indirect.

Rob Guglielmetti
rpg@rumblestrip.org
www.rumblestrip.org


From radiance-general@radiance-online.org  Sun May 11 10:46:51 2003
From: radiance-general@radiance-online.org (Carsten Bauer)
Date: Sun, 11 May 2003 09:46:51 +0000
Subject: [Radiance-general] Some trans oddities
In-Reply-To: <EBF70E9C-82ED-11D7-A2EB-000393824274@rumblestrip.org>
References: <EBF70E9C-82ED-11D7-A2EB-000393824274@rumblestrip.org>
Message-ID: <200305110946.51198.cbauer-@t-online.de>

Hi Rob,

just for the records, :-), I did not accuse you of severe -av abuse by intent, 
I just wanted to hint at the fact that the rad utility sets -av 
automatically, unless you deliberately interfere ...

-cb


From radiance-general@radiance-online.org  Mon May 12 03:53:14 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Sun, 11 May 2003 22:53:14 -0400
Subject: [Radiance-general] Some trans oddities
In-Reply-To: <200305110946.51198.cbauer-@t-online.de>
Message-ID: <DFDCA178-8424-11D7-8463-000393824274@rumblestrip.org>

On Sunday, May 11, 2003, at 05:46 AM, Carsten Bauer wrote:
> just for the records, :-), I did not accuse you of severe -av abuse by 
> intent,
> I just wanted to hint at the fact that the rad utility sets -av
> automatically, unless you deliberately interfere ...

Actually, I don't think the rad util sets it at all.  If you don't set 
it, it doesn't get used.  that's why my ambient areas are always 
splotchy in my renderings.  Dunno.  I may be wrong.  All I know is I 
have never set the av explicitly yet.  Soon, I guess.

Hey, Brenda & I are going to London & Bath next month!  I can't believe 
it took me 32 years to get to Europe, and now (after next month) I'll 
have been there three times in three years!  I guess we never know what 
our future schedule holds...

I hope all is well.  Thanks for sharing your Radiance insights with me. 
  Are you using it at all nowadays?

Rob Guglielmetti
rpg@rumblestrip.org
www.rumblestrip.org


From radiance-general@radiance-online.org  Mon May 12 05:32:13 2003
From: radiance-general@radiance-online.org (John An)
Date: Sun, 11 May 2003 21:32:13 -0700
Subject: [Radiance-general] expert assistance/guidance please?
Message-ID: <104437.1052713933173.JavaMail.whollycow@mac.com>

Hi all,

Thanks for helping me to get up and running with Radiance up to this point.  I have gotten to the point of being able to produce compelling images, and setting some variables to get results that I THINK I want.  In other words, I think I know enough to be naively dangerous.  Thus, I was wondering if some of the experts out there would be willing to give me some assistance.

I am about to start rendering a series of images for different times of day throught out the year.  Accuracy is tantamount, speed, as long as it is reasonable, is not as important.

So, I have created a generic enclosed office space, assigned materials, etc.  After using the rad to create an .oct file, I gave the rpict command with the following options:

rpict -t 60 -vf 1.vf -x 3000 -y 3000 -ps 1 -pt .04 -dp 4096 -ar 128 -ms 1.5 -ds .01 -dj .6 -dt .05 -dc .75 -dr 3 -sj 1 -st .01 -ab 7 -aa .08 -ad 1024 -as 512 -av 0 0 0 -aw 0 -af 6_21_8s.amb -lr 12 -lw .0005 office.oct > 6_21_8s.pic

It took about 13 hours, but I got an image.

Are there any blatant newbie mistakes I have made that may compromise the accuracy of the rendering?  I decided not to use the illum material, and am relying completely on ambient bounces.  At this point, there are no electric illumination in the space, just purely daylight.  I have uploaded the resulting .pic images to http://homepage.mac.com/jsan/, as well as a .pic image that I used pfilt -x /2 -y /2 on.

I would really appreciate it (and am sure I will learn a lot) if someone would tell me what I may be doing incorrectly.  Individually, I know all the information is in Rendering with Radiance.  However, because of the many variables, I feel a bit unsure as to whether I have gotten the settings  correct or not.

Another point I have been unsure about is the material properties of somewhat complex materials.  I understand that for simple materials (plastics, metals) the reflectance is determined strictly by the r g b values (each value multiplied by a specific coefficient).  However, if I apply a texture to the material, does the texture impact the reflectance value?  For instance, I want a floor with 20% reflectance, so I gave it r g b values of .2 .2 .2.  Does the fact that I applied a carpet texture further reduce the value?  In Lightscape, I know that textures don't impact the characteristic of the material; I have a suspicion that in Radiance, it does.

Sorry for the rambling.

Thanks.


PS
I also wanted to give an update on the availability of the book Rendering with Radiance.  My order with amazon.com was cancelled by the seller (saying that he had run out).  However, just yesterday, I checked amazon.com again, and found a retailer selling new and used copies for around $64.  I'm hoping this one doesn't get cancelled.

From radiance-general@radiance-online.org  Mon May 12 11:25:45 2003
From: radiance-general@radiance-online.org (Carsten Bauer)
Date: Mon, 12 May 2003 10:25:45 +0000
Subject: [Radiance-general] Some trans oddities
In-Reply-To: <DFDCA178-8424-11D7-8463-000393824274@rumblestrip.org>
References: <DFDCA178-8424-11D7-8463-000393824274@rumblestrip.org>
Message-ID: <200305121025.45742.cbauer-@t-online.de>

Hi,

rad doesn't perform any calc to get an adequate av, it just sets a default 
value ( 0.01 for ZONE=INTERIOR and 10 for ZONE=EXTERIOR)

-cb
 


From radiance-general@radiance-online.org  Mon May 12 19:54:34 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Mon, 12 May 2003 11:54:34 -0700
Subject: [Radiance-general] Re: rholo?
In-Reply-To: <796B66D4-7E7F-11D7-9316-0030658EA95E@panix.com>
Message-ID: <2BF7EC1F-84AB-11D7-AB65-000A956D40C8@lmi.net>

It's really difficult to answer these sorts of questions -- you just 
have to try it and see if it works for you.  The rendering time as 
always depends on your settings -- interreflections, etc.  A PowerMac 
G4 with a Radeon 9000 card should work fine.  Be sure to use the X11 
server from Apple, as it supports OpenGL fairly well.  That way, you 
can use the -o ogl driver.

-Greg

> From: Randolph Fritz <randolph@panix.com>
> Date: Sun May 4, 2003  3:26:39  PM US/Pacific
> To: radiance-general@radiance-online.org
> Subject: [Radiance-general] rholo?
> Reply-To: radiance-general@radiance-online.org
>
> Please, would people talk about about their experiences using rholo?  
> With enough preparation, can it be used for real-time walkthroughs as 
> the name suggests?  What type of computer would a I need to do 
> it--would a 400 MHz PowerMac G4 with a Radeon 9000 card do?
>
> How *much* rendering time would it need to cover, say, the level of a 
> detail of a half-inch physical model of a 1200 ft^2 gallery?  (For SI 
> users: 1:20 scale, about 100 m^2)  (How much modelling time would it 
> take me to finish that, I wonder?  Ulp!)
>
> Randolph


From radiance-general@radiance-online.org  Mon May 12 23:40:52 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Mon, 12 May 2003 15:40:52 -0700
Subject: [Radiance-general] Re: Using OBJ2MESH utility
In-Reply-To: <009901c31630$c3a02700$47657ad5@register>
Message-ID: <C96BBEAF-84CA-11D7-9366-000A956D40C8@lmi.net>

Hi John,

Unfortunately, there is no translator routine for Wavefront material 
files, which I only became aware of recently, myself.  It might be 
possible to write such a translator, but the description used by 
Wavefront don't really correspond to physical materials, which makes 
translation problematic.  However, it's not too difficult to use this 
information yourself using some intelligent guesses and simple rules.  
Given the following sample material:

newmtl mat_1
         Ns 32
         d 1
         illum 2
         Kd 1 1 1
         Ks 0 0 0
         Ka 0.25 0.25 0.25
         map_Kd -s 40 14 1 mat_1.bmp

One could convert the file "mat_1.bmp" to a Radiance picture file 
somehow (you'll need Photoshop or GraphicConverter to get it to TIFF 
then use ra_tiff with the -r option foor example).  Your Radiance 
material would look something like so:

void colorpict mat_1_pat
7 red green blue mat_1.pic . frac(Lu*40) frac(Lv*14)
0
0

mat_1_pat plastic mat_1
0
0
5 0.25 0.25 0.25 0 0

-Greg

> From: "Digital Architectural Illustration Services" 
> <Daiservices@btinternet.com>
> Date: Fri May 9, 2003  6:38:53  AM US/Pacific
> To: <radiance-general@radiance-online.org>
> Subject: [Radiance-general] Using OBJ2MESH utility
> Reply-To: radiance-general@radiance-online.org
>
> Dear RADIANCE users
>  
> I have recently been experimenting with the new MESH primitive 
> introduced in RADIANCE 3.5.  Furthermore, after the latest 
> diff_HEAD_rad3R5.patch patch file has modified R3.5, the OBJ2MESH 
> utility appears to compile a RTM (RADIANCE triangle mesh) without any 
> bugs apparent.
>  
> The smooth phong shading possible with the MESH primitive renders 
> correctly, but I am unclear how to apply a bitmap as a texture map 
> using the compiled UV mapping co-ordinates.
>  
> The OBJ2MESH help file explains how the utility reads a Wavefront .OBJ 
> file, but it does not suggest that the utility reads and compiles the 
> corresponding Wavefront material file .MTL.  The help file implies 
> that the .MTL file should contain a RADIANCE material description.
>  
> My question is how is it possible to interpret the Wavefront .MTL file 
> (i.e., in Wavefront format) into a RADIANCE material definition, 
> specifically regarding referencing the bitmap(s) that will be applied 
> to the RADIANCE triangle mesh file?
>  
> John Graham, DAI Services



From radiance-general@radiance-online.org  Tue May 13 00:40:25 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Mon, 12 May 2003 16:40:25 -0700
Subject: [Radiance-general] Some trans oddities
In-Reply-To: <3EBBD729.9050606@rumblestrip.org>
Message-ID: <1B002FCB-84D3-11D7-9366-000A956D40C8@lmi.net>

Hi Rob,

Carsten is right about the ambient (-av) settings, but I don't think 
that's your problem.  My guess is that you're running up against the 
ray weight limit Radiance imploys to trim its calculation, which is 
controlled by the -lw parameter.  You should reset this to -lw 0 in 
your tests, or something very small such as -lw 1e-8 if -lw 0 takes too 
long.

Try it.
-Greg

> From: Rob Guglielmetti <rpg@rumblestrip.org>
> Date: Fri May 9, 2003  9:28:25  AM US/Pacific
> To: radiance-general@radiance-online.org
> Subject: [Radiance-general] Some trans oddities
> Reply-To: radiance-general@radiance-online.org
>
> I am struggling to understand some seemingly inconsistent results I'm 
> getting with the trans material.  We are doing some fairly complex 
> studies of the daylight penetration in a bunch of art galleries.  
> These galleries receive daylight that is filtered through some diffuse 
> glass, and further modulated with sun control shades. It is the 
> material properties of these shades that is giving me fits at the 
> moment.  In brief, certain shade transmissions give wacky results, 
> while most perform as expected.  To reduce the possibility of error, I 
> have constructed a simple box room (16'x16'x9'), with a single 3' 
> square aperture in the ceiling.  this aperture has two panes of 
> diffuse glass (as the real building will), between which I have a 
> polygon that I assign various shade materials (using trans) to.  I am 
> then computing the horizontal illuminance on the floor with rtrace for 
> each shade.
....


From radiance-general@radiance-online.org  Tue May 13 05:41:02 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Mon, 12 May 2003 21:41:02 -0700
Subject: [Radiance-general] Re: expert assistance/guidance please?
In-Reply-To: <104437.1052713933173.JavaMail.whollycow@mac.com>
Message-ID: <19F6DAFE-84FD-11D7-9A98-000A956D40C8@lmi.net>

> From: John An <whollycow@mac.com>
> Date: Sun May 11, 2003  9:32:13  PM US/Pacific
> To: radiance-general@radiance-online.org
> Subject: [Radiance-general] expert assistance/guidance please?
> Reply-To: radiance-general@radiance-online.org
>
> Hi all,
>
> Thanks for helping me to get up and running with Radiance up to this 
> point.  I have gotten to the point of being able to produce compelling 
> images, and setting some variables to get results that I THINK I want. 
>  In other words, I think I know enough to be naively dangerous.  Thus, 
> I was wondering if some of the experts out there would be willing to 
> give me some assistance.
>
> I am about to start rendering a series of images for different times 
> of day throught out the year.  Accuracy is tantamount, speed, as long 
> as it is reasonable, is not as important.
>
> So, I have created a generic enclosed office space, assigned 
> materials, etc.  After using the rad to create an .oct file, I gave 
> the rpict command with the following options:
>
> rpict -t 60 -vf 1.vf -x 3000 -y 3000 -ps 1 -pt .04 -dp 4096 -ar 128 
> -ms 1.5 -ds .01 -dj .6 -dt .05 -dc .75 -dr 3 -sj 1 -st .01 -ab 7 -aa 
> .08 -ad 1024 -as 512 -av 0 0 0 -aw 0 -af 6_21_8s.amb -lr 12 -lw .0005 
> office.oct > 6_21_8s.pic
>
> It took about 13 hours, but I got an image.
>
> Are there any blatant newbie mistakes I have made that may compromise 
> the accuracy of the rendering?  I decided not to use the illum 
> material, and am relying completely on ambient bounces.  At this 
> point, there are no electric illumination in the space, just purely 
> daylight.  I have uploaded the resulting .pic images to 
> http://homepage.mac.com/jsan/, as well as a .pic image that I used 
> pfilt -x /2 -y /2 on.
>
> I would really appreciate it (and am sure I will learn a lot) if 
> someone would tell me what I may be doing incorrectly.  Individually, 
> I know all the information is in Rendering with Radiance.  However, 
> because of the many variables, I feel a bit unsure as to whether I 
> have gotten the settings  correct or not.

You can get more accurate/smoother results by performing an "overture 
calculation" -- running rpict with the same view and parameters and 
saving the ambient with a low-resolution image (-x 64 -y 64 is what I 
usually use) and discarding the result.  This "seeds" the ambient file, 
resulting in a smoother interpolation.  Then, run your final rpict 
command.  Your results look quite nice the way they are.  You could get 
a much faster result by using mkillum to create an output distribution 
for your skylight and reducing some of your rendering parameter values. 
  If this rendering time is acceptable to you, though, it's not really 
necessary.

> Another point I have been unsure about is the material properties of 
> somewhat complex materials.  I understand that for simple materials 
> (plastics, metals) the reflectance is determined strictly by the r g b 
> values (each value multiplied by a specific coefficient).  However, if 
> I apply a texture to the material, does the texture impact the 
> reflectance value?  For instance, I want a floor with 20% reflectance, 
> so I gave it r g b values of .2 .2 .2.  Does the fact that I applied a 
> carpet texture further reduce the value?  In Lightscape, I know that 
> textures don't impact the characteristic of the material; I have a 
> suspicion that in Radiance, it does.

You're correct -- the pattern affects the total material 
reflectance/transmittance.  To avoid this, run pfilt on your picture in 
advance, like so:

pfilt -e 2 orig.pic > normalized.pic

The "normpat" script will do this for you, and blend the edges for 
better tiling as well if that's what you have in mind.

>
> Sorry for the rambling.
>
> Thanks.
>
>
> PS
> I also wanted to give an update on the availability of the book 
> Rendering with Radiance.  My order with amazon.com was cancelled by 
> the seller (saying that he had run out).  However, just yesterday, I 
> checked amazon.com again, and found a retailer selling new and used 
> copies for around $64.  I'm hoping this one doesn't get cancelled.

Rob and Chas and I are looking into print-on-demand publishers as a way 
for folks to order copies.  We have the copyright back from the 
publisher, but need to figure out a way to publish it ourselves at a 
reasonable cost.


From radiance-general@radiance-online.org  Tue May 13 14:44:05 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Tue, 13 May 2003 09:44:05 -0400
Subject: [Radiance-general] Some trans oddities
References: <1B002FCB-84D3-11D7-9366-000A956D40C8@lmi.net>
Message-ID: <3EC0F6A5.3020703@rumblestrip.org>

Greg Ward wrote:
> Hi Rob,
> 
> Carsten is right about the ambient (-av) settings, but I don't think 
> that's your problem.  My guess is that you're running up against the ray 
> weight limit Radiance imploys to trim its calculation, which is 
> controlled by the -lw parameter.  You should reset this to -lw 0 in your 
> tests, or something very small such as -lw 1e-8 if -lw 0 takes too long.
> 
> Try it.

Will do, thanks.  Welcome back!

----

      Rob Guglielmetti

e. rpg@rumblestrip.org
w. www.rumblestrip.org


From radiance-general@radiance-online.org  Tue May 13 15:10:58 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Tue, 13 May 2003 10:10:58 -0400
Subject: [Radiance-general] Re: expert assistance/guidance please?
References: <19F6DAFE-84FD-11D7-9A98-000A956D40C8@lmi.net>
Message-ID: <3EC0FCF2.8070200@rumblestrip.org>

John An <whollycow@mac.com> wrote:

>> So, I have created a generic enclosed office space, assigned 
>> materials, etc.  After using the rad to create an .oct file, I gave 
>> the rpict command with the following options:

... and then Greg Ward wrote:

> You can get more accurate/smoother results by performing an "overture 
> calculation" -- running rpict with the same view and parameters and 
> saving the ambient with a low-resolution image (-x 64 -y 64 is what I 
> usually use) and discarding the result.  

Hi John,

I don't understand (nothing new there).  You use rad to create an octree 
file, but not for controlling all the other aspects of the calculation? 
  This overture calculation Greg mentions above is done automatically 
for you if you use rad to do everything.  Yes, you get finer control of 
the rendering parameters if you call rpict manually, but you can 
override any switch you want in the .rif file. rad makes intelligent 
guesses about what the rpict parameters need to be based on how you 
answer three questions: Quality, Variability and Detail.  And if you add 
the line OPTFILE=parameters.txt to the rif file, all the choices that 
rad made are saved to a text file called parameters.txt so you can view 
them at your convenience.  You can reuse the settings too, like so:
# rtrace @parameters.txt octree...

Even if you want to stick with the manual method, playing with the rad 
settings and observing what rad does to the parameters is instructive.

----

      Rob Guglielmetti

e. rpg@rumblestrip.org
w. www.rumblestrip.org


From radiance-general@radiance-online.org  Tue May 13 17:22:50 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Tue, 13 May 2003 12:22:50 -0400
Subject: [Radiance-general] Trans Oddities Part Deux
Message-ID: <3EC11BDA.6010505@rumblestrip.org>

Well, I tried Greg's suggestion of setting the limit weight to a very 
low number, but all that did is manage to scrounge up a few additional 
lux.  This actually made things look worse, because my problems are with 
the really dense shades (which are already coming up with higher numbers 
than I'd expect).

I have a spreadsheet here with the results of all my tests so far.  If 
anyone's interested in looking at it I'd be happy to share it.  Perhaps 
there's a problem with my interpretation of this data.  I dunno. But the 
tests indicate that whenever I try a 1% shade in any combination, I get 
very odd results from rtrace.  And the whole reason I'm doing this test 
is because we were getting similar odd results on our real model; I was 
trying to simplify things so I could perhaps isolate something that was 
causing these oddities.  So far, no joy.  I shared my trans material 
definitions for all these tests earlier, but if anyone wants them to 
have a look I can send those as well.

My fear is that I'm simply trying to find too small a percentage of the 
available light, and relative comparisons between different shade 
materials will not be valid for this model. (?)  I mean, this test model 
still has two pieces of diffuse glass in it, and the skylight is prety 
small, so already the building form/glazing is removing a ton of light 
from the space.  Then when I start throwing shades in the skylight 
cavity, we're getting down to really tiny fractions of the exterior 
light.  I dunno, I'd love to hear any thoughts.

----

      Rob Guglielmetti

e. rpg@rumblestrip.org
w. www.rumblestrip.org


From radiance-general@radiance-online.org  Tue May 13 17:42:11 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Tue, 13 May 2003 09:42:11 -0700
Subject: [Radiance-general] Trans Oddities Part Deux
In-Reply-To: <3EC11BDA.6010505@rumblestrip.org>
Message-ID: <D7D9DB42-8561-11D7-A352-000A956D40C8@lmi.net>

Hi Rob,

Did you try Carsten's suggestion of setting -av 0 0 0 (i.e., render = 
-av 0 0 0 in the .rif file)?  I should have realized that reducing -lw 
was going to increase your results rather than decreasing them.  
Setting -av to 0 will decrease them, at least slightly.  If you say 
you're seeing similar anomolies in the actual model, though, perhaps 
there is something to it.  Are you using mkillum to compute the output 
of your skylight?  Have you tried that as well?

I think I'd have to see the actual model to be any real help at this 
point.
-Greg

> From: Rob Guglielmetti <rpg@rumblestrip.org>
> Date: Tue May 13, 2003  9:22:50  AM US/Pacific
> To: radiance-general@radiance-online.org
> Subject: [Radiance-general] Trans Oddities Part Deux
> Reply-To: radiance-general@radiance-online.org
>
> Well, I tried Greg's suggestion of setting the limit weight to a very 
> low number, but all that did is manage to scrounge up a few additional 
> lux.  This actually made things look worse, because my problems are 
> with the really dense shades (which are already coming up with higher 
> numbers than I'd expect).
> ...


From radiance-general@radiance-online.org  Tue May 13 18:13:41 2003
From: radiance-general@radiance-online.org (Fitzsimmons, Rob)
Date: Tue, 13 May 2003 10:13:41 -0700
Subject: [Radiance-general] radiance pic output
Message-ID: <7B2F6EA5E35E214882CB9828962BC3CF0224A2D9@corvallis.summit.fiserv.com>

What is the bit depth of the pic(s) that Radiance generates?
I use ra_pict to view them on my Mac - and switch the photoshop setting from
8 bits per channel to 16 bits per channel.
Then when I look at the histogram, values are spaced over the entire range.
Is it producing high dynamic range images?
Am I losing anything when I convert to pict?

thanks
Rob

From radiance-general@radiance-online.org  Tue May 13 18:39:14 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Tue, 13 May 2003 10:39:14 -0700
Subject: [Radiance-general] radiance pic output
In-Reply-To: <7B2F6EA5E35E214882CB9828962BC3CF0224A2D9@corvallis.summit.fiserv.com>
Message-ID: <D02D3546-8569-11D7-A352-000A956D40C8@lmi.net>

Hi Rob,

It is difficult to compare Radiance picture resolution to traditional 
integer images as understood by Photoshop.  Radiance uses a 32-bit RGBE 
floating-point format, which is described in an article I wrote for 
Graphics Gems II, but some information may also be found in the 
following text file distributed with the system:

	ray/doc/notes/picture.format

I recently added an option to the pvalue program to output raw 
16-bit/primary files which may be imported into Photoshop using the 
"raw" type.  Use the following command:

	pvalue -dw image.pic > image.raw

Then, import it in Photoshop as a "raw" 16-bit interleaved image with 
header.  You'll have to tell it the resolution, and ask Photoshop to 
guess the header length, which you can have it preserve in case you 
ever want to get back into Radiance format with a reverse conversion.

-Greg

> From: "Fitzsimmons, Rob" <Rob.Fitzsimmons@Summit.Fiserv.com>
> Date: Tue May 13, 2003  10:13:41  AM US/Pacific
> To: "'radiance-general@radiance-online.org'" 
> <radiance-general@radiance-online.org>
> Subject: [Radiance-general] radiance pic output
> Reply-To: radiance-general@radiance-online.org
>
> What is the bit depth of the pic(s) that Radiance generates?
> I use ra_pict to view them on my Mac - and switch the photoshop 
> setting from
> 8 bits per channel to 16 bits per channel.
> Then when I look at the histogram, values are spaced over the entire 
> range.
> Is it producing high dynamic range images?
> Am I losing anything when I convert to pict?
>
> thanks
> Rob


From radiance-general@radiance-online.org  Tue May 13 18:33:16 2003
From: radiance-general@radiance-online.org (Peter Apian-Bennewitz)
Date: Tue, 13 May 2003 19:33:16 +0200
Subject: [Radiance-general] Infrared outdoor scene simulation
In-Reply-To: <3EBB5BF8.1090307@acres.com.au>
References: <3EBB5BF8.1090307@acres.com.au>
Message-ID: <3EC12C5C.3000105@pab-opto.de>

my two toughts:

Andrew Bettison wrote:

>       ( PLEASE DO NOT QUOTE MY EMAIL ADDRESS IN THE CLEAR
>         AS I DO NOT WANT SPAMMERS TO HARVEST IT FROM THE
>         MAILING-LIST ARCHIVE WEB PAGES.  Thank you. ) 

you may want to switch on 'conceal email adress from subscriber list' 
option in the webinterface.

> ....
> I will need to make some modifications to RADIANCE for this project:
>
> * The first modification is a way to specify very irregular 
> subdivision of
> the image plane so that the level of detail of and around objects of
> interest can be wound up, while "uninteresting" parts of the scene can be
> rendered in much lower detail to speed computation.  Essentially, this 
> would
> provide a kind of selective oversampling.

Either use rtrace as render engine and plug a point/direction generator 
before and an value-to-image assembler behind that, or start from rpict.

> * The second modification is a different atmospheric propagation model 
> that
> can accurately compute infrared as well as visible spectral path 
> emissions
> and attenuations between any two points under specified environmental
> conditions.  The model itself is very extensive, highly validated, and of
> military pedigree.  The modification to RADIANCE would take the form 
> of an
> atmospheric model "plug-in" scheme for rpict(1) and a gensky(1)-like 
> program
> that would use the plug-in to compute a sky radiance map and solar/lunar
> position+radiance. 

Gendaylit (Perez sky model) is the only other sky model (gensky 
substitute) I'm aware of.
Simulating IR viewing through the atmosphere would require 
fixes/changes/add-ons to the mist material.

> ....
> - Does anyone have any comments that might assist me to plan this 
> work, or
>  make the outcome more useful for the RADIANCE community?  I would 
> like to
>  know about any issues such as outstanding performance/accuracy concerns
>  with the existing ray propagation model, or limitations to be aware 
> of in
>  the rendering of large-scale, outdoor scenes, or any wish-list features
>  that may dovetail into this work. 

Since Radiance uses a bounding box for the scene, a very large scene 
probably requires adjusting some default rpict parameters (e.g. -ar).
Otherwise, most internal variables are 'double'.

-Peter

-- 
 pab-opto, Freiburg, Germany, www.pab-opto.de



From radiance-general@radiance-online.org  Tue May 13 22:33:43 2003
From: radiance-general@radiance-online.org (Carsten Bauer)
Date: Tue, 13 May 2003 21:33:43 +0000
Subject: [Radiance-general] Trans Oddities Part Deux
In-Reply-To: <3EC11BDA.6010505@rumblestrip.org>
References: <3EC11BDA.6010505@rumblestrip.org>
Message-ID: <200305132133.43875.cbauer-@t-online.de>

Hi Rob,

before I engage myself in any further speculations: please mail me your 
input-file (the one with the test-model you wrote about), then I'll do sme 
testing here. 

-cb 




From radiance-general@radiance-online.org  Tue May 13 22:03:05 2003
From: radiance-general@radiance-online.org (Randolph Fritz)
Date: Tue, 13 May 2003 14:03:05 -0700
Subject: [Radiance-general] Re: rholo?
In-Reply-To: <2BF7EC1F-84AB-11D7-AB65-000A956D40C8@lmi.net>
Message-ID: <4A73D820-8586-11D7-B6D3-0030658EA95E@panix.com>

On Monday, May 12, 2003, at 11:54  AM, Greg Ward wrote:

> It's really difficult to answer these sorts of questions -- you just 
> have to try it and see if it works for you.  The rendering time as 
> always depends on your settings -- interreflections, etc.  A PowerMac 
> G4 with a Radeon 9000 card should work fine.  Be sure to use the X11 
> server from Apple, as it supports OpenGL fairly well.  That way, you 
> can use the -o ogl driver.

Thanks!

If I do this at all, I will do as much pre-rendering as I can on the 
fastest system I can fine (which isn't my Mac.)  Is there a sample .hdk 
file I can download for testing display?

Randolph


From radiance-general@radiance-online.org  Tue May 13 23:02:25 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Tue, 13 May 2003 18:02:25 -0400
Subject: [Radiance-general] Re: rholo?
References: <4A73D820-8586-11D7-B6D3-0030658EA95E@panix.com>
Message-ID: <3EC16B71.2030807@rumblestrip.org>

Randolph Fritz wrote:

> If I do this at all, I will do as much pre-rendering as I can on the 
> fastest system I can fine (which isn't my Mac.)  Is there a sample .hdk 
> file I can download for testing display?

Have a look in ray/obj/cabin, there are a couple of samples using the 
cabin model.  There are makefiles for a day and night scene, running 
'make nholo' at the command line will start an interactive process of 
the nighttime scene for example.

----

      Rob Guglielmetti

e. rpg@rumblestrip.org
w. www.rumblestrip.org


From radiance-general@radiance-online.org  Wed May 14 02:31:04 2003
From: radiance-general@radiance-online.org (Digital Architectural Illustration Services)
Date: Wed, 14 May 2003 02:31:04 +0100
Subject: [Radiance-general] Using OBJ2MESH utility
Message-ID: <007801c319b8$db0635c0$d8228351@register>

Dear Greg

Thank you for your assistance with my request concerning smoothing using the
OBJ2MESH utility.

After applying your recommended materials, I successfully rendered a mesh
with both UV mapping and smoothing using the OBJ2MESH utility, with good
results.  I considered this issue of importance since there is currently
little discussion on the Internet about using this utility, and also because
phong rendering curvilinear surfaces with textures applied can greatly
enhance the realism and quality of RADIANCE renders, especially in my field
of architectural illustration.

I have just updated my web page again with a final comparison between the
smoothed / texture mapped results of OBJ2MESH against the results of ConRAD
software, which is very similar. The results may be worth looking at, since
the tests seem to have revealed minor distortions in the UV mapping
co-ordinates exported by OBJ2MESH.  A more detailed discussion of these
issues can be found at:

www.daiservices.btinternet.co.uk/Radiance/Radiance_v3_5_UNIX/Phong_shading_a
nd_bitmap_textures/Phong_shading_and_bitmap_textures.htm

I will leave this web page active for the benefit of any RADIANCE users
wanting to learn from the tests I conducted.

Kind regards

John MacKenzie Graham
Digital Architectural Illustration Services
daiservices@btinternet.com



From radiance-general@radiance-online.org  Wed May 14 04:18:51 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Tue, 13 May 2003 20:18:51 -0700
Subject: [Radiance-general] Re: Using OBJ2MESH utility
In-Reply-To: <007801c319b8$db0635c0$d8228351@register>
Message-ID: <C9077417-85BA-11D7-88E1-000A956D40C8@lmi.net>

Hi John,

> From: "Digital Architectural Illustration Services"  
> <Daiservices@btinternet.com>

> I have just updated my web page again with a final comparison between  
> the
> smoothed / texture mapped results of OBJ2MESH against the results of  
> ConRAD
> software, which is very similar. The results may be worth looking at,  
> since
> the tests seem to have revealed minor distortions in the UV mapping
> co-ordinates exported by OBJ2MESH.  A more detailed discussion of these
> issues can be found at:
>
> http://www.daiservices.btinternet.co.uk/Radiance/Radiance_v3_5_UNIX/ 
> Phong_shading_and_bitmap_textures/> Phong_shading_and_bitmap_textures.htm

Very strange -- I have no idea where this distortion is coming from.  I  
conducted a little test of my own to see if something was wrong with  
the mesh rendering code, but I got perfectly straight lines when I  
mapped a grid picture onto a similar cylinder.  If you e-mail me your  
.OBJ file <gward@lmi.net>, I'll see if I can figure out what's going  
on.  What is the ConRAD program?  I haven't heard of that one.

-Greg


From radiance-general@radiance-online.org  Wed May 14 11:46:31 2003
From: radiance-general@radiance-online.org (alex summerfield)
Date: Wed, 14 May 2003 11:46:31 +0100
Subject: [Radiance-general] Trans Oddities Part Deux
In-Reply-To: <3EC11BDA.6010505@rumblestrip.org>
Message-ID: <BAE7DD16.1AB1%alex@arch.usyd.edu.au>

Hi Rob

> My fear is that I'm simply trying to find too small a percentage of the
> available light, and relative comparisons between different shade
> materials will not be valid for this model. (?)  I mean, this test model
> still has two pieces of diffuse glass in it, and the skylight is prety
> small, so already the building form/glazing is removing a ton of light
> from the space.  Then when I start throwing shades in the skylight
> cavity, we're getting down to really tiny fractions of the exterior
> light.  I dunno, I'd love to hear any thoughts.

If there is some error with the indirect calculation arising from the
settings and very low light levels you may be able to pick this up by
radically scaling up the light coming from the sources, then pfilt down the
results by the same factor.

cheers
alex 

*******************************************************
A. J. Summerfield                 alex@arch.usyd.edu.au
Faculty of Architecture, University of Sydney
*******************************************************
Outside of a dog, a book is man's best friend.
Inside a dog, it's too dark to read.       Groucho Marx
*******************************************************



From radiance-general@radiance-online.org  Wed May 14 14:22:22 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Wed, 14 May 2003 09:22:22 -0400
Subject: [Radiance-general] Trans Oddities Part Deux
References: <BAE7DD16.1AB1%alex@arch.usyd.edu.au>
Message-ID: <3EC2430E.5020805@rumblestrip.org>

alex summerfield wrote:

> If there is some error with the indirect calculation arising from the
> settings and very low light levels you may be able to pick this up by
> radically scaling up the light coming from the sources, then pfilt down the
> results by the same factor.

I'm not sure I follow you here.  But your suggestion to use pfilt 
implies that I'm creating renderings, when in fact I'm not.  I'm only 
using rtrace to computer some hard numbers on this project (and my test 
scene).  Could you expand a little bit on your suggestion though?  I'm 
always looking to learn new tricks ...

----

      Rob Guglielmetti

e. rpg@rumblestrip.org
w. www.rumblestrip.org


From radiance-general@radiance-online.org  Wed May 14 18:21:40 2003
From: radiance-general@radiance-online.org (alex summerfield)
Date: Wed, 14 May 2003 18:21:40 +0100
Subject: [Radiance-general] Trans Oddities Part Deux
In-Reply-To: <3EC2430E.5020805@rumblestrip.org>
Message-ID: <BAE839B3.1AB7%alex@arch.usyd.edu.au>

OK Rob,

I mean if you generate a CIE overcast sky with horizontal diffuse
illuminance of 10,000 lux (to use the example of John Mardaljevic in
Rendering with Radiance, p357) and since Radiance uses luminous efficacy of
179 lumens/watt:

!gensky -ang 45 0 -c -B 55.866

Run your test scene and repeat for for hdi of 100,000 lux

!gensky -ang 45 0 -c -B 558.66

Then it should produce results 10 times higher.
(You can do a similar thing for sunlight with gensky -R setting to set the
horizontal direct illuminance).

Anyway check that this test is running OK with the diffuser that is
'working' - then move onto the problem diffuser.

If it doesn't show the proportional relationship then perhaps some of your
settings at these low lighting levels mean that absolute rounding may be
having an undue effect. At low light levels small absolute errors will
produce large percentage errors in the quantitative results.

As you may be relying on a relatively few measurement points in very low
light levels - i reckon it would be worth doing some small renderings so you
can 'see' what is going on - for instance observing the distance between the
ambient calculation points causing light leakage problems (that appear as
splotches in images) or detecting modelling errors that are not significant
at the higher illuminance levels.

The renderings could be used like an overture calculation - ie reuse the
ambient file to recalculate your illuminance values and compare with
previous results. Again there should be consistency in the results.

hope this helps
cheers
alex

> alex summerfield wrote:
> 
>> If there is some error with the indirect calculation arising from the
>> settings and very low light levels you may be able to pick this up by
>> radically scaling up the light coming from the sources, then pfilt down the
>> results by the same factor.
> 
> I'm not sure I follow you here.  But your suggestion to use pfilt
> implies that I'm creating renderings, when in fact I'm not.  I'm only
> using rtrace to computer some hard numbers on this project (and my test
> scene).  Could you expand a little bit on your suggestion though?  I'm
> always looking to learn new tricks ...
> 
> ----
> 
>     Rob Guglielmetti
> 
> e. rpg@rumblestrip.org
> w. www.rumblestrip.org
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general

*******************************************************
A. J. Summerfield                 alex@arch.usyd.edu.au
Faculty of Architecture, University of Sydney
*******************************************************
Outside of a dog, a book is man's best friend.
Inside a dog, it's too dark to read.       Groucho Marx
*******************************************************



From radiance-general@radiance-online.org  Wed May 14 18:25:32 2003
From: radiance-general@radiance-online.org (Jack de Valpine)
Date: Wed, 14 May 2003 13:25:32 -0400
Subject: [Radiance-general] Trans Oddities Part Deux
References: <3EC11BDA.6010505@rumblestrip.org>
Message-ID: <3EC27C0C.90109@visarc.com>

Hey Rob,

How are you determining the reflectance of your trans materials, 
(measurement or cut sheet)?

-Jack

Rob Guglielmetti wrote:

> Well, I tried Greg's suggestion of setting the limit weight to a very 
> low number, but all that did is manage to scrounge up a few additional 
> lux.  This actually made things look worse, because my problems are 
> with the really dense shades (which are already coming up with higher 
> numbers than I'd expect).
>
> I have a spreadsheet here with the results of all my tests so far.  If 
> anyone's interested in looking at it I'd be happy to share it.  
> Perhaps there's a problem with my interpretation of this data.  I 
> dunno. But the tests indicate that whenever I try a 1% shade in any 
> combination, I get very odd results from rtrace.  And the whole reason 
> I'm doing this test is because we were getting similar odd results on 
> our real model; I was trying to simplify things so I could perhaps 
> isolate something that was causing these oddities.  So far, no joy.  I 
> shared my trans material definitions for all these tests earlier, but 
> if anyone wants them to have a look I can send those as well.
>
> My fear is that I'm simply trying to find too small a percentage of 
> the available light, and relative comparisons between different shade 
> materials will not be valid for this model. (?)  I mean, this test 
> model still has two pieces of diffuse glass in it, and the skylight is 
> prety small, so already the building form/glazing is removing a ton of 
> light from the space.  Then when I start throwing shades in the 
> skylight cavity, we're getting down to really tiny fractions of the 
> exterior light.  I dunno, I'd love to hear any thoughts.
>
> ----
>
>      Rob Guglielmetti
>
> e. rpg@rumblestrip.org
> w. www.rumblestrip.org
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>

-- 
#	John E. de Valpine
#	president
#
#	visarc incorporated
#	http://www.visarc.com
#
#	channeling technology for superior design and construction




From radiance-general@radiance-online.org  Wed May 14 19:04:41 2003
From: radiance-general@radiance-online.org (John An)
Date: Wed, 14 May 2003 11:04:41 -0700
Subject: [Radiance-general] expert assistance/guidance please?
Message-ID: <6926256.1052935481821.JavaMail.whollycow@mac.com>

Let me begin by apologizing for the format of my emails.  I only subscribe to 
the digest of the list, so I don't have the original emails to reply to, so I 
kind of have to haphazardly cut and paste it together.  So, here I go...


Greg Ward wrote:
You can get more accurate/smoother results by performing an "overture 
calculation" -- running rpict with the same view and parameters and 
saving the ambient with a low-resolution image (-x 64 -y 64 is what I 
usually use) and discarding the result.  This "seeds" the ambient file, 
resulting in a smoother interpolation.  Then, run your final rpict 
command.  Your results look quite nice the way they are.  You could get 
a much faster result by using mkillum to create an output distribution 
for your skylight and reducing some of your rendering parameter values. 
  If this rendering time is acceptable to you, though, it's not really 
necessary.



My reply:
Thanks Greg.  I have started using the overture rendering method to create a 
seed .amb file.  It doesn't seem to take too much extra time, as the second, 
full resolution rendering seems to go MUCH faster.

You note that mkillum will speed things up, but I also recall reading in 
Rendering with Radiance that using illum is not as accurate as just letting 
the computer calculate the direct and indirect lighting.  Is the difference 
so negligible that using illum would be ok for accuracy?  I am trying to 
produce renderings for analysis that are as defensible in terms of accuracy 
as possible.



I had written:
> Another point I have been unsure about is the material properties of 
> somewhat complex materials.  I understand that for simple materials 
> (plastics, metals) the reflectance is determined strictly by the r g b 
> values (each value multiplied by a specific coefficient).  However, if 
> I apply a texture to the material, does the texture impact the 
> reflectance value?  For instance, I want a floor with 20% reflectance, 
> so I gave it r g b values of .2 .2 .2.  Does the fact that I applied a 
> carpet texture further reduce the value?  In Lightscape, I know that 
> textures don't impact the characteristic of the material; I have a 
> suspicion that in Radiance, it does.


To which Greg Ward replied:
You're correct -- the pattern affects the total material 
reflectance/transmittance.  To avoid this, run pfilt on your picture in 
advance, like so:

pfilt -e 2 orig.pic > normalized.pic

The "normpat" script will do this for you, and blend the edges for 
better tiling as well if that's what you have in mind.



To which I ask:
I'm not sure I understand how adjusting the exposure of an already processed 
image will correct the reflectance of a material.  Could you help me 
understand this a bit more?



Rob Guglielmetti wrote:
You use rad to create an octree file, but not for controlling all the other 
aspects of the calculation? This overture calculation Greg mentions above is 
done automatically for you if you use rad to do everything.  Yes, you get 
finer control of the rendering parameters if you call rpict manually, but you 
can override any switch you want in the .rif file. rad makes intelligent 
guesses about what the rpict parameters need to be based on how you 
answer three questions: Quality, Variability and Detail.  And if you add 
the line OPTFILE=parameters.txt to the rif file, all the choices that 
rad made are saved to a text file called parameters.txt so you can view 
them at your convenience.  You can reuse the settings too, like so:
# rtrace @parameters.txt octree...

Even if you want to stick with the manual method, playing with the rad 
settings and observing what rad does to the parameters is instructive.



My reply:
I initially used rad to control everything, but I noticed that the -av 
parameter when I chose High for Quality, Variability, and Detail was .01 .01 
.01.  While that's close enough to 0 0 0, I wanted to be absolutely sure that 
the light levels were the result of the calculations, and not some a priori 
assumption.  Thus, the rpict parameters I chose were based on the output of 
my rad file with some slight modifications.  Is there a way to overide some 
of rad's intelligent guesses within the .rif file itself (specifically, the 
ambient value and ambient weight)?



Final point regarding the publishing of Rendering with Radiance:
I'm sure it is a conscious decision not to digitize the entire book into a 
print disabled .pdf, but could some electronic version be an option?


Again, thanks for your help.

From radiance-general@radiance-online.org  Wed May 14 19:28:55 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Wed, 14 May 2003 14:28:55 -0400
Subject: [Radiance-general] Trans Oddities Part Deux
References: <3EC11BDA.6010505@rumblestrip.org> <3EC27C0C.90109@visarc.com>
Message-ID: <3EC28AE7.2010200@rumblestrip.org>

Jack de Valpine wrote:
> Hey Rob,
> 
> How are you determining the reflectance of your trans materials, 
> (measurement or cut sheet)?

Hi Jack,

I measured the glass.  For the shades, I'm estimating the reflectance 
and transmittance.  We're trying to determine how dense the shades need 
to be to achieve a certain light level.  The theory being that once we 
know what they need to be, we can specify that, and then measure actual 
samples to further validate the whole mess.

----

      Rob Guglielmetti

e. rpg@rumblestrip.org
w. www.rumblestrip.org


From radiance-general@radiance-online.org  Wed May 14 19:55:30 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Wed, 14 May 2003 14:55:30 -0400
Subject: [Radiance-general] expert assistance/guidance please?
References: <6926256.1052935481821.JavaMail.whollycow@mac.com>
Message-ID: <3EC29122.5050500@rumblestrip.org>

John An wrote:
> Let me begin by apologizing for the format of my emails.  I only subscribe to 
> the digest of the list, so I don't have the original emails to reply to, so I 
> kind of have to haphazardly cut and paste it together.  So, here I go...

Why not switch over to "real time mode"?  Despite the traffic lately, 
it's usually pretty reasonable, traffic-wise.

> You note that mkillum will speed things up, but I also recall reading in 
> Rendering with Radiance that using illum is not as accurate as just letting 
> the computer calculate the direct and indirect lighting.  Is the difference 
> so negligible that using illum would be ok for accuracy?  I am trying to 
> produce renderings for analysis that are as defensible in terms of accuracy 
> as possible.

Actually, when used properly there is potential for mkillum to be more 
accurate, as I understand it.  Its primary limitation is with specular 
louvers in daylight redirection systems, but Georg Mischler's Raydirect 
product can help with those types of systems.  Presumably so could 
Roland Schregle's photon map plug-in to Radiance. Others on the list can 
explain it better than I.

> I initially used rad to control everything, but I noticed that the -av 
> parameter when I chose High for Quality, Variability, and Detail was .01 .01 
> .01.  While that's close enough to 0 0 0, I wanted to be absolutely sure that 
> the light levels were the result of the calculations, and not some a priori 
> assumption.  Thus, the rpict parameters I chose were based on the output of 
> my rad file with some slight modifications.  Is there a way to overide some 
> of rad's intelligent guesses within the .rif file itself (specifically, the 
> ambient value and ambient weight)?

There sure is.  Simply add a line like this:

render= -av 0 0 0

... to your .rif file.  This adjusted parameter is then appended to the 
end of the @options file I mentioned the other day, overriding what rad 
put in there.

----

      Rob Guglielmetti

e. rpg@rumblestrip.org
w. www.rumblestrip.org


From radiance-general@radiance-online.org  Wed May 14 20:02:12 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Wed, 14 May 2003 15:02:12 -0400
Subject: [Radiance-general] Trans Oddities Part Deux
References: <BAE839B3.1AB7%alex@arch.usyd.edu.au>
Message-ID: <3EC292B4.3070703@rumblestrip.org>

alex summerfield wrote:
> OK Rob,
> 
> I mean if you generate a CIE overcast sky with horizontal diffuse
> illuminance of 10,000 lux <snip>
> 
> Anyway check that this test is running OK with the diffuser that is
> 'working' - then move onto the problem diffuser.

Oh, now I get it.  Thanks for explaining that to me.  I will try that. 
I'm swamped with other things at the moment, so my investigation into 
this has stalled, but I will try your technique soon enough.

> If it doesn't show the proportional relationship then perhaps some of your
> settings at these low lighting levels mean that absolute rounding may be
> having an undue effect. At low light levels small absolute errors will
> produce large percentage errors in the quantitative results.

That was my fear.

> As you may be relying on a relatively few measurement points in very low
> light levels - i reckon it would be worth doing some small renderings so you
> can 'see' what is going on - for instance observing the distance between the
> ambient calculation points causing light leakage problems (that appear as
> splotches in images) or detecting modelling errors that are not significant
> at the higher illuminance levels.

Good point.  They just take forever with all the bouncing and all.  Byt 
maybe it's warranted.

> The renderings could be used like an overture calculation - ie reuse the
> ambient file to recalculate your illuminance values and compare with
> previous results. Again there should be consistency in the results.

Good point (again), though I thought that rtrace didn't really benefit 
from an overture calculation.  Perhaps that's YAM (yet another 
misunderstanding).  Hmmm....

> hope this helps

Yeah, I think it does, thanks!  I appreciate your replies.

----

      Rob Guglielmetti

e. rpg@rumblestrip.org
w. www.rumblestrip.org


From radiance-general@radiance-online.org  Wed May 14 20:12:06 2003
From: radiance-general@radiance-online.org (Jack de Valpine)
Date: Wed, 14 May 2003 15:12:06 -0400
Subject: [Radiance-general] Trans Oddities Part Deux
References: <3EC11BDA.6010505@rumblestrip.org> <3EC27C0C.90109@visarc.com> <3EC28AE7.2010200@rumblestrip.org>
Message-ID: <3EC29506.6050601@visarc.com>

Hey Rob,

Do the shades all have the same reflectance or (Cr, Cg, Cb)?

I think you indicated that the glass is translucent, what is the makeup? 
How are you measuring it?

-Jack

Rob Guglielmetti wrote:

> Jack de Valpine wrote:
>
>> Hey Rob,
>>
>> How are you determining the reflectance of your trans materials, 
>> (measurement or cut sheet)?
>
>
> Hi Jack,
>
> I measured the glass.  For the shades, I'm estimating the reflectance 
> and transmittance.  We're trying to determine how dense the shades 
> need to be to achieve a certain light level.  The theory being that 
> once we know what they need to be, we can specify that, and then 
> measure actual samples to further validate the whole mess.
>
> ----
>
>      Rob Guglielmetti
>
> e. rpg@rumblestrip.org
> w. www.rumblestrip.org
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
> .
>

-- 
#	John E. de Valpine
#	president
#
#	visarc incorporated
#	http://www.visarc.com
#
#	channeling technology for superior design and construction




From radiance-general@radiance-online.org  Wed May 14 21:46:33 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Wed, 14 May 2003 16:46:33 -0400
Subject: [Radiance-general] Trans Oddities Part Deux
References: <3EC11BDA.6010505@rumblestrip.org> <3EC27C0C.90109@visarc.com> <3EC28AE7.2010200@rumblestrip.org> <3EC29506.6050601@visarc.com>
Message-ID: <3EC2AB29.9020301@rumblestrip.org>

Jack de Valpine wrote:
> Hey Rob,
> 
> Do the shades all have the same reflectance or (Cr, Cg, Cb)?

No, and this is one of the things I have been wondering about.  It was 
my understanding that when specifying trans, that transmittance was 
soley determined by the Td and Ts parameters (talking about the "Ehrlich 
assumptions" that Chas has set up in RwR).  But perhaps that's it, the 
net transmission of the trans is calculated *after* the reflectance has 
been taken into account?  I did a test of that while testing all these 
shades, where I had a 5% transmissive shade, and ran it once with the 
reflectance at 20%, and another where the shade was 70% reflective, but 
the results were very similar, so I thought that my original assumption 
was true, that transmission was unaffected by reflectance.  But in 
looking at the data from the second pass of these tests, where Greg 
suggested the -lw bit, the values for the 70% reflective shade are much 
lower than the values for the 20% reflective shade.  Hmmm...

However, the difference in reflectance of my shades is not that great. 
the 10% shade has a 30% grey reflectance, and the 5% and the 1% shades 
are 20% reflective.  I don't see how a 10% change in reflectance could 
affect the calculated values by 100%, which is what's happenning.  Hmmm, 
again.

Still, thinking about it right now, it seems like that might be it.  It 
seems obvious.  Now.  I will test it out right now.  If this is the 
culprit, I owe you a beer.

> I think you indicated that the glass is translucent, what is the makeup? 
> How are you measuring it?

The glass is another story, I won't bore you with the details, I'm 
already way over my bandwidth limit on this list this month, but it was 
extensively measured and validated against a 1/2 full scale physical 
mockup, and inspected by Greg.  I'm confident in my glass material 
definitions, at least.

----

      Rob Guglielmetti

e. rpg@rumblestrip.org
w. www.rumblestrip.org


From radiance-general@radiance-online.org  Wed May 14 22:09:45 2003
From: radiance-general@radiance-online.org (Zack Rogers)
Date: Wed, 14 May 2003 15:09:45 -0600
Subject: [Radiance-general] Re: Trans Oddities Part Deux
Message-ID: <3EC2B099.7080300@archenergy.com>

Hi Rob,

My two cents on the subject.

Have you tried raising -ab?  I typically use -ab 5 when doing rtrace 
calcs - and this just comes from case studies I've done and read, it 
seems to get the calc within a 1% for most cases.

Also, the -av setting, for such a low light level calc seems like it 
could have the impact you are seeing, as has been discussed.  Have you 
run this with a -av 0 0 0 setting yet?

Are the interior illuminances you are reporting an average using a grid 
of points or a single point?

Finally, the average workplane illuminance will only be linear (ie. half 
the Tvis = half the workplane illuminance) to the combined Transmittance 
of the skylight/shade system if the interior reflectance of the system 
is constant.  I only briefly looked at how you defined the shades and 
noticed the reflectance is slightly different (although it doesn't seem 
different enough to give an 100% error).  I also noticed the shades are 
mostly specularly transmissive.  If the skylight is not completely 
diffuse transmittance, then you are getting some sort of sun patch on 
your workplane.  If you are doing an average calc using a grid of 
points, a sun patch could cause the average workplane to seem off, 
although it may be off the same for each of your runs.

Also, perhaps a rendering of the room will reveal any oddities that are 
occuring.  Whenever I get unintuitive results, a rendering will often 
show me whats happening.

Hope this helps.
Zack

-- 
Zack Rogers
Staff Engineer
Architectural Energy Corporation
2540 Frontier Avenue, Suite 201
Boulder, CO 80301 USA

tel (303)444-4149 ext.235
fax (303)444-4304
http://www.archenergy.com



From radiance-general@radiance-online.org  Wed May 14 22:32:48 2003
From: radiance-general@radiance-online.org (Jack de Valpine)
Date: Wed, 14 May 2003 17:32:48 -0400
Subject: [Radiance-general] Trans Oddities Part Deux
References: <3EC11BDA.6010505@rumblestrip.org> <3EC27C0C.90109@visarc.com> <3EC28AE7.2010200@rumblestrip.org> <3EC29506.6050601@visarc.com> <3EC2AB29.9020301@rumblestrip.org>
Message-ID: <3EC2B600.9000705@visarc.com>

Hey Rob,

According to RwR (p. 325), actuallly the one place Rd has impact is on 
Argument 6 of the trans parameters. Based on some reverse calculations 
to figure out what you might have been doing, I also came up with 30% 
diffuse reflectance for the 10% shade and 20% for the 5%, 1%, 0.1% and 
0.5% shades, thus my question. Based on my calculations here is what 
what you get:

10% shade at 30% reflectance:
Rd = 0.3
Rs = 0
Td = 0.005
Ts = 0.095
thus the following trans parameter line
7 0.4 0.4 0.4 0 0 .25 .95

10% shade at 20% reflectance:
Rd = 0.2
Rs = 0
Td = 0.005
Ts = 0.095
thus the following trans parameter line
7 0.3 0.3 0.3 0 0 .33 .95

FYI:
A6 = (Td+Ts)/(Rd+Td+Ts)
A7 = Ts/(Td+Ts)

I hope that I have done all my calcs correctly here. I expect others can 
point out if I am incorrect. I am not sure if this ends up pushing your 
study in the right direction. I will be interested to hear.

Also, I am quite interested in hearing about your methodology and 
experience measuring the glazing materials.

-Jack

Rob Guglielmetti wrote:

> Jack de Valpine wrote:
>
>> Hey Rob,
>>
>> Do the shades all have the same reflectance or (Cr, Cg, Cb)?
>
>
> No, and this is one of the things I have been wondering about.  It was 
> my understanding that when specifying trans, that transmittance was 
> soley determined by the Td and Ts parameters (talking about the 
> "Ehrlich assumptions" that Chas has set up in RwR).  But perhaps 
> that's it, the net transmission of the trans is calculated *after* the 
> reflectance has been taken into account?  I did a test of that while 
> testing all these shades, where I had a 5% transmissive shade, and ran 
> it once with the reflectance at 20%, and another where the shade was 
> 70% reflective, but the results were very similar, so I thought that 
> my original assumption was true, that transmission was unaffected by 
> reflectance.  But in looking at the data from the second pass of these 
> tests, where Greg suggested the -lw bit, the values for the 70% 
> reflective shade are much lower than the values for the 20% reflective 
> shade.  Hmmm...
>
> However, the difference in reflectance of my shades is not that great. 
> the 10% shade has a 30% grey reflectance, and the 5% and the 1% shades 
> are 20% reflective.  I don't see how a 10% change in reflectance could 
> affect the calculated values by 100%, which is what's happenning.  
> Hmmm, again.
>
> Still, thinking about it right now, it seems like that might be it.  
> It seems obvious.  Now.  I will test it out right now.  If this is the 
> culprit, I owe you a beer.
>
>> I think you indicated that the glass is translucent, what is the 
>> makeup? How are you measuring it?
>
>
> The glass is another story, I won't bore you with the details, I'm 
> already way over my bandwidth limit on this list this month, but it 
> was extensively measured and validated against a 1/2 full scale 
> physical mockup, and inspected by Greg.  I'm confident in my glass 
> material definitions, at least.
>
> ----
>
>      Rob Guglielmetti
>
> e. rpg@rumblestrip.org
> w. www.rumblestrip.org
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>

-- 
#	John E. de Valpine
#	president
#
#	visarc incorporated
#	http://www.visarc.com
#
#	channeling technology for superior design and construction




From radiance-general@radiance-online.org  Wed May 14 22:43:23 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Wed, 14 May 2003 17:43:23 -0400
Subject: [Radiance-general] Re: Trans Oddities Part Deux
References: <3EC2B099.7080300@archenergy.com>
Message-ID: <3EC2B87B.5030001@rumblestrip.org>

Hi Zack!


> My two cents on the subject.

Most appreciated.  Thanks to you and all the others who have weighed in. 
  We'll figure this out!  First off, I haven't been able to test 
anything else today; right after I told Jack I would look at the 
relationship of reflectance to all this the phone rang, and a client 
changed my entire afternoon.  You know how it goes.

> Have you tried raising -ab?  I typically use -ab 5 when doing rtrace 
> calcs - and this just comes from case studies I've done and read, it 
> seems to get the calc within a 1% for most cases.

OK, another thing to try.  My tests on the gallery space showed that -ab 
4 was sufficient, but the light levels were higher in those spaces. 
Maybe for these new areas I'm studying, I need to bump it up a notch. 
God, they're going to take forever to run, but it I get the "truth" as a 
result, it'll be worth it.

> Also, the -av setting, for such a low light level calc seems like it 
> could have the impact you are seeing, as has been discussed.  Have you 
> run this with a -av 0 0 0 setting yet?

No, I must try this.

> Are the interior illuminances you are reporting an average using a grid 
> of points or a single point?

Single point, again in the interest of time.  Maybe I can try an average 
for this test model though.

> Finally, the average workplane illuminance will only be linear (ie. half 
> the Tvis = half the workplane illuminance) to the combined Transmittance 
> of the skylight/shade system if the interior reflectance of the system 
> is constant.  I only briefly looked at how you defined the shades and 
> noticed the reflectance is slightly different (although it doesn't seem 
> different enough to give an 100% error).  I also noticed the shades are 
> mostly specularly transmissive.  If the skylight is not completely 
> diffuse transmittance, then you are getting some sort of sun patch on 
> your workplane.  If you are doing an average calc using a grid of 
> points, a sun patch could cause the average workplane to seem off, 
> although it may be off the same for each of your runs.

Yes, see my reply to Jack about that.  It may be part of the cause, but 
as you say the differences in reflectance are not as great as the error. 
  Yes, the shades have a large specular component, but they are 
sandwiched between two very diffuse pieces of glass, so no sun patch.

> Also, perhaps a rendering of the room will reveal any oddities that are 
> occuring.  Whenever I get unintuitive results, a rendering will often 
> show me whats happening.

Yeah, Alex suggests the same thing.  Perhaps...

> Hope this helps.

Yup, thanks.  Hopefully tomorrow I can try all these new ideas you all 
have proffered.  I can tell from these replies that you are really 
looking at my material definitions; I appreciate your time and thoughts, 
everyone!

P.S.  Didn't I see an ArchEnergy rendering in Architectural Record a few 
months ago?  I meant to post something to the list about it.  I can't 
remember the issue or the context, but there was a rendering of that 
Phipps project you have on your website.  Congrats!


----

      Rob Guglielmetti

e. rpg@rumblestrip.org
w. www.rumblestrip.org


From radiance-general@radiance-online.org  Wed May 14 23:13:43 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Wed, 14 May 2003 18:13:43 -0400
Subject: [Radiance-general] Trans Oddities Part Deux
References: <3EC11BDA.6010505@rumblestrip.org> <3EC27C0C.90109@visarc.com> <3EC28AE7.2010200@rumblestrip.org> <3EC29506.6050601@visarc.com> <3EC2AB29.9020301@rumblestrip.org> <3EC2B600.9000705@visarc.com>
Message-ID: <3EC2BF97.6030205@rumblestrip.org>

Jack de Valpine wrote:
> Hey Rob,
> 
> According to RwR (p. 325), actuallly the one place Rd has impact is on 
> Argument 6 of the trans parameters. Based on some reverse calculations 
> to figure out what you might have been doing, I also came up with 30% 
> diffuse reflectance for the 10% shade and 20% for the 5%, 1%, 0.1% and 
> 0.5% shades, thus my question. Based on my calculations here is what 
> what you get:
> 
> 10% shade at 30% reflectance:
> Rd = 0.3
> Rs = 0
> Td = 0.005
> Ts = 0.095
> thus the following trans parameter line
> 7 0.4 0.4 0.4 0 0 .25 .95
> 
> 10% shade at 20% reflectance:
> Rd = 0.2
> Rs = 0
> Td = 0.005
> Ts = 0.095
> thus the following trans parameter line
> 7 0.3 0.3 0.3 0 0 .33 .95

You didn't have to reverse engineer my parameters, just ask!  Here is a 
bit of the materials, as defined in my spreadsheet I created 
specifically to apply Chas' formulae from RwR.  I make assumptions in 
the left column (Cr, Cg, Cb, Rs, Sr, Td, Ts), and the spreadsheet does 
the math to generate A1-A7.

Material Name: 				shade.10
Assumptions						Trans Parameters
Diffuse reflectance, RED		Cr	0.3000	A1	0.400000
Diffuse reflectance, GRN		Cg	0.3000	A2	0.400000
Diffuse reflectance, BLU		Cb	0.3000	A3	0.400000
Reflected Specularity			Rs	0.0000	A4	0.000000
Surface Roughness			Sr	0.0000	A5	0.000000
Diffuse Transmissivity			Td	0.0050	A6	0.250000
Transmitted Specularity			Ts	0.0950	A7	0.950000
Photopic Average refl. (calculated)	Rd	0.3000		
Total transmission		10.00%		
Percent specular		95%		

Material Name: 				shade.05
Assumptions						Trans Parameters
Diffuse reflectance, RED		Cr	0.2000	A1	0.250000
Diffuse reflectance, GRN		Cg	0.2000	A2	0.250000
Diffuse reflectance, BLU		Cb	0.2000	A3	0.250000
Reflected Specularity			Rs	0.0000	A4	0.000000
Surface Roughness			Sr	0.0000	A5	0.000000
Diffuse Transmissivity			Td	0.0025	A6	0.200000
Transmitted Specularity			Ts	0.0475	A7	0.950000
Photopic Average refl. (calculated)	Rd	0.2000
Total transmission		5.00%		
Percent specular		95%		

 > FYI:
 > A6 = (Td+Ts)/(Rd+Td+Ts)
 > A7 = Ts/(Td+Ts)

Well there it is, in black & white.  Rd is in the equation for A6.  It 
makes a difference.  Shoot.  Shoulda looked there in the first place.

> I hope that I have done all my calcs correctly here. I expect others can 
> point out if I am incorrect. I am not sure if this ends up pushing your 
> study in the right direction. I will be interested to hear.

I will test it out tomorrow, for sure.  Methinks that -ab 5, -av 0 0 0 
and all the shades having the same reflectance will generate numbers 
that make a lot more sense.  I hope so, anyway.

> Also, I am quite interested in hearing about your methodology and 
> experience measuring the glazing materials.

Not until you tell me all the parameters you used to make this 
(http://www.visarc.com/visarc/projects/images/bu_ab03.jpg) in fifteen 
minutes!  =8-)

Seriously tho, I'm about to blast outta here for the evening, but 
tomorrow I will try and piece together a cohesive explanation of what we 
did to measure the glass.  Something more detailed than "asked Greg for 
help", that is.

----

      Rob Guglielmetti

e. rpg@rumblestrip.org
w. www.rumblestrip.org


From radiance-general@radiance-online.org  Wed May 14 23:28:56 2003
From: radiance-general@radiance-online.org (Georg Mischler)
Date: Wed, 14 May 2003 18:28:56 -0400 (EDT)
Subject: [Radiance-general] Trans Oddities Part Deux
In-Reply-To: <3EC2BF97.6030205@rumblestrip.org>
Message-ID: <Pine.BSF.4.44.0305141822510.73474-100000@emancholl.pair.com>

Rob Guglielmetti wrote:

>  > FYI:
>  > A6 = (Td+Ts)/(Rd+Td+Ts)
>  > A7 = Ts/(Td+Ts)
>
> Well there it is, in black & white.  Rd is in the equation for A6.  It
> makes a difference.  Shoot.  Shoulda looked there in the first place.


You have consulted this flowchart, right? (30% down the page)

  http://www.schorsch.com/rayfront/manual/transdef.html

That makes it visually obvious how all the input values
depend on each other. Unfortunately, you need to think like a
programmer for the sequence to actually make sense... ;)


-schorsch

-- 
Georg Mischler  --  simulations developer  --  schorsch at schorsch com
+schorsch.com+  --  lighting design tools  --  http://www.schorsch.com/


From radiance-general@radiance-online.org  Thu May 15 01:38:14 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Wed, 14 May 2003 20:38:14 -0400
Subject: [Radiance-general] Trans Oddities Part Deux
In-Reply-To: <Pine.BSF.4.44.0305141822510.73474-100000@emancholl.pair.com>
References: <3EC2BF97.6030205@rumblestrip.org>
Message-ID: <3EC2A936.19629.4160CC@localhost>

On 14 May 2003, at 18:28, Georg Mischler wrote:

> You have consulted this flowchart, right? 

Wrong.  Thanks for that, Georg.  Very informative.  Did you create 
that?  Sheesh, the people on this list are just great.  Can't wait to 
test all this stuff out tomorrow.  

-R

================
Rob Guglielmetti
rpg@rumblestrip.org
www.rumblestrip.org
================

From radiance-general@radiance-online.org  Thu May 15 03:36:20 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Wed, 14 May 2003 19:36:20 -0700
Subject: [Radiance-general] expert assistance/guidance please?
In-Reply-To: <6926256.1052935481821.JavaMail.whollycow@mac.com>
Message-ID: <0311BBC5-867E-11D7-BD01-000A956D40C8@lmi.net>

> From: John An <whollycow@mac.com>
> Date: Wed May 14, 2003  11:04:41  AM US/Pacific

Rob G. did a nice job answering most of your questions, so I'll just 
touch on the ones he missed...

> Greg Ward replied:
> You're correct -- the pattern affects the total material
> reflectance/transmittance.  To avoid this, run pfilt on your picture in
> advance, like so:
>
> pfilt -e 2 orig.pic > normalized.pic
>
> The "normpat" script will do this for you, and blend the edges for
> better tiling as well if that's what you have in mind.
>
> To which I ask:
> I'm not sure I understand how adjusting the exposure of an already 
> processed
> image will correct the reflectance of a material.  Could you help me
> understand this a bit more?

The Radiance colorpict primitive uses the final pixel values after 
exposure adjustment to modify the material color.  Therefore, adjusting 
the picture so that the average is 1 (as pfilt -e 2 will do) avoids 
biasing your average value.

> Final point regarding the publishing of Rendering with Radiance:
> I'm sure it is a conscious decision not to digitize the entire book 
> into a
> print disabled .pdf, but could some electronic version be an option?

That's a good suggestion.  I have the PDF for the book, which Rob 
Guglielmetti assembled from the pieces, and it should be easy enough to 
disable printing on it.  Personally, I think the book is much less 
useful in electronic-only form, but if that's all you can get, it's 
certainly better than nothing.  I'll confer with my coauthors about 
distributing the PDF.  We are looking into print-on-demand publishers, 
and hope to have it available again to book resellers (Amazon, etc.) 
before the Fall.  Until then, we might distribute it to people in 
unprintable form, though that seems really annoying in some respects.

-Greg


From radiance-general@radiance-online.org  Thu May 15 04:57:25 2003
From: radiance-general@radiance-online.org (Randolph Fritz)
Date: Wed, 14 May 2003 20:57:25 -0700
Subject: [Radiance-general] Re: rholo?
In-Reply-To: <3EC16B71.2030807@rumblestrip.org>
Message-ID: <56880710-8689-11D7-A355-0030658EA95E@panix.com>

On Tuesday, May 13, 2003, at 03:02  PM, Rob Guglielmetti wrote:

>
>> If I do this at all, I will do as much pre-rendering as I can on the 
>> fastest system I can fine (which isn't my Mac.)  Is there a sample 
>> .hdk file I can download for testing display?
>
> Have a look in ray/obj/cabin, there are a couple of samples using the 
> cabin model.  There are makefiles for a day and night scene, running 
> 'make nholo' at the command line will start an interactive process of 
> the nighttime scene for example.

I tried it; performance is quite respectable on the fast Pentium 4 in 
the Baker Lighting Lab.  Navigation, however, is difficult enough that 
I think I won't be using it for this project; I don't want to try to 
teach people how to use it under fire.  (I don't think I want to learn 
how for this project, either!)  Maybe next time...

By the way, what is the difference between the glx and ogl drivers?

Randolph


From radiance-general@radiance-online.org  Thu May 15 06:05:19 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Wed, 14 May 2003 22:05:19 -0700
Subject: [Radiance-general] Re: rholo?
In-Reply-To: <56880710-8689-11D7-A355-0030658EA95E@panix.com>
Message-ID: <D30DA718-8692-11D7-BF13-000A956D40C8@lmi.net>

> From: Randolph Fritz <randolph@panix.com>
>
> On Tuesday, May 13, 2003, at 03:02  PM, Rob Guglielmetti wrote:
>
>>
>>> If I do this at all, I will do as much pre-rendering as I can on the 
>>> fastest system I can fine (which isn't my Mac.)  Is there a sample 
>>> .hdk file I can download for testing display?
>>
>> Have a look in ray/obj/cabin, there are a couple of samples using the 
>> cabin model.  There are makefiles for a day and night scene, running 
>> 'make nholo' at the command line will start an interactive process of 
>> the nighttime scene for example.
>
> I tried it; performance is quite respectable on the fast Pentium 4 in 
> the Baker Lighting Lab.  Navigation, however, is difficult enough that 
> I think I won't be using it for this project; I don't want to try to 
> teach people how to use it under fire.  (I don't think I want to learn 
> how for this project, either!)  Maybe next time...

It takes a bit of getting used to, no question.  If you have a fast 
OpenGL implementation, you'll suffer from a bug in the official 3.5 
version that causes rotation to spin wildly, which is fixed on top of 
trunk.  (I thought it was fixed in the 3.5 release, but I missed a zero 
on the delay time I added between refreshes.)  Once you're used to it, 
though, you'll find rview painful by comparison.

>
> By the way, what is the difference between the glx and ogl drivers?

The glx1 driver is an older version of the ogl driver, which doesn't 
render the scene geometry and use it to reduce multidepth sampling 
errors.  (You'll have to read the holodeck paper to know what I'm 
talking about -- I just added it to radsite at 
<http://radsite.lbl.gov/radiance/papers>.)  There's also a "glx" driver 
that doesn't get built by default as it appears to be broken.  It draws 
a Gouraud-shaded triangle mesh instead of the Vornoi regions of the ogl 
and glx1 drivers.

-Greg


From radiance-general@radiance-online.org  Thu May 15 11:43:56 2003
From: radiance-general@radiance-online.org (John Mardaljevic)
Date: Thu, 15 May 2003 11:43:56 +0100 (BST)
Subject: [Radiance-general] Radiance-Users Course: Notice for Expressions of Interest
Message-ID: <E19GGD3-0006a8-00@saturn.dmu.ac.uk>

The IESD are planning to host a Radiance-users course intended for researchers and practitioners. 
It will be led by Dr. John Mardaljevic (author of the Daylight Simulation chapter of the Radiance 
book) and take place in the Queen's Building, De Montfort University, Leicester, UK. The course 
will concentrate on how Radiance is used to solve lighting problems with many examples taken from 
real world projects. Interested parties are requested to indicate their preferences for course 
content, duration and date.

Please copy the form below and reply to jm@dmu.ac.uk with "Radiance-Users Course" 
as the subject if you are interested in attending the course.

Course viability will be determined by the level of interest.

For Content, mark [+] where that topic has a High, Medium or Low interest for you.

Mark [+] next to your preferred Duration and Date (one only).


=START FORM===================================================


Content:
 H   M   L
[ ] [ ] [ ]	Radiance basics
[ ] [ ] [ ]	Key Radiance algorithms (e.g. ambient calculation)
[ ] [ ] [ ]	Daylight modelling
[ ] [ ] [ ]	Scripting

Other content (please suggest)


Duration (leave blank for no preference)

[ ] 	1 day
[ ] 	2 days
[ ] 	3 days


Date in 2003 (leave blank for no preference)
[ ] 	August
[ ] 	September
[ ] 	October
[ ] 	November


Number of persons interested in attending: 


Any other suggestions:


Please give name/affiliation below:



=END FORM======================================================

Regards,

-John Mardaljevic

-----------------------------------------------
Dr. John Mardaljevic                     
Senior Research Fellow
Institute of Energy and Sustainable Development
De Montfort University
Scraptoft
Leicester LE7 9SU, UK
+44 (0) 116 257 7972   
+44 (0) 116 257 7981 (fax)

jm@dmu.ac.uk   
http://www.iesd.dmu.ac.uk/~jm


From radiance-general@radiance-online.org  Thu May 15 12:11:41 2003
From: radiance-general@radiance-online.org (Georg Mischler)
Date: Thu, 15 May 2003 07:11:41 -0400 (EDT)
Subject: [Radiance-general] expert assistance/guidance please?
In-Reply-To: <0311BBC5-867E-11D7-BD01-000A956D40C8@lmi.net>
Message-ID: <Pine.BSF.4.44.0305150606090.20558-100000@emancholl.pair.com>

Greg Ward wrote:

> > Final point regarding the publishing of Rendering with Radiance:
> > I'm sure it is a conscious decision not to digitize the entire book
> > into a
> > print disabled .pdf, but could some electronic version be an option?
>
> That's a good suggestion.  I have the PDF for the book, which Rob
> Guglielmetti assembled from the pieces, and it should be easy enough to
> disable printing on it.


With ghostscript, I can print *any* PDF, whether the author
thought he had protected it from being printed or not. This so
called "print protection" is just a friendly hint within the
file, that the original Acrobat Reader respects, but any other
software will easily ignore.

Of course, that may or may not matter to you. If nobody wants to
get rich off the potential print-on-demand proceeds, then it's
probably irrelevant whether the same thing is also available in
digital form for free. Ordering a demand printed copy will still
be a lot cheaper than printing it at home for most people, let
alone binding (or glueing) the resulting heap of paper together.
But I don't know about the exact situation with the rights, so
you better check that out in detail before deciding anything.


-schorsch

-- 
Georg Mischler  --  simulations developer  --  schorsch at schorsch com
+schorsch.com+  --  lighting design tools  --  http://www.schorsch.com/



From radiance-general@radiance-online.org  Thu May 15 15:38:19 2003
From: radiance-general@radiance-online.org (Jack de Valpine)
Date: Thu, 15 May 2003 10:38:19 -0400
Subject: [Radiance-general] Trans Oddities Part Deux
References: <3EC11BDA.6010505@rumblestrip.org> <3EC27C0C.90109@visarc.com> <3EC28AE7.2010200@rumblestrip.org> <3EC29506.6050601@visarc.com> <3EC2AB29.9020301@rumblestrip.org> <3EC2B600.9000705@visarc.com> <3EC2BF97.6030205@rumblestrip.org>
Message-ID: <3EC3A65B.9060400@visarc.com>

Hey Rob,

Nested below ...

Rob Guglielmetti wrote:

> Jack de Valpine wrote:
>
>> Hey Rob,
>
[snip]

> I will test it out tomorrow, for sure.  Methinks that -ab 5, -av 0 0 0 
> and all the shades having the same reflectance will generate numbers 
> that make a lot more sense.  I hope so, anyway.

I will be interested in hearing how things work out.

>
>> Also, I am quite interested in hearing about your methodology and 
>> experience measuring the glazing materials.
>
>
> Not until you tell me all the parameters you used to make this 
> (http://www.visarc.com/visarc/projects/images/bu_ab03.jpg) in fifteen 
> minutes!  =8-)

Man oh man, you are really going to make me regret the statement ;-> 
That is certainly not a fifteen minute image! Although for that project 
it is definitely faster than some of the others, eg the atrium space 
images really crunch (~500 lights and illums). A 15 minute image is easy 
for exterior scenes under daylight conditions!

>
> Seriously tho, I'm about to blast outta here for the evening, but 
> tomorrow I will try and piece together a cohesive explanation of what 
> we did to measure the glass.  Something more detailed than "asked Greg 
> for help", that is.
>
> ----
>
>      Rob Guglielmetti
>
> e. rpg@rumblestrip.org
> w. www.rumblestrip.org
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>

-- 
#	John E. de Valpine
#	president
#
#	visarc incorporated
#	http://www.visarc.com
#
#	channeling technology for superior design and construction




From radiance-general@radiance-online.org  Thu May 15 15:50:55 2003
From: radiance-general@radiance-online.org (Jack de Valpine)
Date: Thu, 15 May 2003 10:50:55 -0400
Subject: [Radiance-general] Trans Oddities Part Deux
References: <Pine.BSF.4.44.0305141822510.73474-100000@emancholl.pair.com>
Message-ID: <3EC3A94F.7070806@visarc.com>

--------------030709080306080208000709
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

Yes indeed, I should have mentioned this myself! Georg's flowchart is 
immensly helpful for understanding and determining trans parameters. 
Many thanks to Georg!

-Jack

Georg Mischler wrote:

>Rob Guglielmetti wrote:
>
>  
>
>> > FYI:
>> > A6 = (Td+Ts)/(Rd+Td+Ts)
>> > A7 = Ts/(Td+Ts)
>>
>>Well there it is, in black & white.  Rd is in the equation for A6.  It
>>makes a difference.  Shoot.  Shoulda looked there in the first place.
>>    
>>
>
>
>You have consulted this flowchart, right? (30% down the page)
>
>  http://www.schorsch.com/rayfront/manual/transdef.html
>
>That makes it visually obvious how all the input values
>depend on each other. Unfortunately, you need to think like a
>programmer for the sequence to actually make sense... ;)
>
>
>-schorsch
>
>  
>

-- 
#	John E. de Valpine
#	president
#
#	visarc incorporated
#	http://www.visarc.com
#
#	channeling technology for superior design and construction



--------------030709080306080208000709
Content-Type: text/html; charset=us-ascii
Content-Transfer-Encoding: 7bit

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=ISO-8859-1">
  <title></title>
</head>
<body>
Yes indeed, I should have mentioned this myself! Georg's flowchart is immensly
helpful for understanding and determining trans parameters. Many thanks to
Georg!<br>
<br>
-Jack<br>
<br>
Georg Mischler wrote:<br>
<blockquote type="cite"
 cite="midPine.BSF.4.44.0305141822510.73474-100000@emancholl.pair.com">
  <pre wrap="">Rob Guglielmetti wrote:

  </pre>
  <blockquote type="cite">
    <pre wrap=""> &gt; FYI:
 &gt; A6 = (Td+Ts)/(Rd+Td+Ts)
 &gt; A7 = Ts/(Td+Ts)

Well there it is, in black &amp; white.  Rd is in the equation for A6.  It
makes a difference.  Shoot.  Shoulda looked there in the first place.
    </pre>
  </blockquote>
  <pre wrap=""><!---->

You have consulted this flowchart, right? (30% down the page)

  <a class="moz-txt-link-freetext" href="http://www.schorsch.com/rayfront/manual/transdef.html">http://www.schorsch.com/rayfront/manual/transdef.html</a>

That makes it visually obvious how all the input values
depend on each other. Unfortunately, you need to think like a
programmer for the sequence to actually make sense... ;)


-schorsch

  </pre>
</blockquote>
<br>
<pre class="moz-signature" cols="$mailwrapcol">-- 
#	John E. de Valpine
#	president
#
#	visarc incorporated
#	<a class="moz-txt-link-freetext" href="http://www.visarc.com">http://www.visarc.com</a>
#
#	channeling technology for superior design and construction</pre>
<br>
</body>
</html>

--------------030709080306080208000709--


From radiance-general@radiance-online.org  Thu May 15 16:51:15 2003
From: radiance-general@radiance-online.org (Roland Schregle)
Date: Thu, 15 May 2003 17:51:15 +0200
Subject: [Radiance-general] expert assistance/guidance please?
References: <6926256.1052935481821.JavaMail.whollycow@mac.com> <3EC29122.5050500@rumblestrip.org>
Message-ID: <3EC3B773.81BA176E@gmx.net>

Rob Guglielmetti wrote:

> Why not switch over to "real time mode"?  Despite the traffic lately,
> it's usually pretty reasonable, traffic-wise.
                                  ^^^^^^^^^^^^

You been watching "The Apartment", Rob? :^)

-- 
END OF LINE. (MCP)

From radiance-general@radiance-online.org  Thu May 15 16:34:58 2003
From: radiance-general@radiance-online.org (Digital Architectural Illustration Services)
Date: Thu, 15 May 2003 16:34:58 +0100
Subject: [Radiance-general] Using OBJ2MESH utility
References: <C9077417-85BA-11D7-88E1-000A956D40C8@lmi.net>
Message-ID: <00af01c31afb$06cb3500$08c08351@register>

Dear Greg

Thank you for your feedback concerning smoothing and UV texture co-ordinates
using the OBJ2MESH utility.

Concerning the UV co-ordinate mapping distortion on one of my test renders.
After investigating the error further, I determined that the cause of this
minor fault was due to an independent utility that converted the CAD model
to an .OBJ file and was not due to OBJ2MESH or RADIANCE.

On my web page, I have added a technically correct render using a CAD model
correctly exported by a file conversion utility in the .OBJ format,
processed by OBJ2MESH and rendered by RADIANCE, concluding my tests
investigating RADIANCE renders combining smooth phong rendering with UV
bitmap mapping at a face level.

For the final test render, please scroll to the bottom of the page:

www.daiservices.btinternet.co.uk/Radiance/Radiance_v3_5_UNIX/Phong_shading_a
nd_bitmap_textures/Phong_shading_and_bitmap_textures.htm

ConRAD software was created by OpenEntry  www.openentry.dk and serves to
convert a 3DS file to a number of RADIANCE files; in fact all files
necessary to create a high quality RADIANCE render.  It works only on the PC
under Windows 9x and later (I believe) which is why RADIANCE UNIX users may
have not heard about it.  It is a comprehensive and effective program which
also allows access to virtually all aspects of RADIANCE and I generally
regard it as a RADIANCE graphic user interface.  Hence my preference for the
3DS file format.

Since RADIANCE v3.5 for UNIX compiles and functions perfectly with
Cygwin UNIX for the PC, it is possible to run RADIANCE UNIX in a Cygwin UNIX
window on a MS Windows desktop, simultaneously providing access to RADIANCE
UNIX and RADIANCE tools for the PC such as ConRAD - a highly functional and
productive combination.

Kind regards

John Graham



From radiance-general@radiance-online.org  Thu May 15 21:59:24 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Thu, 15 May 2003 16:59:24 -0400
Subject: [Radiance-general] Progress Report
Message-ID: <3EC3FFAC.2040106@rumblestrip.org>

Well, I don't know that I'm as close as I'd like to be, but I am getting 
better results now, even with the denser shades.

In short, what I did was roll all the suggestions into a new set of 
simulations.  Specifically, I added:

render= -lw 1e-8 -av 0 0 0

... to my rif file, increased the ambient bounces to five, and 
normalized all my shade relfectances (20%).  Here's what I got:

Test20 (no shade)		82,356	249.82			
Test21 (10% shade)		82,350	30.89	10.00%	12.36%	24%
Test22 (05% shade)		82,343	16.32	5.00%	6.53%	31%
Test23 (01% shade)		82,346	1.38	1.00%	0.55%	-45%
Test24 (10% + 05% shades)	82,338	0.80	0.50%	0.32%	-36%
Test25 (10% + 01% shades)	82,354	0.35	0.10%	0.14%	40%
Test26 (01% + 01% shades)	82,348	0.01	0.01%	0.00%	-60%

Data is as follows:
Column 1 - Exterior horizontal diffuse illuminance (Lux)
Column 2 - Interior horizontal diffuse illuminance (Lux)
Column 3 - "expected" light reduction from test 20 (no shade)
Column 4 - actual light reduction from test 20 (no shade)
Column 5 - "error".  I'm certainly no statistician though, and maybe 
this value is being unfairly computed (COL4/COL3)-1.  (?)

As you can see, there is still some wild fluctuation, but not nearly as 
bad as the original tests.  I am confused as to why the accuracy of the 
10% and 05% shades has suffered; in earlier tests they were very close, 
04% and 08% "accurate" respectively.

OK, so then I tried Alex's trick of increasing the exterior illumination 
  by a factor of ten, in hopes that the higher light levels that would 
now result in the interior space would be more accurately evaluated:

(HDI x 10)
Test20 (no shade)		832,317	2,528.67			
Test21 (10% shade)		832,319	361.96	10.00%	14.31%	43%
Test22 (05% shade)		832,322	222.05	5.00%	8.78%	76%
Test23 (01% shade)		832,315	23.48	1.00%	0.93%	-7%
Test24 (10% + 05% shades)	832,297	17.45	0.50%	0.69%	38%
Test25 (10% + 01% shades)	832,314	2.98	0.10%	0.12%	18%
Test26 (01% + 01% shades)	832,304	0.37	0.01%	0.01%	46%

~8-/

Now my 05% shade is the least accurate of the lot!  I double checked the 
paramaters, and even re-ran the calc using five points in an array 
around the intitial calc point, but it averages to within .5 lux of this 
calc.  I did a rendering of the 05% shade too, everything looks OK.

Hmmm. Even at these higher light levels, the 01% + 01% shade seems 
suspect.  This combo had the greatest "swing" from the first simulation 
to the second (60% under-prediction to a 46% over prediction).

My co-worker & I have been thinking that maybe we should test the model 
with more transmissive shades, and simply apply a factor to those 
illuminance values to figure out what the shades should be, for this 
last gallery.  It feels a lot like giving up, but I'm not sure I want to 
trust these numbers based on this test.

Either way we go, this has been very educational and I thank everyone 
who contributed to this thread.

-- OK, seconds before I was to press send, Carsten Bauer sent me an 
email.  He's been doing some testing of his own with this model, with 
much better results.  It seems that if we set -lw to zero, and not a 
really-really low number, you get results that match the math.  The 
other big difference between his process and mine is that he's getting 
his values from a rendering (rpict) and I'm just rtracing values.  So 
perhaps there's the missing link(s).

Maybe I won't give up just yet...  Seems like there's just no way to 
know all there is to know about Radiance!

To be continued (?)

----

      Rob Guglielmetti

e. rpg@rumblestrip.org
w. www.rumblestrip.org


From radiance-general@radiance-online.org  Thu May 15 22:47:37 2003
From: radiance-general@radiance-online.org (Fitzsimmons, Rob)
Date: Thu, 15 May 2003 14:47:37 -0700
Subject: [Radiance-general] Progress Report
Message-ID: <7B2F6EA5E35E214882CB9828962BC3CF0224A2E8@corvallis.summit.fiserv.com>

Rob,
How 'bout posting some of your samples? (images)
I'm interested
Or are you only working with numbers? 

the other Rob (Fitz)

-----Original Message-----
From: Rob Guglielmetti
To: radiance-general@radiance-online.org
Sent: 5/15/2003 2:02 PM
Subject: [Radiance-general] Progress Report

Well, I don't know that I'm as close as I'd like to be, but I am getting

better results now, even with the denser shades.

In short, what I did was roll all the suggestions into a new set of 
simulations.  Specifically, I added:

render= -lw 1e-8 -av 0 0 0

... to my rif file, increased the ambient bounces to five, and 
normalized all my shade relfectances (20%).  Here's what I got:




From radiance-general@radiance-online.org  Thu May 15 22:59:31 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Thu, 15 May 2003 17:59:31 -0400
Subject: [Radiance-general] Progress Report
References: <7B2F6EA5E35E214882CB9828962BC3CF0224A2E8@corvallis.summit.fiserv.com>
Message-ID: <3EC40DC3.4030504@rumblestrip.org>

Fitzsimmons, Rob wrote:
> Rob,
> How 'bout posting some of your samples? (images)
> I'm interested
> Or are you only working with numbers? 
> 
> the other Rob (Fitz)

Hi Other Rob,

I don't like to post images to the list because some folks don't 
necessarily want the darned things.  I'd be happy to send you an image 
off-list, there's only one at the moment, because yeah I'm primarily 
working with numbers.  It's just a gray room, with a diffuse skylight, 
very boring looking.  But I'll send it to ya.

I'm testing out Carsten & Georg's suggestions overnight here (-lw 0 and 
do a fisheye rendering to seed the ambient file *before* running 
rtrace), I'll post results tomorrow.  Carsten got some very agreeable 
results just extracting values from a .pic file, when -lw 0 was used.

----

      Rob Guglielmetti

e. rpg@rumblestrip.org
w. www.rumblestrip.org


From radiance-general@radiance-online.org  Fri May 16 00:39:26 2003
From: radiance-general@radiance-online.org (alex summerfield)
Date: Fri, 16 May 2003 00:39:26 +0100
Subject: [Radiance-general] Progress Report
In-Reply-To: <3EC3FFAC.2040106@rumblestrip.org>
Message-ID: <BAE9E3BE.1ADD%alex@arch.usyd.edu.au>



> -- OK, seconds before I was to press send, Carsten Bauer sent me an
> email.  He's been doing some testing of his own with this model, with
> much better results.  It seems that if we set -lw to zero, and not a
> really-really low number, you get results that match the math.  The
> other big difference between his process and mine is that he's getting
> his values from a rendering (rpict) and I'm just rtracing values.  So
> perhaps there's the missing link(s).

Hi Rob 

Great - Carsten's results agrees with the fact that the swings you were
getting from that amplified illuminance suggestion pointed to something in
the settings being at least part of the problem.

The role of rpict makes sense too - with renderings every pixel (if -ps 1)
is equivalent to an rtrace data point - (eg a 100x100 image rather than
relying on 10x10 =100 pts of measurement points) all helping to generate a
more 'well behaved' ambient file to describe the indirect lighting
distribution. 

That's why (in answer to an earlier email) reusing the ambient file
generated from an 'overture' image will still benefit your quantitative
simulation (rather than starting from scratch with a relatively few
measurement points).

But usually not done because ab setting is normally different between
renderings and quantitative simulation.

cheers
alex

*******************************************************
A. J. Summerfield                 alex@arch.usyd.edu.au
Faculty of Architecture, University of Sydney
*******************************************************
Outside of a dog, a book is man's best friend.
Inside a dog, it's too dark to read.       Groucho Marx
*******************************************************



From radiance-general@radiance-online.org  Fri May 16 13:50:03 2003
From: radiance-general@radiance-online.org (atelier iebele abel - toren.com)
Date: Fri, 16 May 2003 14:50:03 +0200
Subject: [Radiance-general] texture mapping
References: <BAE9E3BE.1ADD%alex@arch.usyd.edu.au>
Message-ID: <3EC4DE7B.B9D5AA67@iebele.nl>

Hi community,

I have a question regarding texture mapping.
For rendering leaves of a tree a I have a scanned photograph that I have to
map on the geometry of a leave.
Each leave is a created (in the software xfrog) as a triangle mesh that has
for each vertex  x,y,z coordinates, a normal vector and u and v coordinates.

Having this information, how do I use colorpict to map the photo exactly right
on each triangle ?
Any hints are helpfull.

Iebele

For those who like to see the project involved (work in progress, quicktime
vr's), look at
http://www.toren.com/maris




From radiance-general@radiance-online.org  Fri May 16 17:39:29 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Fri, 16 May 2003 12:39:29 -0400
Subject: [Radiance-general] More results
Message-ID: <3EC51441.60906@rumblestrip.org>

Howdy.

This is hopefully the last of it here, just thought I'd share these 
results with everyone.  Seems that the -lw 0 trick helps a lot on its 
own, and adding the overture calc gets things really close to Real 
Life[tm].

Parameters (set 4):
+++++++++++++++++++
-dp 512
-ar 57
-ms 4.2
-ds .3
-dt .1
-dc .5
-dr 1
-sj .7
-st .1
-ab 5
-aa .15
-ad 768
-as 196
-av 0 0 0
-lr 6
-lw 0

Again, the data is as follows:
Col 1 - Test# (description)
Col 2 - Exterior horizontal illuminance (in lux)
Col 3 - Interior horizontal illuminance (in lux)
Col 4 - "Expected" light reduction
Col 5 - Actual light reduction
Col 6 - "error" (more on this later)

Parameter Set 4
(rtrace alone, 5 points averaged)	
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++		
Test20 (no shade)		82,343	249.70			
Test21 (10% shade)		82,348	30.46	10.00%	12.20%	22%
Test22 (05% shade)		82,361	16.33	5.00%	6.54%	31%
Test23 (01% shade)		82,358	1.53	1.00%	0.61%	-39%
Test24 (10% + 05% shades)	82,354	0.80	0.50%	0.32%	-36%
Test25 (10% + 01% shades)	82,351	0.35	0.10%	0.14%	42%
Test26 (01% + 01% shades)	82,361	0.02	0.01%	0.01%	-38%


Parameter Set 4
(rtrace after overture calc & 1 fisheye rendering, 5 pts. averaged)	
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Test20 (no shade)		82,359	250.67			
Test21 (10% shade)		82,352	29.91	10.00%	11.93%	19%
Test22 (05% shade)		82,358	15.36	5.00%	6.13%	23%
Test23 (01% shade)		82,357	2.98	1.00%	1.19%	19%
Test24 (10% + 05% shades)	82,357	0.90	0.50%	0.36%	-28%
Test25 (10% + 01% shades)	82,355	0.26	0.10%	0.10%	3%
Test26 (01% + 01% shades)	82,358	0.04	0.01%	0.02%	60%

As you can see, the results are more favorable now.  It is still a bit 
distressing that the 1% + 1% shades show a 60% error, but when you look 
at the actual values, it's pretty ridiculous, because the difference 
between 0 error and 60% "error" is something like .015 lux!  Obviously, 
there's something wrong with my computation of "error".  Maybe 
logarithmic scaling needs to be applied?  Like I said before, I'm not a 
statistician.  Anyone handy with GNUplot? =8-) When you look at the 
expected reduction vs. the actual, it's always within a percentage point 
or two.  Very impressive!  Once again, Radiance has proven its mettle.

Where does this leave me?  Dunno.  I have been doing these full-day 
calcs, one per hour, for a variety of sky conditions and seasons.  They 
took a long time, when I was doing -ab 4 and no renderings (this was in 
a space with more direct component and higher shade transmission). 
Looks like to get good results in these last galleries, I need to do the 
rendering step for better seeding of the ambient file.  No free 
lunches...  In addition, I would have to do several fisheyes, because 
the real model is far more complex than the simple box room I used for 
these tests.  One view just won't cover the entire space.  We may be 
left to simply analyze the worst times of day/year and make judgements 
based on that.  But then our lux-hour calculation will be more of a 
guess, I guess.

The big lesson learned is that -av and -lw can bite you in the behind 
when you're dealing with tiny fractions of light, so, Photon Wranglers 
beware...

Good learning experience though. I hope this was interesting for some of 
you.  I learned a lot, and I thank everyone who jumped into this mess 
with me.

----

      Rob Guglielmetti

e. rpg@rumblestrip.org
w. www.rumblestrip.org


From radiance-general@radiance-online.org  Fri May 16 19:56:46 2003
From: radiance-general@radiance-online.org (Zack Rogers)
Date: Fri, 16 May 2003 12:56:46 -0600
Subject: [Radiance-general] RE: More Results
Message-ID: <3EC5346E.5000500@archenergy.com>

Hi Rob,

This has been a very interesting thread...many good things to know, and 
once again Radiance shines on.  I was going to comment that your dealing 
with a fraction of a lux difference now, there must be some sensitive 
objects inside your space...is this an art gallery?  And your right, 
with the logarithmic behaviour of the eye the difference becomes even 
more insignificant.

That was my image in ArchRecord a couple months ago!  I'm excited 
someone noticed.  I used the same CAD model to create the CFD image that 
was also in the article.  It was a very interesting project, the first 
project I've worked on where the plants were the most important building 
occupant to provide light for.  With that project and another musuem 
project, I used optics 5 a lot to look at the spectral qualities of 
glass.  Optics 5, with its new Radiance output functionality, is great! 
 One thing we learned, and anyone correct me if I'm mistaken, is that 
the adhesive layer in laminates almost completely eliminates 
ultra-violet from the spectrum.  Ultra-violet, or more accurately the 
Krochmann factor (which is loosely related to UV and also determined by 
optics 5), is the main component of radiation that causes degradation of 
materials (artwork, furniture).  I may be completely off base by now, 
but if you are concerned about obtaining such low light levels to 
minimize the footcandle-hours that fall on artwork or what not, I would 
look at the spectral qualities of the light you are letting in as well 
as they may be more effective at preventing degradation than low light 
levels.

Zack
PS.  Your blog is great!  I had planned on doing something similar 
(although i typically rant and rave about politics) on my website and 
wasn't aware there was a name for something like that.
www.zrogers.fpcc.net - it is not nearly complete (I just had a baby boy 
last month!) but the home page was made entirely with Radiance!

-- 
Zack Rogers
Staff Engineer
Architectural Energy Corporation
2540 Frontier Avenue, Suite 201
Boulder, CO 80301 USA

tel (303)444-4149 ext.235
fax (303)444-4304
http://www.archenergy.com



From radiance-general@radiance-online.org  Fri May 16 21:23:03 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Fri, 16 May 2003 16:23:03 -0400
Subject: [Radiance-general] RE: More Results
References: <3EC5346E.5000500@archenergy.com>
Message-ID: <3EC548A7.10009@rumblestrip.org>

Zack Rogers wrote:
> Hi Rob,
> 
> This has been a very interesting thread...many good things to know, and 
> once again Radiance shines on.  I was going to comment that your dealing 
> with a fraction of a lux difference now, there must be some sensitive 
> objects inside your space...is this an art gallery?  And your right, 
> with the logarithmic behaviour of the eye the difference becomes even 
> more insignificant.

Yes, it's an art gallery.  An art gallery with lots of clerestory 
surface area that sees the exterior, and het they are asking us to see 
if we could specify a shade system that can get the light levels to 70 
lux.  That's why we have been doing all these calcs.  And as many times 
as I say it's important to focus on the relative gains & losses with 
each scheme, the client still tends to focus on the numbers, which is 
scary in the extreme, for me.

When we got to these last galleries, because we were removing so much 
light, this problem with -av finally revealed itself to us.  We had 
reached the point where the -av approximation was adding light to our 
model.  It became evident as we hit the 1% shade region; adding more 
shades beyond that seemed to make no difference to the numbers.  The 
architect called our model into question, and as he was a physics major 
before going into architecture, there was no convincing him that this 
was correct!  Intuitively, I knew something had to be wrong but I 
couldn't put my finger on it.  Physical tests at the mockup site bore 
out the intuition; something was wrong.  So, I asked this list for help, 
and got some.  Thanks again!

> That was my image in ArchRecord a couple months ago!  I'm excited 
> someone noticed.  I used the same CAD model to create the CFD image that 
> was also in the article.  It was a very interesting project, the first 
> project I've worked on where the plants were the most important building 
> occupant to provide light for.  

Interesting!  So, you were tasked with evaluating the resultant spectral 
makeup of the light after it had passed thru the glass, presumably to 
ensure photosynthesis?  How did you get spectral data for all the other 
materials?  I know Optics5 is great for glazings, but what about the 
other materials?

With that project and another musuem
> project, I used optics 5 a lot to look at the spectral qualities of 
> glass.  Optics 5, with its new Radiance output functionality, is great! 

As a matter of fact, I think I first looked at Optics5 after you 
mentioned it on the list, in your post about the Phipps bldg.  I used it 
recently for a project too.  It's nice to pull out a very accurate 
glazing spec for use in Radiance so easily.  I wish there was a similar 
database for paint finishes, metals, etc.

> One thing we learned, and anyone correct me if I'm mistaken, is that the 
> adhesive layer in laminates almost completely eliminates ultra-violet 
> from the spectrum.  Ultra-violet, or more accurately the Krochmann 
> factor (which is loosely related to UV and also determined by optics 5), 
> is the main component of radiation that causes degradation of materials 
> (artwork, furniture).  I may be completely off base by now, but if you 
> are concerned about obtaining such low light levels to minimize the 
> footcandle-hours that fall on artwork or what not, I would look at the 
> spectral qualities of the light you are letting in as well as they may 
> be more effective at preventing degradation than low light levels.

It's a combo of intensity, duration of exposure, and UV filtration
(< 400nm) that we need to manage.  Yes, most (not all) laminate 
interlayers will filter out UV and that's *always* part of any museum 
design strategy.  There is a book, "The Museum Environment" by Garry 
Thompson, that gives a great overview of the UV problem as it relates to 
museum artifact preservation.  It's actually quite interesting.  Here's 
a link to the book's info at Amazon:

http://www.amazon.com/exec/obidos/ASIN/0750620412/qid=1053116105/
sr=2-1/ref=sr_2_1/104-0083608-5879146

> PS.  Your blog is great!  I had planned on doing something similar 
> (although i typically rant and rave about politics) on my website and 
> wasn't aware there was a name for something like that.
> www.zrogers.fpcc.net - it is not nearly complete (I just had a baby boy 
> last month!) but the home page was made entirely with Radiance!

Thanks!  Yes, you'll find that it's quite a sensation these days, this 
business of putting up a website and blathering about whatever, out into 
the void of space.  I like it.  Most of my site is still down, I changed 
hosts in January and haven't had time to upload all that stuff again. 
Just pictures, stories and stuff.  Your basic self-gratification type 
deal. =8-)  I went to your site, but a couple of the links are not 
workin'.  The renderings are fun, I like how the rollovers change and 
the change is also reflected in the water.  Neat!  I'll check back on 
it, presumably after your son starts sleeping through the night?  ;-)

----

      Rob Guglielmetti

e. rpg@rumblestrip.org
w. www.rumblestrip.org


From radiance-general@radiance-online.org  Sat May 17 22:20:58 2003
From: radiance-general@radiance-online.org (Carsten Bauer)
Date: Sat, 17 May 2003 21:20:58 +0000
Subject: [Radiance-general] More results
In-Reply-To: <3EC51441.60906@rumblestrip.org>
References: <3EC51441.60906@rumblestrip.org>
Message-ID: <200305172120.58476.cbauer-@t-online.de>

Hi Rob,

more results, so, well, ... lets give some more sadistical, ehm, sorry, 
statistical remarks.

Hmm, errors with the rtrace runs are still considerable. Just for comparison, 
the rpict run gave deviations from the ideal relationship around 11% for the 
low level regime (down to 0.05 %  transmission), one "escape" value with 26%, 
the rest between 1 and 5% 
This with -ab only 2, and, by the way, direct caching active with a rather 
crude resolution. (not that any time gain is to be expected from it for this 
scene with only one source, I have it always active by default. So much for 
those who still fear strong accuracy compromising form the direct cache...)

But back to the topic:
The key point certainly is the thorough sampling of the room, so one more tip 
for the Power-rtracer: crank up the ambient divisions (-ad) considerably. Set 
it up to 1200 or even higher. 

And finally, ...
Don't get confused by the double logarithmic plots :-). In this occasion I 
chose logarithmic scales simply to get several orders of magnitude into one 
plot. (and it was possible to do so because of the completely linear 
relationship in question, which assured that the straight line remains 
straight in logarithmic coordinates.  Easy to imagine that this is not always 
the case. Another reason, e.g, for using semilogarithmic scales are power- or 
exponential laws, which then become straight lines in the plot, additionally 
facilitating the calculation of a fit curve). So no magic behind this, just a 
"presentation" issue, and especially no connection to the lighting or the 
intensity sensitivity of the eye.

-Carsten 


From radiance-general@radiance-online.org  Sun May 18 22:30:43 2003
From: radiance-general@radiance-online.org (John An)
Date: Sun, 18 May 2003 17:30:43 -0400
Subject: [Radiance-general] falsecolor weirdness
Message-ID: <FB196D2A-8977-11D7-815F-000A95871DF2@mac.com>

Preface:
I'm sure you're all getting sick of me asking things that are probably 
common knowledge to you all, but I have another question.  I searched 
the web, and went through Rendering with Radiance, but still have not 
been able to find the answer to my problem.  I have a presentation 
tomorrow morning, and it seems like while I will have nice looking 
images, the quantitative evaluation may be lacking.

Problem:
When I generate a falsecolor image of an office space I rendered, I get 
a good image with a dynamic range.  The command I use is:
falsecolor -s 400 -i image.pic > image2.pic

The image I rendered was a standard Radiance image that calculates the 
radiance/luminance.

The when I try to get luminance reading from the falsecolor image, the 
values I get are confounding.  The brightest areas (the bright red 
regions) always get at reading of 47.8L.  Surrounding areas typically 
have higher values.

To try to test what was going on, I clicked on the color scale on the 
falsecolor image and got readings which were not even close to what the 
scale indicates.  The L values are maximum around the yellow/green 
section (reading at about 120L), and decrease going toward both the 
blue and section of the scale.

If anyone is reading this message on a Sunday evening, I would REALLY 
appreciate it if you could fill me in on how to correct this problem.

Again, apologies if I should have RTFM, but I tried, and have had no 
success thus far.


John


From radiance-general@radiance-online.org  Sun May 18 23:56:18 2003
From: radiance-general@radiance-online.org (Lars O. Grobe)
Date: Mon, 19 May 2003 00:56:18 +0200
Subject: [Radiance-general] falsecolor weirdness
In-Reply-To: <FB196D2A-8977-11D7-815F-000A95871DF2@mac.com>
References: <FB196D2A-8977-11D7-815F-000A95871DF2@mac.com>
Message-ID: <200305182256.h4IMu85x023293@darkside-animation.com>

Hi!

> Problem:
> When I generate a falsecolor image of an office space I rendered, I get
> a good image with a dynamic range.  The command I use is:
> falsecolor -s 400 -i image.pic > image2.pic
>
> The image I rendered was a standard Radiance image that calculates the
> radiance/luminance.

Do you want luminance or illuminance? Usually you need illuminance-pictures 
rendered with rpict's -i parameter (if you want to know the amount of light 
that hits the surface).

Good luck, CU, Lars.


From radiance-general@radiance-online.org  Mon May 19 02:34:51 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Sun, 18 May 2003 21:34:51 -0400
Subject: [Radiance-general] falsecolor weirdness
In-Reply-To: <FB196D2A-8977-11D7-815F-000A95871DF2@mac.com>
Message-ID: <160FD4DB-899A-11D7-8463-000393824274@rumblestrip.org>

On Sunday, May 18, 2003, at 05:30 PM, John An wrote:
> Problem:
> When I generate a falsecolor image of an office space I rendered, I 
> get a good image with a dynamic range.  The command I use is:
> falsecolor -s 400 -i image.pic > image2.pic
>
> The image I rendered was a standard Radiance image that calculates the 
> radiance/luminance.
>
> The when I try to get luminance reading from the falsecolor image, the 
> values I get are confounding.  The brightest areas (the bright red 
> regions) always get at reading of 47.8L.  Surrounding areas typically 
> have higher values.

Odd that areas in the image that are not red would give higher values.  
Here's what Greg told me to do though:

Run "pextrem -o" on the image.  (Read the manpage for details)  The 
second line of the output is the highest value pixel in the image.  
Take the green value from that second line, multiply it by 179 and use 
that number for the scaling (-s) factor in your falsecolor renderings.  
That should make the red areas in your falsecolor rendering be the 
brightest, and allow the color range to depict the rest of the 
luminance best.  I usually use a logarithmic scale to boot, usually 2 
decades or three.  Hope this helps.

> To try to test what was going on, I clicked on the color scale on the 
> falsecolor image and got readings which were not even close to what 
> the scale indicates.  The L values are maximum around the yellow/green 
> section (reading at about 120L), and decrease going toward both the 
> blue and section of the scale.

I would seriously doubt the pixels in the scale have any basis in 
reality.

> If anyone is reading this message on a Sunday evening, I would REALLY 
> appreciate it if you could fill me in on how to correct this problem.

Pathetic, but true, I am reading this.  =8-)  Happy Sunday everyone.

Rob Guglielmetti
rpg@rumblestrip.org
www.rumblestrip.org


From radiance-general@radiance-online.org  Mon May 19 06:32:11 2003
From: radiance-general@radiance-online.org (Randolph Fritz)
Date: Sun, 18 May 2003 22:32:11 -0700
Subject: [Radiance-general] Re: rholo?
In-Reply-To: <D30DA718-8692-11D7-BF13-000A956D40C8@lmi.net>
Message-ID: <3D778680-89BB-11D7-A355-0030658EA95E@panix.com>

On Wednesday, May 14, 2003, at 10:05  PM, Greg Ward wrote:

>> From: Randolph Fritz <randolph@panix.com>
>>
>> On Tuesday, May 13, 2003, at 03:02  PM, Rob Guglielmetti wrote:
>>
>>>
>>>> If I do this at all, I will do as much pre-rendering as I can on 
>>>> the fastest system I can fine (which isn't my Mac.)  Is there a 
>>>> sample .hdk file I can download for testing display?
>>>
>>> Have a look in ray/obj/cabin, there are a couple of samples using 
>>> the cabin model.  There are makefiles for a day and night scene, 
>>> running 'make nholo' at the command line will start an interactive 
>>> process of the nighttime scene for example.
>>
>> I tried it; performance is quite respectable on the fast Pentium 4 in 
>> the Baker Lighting Lab.  Navigation, however, is difficult enough 
>> that I think I won't be using it for this project; I don't want to 
>> try to teach people how to use it under fire.  (I don't think I want 
>> to learn how for this project, either!)  Maybe next time...
>
> It takes a bit of getting used to, no question.  If you have a fast 
> OpenGL implementation, you'll suffer from a bug in the official 3.5 
> version that causes rotation to spin wildly, which is fixed on top of 
> trunk.  (I thought it was fixed in the 3.5 release, but I missed a 
> zero on the delay time I added between refreshes.)  Once you're used 
> to it, though, you'll find rview painful by comparison.

Thanks--I'll give it another try, then, but I'm not going to hand the 
mouse to a reviewer; they'd just go bonkers.  To my frustration, this 
whole issue of presentation of computer models turns out to be terribly 
difficult.  I think rholo is a good part of the answer; a 
constraint-based navigator built around some computer game controls--to 
keep one from flying through walls and getting lost in space--would 
probably satisfy the need.

>
>>
>> By the way, what is the difference between the glx and ogl drivers?
>
> The glx1 driver is an older version of the ogl driver, [...]

oh, I see.  Thanks.

Randolph


From radiance-general@radiance-online.org  Mon May 19 06:50:46 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Sun, 18 May 2003 22:50:46 -0700
Subject: [Radiance-general] Re: falsecolor weirdness
In-Reply-To: <FB196D2A-8977-11D7-815F-000A95871DF2@mac.com>
Message-ID: <D641BC94-89BD-11D7-81D5-000A956D40C8@lmi.net>

Hi John,

I hope you aren't doing what I think you might be doing -- trying to 
pick luminance values off the falsecolor output using ximage or 
suchlike.  The falsecolor image has already converted the luminances to 
a "false color" display, and the original luminances are lost in the 
process -- converted to this other (visual) representation.  If you 
want to get point luminance values, you'll need to run ximage on the 
original image, not on the falsecolor output.  (You can have falsecolor 
add point values for the extrema if you like using the -e option.)

-Greg

> From: John An <whollycow@mac.com>
> Date: Sun May 18, 2003  2:30:43  PM US/Pacific
> To: radiance-general@radiance-online.org
> Subject: [Radiance-general] falsecolor weirdness
> Reply-To: radiance-general@radiance-online.org
>
> Preface:
> I'm sure you're all getting sick of me asking things that are probably 
> common knowledge to you all, but I have another question.  I searched 
> the web, and went through Rendering with Radiance, but still have not 
> been able to find the answer to my problem.  I have a presentation 
> tomorrow morning, and it seems like while I will have nice looking 
> images, the quantitative evaluation may be lacking.
>
> Problem:
> When I generate a falsecolor image of an office space I rendered, I 
> get a good image with a dynamic range.  The command I use is:
> falsecolor -s 400 -i image.pic > image2.pic
>
> The image I rendered was a standard Radiance image that calculates the 
> radiance/luminance.
>
> The when I try to get luminance reading from the falsecolor image, the 
> values I get are confounding.  The brightest areas (the bright red 
> regions) always get at reading of 47.8L.  Surrounding areas typically 
> have higher values.
>
> To try to test what was going on, I clicked on the color scale on the 
> falsecolor image and got readings which were not even close to what 
> the scale indicates.  The L values are maximum around the yellow/green 
> section (reading at about 120L), and decrease going toward both the 
> blue and section of the scale.
>
> If anyone is reading this message on a Sunday evening, I would REALLY 
> appreciate it if you could fill me in on how to correct this problem.
>
> Again, apologies if I should have RTFM, but I tried, and have had no 
> success thus far.
>
>
> John
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>


From radiance-general@radiance-online.org  Mon May 19 17:04:08 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Mon, 19 May 2003 12:04:08 -0400
Subject: [Radiance-general] Re: falsecolor weirdness
In-Reply-To: <D641BC94-89BD-11D7-81D5-000A956D40C8@lmi.net>
Message-ID: <85F94AF3-8A13-11D7-8463-000393824274@rumblestrip.org>

On Monday, May 19, 2003, at 01:50 AM, Greg Ward wrote:

> Hi John,
>
> I hope you aren't doing what I think you might be doing -- trying to 
> pick luminance values off the falsecolor output using ximage or 
> suchlike.  The falsecolor image has already converted the luminances 
> to a "false color" display, and the original luminances are lost in 
> the process -- converted to this other (visual) representation.  If 
> you want to get point luminance values, you'll need to run ximage on 
> the original image, not on the falsecolor output.  (You can have 
> falsecolor add point values for the extrema if you like using the -e 
> option.)

John, my previous email was probably misleading.  Listen To Greg, which 
is always good advice.  Another way to look at things is this:  think 
of a raw, unfiltered image fresh from rpict as a collection of 
"intelligent pixels".  That is, the value of each pixel is the radiance 
of that point, as you know.  But any *filtered* version of that image, 
while still containing that depth of information about each pixel, has 
been filtered, so the info no longer has any basis in reality.  I 
learned this rather quickly when I tried doing a falsecolor image of an 
image that had already been filtered with pcond -h.  Oops.  It's a good 
argument for always saving the original image, as you never know when 
you might want to extract more info from the image in the form of a 
falsecolor, or whatever.

Rob Guglielmetti
rpg@rumblestrip.org
www.rumblestrip.org


From radiance-general@radiance-online.org  Mon May 19 18:11:19 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Mon, 19 May 2003 10:11:19 -0700
Subject: [Radiance-general] Re: More results
In-Reply-To: <3EC51441.60906@rumblestrip.org>
Message-ID: <E8C2FE46-8A1C-11D7-826F-000A956D40C8@lmi.net>

I've been following this thread with interest.  I just wanted to add 
some general comments and tips on using Radiance for accurate point 
calculations.

Comment #1 is a caveat:

Radiance has been honed to give reasonable renderings in a reasonable 
time for most common architectural environments.  It is not a 
bullet-proof ray-tracer for any and all optical problems.  Sometimes, 
it takes too long, and sometimes it doesn't come up with the right 
answer.  Usually, by carefully setting the parameters, you can tune the 
calculation to work for your situation, but there are certain 
well-known cases (such as curved specular reflectors and lenses) where 
no amount of tuning will give satisfactory results with the "classic" 
algorithms.

There _are_ Monte Carlo ray-tracing techniques that can guarantee 
correct results within some error tolerance, but the time they take to 
get there for all but the simplest arrangements is measured on a 
geological scale.  This has of course gotten better with the continuous 
improvements in processing speed, but there will always be a need for 
shortcuts and optimizations in simulation rendering, and that is the 
target and purpose of Radiance, as opposed to point calculations.  That 
Radiance does point calculations at all is a plus, but it isn't what it 
was designed for primarily.  This brings me to my second comment.

Comment #2:

Even if your goal is point calculations, you should generate some 
renderings to make sure that your light is getting around your model in 
the way that you expect.  A fisheye perspective taken from the 
measurement point can tell you volumes about what is going on -- point 
out light leaks and major sources of illumination that may require 
increased sampling rates.

Create an animation that goes through the times of day.  Even if you 
have to reduce the number of ambient bounces to get through it, you'll 
at least be able to tell where your sun pathes are going and roughly 
how light is penetrating the space.

Comment #3:

If you're still not certain of your parameter settings, do a 
sensitivity study.  Run through some parameter values and plot your 
results to find the knee of convergence.  John Mardaljevic has a good 
example of this strategy in his Ph.D. thesis, which he's made available 
in PDF from his website at <http://www.iesd.dmu.ac.uk/~jm/project.htm> 
(scroll to the bottom, but take some time to peruse his other pubs on 
your way as many of them are also relevant).

Comment #4:

I want to echo the advice Carsten gave Rob, which is to try increasing 
the -ad parameter FIRST.  Most of the problems people see in their 
indirect calculations are the result of an inadequate set of initial 
samples.  1024 samples may seem like a lot of rays, but if you spread 
them over an entire hemisphere, you're closest samples are about 5 
degrees apart, and near the horizon samples are separated by nearly 20 
degrees!  You can miss some pretty large sources of illumination if you 
aren't lucky.  Since the sample spacing is inversely proportional to 
the square root of the number of ambient divisions, you really need to 
crank on this parameter if you have tiny indirect sources, which brings 
me to my final comment.

Comment #5:

Don't rely too heavily on the diffuse interreflection calculation to 
solve your problems.  Mkillum is a wonderful utility that can turn your 
skylights and windows into light sources, and you should take the time 
to experiment and learn how to use this tool in your projects.  It's a 
bit of a pain to get into, and most beginners don't see why it's 
necessary, but it is an essential program for daylighting analysis.  
Used correctly, it will save you days of grief and head-scratching.

One time in using mkillum is that it pays to visualize the output it 
generates independently from the rest of your model.  Take the window 
description it creates and attach it to a closed, empty space (or do 
what I like to do -- stick it in the middle of a diffuse sphere) and 
see what patterns it casts on the walls with -ab set to 0.  This will 
give you a good idea of what kind of job mkillum did computing this 
distribution, and whether you need to modify it's parameters, which by 
the way have little or nothing to do with the parameter settings needed 
for the interior.

--------------

None of this is meant as any sort of indictment of Rob G.'s work -- in 
my opinion, Rob's done an amazing job getting up to speed on what is 
probably the most baffling piece of lighting simulation software 
anyone's ever written.  I really appreciate his willingness to be "out 
there" and share his trials and tribulations with the group, from which 
I've personally learned a lot, and I expect others have as well.  In 
the end, he will be the expert, and we'll all be coming to _him_ for 
advice in a few years' time....

-Greg


From radiance-general@radiance-online.org  Mon May 19 18:19:29 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Mon, 19 May 2003 10:19:29 -0700
Subject: [Radiance-general] texture mapping
In-Reply-To: <3EC4DE7B.B9D5AA67@iebele.nl>
Message-ID: <0CCF15CF-8A1E-11D7-826F-000A956D40C8@lmi.net>

Check out the thread on "Using OBJ2MESH utility" -- this talks about 
the new mesh primitive in Radiance 3.5 for mapping uv coordinates on 
complex mesh geometry.  I think this could help you a lot.

-Greg

> From: "atelier iebele abel - toren.com" <atelier@iebele.nl>
> Date: Fri May 16, 2003  5:50:03  AM US/Pacific
>
> Hi community,
>
> I have a question regarding texture mapping.
> For rendering leaves of a tree a I have a scanned photograph that I 
> have to
> map on the geometry of a leave.
> Each leave is a created (in the software xfrog) as a triangle mesh 
> that has
> for each vertex  x,y,z coordinates, a normal vector and u and v 
> coordinates.
>
> Having this information, how do I use colorpict to map the photo 
> exactly right
> on each triangle ?
> Any hints are helpfull.
>
> Iebele
>
> For those who like to see the project involved (work in progress, 
> quicktime
> vr's), look at
> http://www.toren.com/maris


From radiance-general@radiance-online.org  Tue May 20 02:30:15 2003
From: radiance-general@radiance-online.org (John An)
Date: Mon, 19 May 2003 21:30:15 -0400
Subject: [Radiance-general] falsecolor weirdness
In-Reply-To: <20030519100002.25140.26988.Mailman@darkside-animation.com>
Message-ID: <9BEB3EA8-8A62-11D7-A80C-000A95871DF2@mac.com>

Thanks all for your quick response.

> Cc: whollycow@mac.com
> To: radiance-general@radiance-online.org
> From: Greg Ward <gward@lmi.net>
> Subject: [Radiance-general] Re: falsecolor weirdness
> Reply-To: radiance-general@radiance-online.org
>
> Hi John,
>
> I hope you aren't doing what I think you might be doing -- trying to
> pick luminance values off the falsecolor output using ximage or
> suchlike.  The falsecolor image has already converted the luminances to
> a "false color" display, and the original luminances are lost in the
> process -- converted to this other (visual) representation.  If you
> want to get point luminance values, you'll need to run ximage on the
> original image, not on the falsecolor output.  (You can have falsecolor
> add point values for the extrema if you like using the -e option.)
>
> -Greg

Well, being the idiot that I am, I was trying to get luminance values 
from the falsecolor output.  I guess that explains why the red always 
read 47.8L.  Evaluating the original image gave me the values I needed. 
  Thanks.


> From: "Lars O. Grobe" <grobe@gmx.net>
> To: radiance-general@radiance-online.org
> Subject: Re: [Radiance-general] falsecolor weirdness
>
>
> Do you want luminance or illuminance? Usually you need 
> illuminance-pictures
> rendered with rpict's -i parameter (if you want to know the amount of 
> light
> that hits the surface).
>
> Good luck, CU, Lars.
>

Though I had purposely done a luminance rendering for today's 
presentation, I will have to do illuminance analysis, so the -i 
parameter is next.

> Subject: Re: [Radiance-general] falsecolor weirdness
> From: Rob Guglielmetti <rpg@rumblestrip.org>
> To: radiance-general@radiance-online.org
> Reply-To: radiance-general@radiance-online.org
>
>
> Odd that areas in the image that are not red would give higher values.
> Here's what Greg told me to do though:
>
> Run "pextrem -o" on the image.  (Read the manpage for details)  The
> second line of the output is the highest value pixel in the image.
> Take the green value from that second line, multiply it by 179 and use
> that number for the scaling (-s) factor in your falsecolor renderings.
> That should make the red areas in your falsecolor rendering be the
> brightest, and allow the color range to depict the rest of the
> luminance best.  I usually use a logarithmic scale to boot, usually 2
> decades or three.  Hope this helps.
>

I will try that next time around.  Seems like this command will give me 
better control over the dynamic range in the falsecolor image.



John


From radiance-general@radiance-online.org  Wed May 21 23:50:21 2003
From: radiance-general@radiance-online.org (Randolph Fritz)
Date: Wed, 21 May 2003 15:50:21 -0700
Subject: [Radiance-general] Holodeck file byte order?
Message-ID: <9A05D270-8BDE-11D7-A355-0030658EA95E@panix.com>

Are holodeck files byte-order dependent?  If so, and I suspect it is 
so, can I convert them from one order to another?

Randolph


From radiance-general@radiance-online.org  Thu May 22 01:16:38 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Wed, 21 May 2003 17:16:38 -0700
Subject: [Radiance-general] Re: Holodeck file byte order?
In-Reply-To: <9A05D270-8BDE-11D7-A355-0030658EA95E@panix.com>
Message-ID: <A7E565F2-8BEA-11D7-8433-000A956D40C8@lmi.net>

Hi Randolph,

The only files I know of that are byte-order dependent in Radiance are 
the depth files produced by the -z option of rpict, which are raw dumps 
of the 32-bit floating point numbers with no header.  Holodecks should 
be completely portable between systems -- even more so than octrees, 
which have some system-dependent integer sizes which prevent them from 
being ported between some 32-bit and 64-bit processor architectures.

Are you having some problems sharing holodecks across machines?

-Greg

> From: Randolph Fritz <randolph@panix.com>
> Date: Wed May 21, 2003  3:50:21  PM US/Pacific
> To: radiance-general@radiance-online.org
> Subject: [Radiance-general] Holodeck file byte order?
> Reply-To: radiance-general@radiance-online.org
>
> Are holodeck files byte-order dependent?  If so, and I suspect it is 
> so, can I convert them from one order to another?
>
> Randolph


From radiance-general@radiance-online.org  Thu May 22 13:26:06 2003
From: radiance-general@radiance-online.org (atelier iebele abel - toren.com)
Date: Thu, 22 May 2003 14:26:06 +0200
Subject: [Radiance-general] texture mapping
References: <0CCF15CF-8A1E-11D7-826F-000A956D40C8@lmi.net>
Message-ID: <3ECCC1DE.11E668CF@iebele.nl>

Hi Greg,

Thanks for your reply. I start to get some bettter results, but still I
have some questions:


Q1.

I experimented  with texture cordinates in the tmesh.cal parameters.
Instead of u and v I used  :
mod(u,max(1,1))  mod(u,max(1,1))
I don't know what this really means, but I tried to tile the texture,
like in picture.cal (tile_u tile_v)
I get good results for only one part of my model ( the trunk of the tree
) but other parts (the leaves) act very strange.
Do you have a suggestions? And where can I find some documentation about
mod, frac, tri etc... (It is not explained in the book, is it?)


Q2.

When using tmesh2rad I specify a picture (-p). But what if I need a
tranparant texture?
Following your suggestion somewhere else in this discussion I create a
transparant picture like the example below.
These do not have texture coordinates like above, but as you will
understand, I cannot write such for each triangle of a leave (more as
20.000 in a tree).
Do you have a tip or workaround for this?


Iebele


________________
#my transparant picture example

void colorpict AL05lef 15 red green blue
/disk12/_3DLIB/bomen/AL05_Aesculus_hippocastanum_Horse_Chestnut/AL05lef.pic

picture.cal
tile_u tile_v
-s 1
-rx  0
-ry  0
-rz  0
0 1 1

AL05lef plastic AL05lef_map
0 0 5
1 1 1
0 0

void mixpict  leaf_col_leaf2
11  AL05lef_map  void green
/disk12/_3DLIB/bomen/AL05_Aesculus_hippocastanum_Horse_Chestnut/AL05lef-alpha.pic

picture.cal tile_u tile_v -s 1.0 -rz 0
0
0

______________________________




Greg Ward wrote:

> Check out the thread on "Using OBJ2MESH utility" -- this talks about
> the new mesh primitive in Radiance 3.5 for mapping uv coordinates on
> complex mesh geometry.  I think this could help you a lot.
>
> -Greg
>
> > From: "atelier iebele abel - toren.com" <atelier@iebele.nl>
> > Date: Fri May 16, 2003  5:50:03  AM US/Pacific
> >
> > Hi community,
> >
> > I have a question regarding texture mapping.
> > For rendering leaves of a tree a I have a scanned photograph that I
> > have to
> > map on the geometry of a leave.
> > Each leave is a created (in the software xfrog) as a triangle mesh
> > that has
> > for each vertex  x,y,z coordinates, a normal vector and u and v
> > coordinates.
> >
> > Having this information, how do I use colorpict to map the photo
> > exactly right
> > on each triangle ?
> > Any hints are helpfull.
> >
> > Iebele
> >
> > For those who like to see the project involved (work in progress,
> > quicktime
> > vr's), look at
> > http://www.toren.com/maris
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general


From radiance-general@radiance-online.org  Thu May 22 17:02:18 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Thu, 22 May 2003 09:02:18 -0700
Subject: [Radiance-general] Re: Holodeck file byte order?
In-Reply-To: <9A05D270-8BDE-11D7-A355-0030658EA95E@panix.com>
Message-ID: <C35C304B-8C6E-11D7-9104-000A956D40C8@lmi.net>

> From: Randolph Fritz <randolph@panix.com>
> Date: Wed May 21, 2003  3:50:21  PM US/Pacific
> To: radiance-general@radiance-online.org
> Subject: [Radiance-general] Holodeck file byte order?
> Reply-To: radiance-general@radiance-online.org
>
> Are holodeck files byte-order dependent?  If so, and I suspect it is 
> so, can I convert them from one order to another?
>
> Randolph

My apologies.  Randolph is correct -- unlike other Radiance binary 
files, holodeck files are in fact byte-order dependent.  I totally 
forgot about that!  At one time, I intended to make them byte-order 
independent like other files, but the cost associated with 
byte-swapping on i/o is much higher for holodecks than for other file 
types because it is done repeatedly.  Right now, holodeck "beams" are 
read and written with the system read() and write() calls (actually my 
readbuf() and writebuf() variations), which is very fast an efficient.  
If you add to this a byte-swapping step, you more than double the CPU 
cost of these operations, so supporting holodecks with different byte 
orders is not really a good idea.

(More comments with Randolph's messages below.)

Begin forwarded message:

> From: Randolph Fritz <randolph@panix.com>
> Date: Wed May 21, 2003  6:41:55  PM US/Pacific
> To: Greg Ward <gward@lmi.net>
> Subject: Re: Holodeck file byte order?
>
> On Wednesday, May 21, 2003, at 05:38  PM, Greg Ward wrote:
>
>> Did you set the binary transfer mode in ftp (or whatever you used to 
>> transfer it)?  Some transfer programs will look at the first few 
>> hundred bytes of the file and decide it's a text file and use a text 
>> protocol based on the info header.
>
> I used scp; I don't expect those behaviors with scp.  Still...I'll do 
> some checksums.
>
> From: Randolph Fritz <randolph@panix.com>
> Date: Wed May 21, 2003  8:09:47  PM US/Pacific
> To: Greg Ward <gward@lmi.net>
> Subject: Re: Holodeck file byte order?
>
> ummmm...can a holodeck file have "holes"?

No.

> From: Randolph Fritz <randolph@panix.com>
> Date: Wed May 21, 2003  10:15:17  PM US/Pacific
> To: Greg Ward <gward@lmi.net>
> Subject: Re: Holodeck file byte order?
>
> And the answer is...
>
> getw() and putw() are byte-order dependent and rholo uses them to read 
> and write its magic number.
>

And now I remember the reason for this.  I wanted byte-order dependence 
in the magic number so I would detect when the byte-order was 
incompatible.  What we really need then is a utility that will detect 
this and do an appropriate byte-swap on the file.  A slight 
modification on the "rhcopy" program should do it, where it detects the 
swapped magic number and performs byte-swapping during copy.  That way, 
we wouldn't pay the penalty during rendering of constantly swapping 
bytes on input and output.

I'll look into this some more next week.
-Greg


From radiance-general@radiance-online.org  Thu May 22 17:37:31 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Thu, 22 May 2003 09:37:31 -0700
Subject: [Radiance-general] Re: gensky manpage
In-Reply-To: <3ECCF13C.1060900@rumblestrip.org>
Message-ID: <AED92A62-8C73-11D7-9104-000A956D40C8@lmi.net>

Hi Rob,

You are correct!  The gensky man page should be updated, and I have 
updated it at your prompting for the next release to use:

skyfunc glow skyglow
0
0
4 .99 .99 1.1 0

-Greg

Begin forwarded message:

> From: Rob Guglielmetti <rpg@rumblestrip.org>
> Date: Thu May 22, 2003  8:48:12  AM US/Pacific
> To: Greg Ward <gward@lmi.net>
> Subject: gensky manpage
> Reply-To: rpg@rumblestrip.org
>
> Hi Greg,
>
> I think I may have discovered an error in the documentation on the 
> website.
>
> If you go to http://radsite.lbl.gov/radiance/man_html/gensky.1.html 
> and look at the sample input for using skyfunc, it recommends:
>
> skyfunc glow skyglow
> 0
> 0
> 4 .9 .9 1 0
>
> ... but I remember finding a very useful email from you in the 
> Radiance Digests about making sure the photopic average for your rgb 
> values always adds up to 1.  It was the basis for my "skyfunc RGB 
> checker" utility on materials spreadsheet. According to my 
> spreadsheet, .9 .9 1 works out to a photopic average of .9065, 
> indicating a sky radiance that skyfunc will "undershoot".
>
> If this is indeed a mistake, we should probably post a correction to 
> the list, as I know Schorsch and a few others have posted copies of 
> the docs on their own sites...
>
> ----
>
>      Rob Guglielmetti
>
> e. rpg@rumblestrip.org
> w. www.rumblestrip.org


From radiance-general@radiance-online.org  Thu May 22 18:38:32 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Thu, 22 May 2003 10:38:32 -0700
Subject: [Radiance-general] texture mapping
In-Reply-To: <3ECCC1DE.11E668CF@iebele.nl>
Message-ID: <34FD0E7C-8C7C-11D7-9104-000A956D40C8@lmi.net>

Hi Lebele,

> From: "atelier iebele abel - toren.com" <atelier@iebele.nl>
>
> Q1.
>
> I experimented  with texture cordinates in the tmesh.cal parameters.
> Instead of u and v I used  :
> mod(u,max(1,1))  mod(u,max(1,1))
> I don't know what this really means, but I tried to tile the texture,
> like in picture.cal (tile_u tile_v)
> I get good results for only one part of my model ( the trunk of the 
> tree
> ) but other parts (the leaves) act very strange.
> Do you have a suggestions? And where can I find some documentation 
> about
> mod, frac, tri etc... (It is not explained in the book, is it?)

Chapter 4 in "Rendering with Radiance" covers some of the basics of 
.cal file construction, but many of the specifics you just have to pick 
up from looking at other .cal files, particularly the rayinit.cal file 
in ray/src/rt/.

I don't understand how you got any results from mod(u,max(1,1)) 
mod(u,max(1,1)), since the variable "u" is not defined.  You should 
have gotten an error from this specificaiton.  Probably what you meant 
to use was frac(Lu) frac(Lv), which are the same as mod(Lu,1) 
mod(Lv,1).  The functions frac(x) and mod(n,d) are defined in 
rayinit.cal.  This specification should work for a square image tile.

> Q2.
>
> When using tmesh2rad I specify a picture (-p). But what if I need a
> tranparant texture?
> Following your suggestion somewhere else in this discussion I create a
> transparant picture like the example below.
> These do not have texture coordinates like above, but as you will
> understand, I cannot write such for each triangle of a leave (more as
> 20.000 in a tree).
> Do you have a tip or workaround for this?

Yes -- instead of using tile_u and tile_v with picture.cal, specify "." 
for the .cal file and use frac(Lu) and frac(Lv) in both your colorpict 
and your mixpict primitives, using obj2mesh rather than tmesh2rad to 
convert your models.  Does this make sense?

-Greg


From radiance-general@radiance-online.org  Sat May 24 06:10:09 2003
From: radiance-general@radiance-online.org (Randolph Fritz)
Date: Fri, 23 May 2003 22:10:09 -0700
Subject: [Radiance-general] Trees in the holodeck
Message-ID: <20030524051009.GA12889@panix.com>

All right, actually they are slender cylinders.  The problem is,
they're growing through the cabin furniture.

???

Anyone seen anything like this?  I've seen the problem on two
platforms, now--Mac OS 10.2 and Pentium 4 Linux.

Randolph



From radiance-general@radiance-online.org  Sat May 24 17:28:36 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Sat, 24 May 2003 09:28:36 -0700
Subject: [Radiance-general] Re: Trees in the holodeck
In-Reply-To: <20030524051009.GA12889@panix.com>
Message-ID: <C4F1850C-8E04-11D7-B8F2-000A956D40C8@lmi.net>

Hi Randolph,

I believe there's a bug either in the code that determines rotation 
angles for cylinders in src/common/rglsurf.c or many OpenGL 
implementations.  I suspect the former, but need to do some further 
investigation to figure it out for sure.

-Greg

> From: Randolph Fritz <randolph@panix.com>
> Date: Fri May 23, 2003  10:10:09  PM US/Pacific
> To: radiance-general@radiance-online.org
> Subject: [Radiance-general] Trees in the holodeck
> Reply-To: radiance-general@radiance-online.org
>
> All right, actually they are slender cylinders.  The problem is,
> they're growing through the cabin furniture.
>
> ???
>
> Anyone seen anything like this?  I've seen the problem on two
> platforms, now--Mac OS 10.2 and Pentium 4 Linux.
>
> Randolph


From radiance-general@radiance-online.org  Sat May 24 19:12:49 2003
From: radiance-general@radiance-online.org (John An)
Date: Sat, 24 May 2003 14:12:49 -0400
Subject: [Radiance-general] indirect/direct photometric
Message-ID: <53E78230-8E13-11D7-A1EB-000A95871DF2@mac.com>

Yes, it's me again.

I have yet another question (guaranteed not to be the last).  I would 
not have gotten beyond the basic tutorial if it hadn't been for the 
support provided by this list.  As frightening as it may sound, if I 
can manage to get enough of the fundamentals down over the summer, I 
will be trying to introduce the basics of Radiance into the curriculum 
at my school.

My questions this time are related modeling electric luminaires and 
accurately applying photometric data.

I have been following the instructions in Section 5.2.3 of Rendering 
with Radiance, but using my own direct/indirect fluorrescent luminaire 
photometric file.  As usual, I'm having some trouble.

1) The ies2rad command has -di -df -dc and -dm options.  Do I set the 
units according to the units of the model of my space, or according to 
the units the photometric data was created?  I am assuming that it 
would be according to the units of the model of my space (especially 
since I don't think photometric data is created in inches or 
centimeters).  However, when I compare the resulting .dat file of using 
the -df option with the .dat file using -dm, they are identical.

2) I used the command:
ies2rad -df -t white -i .56419 D21998.ies
I then edited the resulting .rad file to use the lboxcorr function.  
The file reads as follows:

# ies2rad -df -t white -i .56419
# Dimensions in feet
#<IESNA:LM-63-1995
#<[TEST] 21998
#<[DATE] 05/31/2001
#<[LUMCAT] AGDMWU232-F3-120-1/2-EB
#<[LUMINAIRE] DAY-BRITE ADAGIO DIRECT/INDIRECT W/33-CELL SPECULAR LOUVER
#<[LAMP] F32T8
#<[BALLAST] ADVANCE REL-2P32-SC
#<[MANUFAC] DayBrite-Capri-Omega(Genlyte Thomas Group)
#<[_TIFF_FILE_NAME] AGD2
#<[_VERSION] fo2ies 2.01
#<Reflection factor 0.92, Test distance = 26 ft.
# 60 watt luminaire, lamp*ballast factor = 0.88

void brightdata D21998_dist
5 lboxcorr D21998.dat source.cal src_phi4 src_theta
0
4 .816 .141 1.22 .156

D21998_dist illum D21998_light
0
0
3 1 1 1

!genbox D21998_light D21998.s .141 1.22 .156 \
| xform -t -.0705 -.61 -.078

Because this file is in meters, I decided to xform the above file using 
-s 39.3700787 to convert the file to inches (which my model is in).  Is 
this correct?

The resulting file is:

# xform -s 39.3700787
# ies2rad -df -t white -i .56419
# Dimensions in feet
#<IESNA:LM-63-1995
#<[TEST] 21998
#<[DATE] 05/31/2001
#<[LUMCAT] AGDMWU232-F3-120-1/2-EB
#<[LUMINAIRE] DAY-BRITE ADAGIO DIRECT/INDIRECT W/33-CELL SPECULAR LOUVER
#<[LAMP] F32T8
#<[BALLAST] ADVANCE REL-2P32-SC
#<[MANUFAC] DayBrite-Capri-Omega(Genlyte Thomas Group)
#<[_TIFF_FILE_NAME] AGD2
#<[_VERSION] fo2ies 2.01
#<Reflection factor 0.92, Test distance = 26 ft.
# 60 watt luminaire, lamp*ballast factor = 0.88

void brightdata D21998_dist
9 lboxcorr D21998.dat source.cal src_phi4 src_theta -i 1 -s 39.3700787
0
4              0.816              0.141               1.22              
0.156

D21998_dist illum D21998_light
0
0
3                  1                  1                  1
# xform -t -.0705 -.61 -.078
# genbox D21998_light D21998.s .141 1.22 .156

D21998_light polygon D21998.s.1540
0
0
12
       2.77559054835      -24.015748007      -3.0708661386
       2.77559054835      -24.015748007       3.0708661386
      -2.77559054835      -24.015748007       3.0708661386
      -2.77559054835      -24.015748007      -3.0708661386

D21998_light polygon D21998.s.4620
0
0
12
      -2.77559054835      -24.015748007       3.0708661386
      -2.77559054835       24.015748007       3.0708661386
      -2.77559054835       24.015748007      -3.0708661386
      -2.77559054835      -24.015748007      -3.0708661386

D21998_light polygon D21998.s.2310
0
0
12
      -2.77559054835       24.015748007      -3.0708661386
       2.77559054835       24.015748007      -3.0708661386
       2.77559054835      -24.015748007      -3.0708661386
      -2.77559054835      -24.015748007      -3.0708661386

D21998_light polygon D21998.s.3267
0
0
12
       2.77559054835       24.015748007      -3.0708661386
      -2.77559054835       24.015748007      -3.0708661386
      -2.77559054835       24.015748007       3.0708661386
       2.77559054835       24.015748007       3.0708661386

D21998_light polygon D21998.s.5137
0
0
12
       2.77559054835      -24.015748007       3.0708661386
       2.77559054835      -24.015748007      -3.0708661386
       2.77559054835       24.015748007      -3.0708661386
       2.77559054835       24.015748007       3.0708661386

D21998_light polygon D21998.s.6457
0
0
12
      -2.77559054835       24.015748007       3.0708661386
      -2.77559054835      -24.015748007       3.0708661386
       2.77559054835      -24.015748007       3.0708661386
       2.77559054835       24.015748007       3.0708661386


3) However, when I place the resulting illum close to the floor, it is 
obvious that the light is being emitted is spherical, not linear.  
There has to be something that I am missing.  Could somebody please 
inform me?



Thanks again.



John


From radiance-general@radiance-online.org  Sun May 25 03:51:34 2003
From: radiance-general@radiance-online.org (Randolph Fritz)
Date: Sat, 24 May 2003 19:51:34 -0700
Subject: [Radiance-general] Re: Trees in the holodeck
In-Reply-To: <C4F1850C-8E04-11D7-B8F2-000A956D40C8@lmi.net>
Message-ID: <CBC97737-8E5B-11D7-A355-0030658EA95E@panix.com>

On Saturday, May 24, 2003, at 09:28  AM, Greg Ward wrote:

> I believe there's a bug either in the code that determines rotation 
> angles for cylinders in src/common/rglsurf.c or many OpenGL 
> implementations.  I suspect the former, but need to do some further 
> investigation to figure it out for sure.

Thanks.  The two OpenGL implementations are XFree86/x86 Radeon 7000 VE 
and Apple X11 (beta3), Radeon 9000.  It's possible that the Radeon 
drivers have bugs.

Randolph


From radiance-general@radiance-online.org  Sun May 25 05:45:31 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Sat, 24 May 2003 21:45:31 -0700
Subject: [Radiance-general] indirect/direct photometric
In-Reply-To: <53E78230-8E13-11D7-A1EB-000A95871DF2@mac.com>
Message-ID: <B6E6E14E-8E6B-11D7-BC5C-000A956D40C8@lmi.net>

Hi John,

I'll skip for now the question of why you're altering the output of 
ies2rad, and just try to answer your questions, first.

> From: John An <whollycow@mac.com>
>
> 1) The ies2rad command has -di -df -dc and -dm options.  Do I set the 
> units according to the units of the model of my space, or according to 
> the units the photometric data was created?  I am assuming that it 
> would be according to the units of the model of my space (especially 
> since I don't think photometric data is created in inches or 
> centimeters).  However, when I compare the resulting .dat file of 
> using the -df option with the .dat file using -dm, they are identical.

The -d? options affect the geometric dimensions that are output when 
you use the geometry supplied in the ies file.  When you specify your 
own illum sphere with the -i option, it assumes you mean to use the 
units you specify with the -d? option.  All that really changes is the 
first real argument to the brightdata primitive, which scales the vaues 
in the *.dat file appropriately.  The data file itself is (as you 
noted) unchanged.

>
> 2) I used the command:
> ies2rad -df -t white -i .56419 D21998.ies
> I then edited the resulting .rad file to use the lboxcorr function.  
> The file reads as follows:
>
> # ies2rad -df -t white -i .56419
> ...
> !genbox D21998_light D21998.s .141 1.22 .156 \
> | xform -t -.0705 -.61 -.078
>
> Because this file is in meters, I decided to xform the above file 
> using -s 39.3700787 to convert the file to inches (which my model is 
> in).  Is this correct?
>
> The resulting file is:
>
> # xform -s 39.3700787
> # ies2rad -df -t white -i .56419
> ...
>
> 3) However, when I place the resulting illum close to the floor, it is 
> obvious that the light is being emitted is spherical, not linear.  
> There has to be something that I am missing.  Could somebody please 
> inform me?

Are you visualizing the source in rview?  If so, the defaults of -ds 0 
and -dj 0 mean that all light soruces will appear as if eminating from 
a point.  If you set -ds .2 and -dj .6 or so, you should get the result 
you expect.

-Greg


From radiance-general@radiance-online.org  Sun May 25 07:16:07 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Sat, 24 May 2003 23:16:07 -0700
Subject: [Radiance-general] Re: Trees in the holodeck
In-Reply-To: <CBC97737-8E5B-11D7-A355-0030658EA95E@panix.com>
Message-ID: <5F2D3E40-8E78-11D7-BC5C-000A956D40C8@lmi.net>

Well, I spent a couple of hours on this, and I did find a bug for some 
vertical cylinders, but apparently this isn't the bug causing all the 
problems -- at least on my Mac OS X X11 server (Apple's public beta).  
I still get out-of-place cylinders, and when I look a bit closer and 
isolate the problem cases, they render just fine.  It's only when 
there's a whole bunch of geometry that the glu* routines in OpenGL seem 
to go whacky.  I've given up at this point.  If the bug is mine, I have 
no idea where it is or how it's coming about.  I'm reluctant to cop out 
and call it an OpenGL bug, but I don't think the quadric rendering 
routines are all that well tested, so it's a distinct possibility.  In 
any case, I'm giving up on it.  The glrad program also seems to be 
broken under OS X, and I have no idea why.  I wish there were some 
debugging tools for OpenGL, but it's all trial and error and too much 
error for me at this point.

-Greg

> From: Randolph Fritz <randolph@panix.com>
>
> On Saturday, May 24, 2003, at 09:28  AM, Greg Ward wrote:
>
>> I believe there's a bug either in the code that determines rotation 
>> angles for cylinders in src/common/rglsurf.c or many OpenGL 
>> implementations.  I suspect the former, but need to do some further 
>> investigation to figure it out for sure.
>
> Thanks.  The two OpenGL implementations are XFree86/x86 Radeon 7000 VE 
> and Apple X11 (beta3), Radeon 9000.  It's possible that the Radeon 
> drivers have bugs.
>
> Randolph


From radiance-general@radiance-online.org  Sun May 25 07:43:03 2003
From: radiance-general@radiance-online.org (Randolph Fritz)
Date: Sat, 24 May 2003 23:43:03 -0700
Subject: [Radiance-general] Re: Trees in the holodeck
In-Reply-To: <5F2D3E40-8E78-11D7-BC5C-000A956D40C8@lmi.net>
Message-ID: <222A3440-8E7C-11D7-8678-0030658EA95E@panix.com>

Hmmmm...hey, thanks for the effort.  If the fix gets in soon enough 
I'll try to make some time to try it on the PC, though I worry about 
spending the time.  It occurs to me it could be the same OpenGL code; 
if Apple is using the XFree86 OpenGL code, it would be.

Randolph

On Saturday, May 24, 2003, at 11:16  PM, Greg Ward wrote:

> Well, I spent a couple of hours on this, and I did find a bug for some 
> vertical cylinders, but apparently this isn't the bug causing all the 
> problems -- at least on my Mac OS X X11 server (Apple's public beta).  
> I still get out-of-place cylinders, and when I look a bit closer and 
> isolate the problem cases, they render just fine.  It's only when 
> there's a whole bunch of geometry that the glu* routines in OpenGL 
> seem to go whacky.  I've given up at this point.  If the bug is mine, 
> I have no idea where it is or how it's coming about.  I'm reluctant to 
> cop out and call it an OpenGL bug, but I don't think the quadric 
> rendering routines are all that well tested, so it's a distinct 
> possibility.  In any case, I'm giving up on it.  The glrad program 
> also seems to be broken under OS X, and I have no idea why.  I wish 
> there were some debugging tools for OpenGL, but it's all trial and 
> error and too much error for me at this point.
>
> -Greg
>
>> From: Randolph Fritz <randolph@panix.com>
>>
>> On Saturday, May 24, 2003, at 09:28  AM, Greg Ward wrote:
>>
>>> I believe there's a bug either in the code that determines rotation 
>>> angles for cylinders in src/common/rglsurf.c or many OpenGL 
>>> implementations.  I suspect the former, but need to do some further 
>>> investigation to figure it out for sure.
>>
>> Thanks.  The two OpenGL implementations are XFree86/x86 Radeon 7000 
>> VE and Apple X11 (beta3), Radeon 9000.  It's possible that the Radeon 
>> drivers have bugs.
>>
>> Randolph
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
>


From radiance-general@radiance-online.org  Sun May 25 07:42:58 2003
From: radiance-general@radiance-online.org (John An)
Date: Sun, 25 May 2003 02:42:58 -0400
Subject: [Radiance-general] indirect/direct photometric
Message-ID: <1F44AF40-8E7C-11D7-A1EB-000A95871DF2@mac.com>

--Apple-Mail-14-375850595
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed



> From: John An <jan@gsd.harvard.edu>
> Date: Sun May 25, 2003  2:41:57  AM America/New_York
> To: radiance-general@radiance-online.org
> Subject: indirect/direct photometric
>
> Greg,
>
> Thanks again.
>
>
> Greg Ward wrote:
> I'll skip for now the question of why you're altering the output of
> ies2rad, and just try to answer your questions, first.
>
> I was following the instructions in Section 5.3.2.  It noted that for 
> direct/indirect luminaires, this special method should be used.  
> Besides, when I tried using the ies2rad command without modifying the 
> results, I ended up with visible geometry emitting the light.  While I 
> don't have a luminaire modeled yet, I eventually want to be able to 
> look at the luminaire once it is modeled, so I assumed that altering 
> the output of ies2rad so that an illum would eventually envelop the 
> luminaire was the way to go.  Is there a better way of doing this?
>
> Also, when I examined the dimensions of the luminaire contained in the 
> .ies file, it showed that the height was 0.  I'm assuming that the 
> height of 0 is to address the shadow banding effect.  However, a 
> non-existent height would mean that the geometry resulting from the 
> ies2rad would never enclose the geometry of the luminaire unless the 
> output of the ies2rad file was modified.
>
> So I guess my question now is, what is the best process of mapping the 
> photometric data to a 'complex' luminaire so that the luminaire is 
> visible?
>
>
>
> Greg Ward wrote:
> The -d? options affect the geometric dimensions that are output when
> you use the geometry supplied in the ies file.  When you specify your
> own illum sphere with the -i option, it assumes you mean to use the
> units you specify with the -d? option.  All that really changes is the
> first real argument to the brightdata primitive, which scales the vaues
> in the *.dat file appropriately.  The data file itself is (as you
> noted) unchanged.
>
> Understood.  Since my model is in inches, I should be using the -di 
> option.
>
>
>
> Greg Ward wrote:
> Are you visualizing the source in rview?  If so, the defaults of -ds 0
> and -dj 0 mean that all light soruces will appear as if eminating from
> a point.  If you set -ds .2 and -dj .6 or so, you should get the result
> you expect.
>
> Yes, I was using rview (rview -vf *.vf -ab 3 *.oct).  As soon as I 
> added the -ds .2 and -dj .6 options, I saw a linear profile.
>
> Thanks again, for putting up with my naive questions.
>
>
> John

--Apple-Mail-14-375850595
Content-Transfer-Encoding: 7bit
Content-Type: text/enriched;
	charset=US-ASCII




<excerpt><bold>From: </bold>John An <<jan@gsd.harvard.edu>

<bold>Date: </bold>Sun May 25, 2003  2:41:57  AM America/New_York

<bold>To: </bold>radiance-general@radiance-online.org

<bold>Subject: </bold>indirect/direct photometric


<fontfamily><param>Courier</param><bigger>Greg,


Thanks again.

<italic>


Greg Ward wrote:

I'll skip for now the question of why you're altering the output of 

ies2rad, and just try to answer your questions, first.</italic>


I was following the instructions in Section 5.3.2.  It noted that for
direct/indirect luminaires, this special method should be used. 
Besides, when I tried using the ies2rad command without modifying the
results, I ended up with visible geometry emitting the light.  While I
don't have a luminaire modeled yet, I eventually want to be able to
look at the luminaire once it is modeled, so I assumed that altering
the output of ies2rad so that an illum would eventually envelop the
luminaire was the way to go.  Is there a better way of doing this?


Also, when I examined the dimensions of the luminaire contained in the
.ies file, it showed that the height was 0.  I'm assuming that the
height of 0 is to address the shadow banding effect.  However, a
non-existent height would mean that the geometry resulting from the
ies2rad would never enclose the geometry of the luminaire unless the
output of the ies2rad file was modified.


So I guess my question now is, what is the best process of mapping the
photometric data to a 'complex' luminaire so that the luminaire is
visible?




<italic>Greg Ward wrote:

The -d? options affect the geometric dimensions that are output when 

you use the geometry supplied in the ies file.  When you specify your 

own illum sphere with the -i option, it assumes you mean to use the 

units you specify with the -d? option.  All that really changes is the 

first real argument to the brightdata primitive, which scales the
vaues 

in the *.dat file appropriately.  The data file itself is (as you 

noted) unchanged.</italic>


Understood.  Since my model is in inches, I should be using the -di
option.




<italic>Greg Ward wrote:

Are you visualizing the source in rview?  If so, the defaults of -ds 0 

and -dj 0 mean that all light soruces will appear as if eminating from 

a point.  If you set -ds .2 and -dj .6 or so, you should get the
result 

you expect.</italic>


Yes, I was using rview (rview -vf *.vf -ab 3 *.oct).  As soon as I
added the -ds .2 and -dj .6 options, I saw a linear profile.


Thanks again, for putting up with my naive questions.



John

</bigger></fontfamily></excerpt>
--Apple-Mail-14-375850595--


From radiance-general@radiance-online.org  Sun May 25 10:32:47 2003
From: radiance-general@radiance-online.org (Thomas Bleicher)
Date: Sun, 25 May 2003 11:32:47 +0200
Subject: [Radiance-general] Re: Trees in the holodeck
In-Reply-To: <C4F1850C-8E04-11D7-B8F2-000A956D40C8@lmi.net>
References: <20030524051009.GA12889@panix.com> <C4F1850C-8E04-11D7-B8F2-000A956D40C8@lmi.net>
Message-ID: <20030525093247.GA1576@tu-bs.de>

On Sat, May 24, 2003 at 09:28:36AM -0700, Greg Ward wrote:
> Hi Randolph,
> 
> I believe there's a bug either in the code that determines rotation 
> angles for cylinders in src/common/rglsurf.c or many OpenGL 
> implementations.  I suspect the former, but need to do some further 
> investigation to figure it out for sure.

Sorry if this is old news (I have only the 3r1p20 source installed at
the moment). I had a quick look at src/common/rglsurf.c and I think there
are some missing "glPopMatrix()" calls:

In o_cone (and o_ring) is this sequence (line 266 in my file):

   glPushMatrix();
                                   /* do base translation */
   glTranslated((GLdouble)o->oargs.farg[0], (GLdouble)o->oargs.farg[1],
                    (GLdouble)o->oargs.farg[2]);
                                   /* compute height & rotation angle */
   h = sqrt(dist2(o->oargs.farg,o->oargs.farg+3));
   if (h <= FTINY)
       return;


If this test returns 1 (ie. a "flat" cylinder) glPopMatrix() is 
never called but the system is already translated. This will at least 
misplace all of the following objects (up to the next "glLoadIdentity")
and it should raise an error when buffers are swaped. IIRC "Pushes" 
and "Pops" have to match up.

I only used OpenGL via Python bindings (one year ago) and I'm not at all 
C literate so I didn't dare looking at the rotation calculation ;) 

I think sometimes this _could_ cause this sort of display problems.

Thomas


From radiance-general@radiance-online.org  Sun May 25 17:12:11 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Sun, 25 May 2003 09:12:11 -0700
Subject: [Radiance-general] Re: Trees in the holodeck
In-Reply-To: <20030525093247.GA1576@tu-bs.de>
Message-ID: <A4544A02-8ECB-11D7-BACA-000A956D40C8@lmi.net>

> From: Thomas Bleicher <t.bleicher@tu-bs.de>
>
> Sorry if this is old news (I have only the 3r1p20 source installed at
> the moment). I had a quick look at src/common/rglsurf.c and I think 
> there
> are some missing "glPopMatrix()" calls:
>
> In o_cone (and o_ring) is this sequence (line 266 in my file):
>
>    glPushMatrix();
>                                    /* do base translation */
>    glTranslated((GLdouble)o->oargs.farg[0], (GLdouble)o->oargs.farg[1],
>                     (GLdouble)o->oargs.farg[2]);
>                                    /* compute height & rotation angle 
> */
>    h = sqrt(dist2(o->oargs.farg,o->oargs.farg+3));
>    if (h <= FTINY)
>        return;
>
> If this test returns 1 (ie. a "flat" cylinder) glPopMatrix() is
> never called but the system is already translated. This will at least
> misplace all of the following objects (up to the next "glLoadIdentity")
> and it should raise an error when buffers are swaped. IIRC "Pushes"
> and "Pops" have to match up.

Brilliant, Thomas!  I don't know why I didn't spot this when looking at 
the code last night -- I did check my push and pop calls, but neglected 
to look at the error returns.  Indeed, this is a serious bug!  
Unfortunately, it doesn't seem to be the one causing all the troubles, 
as I hopefully tried a fix to it this morning and came up with the same 
misplaced cylinders in my renderings, but maybe Randolph will have 
better luck.  I have uploaded both fixes to the CVS tree.

Thanks a lot!
-Greg


From radiance-general@radiance-online.org  Sun May 25 21:06:30 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Sun, 25 May 2003 13:06:30 -0700
Subject: [Radiance-general] Re: indirect/direct photometric
In-Reply-To: <1F44AF40-8E7C-11D7-A1EB-000A95871DF2@mac.com>
Message-ID: <603953A4-8EEC-11D7-8F31-000A956D40C8@lmi.net>

> From: John An <whollycow@mac.com>
>
> I was following the instructions in Section 5.3.2.  It noted that for 
> direct/indirect luminaires, this special method should be used.  
> Besides, when I tried using the ies2rad command without modifying the 
> results, I ended up with visible geometry emitting the light.  While I 
> don't have a luminaire modeled yet, I eventually want to be able to 
> look at the luminaire once it is modeled, so I assumed that altering 
> the output of ies2rad so that an illum would eventually envelop the 
> luminaire was the way to go.  Is there a better way of doing this?
>
> Also, when I examined the dimensions of the luminaire contained in the 
> .ies file, it showed that the height was 0.  I'm assuming that the 
> height of 0 is to address the shadow banding effect.  However, a 
> non-existent height would mean that the geometry resulting from the 
> ies2rad would never enclose the geometry of the luminaire unless the 
> output of the ies2rad file was modified.
>
> So I guess my question now is, what is the best process of mapping the 
> photometric data to a 'complex' luminaire so that the luminaire is 
> visible?

Some improvements have been made to ies2rad since the book was 
published, and direct/indirect fixtures should produce better 
renderings now, I believe.

However, if you want to insert your own visible luminaire geometry, the 
-i option is the way, but do not replace the geometry that ies2rad 
produces.  Instead, make sure that the illum sphere you specify 
encloses the geometry you add for your visible fixture, and create this 
fixture using "glow" modifiers for the emitting surfaces rather than 
"light" or "illum" materials.

I hope this helps.
-Greg


From radiance-general@radiance-online.org  Sun May 25 22:46:06 2003
From: radiance-general@radiance-online.org (Marcus Jacobs)
Date: Sun, 25 May 2003 21:46:06 +0000
Subject: [Radiance-general] RPICT problem on Linux
Message-ID: <BAY2-F111s3lCpBkBND0001223a@hotmail.com>

I am recieving an error when running both RAD and RPICT on KNOPPIX Linux. 
This flavor of Linux is based on Debian Linux and is run on my computer via 
a boot CD. When running rpict or rad the following error message occurs:

rpict: system - cannot open header file "/usr/tmp/rtDjYQSQ": No such file or 
directory

I have run rpict on KNOPPIX many times and I have never recieved this error. 
Now all of a sudden, I cant run anything. This is why it is so frustrating 
because I can not ever diagnose what the problem is. To let you know, I have 
set the path of RAYPATH and this does not seem to help. I have run the same 
files on the Windows version of Radaince and I have recieved no such errors.

Thanks

Marcus D. Jacobs

_________________________________________________________________
MSN 8 with e-mail virus protection service: 2 months FREE*  
http://join.msn.com/?page=features/virus


From radiance-general@radiance-online.org  Sun May 25 23:12:51 2003
From: radiance-general@radiance-online.org (Georg Mischler)
Date: Sun, 25 May 2003 18:12:51 -0400 (EDT)
Subject: [Radiance-general] RPICT problem on Linux
In-Reply-To: <BAY2-F111s3lCpBkBND0001223a@hotmail.com>
Message-ID: <Pine.BSF.4.44.0305251804560.92627-100000@emancholl.pair.com>

Marcus Jacobs wrote:

> I am recieving an error when running both RAD and RPICT on KNOPPIX Linux.
> This flavor of Linux is based on Debian Linux and is run on my computer via
> a boot CD. When running rpict or rad the following error message occurs:
>
> rpict: system - cannot open header file "/usr/tmp/rtDjYQSQ": No such file or
> directory
>
> I have run rpict on KNOPPIX many times and I have never recieved this error.
> Now all of a sudden, I cant run anything. This is why it is so frustrating
> because I can not ever diagnose what the problem is. To let you know, I have
> set the path of RAYPATH and this does not seem to help. I have run the same
> files on the Windows version of Radaince and I have recieved no such errors.


On unix systems, Radiance insists on storing its temporary
files in "/usr/tmp". Some Linux installations don't have this
directory, working with the more standards conforming "/var/tmp"
instead. Looks like you are currently running such a system.

I think that Radiance should be more flexible in this point, but
for the moment, it will be enough for you to create a symbolic
link pointing from "/usr/tmp" to "/var/tmp", like this:

$> ln -s /var/tmp /usr/tmp

Obviously, you need to be root do this.  Once that link is in
place, your problem will go away.


-schorsch

-- 
Georg Mischler  --  simulations developer  --  schorsch at schorsch com
+schorsch.com+  --  lighting design tools  --  http://www.schorsch.com/


From radiance-general@radiance-online.org  Mon May 26 02:25:19 2003
From: radiance-general@radiance-online.org (Randolph Fritz)
Date: Sun, 25 May 2003 18:25:19 -0700
Subject: [Radiance-general] Re: Trees in the holodeck
In-Reply-To: <A4544A02-8ECB-11D7-BACA-000A956D40C8@lmi.net>
Message-ID: <E9CADFBC-8F18-11D7-8678-0030658EA95E@panix.com>

I tried it on my Mac with a Radeon 9000 card, and the forest has gotten 
considerably smaller--I'm down to two "trees", both much shorter.  Does 
anyone have non-ATI OpenGL hardware for a check?  Also, looking at the 
code, I wonder--wouldn't that comparison with FTINY be unreliable where 
the arguments of dist2 are very large?  Would that occur under any 
circumstances, perhaps with angles near the quarters?

Randolph

On Sunday, May 25, 2003, at 09:12  AM, Greg Ward wrote:

>> From: Thomas Bleicher <t.bleicher@tu-bs.de>
>>
>> Sorry if this is old news (I have only the 3r1p20 source installed at
>> the moment). I had a quick look at src/common/rglsurf.c and I think 
>> there
>> are some missing "glPopMatrix()" calls:
>>
>> In o_cone (and o_ring) is this sequence (line 266 in my file):
>>
>>    glPushMatrix();
>>                                    /* do base translation */
>>    glTranslated((GLdouble)o->oargs.farg[0], 
>> (GLdouble)o->oargs.farg[1],
>>                     (GLdouble)o->oargs.farg[2]);
>>                                    /* compute height & rotation angle 
>> */
>>    h = sqrt(dist2(o->oargs.farg,o->oargs.farg+3));
>>    if (h <= FTINY)
>>        return;
>>
>> If this test returns 1 (ie. a "flat" cylinder) glPopMatrix() is
>> never called but the system is already translated. This will at least
>> misplace all of the following objects (up to the next 
>> "glLoadIdentity")
>> and it should raise an error when buffers are swaped. IIRC "Pushes"
>> and "Pops" have to match up.
>
> Brilliant, Thomas!  I don't know why I didn't spot this when looking 
> at the code last night -- I did check my push and pop calls, but 
> neglected to look at the error returns.  Indeed, this is a serious 
> bug!  Unfortunately, it doesn't seem to be the one causing all the 
> troubles, as I hopefully tried a fix to it this morning and came up 
> with the same misplaced cylinders in my renderings, but maybe Randolph 
> will have better luck.  I have uploaded both fixes to the CVS tree.
>
> Thanks a lot!
> -Greg
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
>


From radiance-general@radiance-online.org  Mon May 26 15:14:41 2003
From: radiance-general@radiance-online.org (John An)
Date: Mon, 26 May 2003 10:14:41 -0400
Subject: [Radiance-general] Re: direct/indirect photometric
In-Reply-To: <20030526100002.14563.16038.Mailman@darkside-animation.com>
Message-ID: <64BA95DC-8F84-11D7-8A05-000A95871DF2@mac.com>

>
> Some improvements have been made to ies2rad since the book was
> published, and direct/indirect fixtures should produce better
> renderings now, I believe.
>
> However, if you want to insert your own visible luminaire geometry, the
> -i option is the way, but do not replace the geometry that ies2rad
> produces.  Instead, make sure that the illum sphere you specify
> encloses the geometry you add for your visible fixture, and create this
> fixture using "glow" modifiers for the emitting surfaces rather than
> "light" or "illum" materials.
>
> I hope this helps.
> -Greg
>
>

Greg,

Wouldn't I need to modify the illum sphere when I'm creating a linear 
fluorescent luminaire so that the illum geometry fits tightly around 
the long luminaire?  Is it ok to create a sphere with a radius of 2 
feet for a 4 feet long luminaire, and then just leave it alone?


John


From radiance-general@radiance-online.org  Mon May 26 17:02:47 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Mon, 26 May 2003 09:02:47 -0700
Subject: [Radiance-general] Re: direct/indirect photometric
In-Reply-To: <64BA95DC-8F84-11D7-8A05-000A95871DF2@mac.com>
Message-ID: <7E58FF8C-8F93-11D7-853F-000A956D40C8@lmi.net>

Hi John,

You have a point, especially since the illum sphere will never be 
subdivided during source sampling -- i.e., its distribution will always 
eminate from a point.  However, you must do one thing if you substitute 
the geometry for a fixture; you must multiply the A1 scalefactor in the 
brightdata primitive by the ratio of the illum sphere area divided by 
the illum replacement geometry area, or the total lumens will not be 
maintained during the switch.  Alternatively, you can specify an illum 
radius whose area (4*PI*radius^2) exactly equals the area of the 
replacement geometry.

-Greg

> From: John An <whollycow@mac.com>
>
> Wouldn't I need to modify the illum sphere when I'm creating a linear 
> fluorescent luminaire so that the illum geometry fits tightly around 
> the long luminaire?  Is it ok to create a sphere with a radius of 2 
> feet for a 4 feet long luminaire, and then just leave it alone?


From radiance-general@radiance-online.org  Tue May 27 17:43:33 2003
From: radiance-general@radiance-online.org (Charles Ehrlich)
Date: Tue, 27 May 2003 09:43:33 -0700 (PDT)
Subject: [Radiance-general] Re: direct/indirect photometric
In-Reply-To: <20030527100002.17275.11978.Mailman@darkside-animation.com>
Message-ID: <20030527164333.26384.qmail@web80313.mail.yahoo.com>

--0-86368613-1054053813=:25620
Content-Type: text/plain; charset=us-ascii

Greg and John An, Unless the new version of Radiance is significantly different that when I wrote chapter 5, I do not think that you need to change A1 if you follow the method described in the book.  The method was specifically designed to address linear sources.  It is also the method employed in the luminaire editor in Desktop Radiance. Is it still true that the "lboxcorr" function automatically corrects for the surface area of the emitter?  If not, then we have a major re-write on our hands for the new edition. -Chas

radiance-general-request@radiance-online.org wrote:
Date: Mon, 26 May 2003 09:02:47 -0700
Subject: Re: [Radiance-general] Re: direct/indirect photometric
From: Greg Ward 
To: radiance-general@radiance-online.org
Reply-To: radiance-general@radiance-online.org

Hi John,

You have a point, especially since the illum sphere will never be 
subdivided during source sampling -- i.e., its distribution will always 
eminate from a point. However, you must do one thing if you substitute 
the geometry for a fixture; you must multiply the A1 scalefactor in the 
brightdata primitive by the ratio of the illum sphere area divided by 
the illum replacement geometry area, or the total lumens will not be 
maintained during the switch. Alternatively, you can specify an illum 
radius whose area (4*PI*radius^2) exactly equals the area of the 
replacement geometry.

-Greg

> From: John An 
>
> Wouldn't I need to modify the illum sphere when I'm creating a linear 
> fluorescent luminaire so that the illum geometry fits tightly around 
> the long luminaire? Is it ok to create a sphere with a radius of 2 
> feet for a 4 feet long luminaire, and then just leave it alone?



--__--__--

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general


End of Radiance-general Digest
--0-86368613-1054053813=:25620
Content-Type: text/html; charset=us-ascii

<DIV>Greg and John An,</DIV>
<DIV>&nbsp;</DIV>
<DIV>Unless the new version of Radiance is significantly different that when I wrote chapter 5, I do not think that you need to change A1 if you follow the method described in the book.&nbsp; The method was specifically designed to address linear sources.&nbsp; It is also the method employed in the luminaire editor in Desktop Radiance.</DIV>
<DIV>&nbsp;</DIV>
<DIV>Is it still true that the "lboxcorr" function automatically corrects for the surface area of the emitter?&nbsp; If not, then we have a major re-write on our hands for the new edition.</DIV>
<DIV>&nbsp;</DIV>
<DIV>-Chas<BR><BR><B><I>radiance-general-request@radiance-online.org</I></B> wrote:</DIV>
<BLOCKQUOTE style="PADDING-LEFT: 5px; MARGIN-LEFT: 5px; BORDER-LEFT: #1010ff 2px solid"><BR>Date: Mon, 26 May 2003 09:02:47 -0700<BR>Subject: Re: [Radiance-general] Re: direct/indirect photometric<BR>From: Greg Ward <GWARD@LMI.NET><BR>To: radiance-general@radiance-online.org<BR>Reply-To: radiance-general@radiance-online.org<BR><BR>Hi John,<BR><BR>You have a point, especially since the illum sphere will never be <BR>subdivided during source sampling -- i.e., its distribution will always <BR>eminate from a point. However, you must do one thing if you substitute <BR>the geometry for a fixture; you must multiply the A1 scalefactor in the <BR>brightdata primitive by the ratio of the illum sphere area divided by <BR>the illum replacement geometry area, or the total lumens will not be <BR>maintained during the switch. Alternatively, you can specify an illum <BR>radius whose area (4*PI*radius^2) exactly equals the area of the <BR>replacement geometry.<BR><BR>-Greg<BR><BR>&gt; From: John An <WHOLLYCOW@MAC.COM><BR>&gt;<BR>&gt; Wouldn't I need to modify the illum sphere when I'm creating a linear <BR>&gt; fluorescent luminaire so that the illum geometry fits tightly around <BR>&gt; the long luminaire? Is it ok to create a sphere with a radius of 2 <BR>&gt; feet for a 4 feet long luminaire, and then just leave it alone?<BR><BR><BR><BR>--__--__--<BR><BR>_______________________________________________<BR>Radiance-general mailing list<BR>Radiance-general@radiance-online.org<BR>http://www.radiance-online.org/mailman/listinfo/radiance-general<BR><BR><BR>End of Radiance-general Digest</BLOCKQUOTE>
--0-86368613-1054053813=:25620--

From radiance-general@radiance-online.org  Thu May 29 17:04:44 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Thu, 29 May 2003 09:04:44 -0700
Subject: [Radiance-general] Re: direct/indirect photometric
In-Reply-To: <20030527164333.26384.qmail@web80313.mail.yahoo.com>
Message-ID: <43503280-91EF-11D7-AC8D-000A956D40C8@lmi.net>

Hi Chas,

You are right -- I had forgotten this feature of lboxcorr (and 
boxcorr).  There is a caveat, though, which is using the -i value of 
0.56419 requires that you be working in meters, and likewise the box 
dimensions must also be specified in meters for the units to work out 
correctly.  In this case, the A1 parameter gets set to 1 by ies2rad and 
the lboxcorr applies the correction.  (Remember that the box must be 
centered at the origin for lboxcorr to work properly.)

-Greg

> From: Charles Ehrlich <ckehrlich@yahoo.com>
>
> Greg and John An,
>  
> Unless the new version of Radiance is significantly different that 
> when I wrote chapter 5, I do not think that you need to change A1 if 
> you follow the method described in the book.  The method was 
> specifically designed to address linear sources.  It is also the 
> method employed in the luminaire editor in Desktop Radiance.
>  
> Is it still true that the "lboxcorr" function automatically corrects 
> for the surface area of the emitter?  If not, then we have a major 
> re-write on our hands for the new edition.
>  
> -Chas
>



From radiance-general@radiance-online.org  Fri May 30 00:04:27 2003
From: radiance-general@radiance-online.org (Fitzsimmons, Rob)
Date: Thu, 29 May 2003 16:04:27 -0700
Subject: [Radiance-general] Rendering with HDR probes
Message-ID: <7B2F6EA5E35E214882CB9828962BC3CF0224A320@corvallis.summit.fiserv.com>

I've been playing with Paul Debevec's image based rendering and had some
questions..

http://www.geocities.com/rastermon/StPeters.html
I've rendered these images with rif settings:

QUALITY=h
RESOLUTION=1024	1024 0 
REPORT= 10 house.err
INDIRECT= 3
PENUMBRAS= F
DETAIL=h
VARIABILITY= h
AMBFILE= house.amb
render= -av .1 .1 .1

Why is it so spotty?  the HDR is 1500 x 1500 pixels - could res effect the
quality?

I've also notice that I'll need to rotate  the glowing HDR box 90 degrees on
X (I think)

Any tips? I'm sure there are people who have used this well.

Thanks 
Rob Fitz


From radiance-general@radiance-online.org  Fri May 30 00:22:08 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Thu, 29 May 2003 16:22:08 -0700
Subject: [Radiance-general] Re: Rendering with HDR probes
In-Reply-To: <7B2F6EA5E35E214882CB9828962BC3CF0224A320@corvallis.summit.fiserv.com>
Message-ID: <5DD48810-922C-11D7-AFAD-000A956D40C8@lmi.net>

Hi Rob,

The most probably cause of spots from image-based lighting is the 
concentration of illumination from certain small areas.  You need to 
discover these somehow and convert them to illum's or light's or else 
increase your -ad parameter to something very large (and increase -as 
while you're at it) to integrate them properly.

-Greg


> From: "Fitzsimmons, Rob" <Rob.Fitzsimmons@Summit.Fiserv.com>
>
> I've been playing with Paul Debevec's image based rendering and had 
> some
> questions..
>
> http://www.geocities.com/rastermon/StPeters.html
> I've rendered these images with rif settings:
>
> QUALITY=h
> RESOLUTION=1024	1024 0
> REPORT= 10 house.err
> INDIRECT= 3
> PENUMBRAS= F
> DETAIL=h
> VARIABILITY= h
> AMBFILE= house.amb
> render= -av .1 .1 .1
>
> Why is it so spotty?  the HDR is 1500 x 1500 pixels - could res effect 
> the
> quality?
>
> I've also notice that I'll need to rotate  the glowing HDR box 90 
> degrees on
> X (I think)
>
> Any tips? I'm sure there are people who have used this well.
>
> Thanks
> Rob Fitz


From radiance-general@radiance-online.org  Fri May 30 03:40:25 2003
From: radiance-general@radiance-online.org (Marcus Jacobs)
Date: Fri, 30 May 2003 02:40:25 +0000
Subject: [Radiance-general] Radiance - Mac Performance
Message-ID: <BAY2-F120DBRArVc4Iu00000916@hotmail.com>

Dear Group

I am in the evaluation phase in my quest to purchase a new computer. From 
what I have been told, the Motorola G4 processor is far superior in 
scientific calculations as compared to x-86 based processors (i.e. 
Intel/AMD). If it weren't for the existing investment that I have in PC 
based software (particularly software that utilizes a dongle which will not 
work on a Mac even with virtual PC), I would probably purchase one. But 
because of the existing investment that I do have in PC based software, I am 
trying to do a cost versus benifit analysis for purchasing a Mac. Has anyone 
here been able to do a rough estimate as to the decrease in rendering time 
when using a Mac as compared to x-86 based processors. I was considering in 
lieu of purchasing a Mac, I would purchase a dual Pentium 4 Zeon and compile 
it on Linux. If I am correct, the GNU C compiler has a SSE2 optimization 
option. Also I have l have looked at puchasing a AMDs 64 bit Opteron based 
workstation. I do believe there can be some performance gains achieved if it 
can be used in conjunction with a 64 bit Operating System. Anyway, you all 
can see that i am very confused as to which direction I should take so any 
advice is very much appreciated.

Thanks

Marcus D. Jacobs

_________________________________________________________________
Add photos to your messages with MSN 8. Get 2 months FREE*.  
http://join.msn.com/?page=features/featuredemail


From radiance-general@radiance-online.org  Fri May 30 04:41:07 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Thu, 29 May 2003 23:41:07 -0400
Subject: [Radiance-general] Radiance - Mac Performance
In-Reply-To: <BAY2-F120DBRArVc4Iu00000916@hotmail.com>
Message-ID: <8C25EF2A-9250-11D7-B9F1-000393824274@rumblestrip.org>

On Thursday, May 29, 2003, at 10:40 PM, Marcus Jacobs wrote:
> I am in the evaluation phase in my quest to purchase a new computer.  
> From what I have been told, the Motorola G4 processor is far superior  
> in scientific calculations as compared to x-86 based processors (i.e.  
> Intel/AMD).

I was told similar, on this list in fact.  But the thing is, while that  
may be true in theory, the bang for the buck king of the hill is still  
over at AMD.  Here is my very unscientific and newbie-esque story:  I  
learned about the wonders of  OS X thru Greg Ward; I had plunked my  
head in the Intel/Lightscape sand for years.  But after talking to him  
about OS X I learned that it was a user friendly UNIX, and that is what  
appealed to me the most, not any theoretical pipeline/gigaflop  
superiority.  I bought a G4 PowerBook over a year ago, and was thrilled  
with the performance, but I was still learning, loading pretty small  
models.

Back in October of last year, I started using Radiance in production,  
and saw that the time was near that I would need to have a dedicated  
machine to run Radiance calcs, so I loaded RHL on an old Pentium 450 we  
had lying around.  The calc times on that were about the same as the  
times on my PowerBook, which is a G4 550 with 512MB of RAM.  I was told  
there was probably something wrong with my hardware (stop laughing at  
the double-entendre), but a trip to Mark Stock's Radiance timings  
webpage (http://mark.technolope.org/pages/rad_bench.html) will tell a  
similar tale.  The simple fact of the matter is that you can buy more  
Radiance-photon-number-crunching-per-dollar/euro/drachma/sheckel-what- 
have-you with homebuilt PCs than you can with Apple's hardware.  That's  
not to say that Macs are crap.  I love my Mac.  But where speed is  
king, in floating point land, I have experienced better calc-per-dollar  
in the AMD world than that of Apple.

> If it weren't for the existing investment that I have in PC based  
> software (particularly software that utilizes a dongle which will not  
> work on a Mac even with virtual PC)...

Virtually Useless PC should be banned.  It is too slow to run Notepad  
efficiently, much less anything actual humans need to use to get some  
work done.

>  I would probably purchase one. But because of the existing investment  
> that I do have in PC based software, I am trying to do a cost versus  
> benifit analysis for purchasing a Mac. Has anyone here been able to do  
> a rough estimate as to the decrease in rendering time when using a Mac  
> as compared to x-86 based processors. I was considering in lieu of  
> purchasing a Mac, I would purchase a dual Pentium 4 Zeon and compile  
> it on Linux. If I am correct, the GNU C compiler has a SSE2  
> optimization option.

I would think the Zeon would outperform the G4, dollar for dollar.  But  
I'd bet AMD can do even better.

> Also I have l have looked at puchasing a AMDs 64 bit Opteron based  
> workstation. I do believe there can be some performance gains achieved  
> if it can be used in conjunction with a 64 bit Operating System.  
> Anyway, you all can see that i am very confused as to which direction  
> I should take so any advice is very much appreciated.

Now here is a new horizon that I too am very interested in.  I read  
with delight the tales of joy surrounding the release of the Opteron.   
SuSE already has a 64 bit version of Linux, and I for one am unclear on  
what that means for us Radiance people.  I'd love to hear some insight  
about what the 64-bit movement means in terms of performance for the  
typical rpict process. =8-)

Rob Guglielmetti
rpg@rumblestrip.org
www.rumblestrip.org


From radiance-general@radiance-online.org  Fri May 30 05:38:16 2003
From: radiance-general@radiance-online.org (Randolph Fritz)
Date: Thu, 29 May 2003 21:38:16 -0700
Subject: [Radiance-general] Radiance - Mac Performance
In-Reply-To: <8C25EF2A-9250-11D7-B9F1-000393824274@rumblestrip.org>
Message-ID: <880A0FD0-9258-11D7-9002-0030658EA95E@panix.com>

On Thursday, May 29, 2003, at 08:41  PM, Rob Guglielmetti wrote:

> Now here is a new horizon that I too am very interested in.  I read 
> with delight the tales of joy surrounding the release of the Opteron.  
> SuSE already has a 64 bit version of Linux, and I for one am unclear 
> on what that means for us Radiance people.  I'd love to hear some 
> insight about what the 64-bit movement means in terms of performance 
> for the typical rpict process. =8-)

I'd be very cautious about it, at this time.  Greg knows a lot more 
than I do, of course, but my guess is that compiling Radiance with 
64-bit integers and floats would probably show unexpected word-length 
dependencies.  Even so, I'd expect computation speeds to improve 
because of some technical aspects of the C language.

A rewrite of rholo to make use of a 64- (or even 48-) bit address space 
would also probably be interesting to experiment with.

Randolph


From radiance-general@radiance-online.org  Fri May 30 06:19:57 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Thu, 29 May 2003 22:19:57 -0700
Subject: [Radiance-general] Re: Radiance - Mac Performance
In-Reply-To: <BAY2-F120DBRArVc4Iu00000916@hotmail.com>
Message-ID: <5AB9E336-925E-11D7-92C5-000A956D40C8@lmi.net>

Hi Marcus,

Of course, I'm a big fan of Apple computers.  They offer a great 
combination of quality (i.e., sturdiness, reliability, and aesthetics) 
over Wintel computers.  However, I'm forced to agree with Rob that in 
terms of peformance vis a vis Radiance, your best value is a probably a 
home-built, dual-processor Linux box.  I very nearly got one myself, 
but decided instead to pay roughly twice as much to get a dual 1.4 GHz 
PowerMac G4 with 1 GByte of RAM and a DVD writer for about $3K.  Its 
performance and features are comparable to PCs I could have bought 
prebuilt for around $1.5K.  The advantage is that I don't have to 
administer a Linux system, which I've found in the past to be a pain in 
the butt.  Mac OS X, built on FreeBSD, is a snap by comparison, and 
what's better is I can run Word and Excel and all those other Microsoft 
nasties without having to reboot into another system.  Better still, I 
get to run Photosphere, which I've spent two years developing and don't 
have time to port to other systems right now.

The hype about the G4 being superior for scientific applications is a 
PR effort by Apple to save face for a processor that despite many 
design superiorities, just hasn't kept pace with Intel and AMD's 
aggressive speed increases.  To be fair, you can use the Altvec 
processor (a short vector SIMD on the G4) to get substantial speed 
boosts if you go to the extra work to use it.  I haven't done any 
custom hardware coding in Radiance, and I'm unlikely to in the future.  
Others are welcome, of course.

In your case, a dual-processor Wintel machine with dual-boot into Linux 
or (my recommendation) FreeBSD may be the best option with your 
existing software investment.

I don't know what a 64-bit processor will buy in terms of Radiance 
performance.  Other than getting past the 2 GByte memory addressing 
limit, there might be some improvement in floating point speed since 
you can load double's into registers, but 64-bit integers are not 
really useful as far as I'm concerned.

-Greg

> From: "Marcus Jacobs" <marcdevon@hotmail.com>
> Date: Thu May 29, 2003  7:40:25  PM US/Pacific
> To: radiance-general@radiance-online.org
> Subject: [Radiance-general] Radiance - Mac Performance
> Reply-To: radiance-general@radiance-online.org
>
> Dear Group
>
> I am in the evaluation phase in my quest to purchase a new computer. 
> From what I have been told, the Motorola G4 processor is far superior 
> in scientific calculations as compared to x-86 based processors (i.e. 
> Intel/AMD). If it weren't for the existing investment that I have in 
> PC based software (particularly software that utilizes a dongle which 
> will not work on a Mac even with virtual PC), I would probably 
> purchase one. But because of the existing investment that I do have in 
> PC based software, I am trying to do a cost versus benifit analysis 
> for purchasing a Mac. Has anyone here been able to do a rough estimate 
> as to the decrease in rendering time when using a Mac as compared to 
> x-86 based processors. I was considering in lieu of purchasing a Mac, 
> I would purchase a dual Pentium 4 Zeon and compile it on Linux. If I 
> am correct, the GNU C compiler has a SSE2 optimization option. Also I 
> have l have looked at puchasing a AMDs 64 bit Opteron based 
> workstation. I do believe there can be some performance gains achieved 
> if it can be used in conjunction with a 64 bit Operating System. 
> Anyway, you all can see that i am very confused as to which direction 
> I should take so any advice is very much appreciated.
>
> Thanks
>
> Marcus D. Jacobs


From radiance-general@radiance-online.org  Fri May 30 17:34:25 2003
From: radiance-general@radiance-online.org (Jeffrey McGrew)
Date: Fri, 30 May 2003 09:34:25 -0700
Subject: [Radiance-general] RE: Radiance-general digest, Vol 1 #288 - 7 msgs
Message-ID: <14F4D3C7236B9C42B381D1F66D78C6D9A0907A@hunt-exch-01.huntsmanag.com>

> From: Greg Ward <gward@lmi.net>
>
> However, I'm forced to agree with Rob that in 
> terms of peformance vis a vis Radiance, your best value is a 
> probably a home-built, dual-processor Linux box.

I'm a Radiance Newbie myself, but I've got a little insight
on this. I've got a dual Athlon MP Linux Box, running
Mandrake, and my Wife has a G4 800 Mac running OS X.

I'm an Architect; she's a Graphic Designer.
I use my box for 3D and CAD; She uses hers for Graphic
and Web Design, and lets me test software on it, for I'm
very interested in having my next computer be a Mac.

My computer wins when it comes to rendering. Hands down.
Her G4 800 can't compete with the dual Athlon, and my
box new cost what hers did used at about one year old.

However, her computer wins in usability. Photoshop is
much faster on her machine, and she can be doing four
things at once, and burn a CD without Itunes skipping
the MP3's coming off of the server. :)

Also her computer is vastly easier to take care of
(something is always broken on my Linux box it seems),
looks a heck of a lot cooler, has some better features
hardware-wise (like Firewire, everything's USB, ect.),
and is much quieter. I think there are five or more
fans in my box to cool the dual Athlons; it sounds like
a damn turbojet when you start it up; her computer
you wouldn't even know it was on if it weren't for
the big glowing light on the front.

And with a Linux Server and Samba, we can have
her Mac, and my dual boot Windows/Linux box
talk without issue, share files, printers, ect.

> I very nearly got one myself, 
> but decided instead to pay roughly twice as much to get a 
> dual 1.4 GHz 
> PowerMac G4 with 1 GByte of RAM and a DVD writer for about $3K.

My next computer will probably still be a Mac, depending if the
CAD software I use is ported to it or not. Then, my current
dual-boot box will become the Radiance server, and I'll use
the Mac for the modeling. I'm not running production jobs
on Radiance yet; it's more occasional use as needs demand,
and so I fall into that usability is more important than
speed camp. And Macs win out on that.

But, if speed is what is the most important, than go with
the AMD dual boards. 

> In your case, a dual-processor Wintel machine with dual-boot 
> into Linux 
> or (my recommendation) FreeBSD may be the best option with your 
> existing software investment.

I concur. This is the set-up I've got; a dual-boot machine, and
with the newer Linux Distros such as Red Hat or, my fav, Mandrake,
setting up a dual-boot box is pretty trivial (not like it used to be). 

> I don't know what a 64-bit processor will buy in terms of Radiance 
> performance.  Other than getting past the 2 GByte memory addressing 
> limit, there might be some improvement in floating point speed since 
> you can load double's into registers, but 64-bit integers are not 
> really useful as far as I'm concerned.

I know people in the CAD world are excited about the 64-bit systems
mostly for the effect they will have on the relational databases
that run under the hoods of our systems, and the ability to have
a frightening amount of RAM.

But, if any of the rumors about the new IBM processors that will be
going into Macs later this year are true, then Mac could quite possibly
be the best of both worlds; very very fast and very very useable. :)

Jeffrey McGrew


From radiance-general@radiance-online.org  Fri May 30 20:02:29 2003
From: radiance-general@radiance-online.org (Lars Grobe)
Date: Fri, 30 May 2003 21:02:29 +0200 (MEST)
Subject: [Radiance-general] Radiance - Mac Performance
References: <8C25EF2A-9250-11D7-B9F1-000393824274@rumblestrip.org>
Message-ID: <17458.1054321349@www63.gmx.net>

Hi! 
 
First, I have just ordered my 12" Powerbook ;-) Second: my 
experience is that rendering speed depends on memory (nothing 
is as stupid as a rendering process on a fast machine waiting 
for data from the swap!!!), cpu frequency and - that is really 
important - the optimization of the compiler you are using! 
 
I couldn't find great imporvements with radiance on 64bit so far. 
 
However, one thing to mention - a stable 800MHz machine doing three 
renderings over night is much more performant than a 3200MHz 
machine which crashes three timer per rendering ;-) In my personal 
experience, the "rendering speed" is not the critical point any more 
in our days, much more is the stability of machines. I put 90% into 
the preparation of a rendering, and only 10% in the actual render 
process ;-) 
 
So, these were some thoughts of someone who prefers to render his 
pics on an old AMD K6-2 300 ;-) CU Lars. 

-- 
+++ GMX - Mail, Messaging & more  http://www.gmx.net +++
Bitte lächeln! Fotogalerie online mit GMX ohne eigene Homepage!


From radiance-general@radiance-online.org  Fri May 30 20:24:37 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Fri, 30 May 2003 15:24:37 -0400
Subject: [Radiance-general] Radiance - Mac Performance
References: <8C25EF2A-9250-11D7-B9F1-000393824274@rumblestrip.org> <17458.1054321349@www63.gmx.net>
Message-ID: <3ED7AFF5.3000806@rumblestrip.org>

Lars Grobe wrote:

> First, I have just ordered my 12" Powerbook ;-) 

Congrats!  The new 12" ones are so very adorable.  The aluminum cases 
are georgeous; the finish on my Ti PowerBook started flaking pretty 
early on, I'm glad they did something about it.

Second: my
> experience is that rendering speed depends on memory (nothing 
> is as stupid as a rendering process on a fast machine waiting 
> for data from the swap!!!)...

Oh definitely; I think we're all making "rendering comparisons" of 
machines that are *not* relying on virtual memory at all.  At least I 
was always talking about relatively small models.

> However, one thing to mention - a stable 800MHz machine doing three 
> renderings over night is much more performant than a 3200MHz 
> machine which crashes three timer per rendering ;-) 

Agreed, but stability has not been an issue for me at all.  The 
computer, I mean. =8-)

Also, Greg and Jeffrey mention one BIG thing about OS X that I did not: 
  the OS is just so darn easy to administer!!  So, that should surely 
weigh in to the equation.  With OS X, all I did was load the Radiance 
binaries and start using Radiance.  I was able to jump into Radiance 
without spelunking into the depths of /etc, learning enough unix to get 
by, and experimenting as time allowed.  It's like unix with training 
wheels.  It's just that for me, speed is king and money is in short 
supply, so I put up with Linux.  Still prefer working on the Mac tho. 
Jeffrey, if you find any good CAD applications that run on OS X do let 
us know.

----

      Rob Guglielmetti

e. rpg@rumblestrip.org
w. www.rumblestrip.org


From radiance-general@radiance-online.org  Fri May 30 20:40:42 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Fri, 30 May 2003 15:40:42 -0400
Subject: [Radiance-general] physically-based landscapes
Message-ID: <3ED7B3BA.3000600@rumblestrip.org>

I have to create some renderings of a space, which offers panoramic 
views of a distant mountain range.  We're doing some glare studies, so 
the luminance of the mountain is important to me.

I could model the mountains, but because they are so far from my model 
I'll get ambient leaks, right?  Is there some way to exclude the distant 
geometry from adding values to the ambient cache?  I'm interested in 
doing some daylight animations, so if I could do it with representative 
3D geometry (vs. using a texture map) I'd be ever so happy.

Failing that, is there a way to apply a picture of the mountains to a 
local object?  My concern there is that if I have a large object close 
to the window it will reflect more light into the space than what would 
actually happen, with the mountain a mile away.

Any pointers appreciated.

P.S.  If I had a lightmap of this site, could I use it to do an 
image-based rendering?  All the image-based renderings I've seen are of 
objects being directly illuminated by the lightmap.   But if I put a 
local ground plane and my building into the center of a lightmap, would 
the interreflection be computed, and the interior of the space be 
rendered properly?  Would it be "accurate"?

----

      Rob Guglielmetti

e. rpg@rumblestrip.org
w. www.rumblestrip.org


From radiance-general@radiance-online.org  Fri May 30 21:21:45 2003
From: radiance-general@radiance-online.org (Lars Grobe)
Date: Fri, 30 May 2003 22:21:45 +0200 (MEST)
Subject: [Radiance-general] Radiance - Mac Performance
References: <3ED7AFF5.3000806@rumblestrip.org>
Message-ID: <704.1054326105@www2.gmx.net>

> Jeffrey, if you find any good CAD applications that run on OS X do let  
> us know. 
 
For Radiance models, formZ is a great tool. CU Lars. 

-- 
+++ GMX - Mail, Messaging & more  http://www.gmx.net +++
Bitte lächeln! Fotogalerie online mit GMX ohne eigene Homepage!


From radiance-general@radiance-online.org  Fri May 30 23:41:32 2003
From: radiance-general@radiance-online.org (Randolph Fritz)
Date: Fri, 30 May 2003 15:41:32 -0700
Subject: [Radiance-general] Radiance - Mac Performance
In-Reply-To: <3ED7AFF5.3000806@rumblestrip.org>
Message-ID: <DC5AC0B0-92EF-11D7-9002-0030658EA95E@panix.com>

On Friday, May 30, 2003, at 12:24  PM, Rob Guglielmetti wrote:
> if you find any good CAD applications that run on OS X do let us know.

I have good reports of SketchUp 3D, though I haven't used it myself.  
<http://www.sketchup.com/>

Randolph


From radiance-general@radiance-online.org  Sat May 31 04:25:38 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Fri, 30 May 2003 20:25:38 -0700
Subject: [Radiance-general] Radiance - Mac Performance
In-Reply-To: <DC5AC0B0-92EF-11D7-9002-0030658EA95E@panix.com>
Message-ID: <8CDDAAAB-9317-11D7-A123-000A956D40C8@lmi.net>

I gave SketchUp a try as it has a free demo for OS X, and it seems 
fairly capable.  It's certainly simple enough, and it outputs .3ds 
format, which you can convert to MGF using 3ds2mgf and then to Radiance 
with mgf2rad.  It's material model is by layers, but that should work 
for most basic applications.  I'm really not a CAD user, but watching 
the short online tutorial was enough that I was able to create simple 
shapes and join them up right away.  If you're a casual as opposed to a 
serious CAD user, it seems like a good way to go for simple models.  
The fact that they give you a fully functional demo that lasts for 8 
hours of use is nice as well.  The license cost is around $700.

-Greg

> From: Randolph Fritz <randolph@panix.com>
> Date: Fri May 30, 2003  3:41:32  PM US/Pacific
> To: radiance-general@radiance-online.org
> Subject: Re: [Radiance-general] Radiance - Mac Performance
> Reply-To: radiance-general@radiance-online.org
>
>
> On Friday, May 30, 2003, at 12:24  PM, Rob Guglielmetti wrote:
>> if you find any good CAD applications that run on OS X do let us know.
>
> I have good reports of SketchUp 3D, though I haven't used it myself.  
> <http://www.sketchup.com/>
>
> Randolph


From radiance-general@radiance-online.org  Sat May 31 04:58:49 2003
From: radiance-general@radiance-online.org (Randolph Fritz)
Date: Fri, 30 May 2003 20:58:49 -0700
Subject: [Radiance-general] Radiance - Mac Performance
In-Reply-To: <8CDDAAAB-9317-11D7-A123-000A956D40C8@lmi.net>
Message-ID: <2F4FD92C-931C-11D7-B240-0030658EA95E@panix.com>

On Friday, May 30, 2003, at 08:25  PM, Greg Ward wrote:

> I gave SketchUp a try as it has a free demo for OS X, and it seems 
> fairly capable.  It's certainly simple enough, and it outputs .3ds 
> format, which you can convert to MGF using 3ds2mgf and then to 
> Radiance with mgf2rad.  It's material model is by layers, but that 
> should work for most basic applications.  I'm really not a CAD user, 
> but watching the short online tutorial was enough that I was able to 
> create simple shapes and join them up right away.  If you're a casual 
> as opposed to a serious CAD user, it seems like a good way to go for 
> simple models.  The fact that they give you a fully functional demo 
> that lasts for 8 hours of use is nice as well.  The license cost is 
> around $700.

Thanks for the quick review and study of Radiance compatibility.  
Clarification: do you mean that its native format is 3DS?  or does it 
export to 3DS format?

I know of a major Portland Oregon architecture firm that brought in one 
copy of SketchUp and, over the next few months, the whole office 
switched, so--at least for their type of design--it's probably a 
capable tool for schematic design as well as simple lighting study 
models.

Randolph


From radiance-general@radiance-online.org  Sat May 31 10:45:34 2003
From: radiance-general@radiance-online.org (Carsten Bauer)
Date: Sat, 31 May 2003 09:45:34 +0000
Subject: [Radiance-general] physically-based landscapes
In-Reply-To: <3ED7B3BA.3000600@rumblestrip.org>
References: <3ED7B3BA.3000600@rumblestrip.org>
Message-ID: <200305310945.34284.cbauer-@t-online.de>

Hi Rob,

is there snow on the mountain top? Can you go skiing over there?

Excluding objects form the ambient calculation is done by setting the -ae 
parameter to the objects material name (-ae mat_name or -aE 
file_with_matnames). So excluding the mountains is no problem, the drawback 
is, that Radiance determines the resolution of its ambient cache (-ar 
setting) dependent on the scene bounding cube. So a HUUUGE bounding cube 
results in values spaced so far apart that probably only one falls into your 
room. (Unless you set up -ar extremely high, if everything outside is 
excluded, this might even work ...)

But why not tread an intermediate path: set up a 3D landscape model and render 
some pictures with it from your viewing point.  They contain the exact 
radiance values, so in a second step you can map them with colorpict to a 
plane made of  glow with fourth param set to zero, and put this plane 100 or 
200 m apart from your scene. This will keep the blowing up of the scene 
reasonable and still deliver correct results. Do some checking if the 
settings are right, i.e compare the landsscape rendering with your fake 
landscape rendering, one never knows ...)

-cb 


From radiance-general@radiance-online.org  Sat May 31 11:21:19 2003
From: radiance-general@radiance-online.org (Carsten Bauer)
Date: Sat, 31 May 2003 10:21:19 +0000
Subject: [Radiance-general] physically-based landscapes
In-Reply-To: <200305310945.34284.cbauer-@t-online.de>
References: <3ED7B3BA.3000600@rumblestrip.org> <200305310945.34284.cbauer-@t-online.de>
Message-ID: <200305311021.19390.cbauer-@t-online.de>

Hi Rob,
just one further remark: self-evidently, you have to be shure that the part of 
the hemisphere visible form the window of your scene is completely covered by 
the image/light maps. So rendering a fisheye view of the outside landscape 
and mapping this on a sphere is the preferrable way. Look throug the lib 
directory, I think there (or in one of the contributions availabel on the 
radsite) is a .cal file included which does this spherical mapping.

-cb


From radiance-general@radiance-online.org  Sat May 31 19:20:51 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Sat, 31 May 2003 11:20:51 -0700
Subject: [Radiance-general] Radiance - Mac Performance
In-Reply-To: <2F4FD92C-931C-11D7-B240-0030658EA95E@panix.com>
Message-ID: <9C05285C-9394-11D7-B946-000A956D40C8@lmi.net>

It exports to .3ds format -- the native format is its own.  I tested it 
with 3ds2mgf and it seems to work fine.  The nice thing about it is you 
can be as sloppy or as accurate as you like, and it seems pretty easy 
to go back and make changes to the model as well, since all the 
vertices and faces hold their shape as you adjust them.

-Greg

> From: Randolph Fritz <randolph@panix.com>
>
> Thanks for the quick review and study of Radiance compatibility.  
> Clarification: do you mean that its native format is 3DS?  or does it 
> export to 3DS format?
>
> I know of a major Portland Oregon architecture firm that brought in 
> one copy of SketchUp and, over the next few months, the whole office 
> switched, so--at least for their type of design--it's probably a 
> capable tool for schematic design as well as simple lighting study 
> models.


