From faridah_isa at yahoo.com  Mon Jul  4 23:01:40 2005
From: faridah_isa at yahoo.com (ida)
Date: Mon Jul  4 23:09:06 2005
Subject: [Radiance-general] Radzilla-anybody help me?
Message-ID: <20050704210140.4658.qmail@web32407.mail.mud.yahoo.com>

Hi there,

Im quite new in Radiance, I just wanna ask about the
Radzilla, after i compile using /rzoconv material.rad
> scene.zoct is ok(no error), but then when i want to
view it using /rzpict -vp 61 14 -29 -vd -3 -0.4 1 -av
.6 .6 .6  scene.zoct it come out the error which is
"illegal horizontal resolution 
"

Thanks
daz


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

From pisuke at blueyonder.co.uk  Tue Jul  5 00:22:27 2005
From: pisuke at blueyonder.co.uk (Francesco Anselmo)
Date: Tue Jul  5 00:23:33 2005
Subject: [Radiance-general] Radzilla-anybody help me?
In-Reply-To: <20050704210140.4658.qmail@web32407.mail.mud.yahoo.com>
References: <20050704210140.4658.qmail@web32407.mail.mud.yahoo.com>
Message-ID: <1120515747.2765.4.camel@leviathan>

hi daz,

On Mon, 2005-07-04 at 14:01 -0700, ida wrote:
> Im quite new in Radiance, I just wanna ask about the
> Radzilla, after i compile using /rzoconv material.rad
> > scene.zoct is ok(no error), but then when i want to
> view it using /rzpict -vp 61 14 -29 -vd -3 -0.4 1 -av
> .6 .6 .6  scene.zoct it come out the error which is
> "illegal horizontal resolution"

I'm not completely sure, but it looks like rzpict and
rzvu don't have default values for the picture size,
so you need to specify width and height with 
-x width -y height

Francesco



From faridah_isa at yahoo.com  Tue Jul  5 07:37:00 2005
From: faridah_isa at yahoo.com (ida)
Date: Tue Jul  5 07:44:26 2005
Subject: [Radiance-general] Radzilla-anybody help me?
Message-ID: <20050705053700.27662.qmail@web32412.mail.mud.yahoo.com>

Thanks Francesco,
 

I have done test it by putting /rzpict -vp 61 14 -29 -vd -3 -0.4 1 -av
> .6 .6 .6  -x 600 -y 400 scene.zoct  but it come out the anonymous character (is not image). Is it having any fix value for width and height? Or is it I?m did the wrong way?

 

Thanks,

daz


		
---------------------------------
Yahoo! Mail
 Stay connected, organized, and protected. Take the tour
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20050704/5d9d8c92/attachment.htm
From Giulio.Antonutto at arup.com  Tue Jul  5 10:20:14 2005
From: Giulio.Antonutto at arup.com (Giulio Antonutto)
Date: Tue Jul  5 10:23:24 2005
Subject: [Radiance-general] Radzilla-anybody help me?
Message-ID: <CC0B19F4C6132F4D9FDDEBF194200FB51B3758@ldcexc02.global.arup.com>

Ida,

 

try this:

 

rzpict -x 600 -y 400  -vp 61 14 -29 -vd -3 -0.4 1 -vu 0 0 1 -av  .6 .6
.6  -o image.pic scene.zoct

 

the trick is the '-o image.pic'

 

hope this works,

 

giulio

 

________________________________

From: radiance-general-bounces@radiance-online.org
[mailto:radiance-general-bounces@radiance-online.org] On Behalf Of ida
Sent: 05 July 2005 06:37
To: radiance-general@radiance-online.org
Subject: [Radiance-general] Radzilla-anybody help me?

 

Thanks Francesco,

 

I have done test it by putting /rzpict -vp 61 14 -29 -vd -3 -0.4 1 -av
> .6 .6 .6  -x 600 -y 400 scene.zoct  but it come out the anonymous
character (is not image). Is it having any fix value for width and
height? Or is it I'm did the wrong way?

 

Thanks,

daz

________________________________

Yahoo! Mail
Stay connected, organized, and protected. Take the tour
<http://tour.mail.yahoo.com/mailtour.html> 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20050705/37b0497e/attachment.html
From atelier at iebele.nl  Tue Jul  5 11:39:19 2005
From: atelier at iebele.nl (atelier iebele abel)
Date: Tue Jul  5 11:37:24 2005
Subject: [Radiance-general] Rendering fields
In-Reply-To: <42C3F580.8040208@iebele.nl>
References: <1119830831.31465.43.camel@localhost.localdomain>	<42C01F5F.1050009@testers.homelinux.net>
	<42C3F580.8040208@iebele.nl>
Message-ID: <42CA5547.4000105@iebele.nl>

Hi,

Working on an animation for video/tv, I need to render fields. Instead 
of rendering two frames apart and composit both into one image with 
fields later, I am thinking about a solution in wich I render two 
viewpoints in one image directly.
In this image all even scanlines should show view01 and all odd 
scanlines should show view 2 (or in reverse order, I dont know yet).

Currently I work with the following command to render my animation with:
vwrays -fd -vf view8_0001.vp -pa 0 -x 2880 -y 2304 | rtrace -av 20 20 20 
-ab 0 -st 0.01  -x $1  -y $1 -fdd -ovpN model-ani.oct

I think it should be possible to extend this command in order to fit my 
need, but I don't know where to start.

An example of the result I like to achieve can be found on 
http://www.toren.com/radiance/fields.jpg

Iebele


PS:
In 2003 (?) we discussed in this forum about imageprocessing for 
animation. Two years later, I managed to create some images.
I put the very first result on http://www.toren.com/radiance/imgshader.html.
The processed image shown there is created by a program I wrote that 
reads the output from the above command:
vwrays -fd -vf view8_0001.vp -pa 0 -x 2880 -y 2304 | rtrace -av 20 20 20 
-ab 0 -st 0.01  -x $1  -y $1 -fdd -ovpN model-ani.oct,
so I am rather dependend of this output of rtace. In other words, I am 
searching for a solution to render two views in one image, using 
somewhat the same pipeline as I do now.




From faridah_isa at yahoo.com  Tue Jul  5 14:08:07 2005
From: faridah_isa at yahoo.com (ida)
Date: Tue Jul  5 14:15:34 2005
Subject: [Radiance-general] Radzilla again
Message-ID: <20050705120807.40715.qmail@web32408.mail.mud.yahoo.com>

Hi giulio,

Thanks for the info,great! it's working when i using
text editor(write thier primitives and parameters
details)but then when I used exported object from maya
to radiance(.obj)is not working is show the error such
as(fatal-cannot find function file "rayinit.cal" ).is
it I did the wrong way during I install the radzilla?

Many thanks,
idaz


Message: 4
Date: Tue, 5 Jul 2005 09:20:14 +0100
From: "Giulio Antonutto" <Giulio.Antonutto@arup.com>
Subject: RE: [Radiance-general] Radzilla-anybody help
me?
To: "Radiance general discussion"
	<radiance-general@radiance-online.org>
Message-ID:

<CC0B19F4C6132F4D9FDDEBF194200FB51B3758@ldcexc02.global.arup.com>
Content-Type: text/plain; charset="us-ascii"

Ida,

 

try this:

 

rzpict -x 600 -y 400  -vp 61 14 -29 -vd -3 -0.4 1 -vu
0 0 1 -av  .6 .6
.6  -o image.pic scene.zoct

 

the trick is the '-o image.pic'

 

hope this works,

 

giulio

 

________________________________

From: radiance-general-bounces@radiance-online.org
[mailto:radiance-general-bounces@radiance-online.org]
On Behalf Of ida
Sent: 05 July 2005 06:37
To: radiance-general@radiance-online.org
Subject: [Radiance-general] Radzilla-anybody help me?

 

Thanks Francesco,

 

I have done test it by putting /rzpict -vp 61 14 -29
-vd -3 -0.4 1 -av
> .6 .6 .6  -x 600 -y 400 scene.zoct  but it come out
the anonymous
character (is not image). Is it having any fix value
for width and
height? Or is it I'm did the wrong way?

 

Thanks,

daz

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

From Giulio.Antonutto at arup.com  Tue Jul  5 14:36:43 2005
From: Giulio.Antonutto at arup.com (Giulio Antonutto)
Date: Tue Jul  5 14:37:16 2005
Subject: [Radiance-general] Radzilla again
Message-ID: <CC0B19F4C6132F4D9FDDEBF194200FB51B3826@ldcexc02.global.arup.com>

this is the usual problem of defining your 'environment variables' or
putting the libraries somewhere on the disk.

The shortcut is, when compiling radzilla, indicate the location of these
libraries and save these files there.
Just look for rayinit.cal on your disk, is it there? If not you need to
download the libraries (look either on Carsten web site or on the
official radiance web site)

If you have a precompiled version of radiance, just look over the past
messages for environmental variables, there should be a full lot of
messages about this out there.

you need to, depending on your terminal, define a variable called
RAYPATH that tells the terminal where radiance libraries are kept
(assuming you installed them).

just try to understand if you are using bash ($) or tcsh (%) first (open
the terminal and look for the last character before the blinking cursor,
is it % or $ ?),
then locate the user profile file (that has a different name depending
on the above... it may be ~/.bash_profile for bash and ~/.tcshrc if you
use tcsh).
add the proper line to define RAYPATH

NOW BE REALLY CAREFUL! IF YOU DO A MISTAKE IT IS DIFFICULT TO GO BACK.
so I would suggest you to try using a text editor to change the file...
and remember to use UNIX line ending. Try with a copy of the file 1st,
just to be sure.

When you have done check by
opening a new terminal
typing env
you should show the new defined variable:

RAYPATH=........

ciao,

giulio

PS which platform are you using radzilla on?




-----Original Message-----
From: radiance-general-bounces@radiance-online.org
[mailto:radiance-general-bounces@radiance-online.org] On Behalf Of ida
Sent: 05 July 2005 13:08
To: radiance-general@radiance-online.org
Subject: [Radiance-general] Radzilla again

Hi giulio,

Thanks for the info,great! it's working when i using
text editor(write thier primitives and parameters
details)but then when I used exported object from maya
to radiance(.obj)is not working is show the error such
as(fatal-cannot find function file "rayinit.cal" ).is
it I did the wrong way during I install the radzilla?

Many thanks,
idaz


Message: 4
Date: Tue, 5 Jul 2005 09:20:14 +0100
From: "Giulio Antonutto" <Giulio.Antonutto@arup.com>
Subject: RE: [Radiance-general] Radzilla-anybody help
me?
To: "Radiance general discussion"
	<radiance-general@radiance-online.org>
Message-ID:

<CC0B19F4C6132F4D9FDDEBF194200FB51B3758@ldcexc02.global.arup.com>
Content-Type: text/plain; charset="us-ascii"

Ida,

 

try this:

 

rzpict -x 600 -y 400  -vp 61 14 -29 -vd -3 -0.4 1 -vu
0 0 1 -av  .6 .6
.6  -o image.pic scene.zoct

 

the trick is the '-o image.pic'

 

hope this works,

 

giulio

 

________________________________

From: radiance-general-bounces@radiance-online.org
[mailto:radiance-general-bounces@radiance-online.org]
On Behalf Of ida
Sent: 05 July 2005 06:37
To: radiance-general@radiance-online.org
Subject: [Radiance-general] Radzilla-anybody help me?

 

Thanks Francesco,

 

I have done test it by putting /rzpict -vp 61 14 -29
-vd -3 -0.4 1 -av
> .6 .6 .6  -x 600 -y 400 scene.zoct  but it come out
the anonymous
character (is not image). Is it having any fix value
for width and
height? Or is it I'm did the wrong way?

 

Thanks,

daz

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general

From gregoryjward at gmail.com  Tue Jul  5 17:13:25 2005
From: gregoryjward at gmail.com (Greg Ward)
Date: Tue Jul  5 17:14:13 2005
Subject: [Radiance-general] Rendering fields
In-Reply-To: <42CA5547.4000105@iebele.nl>
References: <1119830831.31465.43.camel@localhost.localdomain>	<42C01F5F.1050009@testers.homelinux.net>
	<42C3F580.8040208@iebele.nl> <42CA5547.4000105@iebele.nl>
Message-ID: <292E0F82-3A3C-4070-A53B-9C6F2044CC6E@gmail.com>

Hi lebele,

I don't have a beautiful solution for this, but the following should  
work:

rlam '\!vwrays -vf view1.vp -pa 0 -x 2880 -y 2304' '\!vwrays -vf  
view2.vp -pa 0 -x 2880 -y 2304' \
     | rcalc -e 'odd=recno-floor(recno/2)*2-.5' -e '$1=if(odd,$1,$7); 
$2=if(odd,$2,$8);$3=if(odd,$3,$9)' \
         -e '$4=if(odd,$4,$10);$5=if(odd,$5,$11);$6=if(odd,$6,$12)' \
     | rtrace -fad (etc.)

The rlam command puts rays corresponding to your two views on each  
line together, and rcalc chooses between them based on scanline  
oddity.  This requires a lot of ASCII/double conversions, which can  
be slow, but since rlam doesn't handle binary floats or doubles, this  
is the simplest way.  A more complex solution that could write  
doubles directly would use rcalc alone and two view calculations, but  
I don't have time to write that one for you.

-Greg

> From: atelier iebele abel <atelier@iebele.nl>
> Date: July 5, 2005 2:39:19 AM PDT
>
> Hi,
>
> Working on an animation for video/tv, I need to render fields.  
> Instead of rendering two frames apart and composit both into one  
> image with fields later, I am thinking about a solution in wich I  
> render two viewpoints in one image directly.
> In this image all even scanlines should show view01 and all odd  
> scanlines should show view 2 (or in reverse order, I dont know yet).
>
> Currently I work with the following command to render my animation  
> with:
> vwrays -fd -vf view8_0001.vp -pa 0 -x 2880 -y 2304 | rtrace -av 20  
> 20 20 -ab 0 -st 0.01  -x $1  -y $1 -fdd -ovpN model-ani.oct
>
> I think it should be possible to extend this command in order to  
> fit my need, but I don't know where to start.
>
> An example of the result I like to achieve can be found on http:// 
> www.toren.com/radiance/fields.jpg
>
> Iebele

From cbauer- at t-online.de  Wed Jul  6 02:29:28 2005
From: cbauer- at t-online.de (Carsten Bauer)
Date: Tue Jul  5 19:44:44 2005
Subject: [Radiance-general] Radzilla again
In-Reply-To: <CC0B19F4C6132F4D9FDDEBF194200FB51B3826@ldcexc02.global.arup.com>
References: <CC0B19F4C6132F4D9FDDEBF194200FB51B3826@ldcexc02.global.arup.com>
Message-ID: <42CB25E8.1050403@t-online.de>

Hi,

so my reply comes a bt late, as the questions are already answered 
-thanx very much!

The basic idea is that current radzilla is not 'standalone' and thus 
relies on a working classic Radiance installation. Classic Radiance 
offers a lot of helper files for all sorts of calculations in 
conjunction with the functional language, and when the program needs one 
ot these, especially the initialization file 'rayinit.cal', it searches 
the directories listed in the mentioned 'RAYPATH' shell enviromment 
variable. And in this respect radzilla  behaves just like classic Radiance.
The whole environment variable business may indeed seem a bit strange at 
the first glance to those less aquainted with the UNIX/Linux world,
especially because you set these variables 'globally' in your shell  
init file, which itself has nothing to to with Radiance or radzilla..
The alternative (not implemented) approach would be to put this sort of 
information in some kind of .radiancerc or .radzillarc file in a users 
home directory.

-Carsten



From MMoeck at engr.psu.edu  Wed Jul  6 17:41:07 2005
From: MMoeck at engr.psu.edu (Martin Moeck)
Date: Wed Jul  6 17:42:04 2005
Subject: [Radiance-general] Photoshop opens Radiance picture formats
Message-ID: <84F05BA9118BBD4A8FC6409808CE266C2344E3@ENGRMAIL2.engr.psu.edu>

I just opened an HDR image directly in Photoshop CS2 V. 9.0. If you rename any Radiance image to *.HDR, *.RGBE, or *.XYZE, you can do that, too. You can then export it /save as *PSB, *EXR, portable bit map or TIFF. 

Martin Moeck, Penn State
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 2541 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20050706/fae1099d/attachment.bin
From mario at minati.de  Thu Jul  7 11:30:38 2005
From: mario at minati.de (Mario Minati)
Date: Thu Jul  7 11:31:07 2005
Subject: [Radiance-general] rview problems with X11
Message-ID: <42CCF63E.4060301@minati.de>

Hello @all,

while testing my radiance installation in ran into a curious problem.

The machine is not connected to a monitor, instead it has VNC X-Server 
running. Everything is working fine. I'm useing XFCE4 as desktop and 
have no probs with other X11 progs.

When starting rview, like with one of the makefiles provided in the 
obj-directory of the sources a window with a correct title pops up for a 
few millisecs and than disappears again. In my xterm I get the message 
"Illegal instruction".
I found out that this message does not belong to the radiance source 
code, so it will probably belong to X.

Does anyone have any idea, how I can find out more on this problem or 
how to solve it?

Regards,
Mario Minati

From mario at minati.de  Thu Jul  7 12:08:42 2005
From: mario at minati.de (Mario Minati)
Date: Thu Jul  7 12:09:21 2005
Subject: [Radiance-general] rview problems with X11
In-Reply-To: <42CCF63E.4060301@minati.de>
References: <42CCF63E.4060301@minati.de>
Message-ID: <42CCFF2A.1000907@minati.de>

Just some more information.

I am not sure if the behaviour is connected with X.
The command "make examp.pic" in obj/misc gives

radiance@rc_manager:~/rad-test/misc$ make examp.pic
oconv examp > examp.oct
rpict -vp 3 2 5 -vd -0.268328 -0.357771 -0.894427 \
-vu 0 1 0 -vh 45 -vv 45 -x 470 -y 470 -av .5 .5 .5 \
-ab 0 -ad 512 -as 128 examp.oct > examp.pic
make: *** [examp.pic] Error 132

Doing the rpict stuff on the command line gives

radiance@rc_manager:~/rad-test/misc$ rpict -vp 3 2 5 -vd -0.268328 
-0.357771 -0.894427 \
 > -vu 0 1 0 -vh 45 -vv 45 -x 470 -y 470 -av .5 .5 .5 \
 > -ab 0 -ad 512 -as 128 examp.oct > examp.pic
Illegal instruction

Changeing the command line also doesn't help:

radiance@rc_manager:~/rad-test/misc$ rpict -vp 3 2 5 -vd -0.268328 
-0.357771 -0.894427 -vu 0 1 0 -vh 45 -vv 45 -x 470 -y 470 -av .5 .5 .5 
-ab 0 -ad 512 -as 128 -o examp.pic examp.oct
Illegal instruction

Any ideas?


Mario Minati schrieb:

> Hello @all,
>
> while testing my radiance installation in ran into a curious problem.
>
> The machine is not connected to a monitor, instead it has VNC X-Server 
> running. Everything is working fine. I'm useing XFCE4 as desktop and 
> have no probs with other X11 progs.
>
> When starting rview, like with one of the makefiles provided in the 
> obj-directory of the sources a window with a correct title pops up for 
> a few millisecs and than disappears again. In my xterm I get the 
> message "Illegal instruction".
> I found out that this message does not belong to the radiance source 
> code, so it will probably belong to X.
>
> Does anyone have any idea, how I can find out more on this problem or 
> how to solve it?
>
> Regards,
> Mario Minati
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>

From mario at minati.de  Thu Jul  7 12:33:28 2005
From: mario at minati.de (Mario Minati)
Date: Thu Jul  7 12:33:56 2005
Subject: [Radiance-general] rview problems with X11
In-Reply-To: <42CCFF2A.1000907@minati.de>
References: <42CCF63E.4060301@minati.de> <42CCFF2A.1000907@minati.de>
Message-ID: <42CD04F8.7070005@minati.de>

Hi again,

I found the solution:
It was due to wrong settings in the rmake script during the installation.
I used some values for optimisation and didn't remove the -MIBMPC setting.

Regards,
Mario Minati


Mario Minati schrieb:

> Just some more information.
>
> I am not sure if the behaviour is connected with X.
> The command "make examp.pic" in obj/misc gives
>
> radiance@rc_manager:~/rad-test/misc$ make examp.pic
> oconv examp > examp.oct
> rpict -vp 3 2 5 -vd -0.268328 -0.357771 -0.894427 \
> -vu 0 1 0 -vh 45 -vv 45 -x 470 -y 470 -av .5 .5 .5 \
> -ab 0 -ad 512 -as 128 examp.oct > examp.pic
> make: *** [examp.pic] Error 132
>
> Doing the rpict stuff on the command line gives
>
> radiance@rc_manager:~/rad-test/misc$ rpict -vp 3 2 5 -vd -0.268328 
> -0.357771 -0.894427 \
> > -vu 0 1 0 -vh 45 -vv 45 -x 470 -y 470 -av .5 .5 .5 \
> > -ab 0 -ad 512 -as 128 examp.oct > examp.pic
> Illegal instruction
>
> Changeing the command line also doesn't help:
>
> radiance@rc_manager:~/rad-test/misc$ rpict -vp 3 2 5 -vd -0.268328 
> -0.357771 -0.894427 -vu 0 1 0 -vh 45 -vv 45 -x 470 -y 470 -av .5 .5 .5 
> -ab 0 -ad 512 -as 128 -o examp.pic examp.oct
> Illegal instruction
>
> Any ideas?
>
>
> Mario Minati schrieb:
>
>> Hello @all,
>>
>> while testing my radiance installation in ran into a curious problem.
>>
>> The machine is not connected to a monitor, instead it has VNC 
>> X-Server running. Everything is working fine. I'm useing XFCE4 as 
>> desktop and have no probs with other X11 progs.
>>
>> When starting rview, like with one of the makefiles provided in the 
>> obj-directory of the sources a window with a correct title pops up 
>> for a few millisecs and than disappears again. In my xterm I get the 
>> message "Illegal instruction".
>> I found out that this message does not belong to the radiance source 
>> code, so it will probably belong to X.
>>
>> Does anyone have any idea, how I can find out more on this problem or 
>> how to solve it?
>>
>> Regards,
>> Mario Minati
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general@radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>


From ian at testers.homelinux.net  Thu Jul  7 20:52:12 2005
From: ian at testers.homelinux.net (Ian Tester)
Date: Thu Jul  7 20:53:00 2005
Subject: [Radiance-general] rview problems with X11
In-Reply-To: <42CD04F8.7070005@minati.de>
References: <42CCF63E.4060301@minati.de> <42CCFF2A.1000907@minati.de>
	<42CD04F8.7070005@minati.de>
Message-ID: <42CD79DC.6060103@testers.homelinux.net>

Mario Minati wrote:
> Hi again,
> 
> I found the solution:
> It was due to wrong settings in the rmake script during the installation.
> I used some values for optimisation and didn't remove the -MIBMPC setting.

That sounds more like it. "illegal instruction" means you compiled with 
settings that generated instructions your CPU didn't understand. Perhaps a 
wrong -mcpu= option or something.

bye

From grobe at gmx.net  Fri Jul  8 12:46:21 2005
From: grobe at gmx.net (Lars O. Grobe)
Date: Fri Jul  8 12:47:03 2005
Subject: [Radiance-general] rvu: too many modifiers in ambient list
Message-ID: <a932f51195d061d856d96814b21d928e@gmx.net>

Hi!

I have a problem with the ambient exclude options. I am currently 
trying to make rendering times shorter, excluding detail geometry from 
the ambient calculation. Using -ae, I got the "too many modifiers" 
message, and switched to -aE with a file containing the modifier names. 
However this did not help. So how many modifiers can I exclude with a 
standard-compile radiance (I guess it is defined somewhere in the 
sources)?

TIA+CU Lars.


From gregoryjward at gmail.com  Fri Jul  8 15:54:39 2005
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Fri Jul  8 15:55:29 2005
Subject: [Radiance-general] rvu: too many modifiers in ambient list
In-Reply-To: <a932f51195d061d856d96814b21d928e@gmx.net>
References: <a932f51195d061d856d96814b21d928e@gmx.net>
Message-ID: <A5662C01-B0B1-4B30-92C2-D098CA4D51F7@gmail.com>

Hi Lars,

I'm not sure what the limit is in the official release, as this is  
something I changed recently, but it's 512 if the latest head.  If  
you'd like to change it, you can either edit AMBLLEN in src/rt/ray.h  
or set a -DAMBLLEN=1024 (or whatever) in your optimization flags in  
rmake and recompile.

If you are excluding more modifiers than you are including, you can  
use the -ai or -aI option instead.

-Greg

> From: Lars O. Grobe <grobe@gmx.net>
> Date: July 8, 2005 3:46:21 AM PDT
>
> Hi!
>
> I have a problem with the ambient exclude options. I am currently  
> trying to make rendering times shorter, excluding detail geometry  
> from the ambient calculation. Using -ae, I got the "too many  
> modifiers" message, and switched to -aE with a file containing the  
> modifier names. However this did not help. So how many modifiers  
> can I exclude with a standard-compile radiance (I guess it is  
> defined somewhere in the sources)?
>
> TIA+CU Lars.
>

From grobe at gmx.net  Fri Jul  8 15:59:53 2005
From: grobe at gmx.net (Lars O. Grobe)
Date: Fri Jul  8 16:00:33 2005
Subject: [Radiance-general] rvu: too many modifiers in ambient list
In-Reply-To: <A5662C01-B0B1-4B30-92C2-D098CA4D51F7@gmail.com>
References: <a932f51195d061d856d96814b21d928e@gmx.net>
	<A5662C01-B0B1-4B30-92C2-D098CA4D51F7@gmail.com>
Message-ID: <4469a270441082ca2a06e1860a55bcb6@gmx.net>

Hi Greg!

> I'm not sure what the limit is in the official release, as this is 
> something I changed recently, but it's 512 if the latest head.

Is this the number of modifiers or the total string length? If it's the 
first, there must have been a real change, cause I could exclude around 
6 or seven, not more in my old release (which is something after 3.6).

>   If you'd like to change it, you can either edit AMBLLEN in 
> src/rt/ray.h or set a -DAMBLLEN=1024 (or whatever) in your 
> optimization flags in rmake and recompile.

I'll take a look at this and compile a new head this week-end.

Thank you, have a nice week-end, Lars.


From gregoryjward at gmail.com  Fri Jul  8 16:10:49 2005
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Fri Jul  8 16:12:07 2005
Subject: [Radiance-general] rvu: too many modifiers in ambient list
In-Reply-To: <4469a270441082ca2a06e1860a55bcb6@gmx.net>
References: <a932f51195d061d856d96814b21d928e@gmx.net>
	<A5662C01-B0B1-4B30-92C2-D098CA4D51F7@gmail.com>
	<4469a270441082ca2a06e1860a55bcb6@gmx.net>
Message-ID: <BE949BCD-9EBF-4F7C-9D1F-906487F14017@gmail.com>

Hi Lars,

It's not total number of characters, but list length.  The fewest I  
ever allowed was 128, I think, so something else must be amiss with  
your version, or the way you're using it.

-G

> From: Lars O. Grobe <grobe@gmx.net>
> Date: July 8, 2005 6:59:53 AM PDT
>
> Hi Greg!
>
>> I'm not sure what the limit is in the official release, as this is  
>> something I changed recently, but it's 512 if the latest head.
>>
>
> Is this the number of modifiers or the total string length? If it's  
> the first, there must have been a real change, cause I could  
> exclude around 6 or seven, not more in my old release (which is  
> something after 3.6).
>
>
>>   If you'd like to change it, you can either edit AMBLLEN in src/ 
>> rt/ray.h or set a -DAMBLLEN=1024 (or whatever) in your  
>> optimization flags in rmake and recompile.
>>
>
> I'll take a look at this and compile a new head this week-end.
>
> Thank you, have a nice week-end, Lars.
>

From atelier at iebele.nl  Fri Jul  8 20:05:47 2005
From: atelier at iebele.nl (atelier iebele abel)
Date: Fri Jul  8 20:03:53 2005
Subject: [Radiance-general] Rendering fields
In-Reply-To: <292E0F82-3A3C-4070-A53B-9C6F2044CC6E@gmail.com>
References: <1119830831.31465.43.camel@localhost.localdomain>	<42C01F5F.1050009@testers.homelinux.net>	<42C3F580.8040208@iebele.nl>
	<42CA5547.4000105@iebele.nl>
	<292E0F82-3A3C-4070-A53B-9C6F2044CC6E@gmail.com>
Message-ID: <42CEC07B.5060407@iebele.nl>

Hi Greg,

Thanks so much for pointing this out for me, and sharing your knowledge 
all the time.
It took some time to reply  because I needed to study on rcalc to make 
your suggestion really work.

It's funny but the commands you wrote results in images with _vertical_ 
fields  :)
Please look at http://www.toren.com/radiance/field.jpg for an example of 
this.
After some time studying what you wrote (and discovering rcalc in the 
meanwhile!), I spotted the error.
I changed your commands like this:

rlam '!vwrays -vf view01.vp -pa 0 -x 720 -y 576' '!vwrays -vf  view02.vp 
-pa 0 -x 720 -y 576'  \
 | rcalc -e 'odd=floor(recno/720) - floor ( (recno/720) / 2 ) *2   - 0.5 ' \
-e '$1=if(odd,$1,$7); $2=if(odd,$2,$8);$3=if(odd,$3,$9)'  \
-e '$4=if(odd,$4,$10);$5=if(odd,$5,$11);$6=if(odd,$6,$12)' \
| rtrace -fad  -av 20 20 20 -ab 0 -st 0.01  -x 720 -y 576  -ovpN 
model-ani.oct  | imgshader -lf lights.lit | ximage -g 1.7 -e -6

and now it works fine!  ( see http://www.toren.com/radiance/fieldsok.jpg )

One problem that remains now, is that the above commands will not work 
when oversampling 4 times the image size, to obtain sharper results.
I have to figure that out soon, and will post the result at that time.

The really good news is that a simple test comparing rendering times 
resulted in 14 minutes rendering time using this 'field' rendering 
against 11 minutes when just sending doubles from vwrays to rtrace. This 
means that this kind of field rendering is quite a time-saving approach. 
Great!

Iebele

PS: Please note that where you wrote  '\vwrays,  I wrote  `!vwrays ( 
omitting the slash)
This is because Linux uses bash as standard, while you probably uses csh.



Greg Ward wrote:

> Hi lebele,
>
> I don't have a beautiful solution for this, but the following should  
> work:
>
> rlam '\!vwrays -vf view1.vp -pa 0 -x 2880 -y 2304' '\!vwrays -vf  
> view2.vp -pa 0 -x 2880 -y 2304' \
>     | rcalc -e 'odd=recno-floor(recno/2)*2-.5' -e '$1=if(odd,$1,$7); 
> $2=if(odd,$2,$8);$3=if(odd,$3,$9)' \
>         -e '$4=if(odd,$4,$10);$5=if(odd,$5,$11);$6=if(odd,$6,$12)' \
>     | rtrace -fad (etc.)
>
> The rlam command puts rays corresponding to your two views on each  
> line together, and rcalc chooses between them based on scanline  
> oddity.  This requires a lot of ASCII/double conversions, which can  
> be slow, but since rlam doesn't handle binary floats or doubles, this  
> is the simplest way.  A more complex solution that could write  
> doubles directly would use rcalc alone and two view calculations, but  
> I don't have time to write that one for you.
>
> -Greg
>
>> From: atelier iebele abel <atelier@iebele.nl>
>> Date: July 5, 2005 2:39:19 AM PDT
>>
>> Hi,
>>
>> Working on an animation for video/tv, I need to render fields.  
>> Instead of rendering two frames apart and composit both into one  
>> image with fields later, I am thinking about a solution in wich I  
>> render two viewpoints in one image directly.
>> In this image all even scanlines should show view01 and all odd  
>> scanlines should show view 2 (or in reverse order, I dont know yet).
>>
>> Currently I work with the following command to render my animation  
>> with:
>> vwrays -fd -vf view8_0001.vp -pa 0 -x 2880 -y 2304 | rtrace -av 20  
>> 20 20 -ab 0 -st 0.01  -x $1  -y $1 -fdd -ovpN model-ani.oct
>>
>> I think it should be possible to extend this command in order to  fit 
>> my need, but I don't know where to start.
>>
>> An example of the result I like to achieve can be found on http:// 
>> www.toren.com/radiance/fields.jpg
>>
>> Iebele
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>

From faridah_isa at yahoo.com  Sat Jul  9 13:38:36 2005
From: faridah_isa at yahoo.com (ida)
Date: Sat Jul  9 13:39:31 2005
Subject: [Radiance-general] Re: Radzilla again-thanks
Message-ID: <20050709113836.23246.qmail@web32401.mail.mud.yahoo.com>


Hi giulio,

Thanks for your help! Brilliant!! it is working then...

Many Thanks,

idaz

 

 

 this is the usual problem of defining your 'environment variables' or

> putting the libraries somewhere on the disk.

> 

> The shortcut is, when compiling radzilla, indicate the location of these

> libraries and save these files there.

> Just look for rayinit.cal on your disk, is it there? If not you need to

> download the libraries (look either on Carsten web site or on the

> official radiance web site)

> 

> If you have a precompiled version of radiance, just look over the past

> messages for environmental variables, there should be a full lot of

> messages about this out there.

> 

> you need to, depending on your terminal, define a variable called

> RAYPATH that tells the terminal where radiance libraries are kept

> (assuming you installed them).

> 

> just try to understand if you are using bash ($) or tcsh (%) first (open

> the terminal and look for the last character before the blinking cursor,

> is it % or $ ?),

> then locate the user profile file (that has a different name depending

> on the above... it may be ~/.bash_profile for bash and ~/.tcshrc if you

> use tcsh).

> add the proper line to define RAYPATH

> 

> NOW BE REALLY CAREFUL! IF YOU DO A MISTAKE IT IS DIFFICULT TO GO BACK.

> so I would suggest you to try using a text editor to change the file...

> and remember to use UNIX line ending. Try with a copy of the file 1st,

> just to be sure.

> 

> When you have done check by

> opening a new terminal

> typing env

> you should show the new defined variable:

> 

> RAYPATH=........

> 

> ciao,

> 

> giulio

> 

> PS which platform are you using radzilla on?

> 

> 

> 

> 

> -----Original Message-----

> From: radiance-general-bounces at radiance-online.org

> [mailto:radiance-general-bounces at radiance-online.org] On Behalf Of ida

> Sent: 05 July 2005 13:08

> To: radiance-general at radiance-online.org

> Subject: [Radiance-general] Radzilla again

> 

> Hi giulio,

> 

> Thanks for the info,great! it's working when i using

> text editor(write thier primitives and parameters

> details)but then when I used exported object from maya

> to radiance(.obj)is not working is show the error such

> as(fatal-cannot find function file "rayinit.cal" ).is

> it I did the wrong way during I install the radzilla?

> 

> Many thanks,

> idaz


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20050709/f8fc1e81/attachment.html
From Giulio.Antonutto at arup.com  Sat Jul  9 13:47:37 2005
From: Giulio.Antonutto at arup.com (Giulio Antonutto)
Date: Sat Jul  9 13:49:06 2005
Subject: [Radiance-general] Re: Radzilla again-thanks
Message-ID: <CC0B19F4C6132F4D9FDDEBF194200FB50478D6@ldcexc02.global.arup.com>

wellcome to the radzilla team ;-)
ciao,
giulio


-----Original Message-----
From: radiance-general-bounces@radiance-online.org on behalf of ida
Sent: Sat 7/9/2005 12:38 PM
To: radiance-general@radiance-online.org
Subject: [Radiance-general] Re: Radzilla again-thanks
 
Hi giulio,

Thanks for your help! Brilliant!! it is working then...

Many Thanks,

idaz

 

 

 this is the usual problem of defining your 'environment variables' or

> putting the libraries somewhere on the disk.

> 

> The shortcut is, when compiling radzilla, indicate the location of these

> libraries and save these files there.

> Just look for rayinit.cal on your disk, is it there? If not you need to

> download the libraries (look either on Carsten web site or on the

> official radiance web site)

> 

> If you have a precompiled version of radiance, just look over the past

> messages for environmental variables, there should be a full lot of

> messages about this out there.

> 

> you need to, depending on your terminal, define a variable called

> RAYPATH that tells the terminal where radiance libraries are kept

> (assuming you installed them).

> 

> just try to understand if you are using bash ($) or tcsh (%) first (open

> the terminal and look for the last character before the blinking cursor,

> is it % or $ ?),

> then locate the user profile file (that has a different name depending

> on the above... it may be ~/.bash_profile for bash and ~/.tcshrc if you

> use tcsh).

> add the proper line to define RAYPATH

> 

> NOW BE REALLY CAREFUL! IF YOU DO A MISTAKE IT IS DIFFICULT TO GO BACK.

> so I would suggest you to try using a text editor to change the file...

> and remember to use UNIX line ending. Try with a copy of the file 1st,

> just to be sure.

> 

> When you have done check by

> opening a new terminal

> typing env

> you should show the new defined variable:

> 

> RAYPATH=........

> 

> ciao,

> 

> giulio

> 

> PS which platform are you using radzilla on?

> 

> 

> 

> 

> -----Original Message-----

> From: radiance-general-bounces at radiance-online.org

> [mailto:radiance-general-bounces at radiance-online.org] On Behalf Of ida

> Sent: 05 July 2005 13:08

> To: radiance-general at radiance-online.org

> Subject: [Radiance-general] Radzilla again

> 

> Hi giulio,

> 

> Thanks for the info,great! it's working when i using

> text editor(write thier primitives and parameters

> details)but then when I used exported object from maya

> to radiance(.obj)is not working is show the error such

> as(fatal-cannot find function file "rayinit.cal" ).is

> it I did the wrong way during I install the radzilla?

> 

> Many thanks,

> idaz

__________________________________________________
Do You Yahoo!?
Tired of spam? Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 


-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 4121 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20050709/ed8070de/attachment.bin
From jelle.feringa at ezct.net  Sat Jul  9 14:29:02 2005
From: jelle.feringa at ezct.net (Jelle Feringa / EZCT Architecture & Design Research)
Date: Sat Jul  9 14:26:48 2005
Subject: [Radiance-general] dxfimport | toren.com
Message-ID: <mailman.9.1120912008.370.radiance-general@radiance-online.org>

Hi group,

 

I'm happy to tell you Iebele Abel released a dxf to rad converter for Linux.

What's good about the converter is that implies a way of organizing your
radiance scene.

The workflow is based on the layers present in the .dxf file, the modifier
in the generated .rad file will correspond to the name of the layer in the
.dxf file. The point of this is that when you need to make different
renderings of a project in progress you use the layers for mapping the
materials to the .rad geometry. When presented a modified model, just
overwrite the existing .rad geometry using dxfimport, launch your
renderscript et voila, another render iteration on its way. When working for
rapid changing projects this workflow is killer. 

Something which is highly productive for this type of workflow is to have a
standardized radiance library where the layer number in your dxf file
corresponds to the material in your materials definitions. If this way of
working is familiar to you, & you happen to work on Linux, you should
definitely take a look at Iebele's dxfimport converter ! 

 

When looking for a converter with lots of options, look further, but
dxfimport fits perfectly in a highly streamlined radiance workflow, based on
.dxf input.

 

Iebele, perhaps you could elaborate on which entities dxfimport handles?
Which versions of .dxf are supported in dxfimport? What about unreasonable
large models, do these work with dxfimport?

 

Cheers, Jelle.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20050709/d2913040/attachment.html
From schorsch at schorsch.com  Sat Jul  9 15:42:50 2005
From: schorsch at schorsch.com (Georg Mischler)
Date: Sat Jul  9 15:43:37 2005
Subject: [Radiance-general] dxfimport | toren.com
Message-ID: <Pine.BSF.4.58.0507090938240.98748@emancholl.pair.com>

Jelle Feringa / EZCT Architecture & Design Research wrote:

> Hi group,
>
>
>
> I'm happy to tell you Iebele Abel released a dxf to rad converter for Linux.
>
> What's good about the converter is that implies a way of organizing your
> radiance scene.
>
> The workflow is based on the layers present in the .dxf file, the modifier
> in the generated .rad file will correspond to the name of the layer in the
> .dxf file.


Why reinvent the wheel once again? Dxf2rad has done exactly
this for many years now:

  http://www.schorsch.com/download/dxf2rad/

There's a new version almost finished, which will also extract
stored views from the DXF file.


-schorsch

-- 
Georg Mischler  --  simulations developer  --  schorsch at schorsch com
+schorsch.com+  --  lighting design tools  --  http://www.schorsch.com/

From atelier at iebele.nl  Sun Jul 10 14:55:28 2005
From: atelier at iebele.nl (atelier iebele abel)
Date: Sun Jul 10 14:53:33 2005
Subject: [Radiance-general] dxfimport
In-Reply-To: <200507091228.j69CS0L01393@reaktie14.xlserver.net>
References: <200507091228.j69CS0L01393@reaktie14.xlserver.net>
Message-ID: <42D11AC0.4090307@iebele.nl>

Hi Jelle,

Nice to hear that you have so much fun with that tiny little tool! Now 
that you have 'announced' it in this group, it should also be available 
somewhere in public space.
Because of this, I run through the source and made it a little more 
decent as it was. Now, for those who are interested, the source can be 
downloaded from http:://www.toren.com/radiance/dxfimport_so.tar ( "so" 
stands for stand-alone, because the original class was written as part 
of a never finished Qt-app. )
Type "g++ -o dxfimport dxfimport_so.cpp" to compile it.

dxfimport handles only 3DFACES.

According to the autodesk website, the DXF file format documentation 
regarding 3DFACES applies to all versions of autocad's dxf, so dxfimport 
should also support all versions. Wishfull thinking?

What exectly do you mean with unreasonable large models? There should be 
no limit in the size of the imported dxf file, except that dxfimport 
does not count more as 999.999.999 polygons, which is very, very much in 
my opinion.

Someting about the usage:
You can specify a filename as the first argument of dxfimport, or type a 
'-' to read data from stdin.
For example, to convert each .dxf file in a directory and create an 
octree, type
$cat *.dxf | dxfimport - | oconv materials.mat sky.rad - > model.oct
Or for a single given file, type:
$dxfimport model.dxf | oconv materials.mat sky.rad - > model.oct

dxfimport without arguments gives you some basic explanation and help.

The output (stdout) of dxfimport is a line like this for each converted 
face :
LAYER002 polygon LAYER002_000001117 0 0 9 1.650004 36.700264 14.223996 
1.650004 36.710262 13.099998 1.650005 36.710262 14.223996
Talking about workflow: imagine that a similar program can produce 
similar lines for Radiance lightsources, using LINE entities from a DXF 
file.
We use just such a program (not reading dxf however, but the very exotic 
.gs1 files from Arc+ modelling software) to convert lines into 
lightsources, where the startpoint of a line is the origin of a 
lightsource, and its endpoint can be translated as a direction vector 
for spotlights, or to transform IES data. Do you get the idea?
But this is going to be a little off-topic for now.

Dxf2rad from Georg,however, has much more options, and supports much 
more entities than dxfimport probably ever will.

Iebele



Jelle Feringa / EZCT Architecture & Design Research wrote:

> Hi group,
>
> I?m happy to tell you Iebele Abel released a dxf to rad converter for 
> Linux.
>
> What?s good about the converter is that implies a way of organizing 
> your radiance scene.
>
> The workflow is based on the layers present in the .dxf file, the 
> modifier in the generated .rad file will correspond to the name of the 
> layer in the .dxf file. The point of this is that when you need to 
> make different renderings of a project in progress you use the layers 
> for mapping the materials to the .rad geometry. When presented a 
> modified model, just overwrite the existing .rad geometry using 
> dxfimport, launch your renderscript et voila, another render iteration 
> on its way. When working for rapid changing projects this workflow is 
> killer.
>
> Something which is highly productive for this type of workflow is to 
> have a standardized radiance library where the layer number in your 
> dxf file corresponds to the material in your materials definitions. If 
> this way of working is familiar to you, & you happen to work on Linux, 
> you should definitely take a look at Iebele?s dxfimport converter !
>
> When looking for a converter with lots of options, look further, but 
> dxfimport fits perfectly in a highly streamlined radiance workflow, 
> based on .dxf input.
>
> Iebele, perhaps you could elaborate on which entities dxfimport 
> handles? Which versions of .dxf are supported in dxfimport? What about 
> unreasonable large models, do these work with dxfimport?
>
> Cheers, Jelle.
>
>------------------------------------------------------------------------
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general@radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general
>  
>

From tbleicher at zwielicht.escape.de  Sun Jul 10 15:42:00 2005
From: tbleicher at zwielicht.escape.de (Thomas Bleicher)
Date: Sun Jul 10 15:41:23 2005
Subject: [Radiance-general] Radiance Project Organization
Message-ID: <20050710134200.GA7194@zwielich.escape.de>

Hello everyone.

I'm currently developing a new interface for Radiance for the
free 3D modeling suite Blender. Screenshots and a very early
version can be found at

    http://home.arcor.de/tbleicher/exif/index.html

Please note that you should know something about Blender, Python
and Linux if you want to install the current version.

Among other things it supports IES data import and the import
of Radiance material descriptions (very limited at the moment).
Both are organized in some sort of "library" backend. Now I'm
looking for a good idea how to organize and populate these libraries.
I think I'll find the most experienced users here on this list so I'm
asking the community at large: 

about luminaire data:

*) Which features would you like to see in a data browser?

*) Is there a common standard for information exchange beyond
   IES, TM14 and Eulumdat(*.ldt)? Particularly I'm looking for
   some sort of database for luminaire, lamptype and geometry
   data or images. It seems like every manufacturer has it's
   own standard and presentation utility.
   I know there is a project call "DIALUX" which seems to be
   supported by a lot of manufacturers (at least in Europe) but
   I don't know if it's actually very popular.

*) How do you organize luminaire data in your projects?
   Do you pre-select the files to use in the project and only
   handle a small quantitiy of datafiles or do you use
   (centralized) repositories (by type, by manufacturer)?
   
about materials:

*) Do you use simple material descriptions or is there no
   end in complexity (modifiers, *.cal files etc.)?

*) Do you rely on CAD exporters (and how they handle the material
   assignment) or do you hand edit materials?

*) Where do your material definitions come from? Messurements,
   handed down for generations and guarded carefully in the family
   vault, fiddling until it "looks right"?

*) Do you use image based textures?


I hope some of you can share their experiences and information
on these things. If you have other ideas or a wishlist for a 
Radiance interface I'd be glad to hear about it. I try to keep
the parts of my code as separate as possible so libraries etc.
may be useable without the Blender iterface as well.


Thanks for your interest,

Thomas

PS: I am well aware of "b/rad" by Francesco Anselmo. So far we
    had different targets in developing our interfaces but in
    the near future we hope to join our efforts. No one likes
    to be second in inventing the wheel ;)
    

From kthibault at biomechanicsinc.com  Sun Jul 10 16:55:15 2005
From: kthibault at biomechanicsinc.com (Kirk Thibault)
Date: Sun Jul 10 16:56:10 2005
Subject: [Radiance-general] Radiance Project Organization
In-Reply-To: <20050710134200.GA7194@zwielich.escape.de>
References: <20050710134200.GA7194@zwielich.escape.de>
Message-ID: <9EC2236E-63F6-4656-B390-AA4757F2045A@biomechanicsinc.com>

Thomas - First of all, thanks for the effort. This request falls sort  
of in between lighting and textures, but do you plan to support  
Blender's IBL capabilities, using HDR images for global  
illumination?  As Blender already already permits you to set up this  
environment, it would be great to be able to specify this in a  
Radiance export from Blender.  Can't wait to see what you cook up!

Thanks,

kirk


On Jul 10, 2005, at 9:42 AM, Thomas Bleicher wrote:


> Hello everyone.
>
> I'm currently developing a new interface for Radiance for the
> free 3D modeling suite Blender. Screenshots and a very early
> version can be found at
>
>     http://home.arcor.de/tbleicher/exif/index.html
>
> Please note that you should know something about Blender, Python
> and Linux if you want to install the current version.
>
> Among other things it supports IES data import and the import
> of Radiance material descriptions (very limited at the moment).
> Both are organized in some sort of "library" backend. Now I'm
> looking for a good idea how to organize and populate these libraries.
> I think I'll find the most experienced users here on this list so I'm
> asking the community at large:
>
> about luminaire data:
>
> *) Which features would you like to see in a data browser?
>
> *) Is there a common standard for information exchange beyond
>    IES, TM14 and Eulumdat(*.ldt)? Particularly I'm looking for
>    some sort of database for luminaire, lamptype and geometry
>    data or images. It seems like every manufacturer has it's
>    own standard and presentation utility.
>    I know there is a project call "DIALUX" which seems to be
>    supported by a lot of manufacturers (at least in Europe) but
>    I don't know if it's actually very popular.
>
> *) How do you organize luminaire data in your projects?
>    Do you pre-select the files to use in the project and only
>    handle a small quantitiy of datafiles or do you use
>    (centralized) repositories (by type, by manufacturer)?
>
> about materials:
>
> *) Do you use simple material descriptions or is there no
>    end in complexity (modifiers, *.cal files etc.)?
>
> *) Do you rely on CAD exporters (and how they handle the material
>    assignment) or do you hand edit materials?
>
> *) Where do your material definitions come from? Messurements,
>    handed down for generations and guarded carefully in the family
>    vault, fiddling until it "looks right"?
>
> *) Do you use image based textures?
>
>
> I hope some of you can share their experiences and information
> on these things. If you have other ideas or a wishlist for a
> Radiance interface I'd be glad to hear about it. I try to keep
> the parts of my code as separate as possible so libraries etc.
> may be useable without the Blender iterface as well.
>
>
> Thanks for your interest,
>
> Thomas
>
> PS: I am well aware of "b/rad" by Francesco Anselmo. So far we
>     had different targets in developing our interfaces but in
>     the near future we hope to join our efforts. No one likes
>     to be second in inventing the wheel ;)
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>



From rpg at rumblestrip.org  Sun Jul 10 19:25:45 2005
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Sun Jul 10 19:26:37 2005
Subject: [Radiance-general] Radiance Project Organization
In-Reply-To: <20050710134200.GA7194@zwielich.escape.de>
References: <20050710134200.GA7194@zwielich.escape.de>
Message-ID: <7a1385c71af5d7f28d4dc287e222d5bc@rumblestrip.org>


Hi Thomas,

On Jul 10, 2005, at 7:42 AM, Thomas Bleicher wrote:

> I'm currently developing a new interface for Radiance for the
> free 3D modeling suite Blender.

This looks very cool, Thomas.

> Among other things it supports IES data import and the import
> of Radiance material descriptions (very limited at the moment).

I love the way you create 3D objects in the scene that represent the 
photometry...

> Both are organized in some sort of "library" backend. Now I'm
> looking for a good idea how to organize and populate these libraries.
> I think I'll find the most experienced users here on this list so I'm
> asking the community at large:
>
> about luminaire data:
>
> *) Which features would you like to see in a data browser?

I think the main thing is to be able to see the critical bits of the 
file, such as multiplier, photometric type, lamp lumens and quantity, 
notes, and either a text- or image-based view of the distribution. From 
there one could be able to edit these bits and save variations on the 
fixture.  A basic-quality rendering of the luminaire would be great 
too, placed in a box maybe so one could see the distribution in a space 
(like my ltview utility does).  The 3d object representing the 
distribution is very cool, but having a rendering of the luminaire in a 
space would also be useful for troubleshooting purposes, especially 
when using illum spheres and all.

> *) Is there a common standard for information exchange beyond
>    IES, TM14 and Eulumdat(*.ldt)? Particularly I'm looking for
>    some sort of database for luminaire, lamptype and geometry
>    data or images. It seems like every manufacturer has it's
>    own standard and presentation utility.
>    I know there is a project call "DIALUX" which seems to be
>    supported by a lot of manufacturers (at least in Europe) but
>    I don't know if it's actually very popular.

You're talking about a couple of things here.  In terms of raw 
information exchange, the formats you mention are the standards.  I'm 
mostly familiar with the .IES format since I'm in the USA, but many 
European manufacturers I deal with also make their data available in 
IES format.

Then you mention a "presentation utility", and a database.  These are 
definitely things that exist, and not in any standard format.  I have 
used Dialux in the past and I know what you are referring to there; 
they have an internal database that stores information about luminaires 
including the photometric distribution, picture(s) of the image, and 
keywords.  Basically building on the IES file with more organizational 
information & fields. I believe the makers of Dialux also publish the 
format for these databases and that is how the manufacturers have been 
able to provide downloadable plugins to Dialux.  Often, US 
manufacturers will release calculation software that has an excellent 
database of *their* luminaires, but allow you to define lums based on 
any IES file, for obvious marketing reasons.

There is also a product called Photometric Toolbox, made by Lighting 
Analysts (the people who produce  the very popular AGI lighting 
calculation product).  I only used an old version of the program, so 
this may not be a totally accurate description, but as I recall it was 
essentially a very detailed photometric file viewer/converter.  With 
this tool, you could look at the raw data in an IES file but have it 
presented in an easy-to-read manner, with edit boxes for all the 
parameters, and polar curves of all the planes.  It could also convert 
between type B and type C formats.  This is a very useful tool; it's 
not a database, but an excellent viewer.  The functionality of this 
tool is essentially what I was describing in my answer to your question 
above.  Having this functionality, along with the ability to add 
extended information to search on like manufacturer, lamp type, 
mounting, notes, etc, and the ability to then copy any luminaire into a 
project database, would be great!

> *) How do you organize luminaire data in your projects?
>    Do you pre-select the files to use in the project and only
>    handle a small quantitiy of datafiles or do you use
>    (centralized) repositories (by type, by manufacturer)?

I generally collect all the ies files (and converted .rad/.dat files 
from ies2rad) for a given project and keep them within the job file 
hierarchy.  In general for any given project there will be a manageable 
amount of files, and it also makes sense because I often modify things 
like lumen output on a per-fixture basis so libraries don't necessarily 
work.  HOWEVER, that's not to say that having a library of *standard* 
luminaires from which to select *project* luminaires, as described 
above, isn't a great, great thing.

> about materials:
>
> *) Do you use simple material descriptions or is there no
>    end in complexity (modifiers, *.cal files etc.)?

I'm a materials wimp; at my previous company I used grey materials, 
dealing with straight reflectance only.  I had my reasons.  But I have 
started at a new company very recently and they use a little more color 
and use patterns and mixtures a lot more.  From what we all see from 
the Radiance images that get shared in this community, I think the 
latter case is more the rule than the exception. And the Jedi Masters 
of cal files on this list have done some pretty amazing things with 
mixtures & .cal files, so from where I'm standing, I'd say there's no 
end to the complexity.

> *) Do you rely on CAD exporters (and how they handle the material
>    assignment) or do you hand edit materials?

I make my models so that each layer gets a certain material assignment 
when I export (I use Georg's radout utility for this).

> *) Where do your material definitions come from? Messurements,
>    handed down for generations and guarded carefully in the family
>    vault, fiddling until it "looks right"?

all of the above. Again, since I used to do a lot of grey-only 
renderings, it was pretty straightforward to use intuition and 
experience to assign a basic reflectance to a material.  There are lots 
of good glass definitions in that Optics5 program, too.  But special 
cases demand special practices, and I have in the past done fancy 
measurements of one-off glass/diffuser combinations.  I think I had 
some pictures of that setup in my presentation from the 2003 Radiance 
Workshop.

> *) Do you use image based textures?

Sometimes.  =8-)

I hope some of you can share their experiences and information
> on these things. If you have other ideas or a wishlist for a
> Radiance interface I'd be glad to hear about it. I try to keep
> the parts of my code as separate as possible so libraries etc.
> may be useable without the Blender iterface as well.

I hope this was useful to you, and I hope more people share here as 
well.  Radiance is such an open ended collection of tools, there are as 
many ways to approach modeling and rendering with it as there are 
users.

> PS: I am well aware of "b/rad" by Francesco Anselmo. So far we
>     had different targets in developing our interfaces but in
>     the near future we hope to join our efforts. No one likes
>     to be second in inventing the wheel ;)

Sounds good, and hello to you Francesco, I'm glad to hear you are OK in 
light of last week's event (Greg told me you and yours were OK).

=================
    Rob Guglielmetti
www.rumblestrip.org


From pisuke at blueyonder.co.uk  Sun Jul 10 23:14:20 2005
From: pisuke at blueyonder.co.uk (Francesco Anselmo)
Date: Sun Jul 10 23:15:27 2005
Subject: [Radiance-general] Radiance Project Organization
In-Reply-To: <7a1385c71af5d7f28d4dc287e222d5bc@rumblestrip.org>
References: <20050710134200.GA7194@zwielich.escape.de>
	<7a1385c71af5d7f28d4dc287e222d5bc@rumblestrip.org>
Message-ID: <1121030060.2862.42.camel@leviathan>

Hi Rob,

> Sounds good, and hello to you Francesco, I'm glad to hear you are OK in 
> light of last week's event (Greg told me you and yours were OK).

I'm glad too!
We've been lucky this time.

This world is such a mess ...

Take care,

Francesco


From pisuke at blueyonder.co.uk  Sun Jul 10 23:48:14 2005
From: pisuke at blueyonder.co.uk (Francesco Anselmo)
Date: Sun Jul 10 23:49:03 2005
Subject: [Radiance-general] Radiance Project Organization
In-Reply-To: <1121030060.2862.42.camel@leviathan>
References: <20050710134200.GA7194@zwielich.escape.de>
	<7a1385c71af5d7f28d4dc287e222d5bc@rumblestrip.org>
	<1121030060.2862.42.camel@leviathan>
Message-ID: <1121032094.2869.64.camel@leviathan>

Oops!

> I'm glad too!
>  We've been lucky this time.

I was thinking of sending this reply privately to Rob,
but I forgot to change the address: sorry!

> PS: I am well aware of "b/rad" by Francesco Anselmo. So far we
>     had different targets in developing our interfaces but in
>     the near future we hope to join our efforts. No one likes
>     to be second in inventing the wheel ;)

I would be really happy to join Thomas' efforts and merge the
exif.py and b/rad projects.
I'm just going to write to Thomas my ideas; maybe this topic
can be discussed better on the b/rad mailing list:

http://lists.nongnu.org/mailman/listinfo/brad

Cheers,

-- 
Francesco


From grobe at gmx.net  Mon Jul 11 11:50:16 2005
From: grobe at gmx.net (Lars O. Grobe)
Date: Mon Jul 11 11:50:55 2005
Subject: [Radiance-general] rvu: too many modifiers in ambient list
In-Reply-To: <BE949BCD-9EBF-4F7C-9D1F-906487F14017@gmail.com>
References: <a932f51195d061d856d96814b21d928e@gmx.net>
	<A5662C01-B0B1-4B30-92C2-D098CA4D51F7@gmail.com>
	<4469a270441082ca2a06e1860a55bcb6@gmx.net>
	<BE949BCD-9EBF-4F7C-9D1F-906487F14017@gmail.com>
Message-ID: <a21064ffac25d2264e0e62cade2f3820@gmx.net>

Hi Greg!

I guess the problem arises somewhere else. I get this problem even with 
only on -ae modifier now. I think the problem is that I simply have too 
many materials defined. The check in ambient.c is done if I use the -ae 
switch, but I don't think it is the number of -ae modifiers.

The background is that I do something stupid at the first look: I 
include my global material library with every object of my scene, than 
assemble the scene with replmarks. The reason for that (including into 
each object instead using the library at the final oconv run) is that 
my materials have to undergo all the transformations I apply to the 
objects (because I use image maps massively). Before, I had precompiled 
all these objects and used them as instances, so there was no need in 
having the material definitions in all objects, but this gave a bad 
overhead (the point is that a rotated instances still has its mapping, 
but a rotated rad-scene has wrong mappings, cause the mapping is 
rotated only if the material definition is IN the scene).

So I guess I will have to find a way to filter the materials better (so 
that only the materials actually used are included into an object file) 
or live with the instance overhead.

Thanks, CU Lars.


From faridah_isa at yahoo.com  Mon Jul 11 13:13:05 2005
From: faridah_isa at yahoo.com (ida)
Date: Mon Jul 11 13:20:49 2005
Subject: [Radiance-general] how to start it using participating media
Message-ID: <20050711111305.21027.qmail@web32403.mail.mud.yahoo.com>

hi all,
i want to get the advice -how to simulate the
smoke/fog or underwater scene (participating media)
using radzilla to do the basic scene-any an idea how
to start it on??

thanks,
idaz


		
____________________________________________________
Sell on Yahoo! Auctions ? no fees. Bid on great items.  
http://auctions.yahoo.com/

From gregoryjward at gmail.com  Mon Jul 11 16:56:37 2005
From: gregoryjward at gmail.com (Greg Ward)
Date: Mon Jul 11 16:57:33 2005
Subject: [Radiance-general] rvu: too many modifiers in ambient list
In-Reply-To: <a21064ffac25d2264e0e62cade2f3820@gmx.net>
References: <a932f51195d061d856d96814b21d928e@gmx.net>
	<A5662C01-B0B1-4B30-92C2-D098CA4D51F7@gmail.com>
	<4469a270441082ca2a06e1860a55bcb6@gmx.net>
	<BE949BCD-9EBF-4F7C-9D1F-906487F14017@gmail.com>
	<a21064ffac25d2264e0e62cade2f3820@gmx.net>
Message-ID: <D50BE2C9-DF24-4F96-A535-F413648337A5@gmail.com>

Hi Lars,

That explains the problem.  Because each new inclusion of a material  
gets a new id, and this id needs to go into the ambient include/ 
exclude list for that modifier name, you will quickly overflow your  
ambient exclude set if you incorporate a copy of your materials for  
every object.

This is bad practice in general because it means that most of your  
memory is occupied with redundant material definitions rather than  
geometry.  A better approach is to include any materials that need to  
undergo transformations as part of the geometric object file.  If you  
just have a map you wish to apply, possibly substituting the  
underlying material, you can use an alias appropriately, e.g.:

# The map for this material:

void colorpict thisMap
7 ...
0
0

# origMat is the name of a predefined material in my main library,  
included once

thisMap alias thisMat origMat

thisMat {geometry ...}

-----
This allows you to include the main material definitions only once,  
and control them in a central library.  You can even control the  
maps, because they are named by the colorpict rather than defined  
directly in your geometry files.

Hope this helps.
-Greg

> From: Lars O. Grobe <grobe@gmx.net>
> Date: July 11, 2005 2:50:16 AM PDT
>
> Hi Greg!
>
> I guess the problem arises somewhere else. I get this problem even  
> with only on -ae modifier now. I think the problem is that I simply  
> have too many materials defined. The check in ambient.c is done if  
> I use the -ae switch, but I don't think it is the number of -ae  
> modifiers.
>
> The background is that I do something stupid at the first look: I  
> include my global material library with every object of my scene,  
> than assemble the scene with replmarks. The reason for that  
> (including into each object instead using the library at the final  
> oconv run) is that my materials have to undergo all the  
> transformations I apply to the objects (because I use image maps  
> massively). Before, I had precompiled all these objects and used  
> them as instances, so there was no need in having the material  
> definitions in all objects, but this gave a bad overhead (the point  
> is that a rotated instances still has its mapping, but a rotated  
> rad-scene has wrong mappings, cause the mapping is rotated only if  
> the material definition is IN the scene).
>
> So I guess I will have to find a way to filter the materials better  
> (so that only the materials actually used are included into an  
> object file) or live with the instance overhead.
>
> Thanks, CU Lars.

From grobe at gmx.net  Mon Jul 11 18:39:30 2005
From: grobe at gmx.net (Lars O. Grobe)
Date: Mon Jul 11 18:40:20 2005
Subject: [Radiance-general] rvu: too many modifiers in ambient list
In-Reply-To: <D50BE2C9-DF24-4F96-A535-F413648337A5@gmail.com>
References: <a932f51195d061d856d96814b21d928e@gmx.net>
	<A5662C01-B0B1-4B30-92C2-D098CA4D51F7@gmail.com>
	<4469a270441082ca2a06e1860a55bcb6@gmx.net>
	<BE949BCD-9EBF-4F7C-9D1F-906487F14017@gmail.com>
	<a21064ffac25d2264e0e62cade2f3820@gmx.net>
	<D50BE2C9-DF24-4F96-A535-F413648337A5@gmail.com>
Message-ID: <7064b329f33eae3d1c756455ec2472b3@gmx.net>

Hi Greg!

> That explains the problem.  Because each new inclusion of a material 
> gets a new id, and this id needs to go into the ambient 
> include/exclude list for that modifier name, you will quickly overflow 
> your ambient exclude set if you incorporate a copy of your materials 
> for every object.

Ok, so if I define aliases, no new ids are created, right? I changed my 
scripts so that only a file (let's call it material.aliases) is cat'ed 
into the rad-scene-file, while the actual definitions of materials 
(material.mat) and modifying patterns (material.map) are passed only to 
oconv in the final processing step. I have about 20 aliases in my 
material.aliases file, and a lot of objects (radiance scene files), so 
I hope that these aliases won't need to have their own ids (if I 
calculate 200 objects, 200*20=4000 id's would already massively overrun 
all limits).

The next question arises with the use of obj2mesh. I use

obj2mesh -a material.mat -a material.map -a material.alias object.obj > 
object.rad

for each of my objects. I have to pass the mat and map files to 
obj2mesh, which behaves more like oconv and can't use just the aliases 
(and having the actual definitions linked later by oconv). So here I 
still get all these definitions for each object, will this count in my 
ambient list?

> This is bad practice in general because it means that most of your 
> memory is occupied with redundant material definitions rather than 
> geometry.

Yes. I guess I could solve all this if using only obj as cad input, 
using u/v-coordinates with obj2mesh to position and transform the maps 
and don't include any mappings into the scene files at all. However, I 
have a mixed model with dxf and obj, which developed before obj2mesh 
was released, and I am a bit suspicious concerning modeling apps and 
u/v.

I am currently trying to reduce the material definitions, but as you 
can see from my questions, I won't be able to change a lot if some of 
the points I mentioned are like I guess. In the worst case, I'd have to 
give up counting on speed-up by -ae.

Thank you for your answers, CU Lars.


From grobe at gmx.net  Mon Jul 11 18:52:06 2005
From: grobe at gmx.net (Lars O. Grobe)
Date: Mon Jul 11 18:52:50 2005
Subject: [Radiance-general] how to start it using participating media
In-Reply-To: <20050711111305.21027.qmail@web32403.mail.mud.yahoo.com>
References: <20050711111305.21027.qmail@web32403.mail.mud.yahoo.com>
Message-ID: <295dbaf519ea8f78b1b21d661345025a@gmx.net>

Hi!

I never used it so far...

from Georg's radiance knowledge base at www.schorsch.com :  
http://www.schorsch.com/kbase/glossary/part_med.html
from this list's archive, with a link to the reference:  
http://www.radiance-online.org/pipermail/radiance-general/2003- 
November/001197.html

These links are not radzilla-specific.

Good luck, CU Lars.


From grobe at gmx.net  Mon Jul 11 19:54:20 2005
From: grobe at gmx.net (Lars O. Grobe)
Date: Mon Jul 11 19:55:07 2005
Subject: [Radiance-general] rvu: too many modifiers in ambient list
In-Reply-To: <7064b329f33eae3d1c756455ec2472b3@gmx.net>
References: <a932f51195d061d856d96814b21d928e@gmx.net>
	<A5662C01-B0B1-4B30-92C2-D098CA4D51F7@gmail.com>
	<4469a270441082ca2a06e1860a55bcb6@gmx.net>
	<BE949BCD-9EBF-4F7C-9D1F-906487F14017@gmail.com>
	<a21064ffac25d2264e0e62cade2f3820@gmx.net>
	<D50BE2C9-DF24-4F96-A535-F413648337A5@gmail.com>
	<7064b329f33eae3d1c756455ec2472b3@gmx.net>
Message-ID: <2cb014fc6bad376e1f47ca4682c4db21@gmx.net>

Hi!

Once again, maybe I misunderstood, maybe I just wrote a misleading 
description what I wanted to achieve by including the material 
definitions (at least the colorpict modifier's definition) into each 
object file.

I have radiance-files describing geometrical objects, like e.g. a plane 
of marble. This "object" is placed by replmarks, which brings it to its 
place moving and rotating it in space. Now, as the object is made of 
marble in my example, it also has a surface structure which is to be 
represented by a picture, used by the colorpict modifier. Both, 
geometry and image, are placed at (0;0;0) on the x-y-plane originally, 
and translated by replmarks.

So far, I either used instances with replmarks or included the object 
geometry with the colorpict modifier's definition. As such, the xform 
operations performed by replmarks were also applied to the colorpict.

Now, having only the alias definition left in the object file, the 
image map is not translated together with the object itself any more. 
So the object moves somewhere in space, while the image map, staying at 
(0;0;0) on xy, visually disappears because it no longer touches its 
geometry.

Does that mean that I have to stay with the redundant definition of 
colorpict modifiers? Using only instances gives bad overhead with such 
simple geometry, objects with only the alias included don't show the 
mapped image when moved or rotated. Using object geometry with included 
colorpict definition gives my the "ambient list" message that I 
initially described when beginning this thread. For future projects: 
using u/v with mesh primitives would prevent all that trouble, right?

So for now, I think I will have to stay with the redundant material 
definitions included in object (geometry) files.

Thank you for all the help, CU Lars.


From gregoryjward at gmail.com  Mon Jul 11 20:09:26 2005
From: gregoryjward at gmail.com (Greg Ward)
Date: Mon Jul 11 20:10:18 2005
Subject: [Radiance-general] rvu: too many modifiers in ambient list
In-Reply-To: <2cb014fc6bad376e1f47ca4682c4db21@gmx.net>
References: <a932f51195d061d856d96814b21d928e@gmx.net>
	<A5662C01-B0B1-4B30-92C2-D098CA4D51F7@gmail.com>
	<4469a270441082ca2a06e1860a55bcb6@gmx.net>
	<BE949BCD-9EBF-4F7C-9D1F-906487F14017@gmail.com>
	<a21064ffac25d2264e0e62cade2f3820@gmx.net>
	<D50BE2C9-DF24-4F96-A535-F413648337A5@gmail.com>
	<7064b329f33eae3d1c756455ec2472b3@gmx.net>
	<2cb014fc6bad376e1f47ca4682c4db21@gmx.net>
Message-ID: <36FADA24-5E3C-4E16-945C-13FA1CECCC0A@gmail.com>

Hi Lars,

If you don't use a material or set of materials for an object, then  
including the unused material is a waste of space.  Thus, including a  
whole material library with each object, which uses at most a few of  
these materials, is a huge tax on memory during rendering.  Don't do  
it.  Find another way, even if it's less convenient.

My earlier suggestion was to include the colorpict in each object  
file as needed to move coordinates around with your geometry, and  
alias'ing the material the colorpict is applied to.  That way, you  
duplicate only what is needed for correct rendering, and can still  
use a library.  The alias also takes up space, but not as much as a  
whole library of materials.  It is about the same as putting just the  
materials used in each geometry file.  Giving each alias a unique  
name also avoids the generation of excess id's with the -ae option  
you are currently experiencing.  Each unique modifier name generates  
as many id's as there are appearances in your scene.  (Instancing a  
mesh or octree counts as a single appearance, where xform'ing counts  
for multiple appearances.)

If you can avoid duplicating your entire material library with each  
object, this should solve all your problems.

-Greg

From tbleicher at zwielicht.escape.de  Mon Jul 11 21:50:24 2005
From: tbleicher at zwielicht.escape.de (Thomas Bleicher)
Date: Mon Jul 11 22:15:39 2005
Subject: [Radiance-general] Radiance Project Organization
In-Reply-To: <7a1385c71af5d7f28d4dc287e222d5bc@rumblestrip.org>
References: <20050710134200.GA7194@zwielich.escape.de>
	<7a1385c71af5d7f28d4dc287e222d5bc@rumblestrip.org>
Message-ID: <20050711195024.GA4685@zwielich.escape.de>

Thanks, Rob, for the long answer.

On Sun, Jul 10, 2005 at 11:25:45 -0600, Rob Guglielmetti wrote:

> >about luminaire data:
> >
> >*) Which features would you like to see in a data browser?
> 
> I think the main thing is to be able to see the critical bits of the 
> file, such as multiplier, photometric type, lamp lumens and quantity, 
> notes, and either a text- or image-based view of the distribution. From 
> there one could be able to edit these bits and save variations on the 
> fixture.  A basic-quality rendering of the luminaire would be great 
> too, placed in a box maybe so one could see the distribution in a space 
> (like my ltview utility does).  The 3d object representing the 
> distribution is very cool, but having a rendering of the luminaire in a 
> space would also be useful for troubleshooting purposes, especially 
> when using illum spheres and all.

Are there any editable bits in a IES data file? I thought these
informations describe this type of luminaire and editing them would
mean to change the luminaire.

About the rendering:
I remember (about 5 years back) a software from a baltic company
that could render the "footprint" of a luminaire on a piece of
wall and floor amazingly quick (some sort of photon tracing,
I guess). Compared to Radiance it was extremly quick. Computers
became more powerfull since and it should be possible to do a
similar thing with rvu now. I'll have to test that.
 
> >*) Is there a common standard for information exchange beyond
> >   IES, TM14 and Eulumdat(*.ldt)? Particularly I'm looking for
> >   some sort of database for luminaire, lamptype and geometry
> >   data or images. It seems like every manufacturer has it's
> >   own standard and presentation utility.
> >   I know there is a project call "DIALUX" which seems to be
> >   supported by a lot of manufacturers (at least in Europe) but
> >   I don't know if it's actually very popular.
> 
> You're talking about a couple of things here.  In terms of raw 
> information exchange, the formats you mention are the standards.  I'm 
> mostly familiar with the .IES format since I'm in the USA, but many 
> European manufacturers I deal with also make their data available in 
> IES format.
> 
> Then you mention a "presentation utility", and a database.  These are 
> definitely things that exist, and not in any standard format. 

Well, I was hoping for some de facto file format for the informations
beyond IES or EULUMDAT (which in my eyes are interchangeable).

> I have 
> used Dialux in the past and I know what you are referring to there; 
> they have an internal database that stores information about luminaires 
> including the photometric distribution, picture(s) of the image, and 
> keywords.  Basically building on the IES file with more organizational 
> information & fields. I believe the makers of Dialux also publish the 
> format for these databases and that is how the manufacturers have been 
> able to provide downloadable plugins to Dialux.

That's what I remember as well. But I read that it's didn't become the
standard format it wanted to be. All major manufacturers support it,
though. I'll search for their specs. IIRC they used a MSDE database
for storage. 

> Often, US 
> manufacturers will release calculation software that has an excellent 
> database of *their* luminaires, but allow you to define lums based on 
> any IES file, for obvious marketing reasons.

Not only US manufacturers (see Zumtobel Staff and "Cophos" for example).

> There is also a product called Photometric Toolbox, made by Lighting 
> Analysts (the people who produce  the very popular AGI lighting 
> calculation product).
[...]
> This is a very useful tool; it's 
> not a database, but an excellent viewer.  The functionality of this 
> tool is essentially what I was describing in my answer to your question 
> above.  Having this functionality, along with the ability to add 
> extended information to search on like manufacturer, lamp type, 
> mounting, notes, etc, and the ability to then copy any luminaire into a 
> project database, would be great!

Thanks for pointing this out. I had a look at it and functional
seems not to have changed much. This is definitly a tool to work
_on_ the IES data, not only to view and sort it. To distribute
the IES data files (and associated information) they create (or
have the manufacturers create) simple Windows cabinet file that
include a directory tree with those files. Association is simply
done by filename (one could think of a better way).

It should be possible to extract these files and use the directory
structure as is or with a few conversions. I already do use directories
to sort the data. Would be a nice way to import manufacturer data.

> >*) How do you organize luminaire data in your projects?
> >   Do you pre-select the files to use in the project and only
> >   handle a small quantitiy of datafiles or do you use
> >   (centralized) repositories (by type, by manufacturer)?
> 
> I generally collect all the ies files (and converted .rad/.dat files 
> from ies2rad) for a given project and keep them within the job file 
> hierarchy.  In general for any given project there will be a manageable 
> amount of files, and it also makes sense because I often modify things 
> like lumen output on a per-fixture basis so libraries don't necessarily 
> work.  HOWEVER, that's not to say that having a library of *standard* 
> luminaires from which to select *project* luminaires, as described 
> above, isn't a great, great thing.

I thought that would be a typical approche. Safes me some thinking as
well. 


Again thanks for your input.

Thomas

From cbauer- at t-online.de  Tue Jul 12 10:40:08 2005
From: cbauer- at t-online.de (Carsten Bauer)
Date: Tue Jul 12 02:12:34 2005
Subject: [Radiance-general] how to start it using participating media
In-Reply-To: <20050711111305.21027.qmail@web32403.mail.mud.yahoo.com>
References: <20050711111305.21027.qmail@web32403.mail.mud.yahoo.com>
Message-ID: <42D381E8.7070400@t-online.de>

hi Ida,

in coarse words, a medium in a first step sucks in light (energy..) from 
the field and partly absorbs that completely, partly reemits the light
again. And this is also the basic way how you specify such a medium in 
Radiance, you define an extinction value (three values, for the three 
color channels rgb) for the amount of light taken out and an 'albedo' 
value (also three for rgb) for the amount of light reabsorbed or 
'scattered'.
The extinction comes with a unit (1/distance), whereas the albedo is a 
dimensionless relation of scattered/absorbed energy and thus always lies 
between 0 and 1.
so much for the quick and dirty version, follow the links posted by Lars 
to read the exact definitons..

In Radiance, medium properties are defined with the 'mist' material :

( **note-  the following short demo follows freely  the one in the book 
Rendering with Radiance by G Ward/R Shakespeare, p. 460ff **)

void mist fogdemo
0
0
6 0.07 0.07 0.07  0.5 0.5 0.5

would be a simple version with rgb extinction = 0.07 (in units 1/your 
world unit), eg 1/m  and rgb albedo = 0.5
Note that you have to set both, see above, because without extinction 
there would be not light to scatter either.

The next point to consider is that the medium speciifc calculations 
usually take an awful lot of time, so one definitely should try to limit 
them
a) to certain regions in space and
b) to certain light sources, i.e consider light scattering only for the 
light from few selected sources.

a) is achieved by setting up a boundary for the mist volume, means 
creating some object made out of the mist material which encloses a volume

b) is achieved by listing the chosen sources in the mist material 
definition.

If you have e.g a spotlight
void spotlight spot
0
0
7  1000 1000 1000 40  0 0 -1

spot ring spot_light
0
0
8  0 0 2  0 0 -1  0.08 0.0

you may list the spot_light object in the mist definition:

void mist fogdemo
1 spot_light
0
6 0.07 0.07 0.07  0.5 0.5 0.5

now the enclosing volume:
the spotlight is located at  0 0 2  (x, y, z), so you can set a cone 
with cap for the surrounding mist volume as follows
fogdemo ring fog_cap
0
0                       
8  0 0 2.1  0 0 1  0.2  0.0

fogdemo cone fog_cone
0
0
8 0 0 2.1   0 0 0  0.2  2

##note that the surface normals point outside, i.e away from the 
enclosed volume
 finally add some demo objects
void plastic grey
0
0
5  0.5 0.5 0.5 0 0

grey polygon ground
0
0
12 -2  -2   0
    2   -2   0
    2    2   0
   -2   2   0

grey sphere ball
0
0
4  0 0 0.5 0.2

Before you oconv and and render the scene (preferrably chose a view 
point outside the mist cone), one more step needs to be done, you have 
to tell Radiance at which distance it should sample the scattering 
effects, the parameter is -ms, for that 2x2x2 m scene -ms 0.1 or -ms 
0.05 is  a start, so append this to your render options.

So far, the treatment is the same whether you use Radiance classic or 
Radzilla.

In  Radzilla you have now the additional possibility to modify the 
scattering albedo with a pattern. **Note that this is  just for 
creating  visual effects, for an exact  calculation  one rather would 
have to modify the extinction value over the volume, but this is very 
difficult to perform.**

Arbitrary patterns in Radiance or Radzilla can be created with help of 
so called 'noise functions' provided by the Radiance functional language.
As an example, create a file  fog_pat.cal and write the following lines 
in it:
 
gr = abs(fnoise3(Px/A3, Py/A4, Pz/A5))+ A2 ;
red = A1*gr*gr;
grn = A1*gr*gr;
blu = A1*gr*gr;

then  add a 'mistfunc' definition to your scene file:
void mistfunc fog_pat
4 red grn blu fog_pat.cal
0
5  1 0.0  1.0 1.0 0.3

make this appear before your mist material definition and change the 
mist material to have now the fog_pat as modifier:
for_pat mist fogdemo
1 spot_light
0
6 0.07 0.07 0.07  1 1 1

** note that now the albedo values are set to 1, to provide a neutral 
base, the final albedo will result out of a multiplication by this base 
value and the factor provided by the pattern function.**

Last but most important step:
play around with the example, the fractal noise function 'fnoise(..)'  
can be replaced by the normal 'noise(..)' for creating a smoother pattern,
and of course the scaling and intensity parameters A1-A5 can be adjusted 
as you like, also the values in the mist material. Usually,  the more 
realistic the pattern shall look, the more complicated the mathematical 
function has to be :-), so experiment with all sorts of weird 
combinations...

This of course is just  a simple demo, you soon might run into other 
difficulties in complicated scenes, i.e. how to set the enclosing mist 
volume to avoid visible artifacts (think e.g of a normal point light 
source instead of a spotlight like above, in this case the light output 
isn't restricted to certain directions so the cone approach doesn't work 
anymore. If all else fails, you also can set extinction and albedo 
globally for the whole scene with the render parameters -me and -ma ..

hope that this gets you started,
and be prepared, the mist stuff is tricky... :-)

-Carsten

From tbleicher at zwielicht.escape.de  Tue Jul 12 23:15:18 2005
From: tbleicher at zwielicht.escape.de (Thomas Bleicher)
Date: Tue Jul 12 23:14:45 2005
Subject: [Radiance-general] how to start it using participating media
In-Reply-To: <42D381E8.7070400@t-online.de>
References: <20050711111305.21027.qmail@web32403.mail.mud.yahoo.com>
	<42D381E8.7070400@t-online.de>
Message-ID: <20050712211518.GB19212@zwielich.escape.de>

On Tue, Jul 12, 2005 at 01:40:08 -0700, Carsten Bauer wrote:

[...] 151 lines of first class information snipped


Carsten,

Thank you again for taking the time write such detailed
and informative replies. That's the type of information
I hope to find when I have to tackle something new.

Thomas


From rpg at rumblestrip.org  Wed Jul 13 18:24:03 2005
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Wed Jul 13 18:24:57 2005
Subject: [Radiance-general] Radiance Project Organization
In-Reply-To: <20050711195024.GA4685@zwielich.escape.de>
References: <20050710134200.GA7194@zwielich.escape.de>
	<7a1385c71af5d7f28d4dc287e222d5bc@rumblestrip.org>
	<20050711195024.GA4685@zwielich.escape.de>
Message-ID: <1919.66.180.127.98.1121271843.squirrel@66.180.127.98>


Hi Thomas,

Sorry for the delay, I just wanted to address your question in your
response to my response to your question. (whoa, that was confusing.)

On Mon, July 11, 2005 1:50 pm, Thomas Bleicher said:

> Are there any editable bits in a IES data file? I thought these
> informations describe this type of luminaire and editing them would
> mean to change the luminaire.

Well, sometimes I adjust the # of lamps, the lumen output, or the
multiplier.  Of course these things could be handled with the multiplier
that is part of ies2rad as well.  But in rare cases, I need to adjust the
luminous aperture defined in the ies file, and this can only be done by
editing those fields in the ies file.  Yes, this is indeed changing the
fixture from the original photometered luminaire, but it's sometimes done
in order to simulate a unique fixture.

-- 
Rob Guglielmetti
www.rumblestrip.org

From cbauer- at t-online.de  Thu Jul 14 22:13:59 2005
From: cbauer- at t-online.de (Carsten Bauer)
Date: Thu Jul 14 13:47:23 2005
Subject: [Radiance-general] how to start it using participating media
In-Reply-To: <20050712211518.GB19212@zwielich.escape.de>
References: <20050711111305.21027.qmail@web32403.mail.mud.yahoo.com>	<42D381E8.7070400@t-online.de>
	<20050712211518.GB19212@zwielich.escape.de>
Message-ID: <42D6C787.40903@t-online.de>

Hi Thomas

nice to hear that the info was useful..

btw, two short clarifications:
my last sentence was maybe a bit ambigous, of course one can set medium 
extinction and albedo globally, but you still need the mist volume and 
mist material with the source list to show scattering. Otherwise only 
the extinction will show up, attenuating the light according to the 
distance the rays have traveled in the scene
In this case, a usual way is setting global extinction, for example  
with -me 0.07 0.07 0.07 and then define a mist material :

void  mist fogdemo
n ... sources
0
6  0 0 0  0.5 0.5 0.5

the zeros for the extinction in the mist materials mean to use the 
global value without changes, only scattering is calculated in tthe 
volume then.

To add further complexity and confusion :-), in limited, well defined 
circumstances also the extinction can be successfully  modified by a 
pattern. A 'colorfunc' modifier to the mist material acts on the 
extinction values, however, they aren't changed over the mist volume, 
just the value at the entry point is set and then holds for that ray 
throughout the mist volume. In special cases, when the gradient of the 
extinction is vertical to the view rays, this can indeed work out well, 
but only then..
Think e.g of a fog layer increasing in densitiy with decrasing height 
above ground, and the looking through it more or less in horizontal 
direction...

-Carsten





From grobe at gmx.net  Fri Jul 15 16:12:54 2005
From: grobe at gmx.net (Lars O. Grobe)
Date: Fri Jul 15 16:13:39 2005
Subject: [Radiance-general] rvu: too many modifiers in ambient list
In-Reply-To: <36FADA24-5E3C-4E16-945C-13FA1CECCC0A@gmail.com>
References: <a932f51195d061d856d96814b21d928e@gmx.net>
	<A5662C01-B0B1-4B30-92C2-D098CA4D51F7@gmail.com>
	<4469a270441082ca2a06e1860a55bcb6@gmx.net>
	<BE949BCD-9EBF-4F7C-9D1F-906487F14017@gmail.com>
	<a21064ffac25d2264e0e62cade2f3820@gmx.net>
	<D50BE2C9-DF24-4F96-A535-F413648337A5@gmail.com>
	<7064b329f33eae3d1c756455ec2472b3@gmx.net>
	<2cb014fc6bad376e1f47ca4682c4db21@gmx.net>
	<36FADA24-5E3C-4E16-945C-13FA1CECCC0A@gmail.com>
Message-ID: <7b880146285efe068970750035cd388d@gmx.net>

Hi Greg.

I followed your suggestion and used sed to replace all the modifiers in 
my cad files. So marble_grey in object plane_1 is renamed to 
plane_1_marble_grey now. However, there is one question left (in fact I 
didn't really understand the overflow condition I am causing). If I 
reduce the modifiers that will be included in all the object files to a 
lower number (in fact, only the mappings are included into each, as 
they are used in most cases). I wonder if I will get the "too many 
modifiers" if I have e.g. three modifiers defined in all object files. 
Is the overrun depending on the total number of modifier definitions, 
or is it the limit that ONE modifier can't be defined more than the 
fixed number? The latter means that I have to change a lot, as I would 
have to examine the cad files also for the most common colorpict 
modifiers (which I include into each object file so far). From what I 
understood, I am afraid that will be necessary, but before spending 
some hours on this, I would like to understand the nature of this limit 
of modifier ids.

TIA+CU. Lars.

> If you can avoid duplicating your entire material library with each 
> object, this should solve all your problems.

(This is the key point - I don't duplicate the entire material library 
with each object any more now, but still some modifiers of the 
library.)


From gregoryjward at gmail.com  Fri Jul 15 18:59:27 2005
From: gregoryjward at gmail.com (Greg Ward)
Date: Fri Jul 15 19:00:23 2005
Subject: [Radiance-general] rvu: too many modifiers in ambient list
In-Reply-To: <7b880146285efe068970750035cd388d@gmx.net>
References: <a932f51195d061d856d96814b21d928e@gmx.net>
	<A5662C01-B0B1-4B30-92C2-D098CA4D51F7@gmail.com>
	<4469a270441082ca2a06e1860a55bcb6@gmx.net>
	<BE949BCD-9EBF-4F7C-9D1F-906487F14017@gmail.com>
	<a21064ffac25d2264e0e62cade2f3820@gmx.net>
	<D50BE2C9-DF24-4F96-A535-F413648337A5@gmail.com>
	<7064b329f33eae3d1c756455ec2472b3@gmx.net>
	<2cb014fc6bad376e1f47ca4682c4db21@gmx.net>
	<36FADA24-5E3C-4E16-945C-13FA1CECCC0A@gmail.com>
	<7b880146285efe068970750035cd388d@gmx.net>
Message-ID: <EEF5CDBE-1170-4A02-AE53-A20B4290A6FD@gmail.com>

Hi Lars,

As long as your modifiers are named differently, you can have as many  
as you like and use the -ae option successfully.  There is no limit  
to the number of modifiers or the reuse of modifier names in  
Radiance, but if a modifier appears hundreds of times with the same  
name, the -ae option takes the one name and translates it into a  
hundred instances of that name as necessary to form the exclusion set.

Hopefully, what you have done already should suffice.

-Greg

P.S.  I will be out of town and out of contact for the next week, so  
if you write with a question and get no response, I'm not ignoring  
you.  I'm just gone.

> From: Lars O. Grobe <grobe@gmx.net>
> Date: July 15, 2005 7:12:54 AM PDT
>
> Hi Greg.
>
> I followed your suggestion and used sed to replace all the  
> modifiers in my cad files. So marble_grey in object plane_1 is  
> renamed to plane_1_marble_grey now. However, there is one question  
> left (in fact I didn't really understand the overflow condition I  
> am causing). If I reduce the modifiers that will be included in all  
> the object files to a lower number (in fact, only the mappings are  
> included into each, as they are used in most cases). I wonder if I  
> will get the "too many modifiers" if I have e.g. three modifiers  
> defined in all object files. Is the overrun depending on the total  
> number of modifier definitions, or is it the limit that ONE  
> modifier can't be defined more than the fixed number? The latter  
> means that I have to change a lot, as I would have to examine the  
> cad files also for the most common colorpict modifiers (which I  
> include into each object file so far). From what I understood, I am  
> afraid that will be necessary, but before spending some hours on  
> this, I would like to understand the nature of this limit of  
> modifier ids.
>
> TIA+CU. Lars.
>
>
>> If you can avoid duplicating your entire material library with  
>> each object, this should solve all your problems.
>
> (This is the key point - I don't duplicate the entire material  
> library with each object any more now, but still some modifiers of  
> the library.)
>

From MMoeck at engr.psu.edu  Sat Jul 16 00:50:14 2005
From: MMoeck at engr.psu.edu (Martin Moeck)
Date: Sat Jul 16 00:51:24 2005
Subject: [Radiance-general] Forward ray tracing and daylight systems
Message-ID: <84F05BA9118BBD4A8FC6409808CE266C23452F@ENGRMAIL2.engr.psu.edu>

Hi,
 
I wrote a paper on forward ray tracing and general daylight systems simulation - louvers, prisms, that sort of thing. The paper proof is at 
 
www.personal.psu.edu/mum13/rays.pdf
 
It should appear in about 2 weeks in LEUKOS at www.iesna.org. 
 
Anyway, I was quite surprised how many rays it takes to get stable results. We traced up to 7 million rays through a specular microlouver sold by www.Siteco.de. We took the exiting ray distribution towards the room and converted it into an IES photometric format file in 1-degree vertical and 22.5 degree horizontal steps for use in Radiance or other lighting calculation programs. 
 
Martin
 
 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 4101 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20050715/23c6994c/attachment.bin
From marcdevon at hotmail.com  Sat Jul 16 14:20:12 2005
From: marcdevon at hotmail.com (Marcus Jacobs)
Date: Sat Jul 16 14:21:36 2005
Subject: [Radiance-general] Colorpict and Colorfunc
In-Reply-To: <MC8-F1yvgffuVFqWVSl000454a9@mc8-f1.hotmail.com>
Message-ID: <BAY102-F386D236A789137205CA6EBA4D30@phx.gbl>

Dear group

I have a question about using colorpict and colorfunc in conjuction with 
each other. What I wish to do is to be able to alter/shift the color of a 
texture map within a render. I could probably do this is colorpict alone but 
because I deal with so many faces (50 000 - 500 000), if I wanted to adjust 
some of the input parameters for the function file, I would have to change 
the values during a re-export with my Radiance conversion program. This can 
be a time consuming process to re-export and recompile the scene in order to 
tweak some parameters. Ideally what would happen is that I would pass the 
color returned by colorpict to colorfunc, where my function file would then 
alter the color in accordance with my input parameters. From there, I would 
pass the altered color returned by colorfunc to a plastc, plastic2, metal, 
etc. material. I would only have one colorfunc (unlike the thousands of 
colorpicts) so I can adjust the parameters manually during the test 
rendering phase. Is this possible?


Marcus



From katja.doerschner at nyu.edu  Mon Jul 18 17:26:40 2005
From: katja.doerschner at nyu.edu (Katja Doerschner)
Date: Mon Jul 18 17:27:30 2005
Subject: [Radiance-general] rewrite BRDF as .cal file for plasfunc 
Message-ID: <1d01b31cd1f0.1cd1f01d01b3@nyu.edu>

I sent this message earlier - but I think it may have gotten lost. I 
apologize if you receive it twice!

Hello, 

Has anyone an example of how to write a .cal function for plasfunc, 
for a given BRDF?
Specifically, I am not sure which predefined variables correspond to 
the view direction vector.

This is the BRDF I want to use in Radiance: 
V(i,j,n,a)=(1/PI)*(a/(a+(i dot n)(j dot n))
:i is unit vector from the source direction, j is unit vector of view 
direction, n is surface normal, a some other parameter.

I know the Radiance-predefined variable names for the source direction 
(x,y,z) and surface normal (Nx,Ny,Nz), but I am not sure what to use 
for the view direction.

Can anyone help? 
Thank you!
katja
    
 


From roland.fleming at tuebingen.mpg.de  Mon Jul 18 17:44:24 2005
From: roland.fleming at tuebingen.mpg.de (Roland William Fleming)
Date: Mon Jul 18 17:40:36 2005
Subject: [Radiance-general] rewrite BRDF as .cal file for plasfunc
In-Reply-To: <1d01b31cd1f0.1cd1f01d01b3@nyu.edu>
References: <1d01b31cd1f0.1cd1f01d01b3@nyu.edu>
Message-ID: <a5d25804268f1b66264fbc7ad11345d5@tuebingen.mpg.de>


Hi Katja ---

Here's the hack I use.  Pass the viewpoint as arguments to the .cal 
function.  Then view direction is just:

Vx = -(arg(1) - Px);
Vy = -(arg(2) - Py);
Vz = -(arg(3) - Pz);

where Px, Py and Pz are the Radiance predefined variable names for the 
ray intersection points.

Hope this helps,
Roland


On Jul 18, 2005, at 5:26 PM, Katja Doerschner wrote:

> I sent this message earlier - but I think it may have gotten lost. I
> apologize if you receive it twice!
>
> Hello,
>
> Has anyone an example of how to write a .cal function for plasfunc,
> for a given BRDF?
> Specifically, I am not sure which predefined variables correspond to
> the view direction vector.
>
> This is the BRDF I want to use in Radiance:
> V(i,j,n,a)=(1/PI)*(a/(a+(i dot n)(j dot n))
> :i is unit vector from the source direction, j is unit vector of view
> direction, n is surface normal, a some other parameter.
>
> I know the Radiance-predefined variable names for the source direction
> (x,y,z) and surface normal (Nx,Ny,Nz), but I am not sure what to use
> for the view direction.
>
> Can anyone help?
> Thank you!
> katja
>
>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
r o l a n d   f l e m i n g   p h d
r e s e a r c h   s c i e n t i s t

m a x   p l a n c k   i n s t i t u t e   f o r   b i o l o g i c a l   
c y b e r n e t i c s
s p e m a n n s t r .   3 8
7 2 0 7 6    t u e b i n g e n
g e r m a n y

t e l ::   [ + 4 9 ]   0 7 0 7 1   6 0 1 - 6 0 9


From cbauer- at t-online.de  Tue Jul 19 03:43:36 2005
From: cbauer- at t-online.de (Carsten Bauer)
Date: Mon Jul 18 19:15:14 2005
Subject: [Radiance-general] rewrite BRDF as .cal file for plasfunc
In-Reply-To: <a5d25804268f1b66264fbc7ad11345d5@tuebingen.mpg.de>
References: <1d01b31cd1f0.1cd1f01d01b3@nyu.edu>
	<a5d25804268f1b66264fbc7ad11345d5@tuebingen.mpg.de>
Message-ID: <42DC5AC8.6060901@t-online.de>

Hi ,

you might have a look at the header section of the file 'rayinit.cal', 
here all predefined variables can be found..
The general ray direction e.g is Dx, Dy, Dz  (which of course correponds 
to the view direction for the primary view rays.)

-cb

From katja.doerschner at nyu.edu  Mon Jul 18 23:39:54 2005
From: katja.doerschner at nyu.edu (Katja Doerschner)
Date: Mon Jul 18 23:40:41 2005
Subject: [Radiance-general] rewrite BRDF as .cal file for plasfunc
Message-ID: <2d38f82ced5f.2ced5f2d38f8@nyu.edu>

Thanks. Yes, I did look at rayinit.cal- that is were I found the other
variables. Now I used DxDyDz as my view direction vector and my .cal
function seems to work. (Well, technically that is).

katja


----- Original Message -----
From: Carsten Bauer <cbauer-@t-online.de>
Date: Monday, July 18, 2005 9:43 pm
Subject: Re: [Radiance-general] rewrite BRDF as .cal file for plasfunc

> Hi ,
> 
> you might have a look at the header section of the file 
> 'rayinit.cal', 
> here all predefined variables can be found..
> The general ray direction e.g is Dx, Dy, Dz  (which of course 
> correponds 
> to the view direction for the primary view rays.)
> 
> -cb
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
> 

From katja.doerschner at nyu.edu  Tue Jul 19 11:32:32 2005
From: katja.doerschner at nyu.edu (Katja Doerschner)
Date: Tue Jul 19 11:33:53 2005
Subject: [Radiance-general] rewrite BRDF as .cal file for plasfunc
Message-ID: <35ba3335ae9d.35ae9d35ba33@nyu.edu>

Hi Roland,
I just tried out your suggestion after getting funny results with the
DxDyDz as view direction. Your 'hack' works perfectly!!!!! Thanks a lot.

katja 

----- Original Message -----
From: Roland William Fleming <roland.fleming@tuebingen.mpg.de>
Date: Monday, July 18, 2005 11:44 am
Subject: Re: [Radiance-general] rewrite BRDF as .cal file for plasfunc

> 
> Hi Katja ---
> 
> Here's the hack I use.  Pass the viewpoint as arguments to the .cal 
> function.  Then view direction is just:
> 
> Vx = -(arg(1) - Px);
> Vy = -(arg(2) - Py);
> Vz = -(arg(3) - Pz);
> 
> where Px, Py and Pz are the Radiance predefined variable names for 
> the 
> ray intersection points.
> 
> Hope this helps,
> Roland
> 
> 
> On Jul 18, 2005, at 5:26 PM, Katja Doerschner wrote:
> 
> > I sent this message earlier - but I think it may have gotten 
> lost. I
> > apologize if you receive it twice!
> >
> > Hello,
> >
> > Has anyone an example of how to write a .cal function for plasfunc,
> > for a given BRDF?
> > Specifically, I am not sure which predefined variables correspond to
> > the view direction vector.
> >
> > This is the BRDF I want to use in Radiance:
> > V(i,j,n,a)=(1/PI)*(a/(a+(i dot n)(j dot n))
> > :i is unit vector from the source direction, j is unit vector of 
> view> direction, n is surface normal, a some other parameter.
> >
> > I know the Radiance-predefined variable names for the source 
> direction> (x,y,z) and surface normal (Nx,Ny,Nz), but I am not sure 
> what to use
> > for the view direction.
> >
> > Can anyone help?
> > Thank you!
> > katja
> >
> >
> >
> >
> > _______________________________________________
> > Radiance-general mailing list
> > Radiance-general@radiance-online.org
> > http://www.radiance-online.org/mailman/listinfo/radiance-general
> >
> r o l a n d   f l e m i n g   p h d
> r e s e a r c h   s c i e n t i s t
> 
> m a x   p l a n c k   i n s t i t u t e   f o r   b i o l o g i c a 
> l   
> c y b e r n e t i c s
> s p e m a n n s t r .   3 8
> 7 2 0 7 6    t u e b i n g e n
> g e r m a n y
> 
> t e l ::   [ + 4 9 ]   0 7 0 7 1   6 0 1 - 6 0 9
> 
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
> 

From jelle.feringa at ezct.net  Tue Jul 19 16:22:34 2005
From: jelle.feringa at ezct.net (Jelle Feringa / EZCT Architecture & Design Research)
Date: Tue Jul 19 16:21:56 2005
Subject: [Radiance-general] image filtering
Message-ID: <mailman.10.1121782916.370.radiance-general@radiance-online.org>

Hi all,

 

Currently I'm working on a booklet showing my Radiance work.

Also some of the technicalities of Radiance are discussed.

I have to agree with what 'Rendering with Radiance' states on this topic;
its hard to explain precisely what makes Radiance fundamentally different
from other rendering solutions. Call me a pretentious prick, but I find it
effective in communicating Radiance' value to consider an image a virtual
prototype rather than just a rendering. To get this point across, its
important to show a potential client the different levels of significance a
Radiance rendering has. It all comes down to filtering in the end.

I think its important to explain how a pcond -h image differs from a
non-filtered image (well, pfilt) 

 

I'm trying to sum up the different levels of information one can extract
from a single Radiance image using:

 

Pcond,

Glare,

Falsecolor (nits, Dayfact, lux)

 

Which is basically what one can expect from someone who has reasonable
control over Radiance.

Of course, there's lots of more ways of extracting different levels of
information from Radiance / a Radiance image.

Speaking for myself, I have been messing around piping rtrace intersections
to a .dxf file, showing a beautiful diagram of the way Radiance is computing
its light interactions. But I'm not that funky with image filtering. 

 

Any suggestions of interesting / original ways of extracting information of
a Radiance image?

 

 

Cheers,

 

Jelle.

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20050719/a8c44b8a/attachment.html
From jedev at visarc.com  Tue Jul 19 17:02:44 2005
From: jedev at visarc.com (Jack de Valpine)
Date: Tue Jul 19 17:03:44 2005
Subject: [Radiance-general] rewrite BRDF as .cal file for plasfunc
In-Reply-To: <35ba3335ae9d.35ae9d35ba33@nyu.edu>
References: <35ba3335ae9d.35ae9d35ba33@nyu.edu>
Message-ID: <42DD1614.8050105@visarc.com>

I think that Dx, Dy, Dz correspond to the direction vector of the ray 
which is different than the direction vector of the view. So this may 
account for some of your funny results.

-Jack

Katja Doerschner wrote:

>Hi Roland,
>I just tried out your suggestion after getting funny results with the
>DxDyDz as view direction. Your 'hack' works perfectly!!!!! Thanks a lot.
>
>katja 
>
>----- Original Message -----
>From: Roland William Fleming <roland.fleming@tuebingen.mpg.de>
>Date: Monday, July 18, 2005 11:44 am
>Subject: Re: [Radiance-general] rewrite BRDF as .cal file for plasfunc
>
>  
>
>>Hi Katja ---
>>
>>Here's the hack I use.  Pass the viewpoint as arguments to the .cal 
>>function.  Then view direction is just:
>>
>>Vx = -(arg(1) - Px);
>>Vy = -(arg(2) - Py);
>>Vz = -(arg(3) - Pz);
>>
>>where Px, Py and Pz are the Radiance predefined variable names for 
>>the 
>>ray intersection points.
>>
>>Hope this helps,
>>Roland
>>
>>
>>On Jul 18, 2005, at 5:26 PM, Katja Doerschner wrote:
>>
>>    
>>
>>>I sent this message earlier - but I think it may have gotten 
>>>      
>>>
>>lost. I
>>    
>>
>>>apologize if you receive it twice!
>>>
>>>Hello,
>>>
>>>Has anyone an example of how to write a .cal function for plasfunc,
>>>for a given BRDF?
>>>Specifically, I am not sure which predefined variables correspond to
>>>the view direction vector.
>>>
>>>This is the BRDF I want to use in Radiance:
>>>V(i,j,n,a)=(1/PI)*(a/(a+(i dot n)(j dot n))
>>>:i is unit vector from the source direction, j is unit vector of 
>>>      
>>>
>>view> direction, n is surface normal, a some other parameter.
>>    
>>
>>>I know the Radiance-predefined variable names for the source 
>>>      
>>>
>>direction> (x,y,z) and surface normal (Nx,Ny,Nz), but I am not sure 
>>what to use
>>    
>>
>>>for the view direction.
>>>
>>>Can anyone help?
>>>Thank you!
>>>katja
>>>
>>>
>>>
>>>
>>>_______________________________________________
>>>Radiance-general mailing list
>>>Radiance-general@radiance-online.org
>>>http://www.radiance-online.org/mailman/listinfo/radiance-general
>>>
>>>      
>>>
>>r o l a n d   f l e m i n g   p h d
>>r e s e a r c h   s c i e n t i s t
>>
>>m a x   p l a n c k   i n s t i t u t e   f o r   b i o l o g i c a 
>>l   
>>c y b e r n e t i c s
>>s p e m a n n s t r .   3 8
>>7 2 0 7 6    t u e b i n g e n
>>g e r m a n y
>>
>>t e l ::   [ + 4 9 ]   0 7 0 7 1   6 0 1 - 6 0 9
>>
>>
>>_______________________________________________
>>Radiance-general mailing list
>>Radiance-general@radiance-online.org
>>http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>    
>>
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general@radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
>  
>

-- 
#	John E. de Valpine
#	president
#
#	visarc incorporated
#	http://www.visarc.com
#
#	channeling technology for superior design and construction

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20050719/83b1d98b/attachment.htm
From jedev at visarc.com  Tue Jul 19 17:23:32 2005
From: jedev at visarc.com (Jack de Valpine)
Date: Tue Jul 19 17:24:31 2005
Subject: [Radiance-general] image filtering
In-Reply-To: <0MKv22-1Dusyq258K-0000H2@mx.perfora.net>
References: <0MKv22-1Dusyq258K-0000H2@mx.perfora.net>
Message-ID: <42DD1AF4.4000104@visarc.com>

Hey Jelle,

Just a few thoughts here. Explaining rendering systems to clients is 
always difficult. I think that unfortunately clients typically just want 
good looking images and do not neccessarily care how the images is 
"made." However, I think that you are probably on a good track to 
consider the results of a Radiance simulation as a virtual prototype, 
which means something more than just a "rendering." But in order for 
this to hold true, the underlying data, (lighting levels, materials, 
geometry and other fundamental assumptions in the scene) used to 
generate the simulations needs to be "accurate" to some standard 
suitable for the given objective. Filtering an image with tone mapping 
offers one way to view the scene in the image.

-Jack

Jelle Feringa / EZCT Architecture & Design Research wrote:

> Hi all,
>
>  
>
> Currently I'm working on a booklet showing my Radiance work.
>
> Also some of the technicalities of Radiance are discussed.
>
> I have to agree with what 'Rendering with Radiance' states on this 
> topic; its hard to explain precisely what makes Radiance fundamentally 
> different from other rendering solutions. Call me a pretentious prick, 
> but I find it effective in communicating Radiance' value to consider 
> an image a virtual prototype rather than just a rendering. To get this 
> point across, its important to show a potential client the different 
> levels of significance a Radiance rendering has. It all comes down to 
> filtering in the end.
>
> I think its important to explain how a pcond -h image differs from a 
> non-filtered image (well, pfilt)
>
>  
>
> I'm trying to sum up the different levels of information one can 
> extract from a single Radiance image using:
>
>  
>
> Pcond,
>
> Glare,
>
> Falsecolor (nits, Dayfact, lux)
>
>  
>
> Which is basically what one can expect from someone who has reasonable 
> control over Radiance.
>
> Of course, there's lots of more ways of extracting different levels of 
> information from Radiance / a Radiance image.
>
> Speaking for myself, I have been messing around piping rtrace 
> intersections to a .dxf file, showing a beautiful diagram of the way 
> Radiance is computing its light interactions. But I'm not that funky 
> with image filtering.
>
>  
>
> Any suggestions of interesting / original ways of extracting 
> information of a Radiance image?
>
>  
>
>  
>
> Cheers,
>
>  
>
> Jelle.
>
>  
>
>------------------------------------------------------------------------
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general@radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general
>  
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20050719/ecac6741/attachment.html
From jelle.feringa at ezct.net  Tue Jul 19 17:35:46 2005
From: jelle.feringa at ezct.net (Jelle Feringa / EZCT Architecture & Design Research)
Date: Tue Jul 19 17:34:46 2005
Subject: [Radiance-general] RE: Radiance-general Digest, Vol 17, Issue 16
Message-ID: <mailman.11.1121787286.370.radiance-general@radiance-online.org>

Hi Jack,

Thanks for your suggestions.
To make it clear: I'm not fussing about the workflow I developed to produce
the Radiance output. Those are some of my most dark & inner secrets only to
be shared with certain mailing lists ;)
The idea is to find a way to communicate the abundance of data a Radiance
image contains. One of the more original ways of doing so, is perhaps the
example given _the book_, where Charles Ehrlich is pointing out how to fake
asa/iso exposure of a Radiance image. Which isn't a particularly useful
thing to do, but does give insight to the extent of control a decent
Radiance operator has. 

Thanks for supporting the virtual prototype thing... I'm not a fan of
marketing yadi yadi yah, but one has to stand firm when comes to Radiance
accuracy. The point of accurately modeling light & materials is taken, for
sure.

Cheers,

Jelle.

-------

Hey Jelle,

Just a few thoughts here. Explaining rendering systems to clients is 
always difficult. I think that unfortunately clients typically just want 
good looking images and do not neccessarily care how the images is 
"made." However, I think that you are probably on a good track to 
consider the results of a Radiance simulation as a virtual prototype, 
which means something more than just a "rendering." But in order for 
this to hold true, the underlying data, (lighting levels, materials, 
geometry and other fundamental assumptions in the scene) used to 
generate the simulations needs to be "accurate" to some standard 
suitable for the given objective. Filtering an image with tone mapping 
offers one way to view the scene in the image.

-Jack



From jedev at visarc.com  Tue Jul 19 17:56:02 2005
From: jedev at visarc.com (Jack de Valpine)
Date: Tue Jul 19 17:57:00 2005
Subject: [Radiance-general] RE: Radiance-general Digest, Vol 17, Issue 16
In-Reply-To: <0MKv22-1Duu7B2q9N-0007Nk@mx.perfora.net>
References: <0MKv22-1Duu7B2q9N-0007Nk@mx.perfora.net>
Message-ID: <42DD2292.7050901@visarc.com>

Hi Jelle,

Yes, I think that there are few different strategies for workflow that 
different people/groups on this list employ. I know that everyone has 
their reasons and preferences. We employ our own strategy and tools for 
workflow management.

I think that some of the real strengths of radiance are more built into 
the ability to perform what I would term "technical" or "performance 
simulations" focused on material and/or lighting performance. Most of 
our work though tends to be more about making nice pictures of 
architecture. For better or worse there are a lot of very powerful 
off-the-shelf rendering/animation packages that are awfully good at 
making nice pictures. So from some standpoints, unless the client is 
after a performance simulation, they really do not care about the 
technology. So perhaps one of the strenghts that you may have in your 
services is in fact your workflow and method of working with your 
clients to accomplish their objectives.

Just my thoughts offered for discussion.

-Jack

Jelle Feringa / EZCT Architecture & Design Research wrote:

>Hi Jack,
>
>Thanks for your suggestions.
>To make it clear: I'm not fussing about the workflow I developed to produce
>the Radiance output. Those are some of my most dark & inner secrets only to
>be shared with certain mailing lists ;)
>The idea is to find a way to communicate the abundance of data a Radiance
>image contains. One of the more original ways of doing so, is perhaps the
>example given _the book_, where Charles Ehrlich is pointing out how to fake
>asa/iso exposure of a Radiance image. Which isn't a particularly useful
>thing to do, but does give insight to the extent of control a decent
>Radiance operator has. 
>
>Thanks for supporting the virtual prototype thing... I'm not a fan of
>marketing yadi yadi yah, but one has to stand firm when comes to Radiance
>accuracy. The point of accurately modeling light & materials is taken, for
>sure.
>
>Cheers,
>
>Jelle.
>
>-------
>
>Hey Jelle,
>
>Just a few thoughts here. Explaining rendering systems to clients is 
>always difficult. I think that unfortunately clients typically just want 
>good looking images and do not neccessarily care how the images is 
>"made." However, I think that you are probably on a good track to 
>consider the results of a Radiance simulation as a virtual prototype, 
>which means something more than just a "rendering." But in order for 
>this to hold true, the underlying data, (lighting levels, materials, 
>geometry and other fundamental assumptions in the scene) used to 
>generate the simulations needs to be "accurate" to some standard 
>suitable for the given objective. Filtering an image with tone mapping 
>offers one way to view the scene in the image.
>
>-Jack
>
>
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general@radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
>  
>

-- 
#	John E. de Valpine
#	president
#
#	visarc incorporated
#	http://www.visarc.com
#
#	channeling technology for superior design and construction




From atelier at iebele.nl  Tue Jul 19 18:00:34 2005
From: atelier at iebele.nl (atelier iebele abel)
Date: Tue Jul 19 17:58:40 2005
Subject: [Radiance-general] RE: Radiance-general Digest, Vol 17, Issue 16
In-Reply-To: <200507191536.j6JFaZS02356@reaktie14.xlserver.net>
References: <200507191536.j6JFaZS02356@reaktie14.xlserver.net>
Message-ID: <42DD23A2.7020409@iebele.nl>

Hi Jelle,

In all cases that I discus design issues, I  talk about  Radiance as a 
tool that is usefull  to compare one design or situation with another. 
That means that when I design some lighting solution, I always make two 
or more situations. That makes that in a discussion everybody understand 
at least one important value of the images: to compare one design or 
situation with another. (when I came up whith only one image, most 
people said: "well this is a synthetic image, the real world will 
differ". And because they are right in saying that, the radiance images 
appeared meaningless. )
Another suggestion is to contact a manufacturer (I have had good results 
with Philips Iguzinni in our area) and share your images with. They can 
( or not, then you 'callibrate' further ) approve your calculations. And 
that will impress your clients for sure.

A lot of clients do have to do a lot of 'marketing yadi yadi yah'. Your 
images may play an important role for you clients in getting other 
parties interested in the project. For that purpose probably the best 
looking images  are preferred above the most accurate.

Good luck!

iebele


Jelle Feringa / EZCT Architecture & Design Research wrote:

>Hi Jack,
>
>Thanks for your suggestions.
>To make it clear: I'm not fussing about the workflow I developed to produce
>the Radiance output. Those are some of my most dark & inner secrets only to
>be shared with certain mailing lists ;)
>The idea is to find a way to communicate the abundance of data a Radiance
>image contains. One of the more original ways of doing so, is perhaps the
>example given _the book_, where Charles Ehrlich is pointing out how to fake
>asa/iso exposure of a Radiance image. Which isn't a particularly useful
>thing to do, but does give insight to the extent of control a decent
>Radiance operator has. 
>
>Thanks for supporting the virtual prototype thing... I'm not a fan of
>marketing yadi yadi yah, but one has to stand firm when comes to Radiance
>accuracy. The point of accurately modeling light & materials is taken, for
>sure.
>
>Cheers,
>
>Jelle.
>
>-------
>
>Hey Jelle,
>
>Just a few thoughts here. Explaining rendering systems to clients is 
>always difficult. I think that unfortunately clients typically just want 
>good looking images and do not neccessarily care how the images is 
>"made." However, I think that you are probably on a good track to 
>consider the results of a Radiance simulation as a virtual prototype, 
>which means something more than just a "rendering." But in order for 
>this to hold true, the underlying data, (lighting levels, materials, 
>geometry and other fundamental assumptions in the scene) used to 
>generate the simulations needs to be "accurate" to some standard 
>suitable for the given objective. Filtering an image with tone mapping 
>offers one way to view the scene in the image.
>
>-Jack
>
>
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general@radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
>  
>

From jelle.feringa at ezct.net  Tue Jul 19 19:32:19 2005
From: jelle.feringa at ezct.net (Jelle Feringa / EZCT Architecture & Design Research)
Date: Tue Jul 19 19:30:58 2005
Subject: [Radiance-general] image filtering
In-Reply-To: <B8DD8375FCE2C94B9F170D9277C1FA2B8C5A0D@corvallis>
Message-ID: <mailman.12.1121794258.370.radiance-general@radiance-online.org>

Hi Rob,

Sure, but this isn't an issue directly related to a specific scene or
geometry?

-----Original Message-----
From: Fitzsimmons, Rob [mailto:Rob.Fitzsimmons@Summit.Fiserv.com] 
Sent: Tuesday, July 19, 2005 6:51 PM
To: 'Jelle Feringa / EZCT Architecture & Design Research '
Subject: RE: [Radiance-general] image filtering

 Jelle,
I would be interested in seeing your dxf models of the Radiance solution.
Could you post a rendering of the dxf solution?

Thanks
Rob Fitzsimmons
 


From randolph at panix.com  Tue Jul 19 22:00:26 2005
From: randolph at panix.com (Randolph Fritz)
Date: Tue Jul 19 22:01:31 2005
Subject: [Radiance-general] image filtering
In-Reply-To: <20050719142202.4E6A8596AD@mail1.panix.com>
References: <20050719142202.4E6A8596AD@mail1.panix.com>
Message-ID: <20050719200025.GA27895@panix.com>

On Tue, Jul 19, 2005 at 04:22:34PM +0200, Jelle Feringa / EZCT 
Architecture & Design Research wrote:
> 
> I have to agree with what 'Rendering with Radiance' states on this topic;
> its hard to explain precisely what makes Radiance fundamentally different
> from other rendering solutions.
>

I like your ideas on this.  I'm fond of saying that Radiance is a
lighting simulator which can be used for rendering, rather than a
rendering tool.  Usually I demonstrate this by showing a simulation
image next to a Radiance-generated diagram of numerical lighting
levels, emphasizing the point that this is an attempt to approximate
luminous reality with some level of accuracy.

> 
> I think its important to explain how a pcond -h image differs from a
> non-filtered image (well, pfilt) 
> 

My approach here would be to overlay isolux contours on the unfiltered
image, and set it next to the filtered image.  Does this sound like
the kind of thing you're looking for?

Randolph

From ap.huangwx at archi.kyoto-u.ac.jp  Wed Jul 20 03:58:32 2005
From: ap.huangwx at archi.kyoto-u.ac.jp (Huangwx@kyotoUniv.)
Date: Wed Jul 20 03:59:27 2005
Subject: [Radiance-general] mapping texture
Message-ID: <001001c58cce$8878b1d0$1f7af90a@hwx>

Hi, all:

I am new to radiance. I have asked one question about mapping texture and thanks very much for your answers. But now I am still not clear about those functions.
I use "frac(U) frac(V) " to tile the texture just like an example I found on the Internet. But I found there are other methods to do so such as "tile_u tile_v". I have searched in the book "Rendering with Radiance", but can not find explanation about it.  Also I can not find further explanations of function clip( ) and noop( ). Is there anything I can refer to or are they just somwhere in the book "Rendering with Radiance"?

Would you please help me on this naive question? Thanks a lot.

yours,
Huang
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20050720/2224d2f8/attachment.htm
From atelier at iebele.nl  Wed Jul 20 13:39:16 2005
From: atelier at iebele.nl (atelier iebele abel)
Date: Wed Jul 20 13:37:18 2005
Subject: [Radiance-general] Reflection vs specularity
In-Reply-To: <001001c58cce$8878b1d0$1f7af90a@hwx>
References: <001001c58cce$8878b1d0$1f7af90a@hwx>
Message-ID: <42DE37E4.6080009@iebele.nl>

Hi,

I have a problem modelling a reflective floor of a large museum hall. 
The specular and roughness components (0.08 and 0.01) in the material of 
the floor  result in smooth reflections of the walls, paintings, windows 
etc.
The problem arises when adding some lightsources. The lightsources cause 
specular reflections with very bright specular spots (highlights) on the 
floor. These specular spots do not look realistic (better said: these 
highlights disturb in the image, because there are so many of them).
I have tweaked the specular, roughness and rendering parameters also, 
but I can't  get rid of these specular reflection highlights, apart from 
making the roughnes very small or 0. But with low or zero rougness the 
relections of the other geometry become too sharp.
Is there a way to model a reflective material (or lightsource?) without 
a ( or a dimmed) specular reflection highlight ?
Or any other suggestion?

Iebele





From Giulio.Antonutto at arup.com  Wed Jul 20 15:02:39 2005
From: Giulio.Antonutto at arup.com (Giulio Antonutto)
Date: Wed Jul 20 15:03:12 2005
Subject: [Radiance-general] Reflection vs specularity
Message-ID: <CC0B19F4C6132F4D9FDDEBF194200FB5234C6E@ldcexc02.global.arup.com>

Iebele,
have you tried with -sj, just to jitter the specular component?

an alternative trick is to generate just an image without specular
component
and another one with it (you may use lower settings for this, may be
just -av something something something -ab 0).
then photoshop will help doing the trick... but I wouldn't define it a
physically accurate technique :-)

ciao
giulio




-----Original Message-----
From: radiance-general-bounces@radiance-online.org
[mailto:radiance-general-bounces@radiance-online.org] On Behalf Of
atelier iebele abel
Sent: 20 July 2005 12:39
To: Radiance general discussion
Subject: [Radiance-general] Reflection vs specularity

Hi,

I have a problem modelling a reflective floor of a large museum hall. 
The specular and roughness components (0.08 and 0.01) in the material of

the floor  result in smooth reflections of the walls, paintings, windows

etc.
The problem arises when adding some lightsources. The lightsources cause

specular reflections with very bright specular spots (highlights) on the

floor. These specular spots do not look realistic (better said: these 
highlights disturb in the image, because there are so many of them).
I have tweaked the specular, roughness and rendering parameters also, 
but I can't  get rid of these specular reflection highlights, apart from

making the roughnes very small or 0. But with low or zero rougness the 
relections of the other geometry become too sharp.
Is there a way to model a reflective material (or lightsource?) without 
a ( or a dimmed) specular reflection highlight ?
Or any other suggestion?

Iebele





_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general

From Giulio.Antonutto at arup.com  Wed Jul 20 16:16:27 2005
From: Giulio.Antonutto at arup.com (Giulio Antonutto)
Date: Wed Jul 20 16:16:57 2005
Subject: [Radiance-general] mapping texture
Message-ID: <CC0B19F4C6132F4D9FDDEBF194200FB5234CAD@ldcexc02.global.arup.com>

Huang,

 

the ultimate mapping solution is to use the mesh primitive,

you may create an UV map within your favourite 3D modelling application
and forget about Px Py and all the xform instances....

 

I use cinema 4d and it works brilliantly... also in conjunction with
bodypaint is a killer...

You may also use the UV map to generate procedural patterns... just
change Px with Lu and Py with Lv....

 

This is an example:

 

By means of .obj file format you can import the geometry into radiance:

something like:

obj2mesh -a material.mat model.obj > model.mesh

 

The obj file includes already the UV coordinate system.

You need just to define radiance materials in material.mat.

If you have a pattern and you want to tile it, just use this syntax into
the material definition:

 

void colorpict pattern

7 red green blue image.pic . (A*Lu-floor(A*Lu)) (Lv-floor(Lv)) 

0

0

 

pattern plastic finalmaterial

0

0

5 1 1 1 0 0

 

where A is the ratio between the Xmax and the Ymax in the image. 

 

finally you need a radiance file that loads the mesh,

this is achieved with the mesh primitive:

 

 

void mesh painting

1 model.mesh

0

0

 

and so on.

 

No light sources can be included into meshes, so remember to split your
scene.

 

hope this helps,

ciao,

giulio

 

 

________________________________

From: radiance-general-bounces@radiance-online.org
[mailto:radiance-general-bounces@radiance-online.org] On Behalf Of
Huangwx@kyotoUniv.
Sent: 20 July 2005 02:59
To: radiance-general@radiance-online.org
Subject: [Radiance-general] mapping texture

 

Hi, all:

 

I am new to radiance. I have asked one question about mapping texture
and thanks very much for your answers. But now I am still not clear
about those functions.

I use "frac(U) frac(V) " to tile the texture just like an example I
found on the Internet. But I found there are other methods to do so such
as "tile_u tile_v". I have searched in the book "Rendering with
Radiance", but can not find explanation about it.  Also I can not find
further explanations of function clip( ) and noop( ). Is there anything
I can refer to or are they just somwhere in the book "Rendering with
Radiance"?

 

Would you please help me on this naive question? Thanks a lot.

 

yours,

Huang

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20050720/718afdb5/attachment.html
From jedev at visarc.com  Wed Jul 20 16:51:01 2005
From: jedev at visarc.com (Jack de Valpine)
Date: Wed Jul 20 16:52:01 2005
Subject: [Radiance-general] mapping texture
In-Reply-To: <001001c58cce$8878b1d0$1f7af90a@hwx>
References: <001001c58cce$8878b1d0$1f7af90a@hwx>
Message-ID: <42DE64D5.1020700@visarc.com>

Hi Huang,

One good resource, is the file: rayinit.cal, which should be in your lib
directory as well as picture.cal. The former will give you some sense of
what frac(x) actually calculates, the latter will help with tile_u and
tile_v. Picture.cal is the basic procedural function for mapping an
image texture onto geometry using the "colorpict" material modifier
type. The function clip(x) makes sure that the value x is forced to the
range [0,1] while the function noop(v) simply return the value v without
any modification.

Huangwx@kyotoUniv. wrote:

> Hi, all:
> I am new to radiance. I have asked one question about mapping texture
> and thanks very much for your answers. But now I am still not clear
> about those functions.
> I use "frac(U) frac(V) " to tile the texturejust likean example I
> found on the Internet. But I found there are other methods to do so
> such as "tile_u tile_v". I have searched in the book "Rendering with
> Radiance", but can not find explanation about it.Also I can not find
> further explanations of function clip( ) and noop( ). Is there
> anything I can refer to or are they just somwhere in the book
> "Rendering with Radiance"?
> Would you please help me on this naive question? Thanks a lot.
> yours,
> Huang
>
>------------------------------------------------------------------------
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general@radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general
>  
>

-- 
#	John E. de Valpine
#	president
#
#	visarc incorporated
#	http://www.visarc.com
#
#	channeling technology for superior design and construction

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20050720/b9759aca/attachment-0001.htm
From atelier at iebele.nl  Wed Jul 20 19:02:28 2005
From: atelier at iebele.nl (atelier iebele abel)
Date: Wed Jul 20 19:00:36 2005
Subject: [Radiance-general] Reflection vs specularity
In-Reply-To: <CC0B19F4C6132F4D9FDDEBF194200FB5234C6E@ldcexc02.global.arup.com>
References: <CC0B19F4C6132F4D9FDDEBF194200FB5234C6E@ldcexc02.global.arup.com>
Message-ID: <42DE83A4.7090608@iebele.nl>

Hi Giulio,

Changing -sj did not resolve the problem (already tried that) , and 
photoshop is not a solution since it has to be an animation on video.
Plus it should be more or less physically correct...

I just return from an example site, where I have have seen an example 
of  the floor material in a real situation (natural wood finished with a 
wax coating).
This floor type does reflect its environment really smoothly but does 
not reflect lightsources really hard. In other words, it seems that in 
the real life example there is never a direct reflection from the 
lightsources/lightbeam  to the eye. The reflection seems too diffuse for 
that to happen.
So, in the real world the situation I like to simulate exists, now 
finding a way to simulate this in Radiance will be the challenge..

I am reading the book RWR now,  chapter 12.1 on specular sampling in 
indirect calculations. However I have the feeling that the problem i am 
facing is in the direct calculation. It just seems that when I could 
control the highlight apart from the reflection , I could model my floor 
more accurate.
Or am I totaly lost here ??  Is specularity exactly the same as 
reflection in Radiance?? After 10 years I still have to learn soo much 
about Radiance. Ok,  that's the fun and the power of Radiance... :)
Any suggestions remain welcome.

Iebele


Giulio Antonutto wrote:

>Iebele,
>have you tried with -sj, just to jitter the specular component?
>
>an alternative trick is to generate just an image without specular
>component
>and another one with it (you may use lower settings for this, may be
>just -av something something something -ab 0).
>then photoshop will help doing the trick... but I wouldn't define it a
>physically accurate technique :-)
>
>ciao
>giulio
>
>
>
>
>-----Original Message-----
>From: radiance-general-bounces@radiance-online.org
>[mailto:radiance-general-bounces@radiance-online.org] On Behalf Of
>atelier iebele abel
>Sent: 20 July 2005 12:39
>To: Radiance general discussion
>Subject: [Radiance-general] Reflection vs specularity
>
>Hi,
>
>I have a problem modelling a reflective floor of a large museum hall. 
>The specular and roughness components (0.08 and 0.01) in the material of
>
>the floor  result in smooth reflections of the walls, paintings, windows
>
>etc.
>The problem arises when adding some lightsources. The lightsources cause
>
>specular reflections with very bright specular spots (highlights) on the
>
>floor. These specular spots do not look realistic (better said: these 
>highlights disturb in the image, because there are so many of them).
>I have tweaked the specular, roughness and rendering parameters also, 
>but I can't  get rid of these specular reflection highlights, apart from
>
>making the roughnes very small or 0. But with low or zero rougness the 
>relections of the other geometry become too sharp.
>Is there a way to model a reflective material (or lightsource?) without 
>a ( or a dimmed) specular reflection highlight ?
>Or any other suggestion?
>
>Iebele
>
>
>
>
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general@radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general@radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
>  
>

From zrogers at archenergy.com  Wed Jul 20 19:29:18 2005
From: zrogers at archenergy.com (Zack Rogers)
Date: Wed Jul 20 19:30:17 2005
Subject: [Radiance-general] mkillum w/ frit
Message-ID: <42DE89EE.20909@archenergy.com>

Hello,

I am wondering about the use of mkillum on a surface that is defined 
with mixfunc to model a frit pattern on glass.

my definition looks like this:

void plastic grey_065
0
0
5            0.65          0.65          0.65
                0             0

void BRTDfunc PPG-SB80
10 rrho grho brho rtau gtau btau 0 0 0 glazing.cal
0
18              0             0             0
                0             0             0
                0             0             0
            0.249         0.355         0.329
            0.363         0.364         0.262
            0.434          0.49         0.461

void mixfunc l_glass_af+++x+++frit_dot_40%_y
6   PPG-SB80 grey_065 y_hole function/perforate.cal
    -s .03
0
1           0.356

Can I use the surfaces with this material applied as illum surfaces for 
mkillum with accurate results?  Searching the online db, I found 
discussion of this glaze.csh script. Does this create a better model for 
a fritted glass, and is this used with mkillum?  My definition for the 
glass comes from Optics 5.

Thanks!
Zack

-- 
Zack Rogers
Engineer / Daylighting Designer
Architectural Energy Corporation
2540 Frontier Avenue, Suite 201
Boulder, CO 80301 USA

tel (303)444-4149 ext.235
fax (303)444-4304
http://www.archenergy.com


From cbauer- at t-online.de  Thu Jul 21 08:21:28 2005
From: cbauer- at t-online.de (Carsten Bauer)
Date: Thu Jul 21 00:03:55 2005
Subject: [Radiance-general] Reflection vs specularity
In-Reply-To: <42DE83A4.7090608@iebele.nl>
References: <CC0B19F4C6132F4D9FDDEBF194200FB5234C6E@ldcexc02.global.arup.com>
	<42DE83A4.7090608@iebele.nl>
Message-ID: <42DF3EE8.8010106@t-online.de>

Hi Iebele

AFAIK, for a view ray hit, Radiance checks if the current view ray 
direction lies in the'highlight cone' of any light source.
E.g. for a point source and a perfect zero roughness reflector this 
'highlight cone' would just be a delta peak, i.e. the mirror direction, 
if you start to add microscopic roughness to the surface  your 
highlight  will start to spread, you'll receive reflection also  if you 
don't look exactly in the mirror direction.

Ok, so far you probably know that yourself, I just repeated it to 
emphasis which effects you control with the mentioned parameters: the 
roughness
parameter determines how much the highlight will spread out, and the -sj 
setting determines how much of this spread will actually be sampled, 
(-st as threshold finally  decides if it will be considered specular at 
all or just added to the diffuse component.) So  the sense of -sj lies 
more in setting values < 1 to produce sharper highlights also for rough 
surfaces to reduce noise in the image, -- whereas you're looking for the 
opposite, a way to make them appear more diffuse.

Now it might be that the problem in your case lies in the method being 
to limited to describe the floor material adequately
As mentioned above, you can tweak the amout of spreading for the 
highlight, but you cannot consider e.g. materials whose specular 
reflection coefficient itself changes with the incident angle, which 
might be the reason in your case for the highlights being less apparent 
in the direction you're looking.
And even if you provide BRTDF data for the floor material, it would be 
rather tedious as they would have to be inverted during this calculation 
which is -again AFAIK -currently not possible in Radiance.

-cb 

PS you might still revert to Giulios Photoshop idea, you could also do 
it in Radiance, i.e. make a pic form two base pics with pcomb (I hope I 
name the correct one here, I always mix them up, pcomb, pcompos, pcond, 
pwhatever....), then write a script for that purpose to convert all your 
frames automatically..

From grobe at gmx.net  Thu Jul 21 19:29:42 2005
From: grobe at gmx.net (Lars O. Grobe)
Date: Thu Jul 21 19:30:39 2005
Subject: [Radiance-general] estimating -av values, color
Message-ID: <2d650bdc669b4373597cfcd9098128ce@gmx.net>

Hi list,

I have a question regarding the so-often given advice to use a neutral 
-av setting. Why? Is it assumed that in general, the light conditions 
in a building are like that? I have used a -av of .5 .5 .5 here, 
together with -ae excluded objects (I wrote enough questions on that 
topic ;-). This results in a strange image, as the calculated ambient 
is redish, and the ambient-excluded objects appear very strange (like 
blueish) because they are the only objects illuminated by this neutral 
color. I can understand that if using -ab 0, setting a colored -av 
would not make sense as ALL indirect illumination would be neutral 
than.

So, am I right that in the case here (I use the -av settings only for 
the -ae excluded objects in a scene that is rendered with -ab 2), using 
a neutral value would be simply wrong and I have to use the "measured" 
(from rview) radiance?

TIA+CU Lars.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2134 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20050721/ee571035/smime.bin
From jedev at visarc.com  Thu Jul 21 19:55:36 2005
From: jedev at visarc.com (Jack de Valpine)
Date: Thu Jul 21 19:56:37 2005
Subject: [Radiance-general] estimating -av values, color
In-Reply-To: <2d650bdc669b4373597cfcd9098128ce@gmx.net>
References: <2d650bdc669b4373597cfcd9098128ce@gmx.net>
Message-ID: <42DFE198.6010002@visarc.com>

Hi Lars,

Estimating ambient values is part science and part art as far as I have 
learned over the years. I don't think that I know of a situation where 
we have ever used a non neutral ambient value. I suppose if one were 
trying to more accurately account for certain kind of atmospheric shifts 
this might be a case to do this....?

Without knowing what your scene looks like (pictures help) it is 
difficult to help diagnose what is going on. My suscpicion though is 
that an ambient value of .5 .5 .5  may be too high for the given scene, 
thus the odd looking ("glowing") results. A very good option would be to 
use the "compamb" script that Greg wrote. This runs a pass on a small 
image using fairly high parameters and then does some calculations to 
come up with a good ambient value for the scene. This is pretty easy to 
use and does not take that long to return the results.

Note the av value affects the whole simulation not just the excluded 
objects.

-Jack

Lars O. Grobe wrote:

> Hi list,
>
> I have a question regarding the so-often given advice to use a neutral 
> -av setting. Why? Is it assumed that in general, the light conditions 
> in a building are like that? I have used a -av of .5 .5 .5 here, 
> together with -ae excluded objects (I wrote enough questions on that 
> topic ;-). This results in a strange image, as the calculated ambient 
> is redish, and the ambient-excluded objects appear very strange (like 
> blueish) because they are the only objects illuminated by this neutral 
> color. I can understand that if using -ab 0, setting a colored -av 
> would not make sense as ALL indirect illumination would be neutral than.
>
> So, am I right that in the case here (I use the -av settings only for 
> the -ae excluded objects in a scene that is rendered with -ab 2), 
> using a neutral value would be simply wrong and I have to use the 
> "measured" (from rview) radiance?
>
> TIA+CU Lars.
>
>------------------------------------------------------------------------
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general@radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general
>  
>

-- 
#	John E. de Valpine
#	president
#
#	visarc incorporated
#	http://www.visarc.com
#
#	channeling technology for superior design and construction

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20050721/9c31c84e/attachment.htm
From cbauer- at t-online.de  Fri Jul 22 10:26:56 2005
From: cbauer- at t-online.de (Carsten Bauer)
Date: Fri Jul 22 01:59:07 2005
Subject: [Radiance-general] estimating -av values, color
In-Reply-To: <42DFE198.6010002@visarc.com>
References: <2d650bdc669b4373597cfcd9098128ce@gmx.net>
	<42DFE198.6010002@visarc.com>
Message-ID: <42E0ADD0.3010709@t-online.de>

Hi Lars,

you can think of the av value being a substitution for the rest amount 
of light hovering in the room which gets ommitted in your calculations 
when you follow
ambient rays only a certain number of bounces deep, instead of following 
them infinitely deep.  And if you have a neutral source, but red walls, 
the  diffuse indirect light will be red, and so should also be the av 
setting, to be a correct compensation...

So generally your're right in considering the color bias of the scene 
also for the constant ambient approximation. But definitely also keep in 
mind  Jacks remark on -av affecting all objects...

-cb



From grobe at gmx.net  Fri Jul 22 11:47:07 2005
From: grobe at gmx.net (Lars O. Grobe)
Date: Fri Jul 22 11:47:58 2005
Subject: [Radiance-general] estimating -av values, color
In-Reply-To: <42E0ADD0.3010709@t-online.de>
References: <2d650bdc669b4373597cfcd9098128ce@gmx.net>
	<42DFE198.6010002@visarc.com> <42E0ADD0.3010709@t-online.de>
Message-ID: <227fab3d7079cb70f772c7218959fc95@gmx.net>

> So generally your're right in considering the color bias of the scene 
> also for the constant ambient approximation. But definitely also keep 
> in mind  Jacks remark on -av affecting all objects...

Hi,

thanks to Jack and Carsten for the responses, this list is always of 
great help. I didn't really use -av in previous projects, but need it 
now because the complexity of the scene forces me to exclude modifiers 
from the ambient calculation.

As far as I understood, the influence of the -av setting (on objects 
not excluded from the ambient calculation) can be dimmed by the -aw 
setting, and as I start my renderings with an "ouverture calculation" 
the computed ambient distribution should be stable enough. Am I wrong 
here?

CU Lars.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2134 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20050722/1b3f3e7f/smime.bin
From MdelaFuente at wmtao.com  Fri Jul 22 12:02:09 2005
From: MdelaFuente at wmtao.com (Mark de la Fuente)
Date: Fri Jul 22 12:03:23 2005
Subject: [Radiance-general] Re: Radiance-general Digest, Vol 17,
	Issue 20 (Out of Office Automated Response)
Message-ID: <s2e07dde.021@wmtao.com>

I will be out of the office and unavailable from July 21st through July 26th.

Mark de la Fuente
William Tao & Associates
Electrical Project Engineer
349 Marshall Avenue
Suite 200
Webster Groves, MO 63119
v. 314.961.5252 x 250
f.  314.961.5258

>>> radiance-general 07/22/05 05:01 >>>

Send Radiance-general mailing list submissions to
	radiance-general@radiance-online.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://www.radiance-online.org/mailman/listinfo/radiance-general
or, via email, send a message with subject or body 'help' to
	radiance-general-request@radiance-online.org

You can reach the person managing the list at
	radiance-general-owner@radiance-online.org

When replying, please edit your Subject line so it is more specific
than "Re: Contents of Radiance-general digest..."


Today's Topics:

   1. estimating -av values, color (Lars O. Grobe)
   2. Re: estimating -av values, color (Jack de Valpine)
   3. Re: estimating -av values, color (Carsten Bauer)
   4. Re: estimating -av values, color (Lars O. Grobe)


----------------------------------------------------------------------

Message: 1
Date: Thu, 21 Jul 2005 19:29:42 +0200
From: Lars O. Grobe <grobe@gmx.net>
Subject: [Radiance-general] estimating -av values, color
To: Radiance general discussion <radiance-general@radiance-online.org>
Message-ID: <2d650bdc669b4373597cfcd9098128ce@gmx.net>
Content-Type: text/plain; charset="us-ascii"

Hi list,

I have a question regarding the so-often given advice to use a neutral 
-av setting. Why? Is it assumed that in general, the light conditions 
in a building are like that? I have used a -av of .5 .5 .5 here, 
together with -ae excluded objects (I wrote enough questions on that 
topic ;-). This results in a strange image, as the calculated ambient 
is redish, and the ambient-excluded objects appear very strange (like 
blueish) because they are the only objects illuminated by this neutral 
color. I can understand that if using -ab 0, setting a colored -av 
would not make sense as ALL indirect illumination would be neutral 
than.

So, am I right that in the case here (I use the -av settings only for 
the -ae excluded objects in a scene that is rendered with -ab 2), using 
a neutral value would be simply wrong and I have to use the "measured" 
(from rview) radiance?

TIA+CU Lars.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2134 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20050721/ee571035/smime-0001.bin

------------------------------

Message: 2
Date: Thu, 21 Jul 2005 13:55:36 -0400
From: Jack de Valpine <jedev@visarc.com>
Subject: Re: [Radiance-general] estimating -av values, color
To: Radiance general discussion <radiance-general@radiance-online.org>
Message-ID: <42DFE198.6010002@visarc.com>
Content-Type: text/plain; charset="us-ascii"

Hi Lars,

Estimating ambient values is part science and part art as far as I have 
learned over the years. I don't think that I know of a situation where 
we have ever used a non neutral ambient value. I suppose if one were 
trying to more accurately account for certain kind of atmospheric shifts 
this might be a case to do this....?

Without knowing what your scene looks like (pictures help) it is 
difficult to help diagnose what is going on. My suscpicion though is 
that an ambient value of .5 .5 .5  may be too high for the given scene, 
thus the odd looking ("glowing") results. A very good option would be to 
use the "compamb" script that Greg wrote. This runs a pass on a small 
image using fairly high parameters and then does some calculations to 
come up with a good ambient value for the scene. This is pretty easy to 
use and does not take that long to return the results.

Note the av value affects the whole simulation not just the excluded 
objects.

-Jack

Lars O. Grobe wrote:

> Hi list,
>
> I have a question regarding the so-often given advice to use a neutral 
> -av setting. Why? Is it assumed that in general, the light conditions 
> in a building are like that? I have used a -av of .5 .5 .5 here, 
> together with -ae excluded objects (I wrote enough questions on that 
> topic ;-). This results in a strange image, as the calculated ambient 
> is redish, and the ambient-excluded objects appear very strange (like 
> blueish) because they are the only objects illuminated by this neutral 
> color. I can understand that if using -ab 0, setting a colored -av 
> would not make sense as ALL indirect illumination would be neutral than.
>
> So, am I right that in the case here (I use the -av settings only for 
> the -ae excluded objects in a scene that is rendered with -ab 2), 
> using a neutral value would be simply wrong and I have to use the 
> "measured" (from rview) radiance?
>
> TIA+CU Lars.
>
>------------------------------------------------------------------------
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general@radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general
>  
>

-- 
#	John E. de Valpine
#	president
#
#	visarc incorporated
#	http://www.visarc.com
#
#	channeling technology for superior design and construction

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20050721/9c31c84e/attachment.html

------------------------------

Message: 3
Date: Fri, 22 Jul 2005 01:26:56 -0700
From: Carsten Bauer <cbauer-@t-online.de>
Subject: Re: [Radiance-general] estimating -av values, color
To: Radiance general discussion <radiance-general@radiance-online.org>
Message-ID: <42E0ADD0.3010709@t-online.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Hi Lars,

you can think of the av value being a substitution for the rest amount 
of light hovering in the room which gets ommitted in your calculations 
when you follow
ambient rays only a certain number of bounces deep, instead of following 
them infinitely deep.  And if you have a neutral source, but red walls, 
the  diffuse indirect light will be red, and so should also be the av 
setting, to be a correct compensation...

So generally your're right in considering the color bias of the scene 
also for the constant ambient approximation. But definitely also keep in 
mind  Jacks remark on -av affecting all objects...

-cb





------------------------------

Message: 4
Date: Fri, 22 Jul 2005 11:47:07 +0200
From: Lars O. Grobe <grobe@gmx.net>
Subject: Re: [Radiance-general] estimating -av values, color
To: Radiance general discussion <radiance-general@radiance-online.org>
Message-ID: <227fab3d7079cb70f772c7218959fc95@gmx.net>
Content-Type: text/plain; charset="us-ascii"

> So generally your're right in considering the color bias of the scene 
> also for the constant ambient approximation. But definitely also keep 
> in mind  Jacks remark on -av affecting all objects...

Hi,

thanks to Jack and Carsten for the responses, this list is always of 
great help. I didn't really use -av in previous projects, but need it 
now because the complexity of the scene forces me to exclude modifiers 
from the ambient calculation.

As far as I understood, the influence of the -av setting (on objects 
not excluded from the ambient calculation) can be dimmed by the -aw 
setting, and as I start my renderings with an "ouverture calculation" 
the computed ambient distribution should be stable enough. Am I wrong 
here?

CU Lars.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2134 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20050722/1b3f3e7f/smime-0001.bin

------------------------------

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general


End of Radiance-general Digest, Vol 17, Issue 20
************************************************

From atelier at iebele.nl  Fri Jul 22 18:40:16 2005
From: atelier at iebele.nl (atelier iebele abel)
Date: Fri Jul 22 18:38:20 2005
Subject: [Radiance-general] Reflection vs specularity
In-Reply-To: <42DF3EE8.8010106@t-online.de>
References: <CC0B19F4C6132F4D9FDDEBF194200FB5234C6E@ldcexc02.global.arup.com>	<42DE83A4.7090608@iebele.nl>
	<42DF3EE8.8010106@t-online.de>
Message-ID: <42E12170.40700@iebele.nl>

Hi Carsten,

Many thanks for your reply, I am happy to hear that at least the problem 
I am facing is something that is recognized.
Alhough you clearly described why  the material I work on is hard (or 
even impossible) to model in Radiance, I continued searching for a solution.

First let me list all the 'requirements' for the material of the floor:
1. Distant objects seem to reflect more as nearby objects, in term of 
renderings: the reflection changes as a funtion of the angle between ray 
direction ad surface normal
2. Some roughness/noise is visible at a distance, while nearby the 
surface is just dull.
3. The color changes somehow as a funtion of the distance to a bit more 
blue/less saturation
4. Specular highlights are very soft and relative to the 'eye-position'

I tried to put these requirements in a BRTDfunc. This is my first(!) 
BRTDfunc and my first .cal file I ever wrote from scratch, and I have 
some questions about it.

1.
The first question of all is how I could possibly find the ray-direction 
and value of incident light within  a  brtdf. Are there globally defined 
variables for these (like Dx, Dy, Dz) ?

Ok, I clearly can't solve the specular highlight thing yet, so I forgot 
about specular highlights for a moment and figured out the brtdf and 
.cal file like below, for the 'requirements' 1, 2 and 3.

2.
My general question is: are there any smart remarks on this brtdf an cal 
file, is there anything very stupid in this material that I should 
know?  ( I am not a real math guru )

3.
The last question is: can I change the line below in a more elegant way, 
like the pow(base,exp) function in c: :
refl  =  
(1-multi)*(1-multi)*(1-multi)*(1-multi)*(1-multi)*(1-multi)*(1-multi)*(1-multi)*(1-multi) 
;


{

        reflection.cal

        add reflection relative of angle between ray direction and 
surface normal
        arg10 red reflection value
        arg11 green reflection value
        arg12 blue reflection value
        arg13 noise grain
        arg14 noise value

}

{ RGB values for the reflection  }
valr  = arg(10);
valg  = arg(11);
valb  = arg(12);
noisegrain= arg(13);
noisevalue= arg(14);

{ dot product of ray direction and normal }
DdN = (-Dx*Nx)+(-Dy*Ny)+(-Dz*Nz);

{ always return a positive value }
multi = if(DdN, DdN, -DdN) ;

{ replace with a pow( base, exp ) alike function }
refl  =  
(1-multi)*(1-multi)*(1-multi)*(1-multi)*(1-multi)*(1-multi)*(1-multi)*(1-multi)*(1-multi) 
;

{  noise  }
noise =  1 - ( noisevalue * fnoise3(Px/noisegrain, Py/noisegrain, Pz, 
noisegrain ) );

{ add noise to reflection value }
mult = refl + (refl*noise) ;

reflr = CrP * mult * valr * noise ;
reflg = CgP * mult * valg * noise ;
reflb = CbP * mult * valb * noise ;



{
       { bfloor is the name of a pattern }
        usage:
                bfloor BRTDfunc LAYER114
                10
                reflr reflg reflb
                0 0 0
                0 0 0
                reflection.cal
                0
                12
                1 1 1
                1 1 1
                0 0 0
                R_REFLVALUE G_REFLRVALUE B_REFLVALUE
                NOISE_SIZE   NOISE_VALUE
               

}



Carsten Bauer wrote:

> Hi Iebele
>
> AFAIK, for a view ray hit, Radiance checks if the current view ray 
> direction lies in the'highlight cone' of any light source.
> E.g. for a point source and a perfect zero roughness reflector this 
> 'highlight cone' would just be a delta peak, i.e. the mirror 
> direction, if you start to add microscopic roughness to the surface  
> your highlight  will start to spread, you'll receive reflection also  
> if you don't look exactly in the mirror direction.
>
> Ok, so far you probably know that yourself, I just repeated it to 
> emphasis which effects you control with the mentioned parameters: the 
> roughness
> parameter determines how much the highlight will spread out, and the 
> -sj setting determines how much of this spread will actually be 
> sampled, (-st as threshold finally  decides if it will be considered 
> specular at all or just added to the diffuse component.) So  the sense 
> of -sj lies more in setting values < 1 to produce sharper highlights 
> also for rough surfaces to reduce noise in the image, -- whereas 
> you're looking for the opposite, a way to make them appear more diffuse.
>
> Now it might be that the problem in your case lies in the method being 
> to limited to describe the floor material adequately
> As mentioned above, you can tweak the amout of spreading for the 
> highlight, but you cannot consider e.g. materials whose specular 
> reflection coefficient itself changes with the incident angle, which 
> might be the reason in your case for the highlights being less 
> apparent in the direction you're looking.
> And even if you provide BRTDF data for the floor material, it would be 
> rather tedious as they would have to be inverted during this 
> calculation which is -again AFAIK -currently not possible in Radiance.
>
> -cb
> PS you might still revert to Giulios Photoshop idea, you could also do 
> it in Radiance, i.e. make a pic form two base pics with pcomb (I hope 
> I name the correct one here, I always mix them up, pcomb, pcompos, 
> pcond, pwhatever....), then write a script for that purpose to convert 
> all your frames automatically..
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>

From rower at MovieEditor.com  Fri Jul 22 19:05:34 2005
From: rower at MovieEditor.com (Robin Rowe)
Date: Fri Jul 22 19:02:08 2005
Subject: [Radiance-general] MovieEditor Conference on Aug 3rd
References: <s2e07dde.021@wmtao.com>
Message-ID: <2f0001c58edf$96b7b440$0300a8c0@cary>

Conference covers the state-of-the-art in computer-based filmmaking.

Top motion picture studio technology experts presenting on August 3rd in Los 
Angeles! A rare opportunity to hear and meet the real movers in Linux and 
Macintosh filmmaking technology. Less than two weeks away. Sign up today!

- Disney Technology Manager Jeff Rochlin
- DreamWorks Animation Senior Technologist Skottie Miller
- SOUTH PARK Systems Administrator JJ Franzen
- Library of Congress Motion Picture Conservation Center Lab Supervisor 
Frank Wylie
- Adobe Systems Color Technology Manager and ICC Digital Motion Picture 
Working Group Chairman Lars Borg
- Pixar Director of Computer Operations Greg Brandeau
- Alias Maya General Manager Engineering Kevin Tureski
- NVIDIA Digital Film Support Philip Nemec
- mental images mental ray users group leader Bart Gawboy
- SoftImage Special Projects Senior Consultant Javier von der Pahlen
- Apple Shake Product Designer Ron Brinkman
- D2 NUKE VFX Supervisor Jonathan Egstad
- Discreet Flint and Smoke Director of Product Management Bill Roberts
- IFX Piranha President Tom Benoist
- Imagineer Systems Monet Managing Director Allan Jaenicke
- UCLA dean and image processing expert Tony Chan

More info:  www.MovieEditor.com

Robin
---------------------
MovieEditor.com
Beverly Hills, California 


From cbauer- at t-online.de  Sat Jul 23 12:53:27 2005
From: cbauer- at t-online.de (Carsten Bauer)
Date: Sat Jul 23 04:24:21 2005
Subject: [Radiance-general] estimating -av values, color
In-Reply-To: <227fab3d7079cb70f772c7218959fc95@gmx.net>
References: <2d650bdc669b4373597cfcd9098128ce@gmx.net>	<42DFE198.6010002@visarc.com>
	<42E0ADD0.3010709@t-online.de>
	<227fab3d7079cb70f772c7218959fc95@gmx.net>
Message-ID: <42E221A7.8020906@t-online.de>


> As far as I understood, the influence of the -av setting (on objects 
> not excluded from the ambient calculation) can be dimmed by the -aw 
> setting, and as I start my renderings with an "ouverture calculation" 
> the computed ambient distribution should be stable enough. Am I wrong 
> here?
>
hmm, I never used -aw so far, prob. I was to lazy to count the ambient 
vals to find out which number to set for -aw...

I think one point is important to consider: setting a constant 'rest' 
ambient value -av for the whole scene is a very crude thing which can be 
applied moderately to prevent certain regions appearing unnaturally 
dark, but it will be difficult to use -av as some kind of substitution 
on objects otherwise excluded from ambient ray tracing..
It quickly looks strange an unnatural either. I remember that it even 
was difficult to tweak things that way in POVRay, where you could (still 
can?) set
an ambient value for each material (resp. finish) separately..

-cb

PS -btw, the general problem was one of the backgrounds why I 
implemented such hacks as the secondary ambient material in radzilla for 
objects with complicated  patterns but still some sort of base color, or 
the 'scene' with its possibility of setting different ambient 
parameters, etc.
All serve in extending the range in which the raytracing ambient calc 
can still be used without letting rendering times explode. Because in 
the end the ambient rays are the only really working way of producing 
nice results, all other workarounds will sooner or later reach their 
limits..)

From cbauer- at t-online.de  Sat Jul 23 12:53:17 2005
From: cbauer- at t-online.de (Carsten Bauer)
Date: Sat Jul 23 04:25:20 2005
Subject: [Radiance-general] Reflection vs specularity
In-Reply-To: <42E12170.40700@iebele.nl>
References: <CC0B19F4C6132F4D9FDDEBF194200FB5234C6E@ldcexc02.global.arup.com>	<42DE83A4.7090608@iebele.nl>	<42DF3EE8.8010106@t-online.de>
	<42E12170.40700@iebele.nl>
Message-ID: <42E2219D.80900@t-online.de>

Hi Iebele,

I'm anything else than a BRDTF expert, so my answer is a bit short  .. 
at least for the moment

> 1. Distant objects seem to reflect more as nearby objects, in term of 
> renderings: the reflection changes as a funtion of the angle between 
> ray direction ad surface normal
> 2. Some roughness/noise is visible at a distance, while nearby the 
> surface is just dull.
> 3. The color changes somehow as a funtion of the distance to a bit 
> more blue/less saturation
> 4. Specular highlights are very soft and relative to the 'eye-position'
>
in other words. specular reflection increases with higher incidence 
angles (measured from the surface normal normal). ..sounds reasonable..

> 1.
> The first question of all is how I could possibly find the 
> ray-direction and value of incident light within  a  brtdf. Are there 
> globally defined variables for these (like Dx, Dy, Dz) ?


the direction and value of the incident light as seen from the current 
ray hit is calculated within the program when stepping through the list
of sources and adding up their contributions, but this means of course 
that in general there is not one value and one direction which could be 
exported, but many.
Why do you need them? Normally they're dealt with internally, the BRTDF 
gets the direction to the source and then gives back the specular 
(and/or transmission) coefficient of your material for that incident 
angle and your current view ray angle.
(but I definitely need to have a closer look on how the BRDTF stuff is 
evaluated in Radiance before writing on further ..).


> 3.
> The last question is: can I change the line below in a more elegant 
> way, like the pow(base,exp) function in c: :
> refl  =  
> (1-multi)*(1-multi)*(1-multi)*(1-multi)*(1-multi)*(1-multi)*(1-multi)*(1-multi)*(1-multi) 
> ;
>
The functional language defines a pure exponential funtion e^x ( or 
exp(x), as it is called). To calculate arbitray powers with it, proceed 
as follows:
  x^y   = e^y*lnx  or  x^y = exp(y*log(x))  in the syntax of the 
functional language

-cb

From gregoryjward at gmail.com  Sat Jul 23 22:57:16 2005
From: gregoryjward at gmail.com (Greg Ward)
Date: Sat Jul 23 22:58:07 2005
Subject: [Radiance-general] mkillum w/ frit
In-Reply-To: <42DE89EE.20909@archenergy.com>
References: <42DE89EE.20909@archenergy.com>
Message-ID: <B814AAB7-0C6B-4704-8601-25AAAEB2BB62@gmail.com>

Hi Zack,

I cannot think of any particular reason why mkillum would not work  
with your frit description, though the output of glaze.csh is likely  
to be more accurate since it accounts for changes in transmission  
w.r.t. incident angle.  A mixed material should not mix up mkillum,  
as it just traces rays through the surface and tallies whatever comes  
out the other side.

-Greg

> From: Zack Rogers <zrogers@archenergy.com>
> Date: July 20, 2005 10:29:18 AM PDT
>
> Hello,
>
> I am wondering about the use of mkillum on a surface that is  
> defined with mixfunc to model a frit pattern on glass.
>
> my definition looks like this:
>
> void plastic grey_065
> 0
> 0
> 5            0.65          0.65          0.65
>                0             0
>
> void BRTDfunc PPG-SB80
> 10 rrho grho brho rtau gtau btau 0 0 0 glazing.cal
> 0
> 18              0             0             0
>                0             0             0
>                0             0             0
>            0.249         0.355         0.329
>            0.363         0.364         0.262
>            0.434          0.49         0.461
>
> void mixfunc l_glass_af+++x+++frit_dot_40%_y
> 6   PPG-SB80 grey_065 y_hole function/perforate.cal
>    -s .03
> 0
> 1           0.356
>
> Can I use the surfaces with this material applied as illum surfaces  
> for mkillum with accurate results?  Searching the online db, I  
> found discussion of this glaze.csh script. Does this create a  
> better model for a fritted glass, and is this used with mkillum?   
> My definition for the glass comes from Optics 5.
>
> Thanks!
> Zack

From rpg at rumblestrip.org  Sun Jul 24 07:18:56 2005
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Sun Jul 24 18:15:45 2005
Subject: [Radiance-general] estimating -av values, color
In-Reply-To: <42E221A7.8020906@t-online.de>
References: <2d650bdc669b4373597cfcd9098128ce@gmx.net>	<42DFE198.6010002@visarc.com>
	<42E0ADD0.3010709@t-online.de>
	<227fab3d7079cb70f772c7218959fc95@gmx.net>
	<42E221A7.8020906@t-online.de>
Message-ID: <fae8afb860262c540496a3832509bd91@rumblestrip.org>


On Jul 23, 2005, at 4:53 AM, Carsten Bauer wrote:
> I think one point is important to consider: setting a constant 'rest' 
> ambient value -av for the whole scene is a very crude thing which can 
> be applied moderately to prevent certain regions appearing unnaturally 
> dark, but it will be difficult to use -av as some kind of substitution 
> on objects otherwise excluded from ambient ray tracing..
> It quickly looks strange an unnatural either. I remember that it even 
> was difficult to tweak things that way in POVRay, where you could 
> (still can?) set
> an ambient value for each material (resp. finish) separately..

Hey, now that would be cool.  Is there any way that could be added to 
Radiance?  The ability to have multiple -av's for various materials 
would increase the usability of -ae, I think. Especially for large 
scenes that incorporate interior & exterior elements...

=================
    Rob Guglielmetti
www.rumblestrip.org


From cbauer- at t-online.de  Mon Jul 25 22:06:51 2005
From: cbauer- at t-online.de (Carsten Bauer)
Date: Mon Jul 25 13:38:40 2005
Subject: [Radiance-general] estimating -av values, color
In-Reply-To: <fae8afb860262c540496a3832509bd91@rumblestrip.org>
References: <2d650bdc669b4373597cfcd9098128ce@gmx.net>	<42DFE198.6010002@visarc.com>	<42E0ADD0.3010709@t-online.de>	<227fab3d7079cb70f772c7218959fc95@gmx.net>	<42E221A7.8020906@t-online.de>
	<fae8afb860262c540496a3832509bd91@rumblestrip.org>
Message-ID: <42E5465B.1070100@t-online.de>

Rob Guglielmetti wrote:

>
> Hey, now that would be cool.  Is there any way that could be added to 
> Radiance?  The ability to have multiple -av's for various materials 
> would increase the usability of -ae, I think. Especially for large 
> scenes that incorporate interior & exterior elements..


Hi Rob,
implementing this is more or less rather easy, I remember having played 
around with it some years ago already, but I didn't find it rewarding 
resp. worth the effort. The basic problem is always the 'flat' 
illumination caused by the constant value.

When it comes to image generation, if you have large scenes with 
exterior and interior parts both of importance for display in the image, 
and/or e.g complex stuff like trees etc, you should give the 'scene' 
feature of radzilla a try, with it's possibility of setting a separate 
parameter set meaning also separate caches.
It depends of course on the type of object. Computers are fast now, so 
even in million polygon octrees like a tree e.g a crude ambient cache 
with -ab1 and -ad 60 or 100 or so is trackable. In such an obect the 
errors caused by the crude cache are of no importance,  and  it 
definitely gives better results than any constant value  approximation.
In other cases, if the outside part is of lesser importance but still 
somehow visible in the image, setting -ab 0 and a constant av for the 
whole outside part might of course suffice, and it can save you the time 
and work of pasting some background stuff into the image with photoshop 
etc later..

-cb


From rpg at rumblestrip.org  Mon Jul 25 18:24:16 2005
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Mon Jul 25 18:25:15 2005
Subject: [Radiance-general] estimating -av values, color
In-Reply-To: <42E5465B.1070100@t-online.de>
References: <2d650bdc669b4373597cfcd9098128ce@gmx.net>	<42DFE198.6010002@visarc.com>	<42E0ADD0.3010709@t-online.de>	<227fab3d7079cb70f772c7218959fc95@gmx.net>	<42E221A7.8020906@t-online.de>
	<fae8afb860262c540496a3832509bd91@rumblestrip.org>
	<42E5465B.1070100@t-online.de>
Message-ID: <2197.66.180.127.98.1122308656.squirrel@66.180.127.98>


On Mon, July 25, 2005 2:06 pm, Carsten Bauer said:

> Hi Rob,
> implementing this is more or less rather easy, I remember having played
> around with it some years ago already, but I didn't find it rewarding
> resp. worth the effort. The basic problem is always the 'flat'
> illumination caused by the constant value.

Agreed, but the direct calculation still puts some variation on those
objects that have the constant -av approximation, and if you could have a
variety of -av approximations to apply, one could have a fair amount of
variation in the scene, even with the excludes.  It could help, anyway.

> When it comes to image generation, if you have large scenes with
> exterior and interior parts both of importance for display in the image,
> and/or e.g complex stuff like trees etc, you should give the 'scene'
> feature of radzilla a try, with it's possibility of setting a separate
> parameter set meaning also separate caches.

I really, really should.  I recall reading about that and thinking that
that was a very good option for these kinds of scenes.  (I also think that
your falsecolor material is just too cool.)

> It depends of course on the type of object. Computers are fast now, so
> even in million polygon octrees like a tree e.g a crude ambient cache
> with -ab1 and -ad 60 or 100 or so is trackable. In such an obect the
> errors caused by the crude cache are of no importance,  and  it
> definitely gives better results than any constant value  approximation.
> In other cases, if the outside part is of lesser importance but still
> somehow visible in the image, setting -ab 0 and a constant av for the
> whole outside part might of course suffice, and it can save you the time
> and work of pasting some background stuff into the image with photoshop
> etc later..

Photoshop has no place in my Radiance workflow. =8-)

-- 
Rob Guglielmetti
www.rumblestrip.org

From cbauer- at t-online.de  Tue Jul 26 05:59:19 2005
From: cbauer- at t-online.de (Carsten Bauer)
Date: Mon Jul 25 21:30:16 2005
Subject: [Radiance-general] estimating -av values, color
In-Reply-To: <2197.66.180.127.98.1122308656.squirrel@66.180.127.98>
References: <2d650bdc669b4373597cfcd9098128ce@gmx.net>	<42DFE198.6010002@visarc.com>	<42E0ADD0.3010709@t-online.de>	<227fab3d7079cb70f772c7218959fc95@gmx.net>	<42E221A7.8020906@t-online.de>	<fae8afb860262c540496a3832509bd91@rumblestrip.org>	<42E5465B.1070100@t-online.de>
	<2197.66.180.127.98.1122308656.squirrel@66.180.127.98>
Message-ID: <42E5B517.4090002@t-online.de>

Rob Guglielmetti wrote:

>variety of -av approximations to apply, one could have a fair amount of
>variation in the scene, even with the excludes.  It could help, anyway.
>
>  
>
well, the easiest way of implementing it is an augmented material type 
with possibility of specifying an additional ambient value, means 
addtional to everything, also to an existing av.. If you want to get a 
feeling how this might look in principle then you can play around a bit 
the with 'ghost' material in current radzilla, which has this feature. 
Although here the original reason for offering it is different, I 
thought of  special cases where one wants to set markers in the scene, 
or for some purely artistic stuff.

One might give it a try and offer this opportunity, although personally 
I still think it will be rather confusing (cf. my remarks on the POVRay 
case..)

Messing with the ambient caches's av itself is btw problematic, because 
of the recursive nature of the ambient calc.

>Photoshop has no place in my Radiance workflow. =8-)
>  
>

well, sorry, the honesty, of course your're right. How could I.... :-)
BTW, evidently Photoshop has no place in my rendering workflow either.
I use Gimp ...

-cb



From gvn at retena.com  Tue Jul 26 17:20:51 2005
From: gvn at retena.com (=?iso-8859-1?Q?Ignacio_Mun=E1rriz?=)
Date: Tue Jul 26 17:39:12 2005
Subject: [Radiance-general] file locking on windows
References: <2d650bdc669b4373597cfcd9098128ce@gmx.net>	<42DFE198.6010002@visarc.com>	<42E0ADD0.3010709@t-online.de>	<227fab3d7079cb70f772c7218959fc95@gmx.net>	<42E221A7.8020906@t-online.de><fae8afb860262c540496a3832509bd91@rumblestrip.org><42E5465B.1070100@t-online.de>
	<2197.66.180.127.98.1122308656.squirrel@66.180.127.98>
Message-ID: <001101c591f5$9dcf7100$53000080@pnac>

hi all, a week ago, i tried to use rpiece on windows and i got the "no NFS
lock manager" message, so i`ve implemented file locking on windows with the:
UnlockFile(HANDLE,DWORD,DWORD,DWORD,DWORD)  and
LockFile(HANDLE,DWORD,DWORD,DWORD,DWORD)  functions.

Now i've a rpice.exe running on windows, maybe it could be useful for rpict
ambient file locking, but i havent gave a look on it yet, if anybody is
interested on the code i'll clean and upload it


From gregoryjward at gmail.com  Wed Jul 27 00:36:48 2005
From: gregoryjward at gmail.com (Greg Ward)
Date: Wed Jul 27 00:37:48 2005
Subject: [Radiance-general] Announcing Radiance 3.7 release
Message-ID: <FB3B3A82-C5D2-4498-BEA5-F00256E1F201@gmail.com>

Hi All,

I have put together an official release of Radiance 3.7 on the LBNL  
Radiance server at:

     http://radsite.lbl.gov/radiance/framed.html

I think Peter Apian-Bennewitz is on vacation, so it will take a week  
or two before radiance-online is updated.  I have compiled under Mac  
OS X, Linux, and FreeBSD, though I expect there will be the usual  
binary/library compatibility issues to sort out.

Be sure to check out the new mksource and rtcontrib programs, and let  
me know if you run into any serious compile or runtime issues on your  
platform.  A list of significant changes since the previous 3.6  
release last October is listed below.

Enjoy!
-Greg

================================
Changes between Radiance 3.6 and 3.7:

Changed default temporary directory from /usr/tmp, which doesn't exist
on a lot of systems these days, to /tmp.

Eliminated many unused files and programs from the distribution,  
including
the following programs that were being built but no longer used:
     oki20    - printer driver for OkiMate 20 printer (B&W)
     oki20c    - printer driver for OkiMate 20 color printer
     pcwarp    - intended as more general substitute for macbetcal,
             but never quite worked
     ra_avs    - convert to & from AVS image format
     ra_bn    - convert to & from Barneyscann format
     ra_pr    - convert to & from 8-bit Sun rasterfile format
     ra_pr24    - convert to & from 24-bit Sun rasterfile format
     thf2rad    - convert GDS "things file" to Radiance scene format
If anyone is still wanting any of the above programs, let us know and  
we'll
reinstate it.

Added script to convert to/from ICT's Poskanzer Float Map, which I don't
care to support officially due to its machine-dependent byte order.

Fixed bug that caused incorrect reporting of non-surface in set when
mixing meshes and instances.  (Thanks to Jack de Valpine for discovery.)

Fixed innacuracy in calculation of diffuse transmission in the presence
of pure specular (Fresnel reflection) using "trans" material.  Thanks
to Christoph Reinhart for pointing out the error.

Made internal change to tone-mapping library to use structure pointer
rather than stack, making code re-entrant and more up to modern  
standards.

Added -pd option to handle depth-of-field blur in rpict.  This requires
that the view directon (-vd option) include focal distance information,
which is now preserved by the various view file routines, and reported
by the vwright command.

Added DBLUR variable to ranimate and pmdblur script to handle  
simultaneous
motion and depth-of-field blurring.  Thanks to Visarc for funding  
this work.

Added setting of focus distance in rvu ("focus" command) and rholo
('f'/"frame" command).

Changed default remote shell in ranimate to "ssh" rather than "rsh",
which has been abandoned on most Unix systems due to security issues.

Fixed behavior of source primitive using illum with no alternate
material.  These now become transparent so one can see the sky or
light-probe background for use in image-based lighting.  Previously,
the user needed to specify the background glow as the alternate
material for a distant illum source to behave properly.  (This still
works.)

Fixed some minor problems and inconsistencies with 16-bit/channel
TIFF i/o in ra_tiff.

Created mksource program to generate distant sources for improved
image-based lighting with light probes.

Added -oM option to rtrace to report material (rather than modifier)
for cases where actual material is aliased or further up modifier chain.

Rearranged the way ray contributions are computed so that it might be
possible to use rtrace to derive daylight coefficients and optical
transfer functions.  The new -oTW option of rtrace produces color
contribution weights for each ray, which combined with the -ti (or -tI)
option permits the contribution of selected surfaces or sources to
be determined.  Using the -oTW option, one should also specify
options "-dt 0 -aa 0 -as 0" for optimal results.  In particular,
one cannot expect reasonable tallies with -ab >= 1 and irradiance
caching on (-aa > 0).

The same code modifications included a change to the indirect  
computation
with caching switched off (-aa 0).  Whereas before, the number of  
secondary
rays after the first bounce were half of the previous generation,  
they are
now determined by the surface reflectance, making for a better and  
faster
calculation.  It should now be possible to compute many bounces with - 
aa 0,
which used to be prohibitively expensive.

Added -T option to xshowtrace to trace rays to light sources.

Added meta2bmp program to produce BMP files from metafile graphics.

Increased maximum number of input pictures in pcomb and pcompos to 512.

Created rtcontrib program for computing ray contribution coefficients.
This tool may be used to do standard optical ray tracing or daylight
coefficient calculations for annual simulations, among other uses.

Implemented Russian roulette ray termination with -lr <= 0.
Made -lr -10 the default in rtcontrib and rtrace.

Added -if and -of options to total for binary i/o (following rcalc  
mold).

Added -u rendering option for pure Monte Carlo sampling.
(Got rid of -DMC compile option, which this makes superfluous.)

Changed -t option of rlam to accept strings as well as single  
characters.

Fixed truly ancient bug in bounding box computation for cones, which
could (and did) cause missing segments.

Added -z option to normtiff to output LZW-compressed files.



From ian at testers.homelinux.net  Wed Jul 27 06:27:44 2005
From: ian at testers.homelinux.net (Ian Tester)
Date: Wed Jul 27 06:28:50 2005
Subject: [Radiance-general] Announcing Radiance 3.7 release
In-Reply-To: <FB3B3A82-C5D2-4498-BEA5-F00256E1F201@gmail.com>
References: <FB3B3A82-C5D2-4498-BEA5-F00256E1F201@gmail.com>
Message-ID: <42E70D40.3040007@testers.homelinux.net>

Greg Ward wrote:

> Added -pd option to handle depth-of-field blur in rpict.  This requires
> that the view directon (-vd option) include focal distance information,
> which is now preserved by the various view file routines, and reported
> by the vwright command.

 From the man page, this new feature completely replaces pdfblur. So 
there's no need to render multiple images and average them together? I 
haven't seen any other mention of this new feature. Does rpict simply trace 
multiple rays for the one pixel?

Does it adapt e.g points in focus only require a few rays, but points out 
of focus require more rays over the area of confusion (or whatever it's 
called) ?
That would improve the efficiency/speed over the laborious pdfblur method.

Oh, and thanks to everyone involved in the development of Radiance. It's 
amazing!

bye

From gregoryjward at gmail.com  Wed Jul 27 07:13:55 2005
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Wed Jul 27 07:14:49 2005
Subject: [Radiance-general] Announcing Radiance 3.7 release
In-Reply-To: <42E70D40.3040007@testers.homelinux.net>
References: <FB3B3A82-C5D2-4498-BEA5-F00256E1F201@gmail.com>
	<42E70D40.3040007@testers.homelinux.net>
Message-ID: <7E5160E9-A24B-477B-A8A0-E90FF210492E@gmail.com>

Hi Ian,

> Greg Ward wrote:
>> Added -pd option to handle depth-of-field blur in rpict.  This  
>> requires
>> that the view directon (-vd option) include focal distance  
>> information,
>> which is now preserved by the various view file routines, and  
>> reported
>> by the vwright command.
>
> From the man page, this new feature completely replaces pdfblur. So  
> there's no need to render multiple images and average them  
> together? I haven't seen any other mention of this new feature.  
> Does rpict simply trace multiple rays for the one pixel?

It's not a complete replacement, as pdfblur is quite a bit faster.   
Also, rpict will not as a rule send multiple samples per pixel.  To  
get such a behavior, you have to increase the initial image  
resolution and downsample more with pfilt.

Similar to motion blur, best results are usually obtained through a  
combination of pdfblur and the new -pd option.  There is also a new  
script to do combined motion and depth-of-field blur, as the two are  
not really separable.  It's called pmdblur, and it's man page is the  
best place to get details.

Thanks is due to Jack de Valpine of Visarc, who funded this addition,  
along with support in ranimate that now provides motion and depth-of- 
field blurring as an option.

> Does it adapt e.g points in focus only require a few rays, but  
> points out of focus require more rays over the area of confusion  
> (or whatever it's called) ?
> That would improve the efficiency/speed over the laborious pdfblur  
> method.

The technique is not adaptive, but it takes advantage along with  
everything else of rpict's selective rendering of samples based on  
image coherence (the -ps and -pt options).

-Greg

From ian at testers.homelinux.net  Wed Jul 27 09:04:04 2005
From: ian at testers.homelinux.net (Ian Tester)
Date: Wed Jul 27 09:05:19 2005
Subject: [Radiance-general] Announcing Radiance 3.7 release
In-Reply-To: <7E5160E9-A24B-477B-A8A0-E90FF210492E@gmail.com>
References: <FB3B3A82-C5D2-4498-BEA5-F00256E1F201@gmail.com>	<42E70D40.3040007@testers.homelinux.net>
	<7E5160E9-A24B-477B-A8A0-E90FF210492E@gmail.com>
Message-ID: <42E731E4.2030902@testers.homelinux.net>

Gregory J. Ward wrote:
> Hi Ian,
> 
> It's not a complete replacement, as pdfblur is quite a bit faster.   
> Also, rpict will not as a rule send multiple samples per pixel.  To  get 
> such a behavior, you have to increase the initial image  resolution and 
> downsample more with pfilt.

Ah yes, oh course. I should avoid asking questions before breakfast :P

> Thanks is due to Jack de Valpine of Visarc, who funded this addition,  
> along with support in ranimate that now provides motion and depth-of- 
> field blurring as an option.

Thanks Jack!

bye

From atelier at iebele.nl  Wed Jul 27 15:08:00 2005
From: atelier at iebele.nl (atelier iebele abel)
Date: Wed Jul 27 15:06:06 2005
Subject: [Radiance-general] Reflection vs specularity
In-Reply-To: <42E2219D.80900@t-online.de>
References: <CC0B19F4C6132F4D9FDDEBF194200FB5234C6E@ldcexc02.global.arup.com>	<42DE83A4.7090608@iebele.nl>	<42DF3EE8.8010106@t-online.de>	<42E12170.40700@iebele.nl>
	<42E2219D.80900@t-online.de>
Message-ID: <42E78730.1090709@iebele.nl>

Hi Carsten,

Thanks for pointing out  the right direction again.
I replaced the line with:

refl = (1-multi)^9 ;

Works fine now, just a few days before my holidays :)
Now I  have it , it looks so simple, and the my question almost stupid.
Thanks!

Iebele


>> refl  =  
>> (1-multi)*(1-multi)*(1-multi)*(1-multi)*(1-multi)*(1-multi)*(1-multi)*(1-multi)*(1-multi) 
>> ;
>>
> The functional language defines a pure exponential funtion e^x ( or 
> exp(x), as it is called). To calculate arbitray powers with it, 
> proceed as follows:
>  x^y   = e^y*lnx  or  x^y = exp(y*log(x))  in the syntax of the 
> functional language
>
> -cb
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>

