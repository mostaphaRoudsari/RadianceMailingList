From jelle.feringa at ezct.net  Wed Jun  1 11:14:25 2005
From: jelle.feringa at ezct.net (Jelle Feringa / EZCT Architecture & Design Research)
Date: Wed Jun  1 11:14:50 2005
Subject: [Radiance-general] Compiling RTcontrib on linux
Message-ID: <mailman.6.1117617290.370.radiance-general@radiance-online.org>

Hi Greg,

Following the instructions below RTcontrib compiled flawlessly, thanks!

Feeling such a Dude compiling Radiance now ;)
Sheer satisfaction reading "SOFTWARE= RADIANCE 3.7a lastmod Tue May 31
00:59:22 CEST 2005 by root on LINUX" in the pic headers!

Also I managed to compile Radzilla -charmed by the photon's & the falsecolor
material!- 

I have to admit I'm still thinking in 3.3 terms of Radiance.
I haven't been able to track differences in the man pages, or other
documents. What would be a good way of updating myself in terms of Radiance
-besides browsing through the past 3 years of this & the development mailing
list-?

A small hiccup while compiling 3.6.1 though:

-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO -o pcwarp pcwarp.o warp3d.o
-lrt -lm
make: Target `install' not remade because of errors.

-> see the file trace on the end of this mail, could this be due to a lack
of a tiff lib? I'm running the Ubuntu linux distribution.

Cheers,

Jelle.

---------RTcontrib 'patch'---------

The fault is mine -- apparently, OS X is more generous with it's #include's
than Linux.  Add the following right after the line:

#include <ctype.h>

at the head of rtcontrib.c:

#include <signal.h>

Hopefully, that should fix it.

---------error compiling 3.6.1 on linux (ubuntu)---------

gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o pfilt.o pfilt.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o pf2.o pf2.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o pf3.o pf3.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO -o pfilt pfilt.o pf2.o pf3.o
-lrt -lm
pfilt.o(.text+0x57f): In function `main':
: warning: the use of `mktemp' is dangerous, better use `mkstemp'
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o ttyimage.o ttyimage.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO -o ttyimage ttyimage.o -lrt
-lm
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o psign.o psign.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO -o psign psign.o -lrt -lm
make: *** No rule to make target `tiff/config.local', needed by
`../lib/libtiff.a'.
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o pvalue.o pvalue.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO -o pvalue pvalue.o -lrt -lm
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o pcompos.o pcompos.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO -o pcompos pcompos.o -lrt -lm
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o protate.o protate.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO -o protate protate.o -lrt -lm
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o ra_hexbit.o
ra_hexbit.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO -o ra_hexbit ra_hexbit.o -lrt
-lm
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o ra_bmp.o ra_bmp.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO -o ra_bmp ra_bmp.o -lrt -lm
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o ra_t8.o ra_t8.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o clrtab.o clrtab.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o neuclrtab.o
neuclrtab.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO -o ra_t8 ra_t8.o clrtab.o
neuclrtab.o -lrt -lm
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o ra_t16.o ra_t16.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO -o ra_t16 ra_t16.o -lrt -lm
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o pcomb.o pcomb.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO -o pcomb pcomb.o -lrt -lm
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o pinterp.o pinterp.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO -o pinterp pinterp.o -lrt -lm
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o pflip.o pflip.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO -o pflip pflip.o -lrt -lm
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o ra_ppm.o ra_ppm.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO -o ra_ppm ra_ppm.o -lrt -lm
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o x11image.o x11image.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o x11raster.o
x11raster.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO -o ximage x11image.o
x11raster.o \
clrtab.o -lrt -lX11 -lm
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o xshowtrace.o
xshowtrace.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o x11findwind.o
x11findwind.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO -o xshowtrace xshowtrace.o \
x11findwind.o -lrt -lX11 -lm
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o ra_rgbe.o ra_rgbe.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO -o ra_rgbe ra_rgbe.o -lrt -lm
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o ra_pict.o ra_pict.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO -o ra_pict ra_pict.o -lrt -lm
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o ra_ps.o ra_ps.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO -o ra_ps ra_ps.o -lrt -lm
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o pextrem.o pextrem.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO -o pextrem pextrem.o -lrt -lm
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o ra_gif.o ra_gif.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO -o ra_gif ra_gif.o clrtab.o
neuclrtab.o -lrt -lm
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o ra_xyze.o ra_xyze.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO -o ra_xyze ra_xyze.o -lrt -lm
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o macbethcal.o
macbethcal.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o pmapgen.o pmapgen.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o mx3.o mx3.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o warp3d.o warp3d.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO -o macbethcal macbethcal.o
pmapgen.o mx3.o warp3d.o \
-lrt -lm
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o pcond.o pcond.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o pcond2.o pcond2.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o pcond3.o pcond3.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o pcond4.o pcond4.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO -o pcond pcond.o pcond2.o
pcond3.o pcond4.o warp3d.o \
-lrt -lm
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO   -c -o pcwarp.o pcwarp.c
gcc -I../common -L../lib -O2 -DSPEED=200 -Dlinux -D_FILE_OFFSET_BITS=64
-L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO -o pcwarp pcwarp.o warp3d.o
-lrt -lm
make: Target `install' not remade because of errors.


From gregoryjward at gmail.com  Wed Jun  1 17:09:27 2005
From: gregoryjward at gmail.com (Greg Ward)
Date: Wed Jun  1 17:10:13 2005
Subject: [Radiance-general] Compiling RTcontrib on linux
In-Reply-To: <429d7ce9.50ab9567.425a.ffffcee0SMTPIN_ADDED@mx.gmail.com>
References: <429d7ce9.50ab9567.425a.ffffcee0SMTPIN_ADDED@mx.gmail.com>
Message-ID: <D01B65FD-B36E-4C5F-B7E0-0D27F602118C@gmail.com>

Hi Jelle,

> From: "Jelle Feringa / EZCT Architecture & Design Research"  
> <jelle.feringa@ezct.net>
> Date: June 1, 2005 2:14:25 AM PDT
>
> I have to admit I'm still thinking in 3.3 terms of Radiance.
> I haven't been able to track differences in the man pages, or other
> documents. What would be a good way of updating myself in terms of  
> Radiance
> -besides browsing through the past 3 years of this & the  
> development mailing
> list-?

You can pick up the main points of what's changed by browsing the  
ReleaseNotes file in ray/doc/notes.  This is a simple, chronological  
listing of changes since time memorial.  I also recommend downloading  
my presentations from past Radiance workshops on code changes.  Each  
year for the past few years I've given a summary of "what's new" at  
the workshop.  These are available from www.radiance-online.org under  
"Intl. Radiance workshops" on the main (left) frame.

> A small hiccup while compiling 3.6.1 though:
>
> -L/usr/X11R6/lib -I/usr/include/X11 -DNOSTEREO -o pcwarp pcwarp.o  
> warp3d.o
> -lrt -lm
> make: Target `install' not remade because of errors.
>
> -> see the file trace on the end of this mail, could this be due to  
> a lack
> of a tiff lib? I'm running the Ubuntu linux distribution.

Looks like you might have forgotten to download the required  
overlay.  Is there even a ray/src/px/tiff directory on your system?   
The file you want is called "rad3R6P1supp.tar.gz" and is available  
from the downloads page.  Install it _right_over_ your previously  
downloaded HEAD directory.  (Very important.)  Then try to recompile.

In future, just send me those error listings, to save load on the  
list.  Thanks.

-Greg

From anthony.farrell at dit.ie  Thu Jun  2 16:56:32 2005
From: anthony.farrell at dit.ie (Anthony J. Farrell)
Date: Thu Jun  2 16:57:17 2005
Subject: [Radiance-general] RE: Light pipe
In-Reply-To: <01LOR0XJYIEM9ATL1B@mail.dit.ie>
Message-ID: <!~!UENERkVCMDkAAQACAAAAAAAAAAAAAAAAABgAAAAAAAAACJWbgafz6UaL6G5F22Jwe8KAAAAQAAAA/KvVOhhu6ESLx0J8qss++AEAAAAA@dit.ie>

Hi Giulio,

I am interested in your response regarding the light pipe problem of
Stefano. There are several correlations of light depreciation with lightpipe
depth, and of course the light pipe reflectance is key to this. Most light
pipes are 97 - 99 per cent specular reflective. Could you please elaborate
how one would implement the glow material and brightfunc relative to a given
relation and light pipe reflectance?

Regards,

Anthony




-- 
This message has been scanned for content and 
viruses by the DIT Information Services MailScanner 
Service, and is believed to be clean.
http://www.dit.ie


From MMoeck at engr.psu.edu  Thu Jun  2 17:31:28 2005
From: MMoeck at engr.psu.edu (Martin Moeck)
Date: Thu Jun  2 17:32:31 2005
Subject: [Radiance-general] RE: Light pipe intensity photometric data
Message-ID: <84F05BA9118BBD4A8FC6409808CE266C23443E@ENGRMAIL2.engr.psu.edu>

I measured the intensity distribution of one emitting patch of a lightpipe in 1988. The pipe used the 3M film, but had a square cross section and glowing sides. See the intensity distribution and the luminance distribution along the full lightpipe length at 

www.personal.psu.edu/mum13/lightpipe

The intensity distribution was measured approximately at the center of the length of the pipe. 

Marin Moeck, Penn State






-----Original Message-----
From:	radiance-general-bounces@radiance-online.org on behalf of Anthony J. Farrell
Sent:	Thu 6/2/2005 10:56 AM
To:	radiance-general@radiance-online.org
Cc:	
Subject:	*** SPAM *** [Radiance-general] RE: Light pipe
Hi Giulio,

I am interested in your response regarding the light pipe problem of
Stefano. There are several correlations of light depreciation with lightpipe
depth, and of course the light pipe reflectance is key to this. Most light
pipes are 97 - 99 per cent specular reflective. Could you please elaborate
how one would implement the glow material and brightfunc relative to a given
relation and light pipe reflectance?

Regards,

Anthony




-- 
This message has been scanned for content and 
viruses by the DIT Information Services MailScanner 
Service, and is believed to be clean.
http://www.dit.ie


_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general



-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 3338 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20050602/c8426f52/attachment.bin
From Giulio.Antonutto at arup.com  Thu Jun  2 17:35:45 2005
From: Giulio.Antonutto at arup.com (Giulio Antonutto)
Date: Thu Jun  2 17:38:28 2005
Subject: [Radiance-general] RE: Light pipe
Message-ID: <CC0B19F4C6132F4D9FDDEBF194200FB508EB4F@ldcexc02.global.arup.com>

the simplest way to proceed is to create an equation that links a
coordinate to the radiance of the surface in form of a multiplier (hence
the equation is between [0,1]).
you may use a cal file or directly express it into the brightfunc
definition.

As an example:
Supposing the relation between light output and distance is this:
(you may use the proper equation here)

y = a*x*x + b   
and 
y= 0 when x = 1000m 
y = 1 when x = 0

it would be:

y = -0.000001*x*x+1

that becomes an 'if' sentence to avoid negative values...
y = if(-0.000001*x*x+1, -0.000001*x*x+1,0)

Putting all together I would define a light material this way:

void light max
0
0
3 100 100 100

max brightfunc light
2 'if(-0.000001*Px*Px+1,-0.000001*Px*Px+1,0)' .
0
0

light cylinder pipe
0
0
7
0 0 0
2000 0 0
.125

void plastic white
0
0
5 1 1 1 0 0

white polygon base
0
0
12
0 -10 -3
0 10 -3
2000 10 -3
2000 -10 -3

if it is ok you should see half cylinder black and the other half with a
gradient. Remember to use really low -ds 0.01.
Ciao,
Giulio


NOTE: Unfortunately the uv trick doesn't work here, since you need light
and you cannot nest it into instances (and meshes).
Hopefully your light pipe follows a simple direction like Px, Py or
Pz... otherwise you need to change the equation a little (you may also
find another equation...).

From anthony.farrell at dit.ie  Fri Jun  3 12:28:32 2005
From: anthony.farrell at dit.ie (Anthony J. Farrell)
Date: Fri Jun  3 12:29:15 2005
Subject: [Radiance-general] RE: Light pipe
In-Reply-To: <01LP0SYCWFN09BLOZU@mail.dit.ie>
Message-ID: <!~!UENERkVCMDkAAQACAAAAAAAAAAAAAAAAABgAAAAAAAAACJWbgafz6UaL6G5F22Jwe8KAAAAQAAAAcsBDH0/sAEqY+C/wEvr/DAEAAAAA@dit.ie>

Thanks Marin for the photos and data from your experiments, this is most
interesting; I am carrying out experiments on hollow mirror lightpipes, I
note yours was a square duct.

I measured the intensity distribution of one emitting patch of a lightpipe
in 1988. The pipe used the 3M film, but had a square cross section and
glowing sides. 

Is it a solid light pipe or hollow, is it prismatic standard transparent?

See the intensity distribution and the luminance distribution along the full
lightpipe length at 

www.personal.psu.edu/mum13/lightpipe

These are interesting results. Have you published (Thesis, conference,
papers?)

The intensity distribution was measured approximately at the center of the
length of the pipe. 

Thanks again for this interesting overview of your work.


the simplest way to proceed is to create an equation that links a coordinate
to the radiance of the surface in form of a multiplier (hence the equation
is between [0,1]).
you may use a cal file or directly express it into the brightfunc
definition.


Guilio, thanks for the example, I'll try implement it for my cylindrical
light pipe.

Regards,

Anthony



-- 
This message has been scanned for content and 
viruses by the DIT Information Services MailScanner 
Service, and is believed to be clean.
http://www.dit.ie


From MMoeck at engr.psu.edu  Fri Jun  3 14:05:22 2005
From: MMoeck at engr.psu.edu (Martin Moeck)
Date: Fri Jun  3 14:06:15 2005
Subject: [Radiance-general] RE: Light pipe
Message-ID: <84F05BA9118BBD4A8FC6409808CE266C234442@ENGRMAIL2.engr.psu.edu>

Anthony, the results were never published. I was a grad. student back then and this was an independent study. It is a hollow prismatic standard lightpipe. I have a cylindrical lightpipe here and believe the results should be quite similar.
 
Martin
 
 
-----Original Message----- 
From: radiance-general-bounces@radiance-online.org on behalf of Anthony J. Farrell 
Sent: Fri 6/3/2005 6:28 AM 
To: radiance-general@radiance-online.org 
Cc: 
Subject: *** SPAM *** [Radiance-general] RE: Light pipe



	Thanks Marin for the photos and data from your experiments, this is most
	interesting; I am carrying out experiments on hollow mirror lightpipes, I
	note yours was a square duct.
	
	I measured the intensity distribution of one emitting patch of a lightpipe
	in 1988. The pipe used the 3M film, but had a square cross section and
	glowing sides.
	
	Is it a solid light pipe or hollow, is it prismatic standard transparent?
	
	See the intensity distribution and the luminance distribution along the full
	lightpipe length at
	
	www.personal.psu.edu/mum13/lightpipe
	
	These are interesting results. Have you published (Thesis, conference,
	papers?)
	
	The intensity distribution was measured approximately at the center of the
	length of the pipe.
	
	Thanks again for this interesting overview of your work.
	
	
	the simplest way to proceed is to create an equation that links a coordinate
	to the radiance of the surface in form of a multiplier (hence the equation
	is between [0,1]).
	you may use a cal file or directly express it into the brightfunc
	definition.
	
	
	Guilio, thanks for the example, I'll try implement it for my cylindrical
	light pipe.
	
	Regards,
	
	Anthony
	
	
	
	--
	This message has been scanned for content and
	viruses by the DIT Information Services MailScanner
	Service, and is believed to be clean.
	http://www.dit.ie
	
	
	_______________________________________________
	Radiance-general mailing list
	Radiance-general@radiance-online.org
	http://www.radiance-online.org/mailman/listinfo/radiance-general
	

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 5614 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20050603/7ada9202/attachment.bin
From MMoeck at engr.psu.edu  Sun Jun  5 17:08:24 2005
From: MMoeck at engr.psu.edu (Martin Moeck)
Date: Sun Jun  5 17:09:24 2005
Subject: [Radiance-general] RE: New rtcontrib program - mkillum conflict
Message-ID: <84F05BA9118BBD4A8FC6409808CE266C23444B@ENGRMAIL2.engr.psu.edu>

Hi,
 
After installing mksource and rcontrib, mkillum does not finish any more. There seems to be a conflict. Mkillum without -ab 1 works fine, but anything else is now disfunctional, meaning, it just runs without end. Can others please check if they have similar experiences?
 
Thanks
 
Martin Moeck
 
 
 
 
-----Original Message----- 
From: radiance-general-bounces@radiance-online.org on behalf of Greg Ward 
Sent: Thu 5/26/2005 3:17 PM 
To: Radiance general discussion 
Cc: 
Subject: [Radiance-general] New rtcontrib program



	Hi All,
	
	Somewhat related to the light pipe discussion, I have just completed 
	work on a new utility called "rtcontrib," for computing arbitrary 
	light contributions.  This is a culmination of earlier work I did on 
	rtrace to allow for the correct reporting of ray weights in trace 
	output (the new -oTW option), which I mentioned on radiance-dev a 
	little over a month ago.  The benefits of this facility will not 
	really be felt or known until a third (C-shell script) layer is added 
	for calculating daylight coefficients and the like.  Right now, the 
	simplest thing you can do with rtcontrib is arrive at a set of images 
	corresponding to the different light sources in your scene, such that 
	you can recombine them with dimming multipliers to simulate lighting 
	controls.  An example of this is given in the man page, attached.
	
	Rtcontrib can also be used by the more adventurous among you to 
	compute input/output relations for devices such as light pipes and 
	shading systems, although I have yet to test such an approach, 
	myself.  I expect we'll be learning more about what one can do with 
	this in the coming months, and I hope to work with Christoph Reinhart 
	and John Mardaljevic on standardizing daylight coefficient 
	calculations for starters.
	
	-Greg
	
	---------
	
	RTCONTRIB(1)                                                      
	RTCONTRIB(1)
	
	
	
	NAME
	        rtcontrib - compute contributions in a RADIANCE scene
	
	SYNOPSIS
	        rtcontrib  [ -n nprocs ][ -e expr ][ -f source ][ -o fspec ]
	[ -b binv ]
	        -m mod ..  [ $EVAR ] [ @file ] [ rtrace options ] octree
	
	DESCRIPTION
	        Rtcontrib computes ray contributions  (i.e.,  color  
	coefficients)  for
	        objects  whose  modifiers  are named in one or more -m 
	settings.  These
	        modifiers are usually materials associated with light  
	sources  or  sky
	        domes, and must directly modify some geometric primitives to 
	be consid-
	        ered in the output.  The output of rtcontrib has many  
	potential  uses.
	        Source contributions can be used as components in linear 
	combination to
	        reproduce any desired variation, e.g., simulating lighting 
	controls  or
	        changing  sky  conditions  via  daylight coefficients.  More 
	generally,
	        rtcontrib can be used to compute arbitrary  input-output  
	relationships
	        in  optical  systems,  such  as  luminaires,  light  pipes, 
	and shading
	        devices.
	
	        Rtcontrib calls rtrace(1) to calculate the contributions for 
	each input
	        ray,  and the output tallies are sent to one or more files 
	according to
	        the -o specification.  If an output specification contains a 
	"%s"  for-
	        mat,  this will be replaced by the modifier name.  The -b 
	option may be
	        used to further define a "bin number" within each object if 
	finer reso-
	        lution is needed, and this will be applied to a "%d" format 
	in the out-
	        put file specification if present.  The actual bin number  
	is  computed
	        at  run  time  based  on  ray  direction  and  surface 
	intersection, as
	        described below.  The most recent -b and -o options to the 
	left of each
	        -m  setting  affect only that modifier.  (The ordering of 
	other options
	        is unimportant.)
	
	        If a -b expression is defined for a particular modifier, the 
	bin number
	        will  be  evaluated  at run time for each ray contribution 
	from rtrace.
	        Specifically, each ray's world intersection point will be  
	assigned  to
	        the  variables Px, Py, and Pz, and the normalized ray 
	direction will be
	        assigned to Dx, Dy, and Dz.  These parameters may be combined 
	with def-
	        initions given in -e arguments and files read using the -f 
	option.  The
	        computed bin value will be rounded to the nearest whole  
	number.   This
	        mechanism  allows the user to define precise regions or 
	directions they
	        wish to accumulate, such as  the  Tregenza  sky  
	discretization,  which
	        would  be  otherwise  impossible to specify as a set of 
	RADIANCE primi-
	        tives.  The rules and predefined functions available for 
	these  expres-
	        sions are described in the rcalc(1) man page.
	
	        If  no  -o  specification is given, results are written on 
	the standard
	        output in order of modifier (as given on the  command  line)  
	then  bin
	        number.  Concatenated data is also sent to a lone output file 
	(i.e., an
	        initial -o specification without formatting strings).  If a "%
	s" format
	        appears  but  no  "%d" in the -o specification, then each 
	modifier will
	        have its own output file, with multiple values per record in  
	the  case
	        of  a  non-zero  -b  definition.  If a "%d" format appears 
	but no "%s",
	        then each bin will get its own output file, with  modifiers  
	output  in
	        order  in each record.  For text output, each RGB coefficient 
	triple is
	        separated by a tab, with a newline at the end of each ray 
	record.   For
	        binary  output  formats,  there is no such delimiter to mark 
	the end of
	        each record.
	
	        Input and output format defaults to plain text, where each 
	ray's origin
	        and  direction (6 real values) are given on input, and one 
	line is pro-
	        duced per output file per ray.  Alternative data 
	representations may be
	        specified  by  the  -f[io] option, which is described in the 
	rtrace man
	        page along with the associated -x and -y resolution 
	settings.  In  par-
	        ticular, the color ('c') output data representation together 
	with posi-
	        tive dimensions for -x and -y will  produce  an  
	uncompressed  RADIANCE
	        picture, suitable for manipulation with pcomb(1) and related 
	tools.
	
	        If  the  -n  option  is specified with a value greater than 
	1, multiple
	        rtrace processes will be used to accelerate  computation  on  
	a  shared
	        memory  machine.  Note that there is no benefit to using more 
	processes
	        than there are local CPUs available to do the work, and  the  
	rtcontrib
	        process itself may use a considerable amount of CPU time.
	
	        Options  may be given on the command line and/or read from 
	the environ-
	        ment and/or read from a file.  A command argument beginning 
	with a dol-
	        lar  sign  ('$')  is  immediately replaced by the contents of 
	the given
	        environment variable.  A command argument beginning  with  
	an  at  sign
	        ('@') is immediately replaced by the contents of the given file.
	
	EXAMPLES
	        To  compute  the  proportional  contributions  from sources 
	modified by
	        "light1" vs. "light2" on a set of illuminance values:
	
	          rtcontrib -I+ @render.opt -o c_%s.dat -m light1 -m light2 \
	         scene.oct < test.dat
	
	        To generate a pair of images corresponding to these two 
	lights' contri-
	        butions:
	
	          vwrays -ff -x 1024 -y 1024 -vf best.vf | rtcontrib -ffc \
	         `vwrays -d -x 1024 -y 1024 -vf best.vf` @render.opt \
	          -o c_%s.pic -m light1 -m light2 scene.oct
	
	        These images may then be recombined using the desired outputs 
	of light1
	        and light2:
	
	          pcomb  -c  100  90  75  c_light1.pic  -c 50 55 57 
	c_light2.pic \
	         > combined.pic
	
	        To compute an array of illuminance contributions according  
	to  a  Tre-
	        genza sky:
	
	          rtcontrib -b tbin -o sky.dat -m skyglow -b 0 -o ground.dat \
	          -m groundglow @render.opt -f tregenza.cal scene.oct < test.dat
	
	AUTHOR
	        Greg Ward
	
	SEE ALSO
	        cnt(1), getinfo(1), pcomb(1), pfilt(1), ra_rgbe(1), rcalc(1), 
	rpict(1),
	        rtrace(1), vwrays(1), ximage(1)
	
	
	
	RADIANCE                            5/25/05                       
	RTCONTRIB(1)
	
	
	_______________________________________________
	Radiance-general mailing list
	Radiance-general@radiance-online.org
	http://www.radiance-online.org/mailman/listinfo/radiance-general
	

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 17350 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20050605/1ed010b1/attachment-0001.bin
From gregoryjward at gmail.com  Sun Jun  5 21:48:09 2005
From: gregoryjward at gmail.com (Greg Ward)
Date: Sun Jun  5 21:48:52 2005
Subject: [Radiance-general] RE: New rtcontrib program - mkillum conflict
In-Reply-To: <84F05BA9118BBD4A8FC6409808CE266C23444B@ENGRMAIL2.engr.psu.edu>
References: <84F05BA9118BBD4A8FC6409808CE266C23444B@ENGRMAIL2.engr.psu.edu>
Message-ID: <7AC14905-4424-4FF5-9845-4115C684828E@gmail.com>

Hi Martin,

Rtcontrib required some rather extensive changes to the diffuse  
interreflection methods, which definitely introduced one or two bugs  
that I have since fixed.  You need to make sure you have the latest  
HEAD release, as I suspect you picked up a buggy version of src/rt/ 
ambcomp.c or similar.  If you recompile with last night's HEAD and  
still have problems, send me a list of the options you're using in  
mkillum and I'll see if I can figure it out.  I did my own test runs  
this morning to check that it's behaving correctly, and I couldn't  
find anything wrong.

-Greg

> From: "Martin Moeck" <MMoeck@engr.psu.edu>
> Date: June 5, 2005 8:08:24 AM PDT
>
> Hi,
>
> After installing mksource and rcontrib, mkillum does not finish any  
> more. There seems to be a conflict. Mkillum without -ab 1 works  
> fine, but anything else is now disfunctional, meaning, it just runs  
> without end. Can others please check if they have similar experiences?
>
> Thanks
>
> Martin Moeck
>

From ap.huangwx at archi.kyoto-u.ac.jp  Mon Jun  6 04:56:54 2005
From: ap.huangwx at archi.kyoto-u.ac.jp (Huangwx@Kyoto-Univ.)
Date: Mon Jun  6 04:57:36 2005
Subject: [Radiance-general] About Desktop Radiance
Message-ID: <002e01c56a43$65303b60$1f7af90a@kyotovue4o802h>

Hi, 

I want to use Radiance on a WindowsXP system. I know that the Desktop Radiance has some problems, but the scene I want to render is quit simple, so I think I can handle the text-based input files, without the AutoCAD GUI.

I found that in the "Desktop Radiance Overview", it is said:

"For individuals who are familiar with the standard Radiance program, the advanced features that are not currently part of the Desktop Radiance system can be accessed through the MS-DOS batch files by modifying the original text-based input."

So my question is can all Radiance features be accessed in this way? Is it stable and reliable?

Thanks.

Yours,

Huang Weixin


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20050606/b4f85279/attachment.htm
From tarik.rahman at ed.ac.uk  Mon Jun  6 14:28:07 2005
From: tarik.rahman at ed.ac.uk (Tarik Rahman)
Date: Mon Jun  6 14:28:42 2005
Subject: [Radiance-general] Illuminating objects with a light probe
Message-ID: <1118060887.42a4415743f7e@sms.ed.ac.uk>


Hi there

When trying to illuminate objects with a light probe made from an indoor scene
is it best to generate a cubic cross map in HDRShop and then map each of the 6
sides onto the room walls as 'glow' textures? Because as it is a small scene
with small intense sources, when I use genbox, I never know which is the best
size box to illuminate the objects, i.e. get them in the right position as if
w.r.t. the light source.
Is the best option to use mksource? If I need to map my light probe onto a
distant glow source rather than a large box, what should the geometric
description for that distant glow source be? When creating a mask to combine
probe images in HDRShop, since there is no reflection of a camera/camerman in
the probe (it's a simulation picture rendered with Radiance) what other
artefacts is the mask needed for?

Thanks for any help

Tarik
--
Tarik Rahman
PhD student, Institute of Perception, Action and Behaviour
School of Informatics
University of Edinburgh

From tiago at tkh.att.ne.jp  Mon Jun  6 15:54:01 2005
From: tiago at tkh.att.ne.jp (Santiago Torres)
Date: Mon Jun  6 15:50:26 2005
Subject: [Radiance-general] About Desktop Radiance
In-Reply-To: <002e01c56a43$65303b60$1f7af90a@kyotovue4o802h>
Message-ID: <ABEIIOCILNBBDDEPEPICKEKBCFAA.tiago@tkh.att.ne.jp>

Hello,
In my experience, Desktop Radiance is quite stable if you don`t use the CAD
interface. But it doesn`t include the last release, and not all programs are
ported. Depending on what you plan to do, this could be a problem, but for
simple renderings, it should work. (the Radiance tutorial, for example,
works fine like in the manual)
You could also install the last release on Cygwin using Francesco Anselmo`s
binaries. You can find the information in the downloads page of
radiance-online.org.
Finally, the option of compiling Radiance on windows using the Borland
compiler was mentioned earlier in the list, but I don`t know how that works,
you can check in the list`s archives (also in radiance-online).
Hope this helps.
Regards,

Santiago


  -----Original Message-----
  From: radiance-general-bounces@radiance-online.org
[mailto:radiance-general-bounces@radiance-online.org]On Behalf Of
Huangwx@Kyoto-Univ.
  Sent: Monday, June 06, 2005 11:57 AM
  To: radiance-general@radiance-online.org
  Subject: [Radiance-general] About Desktop Radiance


  Hi,

  I want to use Radiance on a WindowsXP system. I know that the Desktop
Radiance has some problems, but the scene I want to render is quit simple,
so I think I can handle the text-based input files, without the AutoCAD GUI.

  I found that in the "Desktop Radiance Overview", it is said:

  "For individuals who are familiar with the standard Radiance program, the
advanced features that are not currently part of the Desktop Radiance system
can be accessed through the MS-DOS batch files by modifying the original
text-based input."

  So my question is can all Radiance features be accessed in this way? Is it
stable and reliable?

  Thanks.

  Yours,

  Huang Weixin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20050606/f76226f3/attachment.html
From tiago at tkh.att.ne.jp  Mon Jun  6 16:41:07 2005
From: tiago at tkh.att.ne.jp (Santiago Torres)
Date: Mon Jun  6 16:37:26 2005
Subject: [Radiance-general] Illuminating objects with a light probe
In-Reply-To: <1118060887.42a4415743f7e@sms.ed.ac.uk>
Message-ID: <ABEIIOCILNBBDDEPEPICCEKCCFAA.tiago@tkh.att.ne.jp>

Hello,

> When trying to illuminate objects with a light probe made from an indoor
scene
> is it best to generate a cubic cross map in HDRShop and then map each of
the 6
> sides onto the room walls as 'glow' textures? Because as it is a small
scene
> with small intense sources, when I use genbox, I never know which is the
best
> size box to illuminate the objects, i.e. get them in the right position as
if
> w.r.t. the light source.

If you are going to move the viewpoint around, the closer the geometry of
the light probes to the scene geometry, the better. In that case, I guess
the box should have the size of the room. However, this depends on where was
the camera (or mirrored ball, or viewpoint) when getting the probes.

> Is the best option to use mksource? If I need to map my light probe onto a
> distant glow source rather than a large box, what should the geometric
> description for that distant glow source be?

mksource can help improve results and speed, specially if you have small
sources.
The description is vey similar, only you map the probe onto a source object
like this:

  void colorpict sourcemap
  7 red green blue input_image.hdr fisheye.cal fish_u fish_v
  0
  0

  sourcemap glow sourceglow
  0
  0
  4 1 1 1 0

  sourceglow source source_1
  0
  0
  4 0 1 0 180

This works for hemispheric light probes and the result will be maped in the
hemisphere +Y.
If you look into fisheye.cal:

  fish_u = .5 + Dx/fish_Rxz * fish_Ry;
  fish_v = .5 + Dz/fish_Rxz * fish_Ry;

  fish_Rxz = sqrt(Dx*Dx + Dz*Dz);
  fish_Ry = acos(Dy) / PI;

the very last "/PI" works for hemispheric probes. If you are using a 360
deg. probe, you should change this for "/(2*PI)", and the last line in the
desciption for "4 0 1 0 360".

> When creating a mask
> to combine
> probe images in HDRShop, since there is no reflection of a
> camera/camerman in
> the probe (it's a simulation picture rendered with Radiance) what other
> artefacts is the mask needed for?

I`m sorry I cannot help with this one, I haven`t used it.
Regards,

Santiago



>
> Thanks for any help
>
> Tarik
> --
> Tarik Rahman
> PhD student, Institute of Perception, Action and Behaviour
> School of Informatics
> University of Edinburgh
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>



From Christoph.Reinhart at nrc-cnrc.gc.ca  Tue Jun  7 01:59:14 2005
From: Christoph.Reinhart at nrc-cnrc.gc.ca (Reinhart, Christoph)
Date: Tue Jun  7 01:59:58 2005
Subject: [Radiance-general] 10 minutes of your time: Survey on the role of
	daylighting in sus tainable design
Message-ID: <10C94843061E094A98C02EB77CFC328714F5E117@nrcmrdex1d.imsb.nrc.ca>

Dear colleague,

You are invited to participate in an online survey on the role of daylighting in sustainable building design practice. The survey is carried out as part of an international effort led by the National Research Council Canada (NRC) and Lawrence Berkeley National Laboratory (LBNL) to develop a new online design guide that will help design practitioners with an interest in daylighting and sustainable design to effectively implement daylighting within their projects. The survey is administered by the NRC  and will be opened until July 8th 2005. The outcome of the survey will be used to: 

*	understand which daylight performance indicators, rules-of-thumb, and design tools practitioners are currently using to integrate daylighting 

*	to identify the additional information needed by design practitioners with an interest in daylighting, beyond what is in the current generation of design guides 

*	to propose content and format for a daylighting design guide that addresses these needs.

We would like you to fill out the following online questionnaire according to your daylighting design experience. Please respond to all of the items as openly and honestly as possible. There are no right or wrong answers; it is only your opinions that are important.

If you are interested in participating in this survey, please go to http://irc.nrc-cnrc.gc.ca/ie/lighting/daylight/docs/OriginalSurveyInvitation.html <http://irc.nrc-cnrc.gc.ca/ie/lighting/daylight/docs/OriginalSurveyInvitation.html> . Thank you in advance for your participation.

Should you have any concerns, questions or suggestions, please contact Dr. Christoph Reinhart at  <mailto:christoph.reinhart@nrc-cnrc.gc.ca> christoph.reinhart@nrc-cnrc.gc.ca or +1(613)993 9703. 

We would appreciate it if you circulated this invitation within your company/department as the success of this initiative clearly depends on the number of participating design professionals. 
 
Christoph Reinhart, Ph.D.                        
Associate Research Officer                     National Research Council Canada         Institute for Research in Construction
Adjunct Professor                                    McGill University                                      School of Architecture
1200 Montreal Road M-24, Ottawa         Ontario K1A 0R6, Canada 
tel: (613) 993-9703                                  fax: (613) 954 3733                                  <blocked::mailto:christoph.reinhart@nrc-cnrc.gc.ca> christoph.reinhart@nrc-cnrc.gc.ca 
 
Lightswitch Wizard (initial design)            <blocked::http://www.buildwiz.com/> www.buildwiz.com  
DAYSIM (expert software)                         <blocked::http://www.daysim.com/> www.daysim.com  
Radiance Workshop 2005                         <blocked::http://irc.nrc-cnrc.gc.ca/ie/light/RadianceWorkshop2005> http://irc.nrc-cnrc.gc.ca/ie/light/RadianceWorkshop2005 
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20050606/e915b965/attachment-0001.htm
From jelle.feringa at ezct.net  Wed Jun  8 16:28:34 2005
From: jelle.feringa at ezct.net (Jelle Feringa / EZCT Architecture & Design Research)
Date: Wed Jun  8 16:25:41 2005
Subject: [Radiance-general] relation between area & rpict settings
Message-ID: <mailman.7.1118240740.370.radiance-general@radiance-online.org>

Hi all,
 
I'm rendering out an animation with Radiance which basically is a dissolving
cube.
 
Thing is that it's a bit pointless to use similar settings for a
Cornell-like box almost closed box, than a cube which is almost completely
open. So in order to get a more intelligent rpict settings based on the open
surface area  would be a good start. Now my question would be whether
possible rad (don't think so) takes this relation into account, or has
anyone another suggestion of doing so. 
 
Right now, I'm making a couple of rough intermediary tests, try to come up
with a couple of reasonable settings, and interpolate through them, but it
would be cool to do this in a more formal manner, such that will be an
advantage for later on since it could be quite useful.
 
Cheers,
 
Jelle.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20050608/cd5307b5/attachment.html
From gregoryjward at gmail.com  Wed Jun  8 20:24:22 2005
From: gregoryjward at gmail.com (Greg Ward)
Date: Wed Jun  8 20:25:04 2005
Subject: [Radiance-general] relation between area & rpict settings
In-Reply-To: <42a700ef.43b2bc58.0d81.07e8SMTPIN_ADDED@mx.gmail.com>
References: <42a700ef.43b2bc58.0d81.07e8SMTPIN_ADDED@mx.gmail.com>
Message-ID: <0378947E-BC21-4B41-A2C3-A2BB6702B57F@gmail.com>

Hi Jelle,

What would be useful is a web link to some of your images, so we can  
see your model and the artifacts you are facing.

-Greg

> From: "Jelle Feringa / EZCT Architecture & Design Research"  
> <jelle.feringa@ezct.net>
> Date: June 8, 2005 7:28:34 AM PDT
> Hi all,
>
> I?m rendering out an animation with Radiance which basically is a  
> dissolving cube
>
> Thing is that it?s a bit pointless to use similar settings for a  
> Cornell-like box almost closed box, than a cube which is almost  
> completely open. So in order to get a more intelligent rpict  
> settings based on the open surface area  would be a good start. Now  
> my question would be whether possible rad (don?t think so) takes  
> this relation into account, or has anyone another suggestion of  
> doing so.
>
> Right now, I?m making a couple of rough intermediary tests, try to  
> come up with a couple of reasonable settings, and interpolate  
> through them, but it would be cool to do this in a more formal  
> manner, such that will be an advantage for later on since it could  
> be quite useful.
>
> Cheers,
>
> Jelle.

From jelle.feringa at ezct.net  Thu Jun  9 12:56:46 2005
From: jelle.feringa at ezct.net (Jelle Feringa / EZCT Architecture & Design Research)
Date: Thu Jun  9 12:53:15 2005
Subject: [Radiance-general] rpict settings & open area  relation
Message-ID: <mailman.8.1118314395.370.radiance-general@radiance-online.org>

Dear Greg,

I uploaded some images to: www.ezct.net/radiance/rpict_area_settings/
Currently I'm using the following rpict parameters:

rpict.exe -vf render.vf -ab 3 -ar 512 -ad 512 -ps 1 -as 512 -x 1500 -y 1500

which is pretty basic, but as you'll see in the last frame is fast and
artifact free, whereas there's little open area in the initial frame, which
of course leads to artifacts. 

I'm rendering out a animation which shows a cube dissolving in space, each
frame cuts out a certain area of the box, slowly leaving it to dissolve.
I figure having the open area parameter drive the Radiance parameters would
be a good approach, wouldn't it?

Cheers,

Jelle.

******
Hi Jelle,

What would be useful is a web link to some of your images, so we can  
see your model and the artifacts you are facing.

-Greg
******


From gregoryjward at gmail.com  Thu Jun  9 19:53:54 2005
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu Jun  9 19:54:29 2005
Subject: [Radiance-general] rpict settings & open area  relation
In-Reply-To: <42a81fc6.370a7586.1a65.ffffeec8SMTPIN_ADDED@mx.gmail.com>
References: <42a81fc6.370a7586.1a65.ffffeec8SMTPIN_ADDED@mx.gmail.com>
Message-ID: <57E59743-E749-4639-AFD4-EC8722A8179D@gmail.com>

Hi Jelle,

Yes, it definitely helps to know what we're talking about.  1000  
words/picture, at least!

The problem with the initial frames is that there aren't enough  
ambient divisions to find the few and tiny holes you have.  I  
recommend setting a much larger value for -ad at the beginning, and  
you can gradually relax this as you get more holes in your space.   
Just guessing, I'd say you need at least -ad 4096 for the initial  
frame, which will take 5 times longer to compute.  (I don't think you  
need to increase -as -- 512 should be enough.)

An alternate approach is to use illums in your openings with the  
outside distribution mapped to them, as described in Tutorial 0  
(Chapter 1 of RwR which is available online if you don't have it from  
<http://radsite.lbl.gov/radiance/book>).  The problem is that you'll  
probably want to switch at some point from using illum's to just open  
holes as you have them once you get a certain number and it stops  
paying off in the calculation.  With illum's, you can decrease -ab 3  
to -ab 2 and get the same result.

-Greg

> From: "Jelle Feringa / EZCT Architecture & Design Research"  
> <jelle.feringa@ezct.net>
> Date: June 9, 2005 3:56:46 AM PDT
>
> Dear Greg,
>
> I uploaded some images to: www.ezct.net/radiance/rpict_area_settings/
> Currently I'm using the following rpict parameters:
>
> rpict.exe -vf render.vf -ab 3 -ar 512 -ad 512 -ps 1 -as 512 -x 1500  
> -y 1500
>
> which is pretty basic, but as you'll see in the last frame is fast and
> artifact free, whereas there's little open area in the initial  
> frame, which
> of course leads to artifacts.
>
> I'm rendering out a animation which shows a cube dissolving in  
> space, each
> frame cuts out a certain area of the box, slowly leaving it to  
> dissolve.
> I figure having the open area parameter drive the Radiance  
> parameters would
> be a good approach, wouldn't it?
>
> Cheers,
>
> Jelle.

From jpothara at uccs.edu  Tue Jun 14 19:37:17 2005
From: jpothara at uccs.edu (Jay)
Date: Tue Jun 14 19:38:08 2005
Subject: [Radiance-general] Average luminance calculation
Message-ID: <42AF15CD.3010205@uccs.edu>

Hi people,
I am trying to calculate contrast for images. I am referring to paper 
(http://diuf.unifr.ch/courses03-04/imaging/simoncelli.pdf). This paper 
suggest that to calculate contrast luminance is first needs to be 
calculated.
I am calculating lumninance using the formula.
L_w = exp[ 1 / N( sum[ log( delta + L_w ( x, y ) ) ] ) ]

Where:

  * L_w - log-average luminance
  * N - number of pixels in the image
  * delta - a small factor to avoid problems with black pixels
  * L_w ( x, y ) - the world space luminance for pixel ( x, y )

where log has base e.

I am using the image from http://www.cacs.louisiana.edu/~cice/lal/. i 
cant get the luminance values mentioned on the website.
Can someone please tell me where am i going wrong.

thanks
Jay

From gregoryjward at gmail.com  Tue Jun 14 20:44:13 2005
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Tue Jun 14 20:44:55 2005
Subject: [Radiance-general] Average luminance calculation
In-Reply-To: <42AF15CD.3010205@uccs.edu>
References: <42AF15CD.3010205@uccs.edu>
Message-ID: <A08E5BFA-813D-44F5-960F-3AA4BE04737A@gmail.com>

Hi Jay,

You have to offer us some clues as to how you are attempting this  
calculation.  The website you give shows a bunch of JPEG thumbnails.   
Are you converting those?  It seems that the author of this page is  
converting them without considering gamma, then computing the log of  
the non-linear gray values, which is basically nonsense.  However, in  
the interest of reproducing their results, you can use:

     % djpeg egret2.jpg | ra_ppm -r -g 1 \
         | pvalue -h -H -d -b | rcalc -e '$1=log($1)' | total -m

Using the egret pictures, this then gives:

     -2.08354495

To get the final log-average luminance, simply apply the exponent  
function:

     % ev 'exp(-2.0835)'

This yeilds:

     0.124493721

Not exactly the 0.1212 value they give on the website, but close.   
Note that I didn't use a delta value in my calculation, but adding  
one should raise this value rather than lower it.  A more intelligent  
application of log averaging would apply a gamma to get back to a  
linear color space, e.g.:

     % djpeg egret2.jpg | ra_ppm -r -g 2.4 \
         | pvalue -h -H -d -b | rcalc -e '$1=log($1)' | total -m

Apply the exp() function to this result gives a much smaller result:

     0.00687406256

-Greg

> From: Jay <jpothara@uccs.edu>
> Date: June 14, 2005 10:37:17 AM PDT
>
> Hi people,
> I am trying to calculate contrast for images. I am referring to  
> paper (http://diuf.unifr.ch/courses03-04/imaging/simoncelli.pdf).  
> This paper suggest that to calculate contrast luminance is first  
> needs to be calculated.
> I am calculating lumninance using the formula.
> L_w = exp[ 1 / N( sum[ log( delta + L_w ( x, y ) ) ] ) ]
>
> Where:
>
>  * L_w - log-average luminance
>  * N - number of pixels in the image
>  * delta - a small factor to avoid problems with black pixels
>  * L_w ( x, y ) - the world space luminance for pixel ( x, y )
>
> where log has base e.
>
> I am using the image from http://www.cacs.louisiana.edu/~cice/lal/.  
> i cant get the luminance values mentioned on the website.
> Can someone please tell me where am i going wrong.
>
> thanks
> Jay

From jpothara at uccs.edu  Tue Jun 14 21:48:29 2005
From: jpothara at uccs.edu (Jay)
Date: Tue Jun 14 21:49:21 2005
Subject: [Radiance-general] Average luminance calculation
Message-ID: <42AF348D.2090607@uccs.edu>

Hi Greg,
I am using OpenCV to do the image manipulation. I am using c to do the 
calculation. following is the code that i had written.
I know its of topic -use of opencv. but i couldnt find any other useful 
information/help thats why i posted my query on the mailing list.
I am basically caluclating the log of pixel values. and hten dividing it 
by no of pixels in an image. and finally taking exponent of that.
Thanks for the prompt reply.
Jay
/////////////////////////////////////////////////////////CODE 
SNIPPET-OPENCV,C///////////////////////////////////////
/for( y = 1; y <height ; y++ )
        {
            for( x = 1; x < width; x++ )
            {
               uchar temp_blue =(uchar)(src->imageData + 
src->widthStep*y)[x*3];
               uchar temp_green = (uchar)(src->imageData + 
src->widthStep*y)[x*3+1];
               uchar temp_red  = (uchar)(src->imageData + 
src->widthStep*y)[x*3+2];
              
               temp = (0.27*temp_red) + (0.67*temp_green) + 
(0.06*temp_blue);
               temp1 = log10(temp);
               temp2 = log(temp);
              
               luminance_10 = temp1 + luminance_10;
               luminance_e = temp2 + luminance_e;            
            }
        }
      
        int pixel = src->width * src->height;
        printf("Width-%d,Height-%d\n",width,height);
        double luminance10_per_pixel = (luminance_10/pixel);
        double luminanceE_per_pixel = (luminance_e/pixel);
        // double image_key = pow (pixel,luminance);
        printf("NO of pixels ->%d\n\n",pixel);
        //luminance values for log10
        printf("----luminance values for log10------\n");
        //printf("Luminance  ->%f\n",luminance);
        //printf("luminance/pixel ->%f\n",value);
        printf("exp(luminance10)/pixel->%f\n",exp(luminance_10)/pixel);
        
printf("exp(luminance10/pixel)->%f\n\n\n",exp(luminance10_per_pixel));
        //luminance values for loge
        printf("----luminance values for loge------\n");
        printf("exp(luminanceE)/pixel->%f\n",exp(luminance_e)/pixel);
        printf("exp(luminanceE/pixel)->%f\n",exp(luminanceE_per_pixel));/

From ap.huangwx at archi.kyoto-u.ac.jp  Thu Jun 16 04:11:56 2005
From: ap.huangwx at archi.kyoto-u.ac.jp (Huangwx@Kyoto-Univ.)
Date: Thu Jun 16 04:12:50 2005
Subject: [Radiance-general] How to map a texture?
Message-ID: <000c01c57218$c5a25960$1f7af90a@kyotovue4o802h>

Hi, Dear friends:

I am trying to map pictures to simulate the texture of wood, carpet and so on.
I use ra_tiff to convert a .tif picture into a .pic picture, and then use colorpict to map it such as:

void colorpict image01
9 clip_r clip_g clip_b 02.pic picture.cal frac(U) frac(V) -s 500
0
0

image01 plastic wood_mat
0
0
5 .8 .8 .8 .02 0

I found that the properties of plastic material like "5 .8 .8 .8 .02 0" influence the result greatly. how should I set them properly?

Thanks a lot.

Yours,

Huang
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20050616/6bf4279a/attachment.htm
From gregoryjward at gmail.com  Thu Jun 16 19:20:21 2005
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu Jun 16 19:21:11 2005
Subject: [Radiance-general] How to map a texture?
In-Reply-To: <000c01c57218$c5a25960$1f7af90a@kyotovue4o802h>
References: <000c01c57218$c5a25960$1f7af90a@kyotovue4o802h>
Message-ID: <A9C9E9DB-78FC-48C3-8B42-FA4E92E8786E@gmail.com>

Hi Huang,

Picture normalization is spelled out in the sidebar on page 262 of  
"Rendering with Radiance"

     http://radsite.lbl.gov/radiance/book/

I have reprinted the sidebar below for your convenience:

There are generally two cases in which pictures are applied as  
patterns. In the first case,
the picture corresponds to a piece of artwork or some printed  
material, and only a sin-
gle copy of it is mapped into the scene. The type of picture that is  
appropriate is
usually one whose pixel values correspond to reflectances, so the  
average value will vary
depending on average reflectance. The clip() function is often used  
for value map-
ping to ensure that reflectances do not exceed 1. In the second case,  
the picture
corresponds to a repeating pattern on some larger surface, such as a  
tiled floor. The
type of picture appropriate is usually normalized to an average value  
of 1, so that the
material primitive will carry the average reflectance. The noop()  
function is usually
specified for value mapping, since the reflectance multipliers may  
take on arbitrary
values (corresponding to highlights, for instance). Be aware, when  
you are using these
files, of which type of picture you have. This is most easily  
determined by displaying
them with ximage or some similar display program. If about half their  
values are
greater than 1 (washed out so ?e?1 makes them look about right),  
they are normal-
ized images for tiling. (See the normpat manual page on the CD-ROM  
for additional
information.)

The normpat man page may be found here:

     http://radsite.lbl.gov/radiance/man_html/normpat.1.html

Additional information about mapping picture coordinates on page 259  
of RwR.

-Greg

> From: "Huangwx@Kyoto-Univ." <ap.huangwx@archi.kyoto-u.ac.jp>
> Date: June 15, 2005 7:11:56 PM PDT
>
> Hi, Dear friends:
>
> I am trying to map pictures to simulate the texture of wood, carpet  
> and so on.
> I use ra_tiff to convert a .tif picture into a .pic picture, and  
> then use colorpict to map it such as:
>
> void colorpict image01
> 9 clip_r clip_g clip_b 02.pic picture.cal frac(U) frac(V) -s 500
> 0
> 0
>
> image01 plastic wood_mat
> 0
> 0
> 5 .8 .8 .8 .02 0
>
> I found that the properties of plastic material like "5 .8 .8 .8 . 
> 02 0" influence the result greatly. how should I set them properly?
>
> Thanks a lot.
>
> Yours,
>
> Huang
>

From MdelaFuente at wmtao.com  Fri Jun 17 18:15:52 2005
From: MdelaFuente at wmtao.com (Mark de la Fuente)
Date: Sat Jun 18 17:38:40 2005
Subject: [Radiance-general] Modeling Challenge
Message-ID: <s2b2b10a.077@wmtao.com>

Hi Radiance group.
 
I've got a modeling problem.  I'm trying to accurately create this... but so far all I've managed to do is waste a bunch of time.
 
http://members.fortunecity.com/dela/
 
(note the bottom image is a radiance image)
 
Currently I have two individual cylinders each as a rad file.  Then I have a scene file that xforms these into a ~16,000 unit array.  That file is then rotated and transformed onto the building by an additional scene file, which is then called by oconv by a "rad" like script.
 
It works, but it takes a very long time to oconv (I guess b/c it has to run xform 16000 times and Radiance on Cygwin is very slow at this based on benchmark results) and so far I have been unable to create an actual rendering for some reason.
 
What other options might work for something like this?  I've thought about using a mix of void and metal similar to Georg Mischler's perforated metal technique.  Would this be more efficient?
 
My only concern about a flat plane is that you would not get the same "cut off" as the 3D grid.  However, given the small scale of the grid to the large scale of the building, this is perhaps negligible.
 
{
	perforate.cal
    Perforation function for approximately horizontal sufaces,
	for use in a mixfunc. Foreground is solid, background the holes.
	Set background to empty for a true perforation, or to a different
	material for polka dots.

	Relative hole size is determined by A1.
    Size of single circle is 1 - scale as required (eg. 0.05m).

	x_hole cuts holes in x-direction (through the y-z plane)
	y_hole cuts holes in y-direction (through the x-z plane)
	z_hole cuts holes in z-direction (through the x-y plane)

    Georg Mischler 30. 04. 1993
}

`xn = mod(Px, 1) - 0.5;
`yn = mod(Py, 1) - 0.5;
`zn = mod(Pz, 1) - 0.5;

`outofcirc(x, y, r) = if(sqrt(x*x + y*y) - r, 1, 0);

z_hole = `outofcirc(`xn, `yn, A1);
x_hole = `outofcirc(`yn, `zn, A1);
y_hole = `outofcirc(`zn, `xn, A1);

{ end of perforate.cal }

Is there anything similar that would create the type of grid I'm looking for?
 
Thanks for any assistance!
 
Mark de la Fuente

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20050617/16ae0b6d/attachment.html
From gregoryjward at gmail.com  Sat Jun 18 18:13:45 2005
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Sat Jun 18 18:14:41 2005
Subject: [Radiance-general] Modeling Challenge
In-Reply-To: <s2b2b10a.077@wmtao.com>
References: <s2b2b10a.077@wmtao.com>
Message-ID: <58DC6471-8DB7-4F34-B9A6-8B31647D7501@gmail.com>

Hi Mark,

There is a file called grating.cal that models depth of 3-D grids and  
uses a BRTDfunc type to approximate the ensemble behavior.  I posted  
it in response to a similar request from Richard Clibborn:

     http://www.radiance-online.org/pipermail/radiance-general/2005- 
February/002438.html

If you want the actual appearance of the blinds, rather than simply  
its transmission at a distance, then a mixfunc is required.  I don't  
have time to write one right now, or even modify Georg's.

-Greg


> From: "Mark de la Fuente" <MdelaFuente@wmtao.com>
> Date: June 17, 2005 9:15:52 AM PDT
>
> Hi Radiance group.
>
> I've got a modeling problem.  I'm trying to accurately create  
> this... but so far all I've managed to do is waste a bunch of time.
>
> http://members.fortunecity.com/dela/
>
> (note the bottom image is a radiance image)
>
> Currently I have two individual cylinders each as a rad file.  Then  
> I have a scene file that xforms these into a ~16,000 unit array.   
> That file is then rotated and transformed onto the building by an  
> additional scene file, which is then called by oconv by a "rad"  
> like script.
>
> It works, but it takes a very long time to oconv (I guess b/c it  
> has to run xform 16000 times and Radiance on Cygwin is very slow at  
> this based on benchmark results) and so far I have been unable to  
> create an actual rendering for some reason.
>
> What other options might work for something like this?  I've  
> thought about using a mix of void and metal similar to Georg  
> Mischler's perforated metal technique.  Would this be more efficient?
>
> My only concern about a flat plane is that you would not get the  
> same "cut off" as the 3D grid.  However, given the small scale of  
> the grid to the large scale of the building, this is perhaps  
> negligible.
>
>

From mike at cityscape3d.com  Mon Jun 20 10:44:28 2005
From: mike at cityscape3d.com (Michael Kruger)
Date: Mon Jun 20 11:02:50 2005
Subject: [Radiance-general] RE: modeling challenge
In-Reply-To: <200506191002.j5JA2agD011981@server.cityscape3d.com>
Message-ID: <200506200846.j5K8iwLx021055@server.cityscape3d.com>

> I've got a modeling problem.  I'm trying to accurately create 
> this... but so far all I've managed to do is waste a bunch of time.
>  
> http://members.fortunecity.com/dela/
>  
> (note the bottom image is a radiance image)
>  
> Currently I have two individual cylinders each as a rad file. 
>  Then I have a scene file that xforms these into a ~16,000 
> unit array.  That file is then rotated and transformed onto 
> the building by an additional scene file, which is then 
> called by oconv by a "rad" like script.
>  
> It works, but it takes a very long time to oconv (I guess b/c 
> it has to run xform 16000 times and Radiance on Cygwin is 
> very slow at this based on benchmark results) and so far I 
> have been unable to create an actual rendering for some reason.

What is your aim? Are you trying to create an accurate internal lighting analysis, or generate a nice render from the outside? If
the latter, there are all sorts of ways you could cheat - starting with texture / bump / alpha mapping.

Have you tried modeling this without using xform? ie: use some sort of script to generate all the cylinder geometry in their final
positions so that oconv has less work to do?

mike


From MdelaFuente at wmtao.com  Thu Jun 16 16:28:07 2005
From: MdelaFuente at wmtao.com (Mark de la Fuente)
Date: Mon Jun 20 19:23:09 2005
Subject: [Radiance-general] Re: How to map a texture?
Message-ID: <s2b14643.077@wmtao.com>

I seem to remember Lightscape having a handy feature that would give you what it thought you should be using based on the individual images.  My guess is that it was simply averaging the pixels together to come up with an average RGB value.  I've done similar things with photoshop, but this method is a far cry from what the actual measured reflectances would be, and is only a visual attempt at getting it close.
 
.8 .8 .8 sounds too high for wood.  I think wood (depending on the type is around ~.2 to ~.4 depending on the wood).  Check your radiance's lib directory.  I believe there are some old materials files that include wood definitions.
 
Hope that helps.
 
Mark

Hi, Dear friends:

I am trying to map pictures to simulate the texture of wood, carpet and so on.
I use ra_tiff to convert a .tif picture into a .pic picture, and then use colorpict to map it such as:

void colorpict image01
9 clip_r clip_g clip_b 02.pic picture.cal frac(U) frac(V) -s 500
0
0

image01 plastic wood_mat
0
0
5 .8 .8 .8 .02 0

I found that the properties of plastic material like "5 .8 .8 .8 .02 0" influence the result greatly. how should I set them properly?

Thanks a lot.

Yours,

Huang
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20050616/6bf4279a/attachment.html

------------------------------

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general


End of Radiance-general Digest, Vol 16, Issue 11
************************************************

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20050616/64d655f2/attachment.htm
From MdelaFuente at wmtao.com  Mon Jun 20 03:31:23 2005
From: MdelaFuente at wmtao.com (Mark de la Fuente)
Date: Mon Jun 20 19:23:14 2005
Subject: [Radiance-general] Modeling Challenge
Message-ID: <s2b5d628.033@wmtao.com>

Greg, thanks for the link.. Never actually used a BRTDfunc so I will have to look at that more closely.
 
Anyway, I went ahead tried to put a couple of cal files together since only one of our computers could handle the 3D grid despite my efforts, and got lucky with this one.  It seems to work great even though I'm not completely sure what the mod function is really doing.
 
Thanks for responding.
 
Mark de la Fuente
 
grid.cal
 
{
 The cal file for a "wire" mesh consisting of vertical cables holding up horizontal rods.
 This file could really be used to make any pladlike combination of two materials.
 The file is written around vertical surfaces.  If a horizontal grid  or some other orientation is desired, xform the material or modify the cal file.
 
 A1 = Width of vertical members
 A2 = Vertical member on center spacing
 A3 = Horizontal member
 A4 = Horizontal member on center spacing
 
 An example of how this would be used to cut rectangular holes out of a wall:
 
 void plastic wall
 0
 0
 5 .5 .5 .5 0 0
 
 void mixfunc grid_wallx
 4 void wall grid_x grid.cal
 0
 4 .1 .5 .05 1
 
 grid_wallx polygon box.1540
 0
 0
 12 ...
 
}
 
grid_x = if( f_grid_x, 1, 0 );
grid_y = if( f_grid_y, 1, 0 );
 
f_grid_x = and( grid_vert, grid_horiz(Px) ) ;
f_grid_y = and( grid_vert, grid_horiz(Py) ) ;
 
grid_vert = mod(Pz,A2) - A1 ;
grid_horiz(rod) = mod(rod,A4) - A3;
 
 
 

------------------------------

Message: 2
Date: Sat, 18 Jun 2005 09:13:45 -0700
From: "Gregory J. Ward" <gregoryjward@gmail.com>
Subject: Re: [Radiance-general] Modeling Challenge
To: Radiance general discussion <radiance-general@radiance-online.org>
Message-ID: <58DC6471-8DB7-4F34-B9A6-8B31647D7501@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed

Hi Mark,

There is a file called grating.cal that models depth of 3-D grids and  
uses a BRTDfunc type to approximate the ensemble behavior.  I posted  
it in response to a similar request from Richard Clibborn:

     http://www.radiance-online.org/pipermail/radiance-general/2005- 
February/002438.html

If you want the actual appearance of the blinds, rather than simply  
its transmission at a distance, then a mixfunc is required.  I don't  
have time to write one right now, or even modify Georg's.

-Greg



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20050619/c8b050ad/attachment.html
From zrogers at archenergy.com  Thu Jun 23 02:10:45 2005
From: zrogers at archenergy.com (Zack Rogers)
Date: Thu Jun 23 02:11:39 2005
Subject: [Radiance-general] Luminaire octree
Message-ID: <42B9FE05.3070909@archenergy.com>

Hello,

I apologize if this has been asked and answered -- I couldn't find 
anything searching, though I wasn't sure the best keywords to use.

I am trying to create a luminaire octree, which I will then use with 
replmarks to place about 20 of these in a larger radiance model.  I am 
modeling a psuedo-indirect exterior fixture that consists of a 19' high 
pole with essentially 4 arms, each with a lamp aimed straight up at a 
reflecting panel.  I have an IES file that represents one arm of this 
fixture.  I have successfully modeled the fixture with the 4 arms and am 
now wanting to make an octree out of it, including the application of 
the 4 ies distributions ( more technically the output from ies2rad -- I 
have a brightdata primitive, referring to a dat file describing the 
light distribution, that gets applied to an illum surface, then applied 
to a box of polygons).  However, when I do this (both frozen and 
unfrozen), I do not see any light sources.  Essentially, it seems the 
brightdata primitive does not get preserved in the octree.  My resulting 
octree has all the physically geometry I wanted, but the glow surface 
(used to just illuminate fixture geometry) and the IES distribution 
applied to box of illum polygons does not show up.

When I try to separate the geometry with the IES distribution I also 
have trouble.  I have an octree representing luminaire geometry and then 
I separately add the 4 distributions (which do overlap the geometry 
bounding cube) I get some light but definitely not the same distribution 
of light I'm expecting and began with.

Any help is appreciated. I am hoping to find a more elegant solution 
than just physically modeling (not replmarking) these 20 fixtures and 
adding 80 markers for the distributions.

Zack

PS. I can e-mail a rendering if it helps explain the situation (can't 
post to a website right now)

--
Zack Rogers
Engineer / Daylighting Designer
Architectural Energy Corporation
2540 Frontier Avenue, Suite 201
Boulder, CO 80301 USA

tel (303)444-4149 ext.235
fax (303)444-4304
http://www.archenergy.com


From gregoryjward at gmail.com  Thu Jun 23 08:55:02 2005
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Thu Jun 23 08:55:49 2005
Subject: [Radiance-general] Luminaire octree
In-Reply-To: <42B9FE05.3070909@archenergy.com>
References: <42B9FE05.3070909@archenergy.com>
Message-ID: <A2D5531D-8EB9-4E89-8B3A-8D38652162BA@gmail.com>

Hi Zack,

In the Radiance reference manual <http://radsite.lbl.gov/radiance/ 
refer/ray.html#Surfaces> it mentions briefly that one of the  
limitations of instances is that they are not good for light  
sources.  This is because the initialization step in Radiance that  
discovers light sources does not delve into octree and mesh instances  
to find potential sources.  It could of course, but since the number  
of sources should be restricted to something reasonable, I didn't  
think it was a good idea to include instanced objects in the source  
search.

There is a simple workaround for this.  Just take the emitting  
surface out of your luminaire and instance it separately using  
xform.  You can still apply replmarks by xform'ing a file that looks  
like this:

# Output of ies2rad
void brightdata ...

... polygon source
...

void instance luminaire_geometry
1 lumgeom.oct
0
0
# End of luminaire description

Give the above file to replmarks -x, and you'll get a transformed  
instance and transformed source that Radiance will recognize.

-Greg

> From: Zack Rogers <zrogers@archenergy.com>
> Date: June 23, 2005 1:10:45 AM BDT
>
> Hello,
>
> I apologize if this has been asked and answered -- I couldn't find  
> anything searching, though I wasn't sure the best keywords to use.
>
> I am trying to create a luminaire octree, which I will then use  
> with replmarks to place about 20 of these in a larger radiance  
> model.  I am modeling a psuedo-indirect exterior fixture that  
> consists of a 19' high pole with essentially 4 arms, each with a  
> lamp aimed straight up at a reflecting panel.  I have an IES file  
> that represents one arm of this fixture.  I have successfully  
> modeled the fixture with the 4 arms and am now wanting to make an  
> octree out of it, including the application of the 4 ies  
> distributions ( more technically the output from ies2rad -- I have  
> a brightdata primitive, referring to a dat file describing the  
> light distribution, that gets applied to an illum surface, then  
> applied to a box of polygons).  However, when I do this (both  
> frozen and unfrozen), I do not see any light sources.  Essentially,  
> it seems the brightdata primitive does not get preserved in the  
> octree.  My resulting octree has all the physically geometry I  
> wanted, but the glow surface (used to just illuminate fixture  
> geometry) and the IES distribution applied to box of illum polygons  
> does not show up.
>
> When I try to separate the geometry with the IES distribution I  
> also have trouble.  I have an octree representing luminaire  
> geometry and then I separately add the 4 distributions (which do  
> overlap the geometry bounding cube) I get some light but definitely  
> not the same distribution of light I'm expecting and began with.
>
> Any help is appreciated. I am hoping to find a more elegant  
> solution than just physically modeling (not replmarking) these 20  
> fixtures and adding 80 markers for the distributions.
>
> Zack
>
> PS. I can e-mail a rendering if it helps explain the situation  
> (can't post to a website right now)

From zrogers at archenergy.com  Thu Jun 23 16:57:30 2005
From: zrogers at archenergy.com (Zack Rogers)
Date: Thu Jun 23 16:58:12 2005
Subject: [Radiance-general] Luminaire octree
Message-ID: <42BACDDA.8030708@archenergy.com>

Thanks Greg,

This is exactly my problem.  Rob G. pointed me to a previous post 
discussing this as well.

http://radiance-online.org/pipermail/radiance-general/2003-August/000946.html

I will try this approach today.

Thanks!
Zack

-- 
Zack Rogers
Engineer / Daylighting Designer
Architectural Energy Corporation
2540 Frontier Avenue, Suite 201
Boulder, CO 80301 USA

tel (303)444-4149 ext.235
fax (303)444-4304
http://www.archenergy.com


From zrogers at archenergy.com  Thu Jun 23 18:05:12 2005
From: zrogers at archenergy.com (Zack Rogers)
Date: Thu Jun 23 18:05:55 2005
Subject: [Radiance-general] RE: Luminaire octree
Message-ID: <42BADDB8.6080104@archenergy.com>

I have 4 IES files applied to each luminaire octree I want to create, 
which I think is adding complexity to this issue.  I have tried what I 
think is basically the work-around method outlined.  I am testing it 
with this rad file:

### test_oct.rad
void                  alias  l_room                grey_090
!xform scene/l_room.rad

!replmarks -x parts/campo_full.rad l_test_oct scene/l_test_oct.rad
### end file

which refers to
### campo_full.rad
void                  alias  l_reflector           grey_090
!xform scene/l_reflector.rad

void                  alias  l_metal               stainless_steel
!xform scene/l_metal.rad

void                  alias  l_glow                campo_glow
!xform scene/l_glow.rad

!replmarks -x luminaire/hessamerica+++ca45-71r+++6500.rfl l_ies 
scene/l_ies.rad
### end file

The "luminaire/hessamerica+++ca45-71r+++6500.rfl" file is basically the 
output of ies2rad (rayfrontized) for a single ies file.  Since I have 4 
of these, and the default ies2rad output is a box centered around the 
origin, i have this extra replmarks (which has used -x all along) to put 
these 4 distributions in place relative to the luminaire goemetry ( 
which is described by the xformed rad files rather than an instanced 
octree -- does this matter)

I still am getting no light. in my test_oct.rad scene description.  What 
am I still missing?  The only octree being made is the final scene 
octree for "test_oct.rad".

This url shows a low-quality rendering of the fixture I am dealing with:
http://www.archenergy.com/services/sda/tools/campo/

Thanks!
Zack


-- 
Zack Rogers
Engineer / Daylighting Designer
Architectural Energy Corporation
2540 Frontier Avenue, Suite 201
Boulder, CO 80301 USA

tel (303)444-4149 ext.235
fax (303)444-4304
http://www.archenergy.com


From jedev at visarc.com  Thu Jun 23 18:49:30 2005
From: jedev at visarc.com (Jack de Valpine)
Date: Thu Jun 23 18:50:27 2005
Subject: [Radiance-general] RE: Luminaire octree
In-Reply-To: <42BADDB8.6080104@archenergy.com>
References: <42BADDB8.6080104@archenergy.com>
Message-ID: <42BAE81A.6030804@visarc.com>

Hi Zack,

It looks like you are getting light in your image. There seems to be a 
lot of light on the floor. Perhaps it is not working the way you expect?

One thing to do that might help at least verify the spatial location, 
would be to edit luminaire/hessamerica+++ca45-71r+++6500.rfl and make 
sure that the light source is "light" rather than "illum." This way you 
can see its location in the image. Then make a scene that only includes:

!replmarks -x luminaire/hessamerica+++ca45-71r+++6500.rfl l_ies 
scene/l_ies.rad

placed in the room. This way you can see if the distribution is working 
the way you expect (without the interference of actual fixture 
geometry). The problem that you might be facing is the size and location 
of the geometry that the distribution data is applied to vs the size and 
location of the fixture geometry. You may end up needing to custom build 
the geometry that represents the sources that the data is applied to. 
One option to assist in this is to use the -i feature of ies2rad. This 
produces a sphere with an illum material type applied to it (modified by 
the distribution function). You can specify the radius of the sphere so 
that it can enclose the relevant geometry of the fixture.

-Jack


Zack Rogers wrote:

> I have 4 IES files applied to each luminaire octree I want to create, 
> which I think is adding complexity to this issue.  I have tried what I 
> think is basically the work-around method outlined.  I am testing it 
> with this rad file:
>
> ### test_oct.rad
> void                  alias  l_room                grey_090
> !xform scene/l_room.rad
>
> !replmarks -x parts/campo_full.rad l_test_oct scene/l_test_oct.rad
> ### end file
>
> which refers to
> ### campo_full.rad
> void                  alias  l_reflector           grey_090
> !xform scene/l_reflector.rad
>
> void                  alias  l_metal               stainless_steel
> !xform scene/l_metal.rad
>
> void                  alias  l_glow                campo_glow
> !xform scene/l_glow.rad
>
> !replmarks -x luminaire/hessamerica+++ca45-71r+++6500.rfl l_ies 
> scene/l_ies.rad
> ### end file
>
> The "luminaire/hessamerica+++ca45-71r+++6500.rfl" file is basically 
> the output of ies2rad (rayfrontized) for a single ies file.  Since I 
> have 4 of these, and the default ies2rad output is a box centered 
> around the origin, i have this extra replmarks (which has used -x all 
> along) to put these 4 distributions in place relative to the luminaire 
> goemetry ( which is described by the xformed rad files rather than an 
> instanced octree -- does this matter)
>
> I still am getting no light. in my test_oct.rad scene description.  
> What am I still missing?  The only octree being made is the final 
> scene octree for "test_oct.rad".
>
> This url shows a low-quality rendering of the fixture I am dealing with:
> http://www.archenergy.com/services/sda/tools/campo/
>
> Thanks!
> Zack
>
>

-- 
#	John E. de Valpine
#	president
#
#	visarc incorporated
#	http://www.visarc.com
#
#	channeling technology for superior design and construction




From zrogers at archenergy.com  Thu Jun 23 20:15:12 2005
From: zrogers at archenergy.com (Zack Rogers)
Date: Thu Jun 23 20:15:54 2005
Subject: [Radiance-general] RE: Luminaire octree
In-Reply-To: <42BAE81A.6030804@visarc.com>
References: <42BADDB8.6080104@archenergy.com> <42BAE81A.6030804@visarc.com>
Message-ID: <42BAFC30.8050602@archenergy.com>

Hi Jack

> It looks like you are getting light in your image. There seems to be a 
> lot of light on the floor. Perhaps it is not working the way you expect?

The image I posted is of the correctly modeled luminaire before trying 
to replmark it as an octree (1st attempt which seems to be a dead end) 
or replmark an octree of geometry and separately replmark -x 4 ies files 
(2nd attempt which did not give any light output - ies markers did 
overlap geometry octree bounding cube) or replmark -x it as a single 
.rad file (3rd attempt not giving same light output as the posted image, 
but some light output nonetheless).

>
> One thing to do that might help at least verify the spatial location, 
> would be to edit luminaire/hessamerica+++ca45-71r+++6500.rfl and make 
> sure that the light source is "light" rather than "illum." This way 
> you can see its location in the image. Then make a scene that only 
> includes:
>
> !replmarks -x luminaire/hessamerica+++ca45-71r+++6500.rfl l_ies 
> scene/l_ies.rad

I am pretty sure the distribution is close to correct now, I already did 
the "light" definition to ensure this.  For this fixture, my illum box 
is 4' x 1'9" x 2'6", encompassing the reflector, supports, and lamp for 
each arm.  The central support arm does pass through this illum box, but 
most candelas are going forward so I do not think this is causing 
significant inaccuracies in the resulting distribution.  I think the 
shadow lines on the floor are a little more intense because of this but 
that's about it.  Any issues with applying ies data to such a large 
illum box?

Thanks for the suggestions!  Have you been successful using replmarks -x 
for light sources in your renderings?  I think the double use of 
replmarks -x (once for the 4 ies files, and then again for my final 
placement) may be causing my problems now.

Zack

-- 
Zack Rogers
Engineer / Daylighting Designer
Architectural Energy Corporation
2540 Frontier Avenue, Suite 201
Boulder, CO 80301 USA

tel (303)444-4149 ext.235
fax (303)444-4304
http://www.archenergy.com


From schorsch at schorsch.com  Thu Jun 23 20:49:26 2005
From: schorsch at schorsch.com (Georg Mischler)
Date: Thu Jun 23 20:50:06 2005
Subject: [Radiance-general] RE: Luminaire octree
In-Reply-To: <42BADDB8.6080104@archenergy.com>
References: <42BADDB8.6080104@archenergy.com>
Message-ID: <Pine.BSF.4.58.0506231438090.29051@emancholl.pair.com>

Zack Rogers wrote:

> The "luminaire/hessamerica+++ca45-71r+++6500.rfl" file is basically the
> output of ies2rad (rayfrontized) for a single ies file.

In the standard case, Rayfront will automate all this for you,
including the decision whether to use xform or instances for
the geometry.  Just that each of your 4 elements must be treated
as a seperate luminaire, by actually placing 4 markers instead of
just one.

But then, I'm not sure which surface in your example is supposed
to serve as an emitter, so it may be too tricky for the builtin
mechanism to handle it correctly. Is that the reason why you're
trying the manual approach?


-schorsch

-- 
Georg Mischler  --  simulations developer  --  schorsch at schorsch com
+schorsch.com+  --  lighting design tools  --  http://www.schorsch.com/

From jedev at visarc.com  Thu Jun 23 21:04:43 2005
From: jedev at visarc.com (Jack de Valpine)
Date: Thu Jun 23 21:05:39 2005
Subject: [Radiance-general] RE: Luminaire octree
In-Reply-To: <42BAFC30.8050602@archenergy.com>
References: <42BADDB8.6080104@archenergy.com> <42BAE81A.6030804@visarc.com>
	<42BAFC30.8050602@archenergy.com>
Message-ID: <42BB07CB.4020706@visarc.com>

Hi Zack,

We use multiple replmark calls on all kinds of object including lights 
and fixture geometry. Typically we define the fixture geometry and 
compile it into an octree that can be instanced around. Any lights 
(illum/light/glow and associated distribution data) are managed 
independantly althoughf generally using the same markers used to locate 
the fixture geometry. In general, the thing to remember is that anything 
that is a light (eg has the following material types applied: light, 
illum  and glow) must be compiled into the final top level scene octree.

Let's try to back up and consider in a more generic manner what you are 
trying to do: build a scene that has multiple instances of the campo 
fixture deployed. To do this, you could do the following (note there are 
a few different ways and this is just what is coming out as I write):

Note I will assume mats.lib that defines your materials.

BUILD the LIGHT FIXTURE GEOMETRY (no lights, illums or glows) for 1 
CAMPO FIXTURE

camp_full_geometry.rad:

    !xform -m grey_090 scene/l_reflector.rad
    !xform -m stainless_steel scene/l_metal.rad

oconv mats.lib campo_full_geometry.rad > campo_full_geometry.oct

BUILD the LIGHT SOURCES for 1 CAMPO FIXTURE

campo_light.rad

    !xform -m campo_glow scene/l_glow.rad
    !replmarks -x luminaire/hessamerica+++ca45-71r+++6500.rfl   
    l_ies    scene/l_ies.rad

BUILD the SCENE

test_room.rad

    !xform -m grey_090 scene/l_room.rad
    !replmarks -i campo_full_geometry.oct    l_test_oct   
    scene/l_test_oct.rad     #gives you x instanced octrees of the
    fixture in the scene
    !replmarks -x campo_light.rad    l_test_oct   
    scene/l_test_oct.rad                  #gives you x xformed light
    source groupings in the scene

oconv mats.lib test_room.rad > test_room.oct
rview -ab 1 -av 0 0 0 -vf myview.vf test_room.oct

It looks like the way you have things broken down should be fine, so it 
is not clear why it is not working the way you expect. My example 
organizes things a little differently and I think it should work.

Regarding the large illum geometry for the ies data. I think that this 
should not be a problem, but really depends on whether this is the 
geometry that gets spit out by ies2rad or is it geometry that you have 
built yourself. If it is the latter then you need to make sure that the 
brightdata definition for the ies data includes the proper measure 
(METERS!) for the box geometry, and also that it uses boxcorr/lboxcorr.

It looks like you have a glow also. You may want to assign the glow a 
local radius (argument 4) to make sure that things inside the illum 
geometry get some local lighting.

Hope this helps.

-Jack


Zack Rogers wrote:

> Hi Jack
>
>> It looks like you are getting light in your image. There seems to be 
>> a lot of light on the floor. Perhaps it is not working the way you 
>> expect?
>
>
> The image I posted is of the correctly modeled luminaire before trying 
> to replmark it as an octree (1st attempt which seems to be a dead end) 
> or replmark an octree of geometry and separately replmark -x 4 ies 
> files (2nd attempt which did not give any light output - ies markers 
> did overlap geometry octree bounding cube) or replmark -x it as a 
> single .rad file (3rd attempt not giving same light output as the 
> posted image, but some light output nonetheless).
>
>>
>> One thing to do that might help at least verify the spatial location, 
>> would be to edit luminaire/hessamerica+++ca45-71r+++6500.rfl and make 
>> sure that the light source is "light" rather than "illum." This way 
>> you can see its location in the image. Then make a scene that only 
>> includes:
>>
>> !replmarks -x luminaire/hessamerica+++ca45-71r+++6500.rfl l_ies 
>> scene/l_ies.rad
>
>
> I am pretty sure the distribution is close to correct now, I already 
> did the "light" definition to ensure this.  For this fixture, my illum 
> box is 4' x 1'9" x 2'6", encompassing the reflector, supports, and 
> lamp for each arm.  The central support arm does pass through this 
> illum box, but most candelas are going forward so I do not think this 
> is causing significant inaccuracies in the resulting distribution.  I 
> think the shadow lines on the floor are a little more intense because 
> of this but that's about it.  Any issues with applying ies data to 
> such a large illum box?
>
> Thanks for the suggestions!  Have you been successful using replmarks 
> -x for light sources in your renderings?  I think the double use of 
> replmarks -x (once for the 4 ies files, and then again for my final 
> placement) may be causing my problems now.
>
> Zack
>

-- 
#	John E. de Valpine
#	president
#
#	visarc incorporated
#	http://www.visarc.com
#
#	channeling technology for superior design and construction

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20050623/6a34df91/attachment.htm
From rpg at rumblestrip.org  Thu Jun 23 21:19:35 2005
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Thu Jun 23 21:20:17 2005
Subject: [Radiance-general] RE: Luminaire octree
In-Reply-To: <Pine.BSF.4.58.0506231438090.29051@emancholl.pair.com>
References: <42BADDB8.6080104@archenergy.com>
	<Pine.BSF.4.58.0506231438090.29051@emancholl.pair.com>
Message-ID: <24889.209.212.87.250.1119554375.squirrel@209.212.87.250>


On Thu, June 23, 2005 2:49 pm, Georg Mischler said:
> Zack Rogers wrote:
>
>> The "luminaire/hessamerica+++ca45-71r+++6500.rfl" file is basically the
>> output of ies2rad (rayfrontized) for a single ies file.
>
> In the standard case, Rayfront will automate all this for you,
> including the decision whether to use xform or instances for
> the geometry.  Just that each of your 4 elements must be treated
> as a seperate luminaire, by actually placing 4 markers instead of
> just one.
>
> But then, I'm not sure which surface in your example is supposed
> to serve as an emitter, so it may be too tricky for the builtin
> mechanism to handle it correctly. Is that the reason why you're
> trying the manual approach?

The underside of the curved panel is the emitter. I actually used this
fixture on a museum project a while ago.  Zack, you mention that you have
a bounding box for the illum, but you don't mention that you have applied
lboxcorr.  Perhaps this is causing problems?  Honestly, I haven't use
bounding illums (yet), but I remember reading that this correction must be
applied to non-spherical illum boundaries...

-- 
Rob Guglielmetti
www.rumblestrip.org

From marcdevon at hotmail.com  Thu Jun 23 21:20:24 2005
From: marcdevon at hotmail.com (Marcus Jacobs)
Date: Thu Jun 23 21:21:24 2005
Subject: [Radiance-general] CIE Color Conversion
Message-ID: <BAY102-F222D5F80086669A7D4CE65A4EA0@phx.gbl>

Hi All

I have a question about using the existing utilities for converting a CIE 
(x,y) chromaticity to RGB for use of adjusting the default sun and sky 
colors. I have researched the following site to get some background about 
this:

http://www.fourmilab.ch/documents/specrend/

>From searching through the archive of this message board I came across a 
response by Greg to a previous question that I had for adjusting the sun 
color:

http://www.radiance-online.org/pipermail/radiance-general/2005-January/002263.html

My question is how may I convert from a CIE(x,y) chromaticity to RGB using 
on two variables as was performed for the above. The Radiance function file 
xyz_rgb.cal requires three variables (x,y and the luminosity, z). The reason 
why I am asking this is because I wish for the values that I'll employ to be 
in the physically valid range (i.e. .265074126*r + .670114631*g + 
.064811243*b = 1).

Thanks

Marcus



From zrogers at archenergy.com  Thu Jun 23 21:51:29 2005
From: zrogers at archenergy.com (Zack Rogers)
Date: Thu Jun 23 21:52:11 2005
Subject: [Radiance-general] RE: Luminaire octree
Message-ID: <42BB12C1.7080304@archenergy.com>

>
>
>Zack, you mention that you have
>a bounding box for the illum, but you don't mention that you have applied
>lboxcorr.  
>

The bounding box illum was made by ies2rad, so it's been correctly 
scaled, using boxcorr and everything.  So I don't think the problem is 
related to this.

>In the standard case, Rayfront will automate all this for you,
>including the decision whether to use xform or instances for
>the geometry.  Just that each of your 4 elements must be treated
>as a seperate luminaire, by actually placing 4 markers instead of
>just one.
>
>But then, I'm not sure which surface in your example is supposed
>to serve as an emitter, so it may be too tricky for the builtin
>mechanism to handle it correctly. Is that the reason why you're
>trying the manual approach?
>
I am using Rayfront for most of this, I just go into the files when 
needed, ie. to take out the sky when creating the lum geom octree.  I 
tried, within Rayfront (my 2nd attempt), to have 4 markers for each of 
the ies files + 1 marker for lum_geom (overlap between octree bounding 
and ies cubes) and did not get any light output.

Thanks for all the feed back.  I have alot of alternative methods to 
play with now.  Jack, your example makes sense and seems to be 
essentially what I tried for my 3rd attempt.  I will try reorganizing 
somewhat and see if I can get it to work.

Thanks!
Zack


-- 
Zack Rogers
Engineer / Daylighting Designer
Architectural Energy Corporation
2540 Frontier Avenue, Suite 201
Boulder, CO 80301 USA

tel (303)444-4149 ext.235
fax (303)444-4304
http://www.archenergy.com


From schorsch at schorsch.com  Thu Jun 23 23:22:35 2005
From: schorsch at schorsch.com (Georg Mischler)
Date: Thu Jun 23 23:23:18 2005
Subject: [Radiance-general] RE: Luminaire octree
In-Reply-To: <42BB12C1.7080304@archenergy.com>
References: <42BB12C1.7080304@archenergy.com>
Message-ID: <Pine.BSF.4.58.0506231715590.29051@emancholl.pair.com>

Zack Rogers wrote:

> >But then, I'm not sure which surface in your example is supposed
> >to serve as an emitter, so it may be too tricky for the builtin
> >mechanism to handle it correctly. Is that the reason why you're
> >trying the manual approach?
> >
> I am using Rayfront for most of this, I just go into the files when
> needed, ie. to take out the sky when creating the lum geom octree.  I
> tried, within Rayfront (my 2nd attempt), to have 4 markers for each of
> the ies files + 1 marker for lum_geom (overlap between octree bounding
> and ies cubes) and did not get any light output.

It might be easier to treat the geometry for each unit individually
as well (even if that means you need to handle the pole seperately).
If you do this, then Rayfront can position the luminaire geometry
for you, relative to the position of the IES curve.
As I understand by now, the emitting surface is a virtual bounding
box. Rayfront can create that for you as well.

If it works at all (eg. if there's no issue about intersecting
bounding boxes), then it should be possible to get the desired
effect within or without Rayfront. As all of Rayfront, I tried
to design this part so that it would make it easier to handle
than the manual method. Now we'll find out whether that actually
turns out to be the case...


-schorsch

-- 
Georg Mischler  --  simulations developer  --  schorsch at schorsch com
+schorsch.com+  --  lighting design tools  --  http://www.schorsch.com/

From gregoryjward at gmail.com  Fri Jun 24 10:16:57 2005
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Fri Jun 24 10:17:47 2005
Subject: [Radiance-general] CIE Color Conversion
In-Reply-To: <BAY102-F222D5F80086669A7D4CE65A4EA0@phx.gbl>
References: <BAY102-F222D5F80086669A7D4CE65A4EA0@phx.gbl>
Message-ID: <3FE42725-D609-45B3-8F84-0EAD544DE393@gmail.com>

Hi Marcus,

To get RGB values from CIE Yxy input, you need an additional  
conversion from Yxy to XYZ, i.e.:

     X = Y*x/y;
     { Y = Y; }
     Z = Y*(1 - x - y)/y;

This can go inline with xyz_rgb.cal like so:

rcalc -e 'Y_i=$1;x_i=$2;y_i=$3' -e 'X_i=Y_i*x_i/y_i;Z_i=Y_i*(1-x_i- 
y_i)/y_i' -f xyz_rgb.cal

If you give Y x y on input, you'll get RGB on output.  (You can use a  
Y of 1 if you like.)

-Greg

> From: "Marcus Jacobs" <marcdevon@hotmail.com>
> Date: June 23, 2005 8:20:24 PM BDT
>
> Hi All
>
> I have a question about using the existing utilities for converting  
> a CIE (x,y) chromaticity to RGB for use of adjusting the default  
> sun and sky colors. I have researched the following site to get  
> some background about this:
>
> http://www.fourmilab.ch/documents/specrend/
>
> From searching through the archive of this message board I came  
> across a
> response by Greg to a previous question that I had for adjusting  
> the sun color:
>
> http://www.radiance-online.org/pipermail/radiance-general/2005- 
> January/002263.html
>
> My question is how may I convert from a CIE(x,y) chromaticity to  
> RGB using on two variables as was performed for the above. The  
> Radiance function file xyz_rgb.cal requires three variables (x,y  
> and the luminosity, z). The reason why I am asking this is because  
> I wish for the values that I'll employ to be in the physically  
> valid range (i.e. .265074126*r + .670114631*g + .064811243*b = 1).
>
> Thanks
>
> Marcus
>

From atelier at iebele.nl  Mon Jun 27 02:07:11 2005
From: atelier at iebele.nl (iebele)
Date: Mon Jun 27 02:08:19 2005
Subject: [Radiance-general] Compile error on AMD running Fedora 4
Message-ID: <1119830831.31465.43.camel@localhost.localdomain>

Hi, 

I try to compile Radiance (3R6P1)on a AMD Athlon 3400+, with Fedora 4
installed. Something goes wrong and I don't know what causes this:

/usr/bin/ld: skipping incompatible /usr/X11R6/lib/libX11.so when
searching for -lX11
/usr/bin/ld: skipping incompatible /usr/X11R6/lib/libX11.a when
searching for -lX11
/usr/bin/ld: cannot find -lX11
collect2: ld returned 1 exit status

What could be possible wrong here? 

And, does anybody has a suggestion to improve the compile options in
rmake on a 64 bit AMD3400+ processor?  

Does it make sense to make the binairies (when I get them compiled ;)
available for this platform? I could put them on a server.


Thanks,
Iebele


Current rmake command is:
#!/bin/sh
exec make "SPECIAL=" \
        "OPT=-m64 -O3 -mfpmath=sse -DSPEED=200" \
        "MACH=-Dlinux -D_FILE_OFFSET_BITS=64 -L/usr/X11R6/lib
-I/usr/include/X11 -DNOSTEREO" \
        ARCH=IBMPC "COMPAT=bmalloc.o erf.o getpagesize.o" \
        INSTDIR=/usr/local/bin \
        LIBDIR=/usr/local/lib/ray \
        ESUFFIX= \
        CC=gcc "$@" -f Rmakefile



From gregoryjward at gmail.com  Mon Jun 27 10:55:45 2005
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Mon Jun 27 10:56:35 2005
Subject: [Radiance-general] Compile error on AMD running Fedora 4
In-Reply-To: <1119830831.31465.43.camel@localhost.localdomain>
References: <1119830831.31465.43.camel@localhost.localdomain>
Message-ID: <2C04014F-BB0E-4910-9C3D-B37D238BF7E1@gmail.com>

Hi Lebele,

Sounds like you have a compatibility issue between different versions  
of X11.  Try changing the "-I/usr/include/X11" in your rmake to "-I/ 
usr/X11R6/include" and see if that works.  (You'll have to run  
"makeall clean" beforehand.)

-Greg

> From: iebele <atelier@iebele.nl>
> Date: June 27, 2005 1:07:11 AM BDT
>
> Hi,
>
> I try to compile Radiance (3R6P1)on a AMD Athlon 3400+, with Fedora 4
> installed. Something goes wrong and I don't know what causes this:
>
> /usr/bin/ld: skipping incompatible /usr/X11R6/lib/libX11.so when
> searching for -lX11
> /usr/bin/ld: skipping incompatible /usr/X11R6/lib/libX11.a when
> searching for -lX11
> /usr/bin/ld: cannot find -lX11
> collect2: ld returned 1 exit status
>
> What could be possible wrong here?
>
> And, does anybody has a suggestion to improve the compile options in
> rmake on a 64 bit AMD3400+ processor?
>
> Does it make sense to make the binairies (when I get them compiled ;)
> available for this platform? I could put them on a server.
>
>
> Thanks,
> Iebele
>
>
> Current rmake command is:
> #!/bin/sh
> exec make "SPECIAL=" \
>         "OPT=-m64 -O3 -mfpmath=sse -DSPEED=200" \
>         "MACH=-Dlinux -D_FILE_OFFSET_BITS=64 -L/usr/X11R6/lib
> -I/usr/include/X11 -DNOSTEREO" \
>         ARCH=IBMPC "COMPAT=bmalloc.o erf.o getpagesize.o" \
>         INSTDIR=/usr/local/bin \
>         LIBDIR=/usr/local/lib/ray \
>         ESUFFIX= \
>         CC=gcc "$@" -f Rmakefile

From cbauer- at t-online.de  Mon Jun 27 20:45:35 2005
From: cbauer- at t-online.de (Carsten Bauer)
Date: Mon Jun 27 12:20:05 2005
Subject: [Radiance-general] Compile error on AMD running Fedora 4
In-Reply-To: <1119830831.31465.43.camel@localhost.localdomain>
References: <1119830831.31465.43.camel@localhost.localdomain>
Message-ID: <42C0494F.3010806@t-online.de>

iebele wrote:

>Hi, 
>
>I try to compile Radiance (3R6P1)on a AMD Athlon 3400+, with Fedora 4
>installed. Something goes wrong and I don't know what causes this:
>
>/usr/bin/ld: skipping incompatible /usr/X11R6/lib/libX11.so when
>searching for -lX11
>  
>

In case your OS is also a 64bit one, try replacing the X11 library path 
with the 64-equivalent, i.e. write
 -L/usr/X11R6/lib64  instead of -L/usr/X11R6/lib in your 'rmake' script
(at least it worked here on an Athlon3300 with Suse 9.2 64 bit...)

-cb

From atelier at iebele.nl  Mon Jun 27 12:54:05 2005
From: atelier at iebele.nl (iebele)
Date: Mon Jun 27 12:55:14 2005
Subject: [Radiance-general] Compile error on AMD running Fedora 4
In-Reply-To: <2C04014F-BB0E-4910-9C3D-B37D238BF7E1@gmail.com>
References: <1119830831.31465.43.camel@localhost.localdomain>
	<2C04014F-BB0E-4910-9C3D-B37D238BF7E1@gmail.com>
Message-ID: <1119869645.3535.18.camel@localhost.localdomain>

Hi Greg, 

Thanks for your reply, I tried your suggestion, but that did not change
anything. I got the same errors during the process of makeall.
However, your reply inspired me to look more closely in /usr/X11R6
(/usr/include/X11 is just a symbolic link to /usr/X11R6 ), where I found
two different 'lib' directories:
/usr/X11R6/lib 
/usr/X11R6/lib64   (the one to use for 64bit machines)

I changed my rmake file as below and everything compiled witout errors

#!/bin/sh
exec make "SPECIAL=" \
        "OPT=-m64 -O3 -mfpmath=sse -DSPEED=200" \
        "MACH=-Dlinux -D_FILE_OFFSET_BITS=64 -L/usr/X11R6/lib64
-I/usr/X11R6/include -DNOSTEREO" \
        ARCH=IBMPC "COMPAT=bmalloc.o erf.o getpagesize.o" \
        INSTDIR=/usr/local/bin \
        LIBDIR=/usr/local/lib/ray \
        ESUFFIX= \
        CC=gcc "$@" -f Rmakefile


The resulting binairies are now available at:
http://www.toren.com/radiance/R31P6_Fedora4_AMD64.tar.gz
(without trad, I don't have wish installed).

Thanks, 

Iebele



On Mon, 2005-06-27 at 09:55 +0100, Gregory J. Ward wrote:
> Hi Lebele,
> 
> Sounds like you have a compatibility issue between different versions  
> of X11.  Try changing the "-I/usr/include/X11" in your rmake to "-I/ 
> usr/X11R6/include" and see if that works.  (You'll have to run  
> "makeall clean" beforehand.)
> 
> -Greg
> 
> > From: iebele <atelier@iebele.nl>
> > Date: June 27, 2005 1:07:11 AM BDT
> >
> > Hi,
> >
> > I try to compile Radiance (3R6P1)on a AMD Athlon 3400+, with Fedora 4
> > installed. Something goes wrong and I don't know what causes this:
> >
> > /usr/bin/ld: skipping incompatible /usr/X11R6/lib/libX11.so when
> > searching for -lX11
> > /usr/bin/ld: skipping incompatible /usr/X11R6/lib/libX11.a when
> > searching for -lX11
> > /usr/bin/ld: cannot find -lX11
> > collect2: ld returned 1 exit status
> >
> > What could be possible wrong here?
> >
> > And, does anybody has a suggestion to improve the compile options in
> > rmake on a 64 bit AMD3400+ processor?
> >
> > Does it make sense to make the binairies (when I get them compiled ;)
> > available for this platform? I could put them on a server.
> >
> >
> > Thanks,
> > Iebele
> >
> >
> > Current rmake command is:
> > #!/bin/sh
> > exec make "SPECIAL=" \
> >         "OPT=-m64 -O3 -mfpmath=sse -DSPEED=200" \
> >         "MACH=-Dlinux -D_FILE_OFFSET_BITS=64 -L/usr/X11R6/lib
> > -I/usr/include/X11 -DNOSTEREO" \
> >         ARCH=IBMPC "COMPAT=bmalloc.o erf.o getpagesize.o" \
> >         INSTDIR=/usr/local/bin \
> >         LIBDIR=/usr/local/lib/ray \
> >         ESUFFIX= \
> >         CC=gcc "$@" -f Rmakefile
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general


From atelier at iebele.nl  Mon Jun 27 13:01:19 2005
From: atelier at iebele.nl (iebele)
Date: Mon Jun 27 13:02:23 2005
Subject: [Radiance-general] Compile error on AMD running Fedora 4
In-Reply-To: <42C0494F.3010806@t-online.de>
References: <1119830831.31465.43.camel@localhost.localdomain>
	<42C0494F.3010806@t-online.de>
Message-ID: <1119870079.3535.25.camel@localhost.localdomain>

Hi Carsten , 

I just just found it out myself, see me reply on Greg's message.
Thanks, anyways, for you reply.
Did you change any other options in rmake, for optimizing 64bit ? 

Iebele



On Mon, 2005-06-27 at 11:45 -0700, Carsten Bauer wrote:
> iebele wrote:
> 
> >Hi, 
> >
> >I try to compile Radiance (3R6P1)on a AMD Athlon 3400+, with Fedora 4
> >installed. Something goes wrong and I don't know what causes this:
> >
> >/usr/bin/ld: skipping incompatible /usr/X11R6/lib/libX11.so when
> >searching for -lX11
> >  
> >
> 
> In case your OS is also a 64bit one, try replacing the X11 library path 
> with the 64-equivalent, i.e. write
>  -L/usr/X11R6/lib64  instead of -L/usr/X11R6/lib in your 'rmake' script
> (at least it worked here on an Athlon3300 with Suse 9.2 64 bit...)
> 
> -cb
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general


From cbauer- at t-online.de  Mon Jun 27 22:05:56 2005
From: cbauer- at t-online.de (Carsten Bauer)
Date: Mon Jun 27 13:40:13 2005
Subject: [Radiance-general] Compile error on AMD running Fedora 4
In-Reply-To: <1119870079.3535.25.camel@localhost.localdomain>
References: <1119830831.31465.43.camel@localhost.localdomain>	<42C0494F.3010806@t-online.de>
	<1119870079.3535.25.camel@localhost.localdomain>
Message-ID: <42C05C24.9000105@t-online.de>

iebele wrote:

>Hi Carsten , 
>
>I just just found it out myself, see me reply on Greg's message.
>Thanks, anyways, for you reply.
>  
>
sorry for the repetition.. but when.looking at the timestamp it's funny 
that I haven't received that message yet when I wrote my answer...(I 
occasionally noticed unpredictable delays of message deliveries before, 
e.g. receiving a reply before the question itself..:-) )

-cb

PS: so far I haven't yet looked for or tried any 64bit specific compiler 
optimization. I'm a 64 bit newbie as well...

From ian at testers.homelinux.net  Mon Jun 27 17:46:39 2005
From: ian at testers.homelinux.net (Ian Tester)
Date: Mon Jun 27 17:46:25 2005
Subject: [Radiance-general] Compile error on AMD running Fedora 4
In-Reply-To: <1119830831.31465.43.camel@localhost.localdomain>
References: <1119830831.31465.43.camel@localhost.localdomain>
Message-ID: <42C01F5F.1050009@testers.homelinux.net>

iebele wrote:
> Current rmake command is:
> #!/bin/sh
> exec make "SPECIAL=" \
>         "OPT=-m64 -O3 -mfpmath=sse -DSPEED=200" \
>         "MACH=-Dlinux -D_FILE_OFFSET_BITS=64 -L/usr/X11R6/lib
> -I/usr/include/X11 -DNOSTEREO" \
>         ARCH=IBMPC "COMPAT=bmalloc.o erf.o getpagesize.o" \
>         INSTDIR=/usr/local/bin \
>         LIBDIR=/usr/local/lib/ray \
>         ESUFFIX= \
>         CC=gcc "$@" -f Rmakefile


What version of gcc is installed on your system?
Check using gcc -v

Looking at the man page for gcc-3.4 on my Debian (Athlon XP) system, I'd 
suggest the following settings:

-march=k8	to enable the AMD64 instructions, implies the same
		argument to -mtune.

-msse2		to enable SSE2 instructions. Without this, the -mfpmath=sse
		option is useless.

-mfpmath=sse,387 this will give you a boost if the SSE unit is separate
		from the old x87 unit but I don't know enough about the K8
		architecture to know if it does. It will try to use both
		execution units, but the man page says it still
		experimental.

-ffast-math	the man page says this is dangerous but I've never noticed 		 
any problems myself. Try it if you want.

Apart from that, wait for upcoming GCC-4.x releases to flesh out its 
optimisation features, in particular auto vectorization. The SSE2 
instruction set can handle double precision FP math, better than the single 
precision in SSE or Altivec. You should theoretically be able to get some 
pretty awesome performance out of that processor. Reality is another matter 
though... :(

My other suggestion would be to check out some Gentoo web sites. Those guys 
are nuts about compiler optimisations :P

bye

From pisuke at blueyonder.co.uk  Mon Jun 27 20:37:08 2005
From: pisuke at blueyonder.co.uk (Francesco Anselmo)
Date: Mon Jun 27 20:38:10 2005
Subject: [Radiance-general] strange artifacts
Message-ID: <1119897428.2733.11.camel@leviathan>

Hi all!

I'm experiencing a strange problem:
http://www.bozzograo.net/radiance/pub/artifacts.jpg

I'm exporting the model of a curved glass with vertex normals
to obj and converting it into a radiance mesh.
I'm using the dielectric material with it, so the glass object has two
surfaces (inner and outer side of glass), but I can't get rid of this
strange effects at the edges, where the quads become triangles.

The remaining part of the surface is fine, even at the center,
where there are some other triangles. I need to subdivide the polygons
many time before this effect becomes less noticeable ...

Any ideas?

Thanks!

-- 
Francesco


From gregoryjward at gmail.com  Mon Jun 27 23:15:46 2005
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Mon Jun 27 23:16:31 2005
Subject: [Radiance-general] strange artifacts
In-Reply-To: <1119897428.2733.11.camel@leviathan>
References: <1119897428.2733.11.camel@leviathan>
Message-ID: <5E046DEC-BAE6-49E7-B731-8A9FF3BFFF56@gmail.com>

Hi Francesco,

This could be a problem with obj2mesh, though at first glance I can't  
spot anything wrong with the code.  Is it possible that whatever  
software is generating the OBJ is being clever and not including  
surface normals on the flat quad vertices?  Say it was including  
surface normals on the vertices next to the edge, where it needs  
them, but not on the interior vertices, which should match the  
geometric surface normals.  In such a case, I could understand why  
obj2mesh would screw up as it converted quads to triangles, some of  
which would have surface normals and others which wouldn't.  Where  
such triangles shared an edge, you would end up with inconsistent  
output like this.

It may be fixable, but I need to get a copy of your OBJ file to study  
it.  Send it to me gzip'ped in a separate e-mail.  (No need to copy  
the group.)

-Greg

P.S.  Out of curiosity, do you get the same results from obj2rad?

> From: Francesco Anselmo <pisuke@blueyonder.co.uk>
> Date: June 27, 2005 7:37:08 PM BDT
>
> Hi all!
>
> I'm experiencing a strange problem:
> http://www.bozzograo.net/radiance/pub/artifacts.jpg
>
> I'm exporting the model of a curved glass with vertex normals
> to obj and converting it into a radiance mesh.
> I'm using the dielectric material with it, so the glass object has two
> surfaces (inner and outer side of glass), but I can't get rid of this
> strange effects at the edges, where the quads become triangles.
>
> The remaining part of the surface is fine, even at the center,
> where there are some other triangles. I need to subdivide the polygons
> many time before this effect becomes less noticeable ...
>
> Any ideas?
>
> Thanks!
> -- 
> Francesco
>

From zrogers at archenergy.com  Tue Jun 28 01:49:56 2005
From: zrogers at archenergy.com (Zack Rogers)
Date: Tue Jun 28 01:50:46 2005
Subject: [Radiance-general] Luminaire octree
In-Reply-To: <42BB07CB.4020706@visarc.com>
References: <42BADDB8.6080104@archenergy.com> <42BAE81A.6030804@visarc.com>
	<42BAFC30.8050602@archenergy.com> <42BB07CB.4020706@visarc.com>
Message-ID: <42C090A4.1000003@archenergy.com>

I am happy to say, after minor brain damage, that I successfully created 
my luminaire block.  My problem, initially, was due to the Radiance 
limitation that light cannot be included in an instance.  My problem 
with the workaround, any of those discussed I think would work - just 
different ways of assembling the pieces, was that I was refering to a 
*.rad file in a my "./parts" directory.  However, inside the *.rad file 
were references to my "./scene" directory which is not a subdirectory of 
"parts" but at the same level.  My RAYPATH definition has the current 
directory "." as a path and so it was simply not finding the files...a 
mistake I probably would have noticed sooner had I not been using a 
Radiance interface (rayfront) and a mistake I probably would have never 
noticed had I not jumped behind the scenes.

Don't know if this will help anyone, but thought I'd post to resolve 
this thread.  Thanks for all the help!
Zack

BTW- Georg, in Rayfront if people try to create "parts" as rad files 
rather than octrees and then replmark them I think it will result in the 
same problem.


-- 
Zack Rogers
Engineer / Daylighting Designer
Architectural Energy Corporation
2540 Frontier Avenue, Suite 201
Boulder, CO 80301 USA

tel (303)444-4149 ext.235
fax (303)444-4304
http://www.archenergy.com


From Rob.Fitzsimmons at Summit.Fiserv.com  Tue Jun 28 02:01:38 2005
From: Rob.Fitzsimmons at Summit.Fiserv.com (Fitzsimmons, Rob)
Date: Tue Jun 28 02:03:43 2005
Subject: [Radiance-general] Luminaire octree
Message-ID: <B8DD8375FCE2C94B9F170D9277C1FA2B8C59BE@corvallis>

How 'bout posting your new rendering?

Rob F

-----Original Message-----
From: Zack Rogers
To: Radiance general discussion
Sent: 6/27/2005 4:49 PM
Subject: [Radiance-general] Luminaire octree

I am happy to say, after minor brain damage, that I successfully created

my luminaire block.  My problem, initially, was due to the Radiance 
limitation that light cannot be included in an instance.  My problem 
with the workaround, any of those discussed I think would work - just 
different ways of assembling the pieces, was that I was refering to a 
*.rad file in a my "./parts" directory.  However, inside the *.rad file 
were references to my "./scene" directory which is not a subdirectory of

"parts" but at the same level.  My RAYPATH definition has the current 
directory "." as a path and so it was simply not finding the files...a 
mistake I probably would have noticed sooner had I not been using a 
Radiance interface (rayfront) and a mistake I probably would have never 
noticed had I not jumped behind the scenes.

Don't know if this will help anyone, but thought I'd post to resolve 
this thread.  Thanks for all the help!
Zack

BTW- Georg, in Rayfront if people try to create "parts" as rad files 
rather than octrees and then replmark them I think it will result in the

same problem.


-- 
Zack Rogers
Engineer / Daylighting Designer
Architectural Energy Corporation
2540 Frontier Avenue, Suite 201
Boulder, CO 80301 USA

tel (303)444-4149 ext.235
fax (303)444-4304
http://www.archenergy.com


_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general

From schorsch at schorsch.com  Tue Jun 28 02:09:55 2005
From: schorsch at schorsch.com (Georg Mischler)
Date: Tue Jun 28 02:10:36 2005
Subject: [Radiance-general] Luminaire octree
In-Reply-To: <42C090A4.1000003@archenergy.com>
References: <42BADDB8.6080104@archenergy.com> <42BAE81A.6030804@visarc.com>
	<42BAFC30.8050602@archenergy.com> <42BB07CB.4020706@visarc.com>
	<42C090A4.1000003@archenergy.com>
Message-ID: <Pine.BSF.4.58.0506272008250.59295@emancholl.pair.com>

Zack Rogers wrote:

> BTW- Georg, in Rayfront if people try to create "parts" as rad files
> rather than octrees and then replmark them I think it will result in the
> same problem.

Any data for use in the "parts" subdirectory should be self
contained. Ideally just one file.


-schorsch

-- 
Georg Mischler  --  simulations developer  --  schorsch at schorsch com
+schorsch.com+  --  lighting design tools  --  http://www.schorsch.com/

From Christoph.Reinhart at nrc-cnrc.gc.ca  Tue Jun 28 03:05:17 2005
From: Christoph.Reinhart at nrc-cnrc.gc.ca (Reinhart, Christoph)
Date: Tue Jun 28 03:06:20 2005
Subject: [Radiance-general] Registration open for 2005 Radiance Workshop
Message-ID: <5910A0754536EA4AAD411AE8221C39622D0C6D@nrccenexb1.nrc.ca>

What: The use of RADIANCE in Design Practice, Research, and Education 

Where: McGill University, School of Architecture, Montreal, Canada 
 
When: August 11th & 12th 2005 (The week before Building Simulation 2005.)
 

Purpose: To provide design practitioners, researchers, and educators with an opportunity to present their work with the Radiance lighting simulation software, and to share ideas and solutions with other attendees. 
 
Radiance users of all levels are welcome.
 
The workshop will be hosted by the National Research Council Canada (NRC) and McGill University, School of Architecture. Workshop organizers are Christoph Reinhart (NRC) and Greg Ward (Anyhere Software). For further information and to register, please go to  <http://irc.nrc-cnrc.gc.ca/ie/light/RadianceWorkshop2005/> http://irc.nrc-cnrc.gc.ca/ie/light/RadianceWorkshop2005/.
 
Christoph and Greg
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20050627/606b4aef/attachment.html
From nina.wittmann at ise.fraunhofer.de  Tue Jun 28 17:25:21 2005
From: nina.wittmann at ise.fraunhofer.de (Nina Wittmann)
Date: Tue Jun 28 17:26:06 2005
Subject: [Radiance-general] RGB to CIE-XYZ
Message-ID: <42C16BE1.7000006@ise.fraunhofer.de>

Hi all!

I have a question about converting RGB to CIE-XYZ with xyz_rgb.cal.

For transforming XYZ into RGB I can use this lines:

rcalc -f xyz_rgb.cal  -e 'ix=$1;iy=$2;iY=$3'  -f xyz_rgb.cal \
 -e 'iX=ix/iy*iY;iZ=(1-ix-iy)/iy*iY'  \
 -e '$1=R(iX,iY,iZ) ; $2=G(iX,iY,iZ) ; $3=B(iX,iY,iZ)'


But there is also a part for calculating CIE-XYZ from RGB values, isn?t it?

Unfortenatly, I don?t know what lines I have to write.

Thanks,

Nina


From raphael.compagnon at eif.ch  Wed Jun 29 09:34:41 2005
From: raphael.compagnon at eif.ch (Raphael Compagnon)
Date: Wed Jun 29 09:35:28 2005
Subject: [Radiance-general] CIE Color Conversion
In-Reply-To: <BAY102-F222D5F80086669A7D4CE65A4EA0@phx.gbl>
Message-ID: <5.1.0.14.2.20050629092800.0208cb10@pop.eif.ch>

Hi Marcs,

These are the formulas you need to convert from Yxy to radiance-rgb:

X=x*Y/y;
Z=(1-x-y)*Y/y;
r=  2.565*X -1.167*Y -0.398*Z;
g= -1.022*X +1.978*Y +0.044*Z;
b=  0.075*X -0.252*Y +1.177*Z;

Raphael

At 23.06.2005 21:20, you wrote:
>Hi All
>
>I have a question about using the existing utilities for converting a CIE 
>(x,y) chromaticity to RGB for use of adjusting the default sun and sky 
>colors. I have researched the following site to get some background about this:
>
>http://www.fourmilab.ch/documents/specrend/
>
> From searching through the archive of this message board I came across a 
> response by Greg to a previous question that I had for adjusting the sun color:
>
>http://www.radiance-online.org/pipermail/radiance-general/2005-January/002263.html
>
>My question is how may I convert from a CIE(x,y) chromaticity to RGB using 
>on two variables as was performed for the above. The Radiance function 
>file xyz_rgb.cal requires three variables (x,y and the luminosity, z). The 
>reason why I am asking this is because I wish for the values that I'll 
>employ to be in the physically valid range (i.e. .265074126*r + 
>.670114631*g + .064811243*b = 1).
>
>Thanks
>
>Marcus
>
>
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general@radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general


From raphael.compagnon at eif.ch  Wed Jun 29 09:38:13 2005
From: raphael.compagnon at eif.ch (Raphael Compagnon)
Date: Wed Jun 29 09:38:55 2005
Subject: [Radiance-general] RGB to CIE-XYZ
In-Reply-To: <42C16BE1.7000006@ise.fraunhofer.de>
Message-ID: <5.1.0.14.2.20050629093634.0207de48@pop.eif.ch>

Hi Nina,

These are the formulas you need to convert from Yxy to radiance-rgb:

X=x*Y/y;
Z=(1-x-y)*Y/y;
r=  2.565*X -1.167*Y -0.398*Z;
g= -1.022*X +1.978*Y +0.044*Z;
b=  0.075*X -0.252*Y +1.177*Z;

Raphael

At 28.06.2005 17:25, you wrote:
>Hi all!
>
>I have a question about converting RGB to CIE-XYZ with xyz_rgb.cal.
>
>For transforming XYZ into RGB I can use this lines:
>
>rcalc -f xyz_rgb.cal  -e 'ix=$1;iy=$2;iY=$3'  -f xyz_rgb.cal \
>-e 'iX=ix/iy*iY;iZ=(1-ix-iy)/iy*iY'  \
>-e '$1=R(iX,iY,iZ) ; $2=G(iX,iY,iZ) ; $3=B(iX,iY,iZ)'
>
>
>But there is also a part for calculating CIE-XYZ from RGB values, isn?t it?
>
>Unfortenatly, I don?t know what lines I have to write.
>
>Thanks,
>
>Nina
>
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general@radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general


From raphael.compagnon at eif.ch  Wed Jun 29 10:32:30 2005
From: raphael.compagnon at eif.ch (Raphael Compagnon)
Date: Wed Jun 29 10:33:12 2005
Subject: [Radiance-general] RGB to CIE-XYZ
In-Reply-To: <42C16BE1.7000006@ise.fraunhofer.de>
Message-ID: <5.1.0.14.2.20050629102533.02080f78@pop.eif.ch>

Sorry my previous answer was just irrelevant to your question...
In fact you need the inverse transformation. Here it is:

X=0.5142*r + 0.3240*g + 0.1618*b;
Y=0.2652*r + 0.6702*g + 0.0646*b;
Z=0.0240*r + 0.1229*g +  0.8531*b;

x=X/(X+Y+Z);
y=Y/(X+Y+Z);
z=Z/(X+Y+Z);

Hope this will help you.

Rapha?l

At 28.06.2005 17:25, you wrote:
>Hi all!
>
>I have a question about converting RGB to CIE-XYZ with xyz_rgb.cal.
>
>For transforming XYZ into RGB I can use this lines:
>
>rcalc -f xyz_rgb.cal  -e 'ix=$1;iy=$2;iY=$3'  -f xyz_rgb.cal \
>-e 'iX=ix/iy*iY;iZ=(1-ix-iy)/iy*iY'  \
>-e '$1=R(iX,iY,iZ) ; $2=G(iX,iY,iZ) ; $3=B(iX,iY,iZ)'
>
>
>But there is also a part for calculating CIE-XYZ from RGB values, isn?t it?
>
>Unfortenatly, I don?t know what lines I have to write.
>
>Thanks,
>
>Nina
>
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general@radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general


From nina.wittmann at ise.fraunhofer.de  Wed Jun 29 15:02:56 2005
From: nina.wittmann at ise.fraunhofer.de (Nina Wittmann)
Date: Wed Jun 29 15:03:39 2005
Subject: [Radiance-general] RGB to CIE-XYZ
References: <5.1.0.14.2.20050629102533.02080f78@pop.eif.ch>
Message-ID: <42C29C00.6000703@ise.fraunhofer.de>

Thank you Raphael, but this is not the thing I wanted to know.

I would like to calculate XYZ from RGB with xyz_rgb.cal.

What I need are the commands that xyz_rgb.cal will calculate it.

rcalc ....

I hope anybody can help me.

Thanks, Nina



Raphael Compagnon schrieb:

> Sorry my previous answer was just irrelevant to your question...
> In fact you need the inverse transformation. Here it is:
>
> X=0.5142*r + 0.3240*g + 0.1618*b;
> Y=0.2652*r + 0.6702*g + 0.0646*b;
> Z=0.0240*r + 0.1229*g +  0.8531*b;
>
> x=X/(X+Y+Z);
> y=Y/(X+Y+Z);
> z=Z/(X+Y+Z);
>
> Hope this will help you.
>
> Rapha?l
>
> At 28.06.2005 17:25, you wrote:
>
>> Hi all!
>>
>> I have a question about converting RGB to CIE-XYZ with xyz_rgb.cal.
>>
>> For transforming XYZ into RGB I can use this lines:
>>
>> rcalc -f xyz_rgb.cal  -e 'ix=$1;iy=$2;iY=$3'  -f xyz_rgb.cal \
>> -e 'iX=ix/iy*iY;iZ=(1-ix-iy)/iy*iY'  \
>> -e '$1=R(iX,iY,iZ) ; $2=G(iX,iY,iZ) ; $3=B(iX,iY,iZ)'
>>
>>
>> But there is also a part for calculating CIE-XYZ from RGB values, 
>> isn?t it?
>>
>> Unfortenatly, I don?t know what lines I have to write.
>>
>> Thanks,
>>
>> Nina
>>
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general@radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
>
>



From gregoryjward at gmail.com  Wed Jun 29 15:29:13 2005
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Wed Jun 29 15:30:12 2005
Subject: [Radiance-general] RGB to CIE-XYZ
In-Reply-To: <42C29C00.6000703@ise.fraunhofer.de>
References: <5.1.0.14.2.20050629102533.02080f78@pop.eif.ch>
	<42C29C00.6000703@ise.fraunhofer.de>
Message-ID: <8B884F14-1F4C-472F-A0EF-0B201C267A5F@gmail.com>

Hi Nina,

Raphael gave the equivalent formula as you get from xyz_rgb.cal  
unless you change the primaries or white point in there.  To use the  
formulas from xyz_rgb.cal, try:

rcalc -f xyz_rgb.cal -e 'iR=$1;iG=$2;iB=$3' -e '$1=X(iR,iG,iB);$2=Y 
(iR,iG,iB);$3=Z(iR,iG,iB)'

As you give R G B on input, you'll get X Y Z on output.

-Greg

> From: Nina Wittmann <nina.wittmann@ise.fraunhofer.de>
> Date: June 29, 2005 3:02:56 PM GMT+02:00
>
> Thank you Raphael, but this is not the thing I wanted to know.
>
> I would like to calculate XYZ from RGB with xyz_rgb.cal.
>
> What I need are the commands that xyz_rgb.cal will calculate it.
>
> rcalc ....
>
> I hope anybody can help me.
>
> Thanks, Nina

From atelier at iebele.nl  Thu Jun 30 15:37:04 2005
From: atelier at iebele.nl (atelier iebele abel)
Date: Thu Jun 30 15:35:16 2005
Subject: [Radiance-general] Compile error on AMD running Fedora 4
In-Reply-To: <42C01F5F.1050009@testers.homelinux.net>
References: <1119830831.31465.43.camel@localhost.localdomain>
	<42C01F5F.1050009@testers.homelinux.net>
Message-ID: <42C3F580.8040208@iebele.nl>

Hi Ian,

I used your recommended gcc options an got an rendering speed 
improvement of 1.035. That is 3.5 % (!).
I used gcc 4.0(etc, I dont know exactly) but did not find any option 
like "auto vectorization". We'll have to wait for that coming up in the 
future i think.
Thanks a lot for figuring out these settings so far !

Iebele




Ian Tester wrote:

> iebele wrote:
>
>> Current rmake command is:
>> #!/bin/sh
>> exec make "SPECIAL=" \
>>         "OPT=-m64 -O3 -mfpmath=sse -DSPEED=200" \
>>         "MACH=-Dlinux -D_FILE_OFFSET_BITS=64 -L/usr/X11R6/lib
>> -I/usr/include/X11 -DNOSTEREO" \
>>         ARCH=IBMPC "COMPAT=bmalloc.o erf.o getpagesize.o" \
>>         INSTDIR=/usr/local/bin \
>>         LIBDIR=/usr/local/lib/ray \
>>         ESUFFIX= \
>>         CC=gcc "$@" -f Rmakefile
>
>
>
> What version of gcc is installed on your system?
> Check using gcc -v
>
> Looking at the man page for gcc-3.4 on my Debian (Athlon XP) system, 
> I'd suggest the following settings:
>
> -march=k8    to enable the AMD64 instructions, implies the same
>         argument to -mtune.
>
> -msse2        to enable SSE2 instructions. Without this, the -mfpmath=sse
>         option is useless.
>
> -mfpmath=sse,387 this will give you a boost if the SSE unit is separate
>         from the old x87 unit but I don't know enough about the K8
>         architecture to know if it does. It will try to use both
>         execution units, but the man page says it still
>         experimental.
>
> -ffast-math    the man page says this is dangerous but I've never 
> noticed          any problems myself. Try it if you want.
>
> Apart from that, wait for upcoming GCC-4.x releases to flesh out its 
> optimisation features, in particular auto vectorization. The SSE2 
> instruction set can handle double precision FP math, better than the 
> single precision in SSE or Altivec. You should theoretically be able 
> to get some pretty awesome performance out of that processor. Reality 
> is another matter though... :(
>
> My other suggestion would be to check out some Gentoo web sites. Those 
> guys are nuts about compiler optimisations :P
>
> bye
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>

From jedev at visarc.com  Thu Jun 30 18:31:42 2005
From: jedev at visarc.com (Jack de Valpine)
Date: Thu Jun 30 18:32:40 2005
Subject: [Radiance-general] Compile error on AMD running Fedora 4
In-Reply-To: <42C3F580.8040208@iebele.nl>
References: <1119830831.31465.43.camel@localhost.localdomain>	<42C01F5F.1050009@testers.homelinux.net>
	<42C3F580.8040208@iebele.nl>
Message-ID: <42C41E6E.8060207@visarc.com>

Hi,

It might also be worth checking Mark Stock's benchmark page:

http://mark.technolope.org/pages/rad_bench.html

for some other compile options.

-Jack

atelier iebele abel wrote:

> Hi Ian,
>
> I used your recommended gcc options an got an rendering speed 
> improvement of 1.035. That is 3.5 % (!).
> I used gcc 4.0(etc, I dont know exactly) but did not find any option 
> like "auto vectorization". We'll have to wait for that coming up in 
> the future i think.
> Thanks a lot for figuring out these settings so far !
>
> Iebele
>
>
>
>
> Ian Tester wrote:
>
>> iebele wrote:
>>
>>> Current rmake command is:
>>> #!/bin/sh
>>> exec make "SPECIAL=" \
>>>         "OPT=-m64 -O3 -mfpmath=sse -DSPEED=200" \
>>>         "MACH=-Dlinux -D_FILE_OFFSET_BITS=64 -L/usr/X11R6/lib
>>> -I/usr/include/X11 -DNOSTEREO" \
>>>         ARCH=IBMPC "COMPAT=bmalloc.o erf.o getpagesize.o" \
>>>         INSTDIR=/usr/local/bin \
>>>         LIBDIR=/usr/local/lib/ray \
>>>         ESUFFIX= \
>>>         CC=gcc "$@" -f Rmakefile
>>
>>
>>
>>
>> What version of gcc is installed on your system?
>> Check using gcc -v
>>
>> Looking at the man page for gcc-3.4 on my Debian (Athlon XP) system, 
>> I'd suggest the following settings:
>>
>> -march=k8    to enable the AMD64 instructions, implies the same
>>         argument to -mtune.
>>
>> -msse2        to enable SSE2 instructions. Without this, the 
>> -mfpmath=sse
>>         option is useless.
>>
>> -mfpmath=sse,387 this will give you a boost if the SSE unit is separate
>>         from the old x87 unit but I don't know enough about the K8
>>         architecture to know if it does. It will try to use both
>>         execution units, but the man page says it still
>>         experimental.
>>
>> -ffast-math    the man page says this is dangerous but I've never 
>> noticed          any problems myself. Try it if you want.
>>
>> Apart from that, wait for upcoming GCC-4.x releases to flesh out its 
>> optimisation features, in particular auto vectorization. The SSE2 
>> instruction set can handle double precision FP math, better than the 
>> single precision in SSE or Altivec. You should theoretically be able 
>> to get some pretty awesome performance out of that processor. Reality 
>> is another matter though... :(
>>
>> My other suggestion would be to check out some Gentoo web sites. 
>> Those guys are nuts about compiler optimisations :P
>>
>> bye
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general@radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>

-- 
#	John E. de Valpine
#	president
#
#	visarc incorporated
#	http://www.visarc.com
#
#	channeling technology for superior design and construction




