From rob.guglielmetti at gmail.com  Fri Oct  7 15:42:35 2011
From: rob.guglielmetti at gmail.com (Rob Guglielmetti)
Date: Fri, 7 Oct 2011 16:42:35 -0600
Subject: [Radiance-general] Strange gendaylit behavior
Message-ID: <CAEkFE9g8dDxbJa1cS4VT1M8RbMBqqX4GaRJSPGmgkgRHUBsnbQ@mail.gmail.com>

I probably have an odd configuration on my machine, but I'm having trouble
diagnosing this problem.

If I call gendaylit with these parameters, I get junk in the output sky
description:

rgugliel$ gendaylit 7 19 19:00:00 -a 39.740000000000002 -o
-105.18000000000001 -m -105.0 -L 0.0 1926.55187439894
# gendaylit 7 19 19:00:00 -a 39.740000000000002 -o -105.18000000000001 -m
-105.0 -L 0.0 1926.55187439894
# Ground ambient level: nan

void brightfunc skyfunc
2 skybright perezlum.cal
0
10 nan nan nan nan nan nan nan -0.907109 0.416674 0.059465

OK, so where is my gendaylit?

which gendaylit
/usr/local/bin/gendaylit

OK, so if I call that specific executable, I get this:

rgugliel$ /usr/local/bin/gendaylit 7 19 19:00:00 -a 39.740000000000002 -o
-105.18000000000001 -m -105.0 -L 0.0 1926.55187439894
# /usr/local/bin/gendaylit 7 19 19:00:00 -a 39.740000000000002 -o
-105.18000000000001 -m -105.0 -L 0.0 1926.55187439894
Warning : skyclearness or skybrightness out of range ;
 Check your input parameters
Warning : skyclearness or skybrightness out of range ;
 Check your input parameters
Warning : skyclearness or skybrightness out of range ;
 Check your input parameters
Warning : skyclearness or skybrightness out of range ;
 Check your input parameters
sky clearness or sky brightness out of range 1.000000
 74434650220083800562091791272162503847257343566676277805826026351882917179884747180439543170910077023728890544527980267722524523537281630301534426272391252609311406925055899551665934885241866457242010167443382973430564036426324486211258871034413056.000000

which is much more useful, because those STERR warnings I can check for and
use an alternative sky generation method for that timestep, or double check
input parameters. The former method slips past my gendaylit STERR checks and
then oconv barfs on that bogus sky description.

I don't THINK I have any other copies of gendaylit lying around, certainly
not in my path, but it appears that either gendaylit behaves differently
when called with a full path (unlikely) or I have something else going on. I
have lost many hairs today grinding on this. This is stupid. Please help.

- Rob
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20111007/0b45679e/attachment.html>

From d.appelfeld at gmail.com  Fri Oct  7 16:13:16 2011
From: d.appelfeld at gmail.com (David Appelfeld)
Date: Fri, 7 Oct 2011 16:13:16 -0700
Subject: [Radiance-general] Strange gendaylit behavior
In-Reply-To: <CAEkFE9g8dDxbJa1cS4VT1M8RbMBqqX4GaRJSPGmgkgRHUBsnbQ@mail.gmail.com>
References: <CAEkFE9g8dDxbJa1cS4VT1M8RbMBqqX4GaRJSPGmgkgRHUBsnbQ@mail.gmail.com>
Message-ID: <CACxOu539nEMu3k9R+8OT2OTELf9oZTv2j0JvNMnjHXAv=ZP5fw@mail.gmail.com>

Hi Rob,
by using your command I am getting error to, but slightly different.

David$ gendaylit 7 19 19:00:00 -a 39.740000000000002 -o -105.18000000000001
-m -105.0 -L 0.0 1926.55187439894
# gendaylit 7 19 19:00:00 -a 39.740000000000002 -o -105.18000000000001 -m
-105.0 -L 0.0 1926.55187439894
Illegal instruction: 4

Is there any reason by using 0.0 as direct normal illuminance after -l
option. By using 0.00000000001 daylight works. I am not sure if this is what
you are looking for.


I am also getting same error "Illegal instruction: 4" when calling gendaylit
by full path.

# gendaylit 7 19 19:00:00 -a 39.740000000000002 -o -105.18000000000001 -m
-105.0 -L 0.00000000000001 1926.55187439894
# Ground ambient level: 4.7

void light solar
0
0
3 8.220e-13 8.220e-13 8.220e-13

solar source sun
0
0
4 -0.907109 0.416674 0.059465 0.533000

void brightfunc skyfunc
2 skybright perezlum.cal
0
10 1.164e+01 9.485e-01 -0.836705 -0.013368 15.728716 -4.116213 1.003109
-0.907109 0.416674 0.059465



David




On 7 October 2011 15:42, Rob Guglielmetti <rob.guglielmetti at gmail.com>wrote:

> I probably have an odd configuration on my machine, but I'm having trouble
> diagnosing this problem.
>
> If I call gendaylit with these parameters, I get junk in the output sky
> description:
>
> rgugliel$ gendaylit 7 19 19:00:00 -a 39.740000000000002 -o
> -105.18000000000001 -m -105.0 -L 0.0 1926.55187439894
> # gendaylit 7 19 19:00:00 -a 39.740000000000002 -o -105.18000000000001 -m
> -105.0 -L 0.0 1926.55187439894
> # Ground ambient level: nan
>
> void brightfunc skyfunc
> 2 skybright perezlum.cal
> 0
> 10 nan nan nan nan nan nan nan -0.907109 0.416674 0.059465
>
> OK, so where is my gendaylit?
>
> which gendaylit
> /usr/local/bin/gendaylit
>
> OK, so if I call that specific executable, I get this:
>
> rgugliel$ /usr/local/bin/gendaylit 7 19 19:00:00 -a 39.740000000000002 -o
> -105.18000000000001 -m -105.0 -L 0.0 1926.55187439894
> # /usr/local/bin/gendaylit 7 19 19:00:00 -a 39.740000000000002 -o
> -105.18000000000001 -m -105.0 -L 0.0 1926.55187439894
> Warning : skyclearness or skybrightness out of range ;
>  Check your input parameters
> Warning : skyclearness or skybrightness out of range ;
>  Check your input parameters
> Warning : skyclearness or skybrightness out of range ;
>  Check your input parameters
> Warning : skyclearness or skybrightness out of range ;
>  Check your input parameters
> sky clearness or sky brightness out of range 1.000000
>  74434650220083800562091791272162503847257343566676277805826026351882917179884747180439543170910077023728890544527980267722524523537281630301534426272391252609311406925055899551665934885241866457242010167443382973430564036426324486211258871034413056.000000
>
> which is much more useful, because those STERR warnings I can check for and
> use an alternative sky generation method for that timestep, or double check
> input parameters. The former method slips past my gendaylit STERR checks and
> then oconv barfs on that bogus sky description.
>
> I don't THINK I have any other copies of gendaylit lying around, certainly
> not in my path, but it appears that either gendaylit behaves differently
> when called with a full path (unlikely) or I have something else going on. I
> have lost many hairs today grinding on this. This is stupid. Please help.
>
> - Rob
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20111007/a4ace39b/attachment.html>

From rob.guglielmetti at gmail.com  Fri Oct  7 17:58:22 2011
From: rob.guglielmetti at gmail.com (Rob Guglielmetti)
Date: Fri, 7 Oct 2011 18:58:22 -0600
Subject: [Radiance-general] Strange gendaylit behavior
In-Reply-To: <CACxOu539nEMu3k9R+8OT2OTELf9oZTv2j0JvNMnjHXAv=ZP5fw@mail.gmail.com>
References: <CAEkFE9g8dDxbJa1cS4VT1M8RbMBqqX4GaRJSPGmgkgRHUBsnbQ@mail.gmail.com>
	<CACxOu539nEMu3k9R+8OT2OTELf9oZTv2j0JvNMnjHXAv=ZP5fw@mail.gmail.com>
Message-ID: <BBE89CC8-6251-4B0A-B09B-78E9D62AAC83@gmail.com>

Hi David, 

The direct normal has been zero for several other timesteps with no error, though. I did temporarily change the code to where if direct or global was zero, I reset it to one, but I'd like to pass in the actual values, if possible, ya know? Maybe I'll try (if 0.0 then 0.0000000001) like you tried, and see how the results come out. What platform are you on? I'm not seeing the "Illegal instruction: 4" error ever...

- Rob



On Oct 7, 2011, at 5:13 PM, David Appelfeld wrote:

> Hi Rob,
> by using your command I am getting error to, but slightly different.
> 
> David$ gendaylit 7 19 19:00:00 -a 39.740000000000002 -o -105.18000000000001 -m -105.0 -L 0.0 1926.55187439894
> # gendaylit 7 19 19:00:00 -a 39.740000000000002 -o -105.18000000000001 -m -105.0 -L 0.0 1926.55187439894
> Illegal instruction: 4
> 
> Is there any reason by using 0.0 as direct normal illuminance after -l option. By using 0.00000000001 daylight works. I am not sure if this is what you are looking for. 
> 
> 
> I am also getting same error "Illegal instruction: 4" when calling gendaylit by full path. 
> 
> # gendaylit 7 19 19:00:00 -a 39.740000000000002 -o -105.18000000000001 -m -105.0 -L 0.00000000000001 1926.55187439894
> # Ground ambient level: 4.7
> 
> void light solar
> 0
> 0
> 3 8.220e-13 8.220e-13 8.220e-13
> 
> solar source sun
> 0
> 0
> 4 -0.907109 0.416674 0.059465 0.533000
> 
> void brightfunc skyfunc
> 2 skybright perezlum.cal
> 0
> 10 1.164e+01 9.485e-01 -0.836705 -0.013368 15.728716 -4.116213 1.003109 -0.907109 0.416674 0.059465 
> 
> 
> 
> David
> 
> 
> 
> 
> On 7 October 2011 15:42, Rob Guglielmetti <rob.guglielmetti at gmail.com> wrote:
> I probably have an odd configuration on my machine, but I'm having trouble diagnosing this problem. 
> 
> If I call gendaylit with these parameters, I get junk in the output sky description:
> 
> rgugliel$ gendaylit 7 19 19:00:00 -a 39.740000000000002 -o -105.18000000000001 -m -105.0 -L 0.0 1926.55187439894
> # gendaylit 7 19 19:00:00 -a 39.740000000000002 -o -105.18000000000001 -m -105.0 -L 0.0 1926.55187439894
> # Ground ambient level: nan
> 
> void brightfunc skyfunc
> 2 skybright perezlum.cal
> 0
> 10 nan nan nan nan nan nan nan -0.907109 0.416674 0.059465 
> 
> OK, so where is my gendaylit?
> 
> which gendaylit
> /usr/local/bin/gendaylit
> 
> OK, so if I call that specific executable, I get this:
> 
> rgugliel$ /usr/local/bin/gendaylit 7 19 19:00:00 -a 39.740000000000002 -o -105.18000000000001 -m -105.0 -L 0.0 1926.55187439894
> # /usr/local/bin/gendaylit 7 19 19:00:00 -a 39.740000000000002 -o -105.18000000000001 -m -105.0 -L 0.0 1926.55187439894
> Warning : skyclearness or skybrightness out of range ; 
>  Check your input parameters
> Warning : skyclearness or skybrightness out of range ; 
>  Check your input parameters
> Warning : skyclearness or skybrightness out of range ; 
>  Check your input parameters
> Warning : skyclearness or skybrightness out of range ; 
>  Check your input parameters
> sky clearness or sky brightness out of range 1.000000     74434650220083800562091791272162503847257343566676277805826026351882917179884747180439543170910077023728890544527980267722524523537281630301534426272391252609311406925055899551665934885241866457242010167443382973430564036426324486211258871034413056.000000
> 
> which is much more useful, because those STERR warnings I can check for and use an alternative sky generation method for that timestep, or double check input parameters. The former method slips past my gendaylit STERR checks and then oconv barfs on that bogus sky description. 
> 
> I don't THINK I have any other copies of gendaylit lying around, certainly not in my path, but it appears that either gendaylit behaves differently when called with a full path (unlikely) or I have something else going on. I have lost many hairs today grinding on this. This is stupid. Please help. 
> 
> - Rob
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
> 
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20111007/ae531363/attachment-0001.html>

From hujia06 at gmail.com  Fri Oct  7 18:00:42 2011
From: hujia06 at gmail.com (Jia Hu)
Date: Fri, 7 Oct 2011 21:00:42 -0400
Subject: [Radiance-general] Strange gendaylit behavior
In-Reply-To: <CACxOu539nEMu3k9R+8OT2OTELf9oZTv2j0JvNMnjHXAv=ZP5fw@mail.gmail.com>
References: <CAEkFE9g8dDxbJa1cS4VT1M8RbMBqqX4GaRJSPGmgkgRHUBsnbQ@mail.gmail.com>
	<CACxOu539nEMu3k9R+8OT2OTELf9oZTv2j0JvNMnjHXAv=ZP5fw@mail.gmail.com>
Message-ID: <CABzgtwr-VqUd6hvHffUNMO7swnVYuavzFP0Uqiex_T2oZWFyTw@mail.gmail.com>

Hi Rob:

I run it in Ubuntu. Please see bellow. It seems no errors.  The error you
got says the sky_brightness is out of range, the upper range of
skybrightness is 0.6. I did check the code but can not figure out why you
have such errors. The skybrightness is calculated by:

diffusirradiance * air_mass() / solar_constant_e*get_eccentricity().

********************
double get_eccentricity()
{
double day_angle;
 double E0;

day_angle  = 2*M_PI*(daynumber - 1)/365;
E0         = 1.00011+0.034221*cos(day_angle)+0.00128*sin(day_angle)+
    0.000719*cos(2*day_angle)+0.000077*sin(2*day_angle);

return (E0);

}
===============================

jiahu at jiahu:~$ gendaylit 7 19 19:00:00 -a 39.740000000000002 -o
-105.18000000000001 -m -105.0 -L 0.0 1926.55187439894
# gendaylit 7 19 19:00:00 -a 39.740000000000002 -o -105.18000000000001 -m
-105.0 -L 0.0 1926.55187439894
# Ground ambient level: 2.8

void brightfunc skyfunc
2 skybright perezlum.cal
0
10 2.091e+00 5.556e-01 0.524236 -0.570392 0.832619 -0.637964 0.014613
-0.907109 0.416674 0.059465

===================================
# /usr/bin/gendaylit 7 19 19:00:00 -a 39.740000000000002 -o
-105.18000000000001 -m -105.0 -L 0.0 1926.55187439894
# Ground ambient level: 2.8

void brightfunc skyfunc
2 skybright perezlum.cal
0
10 2.091e+00 5.556e-01 0.524236 -0.570392 0.832619 -0.637964 0.014613
-0.907109 0.416674 0.059465

=================================
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20111007/a82e3b06/attachment.html>

From rob.guglielmetti at gmail.com  Fri Oct  7 18:41:59 2011
From: rob.guglielmetti at gmail.com (Rob Guglielmetti)
Date: Fri, 7 Oct 2011 19:41:59 -0600
Subject: [Radiance-general] Strange gendaylit behavior
In-Reply-To: <CABzgtwr-VqUd6hvHffUNMO7swnVYuavzFP0Uqiex_T2oZWFyTw@mail.gmail.com>
References: <CAEkFE9g8dDxbJa1cS4VT1M8RbMBqqX4GaRJSPGmgkgRHUBsnbQ@mail.gmail.com>
	<CACxOu539nEMu3k9R+8OT2OTELf9oZTv2j0JvNMnjHXAv=ZP5fw@mail.gmail.com>
	<CABzgtwr-VqUd6hvHffUNMO7swnVYuavzFP0Uqiex_T2oZWFyTw@mail.gmail.com>
Message-ID: <DD22AE50-66BC-48B3-B73C-244DAC945DC6@gmail.com>

Getting the error is a good thing, my problem is that depending on how I call gendaylit, I either get or I don't and it prints garbage. Gendaylit is a little fragile when the sun's near the horizon anyway; Axel Jacobs pointed this out in his "learning rtcontrib" tutorial as well. 

Andy McNeil has a good idea that he illustrated in one of his talks at the Radiance Workshop, he looks for gendaylit errors and if thrown, he uses gensky instead. I'm trying to implement something similar here, but as I said the gendaylit STDERR is behaving unreliably, it seems. Maybe it's best to test for zero values in the weather input data and just default to gensky for those timesteps, or something. 

I dunno, I have a headache. Happy weekend y'all.

- Rob

On Oct 7, 2011, at 7:00 PM, Jia Hu wrote:

> Hi Rob:
> 
> I run it in Ubuntu. Please see bellow. It seems no errors.  The error you got says the sky_brightness is out of range, the upper range of skybrightness is 0.6. I did check the code but can not figure out why you have such errors. The skybrightness is calculated by: 
> 
> diffusirradiance * air_mass() / solar_constant_e*get_eccentricity(). 
> 
> ********************
> double get_eccentricity()
> {
> 	double day_angle;
> 	double E0;
> 
> 	day_angle  = 2*M_PI*(daynumber - 1)/365;
> 	E0         = 1.00011+0.034221*cos(day_angle)+0.00128*sin(day_angle)+
> 	    0.000719*cos(2*day_angle)+0.000077*sin(2*day_angle);
> 
> 	return (E0);
> 
> }
> ===============================
> 
> jiahu at jiahu:~$ gendaylit 7 19 19:00:00 -a 39.740000000000002 -o -105.18000000000001 -m -105.0 -L 0.0 1926.55187439894
> # gendaylit 7 19 19:00:00 -a 39.740000000000002 -o -105.18000000000001 -m -105.0 -L 0.0 1926.55187439894
> # Ground ambient level: 2.8
> 
> void brightfunc skyfunc
> 2 skybright perezlum.cal
> 0
> 10 2.091e+00 5.556e-01 0.524236 -0.570392 0.832619 -0.637964 0.014613 -0.907109 0.416674 0.059465 
> 
> ===================================
> # /usr/bin/gendaylit 7 19 19:00:00 -a 39.740000000000002 -o -105.18000000000001 -m -105.0 -L 0.0 1926.55187439894
> # Ground ambient level: 2.8
> 
> void brightfunc skyfunc
> 2 skybright perezlum.cal
> 0
> 10 2.091e+00 5.556e-01 0.524236 -0.570392 0.832619 -0.637964 0.014613 -0.907109 0.416674 0.059465
> 
> =================================
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20111007/84aeb9d5/attachment.html>

From t.mcminn at curtin.edu.au  Sat Oct  8 00:55:22 2011
From: t.mcminn at curtin.edu.au (Terrance Mc Minn)
Date: Sat, 08 Oct 2011 15:55:22 +0800
Subject: [Radiance-general] Strange gendaylit behavior
In-Reply-To: <mailman.3.1318035533.1309.radiance-general@radiance-online.org>
References: <mailman.3.1318035533.1309.radiance-general@radiance-online.org>
Message-ID: <4E9001EA.4020406@curtin.edu.au>

Hi Rob,

I can replicate your error using the -L 0.0 parameter. However, as you 
increase the number of zeroes out to -L 0.000000000000 the results 
change to issue the warnings reported by David.

file ~/Documents/ray/bin/gendaylit reports on my Mac box:

    gendaylit: Mach-O 64-bit executable x86_64

Looking at the source version of gendaylit I have, it uses atof to 
convert a string to double. I would expect this to be where the odd 
behaviour is coming from with the precision of the -L parameter.

*Terrance Mc Minn
**Lecturer, Department of Architecture
Built Environment
*
*Curtin**University*
*Email |*t.mcminn at curtin.edu.au <a.joske at curtin.edu.au>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20111008/7932c564/attachment.html>

From rob.guglielmetti at gmail.com  Sat Oct  8 07:25:48 2011
From: rob.guglielmetti at gmail.com (Rob Guglielmetti)
Date: Sat, 8 Oct 2011 08:25:48 -0600
Subject: [Radiance-general] Strange gendaylit behavior
In-Reply-To: <4E9001EA.4020406@curtin.edu.au>
References: <mailman.3.1318035533.1309.radiance-general@radiance-online.org>
	<4E9001EA.4020406@curtin.edu.au>
Message-ID: <DC080AE6-4AC0-4618-AE63-029FF4684365@gmail.com>

Hi Terrance,

Thanks for looking at this as well. Always nice to draw you out on to this list! =)

I was fixing to just look at the source myself, as I assumed the answer lied in there. I will revise my script to address this. Thanks all!

- Rob


On Oct 8, 2011, at 1:55 AM, Terrance Mc Minn wrote:

> Hi Rob,
> 
> I can replicate your error using the -L 0.0 parameter. However, as you increase the number of zeroes out to -L 0.000000000000 the results change to issue the warnings reported by David.
> 
> file ~/Documents/ray/bin/gendaylit reports on my Mac box:
> gendaylit: Mach-O 64-bit executable x86_64
> Looking at the source version of gendaylit I have, it uses atof to convert a string to double. I would expect this to be where the odd behaviour is coming from with the precision of the -L parameter.
> 
> Terrance Mc Minn
> Lecturer, Department of Architecture
> Built Environment
> 
> Curtin University
> Email | t.mcminn at curtin.edu.au
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20111008/035540af/attachment-0001.html>

From tbleicher at googlemail.com  Sat Oct  8 07:39:22 2011
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Sat, 8 Oct 2011 09:39:22 -0500
Subject: [Radiance-general] Strange gendaylit behavior
In-Reply-To: <DC080AE6-4AC0-4618-AE63-029FF4684365@gmail.com>
References: <mailman.3.1318035533.1309.radiance-general@radiance-online.org>
	<4E9001EA.4020406@curtin.edu.au>
	<DC080AE6-4AC0-4618-AE63-029FF4684365@gmail.com>
Message-ID: <CAKGV-k26eXfqmgJ-2wRFuWFRfL0MBs6rzsfiVmKtMmsgzVUXZQ@mail.gmail.com>

On Sat, Oct 8, 2011 at 9:25 AM, Rob Guglielmetti <rob.guglielmetti at gmail.com
> wrote:

> I was fixing to just look at the source myself, as I assumed the answer
> lied in there. I will revise my script to address this. Thanks all!
>

Don't mess with The Source, Rob!

I get segfaults for both gendaylit and /usr/local/bin/gendaylit but I'm
chronically behind a couple of versions these days.

I looked at one source file I have around here (v2.3 dated 2009/06/20) but
didn't find anything that would explain a different behaviour depending on
the script name. However, I found that

if (skybrightness<0.05) skybrightness=0.01;

a few times. So you probably can save a few 0s in your input if that helps
you to produce the error message reliably.


Regards,
Thomas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20111008/13c9c5a7/attachment.html>

From rob.guglielmetti at gmail.com  Sat Oct  8 12:08:28 2011
From: rob.guglielmetti at gmail.com (Rob Guglielmetti)
Date: Sat, 8 Oct 2011 13:08:28 -0600
Subject: [Radiance-general] Strange gendaylit behavior
In-Reply-To: <CAKGV-k26eXfqmgJ-2wRFuWFRfL0MBs6rzsfiVmKtMmsgzVUXZQ@mail.gmail.com>
References: <mailman.3.1318035533.1309.radiance-general@radiance-online.org>
	<4E9001EA.4020406@curtin.edu.au>
	<DC080AE6-4AC0-4618-AE63-029FF4684365@gmail.com>
	<CAKGV-k26eXfqmgJ-2wRFuWFRfL0MBs6rzsfiVmKtMmsgzVUXZQ@mail.gmail.com>
Message-ID: <2A5BF4E1-53F9-44E8-B826-D0A858EC433A@gmail.com>

Hi Thomas,

THanks for your input as well! I have good news; in classic Radiance Community fashion, some cool shit has happened. 

Greg told Ian Ashdown about my plight, Ian emailed me directly to tell me he completely re-wrote gendaylit and validated it a couple years ago for one of his clients, and just today decided to open source it! I will try and test it out this weekend, and Ian will get a link to it soon on his website (www.helios32.com). 

Another fine example of the greatness of the people in this community, a fine bunch indeed. 

- Rob


On Oct 8, 2011, at 8:39 AM, Thomas Bleicher wrote:

> On Sat, Oct 8, 2011 at 9:25 AM, Rob Guglielmetti <rob.guglielmetti at gmail.com> wrote:
> I was fixing to just look at the source myself, as I assumed the answer lied in there. I will revise my script to address this. Thanks all!
> 
> Don't mess with The Source, Rob!
> 
> I get segfaults for both gendaylit and /usr/local/bin/gendaylit but I'm chronically behind a couple of versions these days.
> 
> I looked at one source file I have around here (v2.3 dated 2009/06/20) but didn't find anything that would explain a different behaviour depending on the script name. However, I found that
> 
> if (skybrightness<0.05) skybrightness=0.01;
> 
> a few times. So you probably can save a few 0s in your input if that helps you to produce the error message reliably.
> 
> 
> Regards,
> Thomas
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20111008/d0fd1876/attachment.html>

From rob.guglielmetti at gmail.com  Sat Oct  8 12:35:07 2011
From: rob.guglielmetti at gmail.com (Rob Guglielmetti)
Date: Sat, 8 Oct 2011 13:35:07 -0600
Subject: [Radiance-general] Strange gendaylit behavior
In-Reply-To: <CAKGV-k26eXfqmgJ-2wRFuWFRfL0MBs6rzsfiVmKtMmsgzVUXZQ@mail.gmail.com>
References: <mailman.3.1318035533.1309.radiance-general@radiance-online.org>
	<4E9001EA.4020406@curtin.edu.au>
	<DC080AE6-4AC0-4618-AE63-029FF4684365@gmail.com>
	<CAKGV-k26eXfqmgJ-2wRFuWFRfL0MBs6rzsfiVmKtMmsgzVUXZQ@mail.gmail.com>
Message-ID: <BFB62CA9-D54E-4733-91D5-D9C3F828C1CC@gmail.com>

As promised, the following link has, uh, links to Ian Ashdown's updated gendaylit source code and the validation paper:

http://www.helios32.com/news.htm

- Rob G.

From gregoryjward at gmail.com  Mon Oct 10 12:22:04 2011
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Mon, 10 Oct 2011 12:22:04 -0700
Subject: [Radiance-general] Radiance 2012 workshop
Message-ID: <84D4F9C7-FA67-45DB-8195-2D94D777A084@gmail.com>

Nicolas Roy of Velux and his friends at the Royal Danish Academy of Fine Art, School of Architecture have offered to host the 11th Radiance Workshop next year in Copenhagen.  The proposed dates fall into two August possibilities:

	a)  August 20-24
	b)  August 27-31

As usual, we appreciate any input as to conflicts or synergy these dates may have with other conferences distant or nearby.  Please respond to the list so we can have a discussion.

Best,
-Greg

From shakespe at indiana.edu  Mon Oct 10 12:36:28 2011
From: shakespe at indiana.edu (Shakespeare, Robert A.)
Date: Mon, 10 Oct 2011 19:36:28 +0000
Subject: [Radiance-general] Radiance 2012 workshop
In-Reply-To: <84D4F9C7-FA67-45DB-8195-2D94D777A084@gmail.com>
References: <84D4F9C7-FA67-45DB-8195-2D94D777A084@gmail.com>
Message-ID: <2A1FD18147050B498AC9724AD18ADB3D28FBB8B1@IU-MSSG-MBX104.ads.iu.edu>

I cannot identify any significant professional meeting/conference conflicts with these dates. I am personally unable to attend 20-24, but the 27-31 is most viable.

-Rob Shakespeare

-----Original Message-----
From: Gregory J. Ward [mailto:gregoryjward at gmail.com] 
Sent: Monday, October 10, 2011 3:22 PM
To: Radiance general discussion
Subject: [Radiance-general] Radiance 2012 workshop

Nicolas Roy of Velux and his friends at the Royal Danish Academy of Fine Art, School of Architecture have offered to host the 11th Radiance Workshop next year in Copenhagen.  The proposed dates fall into two August possibilities:

	a)  August 20-24
	b)  August 27-31

As usual, we appreciate any input as to conflicts or synergy these dates may have with other conferences distant or nearby.  Please respond to the list so we can have a discussion.

Best,
-Greg
_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general


From rob.guglielmetti at gmail.com  Tue Oct 11 10:20:21 2011
From: rob.guglielmetti at gmail.com (Rob Guglielmetti)
Date: Tue, 11 Oct 2011 11:20:21 -0600
Subject: [Radiance-general] Radiance 2012 workshop
In-Reply-To: <2A1FD18147050B498AC9724AD18ADB3D28FBB8B1@IU-MSSG-MBX104.ads.iu.edu>
References: <84D4F9C7-FA67-45DB-8195-2D94D777A084@gmail.com>
	<2A1FD18147050B498AC9724AD18ADB3D28FBB8B1@IU-MSSG-MBX104.ads.iu.edu>
Message-ID: <CAEkFE9i3kWhjGxJQCVU7HqPLpgqOGLsr0fE_7TEtMtH5Usn_1w@mail.gmail.com>

BuildingSim will be in the US again in 2012, and it's usually in August
sometime. I don't see they've posted an announcement yet, however.

Kudos to Nicolas for the offer and for getting this planned so early out!

- Rob !Shakespeare

On Mon, Oct 10, 2011 at 1:36 PM, Shakespeare, Robert A. <
shakespe at indiana.edu> wrote:

> I cannot identify any significant professional meeting/conference conflicts
> with these dates. I am personally unable to attend 20-24, but the 27-31 is
> most viable.
>
> -Rob Shakespeare
>
> -----Original Message-----
> From: Gregory J. Ward [mailto:gregoryjward at gmail.com]
> Sent: Monday, October 10, 2011 3:22 PM
> To: Radiance general discussion
> Subject: [Radiance-general] Radiance 2012 workshop
>
> Nicolas Roy of Velux and his friends at the Royal Danish Academy of Fine
> Art, School of Architecture have offered to host the 11th Radiance Workshop
> next year in Copenhagen.  The proposed dates fall into two August
> possibilities:
>
>        a)  August 20-24
>        b)  August 27-31
>
> As usual, we appreciate any input as to conflicts or synergy these dates
> may have with other conferences distant or nearby.  Please respond to the
> list so we can have a discussion.
>
> Best,
> -Greg
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20111011/f185cd9a/attachment.html>

From jan.wienold at ise.fraunhofer.de  Tue Oct 11 10:56:06 2011
From: jan.wienold at ise.fraunhofer.de (Jan Wienold)
Date: Tue, 11 Oct 2011 19:56:06 +0200
Subject: [Radiance-general] Radiance 2012 workshop
In-Reply-To: <84D4F9C7-FA67-45DB-8195-2D94D777A084@gmail.com>
References: <84D4F9C7-FA67-45DB-8195-2D94D777A084@gmail.com>
Message-ID: <4E948336.5000305@ise.fraunhofer.de>

I like the idea going to Denmark and Velux!

But the dates are full in the summer vacation time of south Germany
(they last until 8th Sept).
So in order not to exclude potential participants with school children
later workshop dates would be preferable -as they were usual in the past.

Best,

Jan


Gregory J. Ward wrote:
> Nicolas Roy of Velux and his friends at the Royal Danish Academy of Fine Art, School of Architecture have offered to host the 11th Radiance Workshop next year in Copenhagen.  The proposed dates fall into two August possibilities:
>
> 	a)  August 20-24
> 	b)  August 27-31
>
> As usual, we appreciate any input as to conflicts or synergy these dates may have with other conferences distant or nearby.  Please respond to the list so we can have a discussion.
>
> Best,
> -Greg
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>   


-- 
Dr.-Ing. Jan Wienold
Project Manager
Fraunhofer-Institut f?r Solare Energiesysteme
Thermal Systems and Buildings, Lighting and Daylighting
Heidenhofstr. 2, 79110 Freiburg, Germany
Phone: +49(0)761 4588 5133 Fax:+49(0)761 4588 9133
jan.wienold at ise.fraunhofer.de
http://www.ise.fraunhofer.de

In office: 
Mo,Tue: 8:30-18:00
We,Thu: 8:30-16:00
Fr:  8:30-15:30



From reinhart at gsd.harvard.edu  Tue Oct 11 13:38:54 2011
From: reinhart at gsd.harvard.edu (Reinhart, Christoph)
Date: Tue, 11 Oct 2011 20:38:54 +0000
Subject: [Radiance-general] Radiance 2012 workshop
In-Reply-To: <CAEkFE9i3kWhjGxJQCVU7HqPLpgqOGLsr0fE_7TEtMtH5Usn_1w@mail.gmail.com>
References: <84D4F9C7-FA67-45DB-8195-2D94D777A084@gmail.com>
	<2A1FD18147050B498AC9724AD18ADB3D28FBB8B1@IU-MSSG-MBX104.ads.iu.edu>
	<CAEkFE9i3kWhjGxJQCVU7HqPLpgqOGLsr0fE_7TEtMtH5Usn_1w@mail.gmail.com>
Message-ID: <6B2919014FFF0D49A0F961B3CFCDAAEA042AD1@ENTWEXMB0000005.university.harvard.edu>

Copenhagen sounds wonderful. SimBuild 2011 will be August 1-3 2012 in Madison, WI.

Christoph

From: Rob Guglielmetti [mailto:rob.guglielmetti at gmail.com]
Sent: Tuesday, October 11, 2011 1:20 PM
To: Radiance general discussion
Subject: Re: [Radiance-general] Radiance 2012 workshop

BuildingSim will be in the US again in 2012, and it's usually in August sometime. I don't see they've posted an announcement yet, however.

Kudos to Nicolas for the offer and for getting this planned so early out!

- Rob !Shakespeare
On Mon, Oct 10, 2011 at 1:36 PM, Shakespeare, Robert A. <shakespe at indiana.edu<mailto:shakespe at indiana.edu>> wrote:
I cannot identify any significant professional meeting/conference conflicts with these dates. I am personally unable to attend 20-24, but the 27-31 is most viable.

-Rob Shakespeare

-----Original Message-----
From: Gregory J. Ward [mailto:gregoryjward at gmail.com<mailto:gregoryjward at gmail.com>]
Sent: Monday, October 10, 2011 3:22 PM
To: Radiance general discussion
Subject: [Radiance-general] Radiance 2012 workshop

Nicolas Roy of Velux and his friends at the Royal Danish Academy of Fine Art, School of Architecture have offered to host the 11th Radiance Workshop next year in Copenhagen.  The proposed dates fall into two August possibilities:

       a)  August 20-24
       b)  August 27-31

As usual, we appreciate any input as to conflicts or synergy these dates may have with other conferences distant or nearby.  Please respond to the list so we can have a discussion.

Best,
-Greg
_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org<mailto:Radiance-general at radiance-online.org>
http://www.radiance-online.org/mailman/listinfo/radiance-general

_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org<mailto:Radiance-general at radiance-online.org>
http://www.radiance-online.org/mailman/listinfo/radiance-general

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20111011/f4fd0196/attachment.html>

From Wendelin.Sprenger at ise.fraunhofer.de  Thu Oct 13 02:25:40 2011
From: Wendelin.Sprenger at ise.fraunhofer.de (Wendelin.Sprenger at ise.fraunhofer.de)
Date: Thu, 13 Oct 2011 11:25:40 +0200
Subject: [Radiance-general] rtcontrib -n
Message-ID: <OF8AF61F94.3FA8FC6E-ONC1257928.0033B10A-C1257928.0033C9D6@ise.fhg.de>

Hello everybody,

working with rtcontrib, I have problems to use more than one core. While 
the main rtcontrib process
works at 100% CPU load, the rtrace processes only work at 5% CPU load.
The reason may be connected with the -x option of rtrace that I don't 
understand. This is the rtrace process automatically generated by 
rtcontrib:

rtrace -dj .9 -dr 3 -ab 1 -ad 350 -ab 3 -ad 1024 -lw .0003 -ld- -ti 
sky_glow -w -h- -x 1 -y 0 -dt 0 -as 0 -aa 0 -o~~TmWdp -PP pfg5s274 -fff 
ground.oct
As can be seen, the -x option is set 1 while the -y option is set 0.

Reading the man page of rtrace concerning the -n option, it reads:
"There is no benefit from specifying more processes than there are cores 
available on the system or the -x setting, which forces a wait at each 
flush."

However, I don't understand what that means or what the -x and -y options 
of rtrace do exactly.
How can I reach 100% CPU load also for the rtrace subprocesses?

Thanks for your help.
Wendelin Sprenger

___________________________________
Mag.rer.nat. Wendelin Sprenger
Division Thermal Systems and Buildings
Fraunhofer Institute for Solar Energy Systems ISE
Heidenhofstr. 2, 79110 Freiburg, Germany
Phone: +49 (0) 7 61/ 45 88-57 45
wendelin.sprenger at ise.fraunhofer.de
http://www.ise.fraunhofer.de
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20111013/990fe291/attachment.html>

From gregoryjward at gmail.com  Thu Oct 13 07:17:42 2011
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu, 13 Oct 2011 07:17:42 -0700
Subject: [Radiance-general] rtcontrib -n
In-Reply-To: <OF8AF61F94.3FA8FC6E-ONC1257928.0033B10A-C1257928.0033C9D6@ise.fhg.de>
References: <OF8AF61F94.3FA8FC6E-ONC1257928.0033B10A-C1257928.0033C9D6@ise.fhg.de>
Message-ID: <3240FF28-08F5-4300-84F9-C2F05F1EE2A0@lmi.net>

Hello Wendelin,

Good sleuth work, but in fact since rtcontrib doesn't employ the -n option of rtrace, the flushing behavior doesn't affect efficiency in this case.  The problem is that the controlling process in rtcontrib is often the bottleneck in these calculations.  Unless each primary ray sent to rtrace spawns many, many daughter rays, most of the time overall will be spent communicating with and collecting results from the multiple rtrace child processes that the rtcontrib parent process creates.

I have looked at the possibility of changing the way I partition the problem to put more work into the subprocesses, but the logic for that has thus far eluded me.  The rtcontrib program is quite complicated, and I would rather not increase its complexity further.  The only way I've found to effectively speed up rtcontrib on multiple cores when each rtrace process is churning through many rays quickly is to subdivide the input and reassemble it at the end.  This is a bit painful and requires some book-keeping on the part of the user, but for difficult or repetitive problems it may be worth the effort.

Best of luck,
-Greg

> From: Wendelin.Sprenger at ise.fraunhofer.de
> Date: October 13, 2011 2:25:40 AM PDT
> 
> Hello everybody, 
> 
> working with rtcontrib, I have problems to use more than one core. While the main rtcontrib process
> works at 100% CPU load, the rtrace processes only work at 5% CPU load. 
> The reason may be connected with the -x option of rtrace that I don't understand. This is the rtrace process automatically generated by rtcontrib: 
> 
> rtrace -dj .9 -dr 3 -ab 1 -ad 350 -ab 3 -ad 1024 -lw .0003 -ld- -ti sky_glow -w -h- -x 1 -y 0 -dt 0 -as 0 -aa 0 -o~~TmWdp -PP pfg5s274 -fff ground.oct 
> As can be seen, the -x option is set 1 while the -y option is set 0. 
> 
> Reading the man page of rtrace concerning the -n option, it reads: 
> "There is no benefit from specifying more processes than there are cores available on the system or the -x setting, which forces a wait at each flush." 
> 
> However, I don't understand what that means or what the -x and -y options of rtrace do exactly. 
> How can I reach 100% CPU load also for the rtrace subprocesses? 
> 
> Thanks for your help. 
> Wendelin Sprenger 


From johnford at bb3.net.au  Thu Oct 20 18:21:04 2011
From: johnford at bb3.net.au (John Ford)
Date: Fri, 21 Oct 2011 12:21:04 +1100
Subject: [Radiance-general] error combining rtcontrib patches
Message-ID: <CA734CA9-6D52-4171-86BC-E668C685D2C6@bb3.net.au>

Hi, 

I'm getting an error while running Axel's apply_tregsamp.bash script, I think it's happening in the pcomb process. 

log10: range error
179/179*10^
                     ^ unexpected character

(The caret points to the caret after the 10 in the terminal output, in case it doesn't appear that way in your email reader). 

I'm using MF=2 and reinhart.cal on OSX. Any hints?

Thanks, 

John Ford.




From robert.harsono.ong at gmail.com  Thu Oct 20 18:57:08 2011
From: robert.harsono.ong at gmail.com (Robert Ong)
Date: Fri, 21 Oct 2011 09:57:08 +0800
Subject: [Radiance-general] accounting for irradiance due to ultraviolet in
	rtrace
Message-ID: <4EA0D174.7030308@gmail.com>

Dear All,

I'm wondering how to account for the irradiance caused by UV in rtrace. 
I know by default (visible light) this is normally implemented
irradiance = 0.265*R_illum + 0.67*G_illum +0.065*B_illum

Thanks for your time and attention.

Kind Regards,
Robert




From grobe at gmx.net  Fri Oct 21 01:49:45 2011
From: grobe at gmx.net (Lars O. Grobe)
Date: Fri, 21 Oct 2011 10:49:45 +0200
Subject: [Radiance-general] accounting for irradiance due to ultraviolet
 in rtrace
In-Reply-To: <4EA0D174.7030308@gmail.com>
References: <4EA0D174.7030308@gmail.com>
Message-ID: <4EA13229.40309@gmx.net>

Hi!

> I'm wondering how to account for the irradiance caused by UV in rtrace.
> I know by default (visible light) this is normally implemented
> irradiance = 0.265*R_illum + 0.67*G_illum +0.065*B_illum

That assumes useage of the three channels for RGB. If you decide to use
another wavelength range, you have two options:

1) Use one of the three channels for that wavelength range - and then,
use the radiance covered by that channel, so no summing up of channels.

2) Set all three channels to the same. E.g. use all three with equal
values for your UV range. That means a "grey" image. Then you can use
any channel to get results. Advantage is that in some few places in the
code, useage of the three channels for RGB is assumed. This might lead
to some wrong weighting if you choose option 1), so 2) seams to be
preferable here.

Besides, laws of physics apply...

Cheers, Lars.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4438 bytes
Desc: S/MIME Kryptografische Unterschrift
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20111021/a2972a5d/attachment.bin>

From Christopher.Rush at arup.com  Fri Oct 21 06:50:24 2011
From: Christopher.Rush at arup.com (Christopher Rush)
Date: Fri, 21 Oct 2011 09:50:24 -0400
Subject: [Radiance-general] accounting for irradiance due to ultraviolet
 in rtrace
In-Reply-To: <4EA13229.40309@gmx.net>
References: <4EA0D174.7030308@gmail.com> <4EA13229.40309@gmx.net>
Message-ID: <28285BAEA8C0814DBF1B199C876EC5B04E19BDB0D5@AMXEXC01.global.arup.com>

You also have to consider how to develop your source and material definitions. Luminaires are typically measured for output only in visible spectrum, and skies in either visible or full solar spectrum. If you have a known source definition in the visible range, and you know how much UV the same source generates per W of visible or total solar, maybe you can scale your results according to UV. Or if you know the source UV output of your source directly, you might treat it the same as if it's the Watts in the visible range for your input and output through Radiance (but do a sanity check on your results and careful that you're not off by a factor of 179 for the de facto lumens per Watt Radiance conversion). You also have to consider that surfaces might reflect or transmit UV in different proportions than for the visible or solar spectrum.
____________________________________________________________
Electronic mail messages entering and leaving Arup  business
systems are scanned for acceptability of content and viruses



From amcneil at lbl.gov  Fri Oct 21 09:11:08 2011
From: amcneil at lbl.gov (Andy McNeil)
Date: Fri, 21 Oct 2011 09:11:08 -0700
Subject: [Radiance-general] error combining rtcontrib patches
In-Reply-To: <CA734CA9-6D52-4171-86BC-E668C685D2C6@bb3.net.au>
References: <CA734CA9-6D52-4171-86BC-E668C685D2C6@bb3.net.au>
Message-ID: <96BBED71-4A93-46EC-8C32-014F1C1C18F8@lbl.gov>

Hi John,

Can you send the full command?  It doesn't look like the error comes from apply_tregsamp.bash but instead something around it on the command line.

Also, dctimestep can replace the pcomb and apply_tregsamp step in Axel's tutorial.  It's much faster and simpler.  The command would look something like this:
	dctimestep images/patches/p%03d.hdr tmp/skydist.dat > images/combined_skyvec.hdr

Andy


On Oct 20, 2011, at 6:21 PM, John Ford wrote:

> Hi, 
> 
> I'm getting an error while running Axel's apply_tregsamp.bash script, I think it's happening in the pcomb process. 
> 
> log10: range error
> 179/179*10^
>                     ^ unexpected character
> 
> (The caret points to the caret after the 10 in the terminal output, in case it doesn't appear that way in your email reader). 
> 
> I'm using MF=2 and reinhart.cal on OSX. Any hints?
> 
> Thanks, 
> 
> John Ford.
> 
> 
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20111021/2523ac7d/attachment.html>

From rob.guglielmetti at gmail.com  Fri Oct 21 09:15:29 2011
From: rob.guglielmetti at gmail.com (Rob Guglielmetti)
Date: Fri, 21 Oct 2011 10:15:29 -0600
Subject: [Radiance-general] error combining rtcontrib patches
In-Reply-To: <96BBED71-4A93-46EC-8C32-014F1C1C18F8@lbl.gov>
References: <CA734CA9-6D52-4171-86BC-E668C685D2C6@bb3.net.au>
	<96BBED71-4A93-46EC-8C32-014F1C1C18F8@lbl.gov>
Message-ID: <3E173CA7-C41F-48BF-AAF6-16C75347887C@gmail.com>

On Oct 21, 2011, at 10:11 AM, Andy McNeil wrote:

> Also, dctimestep can replace the pcomb and apply_tregsamp step in Axel's tutorial.  It's much faster and simpler.  The command would look something like this:
> 	dctimestep images/patches/p%03d.hdr tmp/skydist.dat > images/combined_skyvec.hdr


Yep, dctimestep is basically the "thing" that "someone" needed to create six years ago when rtcontrib first showed up on the scene. (Thanks Greg!)

- Rob

From johnford at bb3.net.au  Fri Oct 21 23:38:24 2011
From: johnford at bb3.net.au (John Ford)
Date: Sat, 22 Oct 2011 17:38:24 +1100
Subject: [Radiance-general] error combining rtcontrib patches
In-Reply-To: <96BBED71-4A93-46EC-8C32-014F1C1C18F8@lbl.gov>
References: <CA734CA9-6D52-4171-86BC-E668C685D2C6@bb3.net.au>
	<96BBED71-4A93-46EC-8C32-014F1C1C18F8@lbl.gov>
Message-ID: <75382E97-A6FA-4E00-9D54-8C38162FEAB6@bb3.net.au>

Andy, 

That worked, after downloading the latest dctimestep from radiance-online.org. And much quicker. The man page doesn't explain the two argument option. I was thoroughly confused by dctimestep last time I looked at it. This explains it: http://www.jaloxa.eu/mirrors/radiance_workshops/2010/PDF/RadianceImprovements.pdf

Thanks, 

John. 



JOHN FORD

BLUEBOTTLE
FORTY THREE STAWELL STREET
NORTH MELBOURNE 3051
PHONE  03 9329 0709
FAX 03 9329 1780

WWW.BB3.NET.AU
JOHNFORD at BB3.NET.AU
MOBILE 0411 519 738




On 22/10/2011, at 3:11 AM, Andy McNeil wrote:

> Hi John,
> 
> Can you send the full command?  It doesn't look like the error comes from apply_tregsamp.bash but instead something around it on the command line.
> 
> Also, dctimestep can replace the pcomb and apply_tregsamp step in Axel's tutorial.  It's much faster and simpler.  The command would look something like this:
> 	dctimestep images/patches/p%03d.hdr tmp/skydist.dat > images/combined_skyvec.hdr
> 
> Andy
> 
> 
> On Oct 20, 2011, at 6:21 PM, John Ford wrote:
> 
>> Hi, 
>> 
>> I'm getting an error while running Axel's apply_tregsamp.bash script, I think it's happening in the pcomb process. 
>> 
>> log10: range error
>> 179/179*10^
>>                     ^ unexpected character
>> 
>> (The caret points to the caret after the 10 in the terminal output, in case it doesn't appear that way in your email reader). 
>> 
>> I'm using MF=2 and reinhart.cal on OSX. Any hints?
>> 
>> Thanks, 
>> 
>> John Ford.
>> 
>> 
>> 
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20111022/172bfc3e/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: pastedGraphic.tiff
Type: image/tiff
Size: 6542 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20111022/172bfc3e/attachment.tiff>

From robert.harsono.ong at gmail.com  Sun Oct 23 08:14:35 2011
From: robert.harsono.ong at gmail.com (Robert Ong)
Date: Sun, 23 Oct 2011 23:14:35 +0800
Subject: [Radiance-general] accounting for irradiance due to ultraviolet
 in rtrace
In-Reply-To: <4EA13229.40309@gmx.net>
References: <4EA0D174.7030308@gmail.com> <4EA13229.40309@gmx.net>
Message-ID: <4EA42F5B.9050400@gmail.com>

Hi Lars and Chris,

Thank you all for constructive discussions.

I should've pointed out earlier that I'm only a novice user in Radiance.

@Lars: do you mean like this? rcalc -e '$1=($1*0.33+$2*0.33+$3*0.33)' or 
rcalc -e '$1=0.4*($1*0.265+$2*0.67+$3*0.065)' ? the factor of 0.4 comes 
from dividing the wavelength spectrum of UVR (120-400nm) to PAR 
(400-700nm)...

@Chris: do you mean I should scale my source and material definition by 4?

My apology if I didn't grasp your points clearly.

Thanks once again for your time and attention.

Kind Regards,
Robert


On 21/10/11 16:49, Lars O. Grobe wrote:
> Hi!
>
>> I'm wondering how to account for the irradiance caused by UV in rtrace.
>> I know by default (visible light) this is normally implemented
>> irradiance = 0.265*R_illum + 0.67*G_illum +0.065*B_illum
> That assumes useage of the three channels for RGB. If you decide to use
> another wavelength range, you have two options:
>
> 1) Use one of the three channels for that wavelength range - and then,
> use the radiance covered by that channel, so no summing up of channels.
>
> 2) Set all three channels to the same. E.g. use all three with equal
> values for your UV range. That means a "grey" image. Then you can use
> any channel to get results. Advantage is that in some few places in the
> code, useage of the three channels for RGB is assumed. This might lead
> to some wrong weighting if you choose option 1), so 2) seams to be
> preferable here.
>
> Besides, laws of physics apply...
>
> Cheers, Lars.
>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20111023/773f7ec3/attachment.html>

From grobe at gmx.net  Sun Oct 23 15:34:54 2011
From: grobe at gmx.net (Lars O. Grobe)
Date: Mon, 24 Oct 2011 01:34:54 +0300
Subject: [Radiance-general] accounting for irradiance due to ultraviolet
	in rtrace
In-Reply-To: <4EA42F5B.9050400@gmail.com>
References: <4EA0D174.7030308@gmail.com> <4EA13229.40309@gmx.net>
	<4EA42F5B.9050400@gmail.com>
Message-ID: <074ED806-4F1F-46D3-BFAF-DF698CFC34E6@gmx.net>

Hi!
> @Lars: do you mean like this? rcalc -e '$1=($1*0.33+$2*0.33+$3*0.33)' or rcalc -e '$1=0.4*($1*0.265+$2*0.67+$3*0.065)'

None of the above... ;-)

I recommend setting all three channels to the same value. E.g. if a diffuse surface reflects 50% of UV radiation, I'd use

void plastic diffuse50
0
0
5 .5 .5 .5 0 0

Of course you must have defined what wavelength range to consider. And apply that to all materials, sources, and interpret the results. Then, the result of any channel can be taken, or, in rcalc terms, $1=$1 and $1=$2 and $1=$3 should all be valid.

> ? the factor of 0.4 comes from dividing the wavelength spectrum of UVR (120-400nm) to PAR (400-700nm)...

I did not understand this, but probably you do not want this...

So maybe to explain things, Radiance is a raytracer that outputs results in watts, which implies that you define some wavelength range. To make life easier for lighting applications, it calculates three ranges in parallel, and most people use this for red, green and blue. What I recommended is, as you have only one range that you are interested in, to set the first channel to UV. This will be the only channel you are interested in. Only to be on the safe side, set the second and third channel to the same values, to avoid strange effects due to weighting. Still you use only one channel, and no multiplications using rcalc.

Ah, and please get a copy of Rendering with Radiance. It will be very helpful!

Cheers, Lars.

From robert.harsono.ong at gmail.com  Sun Oct 23 18:56:01 2011
From: robert.harsono.ong at gmail.com (Robert Ong)
Date: Mon, 24 Oct 2011 09:56:01 +0800
Subject: [Radiance-general] accounting for irradiance due to ultraviolet
 in rtrace
In-Reply-To: <074ED806-4F1F-46D3-BFAF-DF698CFC34E6@gmx.net>
References: <4EA0D174.7030308@gmail.com>
	<4EA13229.40309@gmx.net>	<4EA42F5B.9050400@gmail.com>
	<074ED806-4F1F-46D3-BFAF-DF698CFC34E6@gmx.net>
Message-ID: <4EA4C5B1.9020201@gmail.com>

Hi Lars,

Thanks for the feedback.

Do you mind if I ask how to define the wavelength range in Radiance? UV 
spectrum is normally starts from 120 to 400nm.

Thanks once again.

Kind Regards,
Robert

On 24/10/11 06:34, Lars O. Grobe wrote:
> Hi!
>> @Lars: do you mean like this? rcalc -e '$1=($1*0.33+$2*0.33+$3*0.33)' or rcalc -e '$1=0.4*($1*0.265+$2*0.67+$3*0.065)'
> None of the above... ;-)
>
> I recommend setting all three channels to the same value. E.g. if a diffuse surface reflects 50% of UV radiation, I'd use
>
> void plastic diffuse50
> 0
> 0
> 5 .5 .5 .5 0 0
>
> Of course you must have defined what wavelength range to consider. And apply that to all materials, sources, and interpret the results. Then, the result of any channel can be taken, or, in rcalc terms, $1=$1 and $1=$2 and $1=$3 should all be valid.
>
>> ? the factor of 0.4 comes from dividing the wavelength spectrum of UVR (120-400nm) to PAR (400-700nm)...
> I did not understand this, but probably you do not want this...
>
> So maybe to explain things, Radiance is a raytracer that outputs results in watts, which implies that you define some wavelength range. To make life easier for lighting applications, it calculates three ranges in parallel, and most people use this for red, green and blue. What I recommended is, as you have only one range that you are interested in, to set the first channel to UV. This will be the only channel you are interested in. Only to be on the safe side, set the second and third channel to the same values, to avoid strange effects due to weighting. Still you use only one channel, and no multiplications using rcalc.
>
> Ah, and please get a copy of Rendering with Radiance. It will be very helpful!
>
> Cheers, Lars.
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general



From gregoryjward at gmail.com  Sun Oct 23 19:26:47 2011
From: gregoryjward at gmail.com (Greg Ward)
Date: Sun, 23 Oct 2011 19:26:47 -0700
Subject: [Radiance-general] accounting for irradiance due to ultraviolet
	in rtrace
In-Reply-To: <4EA4C5B1.9020201@gmail.com>
References: <4EA0D174.7030308@gmail.com>
	<4EA13229.40309@gmx.net>	<4EA42F5B.9050400@gmail.com>
	<074ED806-4F1F-46D3-BFAF-DF698CFC34E6@gmx.net>
	<4EA4C5B1.9020201@gmail.com>
Message-ID: <8B6E9226-5BE9-4703-BCD7-0FB473C11261@lmi.net>

Hi Robert,

Radiance doesn't explicitly define wavelength ranges or anything of the sort.  By convention, the three channels provided are typically used for RGB data in a color space that is close to (but unfortunately not exactly equal to) the CCIR-709 primaries used by sRGB.  This is the assumption if no other information is given in a Radiance RGBE image. 

However, you can redefine these channels to mean whatever you like.  Since Radiance treats them independently in its calculations, as it has no wavelength-dependent simulations, it really doesn't matter.  You will of course need to define your materials differently with appropriate reflectances and transmittances for UV instead of visible, but the rest should just work.

The important caveats to remember are that for IR radiation, surface temperature matters, and Radiance does not computer or keep track of that.  In the case of UV, Radiance does not simulate phosphorescence, which may or may not matter to you.

Best,
-Greg

> From: Robert Ong <robert.harsono.ong at gmail.com>
> Date: October 23, 2011 6:56:01 PM PDT
> 
> Hi Lars,
> 
> Thanks for the feedback.
> 
> Do you mind if I ask how to define the wavelength range in Radiance? UV spectrum is normally starts from 120 to 400nm.
> 
> Thanks once again.
> 
> Kind Regards,
> Robert


From Christopher.Rush at arup.com  Mon Oct 24 07:17:32 2011
From: Christopher.Rush at arup.com (Christopher Rush)
Date: Mon, 24 Oct 2011 10:17:32 -0400
Subject: [Radiance-general] accounting for irradiance due to ultraviolet
 in rtrace
In-Reply-To: <4EA42F5B.9050400@gmail.com>
References: <4EA0D174.7030308@gmail.com> <4EA13229.40309@gmx.net>
	<4EA42F5B.9050400@gmail.com>
Message-ID: <28285BAEA8C0814DBF1B199C876EC5B04E217F243F@AMXEXC01.global.arup.com>

An example might be to use a typical sky definition (e.g. using gensky or gendaylit commands), and perform all of your calculations as if you were doing standard lighting calcs. You would get output in values related to lumens (in other words, human-response-corrected visible Watts of spectral radiation). And looking into the units, lux is synonymous with lumens/m2. If you calculate 100 lumens per meter square (lux) at a point using the standard methods, and you know your light source (for example daylight under those particular sky conditions) emits X Watts in the 120-400nm range for every lumen, then your UV component would be 100X Watts of UV.

You would not multiply your material definition by 4, but typically material reflectance is given for the visible or full solar range. You would have to know (or assume) the properties for UV. For example, a piece of glass with a PVB interlayer might have a 50% transmission in the visible range, but less than 1% transmission in the UV range. Not all materials might have that much variation between visible and UV properties, but you have to be sure that the material properties you use apply to the UV spectrum.

Also consider subtleties of the light source. Different levels of cloud cover probably affect the proportion of UV in the resulting radiation at the earth's surface. Electric light sources might be easier to deal with by converting units.

@Chris: do you mean I should scale my source and material definition by 4?


____________________________________________________________
Electronic mail messages entering and leaving Arup  business
systems are scanned for acceptability of content and viruses
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20111024/9d8d48b8/attachment.html>

From robert.harsono.ong at gmail.com  Mon Oct 24 17:13:10 2011
From: robert.harsono.ong at gmail.com (Robert Ong)
Date: Tue, 25 Oct 2011 08:13:10 +0800
Subject: [Radiance-general] accounting for irradiance due to ultraviolet
 in rtrace
In-Reply-To: <28285BAEA8C0814DBF1B199C876EC5B04E217F243F@AMXEXC01.global.arup.com>
References: <4EA0D174.7030308@gmail.com>
	<4EA13229.40309@gmx.net>	<4EA42F5B.9050400@gmail.com>
	<28285BAEA8C0814DBF1B199C876EC5B04E217F243F@AMXEXC01.global.arup.com>
Message-ID: <4EA5FF16.2050204@gmail.com>

Thank you both Greg and Chris. Now, I understand the concept pretty clearly.

Kind Regards,
Robert

On 24/10/11 22:17, Christopher Rush wrote:
>
> An example might be to use a typical sky definition (e.g. using gensky 
> or gendaylit commands), and perform all of your calculations as if you 
> were doing standard lighting calcs. You would get output in values 
> related to lumens (in other words, human-response-corrected visible 
> Watts of spectral radiation). And looking into the units, lux is 
> synonymous with lumens/m2. If you calculate 100 lumens per meter 
> square (lux) at a point using the standard methods, and you know your 
> light source (for example daylight under those particular sky 
> conditions) emits X Watts in the 120-400nm range for every lumen, then 
> your UV component would be 100X Watts of UV.
>
> You would not multiply your material definition by 4, but typically 
> material reflectance is given for the visible or full solar range. You 
> would have to know (or assume) the properties for UV. For example, a 
> piece of glass with a PVB interlayer might have a 50% transmission in 
> the visible range, but less than 1% transmission in the UV range. Not 
> all materials might have that much variation between visible and UV 
> properties, but you have to be sure that the material properties you 
> use apply to the UV spectrum.
>
> Also consider subtleties of the light source. Different levels of 
> cloud cover probably affect the proportion of UV in the resulting 
> radiation at the earth's surface. Electric light sources might be 
> easier to deal with by converting units.
>
> @Chris: do you mean I should scale my source and material definition by 4?
>
> ____________________________________________________________
> Electronic mail messages entering and leaving Arup  business
> systems are scanned for acceptability of content and viruses
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20111025/c68b0735/attachment.html>

From johnford at bb3.net.au  Tue Oct 25 23:13:52 2011
From: johnford at bb3.net.au (John Ford)
Date: Wed, 26 Oct 2011 17:13:52 +1100
Subject: [Radiance-general] rtcontrib results (OSX)
Message-ID: <3E63ED4B-4EF4-4278-A96D-582F2B8ABFD6@bb3.net.au>

Hi, 

I'm getting strange results from rtcontrib on OSX. Firstly, the images combined with dctimestep are very speckly, and many of the patch images are very speckly as well, some with only a handful of dots. Do I need to direct rays from the sky patch directly to the windows and ignore all other directions? How can I do that? I'm unsure which parameters affect this most. 

The other issue is that there are strange colours in different rays. The combined result has bands of colour whereas the model has almost no colour in it at all. The materials are all grey. What might cause this? Command sequence and image below. 

vwrays -ff -vf views/EIn.vf -x 800 -y 800 | rtcontrib -i -ab 4 -ds 0.05 -dj .7 -ad 4096 -lw 2e-4 -n 2 -ffc $(vwrays -d -vf views/EIn.vf -x 800 -y 800) -e MF:2 -f reinhart.cal -b rbin -V+ -fo -o images/patchesEI/p%03d.hdr -m sky_glow -w octrees/top1.oct 
	
Third issue: I've been running this successfully, but sometimes when I run it, the patch images are created, but then nothing seems to happen. There is one rtcontrib process and four rtrace processes visible in the activity monitor, but none of them are using any of the CPUs and the patch images are stuck on 4KB. Normally when I run it I get two rtrace processes using about 95% of the CPUs. (This is on a MacBook Pro with two cores). I cntrl-C out and then try again and get the same thing. 

Thanks in advance. 

John. 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20111026/729c1e88/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: el_pc_div3.jpg
Type: image/jpg
Size: 27883 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20111026/729c1e88/attachment-0001.jpg>

From gregoryjward at gmail.com  Wed Oct 26 08:58:55 2011
From: gregoryjward at gmail.com (Greg Ward)
Date: Wed, 26 Oct 2011 08:58:55 -0700
Subject: [Radiance-general] rtcontrib results (OSX)
In-Reply-To: <3E63ED4B-4EF4-4278-A96D-582F2B8ABFD6@bb3.net.au>
References: <3E63ED4B-4EF4-4278-A96D-582F2B8ABFD6@bb3.net.au>
Message-ID: <11F3FBA6-C45E-44F0-A551-31BD18BA37B7@lmi.net>

Hi John,

Running rtcontrib is a bit tricky.  Thanks for sticking with it...

I notice a couple of things in your command line.  First, you are using the -V+ option, when I think you might want -V-.  The latter is the default (coefficients rather than partial values), and more appropriate in a DC calculation.  You might get absolute errors otherwise if your sky isn't normalized.  Second, you forgot to include the -bn option, which is very important.  This might be behind your stalls as well as the unexpected colors.  Using reinhart.cal, you are provided with the constant "Nrbins" for this setting, which is 578 for MF:2.  Here is how I would modify your command:

vwrays -ff -vf views/EIn.vf -x 800 -y 800 | rtcontrib -i -ab 4 -ds 0.05 -dj .7 -ad 4096 -lw 2e-4 -n 2 -ffc $(vwrays -d -vf views/EIn.vf -x 800 -y 800) -e MF:2 -f reinhart.cal -b rbin -bn Nrbins -V- -fo -o images/patchesEI/p%03d.hdr -m sky_glow -w octrees/top1.oct 

The stalls might also be caused by running up against your open file limit.  You can try running "ulimit -n 2500" and seeing if that works before starting rtcontrib.  The default limit on open files is 256 on most systems.

Good luck!
-Greg

> From: John Ford <johnford at bb3.net.au>
> Date: October 25, 2011 11:13:52 PM PDT
> 
> Hi, 
> 
> I'm getting strange results from rtcontrib on OSX. Firstly, the images combined with dctimestep are very speckly, and many of the patch images are very speckly as well, some with only a handful of dots. Do I need to direct rays from the sky patch directly to the windows and ignore all other directions? How can I do that? I'm unsure which parameters affect this most. 
> 
> The other issue is that there are strange colours in different rays. The combined result has bands of colour whereas the model has almost no colour in it at all. The materials are all grey. What might cause this? Command sequence and image below. 
> 
> vwrays -ff -vf views/EIn.vf -x 800 -y 800 | rtcontrib -i -ab 4 -ds 0.05 -dj .7 -ad 4096 -lw 2e-4 -n 2 -ffc $(vwrays -d -vf views/EIn.vf -x 800 -y 800) -e MF:2 -f reinhart.cal -b rbin -V+ -fo -o images/patchesEI/p%03d.hdr -m sky_glow -w octrees/top1.oct 
> 	
> Third issue: I've been running this successfully, but sometimes when I run it, the patch images are created, but then nothing seems to happen. There is one rtcontrib process and four rtrace processes visible in the activity monitor, but none of them are using any of the CPUs and the patch images are stuck on 4KB. Normally when I run it I get two rtrace processes using about 95% of the CPUs. (This is on a MacBook Pro with two cores). I cntrl-C out and then try again and get the same thing. 
> 
> Thanks in advance. 
> 
> John. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20111026/3623709d/attachment.html>

From ery.mailinglist at gmail.com  Thu Oct 27 06:58:43 2011
From: ery.mailinglist at gmail.com (Ery Djunaedy)
Date: Thu, 27 Oct 2011 07:58:43 -0600
Subject: [Radiance-general] xml file from window6
Message-ID: <4EA96393.6010102@gmail.com>

All,

I cannot get the xml file from Window6. I think I have done all the 
right things (referring to Andy's tutorial on three phase method section 
3.3), but I cannot get the xml file output. What I have is the csv file, 
instead of xml.

Did I miss something?

Thanks,

Ery


From amcneil at lbl.gov  Thu Oct 27 09:23:12 2011
From: amcneil at lbl.gov (Andy McNeil)
Date: Thu, 27 Oct 2011 09:23:12 -0700
Subject: [Radiance-general] xml file from window6
In-Reply-To: <4EA96393.6010102@gmail.com>
References: <4EA96393.6010102@gmail.com>
Message-ID: <A91756AD-93DC-4B15-A8F5-A4064657272C@lbl.gov>

Hi Ery,

The most recent NFRC certified version of Window 6 has an bug that prevents the program from writing an xml file.  Make sure you're using the latest version (not NFRC certified) available here:http://windows.lbl.gov/software/window/6/index.html .  Getting NFRC certification is a lengthy process.  So it'll be a while before the bug fix makes its way back to the NFRC certified version.

The latest version has a checkbox to "write xml BSDF output" in the preferences-> optical calcs dialogue, make sure it is checked.

Also, if you're running Windows 7 the file locations are awkward, the CSV file and XML file are sometimes written to different locations.  for me the XML file can be found here:
C:\Users\Andy McNeil\AppData\Local\VirtualStore\Program Files (x86)\LBNL\WINDOW6

Also there is a bug that causes the filename of the xml file to be wrong if you've changed the name of the glazing system in Window or if you created it by copying another record.  I typically sort the directory by modification time and the most recent xml file written is the one I want.  You can verify by opening the xml file in a text editor and looking at the <name> tag on or near line 7.

I hope something in this email solves your problem.   If nothing helps, let me know and well figure out what's happening online. 

Andy


On Oct 27, 2011, at 6:58 AM, Ery Djunaedy wrote:

> All,
> 
> I cannot get the xml file from Window6. I think I have done all the right things (referring to Andy's tutorial on three phase method section 3.3), but I cannot get the xml file output. What I have is the csv file, instead of xml.
> 
> Did I miss something?
> 
> Thanks,
> 
> Ery
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general



From ery.mailinglist at gmail.com  Thu Oct 27 11:38:36 2011
From: ery.mailinglist at gmail.com (Ery Djunaedy)
Date: Thu, 27 Oct 2011 12:38:36 -0600
Subject: [Radiance-general] xml file from window6
In-Reply-To: <A91756AD-93DC-4B15-A8F5-A4064657272C@lbl.gov>
References: <4EA96393.6010102@gmail.com>
	<A91756AD-93DC-4B15-A8F5-A4064657272C@lbl.gov>
Message-ID: <4EA9A52C.80801@gmail.com>

Andy,

Thanks for your response, but still no luck. I did get the right 
version, but I download it again just in case.

Here is my version: v6.3.26.0 date: 10/26/2011 installed in Windows 7 
under virtualbox under linux.

I did go back to the preference page, and checked the right button. But 
still the only file that I have is the a csv file. The content of that 
file is not xml.

Further observation on my installation:

1. No Radiance component installed. In the preference page, in the 
radiance tab, there is a note that if I want to have the radiance 
component, then I have to download the right install file. I cannot find 
any install file with radiance component in the website, but I suppose 
this does not matter for the purpose of generating XML?

2. After the calculation (F9) in the glazing system library, there is 
always a message like this:

"One of the layers for Glazing System 13 does not have detailed spectral 
data or the spectral data analysis was disabled in Preferences. This may 
result in incorrect results for optical properties such as SHGC and 
TVIS. Custom layers with detailed spectral data can be created in Optics 
and imported into the Window Library."


Thanks,

Ery



On 10/27/2011 10:23 AM, Andy McNeil wrote:
> Hi Ery,
>
> The most recent NFRC certified version of Window 6 has an bug that prevents the program from writing an xml file.  Make sure you're using the latest version (not NFRC certified) available here:http://windows.lbl.gov/software/window/6/index.html .  Getting NFRC certification is a lengthy process.  So it'll be a while before the bug fix makes its way back to the NFRC certified version.
>
> The latest version has a checkbox to "write xml BSDF output" in the preferences->  optical calcs dialogue, make sure it is checked.
>
> Also, if you're running Windows 7 the file locations are awkward, the CSV file and XML file are sometimes written to different locations.  for me the XML file can be found here:
> C:\Users\Andy McNeil\AppData\Local\VirtualStore\Program Files (x86)\LBNL\WINDOW6
>
> Also there is a bug that causes the filename of the xml file to be wrong if you've changed the name of the glazing system in Window or if you created it by copying another record.  I typically sort the directory by modification time and the most recent xml file written is the one I want.  You can verify by opening the xml file in a text editor and looking at the<name>  tag on or near line 7.
>
> I hope something in this email solves your problem.   If nothing helps, let me know and well figure out what's happening online.
>
> Andy
>
>
> On Oct 27, 2011, at 6:58 AM, Ery Djunaedy wrote:
>
>> All,
>>
>> I cannot get the xml file from Window6. I think I have done all the right things (referring to Andy's tutorial on three phase method section 3.3), but I cannot get the xml file output. What I have is the csv file, instead of xml.
>>
>> Did I miss something?
>>
>> Thanks,
>>
>> Ery
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general



