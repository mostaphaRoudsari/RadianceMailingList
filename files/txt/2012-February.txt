From jill at jilldalglish.com  Wed Feb  1 08:10:51 2012
From: jill at jilldalglish.com (Jill Dalglish)
Date: Wed, 01 Feb 2012 09:10:51 -0700
Subject: [Radiance-general] Curved mirror surfaces
Message-ID: <4F29640B.7040501@jilldalglish.com>

Hello,

Does anyone have experience with mirror surfaces and especially curved 
mirror surfaces? I am not having luck getting sunlight to bounce off of 
them the way they should. Are there any tricks? I am using Ecotect and 
exporting to Radiance.

Thank you!

Jill Dalglish



From gbetti at fosterandpartners.com  Wed Feb  1 08:24:00 2012
From: gbetti at fosterandpartners.com (Giovanni Betti)
Date: Wed, 1 Feb 2012 16:24:00 -0000
Subject: [Radiance-general] Curved mirror surfaces
In-Reply-To: <4F29640B.7040501@jilldalglish.com>
References: <4F29640B.7040501@jilldalglish.com>
Message-ID: <6F5225D6E15F954BB4E58EC25F6736C3082F0FAB@corp3005.CORPORATE.FOSTER.NETWORK>

Hi Jill,

have you checked the material definition that is exported by Ecotect? if
I remember correctly Ecotect exports "mirrors" as "plastic" so you'll
need to manually edit the definition in the .rad file.
And check that the normals are oriented the right way around.
Finally curved mirror reflections necessarily have to be approximated by
a mesh in this approach, so it will never look absolutely right....

Hope this helps,

Giovanni

-----Original Message-----
From: Jill Dalglish [mailto:jill at jilldalglish.com] 
Sent: 01 February 2012 16:11
To: radiance-general
Subject: [Radiance-general] Curved mirror surfaces

Hello,

Does anyone have experience with mirror surfaces and especially curved 
mirror surfaces? I am not having luck getting sunlight to bounce off of 
them the way they should. Are there any tricks? I am using Ecotect and 
exporting to Radiance.

Thank you!

Jill Dalglish


_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general


From antonutto at yahoo.it  Wed Feb  1 11:52:55 2012
From: antonutto at yahoo.it (giulio antonutto)
Date: Wed, 1 Feb 2012 19:52:55 +0000
Subject: [Radiance-general] Curved mirror surfaces
In-Reply-To: <4F29640B.7040501@jilldalglish.com>
References: <4F29640B.7040501@jilldalglish.com>
Message-ID: <04BC1947-492B-48F4-A08A-9FF32F1D15F3@yahoo.it>

some details on how to cut strange shapes, but in the end you need polygons?.

http://web.mac.com/geotrupes/iWeb/Main%20site/RadBlog/19993E4C-9633-4930-9D7F-72C4115D2E62.html



On 1 Feb 2012, at 16:10, Jill Dalglish wrote:

> Hello,
> 
> Does anyone have experience with mirror surfaces and especially curved mirror surfaces? I am not having luck getting sunlight to bounce off of them the way they should. Are there any tricks? I am using Ecotect and exporting to Radiance.
> 
> Thank you!
> 
> Jill Dalglish
> 
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general



From grobe at gmx.net  Wed Feb  1 12:20:59 2012
From: grobe at gmx.net (Lars O. Grobe)
Date: Wed, 01 Feb 2012 21:20:59 +0100
Subject: [Radiance-general] Curved mirror surfaces
In-Reply-To: <4F29640B.7040501@jilldalglish.com>
References: <4F29640B.7040501@jilldalglish.com>
Message-ID: <4F299EAB.4010606@gmx.net>

Hi Jill!

What is the modifier used to model the mirror surface? If Giovanni's
assumption is correct and your surfaces get a plastic modifier (probably
with high specular reflection), you cannot expect accurate "sharp"
shadows/highlights on diffuse reflective surfaces (such as a ceiling) as
all the light transport is handled by the ambient calculation. You would
need a mirror modifier applied to your surface. Unfortunately, with a
meshed curved surface, you would end up with a practically infinite
number of such mirrors, thus with an infinite number of secondary light
sources. There is some define in the code setting the maximum number of
secondary light sources, and one could set it higher (this has been used
for reflector modeling), but don't expect this to be efficient with an
architectural model.

I quote this from time to time (Rendering with Radiance, p. 580, chapter
13 "Secondary light sources"):

[...] "Other cases involving curved, specular reflectors pose similar
difficulties for mkillum, and the only long-term solution seams to be
the creation of a forward raytracing module for computing these kinds of
illums." [...]

What are you trying to model? Specular, curved blinds? Some kind of a
collector?

Cheers, Lars.

> Hello,
> 
> Does anyone have experience with mirror surfaces and especially curved
> mirror surfaces? I am not having luck getting sunlight to bounce off of
> them the way they should. Are there any tricks? I am using Ecotect and
> exporting to Radiance.
> 
> Thank you!
> 
> Jill Dalglish

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4438 bytes
Desc: S/MIME Kryptografische Unterschrift
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120201/ed4c405b/attachment.bin>

From roland.schregle at gmail.com  Wed Feb  1 17:28:15 2012
From: roland.schregle at gmail.com (Dr. Roland Schregle)
Date: Thu, 02 Feb 2012 02:28:15 +0100
Subject: [Radiance-general] Curved mirror surfaces
In-Reply-To: <4F299EAB.4010606@gmx.net>
References: <4F29640B.7040501@jilldalglish.com> <4F299EAB.4010606@gmx.net>
Message-ID: <op.v802dcqt4jce8t@dwo>

On Wed, 01 Feb 2012 21:20:59 +0100, Lars O. Grobe <grobe at gmx.net> wrote:

> I quote this from time to time (Rendering with Radiance, p. 580, chapter
> 13 "Secondary light sources"):
>
> [...] "Other cases involving curved, specular reflectors pose similar
> difficulties for mkillum, and the only long-term solution seams to be
> the creation of a forward raytracing module for computing these kinds of
> illums." [...]

Hi Jill, hi Lars,

I'd like to chuck in my humble 2cents worth and point out that  
abovementioned limitation is the very reason the photon mapping addon was  
developed for RADIANCE. This is precisely what Jill needs. Although it  
won't eliminate the tesselation artifacts, it will simulate the resultant  
caustics more efficiently than virtual light sources.

RADIANCE binaries with photon mapping were available on Francesco  
Anselmo's website, but appear to have been removed from the downloads.  
Anyone have any recent binaries Jill could try out?

Regards,

--Roland


-- 
"END OF LINE" [MCP, 1982]
"It's just not right that so many things work when they shouldn't!"  
[Apologies to Steve Wozniak]
 


From iabel at iebele.nl  Thu Feb  2 11:38:28 2012
From: iabel at iebele.nl (Iebele Abel)
Date: Thu, 2 Feb 2012 21:38:28 +0200
Subject: [Radiance-general] artifact while rendering glass in tmesh solved?
Message-ID: <CAD_et2Xd9KkPdg1gzB4T0==JWzJtwUChrMiBnJiwa+ipOaE4FA@mail.gmail.com>

Hi group,

Can the artifact which occurs when rendering glass in a tmesh
(obj2tmesh) be solved? This artifact has already been described in the
following thread, but it does't seems to be followed up by an answer.
Any help would be appreciated.

http://www.radiance-online.org/pipermail/radiance-general/2005-June/002777.html

Thanks,

Iebele


From gregoryjward at gmail.com  Thu Feb  2 11:57:22 2012
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu, 2 Feb 2012 11:57:22 -0800
Subject: [Radiance-general] artifact while rendering glass in tmesh
	solved?
In-Reply-To: <CAD_et2Xd9KkPdg1gzB4T0==JWzJtwUChrMiBnJiwa+ipOaE4FA@mail.gmail.com>
References: <CAD_et2Xd9KkPdg1gzB4T0==JWzJtwUChrMiBnJiwa+ipOaE4FA@mail.gmail.com>
Message-ID: <0F62DA40-D6C2-4882-BBFF-D69C5F000A19@lmi.net>

Hi Iebele,

The thread with Francesco was discussed off-line.  It had to do with the way Blender and Python were outputting surface normals.  Are you using Blender to create your model?  Perhaps the problem persists.

The obj2mesh program is supposed to handle odd vertex normals and correct them if they disagree with the surface orientation or whatnot.  I can't say what's going on in your case without getting an example file from you and spending some time on it.

Cheers,
-Greg

> From: Iebele Abel <iabel at iebele.nl>
> Date: February 2, 2012 11:38:28 AM PST
> 
> Hi group,
> 
> Can the artifact which occurs when rendering glass in a tmesh
> (obj2tmesh) be solved? This artifact has already been described in the
> following thread, but it does't seems to be followed up by an answer.
> Any help would be appreciated.
> 
> http://www.radiance-online.org/pipermail/radiance-general/2005-June/002777.html
> 
> Thanks,
> 
> Iebele


From gregoryjward at gmail.com  Thu Feb  2 19:34:26 2012
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu, 2 Feb 2012 19:34:26 -0800
Subject: [Radiance-general] artifact while rendering glass in tmesh
	solved?
In-Reply-To: <CAD_et2Xd9KkPdg1gzB4T0==JWzJtwUChrMiBnJiwa+ipOaE4FA@mail.gmail.com>
References: <CAD_et2Xd9KkPdg1gzB4T0==JWzJtwUChrMiBnJiwa+ipOaE4FA@mail.gmail.com>
Message-ID: <62B0FF52-30C8-4318-8786-9F2A49D89B25@lmi.net>

Hi Iebele,

Just so this answer doesn't get lost like Francesco's, I'm taking us back online to discuss this.  Thanks for sharing your model and results.

The problem occurs because of a hack I introduced into the glass material type, about which I had completely forgotten.  It was my answer to the question, "Should a texture applied to an infinitely thin layer of glass perturb transmitted rays?"  I decided it should, because in most cases, a texture is applied to introduce some effect to the surface.  

The problem here is that the texture is being applied to correct the effects of triangulation, thus smoothing rather than roughening the surface.  Without a texture, the transmitted component would be unaffected, but the reflected component would show your model's tessellation.  There are three possible solutions.

The first possible solution is to give your car windows real thickness and use a dielectric material rather than glass.  You would need to be careful that your surface normals were directed outwards for the outer layer and inwards for the inner layer.

The second possible solution is to turn off surface normal smooth just for the window layer.  This will as I said show up the tessellation of your reflections, but it would fix the transmission.

The third possible solution is to re-hack the source file rt/glass.c.  At line 114, simplify:

			if (!(r->crtype & SHADOW) && hastexture) {
				VSUM(p.rdir, r->rdir, r->pert, 2.*(1.-rindex));
				if (normalize(p.rdir) == 0.0) {
					objerror(m, WARNING, "bad perturbation");
					VCOPY(p.rdir, r->rdir);
				}
			} else {
				VCOPY(p.rdir, r->rdir);
				transtest = 2;
			}

to read:

			VCOPY(p.rdir, r->rdir);
			transtest = 2;

This should fix the problem without having to change your model.  Of course, the problem will come back the next time you update Radiance, unless folks convince me that my hack was ill-conceived to begin with.  I'm open to the possibility.

Cheers,
-Greg

> From: Iebele Abel <iabel at iebele.nl>
> Date: February 2, 2012 11:38:28 AM PST
> 
> Hi group,
> 
> Can the artifact which occurs when rendering glass in a tmesh
> (obj2tmesh) be solved? This artifact has already been described in the
> following thread, but it does't seems to be followed up by an answer.
> Any help would be appreciated.
> 
> http://www.radiance-online.org/pipermail/radiance-general/2005-June/002777.html
> 
> Thanks,
> 
> Iebele


From iabel at iebele.nl  Fri Feb  3 01:32:37 2012
From: iabel at iebele.nl (Iebele Abel)
Date: Fri, 3 Feb 2012 11:32:37 +0200
Subject: [Radiance-general] artifact while rendering glass in tmesh
	solved?
In-Reply-To: <62B0FF52-30C8-4318-8786-9F2A49D89B25@lmi.net>
References: <CAD_et2Xd9KkPdg1gzB4T0==JWzJtwUChrMiBnJiwa+ipOaE4FA@mail.gmail.com>
	<62B0FF52-30C8-4318-8786-9F2A49D89B25@lmi.net>
Message-ID: <CAD_et2X--UygWP3ZRe1TqMMWZWt-qZwwyhyuzpLmLsmfLGP6Qg@mail.gmail.com>

Hi Greg,

Thanks for digging into this problem. The model I send you was just a
try to see how tessellated nurbs would behave when rendering in
Radiance using HDR skies. The actual project is simulating the
behavior of biological cells exposed to strong mental attention. I
have no geometry of that at this stage, it (the nurbs) should be
generated in an automated way. That's quite a task on its own, so in
my case the easiest way will probably be to re-hack glass.c. Since I
use osx I haven't used the source distribution for a while, but that
should not be a problem. Many thanks for your quick and detailed
reply. I'll keep you updated,

Cheers,
Iebele


2012/2/3 Greg Ward <gregoryjward at gmail.com>:
> Hi Iebele,
>
> Just so this answer doesn't get lost like Francesco's, I'm taking us back online to discuss this. ?Thanks for sharing your model and results.
>
> The problem occurs because of a hack I introduced into the glass material type, about which I had completely forgotten. ?It was my answer to the question, "Should a texture applied to an infinitely thin layer of glass perturb transmitted rays?" ?I decided it should, because in most cases, a texture is applied to introduce some effect to the surface.
>
> The problem here is that the texture is being applied to correct the effects of triangulation, thus smoothing rather than roughening the surface. ?Without a texture, the transmitted component would be unaffected, but the reflected component would show your model's tessellation. ?There are three possible solutions.
>
> The first possible solution is to give your car windows real thickness and use a dielectric material rather than glass. ?You would need to be careful that your surface normals were directed outwards for the outer layer and inwards for the inner layer.
>
> The second possible solution is to turn off surface normal smooth just for the window layer. ?This will as I said show up the tessellation of your reflections, but it would fix the transmission.
>
> The third possible solution is to re-hack the source file rt/glass.c. ?At line 114, simplify:
>
> ? ? ? ? ? ? ? ? ? ? ? ?if (!(r->crtype & SHADOW) && hastexture) {
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?VSUM(p.rdir, r->rdir, r->pert, 2.*(1.-rindex));
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?if (normalize(p.rdir) == 0.0) {
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?objerror(m, WARNING, "bad perturbation");
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?VCOPY(p.rdir, r->rdir);
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?}
> ? ? ? ? ? ? ? ? ? ? ? ?} else {
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?VCOPY(p.rdir, r->rdir);
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?transtest = 2;
> ? ? ? ? ? ? ? ? ? ? ? ?}
>
> to read:
>
> ? ? ? ? ? ? ? ? ? ? ? ?VCOPY(p.rdir, r->rdir);
> ? ? ? ? ? ? ? ? ? ? ? ?transtest = 2;
>
> This should fix the problem without having to change your model. ?Of course, the problem will come back the next time you update Radiance, unless folks convince me that my hack was ill-conceived to begin with. ?I'm open to the possibility.
>
> Cheers,
> -Greg
>
>> From: Iebele Abel <iabel at iebele.nl>
>> Date: February 2, 2012 11:38:28 AM PST
>>
>> Hi group,
>>
>> Can the artifact which occurs when rendering glass in a tmesh
>> (obj2tmesh) be solved? This artifact has already been described in the
>> following thread, but it does't seems to be followed up by an answer.
>> Any help would be appreciated.
>>
>> http://www.radiance-online.org/pipermail/radiance-general/2005-June/002777.html
>>
>> Thanks,
>>
>> Iebele
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general


From RFritz at lbl.gov  Mon Feb  6 15:59:10 2012
From: RFritz at lbl.gov (Randolph M. Fritz)
Date: Mon, 6 Feb 2012 15:59:10 -0800
Subject: [Radiance-general] Error: Rendering with Radiance p. 319 Luminaire
	Modeling
Message-ID: <jgppge$sus$1@dough.gmane.org>

I just had occasion to go through Chas. Ehrlich's luminaire modeling 
procedure given in *Rendering with Radiance* and there is an error on 
page 319 of the text. The radius of a unit sphere is 0.282095, not 
0.56419. Both the number in the text and the ies2rad command are wrong.

Ouch!
-- 
Randolph M. Fritz




From gregoryjward at gmail.com  Mon Feb  6 16:12:18 2012
From: gregoryjward at gmail.com (Greg Ward)
Date: Mon, 6 Feb 2012 16:12:18 -0800
Subject: [Radiance-general] Error: Rendering with Radiance p. 319
	Luminaire Modeling
In-Reply-To: <jgppge$sus$1@dough.gmane.org>
References: <jgppge$sus$1@dough.gmane.org>
Message-ID: <093BDD35-78D4-4D1E-A61A-6FE267609C18@lmi.net>

Hi Randoph,

Could you be more specific?  The radius of a sphere whose *projected* area is 1.0 for any distant point is sqrt(1/pi) as Chas derived it.  This is in fact what ies2rad needs.  This is not the same as a sphere whose total surface area is 1.0, which is the value you derived.

Is there an error in ies2rad.c, somewhere?

-Greg

> From: "Randolph M. Fritz" <RFritz at lbl.gov>
> Date: February 6, 2012 3:59:10 PM PST
> 
> I just had occasion to go through Chas. Ehrlich's luminaire modeling procedure given in *Rendering with Radiance* and there is an error on page 319 of the text. The radius of a unit sphere is 0.282095, not 0.56419. Both the number in the text and the ies2rad command are wrong.
> 
> Ouch!
> -- 
> Randolph M. Fritz


From RFritz at lbl.gov  Mon Feb  6 16:18:26 2012
From: RFritz at lbl.gov (Randolph M. Fritz)
Date: Mon, 6 Feb 2012 16:18:26 -0800
Subject: [Radiance-general] Error: Rendering with Radiance p. 319
	Luminaire Modeling
References: <jgppge$sus$1@dough.gmane.org>
	<093BDD35-78D4-4D1E-A61A-6FE267609C18@lmi.net>
Message-ID: <jgpqki$4ps$1@dough.gmane.org>

On 2012-02-07 00:12:18 +0000, Greg Ward said:

> Hi Randoph,
> 
> Could you be more specific?  The radius of a sphere whose *projected* 
> area is 1.0 for any distant point is sqrt(1/pi) as Chas derived it.  
> This is in fact what ies2rad needs.  This is not the same as a sphere 
> whose total surface area is 1.0, which is the value you derived.
> 
> Is there an error in ies2rad.c, somewhere?

Then maybe I've done something else wrong.  When I ran a simulation 
which checks the luminaire model against the IES file by simulating a 
goniophotometer the numbers lined up.  I'll take a closer look at my 
scripts and see if I can find a factor of two somewhere.

Randolph

> 
> -Greg
> 
>> From: "Randolph M. Fritz" <RFritz at lbl.gov>
>> Date: February 6, 2012 3:59:10 PM PST
>> 
>> I just had occasion to go through Chas. Ehrlich's luminaire modeling 
>> procedure given in *Rendering with Radiance* and there is an error on 
>> page 319 of the text. The radius of a unit sphere is 0.282095, not 
>> 0.56419. Both the number in the text and the ies2rad command are wrong.
>> 
>> Ouch!
>> --
>> Randolph M. Fritz


-- 
Randolph M. Fritz




From RFritz at lbl.gov  Mon Feb  6 16:45:53 2012
From: RFritz at lbl.gov (Randolph M. Fritz)
Date: Mon, 6 Feb 2012 16:45:53 -0800
Subject: [Radiance-general] Error: Rendering with Radiance p. 319
	Luminaire Modeling
References: <jgppge$sus$1@dough.gmane.org> <jgpqki$4ps$1@dough.gmane.org>
Message-ID: <jgps81$egc$1@dough.gmane.org>

On 2012-02-07 00:18:26 +0000, Randolph M. Fritz said:

> On 2012-02-07 00:12:18 +0000, Greg Ward said:
> 
>> Hi Randoph,
>> 
>> Could you be more specific?  The radius of a sphere whose *projected*
>> area is 1.0 for any distant point is sqrt(1/pi) as Chas derived it.
>> This is in fact what ies2rad needs.  This is not the same as a sphere
>> whose total surface area is 1.0, which is the value you derived.
>> 
>> Is there an error in ies2rad.c, somewhere?
> 
> Then maybe I've done something else wrong.  When I ran a simulation
> which checks the luminaire model against the IES file by simulating a
> goniophotometer the numbers lined up.  I'll take a closer look at my
> scripts and see if I can find a factor of two somewhere.

The same check script worked correctly with an untouched ies2rad output 
file with both the given geometry and a spherical substitute.

I then ran the procedure with -i 0.56419 and the numbers I am getting 
back are the same and correct.

I am now thoroughly confused.  Does the radius even matter in that 
procedure?  Or do I have a case of a luminaire where it doesn't matter?

Randolph

> 
> Randolph
> 
>> 
>> -Greg
>> 
>>> From: "Randolph M. Fritz" <RFritz at lbl.gov>
>>> Date: February 6, 2012 3:59:10 PM PST
>>> 
>>> I just had occasion to go through Chas. Ehrlich's luminaire modeling
>>> procedure given in *Rendering with Radiance* and there is an error on
>>> page 319 of the text. The radius of a unit sphere is 0.282095, not
>>> 0.56419. Both the number in the text and the ies2rad command are wrong.
>>> 
>>> Ouch!
>>> --
>>> Randolph M. Fritz


-- 
Randolph M. Fritz




From gregoryjward at gmail.com  Mon Feb  6 17:40:29 2012
From: gregoryjward at gmail.com (Greg Ward)
Date: Mon, 6 Feb 2012 17:40:29 -0800
Subject: [Radiance-general] Error: Rendering with Radiance p. 319
	Luminaire Modeling
In-Reply-To: <jgps81$egc$1@dough.gmane.org>
References: <jgppge$sus$1@dough.gmane.org> <jgpqki$4ps$1@dough.gmane.org>
	<jgps81$egc$1@dough.gmane.org>
Message-ID: <026495E2-2B12-41EE-A085-AC011735B169@lmi.net>

Hi Randolph,

Whatever radius you give, ies2rad should adjust the brightness to keep the total lumen output the same.

Best,
-Greg

> From: "Randolph M. Fritz" <RFritz at lbl.gov>
> Date: February 6, 2012 4:45:53 PM PST
> 
> On 2012-02-07 00:18:26 +0000, Randolph M. Fritz said:
> 
>> On 2012-02-07 00:12:18 +0000, Greg Ward said:
>>> Hi Randoph,
>>> Could you be more specific?  The radius of a sphere whose *projected*
>>> area is 1.0 for any distant point is sqrt(1/pi) as Chas derived it.
>>> This is in fact what ies2rad needs.  This is not the same as a sphere
>>> whose total surface area is 1.0, which is the value you derived.
>>> Is there an error in ies2rad.c, somewhere?
>> Then maybe I've done something else wrong.  When I ran a simulation
>> which checks the luminaire model against the IES file by simulating a
>> goniophotometer the numbers lined up.  I'll take a closer look at my
>> scripts and see if I can find a factor of two somewhere.
> 
> The same check script worked correctly with an untouched ies2rad output file with both the given geometry and a spherical substitute.
> 
> I then ran the procedure with -i 0.56419 and the numbers I am getting back are the same and correct.
> 
> I am now thoroughly confused.  Does the radius even matter in that procedure?  Or do I have a case of a luminaire where it doesn't matter?
> 
> Randolph


From ery.mailinglist at gmail.com  Mon Feb  6 18:15:15 2012
From: ery.mailinglist at gmail.com (Ery Djunaedy)
Date: Mon, 06 Feb 2012 19:15:15 -0700
Subject: [Radiance-general] evalglare with regular lens
Message-ID: <4F308933.3080109@gmail.com>

Folks,

I have a bunch of HDR images generated from photographs taken with 
regular -- non-fisheye -- lens. Is there a way that we can use these 
images for glare analysis in evalglare? The evalglare description says 
that it only accepts fisheye images. There is a tutorial from Harvard 
GSD (Doyle and Reihart) that shows a non-fisheye photo in evalglare: 
http://www.gsd.harvard.edu/research/gsdsquare/Publications/HDR_III_Evalglare.pdf

I am wondering whether this can be done at all.

Thanks,

Ery


From tbleicher at googlemail.com  Mon Feb  6 18:26:49 2012
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Mon, 6 Feb 2012 21:26:49 -0500
Subject: [Radiance-general] evalglare with regular lens
In-Reply-To: <4F308933.3080109@gmail.com>
References: <4F308933.3080109@gmail.com>
Message-ID: <CAKGV-k0zpJv+aFaZh6L13ySmTe-XtvbfF0t8=qbjvajmFL=s=g@mail.gmail.com>

Ery

You can use the pinterp program to convert from one projection to another.
See the man page for an example or dig in the archives where this has been
discussed before. However, note that the glare equations are based on a
full hemispherical image. You will have to fill in the missing perimeter of
your converted fisheye image with values of the right brightness or your
glare evaluation will be off.

Regards,
Thomas

On Mon, Feb 6, 2012 at 9:15 PM, Ery Djunaedy <ery.mailinglist at gmail.com>wrote:

> Folks,
>
> I have a bunch of HDR images generated from photographs taken with regular
> -- non-fisheye -- lens. Is there a way that we can use these images for
> glare analysis in evalglare? The evalglare description says that it only
> accepts fisheye images. There is a tutorial from Harvard GSD (Doyle and
> Reihart) that shows a non-fisheye photo in evalglare:
> http://www.gsd.harvard.edu/**research/gsdsquare/**Publications/HDR_III_**
> Evalglare.pdf<http://www.gsd.harvard.edu/research/gsdsquare/Publications/HDR_III_Evalglare.pdf>
>
> I am wondering whether this can be done at all.
>
> Thanks,
>
> Ery
>
> ______________________________**_________________
> Radiance-general mailing list
> Radiance-general at radiance-**online.org<Radiance-general at radiance-online.org>
> http://www.radiance-online.**org/mailman/listinfo/radiance-**general<http://www.radiance-online.org/mailman/listinfo/radiance-general>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120206/b1bc8129/attachment.html>

From rob.guglielmetti at gmail.com  Mon Feb  6 18:28:54 2012
From: rob.guglielmetti at gmail.com (Rob Guglielmetti)
Date: Mon, 6 Feb 2012 19:28:54 -0700
Subject: [Radiance-general] evalglare with regular lens
In-Reply-To: <4F308933.3080109@gmail.com>
References: <4F308933.3080109@gmail.com>
Message-ID: <383AE3AD-D3FA-4A48-99B7-A342A2565D2A@gmail.com>

Hi Ery,

Problem is, evalglare uses the daylight glare probability metric in its calculations, which by definition takes an angular fisheye HDR image as input. I think the images in the Harvard tutorial are for clarity and were not used for the calculation of the DGP. Hopefully Jan, Christoph, and Alstan can weigh in here on some clarification and some alternatives. 

- Rob

On Feb 6, 2012, at 7:15 PM, Ery Djunaedy wrote:

> Folks,
> 
> I have a bunch of HDR images generated from photographs taken with regular -- non-fisheye -- lens. Is there a way that we can use these images for glare analysis in evalglare? The evalglare description says that it only accepts fisheye images. There is a tutorial from Harvard GSD (Doyle and Reihart) that shows a non-fisheye photo in evalglare: http://www.gsd.harvard.edu/research/gsdsquare/Publications/HDR_III_Evalglare.pdf
> 
> I am wondering whether this can be done at all.
> 
> Thanks,
> 
> Ery
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general



From alstan at jakubiec.net  Mon Feb  6 18:52:11 2012
From: alstan at jakubiec.net (J. Alstan Jakubiec)
Date: Mon, 06 Feb 2012 21:52:11 -0500
Subject: [Radiance-general] evalglare with regular lens
In-Reply-To: <CAKGV-k0zpJv+aFaZh6L13ySmTe-XtvbfF0t8=qbjvajmFL=s=g@mail.gmail.com>
References: <4F308933.3080109@gmail.com>
	<CAKGV-k0zpJv+aFaZh6L13ySmTe-XtvbfF0t8=qbjvajmFL=s=g@mail.gmail.com>
Message-ID: <op.v9afk9koc8ew1p@severian.hsd1.ma.comcast.net>

Dear Ery,

You can use evalglare with a regular hdr image as far as I understand it.  
Jan can correct me if I'm wrong :). As Thomas notes, it is best to have  
the full hemisphere image, but if you don't have such an image, you can  
still get pretty good results with a couple of steps:

1. Make sure your hdr is calibrated to photometric units of cd/m2. Doyle  
and Reinhart also have a pretty reasonable tutorial on doing this using  
Photosphere:  
http://www.gsd.harvard.edu/research/gsdsquare/Publications/HDR_II_Photosphere.pdf
2. You'll want to make sure that in the header to your HDR, it has a  
Radiance view type that is pretty close to the opening angle of the camera  
lens you are using. An example will be something like, "VIEW= -vtv -vh 60  
-vv 40" which are some parameters I just pulled from a random  
rpict-generated image on my computer. In the ideal case, your view type  
would be the angular fisheye, "-vta -vh 180 -vv 180". I think that this is  
automatically taken care of to some degree by Photosphere, but its worth  
checking before using your images for analysis.
3. It is also useful to have an illuminance reading from the time the  
photo was taken. The DGP calculations rely on total vertical eye  
illuminance and contrast. Usually, the illumimance at the eye is  
calculated directly from the fisheye image, but when you don't have a view  
encompassing a hemisphere, you can provide the illuminance separately by  
calling evalglare as, "evalglare -i VerticalEyeIllumianance file.hdr."

Best,
Alstan

On Mon, 06 Feb 2012 21:26:49 -0500, Thomas Bleicher  
<tbleicher at googlemail.com> wrote:

> Ery
>
> You can use the pinterp program to convert from one projection to  
> another.
> See the man page for an example or dig in the archives where this has  
> been
> discussed before. However, note that the glare equations are based on a
> full hemispherical image. You will have to fill in the missing perimeter  
> of
> your converted fisheye image with values of the right brightness or your
> glare evaluation will be off.
>
> Regards,
> Thomas
>
> On Mon, Feb 6, 2012 at 9:15 PM, Ery Djunaedy  
> <ery.mailinglist at gmail.com>wrote:
>
>> Folks,
>>
>> I have a bunch of HDR images generated from photographs taken with  
>> regular
>> -- non-fisheye -- lens. Is there a way that we can use these images for
>> glare analysis in evalglare? The evalglare description says that it only
>> accepts fisheye images. There is a tutorial from Harvard GSD (Doyle and
>> Reihart) that shows a non-fisheye photo in evalglare:
>> http://www.gsd.harvard.edu/**research/gsdsquare/**Publications/HDR_III_**
>> Evalglare.pdf<http://www.gsd.harvard.edu/research/gsdsquare/Publications/HDR_III_Evalglare.pdf>
>>
>> I am wondering whether this can be done at all.
>>
>> Thanks,
>>
>> Ery
>>
>> ______________________________**_________________
>> Radiance-general mailing list
>> Radiance-general at radiance-**online.org<Radiance-general at radiance-online.org>
>> http://www.radiance-online.**org/mailman/listinfo/radiance-**general<http://www.radiance-online.org/mailman/listinfo/radiance-general>


From RFritz at lbl.gov  Mon Feb  6 20:57:23 2012
From: RFritz at lbl.gov (Randolph M. Fritz)
Date: Mon, 6 Feb 2012 20:57:23 -0800
Subject: [Radiance-general] Error: Rendering with Radiance p. 319
	Luminaire Modeling
References: <jgppge$sus$1@dough.gmane.org>
	<026495E2-2B12-41EE-A085-AC011735B169@lmi.net>
Message-ID: <jgqavi$51q$1@dough.gmane.org>

But then, why did Chas say to specify the radius of a projected unit 
sphere in RwR?  The radius of the sphere does not seem to matter, at 
least in the case of the photometry I am working with.  Does it make a 
difference with other sorts of photometry?  Or??

What am I missing?

Randolph

On 2012-02-07 01:40:29 +0000, Greg Ward said:

> Hi Randolph,
> 
> Whatever radius you give, ies2rad should adjust the brightness to keep 
> the total lumen output the same.
> 
> Best,
> -Greg
> 
>> From: "Randolph M. Fritz" <RFritz at lbl.gov>
>> Date: February 6, 2012 4:45:53 PM PST
>> 
>> On 2012-02-07 00:18:26 +0000, Randolph M. Fritz said:
>> 
>>> On 2012-02-07 00:12:18 +0000, Greg Ward said:
>>>> Hi Randoph,
>>>> Could you be more specific?  The radius of a sphere whose *projected*
>>>> area is 1.0 for any distant point is sqrt(1/pi) as Chas derived it.
>>>> This is in fact what ies2rad needs.  This is not the same as a sphere
>>>> whose total surface area is 1.0, which is the value you derived.
>>>> Is there an error in ies2rad.c, somewhere?
>>> Then maybe I've done something else wrong.  When I ran a simulation
>>> which checks the luminaire model against the IES file by simulating a
>>> goniophotometer the numbers lined up.  I'll take a closer look at my
>>> scripts and see if I can find a factor of two somewhere.
>> 
>> The same check script worked correctly with an untouched ies2rad output 
>> file with both the given geometry and a spherical substitute.
>> 
>> I then ran the procedure with -i 0.56419 and the numbers I am getting 
>> back are the same and correct.
>> 
>> I am now thoroughly confused.  Does the radius even matter in that 
>> procedure?  Or do I have a case of a luminaire where it doesn't matter?
>> 
>> Randolph


-- 
Randolph M. Fritz




From grobe at gmx.net  Tue Feb  7 05:08:42 2012
From: grobe at gmx.net (Lars O. Grobe)
Date: Tue, 07 Feb 2012 14:08:42 +0100
Subject: [Radiance-general] evalglare with regular lens
In-Reply-To: <4F308933.3080109@gmail.com>
References: <4F308933.3080109@gmail.com>
Message-ID: <4F31225A.10909@gmx.net>

Hi Ery!

Ery Djunaedy wrote:
> I have a bunch of HDR images generated from photographs taken with
> regular -- non-fisheye -- lens. Is there a way that we can use these
> images for glare analysis in evalglare? The evalglare description says
> that it only accepts fisheye images.

Evalglare uses the illuminance on the eye (image) plane for its
calculations. This requires a fisheye (unless you know that no light
would received from outside your image's field of view).

You could try to assemble a fisheye HDR from your images. Hugin (an open
source tool) is actually able to handle hdr formats and can do the
reprojection. However, as far as I know, noone validated this so far.
May be woth trying it. If you do so, let us know :)

Cheers, Lars.


From gregoryjward at gmail.com  Tue Feb  7 07:08:41 2012
From: gregoryjward at gmail.com (Greg Ward)
Date: Tue, 7 Feb 2012 07:08:41 -0800
Subject: [Radiance-general] Error: Rendering with Radiance p. 319
	Luminaire Modeling
In-Reply-To: <jgqavi$51q$1@dough.gmane.org>
References: <jgppge$sus$1@dough.gmane.org>
	<026495E2-2B12-41EE-A085-AC011735B169@lmi.net>
	<jgqavi$51q$1@dough.gmane.org>
Message-ID: <FF04812B-7C99-49AB-BAD2-15242038F718@lmi.net>

I guess you would have to ask Chas that one.  Maybe he wanted the RGB values to come out (close to) 1.0 for some reason.

-Greg

> From: "Randolph M. Fritz" <RFritz at lbl.gov>
> Date: February 6, 2012 8:57:23 PM PST
> 
> But then, why did Chas say to specify the radius of a projected unit sphere in RwR?  The radius of the sphere does not seem to matter, at least in the case of the photometry I am working with.  Does it make a difference with other sorts of photometry?  Or??
> 
> What am I missing?
> 
> Randolph
> 
> On 2012-02-07 01:40:29 +0000, Greg Ward said:
> 
>> Hi Randolph,
>> Whatever radius you give, ies2rad should adjust the brightness to keep the total lumen output the same.
>> Best,
>> -Greg


From jan.wienold at ise.fraunhofer.de  Tue Feb  7 10:27:52 2012
From: jan.wienold at ise.fraunhofer.de (Jan Wienold)
Date: Tue, 07 Feb 2012 19:27:52 +0100
Subject: [Radiance-general] evalglare with regular lens
In-Reply-To: <op.v9afk9koc8ew1p@severian.hsd1.ma.comcast.net>
References: <4F308933.3080109@gmail.com>	<CAKGV-k0zpJv+aFaZh6L13ySmTe-XtvbfF0t8=qbjvajmFL=s=g@mail.gmail.com>
	<op.v9afk9koc8ew1p@severian.hsd1.ma.comcast.net>
Message-ID: <4F316D28.5050904@ise.fraunhofer.de>

Hi all,

you can use evalglare also without a fish-eye lens, but you have to be 
aware of following:

If you want to use the DGP, then you need to have a vertical illuminance 
value. Per default, this value is calculated by evalglare by the use of 
the image. But this can be done only, if you have a full fish-eye view. 
If you don't have the fish-eye view, you can provide this value by the 
-i option (see the comment of Alstan). Then, you should measure the 
value by a luxmeter. If you haven't measured the illuminance, then it is 
problematic. The smaller you view angle is the higher is the error you make.
Please be aware, that recent studies showed, that the glare caused by 
daylight can be described best, if you take into account the vertical 
illuminance. So if you don't measure it (or measure it only partly by 
restricted view), you might get far away from a real glare evaluation. 
In other words: If you wanna do a daylight glare evaluation, you have to 
measure the vertical illuminance (either by a full fish eye or by a 
luxmeter).

Principally, evalglare does not depend on the view type. So if you have 
a smaller view (and you catch with your cam potential glare sources) + 
an additional luxmeter you can do a reliable daylight glare evaluation.

Up to the current version(0.9f), some view types were not supported 
(like -vth), but this will change :

There will be a new version (1.0) released NEXT week, which will have 
following new features (I will announce it, as soon as it is on the 
server) :

-all current view types will be supported (except parallel view) - that 
means also -vth !
-valid view is checked (many problems occurred, because users treat the 
image with programs like pcompos before putting into evalglare. But 
then, the view got lost and a wrong view leads to totally wrong results! 
Now this will be handled by the new evalglare )
-view options can be provided also per command line option
-disability glare is also calculated
-cut-out the "Guth" visual field

Jan



J. Alstan Jakubiec schrieb:
> Dear Ery,
>
> You can use evalglare with a regular hdr image as far as I understand 
> it. Jan can correct me if I'm wrong :). As Thomas notes, it is best to 
> have the full hemisphere image, but if you don't have such an image, 
> you can still get pretty good results with a couple of steps:
>
> 1. Make sure your hdr is calibrated to photometric units of cd/m2. 
> Doyle and Reinhart also have a pretty reasonable tutorial on doing 
> this using Photosphere: 
> http://www.gsd.harvard.edu/research/gsdsquare/Publications/HDR_II_Photosphere.pdf 
>
> 2. You'll want to make sure that in the header to your HDR, it has a 
> Radiance view type that is pretty close to the opening angle of the 
> camera lens you are using. An example will be something like, "VIEW= 
> -vtv -vh 60 -vv 40" which are some parameters I just pulled from a 
> random rpict-generated image on my computer. In the ideal case, your 
> view type would be the angular fisheye, "-vta -vh 180 -vv 180". I 
> think that this is automatically taken care of to some degree by 
> Photosphere, but its worth checking before using your images for 
> analysis.
> 3. It is also useful to have an illuminance reading from the time the 
> photo was taken. The DGP calculations rely on total vertical eye 
> illuminance and contrast. Usually, the illumimance at the eye is 
> calculated directly from the fisheye image, but when you don't have a 
> view encompassing a hemisphere, you can provide the illuminance 
> separately by calling evalglare as, "evalglare -i 
> VerticalEyeIllumianance file.hdr."
>
> Best,
> Alstan
>
> On Mon, 06 Feb 2012 21:26:49 -0500, Thomas Bleicher 
> <tbleicher at googlemail.com> wrote:
>
>> Ery
>>
>> You can use the pinterp program to convert from one projection to 
>> another.
>> See the man page for an example or dig in the archives where this has 
>> been
>> discussed before. However, note that the glare equations are based on a
>> full hemispherical image. You will have to fill in the missing 
>> perimeter of
>> your converted fisheye image with values of the right brightness or your
>> glare evaluation will be off.
>>
>> Regards,
>> Thomas
>>
>> On Mon, Feb 6, 2012 at 9:15 PM, Ery Djunaedy 
>> <ery.mailinglist at gmail.com>wrote:
>>
>>> Folks,
>>>
>>> I have a bunch of HDR images generated from photographs taken with 
>>> regular
>>> -- non-fisheye -- lens. Is there a way that we can use these images for
>>> glare analysis in evalglare? The evalglare description says that it 
>>> only
>>> accepts fisheye images. There is a tutorial from Harvard GSD (Doyle and
>>> Reihart) that shows a non-fisheye photo in evalglare:
>>> http://www.gsd.harvard.edu/**research/gsdsquare/**Publications/HDR_III_** 
>>>
>>> Evalglare.pdf<http://www.gsd.harvard.edu/research/gsdsquare/Publications/HDR_III_Evalglare.pdf> 
>>>
>>>
>>> I am wondering whether this can be done at all.
>>>
>>> Thanks,
>>>
>>> Ery
>>>
>>> ______________________________**_________________
>>> Radiance-general mailing list
>>> Radiance-general at radiance-**online.org<Radiance-general at radiance-online.org> 
>>>
>>> http://www.radiance-online.**org/mailman/listinfo/radiance-**general<http://www.radiance-online.org/mailman/listinfo/radiance-general> 
>>>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general


-- 
Dr.-Ing. Jan Wienold
Head of Team Passive Systems and Daylighting
Fraunhofer-Institut f?r Solare Energiesysteme
Thermal Systems and Buildings
Heidenhofstr. 2, 79110 Freiburg, Germany
Phone: +49(0)761 4588 5133 Fax:+49(0)761 4588 9133
jan.wienold at ise.fraunhofer.de
http://www.ise.fraunhofer.de

In office: 
Mo,Tue: 8:30-18:00
We,Thu: 8:30-16:00
Fr:  8:30-15:30



From urdark4ng3l at hotmail.com  Tue Feb  7 13:32:33 2012
From: urdark4ng3l at hotmail.com (Adelina Pop)
Date: Wed, 8 Feb 2012 10:32:33 +1300
Subject: [Radiance-general] 'sj' error - calculating grid points
Message-ID: <BAY155-W51DF27179C005EA96C3825B6750@phx.gbl>


Hi all,
 
I have been trying to generate point data in order to import it back into Ecotect and produce graphs but every time I get this message: "fatal - command line error at '-sj' " making the .dat file empty.
I have tried it with different values and had the same problem. It only worked once I deleted 'sj' all together from the command line.
 
This is the message for the run:
 
ECO2RAD: SETTING UP ENVIRONMENT VARIABLES...
ECO2RAD: DELETING AMBIENT AND OCTREE FILES...
ECO2RAD: RUNNING RADIANCE TO GENERATE VIEWS...
        oconv help_sky.rad help.rad > help.oct
oconv: warning - zero area for polygon "zone02.rad00005"
set ROPT=-dp 512 -ar 44 -ms 0.42 -ds .3 -dt .1 -dc .5 -dr 1 -sj 1 -st .1 -ab 2 -af help.amb -aa .15 -ad 800 -as 128 -av 0.01 0.01 0.01 -lr 8 -lw .002 -i
set VIEW=-vtv -vp 3.600 3.400 1.200 -vd -1.800 -2.600 0.000 -vu 0 0 1 -vh 90 -vv 60 -vs 0 -vl 0
        rpict -t 120 $VIEW $ROPT -x 64 -y 64 -ps 1 help.oct > NUL
rpict: 1600 rays, 0.00% after 0.0000 hours
rpict: 1619432 rays, 100.00% after 0.0028 hours
        rpict -t 120 $VIEW -x 1280 -y 960 $ROPT -ps 6 -pt .08 help.oct > help_c1.unf
rpict: 1600 rays, 0.00% after 0.0003 hours
rpict: 1061205 rays, 100.00% after 0.0036 hours
        pfilt -r .6 -x /2 -y /2 help_c1.unf > help_c1.hdr
        del help_c1.unf
ECO2RAD: CALCULATING GRID POINTS...
WARNING: THIS COULD TAKE QUITE A WHILE...
rtrace: fatal - command line error at '-sj'
ECO2RAD: GRID POINTS COMPLETE.
ECO2RAD: LAUNCHING IMAGE VIEWER...
ECO2RAD: DONE!
 
Does anyone know how to successfully produce grid point data and import it back into Ecotect?

Thanks,
Adelina
 
  		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120208/1efa3415/attachment.html>

From gregoryjward at gmail.com  Tue Feb  7 13:37:30 2012
From: gregoryjward at gmail.com (Greg Ward)
Date: Tue, 7 Feb 2012 13:37:30 -0800
Subject: [Radiance-general] 'sj' error - calculating grid points
In-Reply-To: <BAY155-W51DF27179C005EA96C3825B6750@phx.gbl>
References: <BAY155-W51DF27179C005EA96C3825B6750@phx.gbl>
Message-ID: <A225BE7E-AB49-4C62-B41A-6AF4B8E2FDBC@lmi.net>

The "-sj" option was changed to "-ss" in the latest release.  I guess ECO2RAD needs to be updated...

-Greg

> From: Adelina Pop <urdark4ng3l at hotmail.com>
> Date: February 7, 2012 1:32:33 PM PST
> 
> Hi all,
>  
> I have been trying to generate point data in order to import it back into Ecotect and produce graphs but every time I get this message: "fatal - command line error at '-sj' " making the .dat file empty.
> I have tried it with different values and had the same problem. It only worked once I deleted 'sj' all together from the command line.
>  
> This is the message for the run:
>  
> ECO2RAD: SETTING UP ENVIRONMENT VARIABLES...
> ECO2RAD: DELETING AMBIENT AND OCTREE FILES...
> ECO2RAD: RUNNING RADIANCE TO GENERATE VIEWS...
>         oconv help_sky.rad help.rad > help.oct
> oconv: warning - zero area for polygon "zone02.rad00005"
> set ROPT=-dp 512 -ar 44 -ms 0.42 -ds .3 -dt .1 -dc .5 -dr 1 -sj 1 -st .1 -ab 2 -af help.amb -aa .15 -ad 800 -as 128 -av 0.01 0.01 0.01 -lr 8 -lw .002 -i
> set VIEW=-vtv -vp 3.600 3.400 1.200 -vd -1.800 -2.600 0.000 -vu 0 0 1 -vh 90 -vv 60 -vs 0 -vl 0
>         rpict -t 120 $VIEW $ROPT -x 64 -y 64 -ps 1 help.oct > NUL
> rpict: 1600 rays, 0.00% after 0.0000 hours
> rpict: 1619432 rays, 100.00% after 0.0028 hours
>         rpict -t 120 $VIEW -x 1280 -y 960 $ROPT -ps 6 -pt .08 help.oct > help_c1.unf
> rpict: 1600 rays, 0.00% after 0.0003 hours
> rpict: 1061205 rays, 100.00% after 0.0036 hours
>         pfilt -r .6 -x /2 -y /2 help_c1.unf > help_c1.hdr
>         del help_c1.unf
> ECO2RAD: CALCULATING GRID POINTS...
> WARNING: THIS COULD TAKE QUITE A WHILE...
> rtrace: fatal - command line error at '-sj'
> ECO2RAD: GRID POINTS COMPLETE.
> ECO2RAD: LAUNCHING IMAGE VIEWER...
> ECO2RAD: DONE!
>  
> Does anyone know how to successfully produce grid point data and import it back into Ecotect?
> 
> Thanks,
> Adelina
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120207/4a555ff6/attachment.html>

From viswa at uw.edu  Tue Feb  7 19:13:00 2012
From: viswa at uw.edu (Viswanathan Kumaragurubaran)
Date: Tue, 7 Feb 2012 19:13:00 -0800
Subject: [Radiance-general] protate in MinGW Radiance and projections using
	pinterp
Message-ID: <CAFan9geaWfacBFN-EEhWyuQcnY2dM5WBJpfJ24uoNGV08nQ_bw@mail.gmail.com>

Hello Radiance users,

I have two questions (unrelated to each other). It would be great if you
can offer your insights.

Q1. I am trying to use MinGW version of Radiance in Windows (XP-vpc/7).
Everything seems to work as expected but protate command. The command
errors out with a "read error". This command seems to work fine and dumps
out expected results when I use it from Desktop Radiance installation. Has
anyone faced such issues with protate and is there a solution for MinGW
installation? Or am I missing something?

Q2. I was wondering if I can use pinterp to translate an angular
projection/fisheye image to a panorama. If yes, what should I watch out for
and how can this be done? If not, why not?

Thanks,
Viswanathan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120207/a3bd2f8e/attachment.html>

From gregoryjward at gmail.com  Tue Feb  7 20:19:33 2012
From: gregoryjward at gmail.com (Greg Ward)
Date: Tue, 7 Feb 2012 20:19:33 -0800
Subject: [Radiance-general] protate in MinGW Radiance and projections
	using pinterp
In-Reply-To: <CAFan9geaWfacBFN-EEhWyuQcnY2dM5WBJpfJ24uoNGV08nQ_bw@mail.gmail.com>
References: <CAFan9geaWfacBFN-EEhWyuQcnY2dM5WBJpfJ24uoNGV08nQ_bw@mail.gmail.com>
Message-ID: <981DA198-4266-48DE-9629-7E8C68EA8B0C@lmi.net>

Hi Viswanathan,

Thanks to you, I realized that protate.c was missing the appropriate call to SET_FILE_BINARY() for Windows.  I just checked in a fixed version, although this won't help you until someone compiles it for Windows.

Just to go with the Desktop Radiance version of that program if you still have it.

Best,
-Greg

> From: Viswanathan Kumaragurubaran <viswa at uw.edu>
> Date: February 7, 2012 7:13:00 PM PST
> 
> Hello Radiance users,
> 
> I have two questions (unrelated to each other). It would be great if you can offer your insights.
> 
> Q1. I am trying to use MinGW version of Radiance in Windows (XP-vpc/7). Everything seems to work as expected but protate command. The command errors out with a "read error". This command seems to work fine and dumps out expected results when I use it from Desktop Radiance installation. Has anyone faced such issues with protate and is there a solution for MinGW installation? Or am I missing something?
> 
> Q2. I was wondering if I can use pinterp to translate an angular projection/fisheye image to a panorama. If yes, what should I watch out for and how can this be done? If not, why not?
> 
> Thanks,
> Viswanathan


From viswa at uw.edu  Tue Feb  7 20:33:25 2012
From: viswa at uw.edu (Viswanathan Kumaragurubaran)
Date: Tue, 7 Feb 2012 20:33:25 -0800
Subject: [Radiance-general] protate in MinGW Radiance and projections
 using pinterp
In-Reply-To: <981DA198-4266-48DE-9629-7E8C68EA8B0C@lmi.net>
References: <CAFan9geaWfacBFN-EEhWyuQcnY2dM5WBJpfJ24uoNGV08nQ_bw@mail.gmail.com>
	<981DA198-4266-48DE-9629-7E8C68EA8B0C@lmi.net>
Message-ID: <CAFan9gdEjnkQmT2NNrjOzN9zXoScNBDtbeEnBW9r6MEMO7Ns_g@mail.gmail.com>

Thanks for the information Greg!

On Tue, Feb 7, 2012 at 8:19 PM, Greg Ward <gregoryjward at gmail.com> wrote:

> Hi Viswanathan,
>
> Thanks to you, I realized that protate.c was missing the appropriate call
> to SET_FILE_BINARY() for Windows.  I just checked in a fixed version,
> although this won't help you until someone compiles it for Windows.
>
> Just to go with the Desktop Radiance version of that program if you still
> have it.
>
> Best,
> -Greg
>
> > From: Viswanathan Kumaragurubaran <viswa at uw.edu>
> > Date: February 7, 2012 7:13:00 PM PST
> >
> > Hello Radiance users,
> >
> > I have two questions (unrelated to each other). It would be great if you
> can offer your insights.
> >
> > Q1. I am trying to use MinGW version of Radiance in Windows (XP-vpc/7).
> Everything seems to work as expected but protate command. The command
> errors out with a "read error". This command seems to work fine and dumps
> out expected results when I use it from Desktop Radiance installation. Has
> anyone faced such issues with protate and is there a solution for MinGW
> installation? Or am I missing something?
> >
> > Q2. I was wondering if I can use pinterp to translate an angular
> projection/fisheye image to a panorama. If yes, what should I watch out for
> and how can this be done? If not, why not?
> >
> > Thanks,
> > Viswanathan
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120207/1ea3d80c/attachment.html>

From rob.guglielmetti at gmail.com  Tue Feb  7 21:32:31 2012
From: rob.guglielmetti at gmail.com (Rob Guglielmetti)
Date: Tue, 7 Feb 2012 22:32:31 -0700
Subject: [Radiance-general] protate in MinGW Radiance and projections
	using pinterp
In-Reply-To: <981DA198-4266-48DE-9629-7E8C68EA8B0C@lmi.net>
References: <CAFan9geaWfacBFN-EEhWyuQcnY2dM5WBJpfJ24uoNGV08nQ_bw@mail.gmail.com>
	<981DA198-4266-48DE-9629-7E8C68EA8B0C@lmi.net>
Message-ID: <E04ABA9C-42F0-40A6-9E1D-C7C69A16AEC9@gmail.com>

We will include this change in our NREL package offering, which is coming real soon now (RSN) [TM]. Pinky swear. 

- Rob

On Feb 7, 2012, at 9:19 PM, Greg Ward wrote:

> Hi Viswanathan,
> 
> Thanks to you, I realized that protate.c was missing the appropriate call to SET_FILE_BINARY() for Windows.  I just checked in a fixed version, although this won't help you until someone compiles it for Windows.
> 
> Just to go with the Desktop Radiance version of that program if you still have it.
> 
> Best,
> -Greg
> 
>> From: Viswanathan Kumaragurubaran <viswa at uw.edu>
>> Date: February 7, 2012 7:13:00 PM PST
>> 
>> Hello Radiance users,
>> 
>> I have two questions (unrelated to each other). It would be great if you can offer your insights.
>> 
>> Q1. I am trying to use MinGW version of Radiance in Windows (XP-vpc/7). Everything seems to work as expected but protate command. The command errors out with a "read error". This command seems to work fine and dumps out expected results when I use it from Desktop Radiance installation. Has anyone faced such issues with protate and is there a solution for MinGW installation? Or am I missing something?
>> 
>> Q2. I was wondering if I can use pinterp to translate an angular projection/fisheye image to a panorama. If yes, what should I watch out for and how can this be done? If not, why not?
>> 
>> Thanks,
>> Viswanathan
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general



From viswa at uw.edu  Wed Feb  8 02:09:24 2012
From: viswa at uw.edu (Viswanathan Kumaragurubaran)
Date: Wed, 8 Feb 2012 02:09:24 -0800
Subject: [Radiance-general] protate in MinGW Radiance and projections
 using pinterp
In-Reply-To: <E04ABA9C-42F0-40A6-9E1D-C7C69A16AEC9@gmail.com>
References: <CAFan9geaWfacBFN-EEhWyuQcnY2dM5WBJpfJ24uoNGV08nQ_bw@mail.gmail.com>
	<981DA198-4266-48DE-9629-7E8C68EA8B0C@lmi.net>
	<E04ABA9C-42F0-40A6-9E1D-C7C69A16AEC9@gmail.com>
Message-ID: <CAFan9getkbUUy7Atas5HX7gUAzhu3_rsYfuLYHY9xi9Dm0kQKQ@mail.gmail.com>

Greg, Rob:

(Perhaps now my two questions are related in a way). I see that pinterp.c
probably also requires a similar SET_FILE_BINARY() to work under Windows.
 I get a similar read error for this command as well with MinGW compiled
binaries.

-Viswa

On Tue, Feb 7, 2012 at 9:32 PM, Rob Guglielmetti <rob.guglielmetti at gmail.com
> wrote:

> We will include this change in our NREL package offering, which is coming
> real soon now (RSN) [TM]. Pinky swear.
>
> - Rob
>
> On Feb 7, 2012, at 9:19 PM, Greg Ward wrote:
>
> > Hi Viswanathan,
> >
> > Thanks to you, I realized that protate.c was missing the appropriate
> call to SET_FILE_BINARY() for Windows.  I just checked in a fixed version,
> although this won't help you until someone compiles it for Windows.
> >
> > Just to go with the Desktop Radiance version of that program if you
> still have it.
> >
> > Best,
> > -Greg
> >
> >> From: Viswanathan Kumaragurubaran <viswa at uw.edu>
> >> Date: February 7, 2012 7:13:00 PM PST
> >>
> >> Hello Radiance users,
> >>
> >> I have two questions (unrelated to each other). It would be great if
> you can offer your insights.
> >>
> >> Q1. I am trying to use MinGW version of Radiance in Windows (XP-vpc/7).
> Everything seems to work as expected but protate command. The command
> errors out with a "read error". This command seems to work fine and dumps
> out expected results when I use it from Desktop Radiance installation. Has
> anyone faced such issues with protate and is there a solution for MinGW
> installation? Or am I missing something?
> >>
> >> Q2. I was wondering if I can use pinterp to translate an angular
> projection/fisheye image to a panorama. If yes, what should I watch out for
> and how can this be done? If not, why not?
> >>
> >> Thanks,
> >> Viswanathan
> >
> > _______________________________________________
> > Radiance-general mailing list
> > Radiance-general at radiance-online.org
> > http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120208/8088e1ab/attachment.html>

From gregoryjward at gmail.com  Wed Feb  8 05:44:04 2012
From: gregoryjward at gmail.com (Greg Ward)
Date: Wed, 8 Feb 2012 05:44:04 -0800
Subject: [Radiance-general] protate in MinGW Radiance and projections
	using pinterp
In-Reply-To: <CAFan9getkbUUy7Atas5HX7gUAzhu3_rsYfuLYHY9xi9Dm0kQKQ@mail.gmail.com>
References: <CAFan9geaWfacBFN-EEhWyuQcnY2dM5WBJpfJ24uoNGV08nQ_bw@mail.gmail.com>
	<981DA198-4266-48DE-9629-7E8C68EA8B0C@lmi.net>
	<E04ABA9C-42F0-40A6-9E1D-C7C69A16AEC9@gmail.com>
	<CAFan9getkbUUy7Atas5HX7gUAzhu3_rsYfuLYHY9xi9Dm0kQKQ@mail.gmail.com>
Message-ID: <6D88FD7B-21EB-4609-B97E-1DC6E69F7D29@lmi.net>

Check.  Got that one now, too.  Hope there aren't any others missing!

-Greg

> From: Viswanathan Kumaragurubaran <viswa at uw.edu>
> Date: February 8, 2012 2:09:24 AM PST
> 
> Greg, Rob:
> 
> (Perhaps now my two questions are related in a way). I see that pinterp.c probably also requires a similar SET_FILE_BINARY() to work under Windows.  I get a similar read error for this command as well with MinGW compiled binaries. 
> 
> -Viswa
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120208/4fbe26e9/attachment.html>

From RFritz at lbl.gov  Wed Feb  8 14:46:14 2012
From: RFritz at lbl.gov (Randolph M. Fritz)
Date: Wed, 8 Feb 2012 14:46:14 -0800
Subject: [Radiance-general] Error: Rendering with Radiance p. 319
	Luminaire Modeling
References: <jgppge$sus$1@dough.gmane.org>
	<093BDD35-78D4-4D1E-A61A-6FE267609C18@lmi.net>
	<jgpqki$4ps$1@dough.gmane.org> <jgps81$egc$1@dough.gmane.org>
	<026495E2-2B12-41EE-A085-AC011735B169@lmi.net>
	<jgqavi$51q$1@dough.gmane.org>
	<FF04812B-7C99-49AB-BAD2-15242038F718@lmi.net>
Message-ID: <jgutvm$o5b$1@dough.gmane.org>

On 2012-02-07 15:08:41 +0000, Greg Ward said:

> I guess you would have to ask Chas that one.  Maybe he wanted the RGB 
> values to come out (close to) 1.0 for some reason.

I think that is exactly right.

Thank you.

Randolph




From ery.mailinglist at gmail.com  Sat Feb 11 16:54:07 2012
From: ery.mailinglist at gmail.com (Ery Djunaedy)
Date: Sat, 11 Feb 2012 17:54:07 -0700
Subject: [Radiance-general] pinterp on a rectangle image
Message-ID: <4F370DAF.1090701@gmail.com>

Folks,

I want to convert an angular fisheye to a hemispherical fisheye, like 
the example in pinterp man page.

pinterp -vf fish.hdr -vth -ff fish.hdr 1 > hemi.hdr

My concern is that pinterp force the result image to be a square. The 
image that I have is a rectangular image, with the fisheye circle in the 
middle. When I use the above command, the result is always a square.

My question: is the interpolation also applied to the black region on 
the left and right side of the fisheye circle?

I tried to crop the input hdr to square with the following command (from 
5616x3744 to 3744x3744 pixels):

ra_xyze -r -u -o fisheye.hdr | pcompos -x 3744 - -936 0 > fisheye_crop.hdr

But when I use fisheye_crop.hdr as an input to the pinterp command, it 
gives a "bad view file"error. Does this simply confirm that man page 
that the output of pcompos cannot be used with pinterp?

Thanks,

Ery



From gregoryjward at gmail.com  Sat Feb 11 20:48:06 2012
From: gregoryjward at gmail.com (Greg Ward)
Date: Sat, 11 Feb 2012 20:48:06 -0800
Subject: [Radiance-general] pinterp on a rectangle image
In-Reply-To: <4F370DAF.1090701@gmail.com>
References: <4F370DAF.1090701@gmail.com>
Message-ID: <70F4A65C-47D3-48A6-A2B9-E1AF1F94971B@lmi.net>

Hi Ery,

Pcompos isn't smart enough to adjust the view after cropping, so it doesn't write it into the header in a way that pinterp can use it.

The image may be coming out square because a hemispherical fisheye can encompass at most 180 degrees vertically and horizontally, whereas an angular fisheye can be up to 360 degrees.  You can of course specify a different horizontal and vertical size with the -vh and -vv options, but both must be less than 180.

What is the view in your original fish.hdr file?

-Greg

> From: Ery Djunaedy <ery.mailinglist at gmail.com>
> Date: February 11, 2012 4:54:07 PM PST
> 
> Folks,
> 
> I want to convert an angular fisheye to a hemispherical fisheye, like the example in pinterp man page.
> 
> pinterp -vf fish.hdr -vth -ff fish.hdr 1 > hemi.hdr
> 
> My concern is that pinterp force the result image to be a square. The image that I have is a rectangular image, with the fisheye circle in the middle. When I use the above command, the result is always a square.
> 
> My question: is the interpolation also applied to the black region on the left and right side of the fisheye circle?
> 
> I tried to crop the input hdr to square with the following command (from 5616x3744 to 3744x3744 pixels):
> 
> ra_xyze -r -u -o fisheye.hdr | pcompos -x 3744 - -936 0 > fisheye_crop.hdr
> 
> But when I use fisheye_crop.hdr as an input to the pinterp command, it gives a "bad view file"error. Does this simply confirm that man page that the output of pcompos cannot be used with pinterp?
> 
> Thanks,
> 
> Ery


From ery.mailinglist at gmail.com  Sun Feb 12 06:00:22 2012
From: ery.mailinglist at gmail.com (Ery Djunaedy)
Date: Sun, 12 Feb 2012 07:00:22 -0700
Subject: [Radiance-general] pinterp on a rectangle image
In-Reply-To: <70F4A65C-47D3-48A6-A2B9-E1AF1F94971B@lmi.net>
References: <4F370DAF.1090701@gmail.com>
	<70F4A65C-47D3-48A6-A2B9-E1AF1F94971B@lmi.net>
Message-ID: <4F37C5F6.9000900@gmail.com>

Greg,

I guess the more important question is whether or not the original file 
can be used? The purpose for this conversion is to calculate the 
illuminance at the camera point.

Thanks,

Ery

On 02/11/2012 09:48 PM, Greg Ward wrote:
> Hi Ery,
>
> Pcompos isn't smart enough to adjust the view after cropping, so it doesn't write it into the header in a way that pinterp can use it.
>
> The image may be coming out square because a hemispherical fisheye can encompass at most 180 degrees vertically and horizontally, whereas an angular fisheye can be up to 360 degrees.  You can of course specify a different horizontal and vertical size with the -vh and -vv options, but both must be less than 180.
>
> What is the view in your original fish.hdr file?
>
> -Greg
>
>> From: Ery Djunaedy<ery.mailinglist at gmail.com>
>> Date: February 11, 2012 4:54:07 PM PST
>>
>> Folks,
>>
>> I want to convert an angular fisheye to a hemispherical fisheye, like the example in pinterp man page.
>>
>> pinterp -vf fish.hdr -vth -ff fish.hdr 1>  hemi.hdr
>>
>> My concern is that pinterp force the result image to be a square. The image that I have is a rectangular image, with the fisheye circle in the middle. When I use the above command, the result is always a square.
>>
>> My question: is the interpolation also applied to the black region on the left and right side of the fisheye circle?
>>
>> I tried to crop the input hdr to square with the following command (from 5616x3744 to 3744x3744 pixels):
>>
>> ra_xyze -r -u -o fisheye.hdr | pcompos -x 3744 - -936 0>  fisheye_crop.hdr
>>
>> But when I use fisheye_crop.hdr as an input to the pinterp command, it gives a "bad view file"error. Does this simply confirm that man page that the output of pcompos cannot be used with pinterp?
>>
>> Thanks,
>>
>> Ery
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general



From ery.mailinglist at gmail.com  Sun Feb 12 05:16:15 2012
From: ery.mailinglist at gmail.com (Ery Djunaedy)
Date: Sun, 12 Feb 2012 06:16:15 -0700
Subject: [Radiance-general] pinterp on a rectangle image
In-Reply-To: <70F4A65C-47D3-48A6-A2B9-E1AF1F94971B@lmi.net>
References: <4F370DAF.1090701@gmail.com>
	<70F4A65C-47D3-48A6-A2B9-E1AF1F94971B@lmi.net>
Message-ID: <4F37BB9F.3050006@gmail.com>

Thanks Greg,

The view is:
VIEW= -vtv -vh 132.125290 -vv 112.682388

Ery


On 02/11/2012 09:48 PM, Greg Ward wrote:
> Hi Ery,
>
> Pcompos isn't smart enough to adjust the view after cropping, so it doesn't write it into the header in a way that pinterp can use it.
>
> The image may be coming out square because a hemispherical fisheye can encompass at most 180 degrees vertically and horizontally, whereas an angular fisheye can be up to 360 degrees.  You can of course specify a different horizontal and vertical size with the -vh and -vv options, but both must be less than 180.
>
> What is the view in your original fish.hdr file?
>
> -Greg
>
>> From: Ery Djunaedy<ery.mailinglist at gmail.com>
>> Date: February 11, 2012 4:54:07 PM PST
>>
>> Folks,
>>
>> I want to convert an angular fisheye to a hemispherical fisheye, like the example in pinterp man page.
>>
>> pinterp -vf fish.hdr -vth -ff fish.hdr 1>  hemi.hdr
>>
>> My concern is that pinterp force the result image to be a square. The image that I have is a rectangular image, with the fisheye circle in the middle. When I use the above command, the result is always a square.
>>
>> My question: is the interpolation also applied to the black region on the left and right side of the fisheye circle?
>>
>> I tried to crop the input hdr to square with the following command (from 5616x3744 to 3744x3744 pixels):
>>
>> ra_xyze -r -u -o fisheye.hdr | pcompos -x 3744 - -936 0>  fisheye_crop.hdr
>>
>> But when I use fisheye_crop.hdr as an input to the pinterp command, it gives a "bad view file"error. Does this simply confirm that man page that the output of pcompos cannot be used with pinterp?
>>
>> Thanks,
>>
>> Ery
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general



From tbleicher at googlemail.com  Sun Feb 12 06:26:50 2012
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Sun, 12 Feb 2012 09:26:50 -0500
Subject: [Radiance-general] pinterp on a rectangle image
In-Reply-To: <4F37C5F6.9000900@gmail.com>
References: <4F370DAF.1090701@gmail.com>
	<70F4A65C-47D3-48A6-A2B9-E1AF1F94971B@lmi.net>
	<4F37C5F6.9000900@gmail.com>
Message-ID: <CAKGV-k1uYfqbhf0E7AmOMaw9J=yZSteEjTwyhct-Wr_gcWZ_tw@mail.gmail.com>

Ery

Without modification you can't use the cropped image as input to pinterp.
You have to add an appropriate "view ..." line to the header of the cropped
image manually to give pinterp the information it needs for the conversion.

If you are just taking away the black area to the left and right of a (180
degree) angular fisheye projection you can copy the view line from the
original file and only adjust the "-vh" value to match the "-vv" value. If
you also reduce the opening angle you have to calculate how large the
cropped angle would be and add that as the value for "-vv" and "-vh".

Regards,
Thomas

On Sun, Feb 12, 2012 at 9:00 AM, Ery Djunaedy <ery.mailinglist at gmail.com>wrote:

> Greg,
>
> I guess the more important question is whether or not the original file
> can be used? The purpose for this conversion is to calculate the
> illuminance at the camera point.
>
> Thanks,
>
> Ery
>
>
> On 02/11/2012 09:48 PM, Greg Ward wrote:
>
>> Hi Ery,
>>
>> Pcompos isn't smart enough to adjust the view after cropping, so it
>> doesn't write it into the header in a way that pinterp can use it.
>>
>> The image may be coming out square because a hemispherical fisheye can
>> encompass at most 180 degrees vertically and horizontally, whereas an
>> angular fisheye can be up to 360 degrees.  You can of course specify a
>> different horizontal and vertical size with the -vh and -vv options, but
>> both must be less than 180.
>>
>> What is the view in your original fish.hdr file?
>>
>> -Greg
>>
>>  From: Ery Djunaedy<ery.mailinglist@**gmail.com<ery.mailinglist at gmail.com>
>>> >
>>> Date: February 11, 2012 4:54:07 PM PST
>>>
>>> Folks,
>>>
>>> I want to convert an angular fisheye to a hemispherical fisheye, like
>>> the example in pinterp man page.
>>>
>>> pinterp -vf fish.hdr -vth -ff fish.hdr 1>  hemi.hdr
>>>
>>> My concern is that pinterp force the result image to be a square. The
>>> image that I have is a rectangular image, with the fisheye circle in the
>>> middle. When I use the above command, the result is always a square.
>>>
>>> My question: is the interpolation also applied to the black region on
>>> the left and right side of the fisheye circle?
>>>
>>> I tried to crop the input hdr to square with the following command (from
>>> 5616x3744 to 3744x3744 pixels):
>>>
>>> ra_xyze -r -u -o fisheye.hdr | pcompos -x 3744 - -936 0>
>>>  fisheye_crop.hdr
>>>
>>> But when I use fisheye_crop.hdr as an input to the pinterp command, it
>>> gives a "bad view file"error. Does this simply confirm that man page that
>>> the output of pcompos cannot be used with pinterp?
>>>
>>> Thanks,
>>>
>>> Ery
>>>
>> ______________________________**_________________
>> Radiance-general mailing list
>> Radiance-general at radiance-**online.org<Radiance-general at radiance-online.org>
>> http://www.radiance-online.**org/mailman/listinfo/radiance-**general<http://www.radiance-online.org/mailman/listinfo/radiance-general>
>>
>
>
> ______________________________**_________________
> Radiance-general mailing list
> Radiance-general at radiance-**online.org<Radiance-general at radiance-online.org>
> http://www.radiance-online.**org/mailman/listinfo/radiance-**general<http://www.radiance-online.org/mailman/listinfo/radiance-general>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120212/bc868e2b/attachment.html>

From gregoryjward at gmail.com  Sun Feb 12 08:57:00 2012
From: gregoryjward at gmail.com (Greg Ward)
Date: Sun, 12 Feb 2012 08:57:00 -0800
Subject: [Radiance-general] pinterp on a rectangle image
In-Reply-To: <4F37BB9F.3050006@gmail.com>
References: <4F370DAF.1090701@gmail.com>
	<70F4A65C-47D3-48A6-A2B9-E1AF1F94971B@lmi.net>
	<4F37BB9F.3050006@gmail.com>
Message-ID: <40F66941-1750-469A-AEE6-1032BD5BB6FF@lmi.net>

Hi Ery,

The output of pinterp in this case shouldn't be square, but may be "almost square" because 132 and 112 degrees are closer to each other in a hemispherical fisheye than they are in an angular fisheye.  In fact, what you have given me here with -vtv is not a fisheye view at all, but a perspective projection.  In this case, the aspect ratio is even greater.

Unless you go all the way to 180 degrees in each direction, you cannot compute an exact value for the illuminance.  You can come reasonably close if there aren't any really bright areas just out of view.  The cosine correction on most illuminance meters is not much better.

-Greg

> From: Ery Djunaedy <ery.mailinglist at gmail.com>
> Date: February 12, 2012 5:16:15 AM PST
> 
> Thanks Greg,
> 
> The view is:
> VIEW= -vtv -vh 132.125290 -vv 112.682388
> 
> Ery
> 
>> Hi Ery,
>> 
>> Pcompos isn't smart enough to adjust the view after cropping, so it doesn't write it into the header in a way that pinterp can use it.
>> 
>> The image may be coming out square because a hemispherical fisheye can encompass at most 180 degrees vertically and horizontally, whereas an angular fisheye can be up to 360 degrees.  You can of course specify a different horizontal and vertical size with the -vh and -vv options, but both must be less than 180.
>> 
>> What is the view in your original fish.hdr file?
>> 
>> -Greg
>> 
>>> From: Ery Djunaedy<ery.mailinglist at gmail.com>
>>> Date: February 11, 2012 4:54:07 PM PST
>>> 
>>> Folks,
>>> 
>>> I want to convert an angular fisheye to a hemispherical fisheye, like the example in pinterp man page.
>>> 
>>> pinterp -vf fish.hdr -vth -ff fish.hdr 1>  hemi.hdr
>>> 
>>> My concern is that pinterp force the result image to be a square. The image that I have is a rectangular image, with the fisheye circle in the middle. When I use the above command, the result is always a square.
>>> 
>>> My question: is the interpolation also applied to the black region on the left and right side of the fisheye circle?
>>> 
>>> I tried to crop the input hdr to square with the following command (from 5616x3744 to 3744x3744 pixels):
>>> 
>>> ra_xyze -r -u -o fisheye.hdr | pcompos -x 3744 - -936 0>  fisheye_crop.hdr
>>> 
>>> But when I use fisheye_crop.hdr as an input to the pinterp command, it gives a "bad view file"error. Does this simply confirm that man page that the output of pcompos cannot be used with pinterp?
>>> 
>>> Thanks,
>>> 
>>> Ery


From ery.mailinglist at gmail.com  Sun Feb 12 11:58:24 2012
From: ery.mailinglist at gmail.com (Ery Djunaedy)
Date: Sun, 12 Feb 2012 12:58:24 -0700
Subject: [Radiance-general] pinterp on a rectangle image
In-Reply-To: <40F66941-1750-469A-AEE6-1032BD5BB6FF@lmi.net>
References: <4F370DAF.1090701@gmail.com>	<70F4A65C-47D3-48A6-A2B9-E1AF1F94971B@lmi.net>	<4F37BB9F.3050006@gmail.com>
	<40F66941-1750-469A-AEE6-1032BD5BB6FF@lmi.net>
Message-ID: <4F3819E0.8080002@gmail.com>

Greg,
You are right, the pinterp result is not exactly square.
Thanks a lot for the pointers.


On 02/12/2012 09:57 AM, Greg Ward wrote:
> Hi Ery,
>
> The output of pinterp in this case shouldn't be square, but may be "almost square" because 132 and 112 degrees are closer to each other in a hemispherical fisheye than they are in an angular fisheye.  In fact, what you have given me here with -vtv is not a fisheye view at all, but a perspective projection.  In this case, the aspect ratio is even greater.
>
> Unless you go all the way to 180 degrees in each direction, you cannot compute an exact value for the illuminance.  You can come reasonably close if there aren't any really bright areas just out of view.  The cosine correction on most illuminance meters is not much better.
>
> -Greg
>
>> From: Ery Djunaedy<ery.mailinglist at gmail.com>
>> Date: February 12, 2012 5:16:15 AM PST
>>
>> Thanks Greg,
>>
>> The view is:
>> VIEW= -vtv -vh 132.125290 -vv 112.682388
>>
>> Ery
>>
>>> Hi Ery,
>>>
>>> Pcompos isn't smart enough to adjust the view after cropping, so it doesn't write it into the header in a way that pinterp can use it.
>>>
>>> The image may be coming out square because a hemispherical fisheye can encompass at most 180 degrees vertically and horizontally, whereas an angular fisheye can be up to 360 degrees.  You can of course specify a different horizontal and vertical size with the -vh and -vv options, but both must be less than 180.
>>>
>>> What is the view in your original fish.hdr file?
>>>
>>> -Greg
>>>
>>>> From: Ery Djunaedy<ery.mailinglist at gmail.com>
>>>> Date: February 11, 2012 4:54:07 PM PST
>>>>
>>>> Folks,
>>>>
>>>> I want to convert an angular fisheye to a hemispherical fisheye, like the example in pinterp man page.
>>>>
>>>> pinterp -vf fish.hdr -vth -ff fish.hdr 1>   hemi.hdr
>>>>
>>>> My concern is that pinterp force the result image to be a square. The image that I have is a rectangular image, with the fisheye circle in the middle. When I use the above command, the result is always a square.
>>>>
>>>> My question: is the interpolation also applied to the black region on the left and right side of the fisheye circle?
>>>>
>>>> I tried to crop the input hdr to square with the following command (from 5616x3744 to 3744x3744 pixels):
>>>>
>>>> ra_xyze -r -u -o fisheye.hdr | pcompos -x 3744 - -936 0>   fisheye_crop.hdr
>>>>
>>>> But when I use fisheye_crop.hdr as an input to the pinterp command, it gives a "bad view file"error. Does this simply confirm that man page that the output of pcompos cannot be used with pinterp?
>>>>
>>>> Thanks,
>>>>
>>>> Ery
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general



From jan.wienold at ise.fraunhofer.de  Fri Feb 17 05:59:26 2012
From: jan.wienold at ise.fraunhofer.de (Jan Wienold)
Date: Fri, 17 Feb 2012 14:59:26 +0100
Subject: [Radiance-general] new evalglare version available
Message-ID: <4F3E5D3E.3080708@ise.fraunhofer.de>

Hi All,

I want to announce a new evalglare version ready for download. (version 
1.0).

Following main changes are included (see also the short documentation 
which is included in the package) :

-all current view types will be supported (except parallel view) - that 
means also -vth !
-valid view is checked (many problems occurred, because often users 
treat the image with programs like pcompos before putting into 
evalglare. But then, the view got lost and a wrong view leads to totally 
wrong results! Now this will be handled by the new evalglare )
-view options can be provided also per command line option
-disability glare is also calculated
-cut-out the "Guth" visual field
-extension of the DGP equation for low-brightness scenes (Ev<380lux) , 
based on new user assessments

The main routines for glare source detection and calculation of the 
glare values are not changed.

Anyhow I strongly recommend to use from now on only the new version, 
because the issue with non valid views can cause many troubles and wrong 
values.
(and I guess many people use it and run into that problem and got wrong 
values without knowing it!!).

You can download the new version here:

http://www.ise.fraunhofer.de/radiance

good luck and an always glare free environment... ,

Jan

-- 
Dr.-Ing. Jan Wienold
Head of Team Passive Systems and Daylighting
Fraunhofer-Institut f?r Solare Energiesysteme
Thermal Systems and Buildings
Heidenhofstr. 2, 79110 Freiburg, Germany
Phone: +49(0)761 4588 5133 Fax:+49(0)761 4588 9133
jan.wienold at ise.fraunhofer.de
http://www.ise.fraunhofer.de

In office:
Mo,Tue: 8:30-18:00
We,Thu: 8:30-16:00
Fr:  8:30-15:30



From Wendelin.Sprenger at ise.fraunhofer.de  Fri Feb 17 06:42:38 2012
From: Wendelin.Sprenger at ise.fraunhofer.de (Wendelin.Sprenger at ise.fraunhofer.de)
Date: Fri, 17 Feb 2012 15:42:38 +0100
Subject: [Radiance-general] rtcontrib stdout
Message-ID: <OF32A8498C.7BF13AFA-ONC12579A7.0050B7B9-C12579A7.0050CEB7@ise.fhg.de>

Dear all,

at least on my computer (and another one), rtcontrib does give different 
outputs depending on if it is written in a file with the -o option
or given as standard output. Here are the commands:

vwrays -ff -vta -vp 0 0 2 -vd 0 0 1 -vu 0 1 0 -vh 180 -vv 180 -x 128 -y 
128 | rtcontrib -n 1 -ab 2 -ad 1024 -lw 0.0003 -h -ffa $(vwrays -d -vta 
-vp 0 0 2 -vd 0 0 1 -vu 0 1 0 -vh 180 -vv 180 -x 128 -y 128) -e MF:1 -f 
reinhart.cal -b rbin -o test_file -fo -m sky_glow -w ground.oct

vwrays -ff -vta -vp 0 0 2 -vd 0 0 1 -vu 0 1 0 -vh 180 -vv 180 -x 128 -y 
128 | rtcontrib -n 1 -ab 2 -ad 1024 -lw 0.0003 -h -ffa $(vwrays -d -vta 
-vp 0 0 2 -vd 0 0 1 -vu 0 1 0 -vh 180 -vv 180 -x 128 -y 128) -e MF:1 -f 
reinhart.cal -b rbin -fo -m sky_glow -w ground.oct > test_file

The test_file is different for the two cases! (It shows different 
results.) If written in a file, the output is always identical,  also with 
the %s and %d options.
Can somebody help me with that, please? I couldn't find anything that 
explains this behavior.

Thank you very much
Wendelin


___________________________________
Mag.rer.nat. Wendelin Sprenger
Division Thermal Systems and Buildings
Fraunhofer Institute for Solar Energy Systems ISE
Heidenhofstr. 2, 79110 Freiburg, Germany
Phone: +49 (0) 7 61/ 45 88-57 45
wendelin.sprenger at ise.fraunhofer.de
http://www.ise.fraunhofer.de
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120217/3b779eac/attachment.html>

From Robert.Guglielmetti at nrel.gov  Fri Feb 17 08:34:39 2012
From: Robert.Guglielmetti at nrel.gov (Guglielmetti, Robert)
Date: Fri, 17 Feb 2012 09:34:39 -0700
Subject: [Radiance-general] new evalglare version available
In-Reply-To: <4F3E5D3E.3080708@ise.fraunhofer.de>
Message-ID: <CB63CF24.DF4C%robert.guglielmetti@nrel.gov>

Hi Jan,

Exciting news!

I just tried compiling this on MacOS ang I get the following error:

rgugliel-14846s:evalglare rgugliel$ make evalglare
gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
common/color.o common/color.c -I. -Igeometry
gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
common/resolu.o common/resolu.c -I. -Igeometry
common/resolu.c: In function ?str2resolu?:
common/resolu.c:98: warning: implicit declaration of function ?atoi?
gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
common/header.o common/header.c -I. -Igeometry
gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
common/image.o common/image.c -I. -Igeometry
gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
common/fvect.o common/fvect.c -I. -Igeometry
gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
common/badarg.o common/badarg.c -I. -Igeometry
gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
common/words.o common/words.c -I. -Igeometry
gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
common/fputword.o common/fputword.c -I. -Igeometry
gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
common/expandarg.o common/expandarg.c -I. -Igeometry
gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
common/wordfile.o common/wordfile.c -I. -Igeometry
gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
common/bmalloc.o common/bmalloc.c -I. -Igeometry
gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
common/mat4.o common/mat4.c -I. -Igeometry
gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o pictool.o
pictool.c -I. -Igeometry
pictool.c: In function ?read_exposure?:
pictool.c:90: error: nested functions are disabled, use -fnested-functions
to re-enable
make: *** [pictool.o] Error 1

Then I tried the following, also with no luck:

rgugliel-14846s:evalglare rgugliel$ make evalglare -fnested-functions
make: nested-functions: No such file or directory
make: *** No rule to make target `nested-functions'.  Stop.
rgugliel-14846s:evalglare rgugliel$ make -fnested-functions evalglare
make: nested-functions: No such file or directory
make: *** No rule to make target `nested-functions'.  Stop.
rgugliel-14846s:evalglare rgugliel$

Ideas? I know you only vouch for Linux with the source and provide a
pre-compiled Windows version, but it'd be good to get this working on
MacOS once and for all, now that it's at version 1.0 status.


 
Rob Guglielmetti  IESNA, LEED AP
Commercial Buildings Research Group
National Renewable Energy Laboratory
1617 Cole Blvd MS:RSF202
Golden, CO 80401
T. 303.275.4319
F. 303.630.2055
E. robert.guglielmetti at nrel.gov





On 2/17/12 6:59 AM, "Jan Wienold" <jan.wienold at ise.fraunhofer.de> wrote:

>Hi All,
>
>I want to announce a new evalglare version ready for download. (version
>1.0).
>
>Following main changes are included (see also the short documentation
>which is included in the package) :
>
>-all current view types will be supported (except parallel view) - that
>means also -vth !
>-valid view is checked (many problems occurred, because often users
>treat the image with programs like pcompos before putting into
>evalglare. But then, the view got lost and a wrong view leads to totally
>wrong results! Now this will be handled by the new evalglare )
>-view options can be provided also per command line option
>-disability glare is also calculated
>-cut-out the "Guth" visual field
>-extension of the DGP equation for low-brightness scenes (Ev<380lux) ,
>based on new user assessments
>
>The main routines for glare source detection and calculation of the
>glare values are not changed.
>
>Anyhow I strongly recommend to use from now on only the new version,
>because the issue with non valid views can cause many troubles and wrong
>values.
>(and I guess many people use it and run into that problem and got wrong
>values without knowing it!!).
>
>You can download the new version here:
>
>http://www.ise.fraunhofer.de/radiance
>
>good luck and an always glare free environment... ,
>
>Jan
>
>-- 
>Dr.-Ing. Jan Wienold
>Head of Team Passive Systems and Daylighting
>Fraunhofer-Institut f?r Solare Energiesysteme
>Thermal Systems and Buildings
>Heidenhofstr. 2, 79110 Freiburg, Germany
>Phone: +49(0)761 4588 5133 Fax:+49(0)761 4588 9133
>jan.wienold at ise.fraunhofer.de
>http://www.ise.fraunhofer.de
>
>In office:
>Mo,Tue: 8:30-18:00
>We,Thu: 8:30-16:00
>Fr:  8:30-15:30
>
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general at radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general



From gregoryjward at gmail.com  Fri Feb 17 08:42:08 2012
From: gregoryjward at gmail.com (Greg Ward)
Date: Fri, 17 Feb 2012 08:42:08 -0800
Subject: [Radiance-general] rtcontrib stdout
In-Reply-To: <OF32A8498C.7BF13AFA-ONC12579A7.0050B7B9-C12579A7.0050CEB7@ise.fhg.de>
References: <OF32A8498C.7BF13AFA-ONC12579A7.0050B7B9-C12579A7.0050CEB7@ise.fhg.de>
Message-ID: <1DA759DC-CCC1-4AFA-BC7F-7F4986F40907@lmi.net>

Hi Wendelin,

What puzzles me is not that you get different results between your two runs, but that rtcontrib produces the _same_ result under some circumstances.  There should be at least some small variations due to random sampling in every case, unless you specify the -u- option.

Do you mean that your runs are "mostly similar" with the exception of noise, or "identical" as you say?

-Greg

> From: Wendelin.Sprenger at ise.fraunhofer.de
> Date: February 17, 2012 6:42:38 AM PST
> 
> Dear all, 
> 
> at least on my computer (and another one), rtcontrib does give different outputs depending on if it is written in a file with the -o option 
> or given as standard output. Here are the commands: 
> 
> vwrays -ff -vta -vp 0 0 2 -vd 0 0 1 -vu 0 1 0 -vh 180 -vv 180 -x 128 -y 128 | rtcontrib -n 1 -ab 2 -ad 1024 -lw 0.0003 -h -ffa $(vwrays -d -vta -vp 0 0 2 -vd 0 0 1 -vu 0 1 0 -vh 180 -vv 180 -x 128 -y 128) -e MF:1 -f reinhart.cal -b rbin -o test_file -fo -m sky_glow -w ground.oct 
> 
> vwrays -ff -vta -vp 0 0 2 -vd 0 0 1 -vu 0 1 0 -vh 180 -vv 180 -x 128 -y 128 | rtcontrib -n 1 -ab 2 -ad 1024 -lw 0.0003 -h -ffa $(vwrays -d -vta -vp 0 0 2 -vd 0 0 1 -vu 0 1 0 -vh 180 -vv 180 -x 128 -y 128) -e MF:1 -f reinhart.cal -b rbin -fo -m sky_glow -w ground.oct > test_file 
> 
> The test_file is different for the two cases! (It shows different results.) If written in a file, the output is always identical,  also with the %s and %d options. 
> Can somebody help me with that, please? I couldn't find anything that explains this behavior. 
> 
> Thank you very much 
> Wendelin 


From tbleicher at googlemail.com  Fri Feb 17 10:05:24 2012
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Fri, 17 Feb 2012 13:05:24 -0500
Subject: [Radiance-general] new evalglare version available
In-Reply-To: <CB63CF24.DF4C%robert.guglielmetti@nrel.gov>
References: <4F3E5D3E.3080708@ise.fraunhofer.de>
	<CB63CF24.DF4C%robert.guglielmetti@nrel.gov>
Message-ID: <CAKGV-k3KbBMoknGEtB6yYWT50u2oiNbHTdV_NV9aunHKM_CJ_g@mail.gmail.com>

Rob

The -fnested-functions options should go into the GCC arguments. I think
make has it's own way of handling "-f" options so it won't pass this on to
the compiler.

Regards,
Thomas

On Fri, Feb 17, 2012 at 11:34 AM, Guglielmetti, Robert <
Robert.Guglielmetti at nrel.gov> wrote:

> pictool.c: In function ?read_exposure?:
> pictool.c:90: error: nested functions are disabled, use -fnested-functions
> to re-enable
> make: *** [pictool.o] Error 1
>
> Then I tried the following, also with no luck:
>
> rgugliel-14846s:evalglare rgugliel$ make evalglare -fnested-functions
> make: nested-functions: No such file or directory
> make: *** No rule to make target `nested-functions'.  Stop.
> rgugliel-14846s:evalglare rgugliel$ make -fnested-functions evalglare
> make: nested-functions: No such file or directory
> make: *** No rule to make target `nested-functions'.  Stop.
> rgugliel-14846s:evalglare rgugliel$
>
> Ideas? I know you only vouch for Linux with the source and provide a
> pre-compiled Windows version, but it'd be good to get this working on
> MacOS once and for all, now that it's at version 1.0 status.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120217/d682d081/attachment.html>

From Robert.Guglielmetti at nrel.gov  Fri Feb 17 10:11:47 2012
From: Robert.Guglielmetti at nrel.gov (Guglielmetti, Robert)
Date: Fri, 17 Feb 2012 11:11:47 -0700
Subject: [Radiance-general] new evalglare version available
In-Reply-To: <CAKGV-k3KbBMoknGEtB6yYWT50u2oiNbHTdV_NV9aunHKM_CJ_g@mail.gmail.com>
Message-ID: <CB63E5F5.DF81%robert.guglielmetti@nrel.gov>

Thanks Thomas,

I added that flag to the makefile, and the code built, but I get "Abort Trap" errors when I try to use evalglare on MacOS (which is the error I used to get with the old version). Has anyone been able to get a usable build of evalglare on MacOS?

Rob Guglielmetti  IESNA, LEED AP
Commercial Buildings Research Group
National Renewable Energy Laboratory
1617 Cole Blvd MS:RSF202
Golden, CO 80401
T. 303.275.4319
F. 303.630.2055
E. robert.guglielmetti at nrel.gov


On 2/17/12 11:05 AM, "Thomas Bleicher" <tbleicher at googlemail.com<mailto:tbleicher at googlemail.com>> wrote:

Rob

The -fnested-functions options should go into the GCC arguments. I think make has it's own way of handling "-f" options so it won't pass this on to the compiler.

Regards,
Thomas

On Fri, Feb 17, 2012 at 11:34 AM, Guglielmetti, Robert <Robert.Guglielmetti at nrel.gov<mailto:Robert.Guglielmetti at nrel.gov>> wrote:
pictool.c: In function ?read_exposure?:
pictool.c:90: error: nested functions are disabled, use -fnested-functions
to re-enable
make: *** [pictool.o] Error 1

Then I tried the following, also with no luck:

rgugliel-14846s:evalglare rgugliel$ make evalglare -fnested-functions
make: nested-functions: No such file or directory
make: *** No rule to make target `nested-functions'.  Stop.
rgugliel-14846s:evalglare rgugliel$ make -fnested-functions evalglare
make: nested-functions: No such file or directory
make: *** No rule to make target `nested-functions'.  Stop.
rgugliel-14846s:evalglare rgugliel$

Ideas? I know you only vouch for Linux with the source and provide a
pre-compiled Windows version, but it'd be good to get this working on
MacOS once and for all, now that it's at version 1.0 status.

From ery.mailinglist at gmail.com  Fri Feb 17 10:14:51 2012
From: ery.mailinglist at gmail.com (Ery Djunaedy)
Date: Fri, 17 Feb 2012 11:14:51 -0700
Subject: [Radiance-general] new evalglare version available
In-Reply-To: <CB63CF24.DF4C%robert.guglielmetti@nrel.gov>
References: <CB63CF24.DF4C%robert.guglielmetti@nrel.gov>
Message-ID: <4F3E991B.9010004@gmail.com>

Jan,

Another error report here. I use linux (gcc version 4.5.2 (Ubuntu/Linaro 
4.5.2-8ubuntu4).

I have the following warning when compiling:
*********************
In function ?strcpy?,
     inlined from ?main? at evalglare.c:1194:8:
/usr/include/bits/string3.h:105:3: warning: call to 
__builtin___strcpy_chk will always overflow destination buffer
*********************

evalglare is produced despite the warning. But when I tried to use it, I 
have the following error:
*********************
*** buffer overflow detected ***: evalglare terminated
======= Backtrace: =========
/lib/i386-linux-gnu/libc.so.6(__fortify_fail+0x50)[0xb7647df0]
/lib/i386-linux-gnu/libc.so.6(+0xe4cca)[0xb7646cca]
/lib/i386-linux-gnu/libc.so.6(__strcpy_chk+0x3f)[0xb764605f]
evalglare[0x804b9c5]
/lib/i386-linux-gnu/libc.so.6(__libc_start_main+0xe7)[0xb7578e37]
evalglare[0x80490f1]
*********************

Any idea why?

Thanks,

Ery


On 02/17/2012 09:34 AM, Guglielmetti, Robert wrote:
> Hi Jan,
>
> Exciting news!
>
> I just tried compiling this on MacOS ang I get the following error:
>
> rgugliel-14846s:evalglare rgugliel$ make evalglare
> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
> common/color.o common/color.c -I. -Igeometry
> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
> common/resolu.o common/resolu.c -I. -Igeometry
> common/resolu.c: In function ?str2resolu?:
> common/resolu.c:98: warning: implicit declaration of function ?atoi?
> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
> common/header.o common/header.c -I. -Igeometry
> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
> common/image.o common/image.c -I. -Igeometry
> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
> common/fvect.o common/fvect.c -I. -Igeometry
> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
> common/badarg.o common/badarg.c -I. -Igeometry
> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
> common/words.o common/words.c -I. -Igeometry
> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
> common/fputword.o common/fputword.c -I. -Igeometry
> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
> common/expandarg.o common/expandarg.c -I. -Igeometry
> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
> common/wordfile.o common/wordfile.c -I. -Igeometry
> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
> common/bmalloc.o common/bmalloc.c -I. -Igeometry
> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
> common/mat4.o common/mat4.c -I. -Igeometry
> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o pictool.o
> pictool.c -I. -Igeometry
> pictool.c: In function ?read_exposure?:
> pictool.c:90: error: nested functions are disabled, use -fnested-functions
> to re-enable
> make: *** [pictool.o] Error 1
>
> Then I tried the following, also with no luck:
>
> rgugliel-14846s:evalglare rgugliel$ make evalglare -fnested-functions
> make: nested-functions: No such file or directory
> make: *** No rule to make target `nested-functions'.  Stop.
> rgugliel-14846s:evalglare rgugliel$ make -fnested-functions evalglare
> make: nested-functions: No such file or directory
> make: *** No rule to make target `nested-functions'.  Stop.
> rgugliel-14846s:evalglare rgugliel$
>
> Ideas? I know you only vouch for Linux with the source and provide a
> pre-compiled Windows version, but it'd be good to get this working on
> MacOS once and for all, now that it's at version 1.0 status.
>
>
>
> Rob Guglielmetti  IESNA, LEED AP
> Commercial Buildings Research Group
> National Renewable Energy Laboratory
> 1617 Cole Blvd MS:RSF202
> Golden, CO 80401
> T. 303.275.4319
> F. 303.630.2055
> E. robert.guglielmetti at nrel.gov
>
>
>
>
>
> On 2/17/12 6:59 AM, "Jan Wienold"<jan.wienold at ise.fraunhofer.de>  wrote:
>
>> Hi All,
>>
>> I want to announce a new evalglare version ready for download. (version
>> 1.0).
>>
>> Following main changes are included (see also the short documentation
>> which is included in the package) :
>>
>> -all current view types will be supported (except parallel view) - that
>> means also -vth !
>> -valid view is checked (many problems occurred, because often users
>> treat the image with programs like pcompos before putting into
>> evalglare. But then, the view got lost and a wrong view leads to totally
>> wrong results! Now this will be handled by the new evalglare )
>> -view options can be provided also per command line option
>> -disability glare is also calculated
>> -cut-out the "Guth" visual field
>> -extension of the DGP equation for low-brightness scenes (Ev<380lux) ,
>> based on new user assessments
>>
>> The main routines for glare source detection and calculation of the
>> glare values are not changed.
>>
>> Anyhow I strongly recommend to use from now on only the new version,
>> because the issue with non valid views can cause many troubles and wrong
>> values.
>> (and I guess many people use it and run into that problem and got wrong
>> values without knowing it!!).
>>
>> You can download the new version here:
>>
>> http://www.ise.fraunhofer.de/radiance
>>
>> good luck and an always glare free environment... ,
>>
>> Jan
>>
>> -- 
>> Dr.-Ing. Jan Wienold
>> Head of Team Passive Systems and Daylighting
>> Fraunhofer-Institut f?r Solare Energiesysteme
>> Thermal Systems and Buildings
>> Heidenhofstr. 2, 79110 Freiburg, Germany
>> Phone: +49(0)761 4588 5133 Fax:+49(0)761 4588 9133
>> jan.wienold at ise.fraunhofer.de
>> http://www.ise.fraunhofer.de
>>
>> In office:
>> Mo,Tue: 8:30-18:00
>> We,Thu: 8:30-16:00
>> Fr:  8:30-15:30
>>
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general



From RFritz at lbl.gov  Fri Feb 17 12:16:25 2012
From: RFritz at lbl.gov (Randolph M. Fritz)
Date: Fri, 17 Feb 2012 12:16:25 -0800
Subject: [Radiance-general] new evalglare version available
References: <4F3E5D3E.3080708@ise.fraunhofer.de>
	<CB63CF24.DF4C%robert.guglielmetti@nrel.gov>
Message-ID: <jhmcip$mj8$1@dough.gmane.org>

Jan, Rob,

I don't think nested functions are any version of standard C; I'm 
pretty sure they are a GNU compiler extension.  If it's possible, do 
you think you could engineer these out?  I'd look at it, but no-way do 
I have time to work on it.

it's probably best if C code compiles with the gcc "-ansi -pedantic" 
(c90) or "-std=c99 -pedantic" options.  That's not a complete check; 
some non-ISO usages are not caught, but it's better than simply letting 
something completely non-standard slip through.

Randolph

(Do we need to take this to the developer list?)

On 2012-02-17 16:34:39 +0000, Guglielmetti, Robert said:

> Hi Jan,
> 
> Exciting news!
> 
> I just tried compiling this on MacOS ang I get the following error:
> 
> rgugliel-14846s:evalglare rgugliel$ make evalglare
> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
> common/color.o common/color.c -I. -Igeometry
> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
> common/resolu.o common/resolu.c -I. -Igeometry
> common/resolu.c: In function ?str2resolu?:
> common/resolu.c:98: warning: implicit declaration of function ?atoi?
> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
> common/header.o common/header.c -I. -Igeometry
> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
> common/image.o common/image.c -I. -Igeometry
> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
> common/fvect.o common/fvect.c -I. -Igeometry
> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
> common/badarg.o common/badarg.c -I. -Igeometry
> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
> common/words.o common/words.c -I. -Igeometry
> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
> common/fputword.o common/fputword.c -I. -Igeometry
> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
> common/expandarg.o common/expandarg.c -I. -Igeometry
> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
> common/wordfile.o common/wordfile.c -I. -Igeometry
> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
> common/bmalloc.o common/bmalloc.c -I. -Igeometry
> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
> common/mat4.o common/mat4.c -I. -Igeometry
> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o pictool.o
> pictool.c -I. -Igeometry
> pictool.c: In function ?read_exposure?:
> pictool.c:90: error: nested functions are disabled, use -fnested-functions
> to re-enable
> make: *** [pictool.o] Error 1
> 
> Then I tried the following, also with no luck:
> 
> rgugliel-14846s:evalglare rgugliel$ make evalglare -fnested-functions
> make: nested-functions: No such file or directory
> make: *** No rule to make target `nested-functions'.  Stop.
> rgugliel-14846s:evalglare rgugliel$ make -fnested-functions evalglare
> make: nested-functions: No such file or directory
> make: *** No rule to make target `nested-functions'.  Stop.
> rgugliel-14846s:evalglare rgugliel$
> 
> Ideas? I know you only vouch for Linux with the source and provide a
> pre-compiled Windows version, but it'd be good to get this working on
> MacOS once and for all, now that it's at version 1.0 status.
> 
> 
> Rob Guglielmetti  IESNA, LEED AP
> Commercial Buildings Research Group
> National Renewable Energy Laboratory
> 1617 Cole Blvd MS:RSF202
> Golden, CO 80401
> T. 303.275.4319
> F. 303.630.2055
> E. robert.guglielmetti at nrel.gov
> 
> 
> 
> 
> 
> On 2/17/12 6:59 AM, "Jan Wienold" 
> <jan.wienold at ise.fraunhofer.de> wrote:
> 
>> Hi All,
>> 
>> I want to announce a new evalglare version ready for download. (version
>> 1.0).
>> 
>> Following main changes are included (see also the short documentation
>> which is included in the package) :
>> 
>> -all current view types will be supported (except parallel view) - that
>> means also -vth !
>> -valid view is checked (many problems occurred, because often users
>> treat the image with programs like pcompos before putting into
>> evalglare. But then, the view got lost and a wrong view leads to totally
>> wrong results! Now this will be handled by the new evalglare )
>> -view options can be provided also per command line option
>> -disability glare is also calculated
>> -cut-out the "Guth" visual field
>> -extension of the DGP equation for low-brightness scenes (Ev<380lux) ,
>> based on new user assessments
>> 
>> The main routines for glare source detection and calculation of the
>> glare values are not changed.
>> 
>> Anyhow I strongly recommend to use from now on only the new version,
>> because the issue with non valid views can cause many troubles and wrong
>> values.
>> (and I guess many people use it and run into that problem and got wrong
>> values without knowing it!!).
>> 
>> You can download the new version here:
>> 
>> http://www.ise.fraunhofer.de/radiance
>> 
>> good luck and an always glare free environment... ,
>> 
>> Jan
>> 
>> --
>> Dr.-Ing. Jan Wienold
>> Head of Team Passive Systems and Daylighting
>> Fraunhofer-Institut f?r Solare Energiesysteme
>> Thermal Systems and Buildings
>> Heidenhofstr. 2, 79110 Freiburg, Germany
>> Phone: +49(0)761 4588 5133 Fax:+49(0)761 4588 9133
>> jan.wienold at ise.fraunhofer.de
>> http://www.ise.fraunhofer.de
>> 
>> In office:
>> Mo,Tue: 8:30-18:00
>> We,Thu: 8:30-16:00
>> Fr:  8:30-15:30
>> 
>> 
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general


-- 
Randolph M. Fritz




From jan.wienold at ise.fraunhofer.de  Fri Feb 17 13:44:30 2012
From: jan.wienold at ise.fraunhofer.de (Jan Wienold)
Date: Fri, 17 Feb 2012 22:44:30 +0100
Subject: [Radiance-general] new evalglare version available
In-Reply-To: <jhmcip$mj8$1@dough.gmane.org>
References: <4F3E5D3E.3080708@ise.fraunhofer.de>
	<CB63CF24.DF4C%robert.guglielmetti@nrel.gov>
	<jhmcip$mj8$1@dough.gmane.org>
Message-ID: <4F3ECA3E.1090406@ise.fraunhofer.de>

Hi all,

oh dear, I thought there is no problem compiling it, since I got it 
easily under my opensuse12.1, debian lenny, cygwin and mingw running...

Unfortunately  I will be away the next days and cannot work on the code 
- also my collegue who implemented the new check regarding view options 
is on vacation next week. So we will look at it the week after - sorry 
for any inconvenience! As soon as he is back, we will look at this and 
provide a new version.

Jan




On 02/17/2012 09:16 PM, Randolph M. Fritz wrote:
> Jan, Rob,
>
> I don't think nested functions are any version of standard C; I'm 
> pretty sure they are a GNU compiler extension.  If it's possible, do 
> you think you could engineer these out?  I'd look at it, but no-way do 
> I have time to work on it.
>
> it's probably best if C code compiles with the gcc "-ansi -pedantic" 
> (c90) or "-std=c99 -pedantic" options.  That's not a complete check; 
> some non-ISO usages are not caught, but it's better than simply 
> letting something completely non-standard slip through.
>
> Randolph
>
> (Do we need to take this to the developer list?)
>
> On 2012-02-17 16:34:39 +0000, Guglielmetti, Robert said:
>
>> Hi Jan,
>>
>> Exciting news!
>>
>> I just tried compiling this on MacOS ang I get the following error:
>>
>> rgugliel-14846s:evalglare rgugliel$ make evalglare
>> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
>> common/color.o common/color.c -I. -Igeometry
>> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
>> common/resolu.o common/resolu.c -I. -Igeometry
>> common/resolu.c: In function ?str2resolu?:
>> common/resolu.c:98: warning: implicit declaration of function ?atoi?
>> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
>> common/header.o common/header.c -I. -Igeometry
>> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
>> common/image.o common/image.c -I. -Igeometry
>> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
>> common/fvect.o common/fvect.c -I. -Igeometry
>> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
>> common/badarg.o common/badarg.c -I. -Igeometry
>> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
>> common/words.o common/words.c -I. -Igeometry
>> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
>> common/fputword.o common/fputword.c -I. -Igeometry
>> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
>> common/expandarg.o common/expandarg.c -I. -Igeometry
>> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
>> common/wordfile.o common/wordfile.c -I. -Igeometry
>> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
>> common/bmalloc.o common/bmalloc.c -I. -Igeometry
>> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o
>> common/mat4.o common/mat4.c -I. -Igeometry
>> gcc -c -g -DMSDOS  -DPICT_GLARE -DFLOAT=double -O3  -Wall  -o pictool.o
>> pictool.c -I. -Igeometry
>> pictool.c: In function ?read_exposure?:
>> pictool.c:90: error: nested functions are disabled, use 
>> -fnested-functions
>> to re-enable
>> make: *** [pictool.o] Error 1
>>
>> Then I tried the following, also with no luck:
>>
>> rgugliel-14846s:evalglare rgugliel$ make evalglare -fnested-functions
>> make: nested-functions: No such file or directory
>> make: *** No rule to make target `nested-functions'.  Stop.
>> rgugliel-14846s:evalglare rgugliel$ make -fnested-functions evalglare
>> make: nested-functions: No such file or directory
>> make: *** No rule to make target `nested-functions'.  Stop.
>> rgugliel-14846s:evalglare rgugliel$
>>
>> Ideas? I know you only vouch for Linux with the source and provide a
>> pre-compiled Windows version, but it'd be good to get this working on
>> MacOS once and for all, now that it's at version 1.0 status.
>>
>>
>> Rob Guglielmetti  IESNA, LEED AP
>> Commercial Buildings Research Group
>> National Renewable Energy Laboratory
>> 1617 Cole Blvd MS:RSF202
>> Golden, CO 80401
>> T. 303.275.4319
>> F. 303.630.2055
>> E. robert.guglielmetti at nrel.gov
>>
>>
>>
>>
>>
>> On 2/17/12 6:59 AM, "Jan Wienold" <jan.wienold at ise.fraunhofer.de> wrote:
>>
>>> Hi All,
>>>
>>> I want to announce a new evalglare version ready for download. (version
>>> 1.0).
>>>
>>> Following main changes are included (see also the short documentation
>>> which is included in the package) :
>>>
>>> -all current view types will be supported (except parallel view) - that
>>> means also -vth !
>>> -valid view is checked (many problems occurred, because often users
>>> treat the image with programs like pcompos before putting into
>>> evalglare. But then, the view got lost and a wrong view leads to 
>>> totally
>>> wrong results! Now this will be handled by the new evalglare )
>>> -view options can be provided also per command line option
>>> -disability glare is also calculated
>>> -cut-out the "Guth" visual field
>>> -extension of the DGP equation for low-brightness scenes (Ev<380lux) ,
>>> based on new user assessments
>>>
>>> The main routines for glare source detection and calculation of the
>>> glare values are not changed.
>>>
>>> Anyhow I strongly recommend to use from now on only the new version,
>>> because the issue with non valid views can cause many troubles and 
>>> wrong
>>> values.
>>> (and I guess many people use it and run into that problem and got wrong
>>> values without knowing it!!).
>>>
>>> You can download the new version here:
>>>
>>> http://www.ise.fraunhofer.de/radiance
>>>
>>> good luck and an always glare free environment... ,
>>>
>>> Jan
>>>
>>> -- 
>>> Dr.-Ing. Jan Wienold
>>> Head of Team Passive Systems and Daylighting
>>> Fraunhofer-Institut f?r Solare Energiesysteme
>>> Thermal Systems and Buildings
>>> Heidenhofstr. 2, 79110 Freiburg, Germany
>>> Phone: +49(0)761 4588 5133 Fax:+49(0)761 4588 9133
>>> jan.wienold at ise.fraunhofer.de
>>> http://www.ise.fraunhofer.de
>>>
>>> In office:
>>> Mo,Tue: 8:30-18:00
>>> We,Thu: 8:30-16:00
>>> Fr:  8:30-15:30
>>>
>>>
>>> _______________________________________________
>>> Radiance-general mailing list
>>> Radiance-general at radiance-online.org
>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>


-- 
Dr.-Ing. Jan Wienold
Head of Team Passive Systems and Daylighting
Fraunhofer-Institut f?r Solare Energiesysteme
Thermal Systems and Buildings
Heidenhofstr. 2, 79110 Freiburg, Germany
Phone: +49(0)761 4588 5133 Fax:+49(0)761 4588 9133
jan.wienold at ise.fraunhofer.de
http://www.ise.fraunhofer.de

In office:
Mo,Tue: 8:30-18:00
We,Thu: 8:30-16:00
Fr:  8:30-15:30



From grobe at gmx.net  Sat Feb 18 02:45:59 2012
From: grobe at gmx.net (Lars O. Grobe)
Date: Sat, 18 Feb 2012 11:45:59 +0100
Subject: [Radiance-general] new evalglare version available
In-Reply-To: <4F3E991B.9010004@gmail.com>
References: <CB63CF24.DF4C%robert.guglielmetti@nrel.gov>
	<4F3E991B.9010004@gmail.com>
Message-ID: <4F3F8167.10207@gmx.net>

Hi!

First of all, thank you Jan for providing us with an improved release of
evalglare!

> I have the following warning when compiling:
> *********************
> In function ?strcpy?,
>     inlined from ?main? at evalglare.c:1194:8:
> /usr/include/bits/string3.h:105:3: warning: call to
> __builtin___strcpy_chk will always overflow destination buffer
> *********************

Hm, honestly evalglare contains quite a lot of code handling strings in
a rather risky way. E.g. the mentioned warning results from using strcpy
without checking that enough memory is available for the version string
- which results in compiler warnings (the best thing to happen) or
crashes. In this specific case, you can simply reserve some more memory
for the version string changing the line 1149 from

char file_out[500], file_out2[500], blank[1], version[40];

to

char file_out[500], file_out2[500], blank[1], version[64];

But of course the next change in the version string may break this
again. It would probably make a lot of sense to use defines for the
string operations (the whole version variable is not really needed
here), or at least set a variable to the maximum string length (Radiance
has MAXSTR) and check that what you copy into a string never exceeds
this (using strlen).

Cheers, Lars.


From rob.guglielmetti at gmail.com  Sat Feb 18 07:43:51 2012
From: rob.guglielmetti at gmail.com (Rob Guglielmetti)
Date: Sat, 18 Feb 2012 08:43:51 -0700
Subject: [Radiance-general] new evalglare version available
In-Reply-To: <4F3F8167.10207@gmx.net>
References: <CB63CF24.DF4C%robert.guglielmetti@nrel.gov>
	<4F3E991B.9010004@gmail.com> <4F3F8167.10207@gmx.net>
Message-ID: <8B334B94-5CC7-4C34-9276-323CC67ABC00@gmail.com>

On Feb 18, 2012, at 3:45 AM, Lars O. Grobe wrote:

> Hi!
> 
> First of all, thank you Jan for providing us with an improved release of
> evalglare!


Indeed, thanks Jan!

> Hm, honestly evalglare contains quite a lot of code handling strings in
> a rather risky way. E.g. the mentioned warning results from using strcpy
> without checking that enough memory is available for the version string<snip>

THanks Lars for providing this advice. Looking forward to seeing what Jan comes up with upon his return!

- Rob

From RFritz at lbl.gov  Sat Feb 18 11:32:53 2012
From: RFritz at lbl.gov (Randolph M. Fritz)
Date: Sat, 18 Feb 2012 11:32:53 -0800
Subject: [Radiance-general] Introduction to Lighting Simulation, Radiance,
	and Simulating Electric Light
Message-ID: <jhoud5$suj$1@dough.gmane.org>

I've been asked to give a talk on on the basics of lighting simulation, 
Radiance, and perhaps simulating electric light.

The victims, er, audience for this are a group of architecture students 
in an electric lighting class, run by an architect and lighting 
designer.  I have three hours, though I don't have to use them all.  I 
intend to reserve at least some of the time for questions.

Any thoughts on how I might approach such a talk?

-- 
Randolph M. Fritz




From rob.guglielmetti at gmail.com  Sat Feb 18 11:38:19 2012
From: rob.guglielmetti at gmail.com (Rob Guglielmetti)
Date: Sat, 18 Feb 2012 12:38:19 -0700
Subject: [Radiance-general] Introduction to Lighting Simulation, Radiance,
	and Simulating Electric Light
In-Reply-To: <jhoud5$suj$1@dough.gmane.org>
References: <jhoud5$suj$1@dough.gmane.org>
Message-ID: <1A6FB4CC-5D15-46FB-B5D5-1BAF83B347EB@gmail.com>

Well I'd say you asked the best bunch of people in the world. 

I can humbly offer some slides on lighting simulation from talks I've done in the past, but surely the professional educators on the list (a group that Zack Rogers now belongs to!) might have some good advice. 

- Rob

On Feb 18, 2012, at 12:32 PM, Randolph M. Fritz wrote:

> I've been asked to give a talk on on the basics of lighting simulation, Radiance, and perhaps simulating electric light.
> 
> The victims, er, audience for this are a group of architecture students in an electric lighting class, run by an architect and lighting designer.  I have three hours, though I don't have to use them all.  I intend to reserve at least some of the time for questions.
> 
> Any thoughts on how I might approach such a talk?
> 
> -- 
> Randolph M. Fritz
> 
> 
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general



From guy.vaessen at gmail.com  Sat Feb 18 13:07:06 2012
From: guy.vaessen at gmail.com (Guy Vaessen)
Date: Sat, 18 Feb 2012 22:07:06 +0100
Subject: [Radiance-general] Introduction to Lighting Simulation, Radiance,
 and Simulating Electric Light
Message-ID: <CAFXPCRZe0_mPwxu8eFpOh2do9Z91PLY35=g4DZMFFucShL2CZw@mail.gmail.com>

> I've been asked to give a talk on on the basics of lighting simulation,
> Radiance, and perhaps simulating electric light.
> ...
> Any thoughts on how I might approach such a talk?
You can find some presentations and  information here:

http://www.bozzograo.net/radiancewiki/doku.php?id=electric_lighting

Which contains hyperlinks to:

http://sts.bwk.tue.nl/7S630/lecture%20sheets/Lighting_Technology_introduction2010.pdf
http://sts.bwk.tue.nl/7S630/lecture%20sheets/Lighting_Technologywk2_2010.pdf
http://www.arch.mcgill.ca/prof/reinhart/arch447/fall2007/LectureNotes/3rd%20Session%20-%20Lamps.pdf

Best Guy
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120218/a9249697/attachment.html>

From iabel at iebele.nl  Sat Feb 18 13:18:07 2012
From: iabel at iebele.nl (Iebele Abel)
Date: Sat, 18 Feb 2012 23:18:07 +0200
Subject: [Radiance-general] Introduction to Lighting Simulation, Radiance,
 and Simulating Electric Light
In-Reply-To: <jhoud5$suj$1@dough.gmane.org>
References: <jhoud5$suj$1@dough.gmane.org>
Message-ID: <CAD_et2Wwx5vNae8W_5C5TEQ=6v8bux7HAM9Wp4Jv12AU0f5UQA@mail.gmail.com>

Hi Randolph,

To me 3 hours seems quite a long time to fill with just spoken information
and slides. If the group is not too large, maybe you can add some
'experience' in it. For example let the group do some measurements, walk
through the building or outside, and let them collect data from lights and
objects etc. Thereafter you show how one can use such data in lighting
simulation. Beside the theory and technology, let them experience the
practice. Just a thought,

Iebele



2012/2/18 Randolph M. Fritz <RFritz at lbl.gov>

> I've been asked to give a talk on on the basics of lighting simulation,
> Radiance, and perhaps simulating electric light.
>
> The victims, er, audience for this are a group of architecture students in
> an electric lighting class, run by an architect and lighting designer.  I
> have three hours, though I don't have to use them all.  I intend to reserve
> at least some of the time for questions.
>
> Any thoughts on how I might approach such a talk?
>
> --
> Randolph M. Fritz
>
>
>
> ______________________________**_________________
> Radiance-general mailing list
> Radiance-general at radiance-**online.org<Radiance-general at radiance-online.org>
> http://www.radiance-online.**org/mailman/listinfo/radiance-**general<http://www.radiance-online.org/mailman/listinfo/radiance-general>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120218/2c5e340e/attachment.html>

From iabel at iebele.nl  Sun Feb 19 06:25:07 2012
From: iabel at iebele.nl (Iebele Abel)
Date: Sun, 19 Feb 2012 16:25:07 +0200
Subject: [Radiance-general] artifact while rendering glass in tmesh
	solved?
In-Reply-To: <CAD_et2X--UygWP3ZRe1TqMMWZWt-qZwwyhyuzpLmLsmfLGP6Qg@mail.gmail.com>
References: <CAD_et2Xd9KkPdg1gzB4T0==JWzJtwUChrMiBnJiwa+ipOaE4FA@mail.gmail.com>
	<62B0FF52-30C8-4318-8786-9F2A49D89B25@lmi.net>
	<CAD_et2X--UygWP3ZRe1TqMMWZWt-qZwwyhyuzpLmLsmfLGP6Qg@mail.gmail.com>
Message-ID: <CAD_et2VLWDx1phCnRqbOi-q7qosFqUZ1Pg_Ur871h6Ly+fpadg@mail.gmail.com>

Hi Greg,

Changing the file rt/glass.c as you described below fixed the artifact.
Again, thanks a lot for your help.

But now suppose I would not have changed rt/glass.c Your remark that a
texture applied to an infinitely thin layer of glass should perturb
transmitted rays (and in effect an applied texture will smooth the
triangulation) did me think of using a BRTD material instead of glass.
Maybe it is a stupid thought, but would it be possible to model glass using
BRTD in such way that the transmitted component remains unaffected while
the reflected component is smoothed by a texture?

My best,

Iebele




>
>
> 2012/2/3 Greg Ward <gregoryjward at gmail.com>:
> > Hi Iebele,
> >
> > Just so this answer doesn't get lost like Francesco's, I'm taking us
> back online to discuss this.  Thanks for sharing your model and results.
> >
> > The problem occurs because of a hack I introduced into the glass
> material type, about which I had completely forgotten.  It was my answer to
> the question, "Should a texture applied to an infinitely thin layer of
> glass perturb transmitted rays?"  I decided it should, because in most
> cases, a texture is applied to introduce some effect to the surface.
> >
> > The problem here is that the texture is being applied to correct the
> effects of triangulation, thus smoothing rather than roughening the
> surface.  Without a texture, the transmitted component would be unaffected,
> but the reflected component would show your model's tessellation.  There
> are three possible solutions.
> >
> > The first possible solution is to give your car windows real thickness
> and use a dielectric material rather than glass.  You would need to be
> careful that your surface normals were directed outwards for the outer
> layer and inwards for the inner layer.
> >
> > The second possible solution is to turn off surface normal smooth just
> for the window layer.  This will as I said show up the tessellation of your
> reflections, but it would fix the transmission.
> >
> > The third possible solution is to re-hack the source file rt/glass.c.
>  At line 114, simplify:
> >
> >                        if (!(r->crtype & SHADOW) && hastexture) {
> >                                VSUM(p.rdir, r->rdir, r->pert,
> 2.*(1.-rindex));
> >                                if (normalize(p.rdir) == 0.0) {
> >                                        objerror(m, WARNING, "bad
> perturbation");
> >                                        VCOPY(p.rdir, r->rdir);
> >                                }
> >                        } else {
> >                                VCOPY(p.rdir, r->rdir);
> >                                transtest = 2;
> >                        }
> >
> > to read:
> >
> >                        VCOPY(p.rdir, r->rdir);
> >                        transtest = 2;
> >
> > This should fix the problem without having to change your model.  Of
> course, the problem will come back the next time you update Radiance,
> unless folks convince me that my hack was ill-conceived to begin with.  I'm
> open to the possibility.
> >
> > Cheers,
> > -Greg
> >
> >> From: Iebele Abel <iabel at iebele.nl>
> >> Date: February 2, 2012 11:38:28 AM PST
> >>
> >> Hi group,
> >>
> >> Can the artifact which occurs when rendering glass in a tmesh
> >> (obj2tmesh) be solved? This artifact has already been described in the
> >> following thread, but it does't seems to be followed up by an answer.
> >> Any help would be appreciated.
> >>
> >>
> http://www.radiance-online.org/pipermail/radiance-general/2005-June/002777.html
> >>
> >> Thanks,
> >>
> >> Iebele
> >
> > _______________________________________________
> > Radiance-general mailing list
> > Radiance-general at radiance-online.org
> > http://www.radiance-online.org/mailman/listinfo/radiance-general
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120219/2b77dc37/attachment.html>

From gregoryjward at gmail.com  Sun Feb 19 09:01:33 2012
From: gregoryjward at gmail.com (Greg Ward)
Date: Sun, 19 Feb 2012 09:01:33 -0800
Subject: [Radiance-general] artifact while rendering glass in tmesh
	solved?
In-Reply-To: <CAD_et2VLWDx1phCnRqbOi-q7qosFqUZ1Pg_Ur871h6Ly+fpadg@mail.gmail.com>
References: <CAD_et2Xd9KkPdg1gzB4T0==JWzJtwUChrMiBnJiwa+ipOaE4FA@mail.gmail.com>
	<62B0FF52-30C8-4318-8786-9F2A49D89B25@lmi.net>
	<CAD_et2X--UygWP3ZRe1TqMMWZWt-qZwwyhyuzpLmLsmfLGP6Qg@mail.gmail.com>
	<CAD_et2VLWDx1phCnRqbOi-q7qosFqUZ1Pg_Ur871h6Ly+fpadg@mail.gmail.com>
Message-ID: <7E6F53C5-3E83-435E-828F-8EDFB050143B@lmi.net>

I just checked -- the BTRDfunc type has the same perturbation of transmitted rays.  The newer BSDF type does not, but it's very difficult to get a clear image through a data-driven model.

-Greg

> From: Iebele Abel <iabel at iebele.nl>
> Date: February 19, 2012 6:25:07 AM PST
> 
> Hi Greg, 
> 
> Changing the file rt/glass.c as you described below fixed the artifact. Again, thanks a lot for your help. 
> 
> But now suppose I would not have changed rt/glass.c Your remark that a texture applied to an infinitely thin layer of glass should perturb transmitted rays (and in effect an applied texture will smooth the triangulation) did me think of using a BRTD material instead of glass. Maybe it is a stupid thought, but would it be possible to model glass using BRTD in such way that the transmitted component remains unaffected while the reflected component is smoothed by a texture? 
> 
> My best, 
> 
> Iebele 


From iabel at iebele.nl  Sun Feb 19 13:09:52 2012
From: iabel at iebele.nl (Iebele Abel)
Date: Sun, 19 Feb 2012 23:09:52 +0200
Subject: [Radiance-general] artifact while rendering glass in tmesh
	solved?
In-Reply-To: <7E6F53C5-3E83-435E-828F-8EDFB050143B@lmi.net>
References: <CAD_et2Xd9KkPdg1gzB4T0==JWzJtwUChrMiBnJiwa+ipOaE4FA@mail.gmail.com>
	<62B0FF52-30C8-4318-8786-9F2A49D89B25@lmi.net>
	<CAD_et2X--UygWP3ZRe1TqMMWZWt-qZwwyhyuzpLmLsmfLGP6Qg@mail.gmail.com>
	<CAD_et2VLWDx1phCnRqbOi-q7qosFqUZ1Pg_Ur871h6Ly+fpadg@mail.gmail.com>
	<7E6F53C5-3E83-435E-828F-8EDFB050143B@lmi.net>
Message-ID: <CAD_et2USjrPh+UB=KorogmuhV+mD0LBcrH+L-+3LtkbfF+tjnw@mail.gmail.com>

Ok, thanks for checking the idea, I get along with the modified glass
source.

Cheers,
Iebele



2012/2/19 Greg Ward <gregoryjward at gmail.com>

> I just checked -- the BTRDfunc type has the same perturbation of
> transmitted rays.  The newer BSDF type does not, but it's very difficult to
> get a clear image through a data-driven model.
>
> -Greg
>
> > From: Iebele Abel <iabel at iebele.nl>
> > Date: February 19, 2012 6:25:07 AM PST
> >
> > Hi Greg,
> >
> > Changing the file rt/glass.c as you described below fixed the artifact.
> Again, thanks a lot for your help.
> >
> > But now suppose I would not have changed rt/glass.c Your remark that a
> texture applied to an infinitely thin layer of glass should perturb
> transmitted rays (and in effect an applied texture will smooth the
> triangulation) did me think of using a BRTD material instead of glass.
> Maybe it is a stupid thought, but would it be possible to model glass using
> BRTD in such way that the transmitted component remains unaffected while
> the reflected component is smoothed by a texture?
> >
> > My best,
> >
> > Iebele
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120219/70762e5f/attachment.html>

From maricanis at gmail.com  Tue Feb 21 05:17:07 2012
From: maricanis at gmail.com (Marija Velickovic)
Date: Tue, 21 Feb 2012 14:17:07 +0100
Subject: [Radiance-general] mkillum usage
Message-ID: <CAAZQWqii1TMnNoBctU7NdswXo=An-sZApE2H0M6iCKyHitJwBQ@mail.gmail.com>

Hi,

I've been thinking about mkllum usage and parameters for mkillum
calculation. I've explored mailing list and my private archives and also
RWR book, and come to some conclusions, but also some questions.


All notes below are for few types of daylight simulations, where windows
with/without fenestration are (not)treated with mkillum.

########

*Luminance images calculation*
Based on RWR page 351
?For image generation, the conversion of a window to a light source using
the mkillum utility can significantly speed up the production of smooth
renderings. The technique works well as long as the total number of
secondary light sources is kept reasonably small.?

?For those rare occasions when images need to be rendered using high value
for -ab, it may be best to avoid using secondary sources and rely on
ambient calculation.?

Classical usage of these ideas is usage of mkillum either manually or
through rad program, for window surfaces.
Mkillum parameters:

   - -ab 2 is usually sufficient if building exterior is not too complex.
   If illum surfaces should seal some complex shading system (Venetian blinds)
   this parameter should be >2.
   - other parameters - default values can be used because they are
   sufficiently high
   - -aa 0 can be used when mkillum is used for Venetian blinds output
   calculation
   - -av r g b is set to:
      - if glazing is between building exterior and interior -  av should
      be set to *?ground ambient value*? obtained from gensky command.
      - if glazing is between exterior and interior for upper floors in the
      building - use the same value as for bottom floors
      - if glazing is between two interior areas - either use 0 0 0 (which
      will always underestimate values) or use the compamb script with interior
      views to come up with a good setting

*Question:* If outside environment is heavily obstructed, as it is usually
the case in urban areas, how should we determine -av value for mkillum
calculation? I think that simple usage of 'ground ambient value' for -av
would overestimate luminance inside of the building.
Rad parameters:
Beside setting of ambient parameters it is good idea to experiment a little
and find nice set of -d* parameters.
Example of parameters: -ab 3 -av 0 0 0 -ad 1024 -as 256 -aa 0.1 -ar 600 -ps
1 -ds 0.05 -dj 1 -dt 0.03 -dc 0.9 -af tmp/floor1_illum.amb

###
*Illuminance images calculation*
Based on RWR page 351:
?For illuminance calculations, where -ab >2 is usually essential, the
preprocessing of windows to secondary light sources is generally not
recommended.?

Illuminance calculations are needed for DF or Autonomy calculations.

*DF calculations*
Generally this approach is used in dayfact script, where illuminance on a
workplane is calculated with rtrace -I option, and rather high parameters
are recommended eg: -ab 5 -av 0 0 0 -ad 2048 -as 512 -aa 0.1 -ar 600 -af
tmp/amb_file.amb

*Question:* Why it is not recommended to use mkillum for illuminance
calculations?
I've tried to include mkillum for DF calculation on workplane, and set
parameters with similar manner like for luminance images - and internal
illuminances were much higher then without mkillum (with same rtrace
parameters for the image).

So I need some answer if for illuminace calc approach with mkillum gives
wrong results, or parameters should be set differently.

*Autonomy calculations*
These are also illuminace calculations, but since numerous time moments are
included, mkillum doesn't have any sense to be used.
For this we can use 3-phase method, or Daysim approach - and calculate with
high ambient parameters.

###

So if we say it all in short: what is bothering me the most is -av setting
for mkillum, because "ground ambient values" seem to high for real project
cases where there is complex environement outside of the building.

Any info about list members' experience with mkillum and daylighting is
welcome.

Thanks in advance,
Marija
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120221/3d3084ba/attachment.html>

From RFritz at lbl.gov  Tue Feb 21 23:50:13 2012
From: RFritz at lbl.gov (Randolph M. Fritz)
Date: Tue, 21 Feb 2012 23:50:13 -0800
Subject: [Radiance-general] Introduction to Lighting Simulation, Radiance,
	and Simulating Electric Light
References: <jhoud5$suj$1@dough.gmane.org>
	<CAD_et2Wwx5vNae8W_5C5TEQ=6v8bux7HAM9Wp4Jv12AU0f5UQA@mail.gmail.com>
Message-ID: <ji26nl$b1i$1@dough.gmane.org>

Thanks to Rob G., Iebele,  and 	Guy Vaessen for advice and links.

Now to assemble my presentation.

Randolph




From jones.0bj3 at gmail.com  Wed Feb 22 02:04:10 2012
From: jones.0bj3 at gmail.com (Marcus)
Date: Wed, 22 Feb 2012 11:04:10 +0100
Subject: [Radiance-general] Perforated window shading
Message-ID: <CAEzj1z6QpvgQ_ePO-8tZXUcimXwZp+xDWnMUVsMarn49jaunng@mail.gmail.com>

Hi all,

I'm doing a daylighting analysis of different facade configurations, and
the architect is looking at perforated blinds shading, similar to i.e. this
google image I found;

http://i01.i.aliimg.com/photo/v0/299829755/perforated_aluminum_blind.jpg

Is there any guidance or method to model this concept? Any references you
could point me too?

Thanks,

Marcus
-- 
Marcus Jones,  M.Sc., LEED?AP BD+C
*Freelance energy consultant*
*Vienna, Austria*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120222/0ece3f26/attachment.html>

From grobe at gmx.net  Wed Feb 22 02:55:49 2012
From: grobe at gmx.net (Lars O. Grobe)
Date: Wed, 22 Feb 2012 11:55:49 +0100
Subject: [Radiance-general] Perforated window shading
In-Reply-To: <CAEzj1z6QpvgQ_ePO-8tZXUcimXwZp+xDWnMUVsMarn49jaunng@mail.gmail.com>
References: <CAEzj1z6QpvgQ_ePO-8tZXUcimXwZp+xDWnMUVsMarn49jaunng@mail.gmail.com>
Message-ID: <4F44C9B5.7020204@gmx.net>

Hi Marcus!

> I'm doing a daylighting analysis of different facade configurations, and
> the architect is looking at perforated blinds shading, similar to i.e.
> this google image I found;
> 
> http://i01.i.aliimg.com/photo/v0/299829755/perforated_aluminum_blind.jpg
> 
> Is there any guidance or method to model this concept? Any references
> you could point me too?

1) If you can ignore the fact that the perforation leads to a
transmission not uniformly spread over the blind's surface, but
concentrated on the holes, you could use a trans modifier.

2) If you want to consider the pattern created by the perforation (if
you would look at it from very close distance), you can use mixfunc to
vary between the reflective surface (metal) and the transmissive holes
(void). You would need a procedural description of the perforation.

Cheers, Lars.


From jones.0bj3 at gmail.com  Wed Feb 22 03:56:24 2012
From: jones.0bj3 at gmail.com (Marcus)
Date: Wed, 22 Feb 2012 12:56:24 +0100
Subject: [Radiance-general] Perforated window shading
In-Reply-To: <4F44C9B5.7020204@gmx.net>
References: <CAEzj1z6QpvgQ_ePO-8tZXUcimXwZp+xDWnMUVsMarn49jaunng@mail.gmail.com>
	<4F44C9B5.7020204@gmx.net>
Message-ID: <CAEzj1z4UA+VMQi9aPTn3YPbqdZWwgjrzdK+eK=YLf=jn8_qznA@mail.gmail.com>

Thanks for your response Lars,

Yes, in this case I can comfortably assume that the transmission is uniform
over the surface and will use the trans modifier. My question is, what
transmissivity should I use? If I assume that the void space is 15% of the
area, how shall I define the trans modifier? Is it actually reasonable then
to simply assume transmissivity=85%? We have done this, and the lux values
are lower than expected. What about the transmittedSpecular value?

Are there i.e. any empirical correlations for equivalent transmissivity as
a function of hole size and/or void area ratio?

Thanks again for the feedback!

Marcus
-- 
Marcus Jones,  M.Sc., LEED?AP BD+C
*Freelance energy consultant*
*Vienna, Austria*


On Wed, Feb 22, 2012 at 11:55 AM, Lars O. Grobe <grobe at gmx.net> wrote:

> Hi Marcus!
>
> > I'm doing a daylighting analysis of different facade configurations, and
> > the architect is looking at perforated blinds shading, similar to i.e.
> > this google image I found;
> >
> > http://i01.i.aliimg.com/photo/v0/299829755/perforated_aluminum_blind.jpg
> >
> > Is there any guidance or method to model this concept? Any references
> > you could point me too?
>
> 1) If you can ignore the fact that the perforation leads to a
> transmission not uniformly spread over the blind's surface, but
> concentrated on the holes, you could use a trans modifier.
>
> 2) If you want to consider the pattern created by the perforation (if
> you would look at it from very close distance), you can use mixfunc to
> vary between the reflective surface (metal) and the transmissive holes
> (void). You would need a procedural description of the perforation.
>
> Cheers, Lars.
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120222/8089db19/attachment.html>

From tbleicher at googlemail.com  Wed Feb 22 05:19:05 2012
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Wed, 22 Feb 2012 08:19:05 -0500
Subject: [Radiance-general] Perforated window shading
In-Reply-To: <CAEzj1z4UA+VMQi9aPTn3YPbqdZWwgjrzdK+eK=YLf=jn8_qznA@mail.gmail.com>
References: <CAEzj1z6QpvgQ_ePO-8tZXUcimXwZp+xDWnMUVsMarn49jaunng@mail.gmail.com>
	<4F44C9B5.7020204@gmx.net>
	<CAEzj1z4UA+VMQi9aPTn3YPbqdZWwgjrzdK+eK=YLf=jn8_qznA@mail.gmail.com>
Message-ID: <CAKGV-k2-BU5a9KE7aaq_rCVS7QhBoTma4vAAHPy3HLocVRmLDg@mail.gmail.com>

Marcus

Your LUX values will be very low. With a trans material you are basically
reducing the incoming light to about 1/8th of the available light. Your
simple trans material will also not account for indirect light reflected
off the blinds. This can be a substantial part of the transmitted light.

On Wed, Feb 22, 2012 at 6:56 AM, Marcus <jones.0bj3 at gmail.com> wrote:

> What about the transmittedSpecular value?


The transmittedSpecular part can be left at 1 (100%) because the light
passing through the holes will not be modulated. As a result you should see
the projection of the window opening on the floor if direct sunlight hits
it, just as you would see the shape of the window drawn in tiny dots in
real life. With trans you will not be able to model the angular dependent
cut off that you get with small perforated panels.


> Are there i.e. any empirical correlations for equivalent transmissivity as
> a function of hole size and/or void area ratio?


Unfortunately there is no golden rule because every system is different.
You have to look at the system and model it's shading effects as best as
possible. Sometimes this needs more than one calculation:

You could, for example, use your trans material to model only the light
that passes through the holes. Then you model another scene with metal
blinds in their actual size (or perhaps a bit larger) to capture the
indirect reflected light. Add both results together and you have a
reasonable approximation of the real system.

Regards,
Thomas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120222/fd48ba06/attachment.html>

From grobe at gmx.net  Wed Feb 22 05:25:32 2012
From: grobe at gmx.net (Lars O. Grobe)
Date: Wed, 22 Feb 2012 14:25:32 +0100
Subject: [Radiance-general] Perforated window shading
In-Reply-To: <CAKGV-k2-BU5a9KE7aaq_rCVS7QhBoTma4vAAHPy3HLocVRmLDg@mail.gmail.com>
References: <CAEzj1z6QpvgQ_ePO-8tZXUcimXwZp+xDWnMUVsMarn49jaunng@mail.gmail.com>
	<4F44C9B5.7020204@gmx.net>
	<CAEzj1z4UA+VMQi9aPTn3YPbqdZWwgjrzdK+eK=YLf=jn8_qznA@mail.gmail.com>
	<CAKGV-k2-BU5a9KE7aaq_rCVS7QhBoTma4vAAHPy3HLocVRmLDg@mail.gmail.com>
Message-ID: <4F44ECCC.6090407@gmx.net>

Hi Thomas, Marcus!

> Your LUX values will be very low. With a trans material you are
> basically reducing the incoming light to about 1/8th of the available
> light. Your simple trans material will also not account for indirect
> light reflected off the blinds. This can be a substantial part of the
> transmitted light. 

I was assuming that the blinds are still modelled geometrically (e.g.
using genblinds or an imported mesh). The trans modifier was just
proposed to be applied to the blinds geometry. As the (metal?) blinds
are transmissive only due to the holes, transmission would be purely
specular, reflection probably both diffuse and specular.

Cheers, Lars.


From gregoryjward at gmail.com  Wed Feb 22 09:37:10 2012
From: gregoryjward at gmail.com (Greg Ward)
Date: Wed, 22 Feb 2012 09:37:10 -0800
Subject: [Radiance-general] Perforated window shading
In-Reply-To: <CAEzj1z4UA+VMQi9aPTn3YPbqdZWwgjrzdK+eK=YLf=jn8_qznA@mail.gmail.com>
References: <CAEzj1z6QpvgQ_ePO-8tZXUcimXwZp+xDWnMUVsMarn49jaunng@mail.gmail.com>
	<4F44C9B5.7020204@gmx.net>
	<CAEzj1z4UA+VMQi9aPTn3YPbqdZWwgjrzdK+eK=YLf=jn8_qznA@mail.gmail.com>
Message-ID: <915721BD-C73C-40DE-97FF-7BECC258076F@lmi.net>

Hi Marcus,

It's really hard to tell from a single photograph, but it looks like your reflectance is probably around 50% gray with some fraction of that specular.  Here is my guess at a trans material for the slats:

void trans slat_mat
0
0
7 .65 .65 .65 .2 .15 .29 1

The 0.15 value is my guess at the roughness.  This material will have 15% specular transmission (.65*(1-.2)*.29*1), 20% specular reflectance, and 37% diffuse reflectance (.65*(1-.2)*(1-.29)).  Unfortunately, the math of the trans type is difficult to follow, which is why most folks use a spreadsheet or refer to the Lighting chapter in RwR.

If you arrange your slats into the correct blinds geometry, you can generate a BSDF for the system using genBSDF.  I should warn you though, there is a bug in the 4.1 release of genBSDF.  I'm waiting for Rob G. to finish his Windows package before I post a patch.

Best,
-Greg

> From: Marcus <jones.0bj3 at gmail.com>
> Date: February 22, 2012 3:56:24 AM PST
> 
> Thanks for your response Lars,
> 
> Yes, in this case I can comfortably assume that the transmission is uniform over the surface and will use the trans modifier. My question is, what transmissivity should I use? If I assume that the void space is 15% of the area, how shall I define the trans modifier? Is it actually reasonable then to simply assume transmissivity=85%? We have done this, and the lux values are lower than expected. What about the transmittedSpecular value? 
> 
> Are there i.e. any empirical correlations for equivalent transmissivity as a function of hole size and/or void area ratio? 
> 
> Thanks again for the feedback! 
> 
> Marcus
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120222/011e2cca/attachment.html>

From Robert.Guglielmetti at nrel.gov  Wed Feb 22 10:01:31 2012
From: Robert.Guglielmetti at nrel.gov (Guglielmetti, Robert)
Date: Wed, 22 Feb 2012 11:01:31 -0700
Subject: [Radiance-general] Perforated window shading
In-Reply-To: <915721BD-C73C-40DE-97FF-7BECC258076F@lmi.net>
Message-ID: <CB6A7AEF.E0E3%robert.guglielmetti@nrel.gov>

On 2/22/12 10:37 AM, "Greg Ward" <gregoryjward at gmail.com<mailto:gregoryjward at gmail.com>> wrote:

If you arrange your slats into the correct blinds geometry, you can generate a BSDF for the system using genBSDF.  I should warn you though, there is a bug in the 4.1 release of genBSDF.  I'm waiting for Rob G. to finish his Windows package before I post a patch.

Unfortunately that has been held up in contracts, as we are hiring Kitware to help us wrap up the last bits. I had hoped we'd have that in place by now, but I'm covered in red tape. =8-/

I will poke them again. Once the thing is in place, I expect it would be a matter of days to finish the project.

- Rob


From gregoryjward at gmail.com  Wed Feb 22 10:16:02 2012
From: gregoryjward at gmail.com (Greg Ward)
Date: Wed, 22 Feb 2012 10:16:02 -0800
Subject: [Radiance-general] mkillum usage
In-Reply-To: <CAAZQWqii1TMnNoBctU7NdswXo=An-sZApE2H0M6iCKyHitJwBQ@mail.gmail.com>
References: <CAAZQWqii1TMnNoBctU7NdswXo=An-sZApE2H0M6iCKyHitJwBQ@mail.gmail.com>
Message-ID: <02FEEBA2-80E7-4072-B6D3-1D1BBFFC0770@lmi.net>

Hi Marija,

> From: Marija Velickovic <maricanis at gmail.com>
> Date: February 21, 2012 5:17:07 AM PST
> 
> Hi,
> 
> I've been thinking about mkllum usage and parameters for mkillum calculation. I've explored mailing list and my private archives and also RWR book, and come to some conclusions, but also some questions.
> 
> 
> All notes below are for few types of daylight simulations, where windows with/without fenestration are (not)treated with mkillum.
> 
> ########
> 
> Luminance images calculation
> Based on RWR page 351
> ?For image generation, the conversion of a window to a light source using the mkillum utility can significantly speed up the production of smooth renderings. The technique works well as long as the total number of secondary light sources is kept reasonably small.?
> 
> ?For those rare occasions when images need to be rendered using high value for -ab, it may be best to avoid using secondary sources and rely on ambient calculation.?
> 
> Classical usage of these ideas is usage of mkillum either manually or through rad program, for window surfaces.
> Mkillum parameters:
> -ab 2 is usually sufficient if building exterior is not too complex. If illum surfaces should seal some complex shading system (Venetian blinds) this parameter should be >2. 
> other parameters - default values can be used because they are sufficiently high
> -aa 0 can be used when mkillum is used for Venetian blinds output calculation
> -av r g b is set to:
> if glazing is between building exterior and interior -  av should be set to ?ground ambient value? obtained from gensky command. 
> if glazing is between exterior and interior for upper floors in the building - use the same value as for bottom floors
> if glazing is between two interior areas - either use 0 0 0 (which will always underestimate values) or use the compamb script with interior views to come up with a good setting

Thanks -- this is a really nice summary of what we know.  It would be great to include in a FAQ if we ever get our act together...

> Question: If outside environment is heavily obstructed, as it is usually the case in urban areas, how should we determine -av value for mkillum calculation? I think that simple usage of 'ground ambient value' for -av would overestimate luminance inside of the building.
> 
You are probably right that it should be set lower.  You can always set it to zero (the default) and accept that you will underestimate values slightly.  Otherwise, you can render a fisheye image just outside the window setting "-ab 0 -dv-" and compute the average pixel value with:

	pvalue -h -H -o -df  fisheye.hdr | total -if3 -m

That's pretty close to what compamb does.

> Rad parameters:
> Beside setting of ambient parameters it is good idea to experiment a little and find nice set of -d* parameters.
> Example of parameters: -ab 3 -av 0 0 0 -ad 1024 -as 256 -aa 0.1 -ar 600 -ps 1 -ds 0.05 -dj 1 -dt 0.03 -dc 0.9 -af tmp/floor1_illum.amb

In daylighting situations, the calculation shouldn't be very sensitive to the -d* settings.  You can set -dt 0 if you're worried about it, though.

> ###
> Illuminance images calculation
> Based on RWR page 351:
> ?For illuminance calculations, where -ab >2 is usually essential, the preprocessing of windows to secondary light sources is generally not recommended.?
> 
> Illuminance calculations are needed for DF or Autonomy calculations.
> 
> DF calculations
> Generally this approach is used in dayfact script, where illuminance on a workplane is calculated with rtrace -I option, and rather high parameters are recommended eg: -ab 5 -av 0 0 0 -ad 2048 -as 512 -aa 0.1 -ar 600 -af tmp/amb_file.amb
> 
> Question: Why it is not recommended to use mkillum for illuminance calculations?
> I've tried to include mkillum for DF calculation on workplane, and set parameters with similar manner like for luminance images - and internal illuminances were much higher then without mkillum (with same rtrace parameters for the image).
> 
> So I need some answer if for illuminace calc approach with mkillum gives wrong results, or parameters should be set differently.

It's just that mkillum doesn't pay off if you are only calculating a small number of points.  The only reason to use it is to reduce the error when you cannot afford a difficult indirect calculation over a million or so pixels.  If you are only computing a few hundred illuminance values to begin with, you are better off simply cranking up the indirect calculation parameters and letting rtrace deal with the window complexity.

> Autonomy calculations
> These are also illuminace calculations, but since numerous time moments are included, mkillum doesn't have any sense to be used. 
> For this we can use 3-phase method, or Daysim approach - and calculate with high ambient parameters.
> 
> ###
> 
> So if we say it all in short: what is bothering me the most is -av setting for mkillum, because "ground ambient values" seem to high for real project cases where there is complex environement outside of the building.
> 
> Any info about list members' experience with mkillum and daylighting is welcome.
> 
> Thanks in advance,
> Marija

Thanks for your input, always appreciated.

-Greg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120222/d9c0ba7c/attachment.html>

From koji_takemasa at me.com  Wed Feb 22 19:25:31 2012
From: koji_takemasa at me.com (=?ISO-2022-JP?B?IhskQklwQC85JzwjGyhCIg==?=)
Date: Thu, 23 Feb 2012 03:25:31 +0000 (GMT)
Subject: [Radiance-general] Radiance with Vista
Message-ID: <85080407-2397-e763-9a50-d537434f3a5a@me.com>

Hi.

I was successful to build from source code of Raiance4.0  on Windows (32bit)  Vista using MinGW, Cmake, the QT4.

Here are the steps for me.

1) MinGw
I had to download and install mingw-get-inst-20111118.exe from sourceforge is linked from the http://www.mingw.org/, and select all the items.

I was an environment variable is set as follows.
PATH ====> C: \ MinGW \ bin; C: \ MinGW \ msys \ 1.0 \ bin
C_INCLUDE_PATH ====> C: \ MinGW \ include
CPLUS_INCLUDE_PATH ====> C: \ MinGW \ include
LIBRARY_PATH ====> C: \ MinGW \ lib

 2) Obtaining Radiance4.0
Source code is not available. So I used http://radsite.lbl.gov/radiance/.

I downloaded the http://ftp.de.debian.org/debian/pool/main/r/radiance/radiance_4R0+20100729.orig.tar.gz in (squeeze) Package Debian there.

I unzip the radiance_4R0+20100729.orig.tar.gz, and the name was changed to ray.

I downloaded the radiance-HEAD.tgz from http://www.radiance-online.org/.

I Unzip radiance-HEAD.tgz.

3) Cmake
I downloaded the cmake-2.8.7-win32-x86.exe from http://www.cmake.org/, and installed.

4) Qt4
I have qt-win-opensource-4.8.0-mingw.exe from http://qt.nokia.com/.I ran the configure of \ Qt \ 4.8.0: C and below.

I added the environment variable.
PATH ====> C: \ Qt \ 4.8.0 \ bin

Before I start the Cmake-GUI, I have decided the source code directory, the working directory and the install directory.
And I modified the rtcontrib.c.

(Before)
# Ifdef _WIN32
typedef long ssize_t;
# Endif

(After)
# Ifdef _WIN32
typedef int ssize_t;
# Endif

Go to the working directory. I performed make and make install. ?

-----
   Name : Koji Takemasa
 E-mail : koji_takemasa at mac.com
    URL : http://web.me.com/koji_takemasa/MobileMe/LEAD_Project.html
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120223/81cdf213/attachment.html>

From maricanis at gmail.com  Fri Feb 24 07:45:46 2012
From: maricanis at gmail.com (Marija Velickovic)
Date: Fri, 24 Feb 2012 16:45:46 +0100
Subject: [Radiance-general] mkillum usage
In-Reply-To: <02FEEBA2-80E7-4072-B6D3-1D1BBFFC0770@lmi.net>
References: <CAAZQWqii1TMnNoBctU7NdswXo=An-sZApE2H0M6iCKyHitJwBQ@mail.gmail.com>
	<02FEEBA2-80E7-4072-B6D3-1D1BBFFC0770@lmi.net>
Message-ID: <CAAZQWqgaONuJ27rQL3i2h1z-VoVy_5RCdtS1+sXpB+pVj+aTsw@mail.gmail.com>

Hi Greg,

After years of work with Radiance, I can always learn something new :)

Related to FAQ, is Radiance Wiki still active, or  is there some other
knowledge database related to Radiance (beside list members :)


>
> *Question:* If outside environment is heavily obstructed, as it is
> usually the case in urban areas, how should we determine -av value for
> mkillum calculation? I think that simple usage of 'ground ambient value'
> for -av would overestimate luminance inside of the building.
>
> You are probably right that it should be set lower.  You can always set it
> to zero (the default) and accept that you will underestimate values
> slightly.  Otherwise, you can render a fisheye image just outside the
> window setting "-ab 0 -dv-" and compute the average pixel value with:
>
> pvalue -h -H -o -df  fisheye.hdr | total -if3 -m
>
> That's pretty close to what compamb does.
>
>  Interesting method, I'll surely try it.
So ambient value i get from this calculation I use -av parameters for
mkillum?

 Rad parameters:
> Beside setting of ambient parameters it is good idea to experiment a
> little and find nice set of -d* parameters.
> Example of parameters: -ab 3 -av 0 0 0 -ad 1024 -as 256 -aa 0.1 -ar 600
> -ps 1 -ds 0.05 -dj 1 -dt 0.03 -dc 0.9 -af tmp/floor1_illum.amb
>
>
> In daylighting situations, the calculation shouldn't be very sensitive to
> the -d* settings.  You can set -dt 0 if you're worried about it, though.
>

For nice luminance images of daylight spaces, I usually experiment with
these -d* parameters.
Combination of -d* parameters in example above (although too high and
computationally expensive) gives really nice images in most cases.

*Question:* Why it is not recommended to use mkillum for illuminance
> calculations?
>
> It's just that mkillum doesn't pay off if you are only calculating a small
> number of points.  The only reason to use it is to reduce the error when
> you cannot afford a difficult indirect calculation over a million or so
> pixels.  If you are only computing a few hundred illuminance values to
> begin with, you are better off simply cranking up the indirect calculation
> parameters and letting rtrace deal with the window complexity.
>

We usually calculate illuminance images over complete workplane and set
rather high ambient parameters ab>=5, and calculations of an image take
several hours.
Maybe mkillum in such process can make calculation time shorter, but again
we should determine correct ambient value previous to mkillum running. Also
if project has big number of windows, calculation of mkillum would take
additional time - so no real time saving in this approach.

As a conclusion: For illuminance calculations better use high ambient
parameters and avoid mkillum.

Thanks again,
Marija.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120224/07fbe11a/attachment.html>

From thibault.charles at solamen.fr  Fri Feb 24 08:39:30 2012
From: thibault.charles at solamen.fr (Thibault Charles)
Date: Fri, 24 Feb 2012 17:39:30 +0100
Subject: [Radiance-general] Color surfaces information and link with
	Sketchup defined colors
In-Reply-To: <CAAZQWqgaONuJ27rQL3i2h1z-VoVy_5RCdtS1+sXpB+pVj+aTsw@mail.gmail.com>
References: <CAAZQWqii1TMnNoBctU7NdswXo=An-sZApE2H0M6iCKyHitJwBQ@mail.gmail.com>	<02FEEBA2-80E7-4072-B6D3-1D1BBFFC0770@lmi.net>
	<CAAZQWqgaONuJ27rQL3i2h1z-VoVy_5RCdtS1+sXpB+pVj+aTsw@mail.gmail.com>
Message-ID: <000001ccf312$e1991a50$a4cb4ef0$@charles@solamen.fr>

Hi everyone,

 

I usually work with Radiance and Daysim by contructing 3D scene with
Sketchup and importing it with Su2rad.

 

Something stay obscure for me : I cannot find the file in which is contained
the information about the colors of surfaces. When I create a scene in
Sketchup, the same colors appear in the rendering but I cannot understand
how...

 

Thanks in advance,

 

Thibault Charles

Solamen

thibault.charles at solamen.fr

+33 6 78 54 27 91

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120224/bd7dbf27/attachment.html>

From amcneil at lbl.gov  Fri Feb 24 09:19:19 2012
From: amcneil at lbl.gov (Andy McNeil)
Date: Fri, 24 Feb 2012 09:19:19 -0800
Subject: [Radiance-general] Color surfaces information and link with
	Sketchup defined colors
In-Reply-To: <4f47bdf3.a611440a.1fda.2435SMTPIN_ADDED@mx.google.com>
References: <CAAZQWqii1TMnNoBctU7NdswXo=An-sZApE2H0M6iCKyHitJwBQ@mail.gmail.com>	<02FEEBA2-80E7-4072-B6D3-1D1BBFFC0770@lmi.net>
	<CAAZQWqgaONuJ27rQL3i2h1z-VoVy_5RCdtS1+sXpB+pVj+aTsw@mail.gmail.com>
	<4f47bdf3.a611440a.1fda.2435SMTPIN_ADDED@mx.google.com>
Message-ID: <4AAB5F38-2CFA-4DC6-9747-D40C939C6B24@lbl.gov>

Hi Thibault,

su2rad creates a file called materials.rad.  You can open it in a text editor and it has the material descriptions used in the Radiance model.

Descriptions of the material primitive types can be found in section 2.1.2 of this pdf: http://radsite.lbl.gov/radiance/refer/refman.pdf
And documentation of the materials algorithms are contained in this pdf: http://radsite.lbl.gov/radiance/refer/materials.pdf

Best,
Andy



On Feb 24, 2012, at 8:39 AM, Thibault Charles wrote:

> Hi everyone,
>  
> I usually work with Radiance and Daysim by contructing 3D scene with Sketchup and importing it with Su2rad.
>  
> Something stay obscure for me : I cannot find the file in which is contained the information about the colors of surfaces. When I create a scene in Sketchup, the same colors appear in the rendering but I cannot understand how...
>  
> Thanks in advance,
>  
> Thibault Charles
> Solamen
> thibault.charles at solamen.fr
> +33 6 78 54 27 91
>  
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120224/f2dbc066/attachment-0001.html>

From thibault.charles at solamen.fr  Fri Feb 24 09:28:25 2012
From: thibault.charles at solamen.fr (Thibault Charles)
Date: Fri, 24 Feb 2012 18:28:25 +0100
Subject: [Radiance-general] Color surfaces information and link with
	Sketchup defined colors
In-Reply-To: <4AAB5F38-2CFA-4DC6-9747-D40C939C6B24@lbl.gov>
References: <CAAZQWqii1TMnNoBctU7NdswXo=An-sZApE2H0M6iCKyHitJwBQ@mail.gmail.com>	<02FEEBA2-80E7-4072-B6D3-1D1BBFFC0770@lmi.net>
	<CAAZQWqgaONuJ27rQL3i2h1z-VoVy_5RCdtS1+sXpB+pVj+aTsw@mail.gmail.com>
	<4f47bdf3.a611440a.1fda.2435SMTPIN_ADDED@mx.google.com>
	<4AAB5F38-2CFA-4DC6-9747-D40C939C6B24@lbl.gov>
Message-ID: <8E7F7C65-4387-45F6-B331-18569B2FE41A@solamen.fr>

Hi Andy,

Thanks for your response. I known the material file. It seemed to me that informations about colors where coded by patterns in this file and I have no pattern in my files...
I created a really simple example in which the surface is red in Sketchup and my material file is only :
void plastic outSideFacade
0
0
5 0.7 0.7 0.7

The result is that in the rendering, the surface appear to be red and if I change the values in the material file, it is still red.

Would you have an idea ?

Best,

Thibault Charles
Solamen
thibault.charles at solamen.fr
+33 6 78 54 27 91







Le 24 f?vr. 2012 ? 18:19, Andy McNeil a ?crit :

> Hi Thibault,
> 
> su2rad creates a file called materials.rad.  You can open it in a text editor and it has the material descriptions used in the Radiance model.
> 
> Descriptions of the material primitive types can be found in section 2.1.2 of this pdf: http://radsite.lbl.gov/radiance/refer/refman.pdf
> And documentation of the materials algorithms are contained in this pdf: http://radsite.lbl.gov/radiance/refer/materials.pdf
> 
> Best,
> Andy
> 
> 
> 
> On Feb 24, 2012, at 8:39 AM, Thibault Charles wrote:
> 
>> Hi everyone,
>>  
>> I usually work with Radiance and Daysim by contructing 3D scene with Sketchup and importing it with Su2rad.
>>  
>> Something stay obscure for me : I cannot find the file in which is contained the information about the colors of surfaces. When I create a scene in Sketchup, the same colors appear in the rendering but I cannot understand how...
>>  
>> Thanks in advance,
>>  
>> Thibault Charles
>> Solamen
>> thibault.charles at solamen.fr
>> +33 6 78 54 27 91
>>  
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120224/7a491c96/attachment.html>

From a.bissell at cundall.com  Fri Feb 24 09:51:17 2012
From: a.bissell at cundall.com (Bissell, Andrew)
Date: Fri, 24 Feb 2012 17:51:17 +0000
Subject: [Radiance-general] Color surfaces information and link
 withSketchup defined colors
References: <CAAZQWqii1TMnNoBctU7NdswXo=An-sZApE2H0M6iCKyHitJwBQ@mail.gmail.com>
	<02FEEBA2-80E7-4072-B6D3-1D1BBFFC0770@lmi.net>
	<CAAZQWqgaONuJ27rQL3i2h1z-VoVy_5RCdtS1+sXpB+pVj+aTsw@mail.gmail.com>
	<4f47bdf3.a611440a.1fda.2435SMTPIN_ADDED@mx.google.com>
	<4AAB5F38-2CFA-4DC6-9747-D40C939C6B24@lbl.gov>
	<8E7F7C65-4387-45F6-B331-18569B2FE41A@solamen.fr>
Message-ID: <5B472090ED0BC64EA8F81B330169D3D42AAE59@CLOEXM1.cjp.co.uk>

It sounds obvious sorry, but have you deleted your .oct file after changing your materials file, so that you can create a new one?  Also you are missing 2 arguments in your materials file

void plastic outSideFacade
0
0
5 0.7 0.7 0.7

should be

void plastic outSideFacade
0
0
5 0.7 0.7 0.7 0 0

Regards

Andrew

  _____

From: Thibault Charles [mailto:thibault.charles at solamen.fr]
Sent: Fri 24/02/2012 17:28
To: Radiance general discussion
Subject: Re: [Radiance-general] Color surfaces information and link withSketchup defined colors


Hi Andy,

Thanks for your response. I known the material file. It seemed to me that informations about colors where coded by patterns in this file and I have no pattern in my files...
I created a really simple example in which the surface is red in Sketchup and my material file is only :
void plastic outSideFacade
0
0
5 0.7 0.7 0.7

The result is that in the rendering, the surface appear to be red and if I change the values in the material file, it is still red.

Would you have an idea ?

Best,

Thibault Charles
Solamen
thibault.charles at solamen.fr<mailto:thibault.charles at solamen.fr>
+33 6 78 54 27 91







Le 24 f?vr. 2012 ? 18:19, Andy McNeil a ?crit :


Hi Thibault,

su2rad creates a file called materials.rad.  You can open it in a text editor and it has the material descriptions used in the Radiance model.

Descriptions of the material primitive types can be found in section 2.1.2 of this pdf: http://radsite.lbl.gov/radiance/refer/refman.pdf
And documentation of the materials algorithms are contained in this pdf: http://radsite.lbl.gov/radiance/refer/materials.pdf

Best,
Andy



On Feb 24, 2012, at 8:39 AM, Thibault Charles wrote:



Hi everyone,

I usually work with Radiance and Daysim by contructing 3D scene with Sketchup and importing it with Su2rad.

Something stay obscure for me : I cannot find the file in which is contained the information about the colors of surfaces. When I create a scene in Sketchup, the same colors appear in the rendering but I cannot understand how...

Thanks in advance,

Thibault Charles
Solamen
thibault.charles at solamen.fr<mailto:thibault.charles at solamen.fr>
+33 6 78 54 27 91

_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org<mailto:Radiance-general at radiance-online.org>
http://www.radiance-online.org/mailman/listinfo/radiance-general



_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org<mailto:Radiance-general at radiance-online.org>
http://www.radiance-online.org/mailman/listinfo/radiance-general
Cundall have updated their website. To visit our new site go to http://www.cundall.com
--------------------------------------------------------------------------------
Cundall Johnston & Partners LLP is a limited liability partnership registered in England and Wales.Registered number OC300389.  
Registered office: Horsley House, Regent Centre, Gosforth, Newcastle upon Tyne, NE3 3LU
Privilege and Confidentiality Notice: Use of this email and any attachments is subject to the terms on our Website at http://www.cundall.com/Misc/Privacy-Policy.aspx 
If you cannot access these terms, please email terms at cundall.com with SEND TERMS in the subject heading or telephone +44 (0191) 213 1515 and we will send you a copy. 
All of our business is conducted in accordance with Cundall?s Ethical Business Policy. http://www.cundall.com/Knowledgehub/Ethical-Business-Policy.aspx
--------------------------------------------------------------------------------
This email message has been scanned for viruses by Mimecast. For more information please visit http://www.mimecast.com 
</pre>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120224/1a7bc0cc/attachment-0001.html>

From amcneil at lbl.gov  Fri Feb 24 10:07:30 2012
From: amcneil at lbl.gov (Andy McNeil)
Date: Fri, 24 Feb 2012 10:07:30 -0800
Subject: [Radiance-general] Color surfaces information and link with
	Sketchup defined colors
In-Reply-To: <8E7F7C65-4387-45F6-B331-18569B2FE41A@solamen.fr>
References: <CAAZQWqii1TMnNoBctU7NdswXo=An-sZApE2H0M6iCKyHitJwBQ@mail.gmail.com>	<02FEEBA2-80E7-4072-B6D3-1D1BBFFC0770@lmi.net>
	<CAAZQWqgaONuJ27rQL3i2h1z-VoVy_5RCdtS1+sXpB+pVj+aTsw@mail.gmail.com>
	<4f47bdf3.a611440a.1fda.2435SMTPIN_ADDED@mx.google.com>
	<4AAB5F38-2CFA-4DC6-9747-D40C939C6B24@lbl.gov>
	<8E7F7C65-4387-45F6-B331-18569B2FE41A@solamen.fr>
Message-ID: <3178D917-48BD-4D71-8EC3-5B50FDC63FE3@lbl.gov>

Hmm...  That sounds odd.  I just tried an similar example with a red surface in sketchup, changed the materials.rad file after exporting so the surface is yellow and when re-rendered the rendering is yellow as expected.

Are you importing your model into Daysim before you make the changes? 
It could be that Daysim creates a copy of the model somewhere else on your computer, so when you make changes you are not changing the model that Daysim is using.

Or, it could be that the material you are changing is not applied to the surface you are looking at.  

Can you send me an off list email with the files in you objects folder and the materials.rad file?  I'll have a look to see what's going on.

Andy


On Feb 24, 2012, at 9:28 AM, Thibault Charles wrote:

> Hi Andy,
> 
> Thanks for your response. I known the material file. It seemed to me that informations about colors where coded by patterns in this file and I have no pattern in my files...
> I created a really simple example in which the surface is red in Sketchup and my material file is only :
> void plastic outSideFacade
> 0
> 0
> 5 0.7 0.7 0.7
> 
> The result is that in the rendering, the surface appear to be red and if I change the values in the material file, it is still red.
> 
> Would you have an idea ?
> 
> Best,
> 
> Thibault Charles
> Solamen
> thibault.charles at solamen.fr
> +33 6 78 54 27 91
> 
> 
> 
> 
> 
> 
> 
> Le 24 f?vr. 2012 ? 18:19, Andy McNeil a ?crit :
> 
>> Hi Thibault,
>> 
>> su2rad creates a file called materials.rad.  You can open it in a text editor and it has the material descriptions used in the Radiance model.
>> 
>> Descriptions of the material primitive types can be found in section 2.1.2 of this pdf: http://radsite.lbl.gov/radiance/refer/refman.pdf
>> And documentation of the materials algorithms are contained in this pdf: http://radsite.lbl.gov/radiance/refer/materials.pdf
>> 
>> Best,
>> Andy
>> 
>> 
>> 
>> On Feb 24, 2012, at 8:39 AM, Thibault Charles wrote:
>> 
>>> Hi everyone,
>>>  
>>> I usually work with Radiance and Daysim by contructing 3D scene with Sketchup and importing it with Su2rad.
>>>  
>>> Something stay obscure for me : I cannot find the file in which is contained the information about the colors of surfaces. When I create a scene in Sketchup, the same colors appear in the rendering but I cannot understand how...
>>>  
>>> Thanks in advance,
>>>  
>>> Thibault Charles
>>> Solamen
>>> thibault.charles at solamen.fr
>>> +33 6 78 54 27 91
>>>  
>>> _______________________________________________
>>> Radiance-general mailing list
>>> Radiance-general at radiance-online.org
>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>> 
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120224/ca0ec779/attachment.html>

From amcneil at lbl.gov  Fri Feb 24 10:29:19 2012
From: amcneil at lbl.gov (Andy McNeil)
Date: Fri, 24 Feb 2012 10:29:19 -0800
Subject: [Radiance-general] Fwd: Color surfaces information and link with
	Sketchup defined colors
References: <1B23446CBF250648A2FC775DE3FE7E800549BC@OC11expo28.exchange.mit.edu>
Message-ID: <BE240FE4-CB80-4B15-94B9-BD227F9E50D2@lbl.gov>

Hi Thibault,
I just got the email below from Christoph, which explains the situation.
Andy



Begin forwarded message:

> From: Christoph Reinhart <tito_ at mit.edu>
> Subject: RE: [Radiance-general] Color surfaces information and link with Sketchup defined colors
> Date: February 24, 2012 10:17:35 AM PST
> To: "amcneil at lbl.gov" <amcneil at lbl.gov>
> 
> Hi Andy,
>  
> My email bounced from the Radiance online list. Do you know who is the moderator now? Could you forward the email to the group?
>  
> All the best,
>  
> Christoph
>  
>  
> ++++++++++++++++++++++++
> Daysim uses a program called radfiles2daysim.exe to take out light sources out of a Radiance scene and convert all color to gray. This is necessary because Daysim conducts the daylight coefficient calculation for the rad color channel only. Historically, this was introduced because in 1999 RAM used to be a serious limitation for annual  Radiance simulations.
>  
> Christoph
> PS: Gosh, I feel old writing this email J.
>  
>  
>  
> From: Andy McNeil [mailto:amcneil at lbl.gov] 
> Sent: Friday, February 24, 2012 1:08 PM
> To: Radiance general discussion
> Subject: Re: [Radiance-general] Color surfaces information and link with Sketchup defined colors
>  
> Hmm...  That sounds odd.  I just tried an similar example with a red surface in sketchup, changed the materials.rad file after exporting so the surface is yellow and when re-rendered the rendering is yellow as expected.
>  
> Are you importing your model into Daysim before you make the changes? 
> It could be that Daysim creates a copy of the model somewhere else on your computer, so when you make changes you are not changing the model that Daysim is using.
>  
> Or, it could be that the material you are changing is not applied to the surface you are looking at.  
>  
> Can you send me an off list email with the files in you objects folder and the materials.rad file?  I'll have a look to see what's going on.
>  
> Andy
>  
>  
> On Feb 24, 2012, at 9:28 AM, Thibault Charles wrote:
> 
> 
> Hi Andy,
>  
> Thanks for your response. I known the material file. It seemed to me that informations about colors where coded by patterns in this file and I have no pattern in my files...
> I created a really simple example in which the surface is red in Sketchup and my material file is only :
> void plastic outSideFacade
> 0
> 0
> 5 0.7 0.7 0.7
>  
> The result is that in the rendering, the surface appear to be red and if I change the values in the material file, it is still red.
>  
> Would you have an idea ?
>  
> Best,
>  
> Thibault Charles
> Solamen
> thibault.charles at solamen.fr
> +33 6 78 54 27 91
>  
>  
>  
>  
> 
> 
>  
> Le 24 f?vr. 2012 ? 18:19, Andy McNeil a ?crit :
> 
> 
> Hi Thibault,
>  
> su2rad creates a file called materials.rad.  You can open it in a text editor and it has the material descriptions used in the Radiance model.
>  
> Descriptions of the material primitive types can be found in section 2.1.2 of this pdf:http://radsite.lbl.gov/radiance/refer/refman.pdf
> And documentation of the materials algorithms are contained in this pdf: http://radsite.lbl.gov/radiance/refer/materials.pdf
>  
> Best,
> Andy
>  
>  
>  
> On Feb 24, 2012, at 8:39 AM, Thibault Charles wrote:
> 
> 
> Hi everyone,
>  
> I usually work with Radiance and Daysim by contructing 3D scene with Sketchup and importing it with Su2rad.
>  
> Something stay obscure for me : I cannot find the file in which is contained the information about the colors of surfaces. When I create a scene in Sketchup, the same colors appear in the rendering but I cannot understand how...
>  
> Thanks in advance,
>  
> Thibault Charles
> Solamen
> thibault.charles at solamen.fr
> +33 6 78 54 27 91
>  
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>  
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>  
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120224/d3e97ad2/attachment-0001.html>

From iabel at iebele.nl  Fri Feb 24 11:24:43 2012
From: iabel at iebele.nl (Iebele Abel)
Date: Fri, 24 Feb 2012 21:24:43 +0200
Subject: [Radiance-general] Generating alpha channels using vwrays and rtrace
Message-ID: <CAD_et2V0-_7c-CJkuOmVtReznQ_HYbr1F5iZOoTFmJnTHTuhpA@mail.gmail.com>

Hi group,

Whilst finding a method to create alpha channels for my rendered image, I'm
playing with vwrays and rtrace. What I intend is to create an image in
which
geometry modified by a particular modifier  is rendered white, whilst the
geometry modified otherwise is rendered black. The command below comes
close to this, it has as output the modifiers for each surface hit:

vwrays -ff -vf test.vp -x 100 -y 100 | rtrace `vwrays -d -vf test.vp -x 100
-y 100`  -ffa -om test.oct  | more

Output of this command is like:
...
floor
floor
floor
window
window
etc...

Now I want that, for example, each occurrence of "window" sends 3 "bright"
RGBE primaries to stdout, and every other string sends 3 "dark" RGBE
primaries to stdout. I can do this by writing a small program (instead of
piping to 'more' as in the example above), but I wondered if there is a
method using native Radiance tools to do it.

In pseudo code (bold) I think about something like this (where 1 represents
a value considered as white in the output, and 0 represents black) :

vwrays -ff -vf test.vp -x 100 -y 100 | rtrace `vwrays -d -vf test.vp -x 100
-y 100`  -ffa -om test.oct  | *if (stdin == "window") fprintf(stdout, "1 1
1" ); else fprintf ( stdout, "0,0,0"); *| ra_tiff - alpha.tif

So my questions are:
1. how do I format the output of stdout as Radiance RGBE?
2. can I do this using native Radiance tools?

Thanks for any hints.

-Iebele
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120224/72edf292/attachment.html>

From jedev at visarc.com  Fri Feb 24 11:45:10 2012
From: jedev at visarc.com (Jack de Valpine)
Date: Fri, 24 Feb 2012 14:45:10 -0500
Subject: [Radiance-general] Generating alpha channels using vwrays and
 rtrace
In-Reply-To: <CAD_et2V0-_7c-CJkuOmVtReznQ_HYbr1F5iZOoTFmJnTHTuhpA@mail.gmail.com>
References: <CAD_et2V0-_7c-CJkuOmVtReznQ_HYbr1F5iZOoTFmJnTHTuhpA@mail.gmail.com>
Message-ID: <4F47E8C6.3000902@visarc.com>

Hi Iebele,

I have done a few different things to achieve this over the years. The 
one that come most readily to mind is to prep an alternate material file 
with a black (0 0 0) and white (1 1 1) material assigned as needed. This 
is one reason the "alias" material option can be quite handy when 
assigning materials to geometry! With the correct black/white materials 
this can be rendered out very quickly with -ab 0 and -av 1 1 1.

I have also done something where (with scripting) you can specify a 
material name that then get white and everything else gets black. It has 
been a while so I do not quite remember off hand, but I think that this 
can also be setup as a big pipe in radiance and using radiance's 
functional language.

The first way is pretty easy and if you need to do lots of it then it is 
possible to script the switching of material assignments. One challenge 
though is that if you use instances (frozen octrees) you need to 
remember to assign a material accordingly. Another challenge is thinking 
about transparencies that might need to be captured in the process...

Regards,

-Jack

-- 
# Jack de Valpine
# president
#
# visarc incorporated
# http://www.visarc.com
#
# channeling technology for superior design and construction


On 2/24/2012 2:24 PM, Iebele Abel wrote:
> Hi group,
>
> Whilst finding a method to create alpha channels for my rendered 
> image, I'm playing with vwrays and rtrace. What I intend is to create 
> an image in which
> geometry modified by a particular modifier  is rendered white, whilst 
> the geometry modified otherwise is rendered black. The command below 
> comes close to this, it has as output the modifiers for each surface hit:
>
> vwrays -ff -vf test.vp -x 100 -y 100 | rtrace `vwrays -d -vf test.vp 
> -x 100 -y 100`  -ffa -om test.oct  | more
>
> Output of this command is like:
> ...
> floor
> floor
> floor
> window
> window
> etc...
>
> Now I want that, for example, each occurrence of "window" sends 3 
> "bright" RGBE primaries to stdout, and every other string sends 3 
> "dark" RGBE primaries to stdout. I can do this by writing a small 
> program (instead of piping to 'more' as in the example above), but I 
> wondered if there is a method using native Radiance tools to do it.
>
> In pseudo code (bold) I think about something like this (where 1 
> represents a value considered as white in the output, and 0 represents 
> black) :
>
> vwrays -ff -vf test.vp -x 100 -y 100 | rtrace `vwrays -d -vf test.vp 
> -x 100 -y 100`  -ffa -om test.oct  | *if (stdin == "window") 
> fprintf(stdout, "1 1 1" ); else fprintf ( stdout, "0,0,0"); *| ra_tiff 
> - alpha.tif
>
> So my questions are:
> 1. how do I format the output of stdout as Radiance RGBE?
> 2. can I do this using native Radiance tools?
>
> Thanks for any hints.
>
> -Iebele
>
>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120224/2c4f57c4/attachment.html>

From gregoryjward at gmail.com  Fri Feb 24 11:54:00 2012
From: gregoryjward at gmail.com (Greg Ward)
Date: Fri, 24 Feb 2012 11:54:00 -0800
Subject: [Radiance-general] Generating alpha channels using vwrays and
	rtrace
In-Reply-To: <CAD_et2V0-_7c-CJkuOmVtReznQ_HYbr1F5iZOoTFmJnTHTuhpA@mail.gmail.com>
References: <CAD_et2V0-_7c-CJkuOmVtReznQ_HYbr1F5iZOoTFmJnTHTuhpA@mail.gmail.com>
Message-ID: <389083BA-B466-4565-8693-676ED41D0159@lmi.net>

Hi Iebele,

Wouldn't it be simpler to introduce an alias for the material you want and set it to "glow" with the desired high brightness?  Take out any other light sources, turn off ambient bounces and ambient value, and render the image.  It would be a lot faster that way.

Barring that, you can do what you want like so:

vwrays -ff -vf test.vp -pa 0 -x $XRES -y $YRES | rtrace -h -x $XRES -y $YRES  -ffa -om test.oct  \
	| sed -e 's/^window$/1/' -e 's/^[^1].*$/0/' | pvalue -h -r -b -d -y $YRES +x $XRES > mask.hdr

You need to set your x and y resolution explicitly because pvalue needs them in a form other than the one vwrays -d produces.  This also assumes you have sed and none of your material names starts with the numeral '1'.

Cheers,
-Greg

P.S.  Seems Jack beat me to this....

> From: Iebele Abel <iabel at iebele.nl>
> Date: February 24, 2012 11:24:43 AM PST
> 
> Hi group, 
> 
> Whilst finding a method to create alpha channels for my rendered image, I'm playing with vwrays and rtrace. What I intend is to create an image in which 
> geometry modified by a particular modifier  is rendered white, whilst the geometry modified otherwise is rendered black. The command below comes close to this, it has as output the modifiers for each surface hit:
> 
> vwrays -ff -vf test.vp -x 100 -y 100 | rtrace `vwrays -d -vf test.vp -x 100 -y 100`  -ffa -om test.oct  | more
> 
> Output of this command is like:
> ...
> floor
> floor
> floor
> window
> window
> etc...
> 
> Now I want that, for example, each occurrence of "window" sends 3 "bright" RGBE primaries to stdout, and every other string sends 3 "dark" RGBE primaries to stdout. I can do this by writing a small program (instead of piping to 'more' as in the example above), but I wondered if there is a method using native Radiance tools to do it.   
> 
> In pseudo code (bold) I think about something like this (where 1 represents a value considered as white in the output, and 0 represents black) :
> 
> vwrays -ff -vf test.vp -x 100 -y 100 | rtrace `vwrays -d -vf test.vp -x 100 -y 100`  -ffa -om test.oct  | if (stdin == "window") fprintf(stdout, "1 1 1" ); else fprintf ( stdout, "0,0,0"); | ra_tiff - alpha.tif
> 
> So my questions are:
> 1. how do I format the output of stdout as Radiance RGBE? 
> 2. can I do this using native Radiance tools? 
> 
> Thanks for any hints. 
> 
> -Iebele


From thibault.charles at solamen.fr  Fri Feb 24 13:04:47 2012
From: thibault.charles at solamen.fr (thibault.charles at solamen.fr)
Date: Fri, 24 Feb 2012 21:04:47 +0000
Subject: [Radiance-general] Fwd: Color surfaces information and link
	with Sketchup defined colors
In-Reply-To: <BE240FE4-CB80-4B15-94B9-BD227F9E50D2@lbl.gov>
Message-ID: <3VqQN9ZH.1330117487.4520350.thibault.charles@solamen.fr>

Hi,

Thanks a lot for this explanation.

Andrew, sorry for my mistake, it was effectively :
void plastic outSideFacade
0
0
5 0.7 0.7 0.7 0 0

Thanks again.

Best regards

Thibault

Le 24/2/2012, "Andy McNeil" <amcneil at lbl.gov> a ?crit:

>Hi Thibault,
>I just got the email below from Christoph, which explains the situation.
>Andy
>
>
>
>Begin forwarded message:
>
>> From: Christoph Reinhart <tito_ at mit.edu>
>> Subject: RE: [Radiance-general] Color surfaces information and link with Sketchup defined colors
>> Date: February 24, 2012 10:17:35 AM PST
>> To: "amcneil at lbl.gov" <amcneil at lbl.gov>
>> 
>> Hi Andy,
>>  
>> My email bounced from the Radiance online list. Do you know who is the moderator now? Could you forward the email to the group?
>>  
>> All the best,
>>  
>> Christoph
>>  
>>  
>> ++++++++++++++++++++++++
>> Daysim uses a program called radfiles2daysim.exe to take out light sources out of a Radiance scene and convert all color to gray. This is necessary because Daysim conducts the daylight coefficient calculation for the rad color channel only. Historically, this was introduced because in 1999 RAM used to be a serious limitation for annual  Radiance simulations.
>>  
>> Christoph
>> PS: Gosh, I feel old writing this email J.
>>  
>>  
>>  
>> From: Andy McNeil [mailto:amcneil at lbl.gov] 
>> Sent: Friday, February 24, 2012 1:08 PM
>> To: Radiance general discussion
>> Subject: Re: [Radiance-general] Color surfaces information and link with Sketchup defined colors
>>  
>> Hmm...  That sounds odd.  I just tried an similar example with a red surface in sketchup, changed the materials.rad file after exporting so the surface is yellow and when re-rendered the rendering is yellow as expected.
>>  
>> Are you importing your model into Daysim before you make the changes? 
>> It could be that Daysim creates a copy of the model somewhere else on your computer, so when you make changes you are not changing the model that Daysim is using.
>>  
>> Or, it could be that the material you are changing is not applied to the surface you are looking at.  
>>  
>> Can you send me an off list email with the files in you objects folder and the materials.rad file?  I'll have a look to see what's going on.
>>  
>> Andy
>>  
>>  
>> On Feb 24, 2012, at 9:28 AM, Thibault Charles wrote:
>> 
>> 
>> Hi Andy,
>>  
>> Thanks for your response. I known the material file. It seemed to me that informations about colors where coded by patterns in this file and I have no pattern in my files...
>> I created a really simple example in which the surface is red in Sketchup and my material file is only :
>> void plastic outSideFacade
>> 0
>> 0
>> 5 0.7 0.7 0.7
>>  
>> The result is that in the rendering, the surface appear to be red and if I change the values in the material file, it is still red.
>>  
>> Would you have an idea ?
>>  
>> Best,
>>  
>> Thibault Charles
>> Solamen
>> thibault.charles at solamen.fr
>> +33 6 78 54 27 91
>>  
>>  
>>  
>>  
>> 
>> 
>>  
>> Le 24 f?vr. 2012 ? 18:19, Andy McNeil a ?crit :
>> 
>> 
>> Hi Thibault,
>>  
>> su2rad creates a file called materials.rad.  You can open it in a text editor and it has the material descriptions used in the Radiance model.
>>  
>> Descriptions of the material primitive types can be found in section 2.1.2 of this pdf:http://radsite.lbl.gov/radiance/refer/refman.pdf
>> And documentation of the materials algorithms are contained in this pdf: http://radsite.lbl.gov/radiance/refer/materials.pdf
>>  
>> Best,
>> Andy
>>  
>>  
>>  
>> On Feb 24, 2012, at 8:39 AM, Thibault Charles wrote:
>> 
>> 
>> Hi everyone,
>>  
>> I usually work with Radiance and Daysim by contructing 3D scene with Sketchup and importing it with Su2rad.
>>  
>> Something stay obscure for me : I cannot find the file in which is contained the information about the colors of surfaces. When I create a scene in Sketchup, the same colors appear in the rendering but I cannot understand how...
>>  
>> Thanks in advance,
>>  
>> Thibault Charles
>> Solamen
>> thibault.charles at solamen.fr
>> +33 6 78 54 27 91
>>  
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>  
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>  
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>


From antonutto at yahoo.it  Fri Feb 24 13:29:20 2012
From: antonutto at yahoo.it (giulio antonutto)
Date: Fri, 24 Feb 2012 21:29:20 +0000
Subject: [Radiance-general] Generating alpha channels using vwrays and
	rtrace
In-Reply-To: <389083BA-B466-4565-8693-676ED41D0159@lmi.net>
References: <CAD_et2V0-_7c-CJkuOmVtReznQ_HYbr1F5iZOoTFmJnTHTuhpA@mail.gmail.com>
	<389083BA-B466-4565-8693-676ED41D0159@lmi.net>
Message-ID: <44DD5288-C057-4FE0-B495-1A34F6368038@yahoo.it>

must disagree (oi oi oi!)

glow is normal sensitive so not an option most of the time.

better to use black and white and av 1  1 1 (no sky to cut reflections)

G

On 24 Feb 2012, at 19:54, Greg Ward wrote:

> Hi Iebele,
> 
> Wouldn't it be simpler to introduce an alias for the material you want and set it to "glow" with the desired high brightness?  Take out any other light sources, turn off ambient bounces and ambient value, and render the image.  It would be a lot faster that way.
> 
> Barring that, you can do what you want like so:
> 
> vwrays -ff -vf test.vp -pa 0 -x $XRES -y $YRES | rtrace -h -x $XRES -y $YRES  -ffa -om test.oct  \
> 	| sed -e 's/^window$/1/' -e 's/^[^1].*$/0/' | pvalue -h -r -b -d -y $YRES +x $XRES > mask.hdr
> 
> You need to set your x and y resolution explicitly because pvalue needs them in a form other than the one vwrays -d produces.  This also assumes you have sed and none of your material names starts with the numeral '1'.
> 
> Cheers,
> -Greg
> 
> P.S.  Seems Jack beat me to this....
> 
>> From: Iebele Abel <iabel at iebele.nl>
>> Date: February 24, 2012 11:24:43 AM PST
>> 
>> Hi group, 
>> 
>> Whilst finding a method to create alpha channels for my rendered image, I'm playing with vwrays and rtrace. What I intend is to create an image in which 
>> geometry modified by a particular modifier  is rendered white, whilst the geometry modified otherwise is rendered black. The command below comes close to this, it has as output the modifiers for each surface hit:
>> 
>> vwrays -ff -vf test.vp -x 100 -y 100 | rtrace `vwrays -d -vf test.vp -x 100 -y 100`  -ffa -om test.oct  | more
>> 
>> Output of this command is like:
>> ...
>> floor
>> floor
>> floor
>> window
>> window
>> etc...
>> 
>> Now I want that, for example, each occurrence of "window" sends 3 "bright" RGBE primaries to stdout, and every other string sends 3 "dark" RGBE primaries to stdout. I can do this by writing a small program (instead of piping to 'more' as in the example above), but I wondered if there is a method using native Radiance tools to do it.   
>> 
>> In pseudo code (bold) I think about something like this (where 1 represents a value considered as white in the output, and 0 represents black) :
>> 
>> vwrays -ff -vf test.vp -x 100 -y 100 | rtrace `vwrays -d -vf test.vp -x 100 -y 100`  -ffa -om test.oct  | if (stdin == "window") fprintf(stdout, "1 1 1" ); else fprintf ( stdout, "0,0,0"); | ra_tiff - alpha.tif
>> 
>> So my questions are:
>> 1. how do I format the output of stdout as Radiance RGBE? 
>> 2. can I do this using native Radiance tools? 
>> 
>> Thanks for any hints. 
>> 
>> -Iebele
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general



From antonutto at yahoo.it  Fri Feb 24 13:29:48 2012
From: antonutto at yahoo.it (giulio antonutto)
Date: Fri, 24 Feb 2012 21:29:48 +0000
Subject: [Radiance-general] Generating alpha channels using vwrays and
	rtrace
In-Reply-To: <4F47E8C6.3000902@visarc.com>
References: <CAD_et2V0-_7c-CJkuOmVtReznQ_HYbr1F5iZOoTFmJnTHTuhpA@mail.gmail.com>
	<4F47E8C6.3000902@visarc.com>
Message-ID: <E43A469A-DD3B-46C1-A274-8CCF024DD498@yahoo.it>

yes, this was :-) 
(sorry missed your reply)
G

On 24 Feb 2012, at 19:45, Jack de Valpine wrote:

> Hi Iebele,
> 
> I have done a few different things to achieve this over the years. The one that come most readily to mind is to prep an alternate material file with a black (0 0 0) and white (1 1 1) material assigned as needed. This is one reason the "alias" material option can be quite handy when assigning materials to geometry! With the correct black/white materials this can be rendered out very quickly with -ab 0 and -av 1 1 1.
> 
> I have also done something where (with scripting) you can specify a material name that then get white and everything else gets black. It has been a while so I do not quite remember off hand, but I think that this can also be setup as a big pipe in radiance and using radiance's functional language.
> 
> The first way is pretty easy and if you need to do lots of it then it is possible to script the switching of material assignments. One challenge though is that if you use instances (frozen octrees) you need to remember to assign a material accordingly. Another challenge is thinking about transparencies that might need to be captured in the process...
> 
> Regards,
> 
> -Jack
> -- 
> # Jack de Valpine
> # president
> #
> # visarc incorporated
> # http://www.visarc.com
> #
> # channeling technology for superior design and construction
> 
> On 2/24/2012 2:24 PM, Iebele Abel wrote:
>> 
>> Hi group, 
>> 
>> Whilst finding a method to create alpha channels for my rendered image, I'm playing with vwrays and rtrace. What I intend is to create an image in which 
>> geometry modified by a particular modifier  is rendered white, whilst the geometry modified otherwise is rendered black. The command below comes close to this, it has as output the modifiers for each surface hit:
>> 
>> vwrays -ff -vf test.vp -x 100 -y 100 | rtrace `vwrays -d -vf test.vp -x 100 -y 100`  -ffa -om test.oct  | more
>> 
>> Output of this command is like:
>> ...
>> floor
>> floor
>> floor
>> window
>> window
>> etc...
>> 
>> Now I want that, for example, each occurrence of "window" sends 3 "bright" RGBE primaries to stdout, and every other string sends 3 "dark" RGBE primaries to stdout. I can do this by writing a small program (instead of piping to 'more' as in the example above), but I wondered if there is a method using native Radiance tools to do it.   
>> 
>> In pseudo code (bold) I think about something like this (where 1 represents a value considered as white in the output, and 0 represents black) :
>> 
>> vwrays -ff -vf test.vp -x 100 -y 100 | rtrace `vwrays -d -vf test.vp -x 100 -y 100`  -ffa -om test.oct  | if (stdin == "window") fprintf(stdout, "1 1 1" ); else fprintf ( stdout, "0,0,0"); | ra_tiff - alpha.tif
>> 
>> So my questions are:
>> 1. how do I format the output of stdout as Radiance RGBE? 
>> 2. can I do this using native Radiance tools? 
>> 
>> Thanks for any hints. 
>> 
>> -Iebele
>> 
>>  
>> 
>> 
>> 
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120224/1f65d934/attachment-0001.html>

From gregoryjward at gmail.com  Fri Feb 24 13:45:13 2012
From: gregoryjward at gmail.com (Greg Ward)
Date: Fri, 24 Feb 2012 13:45:13 -0800
Subject: [Radiance-general] Generating alpha channels using vwrays and
	rtrace
In-Reply-To: <44DD5288-C057-4FE0-B495-1A34F6368038@yahoo.it>
References: <CAD_et2V0-_7c-CJkuOmVtReznQ_HYbr1F5iZOoTFmJnTHTuhpA@mail.gmail.com>
	<389083BA-B466-4565-8693-676ED41D0159@lmi.net>
	<44DD5288-C057-4FE0-B495-1A34F6368038@yahoo.it>
Message-ID: <6E93314C-7924-4B81-806A-7E702CD5CE61@lmi.net>

You mean glow isn't visible from the back side, right?  The output from the front side is the same in all directions, but the back side emits 0.  I didn't think of this issue, but I suppose it matters for a lot of scenes...  Good point!

-Greg

> From: giulio antonutto <antonutto at yahoo.it>
> Date: February 24, 2012 1:29:20 PM PST
> 
> must disagree (oi oi oi!)
> 
> glow is normal sensitive so not an option most of the time.
> 
> better to use black and white and av 1  1 1 (no sky to cut reflections)
> 
> G
> 
> On 24 Feb 2012, at 19:54, Greg Ward wrote:
> 
>> Hi Iebele,
>> 
>> Wouldn't it be simpler to introduce an alias for the material you want and set it to "glow" with the desired high brightness?  Take out any other light sources, turn off ambient bounces and ambient value, and render the image.  It would be a lot faster that way.
>> 
>> Barring that, you can do what you want like so:
>> 
>> vwrays -ff -vf test.vp -pa 0 -x $XRES -y $YRES | rtrace -h -x $XRES -y $YRES  -ffa -om test.oct  \
>> 	| sed -e 's/^window$/1/' -e 's/^[^1].*$/0/' | pvalue -h -r -b -d -y $YRES +x $XRES > mask.hdr
>> 
>> You need to set your x and y resolution explicitly because pvalue needs them in a form other than the one vwrays -d produces.  This also assumes you have sed and none of your material names starts with the numeral '1'.
>> 
>> Cheers,
>> -Greg
>> 
>> P.S.  Seems Jack beat me to this....


From antonutto at yahoo.it  Fri Feb 24 13:58:49 2012
From: antonutto at yahoo.it (giulio antonutto)
Date: Fri, 24 Feb 2012 21:58:49 +0000
Subject: [Radiance-general] Generating alpha channels using vwrays and
	rtrace
In-Reply-To: <6E93314C-7924-4B81-806A-7E702CD5CE61@lmi.net>
References: <CAD_et2V0-_7c-CJkuOmVtReznQ_HYbr1F5iZOoTFmJnTHTuhpA@mail.gmail.com>
	<389083BA-B466-4565-8693-676ED41D0159@lmi.net>
	<44DD5288-C057-4FE0-B495-1A34F6368038@yahoo.it>
	<6E93314C-7924-4B81-806A-7E702CD5CE61@lmi.net>
Message-ID: <1FD63069-FC6A-4FE1-835A-0DED93AF6FB3@yahoo.it>

Yes, that is it.
Because most of the time people building the 3d do not pay attention to normals? 
so if you are using radiance and rely on model coming from elsewhere, either you have to spend a long time flipping polygons or you use another route.
which sometimes is running two things (one xform'ed -I) and add them up or simply  use the black/white and av trick 
:-)
G


On 24 Feb 2012, at 21:45, Greg Ward wrote:

> You mean glow isn't visible from the back side, right?  The output from the front side is the same in all directions, but the back side emits 0.  I didn't think of this issue, but I suppose it matters for a lot of scenes...  Good point!
> 
> -Greg
> 
>> From: giulio antonutto <antonutto at yahoo.it>
>> Date: February 24, 2012 1:29:20 PM PST
>> 
>> must disagree (oi oi oi!)
>> 
>> glow is normal sensitive so not an option most of the time.
>> 
>> better to use black and white and av 1  1 1 (no sky to cut reflections)
>> 
>> G
>> 
>> On 24 Feb 2012, at 19:54, Greg Ward wrote:
>> 
>>> Hi Iebele,
>>> 
>>> Wouldn't it be simpler to introduce an alias for the material you want and set it to "glow" with the desired high brightness?  Take out any other light sources, turn off ambient bounces and ambient value, and render the image.  It would be a lot faster that way.
>>> 
>>> Barring that, you can do what you want like so:
>>> 
>>> vwrays -ff -vf test.vp -pa 0 -x $XRES -y $YRES | rtrace -h -x $XRES -y $YRES  -ffa -om test.oct  \
>>> 	| sed -e 's/^window$/1/' -e 's/^[^1].*$/0/' | pvalue -h -r -b -d -y $YRES +x $XRES > mask.hdr
>>> 
>>> You need to set your x and y resolution explicitly because pvalue needs them in a form other than the one vwrays -d produces.  This also assumes you have sed and none of your material names starts with the numeral '1'.
>>> 
>>> Cheers,
>>> -Greg
>>> 
>>> P.S.  Seems Jack beat me to this....
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general



From amcneil at lbl.gov  Fri Feb 24 14:25:00 2012
From: amcneil at lbl.gov (Andy McNeil)
Date: Fri, 24 Feb 2012 14:25:00 -0800
Subject: [Radiance-general] Generating alpha channels using vwrays and
	rtrace
In-Reply-To: <E43A469A-DD3B-46C1-A274-8CCF024DD498@yahoo.it>
References: <CAD_et2V0-_7c-CJkuOmVtReznQ_HYbr1F5iZOoTFmJnTHTuhpA@mail.gmail.com>
	<4F47E8C6.3000902@visarc.com>
	<E43A469A-DD3B-46C1-A274-8CCF024DD498@yahoo.it>
Message-ID: <A366C96E-16D7-49C3-A781-FB12FCF9E757@lbl.gov>

I kinda like Iebele's method approach better than using black and white materials.  Using rtrace -om you can create alpha channels using the same octree that you use for a rendering.  And you can also create many alpha images for different materials with the same model.  It just seems less work than fussing with material files.

Iebele, the main thing you're missing is pvalue to convert the data stream to image format.  I also used awk for the if statement.  Here's a complete command:

vwrays -ff -vf test.vp -x 100 -y 100 | \
	rtrace `vwrays -d -vf test.vp -x 100 -y 100`  -ffa -om test.oct  | \
	awk '{if($1=="window") print 1.0; else print 0.0;}'  | \
	pvalue +x 500 -y 500 -h -da -b -r | \
	ra_tiff - alpha.tif

Andy



On Feb 24, 2012, at 1:29 PM, giulio antonutto wrote:

> yes, this was :-) 
> (sorry missed your reply)
> G
> 
> On 24 Feb 2012, at 19:45, Jack de Valpine wrote:
> 
>> Hi Iebele,
>> 
>> I have done a few different things to achieve this over the years. The one that come most readily to mind is to prep an alternate material file with a black (0 0 0) and white (1 1 1) material assigned as needed. This is one reason the "alias" material option can be quite handy when assigning materials to geometry! With the correct black/white materials this can be rendered out very quickly with -ab 0 and -av 1 1 1.
>> 
>> I have also done something where (with scripting) you can specify a material name that then get white and everything else gets black. It has been a while so I do not quite remember off hand, but I think that this can also be setup as a big pipe in radiance and using radiance's functional language.
>> 
>> The first way is pretty easy and if you need to do lots of it then it is possible to script the switching of material assignments. One challenge though is that if you use instances (frozen octrees) you need to remember to assign a material accordingly. Another challenge is thinking about transparencies that might need to be captured in the process...
>> 
>> Regards,
>> 
>> -Jack
>> -- 
>> # Jack de Valpine
>> # president
>> #
>> # visarc incorporated
>> # http://www.visarc.com
>> #
>> # channeling technology for superior design and construction
>> 
>> On 2/24/2012 2:24 PM, Iebele Abel wrote:
>>> 
>>> Hi group, 
>>> 
>>> Whilst finding a method to create alpha channels for my rendered image, I'm playing with vwrays and rtrace. What I intend is to create an image in which 
>>> geometry modified by a particular modifier  is rendered white, whilst the geometry modified otherwise is rendered black. The command below comes close to this, it has as output the modifiers for each surface hit:
>>> 
>>> vwrays -ff -vf test.vp -x 100 -y 100 | rtrace `vwrays -d -vf test.vp -x 100 -y 100`  -ffa -om test.oct  | more
>>> 
>>> Output of this command is like:
>>> ...
>>> floor
>>> floor
>>> floor
>>> window
>>> window
>>> etc...
>>> 
>>> Now I want that, for example, each occurrence of "window" sends 3 "bright" RGBE primaries to stdout, and every other string sends 3 "dark" RGBE primaries to stdout. I can do this by writing a small program (instead of piping to 'more' as in the example above), but I wondered if there is a method using native Radiance tools to do it.   
>>> 
>>> In pseudo code (bold) I think about something like this (where 1 represents a value considered as white in the output, and 0 represents black) :
>>> 
>>> vwrays -ff -vf test.vp -x 100 -y 100 | rtrace `vwrays -d -vf test.vp -x 100 -y 100`  -ffa -om test.oct  | if (stdin == "window") fprintf(stdout, "1 1 1" ); else fprintf ( stdout, "0,0,0"); | ra_tiff - alpha.tif
>>> 
>>> So my questions are:
>>> 1. how do I format the output of stdout as Radiance RGBE? 
>>> 2. can I do this using native Radiance tools? 
>>> 
>>> Thanks for any hints. 
>>> 
>>> -Iebele
>>> 
>>>  
>>> 
>>> 
>>> 
>>> _______________________________________________
>>> Radiance-general mailing list
>>> Radiance-general at radiance-online.org
>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120224/03f9434b/attachment-0001.html>

From antonutto at yahoo.it  Fri Feb 24 14:28:55 2012
From: antonutto at yahoo.it (giulio antonutto)
Date: Fri, 24 Feb 2012 22:28:55 +0000
Subject: [Radiance-general] Generating alpha channels using vwrays and
	rtrace
In-Reply-To: <A366C96E-16D7-49C3-A781-FB12FCF9E757@lbl.gov>
References: <CAD_et2V0-_7c-CJkuOmVtReznQ_HYbr1F5iZOoTFmJnTHTuhpA@mail.gmail.com>
	<4F47E8C6.3000902@visarc.com>
	<E43A469A-DD3B-46C1-A274-8CCF024DD498@yahoo.it>
	<A366C96E-16D7-49C3-A781-FB12FCF9E757@lbl.gov>
Message-ID: <D881672A-81DB-4959-BF5F-E1DF2C12B1AF@yahoo.it>

Andy  -still-  rules
:-)


On 24 Feb 2012, at 22:25, Andy McNeil wrote:

> I kinda like Iebele's method approach better than using black and white materials.  Using rtrace -om you can create alpha channels using the same octree that you use for a rendering.  And you can also create many alpha images for different materials with the same model.  It just seems less work than fussing with material files.
> 
> Iebele, the main thing you're missing is pvalue to convert the data stream to image format.  I also used awk for the if statement.  Here's a complete command:
> 
> vwrays -ff -vf test.vp -x 100 -y 100 | \
> 	rtrace `vwrays -d -vf test.vp -x 100 -y 100`  -ffa -om test.oct  | \
> 	awk '{if($1=="window") print 1.0; else print 0.0;}'  | \
> 	pvalue +x 500 -y 500 -h -da -b -r | \
> 	ra_tiff - alpha.tif
> 
> Andy
> 
> 
> 
> On Feb 24, 2012, at 1:29 PM, giulio antonutto wrote:
> 
>> yes, this was :-) 
>> (sorry missed your reply)
>> G
>> 
>> On 24 Feb 2012, at 19:45, Jack de Valpine wrote:
>> 
>>> Hi Iebele,
>>> 
>>> I have done a few different things to achieve this over the years. The one that come most readily to mind is to prep an alternate material file with a black (0 0 0) and white (1 1 1) material assigned as needed. This is one reason the "alias" material option can be quite handy when assigning materials to geometry! With the correct black/white materials this can be rendered out very quickly with -ab 0 and -av 1 1 1.
>>> 
>>> I have also done something where (with scripting) you can specify a material name that then get white and everything else gets black. It has been a while so I do not quite remember off hand, but I think that this can also be setup as a big pipe in radiance and using radiance's functional language.
>>> 
>>> The first way is pretty easy and if you need to do lots of it then it is possible to script the switching of material assignments. One challenge though is that if you use instances (frozen octrees) you need to remember to assign a material accordingly. Another challenge is thinking about transparencies that might need to be captured in the process...
>>> 
>>> Regards,
>>> 
>>> -Jack
>>> -- 
>>> # Jack de Valpine
>>> # president
>>> #
>>> # visarc incorporated
>>> # http://www.visarc.com
>>> #
>>> # channeling technology for superior design and construction
>>> 
>>> On 2/24/2012 2:24 PM, Iebele Abel wrote:
>>>> 
>>>> Hi group, 
>>>> 
>>>> Whilst finding a method to create alpha channels for my rendered image, I'm playing with vwrays and rtrace. What I intend is to create an image in which 
>>>> geometry modified by a particular modifier  is rendered white, whilst the geometry modified otherwise is rendered black. The command below comes close to this, it has as output the modifiers for each surface hit:
>>>> 
>>>> vwrays -ff -vf test.vp -x 100 -y 100 | rtrace `vwrays -d -vf test.vp -x 100 -y 100`  -ffa -om test.oct  | more
>>>> 
>>>> Output of this command is like:
>>>> ...
>>>> floor
>>>> floor
>>>> floor
>>>> window
>>>> window
>>>> etc...
>>>> 
>>>> Now I want that, for example, each occurrence of "window" sends 3 "bright" RGBE primaries to stdout, and every other string sends 3 "dark" RGBE primaries to stdout. I can do this by writing a small program (instead of piping to 'more' as in the example above), but I wondered if there is a method using native Radiance tools to do it.   
>>>> 
>>>> In pseudo code (bold) I think about something like this (where 1 represents a value considered as white in the output, and 0 represents black) :
>>>> 
>>>> vwrays -ff -vf test.vp -x 100 -y 100 | rtrace `vwrays -d -vf test.vp -x 100 -y 100`  -ffa -om test.oct  | if (stdin == "window") fprintf(stdout, "1 1 1" ); else fprintf ( stdout, "0,0,0"); | ra_tiff - alpha.tif
>>>> 
>>>> So my questions are:
>>>> 1. how do I format the output of stdout as Radiance RGBE? 
>>>> 2. can I do this using native Radiance tools? 
>>>> 
>>>> Thanks for any hints. 
>>>> 
>>>> -Iebele
>>>> 
>>>>  
>>>> 
>>>> 
>>>> 
>>>> _______________________________________________
>>>> Radiance-general mailing list
>>>> Radiance-general at radiance-online.org
>>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>> _______________________________________________
>>> Radiance-general mailing list
>>> Radiance-general at radiance-online.org
>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>> 
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120224/0adf1b29/attachment.html>

From amcneil at lbl.gov  Fri Feb 24 15:18:08 2012
From: amcneil at lbl.gov (Andy McNeil)
Date: Fri, 24 Feb 2012 15:18:08 -0800
Subject: [Radiance-general] Generating alpha channels using vwrays and
	rtrace
In-Reply-To: <A366C96E-16D7-49C3-A781-FB12FCF9E757@lbl.gov>
References: <CAD_et2V0-_7c-CJkuOmVtReznQ_HYbr1F5iZOoTFmJnTHTuhpA@mail.gmail.com>
	<4F47E8C6.3000902@visarc.com>
	<E43A469A-DD3B-46C1-A274-8CCF024DD498@yahoo.it>
	<A366C96E-16D7-49C3-A781-FB12FCF9E757@lbl.gov>
Message-ID: <10A70AB5-2B76-43CE-8E35-DAA535B5D0B8@lbl.gov>

Oops! The resolution I gave to pvalue doesn't match the resolution in vwrays and rtrace.  I was testing a higher resolution so I could see detail in the image, but forgot to change it back to 100 after pasting into the email.  Here's the correct command:

vwrays -ff -vf test.vp -x 100 -y 100 | \
	rtrace `vwrays -d -vf test.vp -x 100 -y 100`  -ffa -om test.oct  | \
	awk '{if($1=="window") print 1.0; else print 0.0;}'  | \
	pvalue +x 100 -y 100 -h -da -b -r | \
	ra_tiff - alpha.tif

Also, you might be able to use rcalc in place of awk.  It depends on whether rcalc can compare strings in an if statement.  I don't know enough about rcalc to know if it's possible.

Andy


On Feb 24, 2012, at 2:25 PM, Andy McNeil wrote:

> I kinda like Iebele's method approach better than using black and white materials.  Using rtrace -om you can create alpha channels using the same octree that you use for a rendering.  And you can also create many alpha images for different materials with the same model.  It just seems less work than fussing with material files.
> 
> Iebele, the main thing you're missing is pvalue to convert the data stream to image format.  I also used awk for the if statement.  Here's a complete command:
> 
> vwrays -ff -vf test.vp -x 100 -y 100 | \
> 	rtrace `vwrays -d -vf test.vp -x 100 -y 100`  -ffa -om test.oct  | \
> 	awk '{if($1=="window") print 1.0; else print 0.0;}'  | \
> 	pvalue +x 500 -y 500 -h -da -b -r | \
> 	ra_tiff - alpha.tif
> 
> Andy
> 
> 
> 
> On Feb 24, 2012, at 1:29 PM, giulio antonutto wrote:
> 
>> yes, this was :-) 
>> (sorry missed your reply)
>> G
>> 
>> On 24 Feb 2012, at 19:45, Jack de Valpine wrote:
>> 
>>> Hi Iebele,
>>> 
>>> I have done a few different things to achieve this over the years. The one that come most readily to mind is to prep an alternate material file with a black (0 0 0) and white (1 1 1) material assigned as needed. This is one reason the "alias" material option can be quite handy when assigning materials to geometry! With the correct black/white materials this can be rendered out very quickly with -ab 0 and -av 1 1 1.
>>> 
>>> I have also done something where (with scripting) you can specify a material name that then get white and everything else gets black. It has been a while so I do not quite remember off hand, but I think that this can also be setup as a big pipe in radiance and using radiance's functional language.
>>> 
>>> The first way is pretty easy and if you need to do lots of it then it is possible to script the switching of material assignments. One challenge though is that if you use instances (frozen octrees) you need to remember to assign a material accordingly. Another challenge is thinking about transparencies that might need to be captured in the process...
>>> 
>>> Regards,
>>> 
>>> -Jack
>>> -- 
>>> # Jack de Valpine
>>> # president
>>> #
>>> # visarc incorporated
>>> # http://www.visarc.com
>>> #
>>> # channeling technology for superior design and construction
>>> 
>>> On 2/24/2012 2:24 PM, Iebele Abel wrote:
>>>> 
>>>> Hi group, 
>>>> 
>>>> Whilst finding a method to create alpha channels for my rendered image, I'm playing with vwrays and rtrace. What I intend is to create an image in which 
>>>> geometry modified by a particular modifier  is rendered white, whilst the geometry modified otherwise is rendered black. The command below comes close to this, it has as output the modifiers for each surface hit:
>>>> 
>>>> vwrays -ff -vf test.vp -x 100 -y 100 | rtrace `vwrays -d -vf test.vp -x 100 -y 100`  -ffa -om test.oct  | more
>>>> 
>>>> Output of this command is like:
>>>> ...
>>>> floor
>>>> floor
>>>> floor
>>>> window
>>>> window
>>>> etc...
>>>> 
>>>> Now I want that, for example, each occurrence of "window" sends 3 "bright" RGBE primaries to stdout, and every other string sends 3 "dark" RGBE primaries to stdout. I can do this by writing a small program (instead of piping to 'more' as in the example above), but I wondered if there is a method using native Radiance tools to do it.   
>>>> 
>>>> In pseudo code (bold) I think about something like this (where 1 represents a value considered as white in the output, and 0 represents black) :
>>>> 
>>>> vwrays -ff -vf test.vp -x 100 -y 100 | rtrace `vwrays -d -vf test.vp -x 100 -y 100`  -ffa -om test.oct  | if (stdin == "window") fprintf(stdout, "1 1 1" ); else fprintf ( stdout, "0,0,0"); | ra_tiff - alpha.tif
>>>> 
>>>> So my questions are:
>>>> 1. how do I format the output of stdout as Radiance RGBE? 
>>>> 2. can I do this using native Radiance tools? 
>>>> 
>>>> Thanks for any hints. 
>>>> 
>>>> -Iebele
>>>> 
>>>>  
>>>> 
>>>> 
>>>> 
>>>> _______________________________________________
>>>> Radiance-general mailing list
>>>> Radiance-general at radiance-online.org
>>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>> _______________________________________________
>>> Radiance-general mailing list
>>> Radiance-general at radiance-online.org
>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>> 
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
> 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120224/daabb6c0/attachment-0001.html>

From iabel at iebele.nl  Sat Feb 25 02:41:24 2012
From: iabel at iebele.nl (Iebele Abel)
Date: Sat, 25 Feb 2012 12:41:24 +0200
Subject: [Radiance-general] Generating alpha channels using vwrays and
	rtrace
In-Reply-To: <10A70AB5-2B76-43CE-8E35-DAA535B5D0B8@lbl.gov>
References: <CAD_et2V0-_7c-CJkuOmVtReznQ_HYbr1F5iZOoTFmJnTHTuhpA@mail.gmail.com>
	<4F47E8C6.3000902@visarc.com>
	<E43A469A-DD3B-46C1-A274-8CCF024DD498@yahoo.it>
	<A366C96E-16D7-49C3-A781-FB12FCF9E757@lbl.gov>
	<10A70AB5-2B76-43CE-8E35-DAA535B5D0B8@lbl.gov>
Message-ID: <CAD_et2WuSADPX3i2HoQac8jw7WrgcZbbAw4AKUR8QhN0QbZDUQ@mail.gmail.com>

Well, thanks a lot folks, for your comments on this. Jacks suggestion has
been used over years, but recently we started using tmeshes, and because of
that parts of the octree is frozen. So we had to find some other solution,
without messing around with multiple material files for each tmesh. I've
tried both Gregs and Andys suggestions and they both work really smooth.
When running the command in a bash script I found awk performing about
25-30% faster as sed. See below how the commands are put in bash (not
checking argument values etc.) and their timed outputs pasted thereafter.

There remain some issues in the script when rendering non-square images
(like 1920x1080 HD), but that will be worked out. All together this has all
been very helpful,

Cheers,

Iebele


--- ralpha script  ---

#!/bin/bash

if ( ! getopts ":v:m:x:y:o:" opt ); then
        echo "Usage: `basename $0` -v viewfile -m modifier -x xres -y yres
-o octree" >&2
        exit
fi

while getopts "v:m:x:y:o:" opt; do
        case $opt in
        v)      viewfile=$OPTARG
                ;;
        m)      modifier=$OPTARG
                ;;
        x)      xres=$OPTARG
                ;;
        y)      yres=$OPTARG
                ;;
        o)      octree=$OPTARG
                ;;
        esac
done


echo "using awk" >&2
time vwrays -ff -vf $viewfile -x $xres -y $yres | \
        rtrace `vwrays -d -vf $viewfile -x $xres -y $yres`  -ffa -om
$octree  | \
        awk -v v1=$modifier '{if( $1 == v1 ) print 1.0; else print 0.0;}'
 | \
        pvalue +x $xres -y $yres -h -da -b -r

echo "using sed" >&2
time vwrays -ff -vf $viewfile  -pa 0 -x $xres -y $yres | \
        rtrace -h -x $xres -y $yres  -ffa -om $octree  | \
        sed -e "s/^$modifier/1/" -e "s/^[^1].*$/0/" | \
        pvalue -h -r -b -d -x $xres -y $yres


--- output --

./ralpha -v hermitage_brug01.vp -m water -x 16000 -y 16000 -o export.oct >
/dev/null

using awk
real    5m21.743s
user    8m51.873s
sys     0m7.116s

using sed
real    7m55.060s
user    13m41.563s
sys     0m5.199s






2012/2/25 Andy McNeil <amcneil at lbl.gov>

> Oops! The resolution I gave to pvalue doesn't match the resolution in
> vwrays and rtrace.  I was testing a higher resolution so I could see detail
> in the image, but forgot to change it back to 100 after pasting into the
> email.  Here's the correct command:
>
> vwrays -ff -vf test.vp -x 100 -y 100 | \
> rtrace `vwrays -d -vf test.vp -x 100 -y 100`  -ffa -om test.oct  | \
> awk '{if($1=="window") print 1.0; else print 0.0;}'  | \
> pvalue +x 100 -y 100 -h -da -b -r | \
> ra_tiff - alpha.tif
>
> Also, you might be able to use rcalc in place of awk.  It depends on
> whether rcalc can compare strings in an if statement.  I don't know enough
> about rcalc to know if it's possible.
>
> Andy
>
>
> On Feb 24, 2012, at 2:25 PM, Andy McNeil wrote:
>
> I kinda like Iebele's method approach better than using black and white
> materials.  Using rtrace -om you can create alpha channels using the same
> octree that you use for a rendering.  And you can also create many alpha
> images for different materials with the same model.  It just seems less
> work than fussing with material files.
>
> Iebele, the main thing you're missing is pvalue to convert the data stream
> to image format.  I also used awk for the if statement.  Here's a complete
> command:
>
> vwrays -ff -vf test.vp -x 100 -y 100 | \
> rtrace `vwrays -d -vf test.vp -x 100 -y 100`  -ffa -om test.oct  | \
> * awk '{if($1=="window") print 1.0; else print 0.0;}'  *| \
> * pvalue +x 500 -y 500 -h -da -b -r *| \
> ra_tiff - alpha.tif
>
> Andy
>
>
>
> On Feb 24, 2012, at 1:29 PM, giulio antonutto wrote:
>
> yes, this was :-)
> (sorry missed your reply)
> G
>
> On 24 Feb 2012, at 19:45, Jack de Valpine wrote:
>
>  Hi Iebele,
>
> I have done a few different things to achieve this over the years. The one
> that come most readily to mind is to prep an alternate material file with a
> black (0 0 0) and white (1 1 1) material assigned as needed. This is one
> reason the "alias" material option can be quite handy when assigning
> materials to geometry! With the correct black/white materials this can be
> rendered out very quickly with -ab 0 and -av 1 1 1.
>
> I have also done something where (with scripting) you can specify a
> material name that then get white and everything else gets black. It has
> been a while so I do not quite remember off hand, but I think that this can
> also be setup as a big pipe in radiance and using radiance's functional
> language.
>
> The first way is pretty easy and if you need to do lots of it then it is
> possible to script the switching of material assignments. One challenge
> though is that if you use instances (frozen octrees) you need to remember
> to assign a material accordingly. Another challenge is thinking about
> transparencies that might need to be captured in the process...
>
> Regards,
>
> -Jack
>
> --
> # Jack de Valpine
> # president
> #
> # visarc incorporated
> # http://www.visarc.com
> #
> # channeling technology for superior design and construction
>
>
> On 2/24/2012 2:24 PM, Iebele Abel wrote:
>
> Hi group,
>
>  Whilst finding a method to create alpha channels for my rendered image,
> I'm playing with vwrays and rtrace. What I intend is to create an image in
> which
> geometry modified by a particular modifier  is rendered white, whilst the
> geometry modified otherwise is rendered black. The command below comes
> close to this, it has as output the modifiers for each surface hit:
>
>  vwrays -ff -vf test.vp -x 100 -y 100 | rtrace `vwrays -d -vf test.vp -x
> 100 -y 100`  -ffa -om test.oct  | more
>
>  Output of this command is like:
> ...
> floor
> floor
> floor
> window
> window
> etc...
>
>  Now I want that, for example, each occurrence of "window" sends 3
> "bright" RGBE primaries to stdout, and every other string sends 3 "dark"
> RGBE primaries to stdout. I can do this by writing a small program (instead
> of piping to 'more' as in the example above), but I wondered if there is a
> method using native Radiance tools to do it.
>
>  In pseudo code (bold) I think about something like this (where 1
> represents a value considered as white in the output, and 0 represents
> black) :
>
>  vwrays -ff -vf test.vp -x 100 -y 100 | rtrace `vwrays -d -vf test.vp -x
> 100 -y 100`  -ffa -om test.oct  | *if (stdin == "window") fprintf(stdout,
> "1 1 1" ); else fprintf ( stdout, "0,0,0"); *| ra_tiff - alpha.tif
>
>  So my questions are:
> 1. how do I format the output of stdout as Radiance RGBE?
> 2. can I do this using native Radiance tools?
>
>  Thanks for any hints.
>
>  -Iebele
>
>
>
>
>
> _______________________________________________
> Radiance-general mailing listRadiance-general at radiance-online.orghttp://www.radiance-online.org/mailman/listinfo/radiance-general
>
>  _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120225/ca57056f/attachment.html>

From jedev at visarc.com  Sat Feb 25 06:23:33 2012
From: jedev at visarc.com (Jack de Valpine)
Date: Sat, 25 Feb 2012 09:23:33 -0500
Subject: [Radiance-general] Generating alpha channels using vwrays and
 rtrace
In-Reply-To: <CAD_et2WuSADPX3i2HoQac8jw7WrgcZbbAw4AKUR8QhN0QbZDUQ@mail.gmail.com>
References: <CAD_et2V0-_7c-CJkuOmVtReznQ_HYbr1F5iZOoTFmJnTHTuhpA@mail.gmail.com>
	<4F47E8C6.3000902@visarc.com>
	<E43A469A-DD3B-46C1-A274-8CCF024DD498@yahoo.it>
	<A366C96E-16D7-49C3-A781-FB12FCF9E757@lbl.gov>
	<10A70AB5-2B76-43CE-8E35-DAA535B5D0B8@lbl.gov>
	<CAD_et2WuSADPX3i2HoQac8jw7WrgcZbbAw4AKUR8QhN0QbZDUQ@mail.gmail.com>
Message-ID: <4F48EEE5.3070802@visarc.com>

Hi Iebele,

I understand about the tmeshes... I also concur with Andy (and my second 
suggestion) which is in line with what you are doing.  I think what 
would be nice to figure out is if this could all be done using native 
radiance tools (eg NOT sed/awk) by including a call to rcalc. It has 
been too long so I just do not remember if there is a way to get rcalc 
to do any type of string comparison. If there is not this could be a 
nice feature as this would allow great flexibility processing other 
scene data. Note my desire for doing it all natively in radiance is more 
from elegance than anything else.

Another neat feature would be if there was a way to generate an "alpha" 
file in process of the rendering, where each pixel location also 
includes the material name. This would be sort of like the option to 
include z-buffer data per pixel. I suppose this starts to generate huge 
files though. And may only have utility for a small subset of users.

Regards,

-Jack

On 2/25/2012 5:41 AM, Iebele Abel wrote:
> Well, thanks a lot folks, for your comments on this. Jacks suggestion 
> has been used over years, but recently we started using tmeshes, and 
> because of that parts of the octree is frozen. So we had to find some 
> other solution, without messing around with multiple material files 
> for each tmesh. I've tried both Gregs and Andys suggestions and they 
> both work really smooth. When running the command in a bash script I 
> found awk performing about 25-30% faster as sed. See below how the 
> commands are put in bash (not checking argument values etc.) and their 
> timed outputs pasted thereafter.
>
> There remain some issues in the script when rendering non-square 
> images (like 1920x1080 HD), but that will be worked out. All together 
> this has all been very helpful,
>
> Cheers,
> Iebele
>
>
> --- ralpha script  ---
>
> #!/bin/bash
>
> if ( ! getopts ":v:m:x:y:o:" opt ); then
>         echo "Usage: `basename $0` -v viewfile -m modifier -x xres -y 
> yres -o octree" >&2
>         exit
> fi
>
> while getopts "v:m:x:y:o:" opt; do
>         case $opt in
>         v)      viewfile=$OPTARG
>                 ;;
>         m)      modifier=$OPTARG
>                 ;;
>         x)      xres=$OPTARG
>                 ;;
>         y)      yres=$OPTARG
>                 ;;
>         o)      octree=$OPTARG
>                 ;;
>         esac
> done
>
>
> echo "using awk" >&2
> time vwrays -ff -vf $viewfile -x $xres -y $yres | \
>         rtrace `vwrays -d -vf $viewfile -x $xres -y $yres`  -ffa -om 
> $octree  | \
>         awk -v v1=$modifier '{if( $1 == v1 ) print 1.0; else print 
> 0.0;}'  | \
>         pvalue +x $xres -y $yres -h -da -b -r
>
> echo "using sed" >&2
> time vwrays -ff -vf $viewfile  -pa 0 -x $xres -y $yres | \
>         rtrace -h -x $xres -y $yres  -ffa -om $octree  | \
>         sed -e "s/^$modifier/1/" -e "s/^[^1].*$/0/" | \
>         pvalue -h -r -b -d -x $xres -y $yres
>
>
> --- output --
>
> ./ralpha -v hermitage_brug01.vp -m water -x 16000 -y 16000 -o 
> export.oct > /dev/null
>
> using awk
> real    5m21.743s
> user    8m51.873s
> sys     0m7.116s
>
> using sed
> real    7m55.060s
> user    13m41.563s
> sys     0m5.199s
>
>
>
>
>
>
> 2012/2/25 Andy McNeil <amcneil at lbl.gov <mailto:amcneil at lbl.gov>>
>
>     Oops! The resolution I gave to pvalue doesn't match the resolution
>     in vwrays and rtrace.  I was testing a higher resolution so I
>     could see detail in the image, but forgot to change it back to 100
>     after pasting into the email.  Here's the correct command:
>
>     vwrays -ff -vf test.vp -x 100 -y 100 | \
>     rtrace `vwrays -d -vf test.vp -x 100 -y 100`  -ffa -om test.oct  | \
>     awk '{if($1=="window") print 1.0; else print 0.0;}'  | \
>     pvalue +x 100 -y 100 -h -da -b -r | \
>     ra_tiff - alpha.tif
>
>     Also, you might be able to use rcalc in place of awk.  It depends
>     on whether rcalc can compare strings in an if statement.  I don't
>     know enough about rcalc to know if it's possible.
>
>     Andy
>
>
>     On Feb 24, 2012, at 2:25 PM, Andy McNeil wrote:
>
>>     I kinda like Iebele's method approach better than using black and
>>     white materials.  Using rtrace -om you can create alpha channels
>>     using the same octree that you use for a rendering.  And you can
>>     also create many alpha images for different materials with the
>>     same model.  It just seems less work than fussing with material
>>     files.
>>
>>     Iebele, the main thing you're missing is pvalue to convert the
>>     data stream to image format.  I also used awk for the if
>>     statement.  Here's a complete command:
>>
>>     vwrays -ff -vf test.vp -x 100 -y 100 | \
>>     rtrace `vwrays -d -vf test.vp -x 100 -y 100`  -ffa -om test.oct  | \
>>     *awk '{if($1=="window") print 1.0; else print 0.0;}' *| \
>>     *pvalue +x 500 -y 500 -h -da -b -r *| \
>>     ra_tiff - alpha.tif
>>
>>     Andy
>>
>>
>>
>>     On Feb 24, 2012, at 1:29 PM, giulio antonutto wrote:
>>
>>>     yes, this was :-)
>>>     (sorry missed your reply)
>>>     G
>>>
>>>     On 24 Feb 2012, at 19:45, Jack de Valpine wrote:
>>>
>>>>     Hi Iebele,
>>>>
>>>>     I have done a few different things to achieve this over the
>>>>     years. The one that come most readily to mind is to prep an
>>>>     alternate material file with a black (0 0 0) and white (1 1 1)
>>>>     material assigned as needed. This is one reason the "alias"
>>>>     material option can be quite handy when assigning materials to
>>>>     geometry! With the correct black/white materials this can be
>>>>     rendered out very quickly with -ab 0 and -av 1 1 1.
>>>>
>>>>     I have also done something where (with scripting) you can
>>>>     specify a material name that then get white and everything else
>>>>     gets black. It has been a while so I do not quite remember off
>>>>     hand, but I think that this can also be setup as a big pipe in
>>>>     radiance and using radiance's functional language.
>>>>
>>>>     The first way is pretty easy and if you need to do lots of it
>>>>     then it is possible to script the switching of material
>>>>     assignments. One challenge though is that if you use instances
>>>>     (frozen octrees) you need to remember to assign a material
>>>>     accordingly. Another challenge is thinking about transparencies
>>>>     that might need to be captured in the process...
>>>>
>>>>     Regards,
>>>>
>>>>     -Jack
>>>>     -- 
>>>>     # Jack de Valpine
>>>>     # president
>>>>     #
>>>>     # visarc incorporated
>>>>     #http://www.visarc.com  <http://www.visarc.com/>
>>>>     #
>>>>     # channeling technology for superior design and construction
>>>>
>>>>     On 2/24/2012 2:24 PM, Iebele Abel wrote:
>>>>>     Hi group,
>>>>>
>>>>>     Whilst finding a method to create alpha channels for my
>>>>>     rendered image, I'm playing with vwrays and rtrace. What I
>>>>>     intend is to create an image in which
>>>>>     geometry modified by a particular modifier  is rendered white,
>>>>>     whilst the geometry modified otherwise is rendered black. The
>>>>>     command below comes close to this, it has as output the
>>>>>     modifiers for each surface hit:
>>>>>
>>>>>     vwrays -ff -vf test.vp -x 100 -y 100 | rtrace `vwrays -d -vf
>>>>>     test.vp -x 100 -y 100`  -ffa -om test.oct  | more
>>>>>
>>>>>     Output of this command is like:
>>>>>     ...
>>>>>     floor
>>>>>     floor
>>>>>     floor
>>>>>     window
>>>>>     window
>>>>>     etc...
>>>>>
>>>>>     Now I want that, for example, each occurrence of "window"
>>>>>     sends 3 "bright" RGBE primaries to stdout, and every other
>>>>>     string sends 3 "dark" RGBE primaries to stdout. I can do this
>>>>>     by writing a small program (instead of piping to 'more' as in
>>>>>     the example above), but I wondered if there is a method using
>>>>>     native Radiance tools to do it.
>>>>>
>>>>>     In pseudo code (bold) I think about something like this (where
>>>>>     1 represents a value considered as white in the output, and 0
>>>>>     represents black) :
>>>>>
>>>>>     vwrays -ff -vf test.vp -x 100 -y 100 | rtrace `vwrays -d -vf
>>>>>     test.vp -x 100 -y 100`  -ffa -om test.oct  | *if (stdin ==
>>>>>     "window") fprintf(stdout, "1 1 1" ); else fprintf ( stdout,
>>>>>     "0,0,0"); *| ra_tiff - alpha.tif
>>>>>
>>>>>     So my questions are:
>>>>>     1. how do I format the output of stdout as Radiance RGBE?
>>>>>     2. can I do this using native Radiance tools?
>>>>>
>>>>>     Thanks for any hints.
>>>>>
>>>>>     -Iebele
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>     _______________________________________________
>>>>>     Radiance-general mailing list
>>>>>     Radiance-general at radiance-online.org  <mailto:Radiance-general at radiance-online.org>
>>>>>     http://www.radiance-online.org/mailman/listinfo/radiance-general
>>>>     _______________________________________________
>>>>     Radiance-general mailing list
>>>>     Radiance-general at radiance-online.org
>>>>     <mailto:Radiance-general at radiance-online.org>
>>>>     http://www.radiance-online.org/mailman/listinfo/radiance-general
>>>
>>>     _______________________________________________
>>>     Radiance-general mailing list
>>>     Radiance-general at radiance-online.org
>>>     <mailto:Radiance-general at radiance-online.org>
>>>     http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>
>
>     _______________________________________________
>     Radiance-general mailing list
>     Radiance-general at radiance-online.org
>     <mailto:Radiance-general at radiance-online.org>
>     http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120225/44b4f797/attachment-0001.html>

From gregoryjward at gmail.com  Sat Feb 25 09:28:26 2012
From: gregoryjward at gmail.com (Greg Ward)
Date: Sat, 25 Feb 2012 09:28:26 -0800
Subject: [Radiance-general] Generating alpha channels using vwrays and
	rtrace
In-Reply-To: <4F48EEE5.3070802@visarc.com>
References: <CAD_et2V0-_7c-CJkuOmVtReznQ_HYbr1F5iZOoTFmJnTHTuhpA@mail.gmail.com>
	<4F47E8C6.3000902@visarc.com>
	<E43A469A-DD3B-46C1-A274-8CCF024DD498@yahoo.it>
	<A366C96E-16D7-49C3-A781-FB12FCF9E757@lbl.gov>
	<10A70AB5-2B76-43CE-8E35-DAA535B5D0B8@lbl.gov>
	<CAD_et2WuSADPX3i2HoQac8jw7WrgcZbbAw4AKUR8QhN0QbZDUQ@mail.gmail.com>
	<4F48EEE5.3070802@visarc.com>
Message-ID: <044591CE-E720-47C8-B018-3F4525E70DB9@lmi.net>

Hi Jack,

It would be nice if rcalc were smart about strings, but all it can really do is pass them from one place in the input to another place in the output.  It never looks at them, really, and none of the operations supports strings.

Regarding your second idea of including the material along with the value, you can do this with rcalc as written.  You would have to go for an ascii output, like so:

vwrays -ff [args] | rtrace -h `vwrays -d [args]` -ffa -omv [rargs] octree | sed -f alphas.txt > alphaval.txt

The file "alphas.txt" would contain something like:

s/^mat1	/0.35	/
s/^mat2	/1.0	/
s/^mat3	/0.0	/
s/^mat4	/0.75	/
[etc.]

This would replace each material with an associated alpha value.  From there, you would have to convert to 16-bit RGBA or something if you wanted to load it into Photoshop, and I think you would need a C program for that.  Alternately, you could split the file using rcalc and pvalue like so:

rcalc -e '$1=$1' -of alphaval.txt | pvalue -h -y $YRES +x $XRES -df -b > alpha.hdr
rcalc -e '$1=$2;$2=$3;$3=$4' -of alphaval.txt | pvalue -h -y $YRES +x $XRES -df > image.hdr

Photoshop can load, convert, and combine HDR files, though you probably have to change from 32-bit to 16-bit mode when you do.  Just make sure not to use any of the fancy tone-mappers when you do....

I'm not sure the above would be any faster than Iebele's current method, but it would avoid separate rtrace steps.  This permits you to use the -pj option of vwrays safely, as you won't risk sampling one object in one run and another object in another.  (Pseudorandom sequences should guarantee this in any case, but I'm not sure they do on all systems.)

Cheers,
-Greg

> From: Jack de Valpine <jedev at visarc.com>
> Date: February 25, 2012 6:23:33 AM PST
> 
> Hi Iebele,
> 
> I understand about the tmeshes... I also concur with Andy (and my second suggestion) which is in line with what you are doing.  I think what would be nice to figure out is if this could all be done using native radiance tools (eg NOT sed/awk) by including a call to rcalc. It has been too long so I just do not remember if there is a way to get rcalc to do any type of string comparison. If there is not this could be a nice feature as this would allow great flexibility processing other scene data. Note my desire for doing it all natively in radiance is more from elegance than anything else.
> 
> Another neat feature would be if there was a way to generate an "alpha" file in process of the rendering, where each pixel location also includes the material name. This would be sort of like the option to include z-buffer data per pixel. I suppose this starts to generate huge files though. And may only have utility for a small subset of users.
> 
> Regards,
> 
> -Jack


From jedev at visarc.com  Sat Feb 25 11:08:31 2012
From: jedev at visarc.com (Jack de Valpine)
Date: Sat, 25 Feb 2012 14:08:31 -0500
Subject: [Radiance-general] Generating alpha channels using vwrays and
 rtrace
In-Reply-To: <044591CE-E720-47C8-B018-3F4525E70DB9@lmi.net>
References: <CAD_et2V0-_7c-CJkuOmVtReznQ_HYbr1F5iZOoTFmJnTHTuhpA@mail.gmail.com>
	<4F47E8C6.3000902@visarc.com>
	<E43A469A-DD3B-46C1-A274-8CCF024DD498@yahoo.it>
	<A366C96E-16D7-49C3-A781-FB12FCF9E757@lbl.gov>
	<10A70AB5-2B76-43CE-8E35-DAA535B5D0B8@lbl.gov>
	<CAD_et2WuSADPX3i2HoQac8jw7WrgcZbbAw4AKUR8QhN0QbZDUQ@mail.gmail.com>
	<4F48EEE5.3070802@visarc.com>
	<044591CE-E720-47C8-B018-3F4525E70DB9@lmi.net>
Message-ID: <4F4931AF.2080503@visarc.com>

Hey Greg,

Many thank! So in this method alphas.txt is a file that you generate by 
hand of material names and values using regex notation?

-Jack

On 2/25/2012 12:28 PM, Greg Ward wrote:
> Hi Jack,
>
> It would be nice if rcalc were smart about strings, but all it can really do is pass them from one place in the input to another place in the output.  It never looks at them, really, and none of the operations supports strings.
>
> Regarding your second idea of including the material along with the value, you can do this with rcalc as written.  You would have to go for an ascii output, like so:
>
> vwrays -ff [args] | rtrace -h `vwrays -d [args]` -ffa -omv [rargs] octree | sed -f alphas.txt>  alphaval.txt
>
> The file "alphas.txt" would contain something like:
>
> s/^mat1	/0.35	/
> s/^mat2	/1.0	/
> s/^mat3	/0.0	/
> s/^mat4	/0.75	/
> [etc.]
>
> This would replace each material with an associated alpha value.  From there, you would have to convert to 16-bit RGBA or something if you wanted to load it into Photoshop, and I think you would need a C program for that.  Alternately, you could split the file using rcalc and pvalue like so:
>
> rcalc -e '$1=$1' -of alphaval.txt | pvalue -h -y $YRES +x $XRES -df -b>  alpha.hdr
> rcalc -e '$1=$2;$2=$3;$3=$4' -of alphaval.txt | pvalue -h -y $YRES +x $XRES -df>  image.hdr
>
> Photoshop can load, convert, and combine HDR files, though you probably have to change from 32-bit to 16-bit mode when you do.  Just make sure not to use any of the fancy tone-mappers when you do....
>
> I'm not sure the above would be any faster than Iebele's current method, but it would avoid separate rtrace steps.  This permits you to use the -pj option of vwrays safely, as you won't risk sampling one object in one run and another object in another.  (Pseudorandom sequences should guarantee this in any case, but I'm not sure they do on all systems.)
>
> Cheers,
> -Greg
>
>> From: Jack de Valpine<jedev at visarc.com>
>> Date: February 25, 2012 6:23:33 AM PST
>>
>> Hi Iebele,
>>
>> I understand about the tmeshes... I also concur with Andy (and my second suggestion) which is in line with what you are doing.  I think what would be nice to figure out is if this could all be done using native radiance tools (eg NOT sed/awk) by including a call to rcalc. It has been too long so I just do not remember if there is a way to get rcalc to do any type of string comparison. If there is not this could be a nice feature as this would allow great flexibility processing other scene data. Note my desire for doing it all natively in radiance is more from elegance than anything else.
>>
>> Another neat feature would be if there was a way to generate an "alpha" file in process of the rendering, where each pixel location also includes the material name. This would be sort of like the option to include z-buffer data per pixel. I suppose this starts to generate huge files though. And may only have utility for a small subset of users.
>>
>> Regards,
>>
>> -Jack
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general


From gregoryjward at gmail.com  Sat Feb 25 16:57:05 2012
From: gregoryjward at gmail.com (Greg Ward)
Date: Sat, 25 Feb 2012 16:57:05 -0800
Subject: [Radiance-general] Generating alpha channels using vwrays and
	rtrace
In-Reply-To: <4F4931AF.2080503@visarc.com>
References: <CAD_et2V0-_7c-CJkuOmVtReznQ_HYbr1F5iZOoTFmJnTHTuhpA@mail.gmail.com>
	<4F47E8C6.3000902@visarc.com>
	<E43A469A-DD3B-46C1-A274-8CCF024DD498@yahoo.it>
	<A366C96E-16D7-49C3-A781-FB12FCF9E757@lbl.gov>
	<10A70AB5-2B76-43CE-8E35-DAA535B5D0B8@lbl.gov>
	<CAD_et2WuSADPX3i2HoQac8jw7WrgcZbbAw4AKUR8QhN0QbZDUQ@mail.gmail.com>
	<4F48EEE5.3070802@visarc.com>
	<044591CE-E720-47C8-B018-3F4525E70DB9@lmi.net>
	<4F4931AF.2080503@visarc.com>
Message-ID: <DFDA6844-C21D-4A00-A6D6-D40DC82D1683@lmi.net>

That's the general idea.  I suppose you could try to generate it automatically.  You could also have a final substitution that matches anything non-numeric as a catch-all for materials you don't name in a regex.  E.g:

s/^mat1	/0.35	/
s/^mat2	/1.0	/
s/^mat3	/0.0	/
s/^mat4	/0.75	/
s/^[^.0-9][^	]*	/0.0	/

Note that what appear to be spaces above are actually tabs, including the "[^	]" bit in the last line (very important).

Make sense?
-Greg

> From: Jack de Valpine <jedev at visarc.com>
> Date: February 25, 2012 11:08:31 AM PST
> 
> Hey Greg,
> 
> Many thank! So in this method alphas.txt is a file that you generate by hand of material names and values using regex notation?
> 
> -Jack
> 
> On 2/25/2012 12:28 PM, Greg Ward wrote:
>> Hi Jack,
>> 
>> It would be nice if rcalc were smart about strings, but all it can really do is pass them from one place in the input to another place in the output.  It never looks at them, really, and none of the operations supports strings.
>> 
>> Regarding your second idea of including the material along with the value, you can do this with rcalc as written.  You would have to go for an ascii output, like so:
>> 
>> vwrays -ff [args] | rtrace -h `vwrays -d [args]` -ffa -omv [rargs] octree | sed -f alphas.txt>  alphaval.txt
>> 
>> The file "alphas.txt" would contain something like:
>> 
>> s/^mat1	/0.35	/
>> s/^mat2	/1.0	/
>> s/^mat3	/0.0	/
>> s/^mat4	/0.75	/
>> [etc.]
>> 
>> This would replace each material with an associated alpha value.  From there, you would have to convert to 16-bit RGBA or something if you wanted to load it into Photoshop, and I think you would need a C program for that.  Alternately, you could split the file using rcalc and pvalue like so:
>> 
>> rcalc -e '$1=$1' -of alphaval.txt | pvalue -h -y $YRES +x $XRES -df -b>  alpha.hdr
>> rcalc -e '$1=$2;$2=$3;$3=$4' -of alphaval.txt | pvalue -h -y $YRES +x $XRES -df>  image.hdr
>> 
>> Photoshop can load, convert, and combine HDR files, though you probably have to change from 32-bit to 16-bit mode when you do.  Just make sure not to use any of the fancy tone-mappers when you do....
>> 
>> I'm not sure the above would be any faster than Iebele's current method, but it would avoid separate rtrace steps.  This permits you to use the -pj option of vwrays safely, as you won't risk sampling one object in one run and another object in another.  (Pseudorandom sequences should guarantee this in any case, but I'm not sure they do on all systems.)
>> 
>> Cheers,
>> -Greg


From RFritz at lbl.gov  Mon Feb 27 12:54:38 2012
From: RFritz at lbl.gov (Randolph M. Fritz)
Date: Mon, 27 Feb 2012 12:54:38 -0800
Subject: [Radiance-general] Plotting a large number of simulations
Message-ID: <jigqid$a4o$1@dough.gmane.org>

OK?so we have our huge number of simulation cases for our educational project.

I think I want to organize the simulations as follows:
1. Do a mkillum calculation for the glazing that includes the site model.
2. Use BDSF for the interior blinds in their several positions
3. Other than that, straight Radiance simulation.

Does this seem realistic?  Or am I off the deep end somewhere?
-- 
Randolph M. Fritz




From tim.v2.0 at gmail.com  Mon Feb 27 14:46:33 2012
From: tim.v2.0 at gmail.com (Tim Perry)
Date: Mon, 27 Feb 2012 14:46:33 -0800
Subject: [Radiance-general] Plotting a large number of simulations
In-Reply-To: <jigqid$a4o$1@dough.gmane.org>
References: <jigqid$a4o$1@dough.gmane.org>
Message-ID: <CAFVgASX+85N=PXAVMimK=jz08TwpUh76MYpO6Sa=SNAumEGhvg@mail.gmail.com>

This seems reasonable. I assume you have access to sufficient computing
resources. If not, read on....

If you need cheap resources recommend using Amazon's EC2 SPOT instances.
The SPOT instances are not guaranteed. However, they are cheap: you can get
the equivalent of a dual-core Intel Core 2 Duo for about 6 cents an hour
(high-CPU medium instance). You can check the prices half way down this
page: http://aws.amazon.com/ec2/spot-instances/. You can buy up to 100
virtual machines in a region. The list of regions is constantly expanding,
but I used Virginia, N. California, Ireland and Tokyo simultaneously at one
point to run 800 parallel simulations for HMG's PIER work. The cost was
reasonable and the machines are easy to start up and shut down.  I would
recommend using the "Simple Queue Service" to keep track of which model
need to be run -- it is easier to have each machine poll the queue than to
try and schedule jobs before hand and deal with the (potentially) disparate
simulation times.

Out of curiosity, how many runs are you thinking of? Have you timed each
step?

Good luck and let me know if this was helpful.

Sincerely,
Tim



On Mon, Feb 27, 2012 at 12:54 PM, Randolph M. Fritz <RFritz at lbl.gov> wrote:

> OK?so we have our huge number of simulation cases for our educational
> project.
>
> I think I want to organize the simulations as follows:
> 1. Do a mkillum calculation for the glazing that includes the site model.
> 2. Use BDSF for the interior blinds in their several positions
> 3. Other than that, straight Radiance simulation.
>
> Does this seem realistic?  Or am I off the deep end somewhere?
> --
> Randolph M. Fritz
>
>
>
> ______________________________**_________________
> Radiance-general mailing list
> Radiance-general at radiance-**online.org<Radiance-general at radiance-online.org>
> http://www.radiance-online.**org/mailman/listinfo/radiance-**general<http://www.radiance-online.org/mailman/listinfo/radiance-general>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120227/90364132/attachment.html>

From RFritz at lbl.gov  Mon Feb 27 16:28:03 2012
From: RFritz at lbl.gov (Randolph M. Fritz)
Date: Mon, 27 Feb 2012 16:28:03 -0800
Subject: [Radiance-general] Plotting a large number of simulations
References: <jigqid$a4o$1@dough.gmane.org>
	<CAFVgASX+85N=PXAVMimK=jz08TwpUh76MYpO6Sa=SNAumEGhvg@mail.gmail.com>
Message-ID: <jih72i$7du$1@dough.gmane.org>

On 2012-02-27 22:46:33 +0000, Tim Perry said:

> This seems reasonable. I assume you have access to sufficient computing 
> resources. If not, read on....

Thanks.  We do--the Labs has a cluster, and we are one of its small 
users--, but this is interesting even so.

> If you need cheap resources recommend using Amazon's EC2 SPOT 
> instances. The SPOT instances are not?guaranteed.  [?]

> Out of?curiosity, how many runs are you thinking of? Have you timed each step??

In the thousands.  No, not timing them yet.  I am guessing in the hour 
or so for the final simulations; I have no idea yet for the mkillum and 
genbsdf runs.

> Good luck and let me know if this was helpful.

Thanks!

Randolph




From gregoryjward at gmail.com  Mon Feb 27 16:43:09 2012
From: gregoryjward at gmail.com (Greg Ward)
Date: Mon, 27 Feb 2012 16:43:09 -0800
Subject: [Radiance-general] Plotting a large number of simulations
In-Reply-To: <jigqid$a4o$1@dough.gmane.org>
References: <jigqid$a4o$1@dough.gmane.org>
Message-ID: <8FA8C89B-E175-4594-9A1E-7A5A6EBA9A7A@lmi.net>

Hi Randolph,

Is there any reason in particular for doing it this way?  Having a BSDF surface in front of an illum has a number of disadvantages, the main one being that the room cannot sample the illum directly.  You would be better off doing a 3-phase calculation where the exterior-to-sky matrix were computed once using rtcontrib, and the interior-to-image matrix in another precalculation.  Then, your thousands of runs are just genskyvec and dctimestep calculations that go very quickly by substituting different blinds BSDFs.

If there is some reason you don't want to do this with a 3-phase method, you should include the blinds as part of your mkillum computation, even if that means running it multiple times for different blinds positions.  That way, the interior can "see" the illum source rather than having every source ray blocked by the blinds, which completely defeats the purpose of mkillum.

Does this make sense?
-Greg

> From: "Randolph M. Fritz" <RFritz at lbl.gov>
> Date: February 27, 2012 12:54:38 PM PST
> 
> OK?so we have our huge number of simulation cases for our educational project.
> 
> I think I want to organize the simulations as follows:
> 1. Do a mkillum calculation for the glazing that includes the site model.
> 2. Use BDSF for the interior blinds in their several positions
> 3. Other than that, straight Radiance simulation.
> 
> Does this seem realistic?  Or am I off the deep end somewhere?
> -- 
> Randolph M. Fritz


From amcneil at lbl.gov  Mon Feb 27 17:25:27 2012
From: amcneil at lbl.gov (Andy McNeil)
Date: Mon, 27 Feb 2012 17:25:27 -0800
Subject: [Radiance-general] Plotting a large number of simulations
In-Reply-To: <8FA8C89B-E175-4594-9A1E-7A5A6EBA9A7A@lmi.net>
References: <jigqid$a4o$1@dough.gmane.org>
	<8FA8C89B-E175-4594-9A1E-7A5A6EBA9A7A@lmi.net>
Message-ID: <94076AF0-7390-49EA-9A63-65B1DA515869@lbl.gov>


On Feb 27, 2012, at 4:43 PM, Greg Ward wrote:

> If there is some reason you don't want to do this with a 3-phase method, you should include the blinds as part of your mkillum computation, even if that means running it multiple times for different blinds positions.  That way, the interior can "see" the illum source rather than having every source ray blocked by the blinds, which completely defeats the purpose of mkillum.

Couldn't he put a BSDF surface behind the mkillum?  Then mkillum could sample the BSDF instead of the blind geometry, saving mkillum from having to sample the blinds in all 1000+ simulations.  You could also include blind geometry with direct pass through option for the BSDF allowing the blinds to be seen in the renderings too.  No?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120227/e8b9e27c/attachment.html>

From gregoryjward at gmail.com  Mon Feb 27 17:51:07 2012
From: gregoryjward at gmail.com (Greg Ward)
Date: Mon, 27 Feb 2012 17:51:07 -0800
Subject: [Radiance-general] Plotting a large number of simulations
In-Reply-To: <94076AF0-7390-49EA-9A63-65B1DA515869@lbl.gov>
References: <jigqid$a4o$1@dough.gmane.org>
	<8FA8C89B-E175-4594-9A1E-7A5A6EBA9A7A@lmi.net>
	<94076AF0-7390-49EA-9A63-65B1DA515869@lbl.gov>
Message-ID: <7E301130-60C6-4B13-87D8-0B487D8365E8@lmi.net>

Hi Andy,

Mkillum produces an illum surface that is too close to the BSDF surface for the blinds to be sampled properly as a light source, and at that point everything becomes indirect.  If the BSDF is serving as a proxy for actual blinds geometry, then the illum will be bypassed as well during source sampling.

The only thing that would "sort of" work is to run mkillum in "l+" mode so the window gets replaced by a light source, then use the BSDF as a proxy.  You still wouldn't end up seeing what's outside through the blinds or get striped patterns during solar penetration, but at least the direct and indirect calculations would be reasonable.

I don't see the advantage over a three-phase calculation if you are using BSDFs, which would be a thousand times faster.  The shortcomings are similar, but the costs are very different.

The highest quality results are still going to come from handing the blinds geometry to mkillum and letting it figure out the light distribution on its own.  You can refer to my "first class citizen" talk from the last workshop, where I tried to explain this reasoning.  Unfortunately, I don't know of a good shortcut in the case where you want to look at many blinds positions for the same time step.  Do you have any ideas?

-Greg

> From: Andy McNeil <amcneil at lbl.gov>
> Date: February 27, 2012 5:25:27 PM PST
> 
> On Feb 27, 2012, at 4:43 PM, Greg Ward wrote:
> 
>> If there is some reason you don't want to do this with a 3-phase method, you should include the blinds as part of your mkillum computation, even if that means running it multiple times for different blinds positions.  That way, the interior can "see" the illum source rather than having every source ray blocked by the blinds, which completely defeats the purpose of mkillum.
> 
> Couldn't he put a BSDF surface behind the mkillum?  Then mkillum could sample the BSDF instead of the blind geometry, saving mkillum from having to sample the blinds in all 1000+ simulations.  You could also include blind geometry with direct pass through option for the BSDF allowing the blinds to be seen in the renderings too.  No?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120227/6f2e1b82/attachment-0001.html>

From RFritz at lbl.gov  Tue Feb 28 10:04:53 2012
From: RFritz at lbl.gov (Randolph M. Fritz)
Date: Tue, 28 Feb 2012 10:04:53 -0800
Subject: [Radiance-general] Plotting a large number of simulations
References: <jigqid$a4o$1@dough.gmane.org>
	<8FA8C89B-E175-4594-9A1E-7A5A6EBA9A7A@lmi.net>
Message-ID: <jij504$4g0$1@dough.gmane.org>

On 2012-02-28 00:43:09 +0000, Greg Ward said:

> Hi Randolph,
> 
> Is there any reason in particular for doing it this way?

An error on my part.  Ooof!

> Having a BSDF surface in front of an illum has a number of 
> disadvantages, the main one being that the room cannot sample the illum 
> directly.  [?]

> If there is some reason you don't want to do this with a 3-phase 
> method, you should include the blinds as part of your mkillum 
> computation, even if that means running it multiple times for different 
> blinds positions.  That way, the interior can "see" the illum source 
> rather than having every source ray blocked by the blinds, which 
> completely defeats the purpose of mkillum.

There's sometimes direct sun, and I thought the three-phase method 
wouldn't work in that situation.  Fortunately, there are not too many 
times involved (those come in the next phase of the project), so I will 
do as you suggest and roll the blinds into the mkillum calculation

> Does this make sense?

Yes.  Thank you.  You've saved me from a huge mistake and a lot of lost time.

Randolph




From smoret at ucdavis.edu  Tue Feb 28 16:11:43 2012
From: smoret at ucdavis.edu (Stefano Moret)
Date: Wed, 29 Feb 2012 00:11:43 +0000
Subject: [Radiance-general] Louvered skylights simulation
Message-ID: <04B072E0E3317A4486513BB18D6579C0841D70@exmbx10.ex.ad3.ucdavis.edu>

Hi,

I'm a Master student in Mechanical Engineering, and I'm working in California at UC Davis CLTC to complete my Master Thesis on lighting energy efficiency and daylighting.
I'm interested in daylighting simulation, and I found the following pages online giving some insights about the topic:

http://www.radiance-online.org/pipermail/radiance-general/2007-November/004577.html

I was particularly interested by the latter article, since it refers to something quite similar to what I would like to do: I want to simulate the behavior of controlled louvered skylights to get the luminance maps of the a space, possibly reproducing their motion (or, otherwise, manually setting the behavior at different angles).
I've no experience with lighting simulations environments.. could you give me a couple of suggestions? My questions are:


-          Is Radiance the best simulation tool available for the object I want to simulate?

-          How would you conceptually implement a louvered skylights with motion?

Thanks for your attention,
and Best Regards

--

Stefano Moret
California Lighting Technology Center<http://cltc.ucdavis.edu/>
University of California, Davis
633 Pena Drive
Davis, CA 95618

510-520-7923
smoret at ucdavis.edu<mailto:smoret at ad3.ucdavis.edu>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120229/3d29c576/attachment.html>

From tito_ at mit.edu  Tue Feb 28 16:57:02 2012
From: tito_ at mit.edu (Christoph Reinhart)
Date: Wed, 29 Feb 2012 00:57:02 +0000
Subject: [Radiance-general] Louvered skylights simulation
In-Reply-To: <04B072E0E3317A4486513BB18D6579C0841D70@exmbx10.ex.ad3.ucdavis.edu>
References: <04B072E0E3317A4486513BB18D6579C0841D70@exmbx10.ex.ad3.ucdavis.edu>
Message-ID: <1B23446CBF250648A2FC775DE3FE7E80058B13@OC11expo28.exchange.mit.edu>

Dear Stefano,

I had similar projects in the past in our daylighting class where students modeled the annual performance of a tracking heliostat by modeling a discrete number of mirror settings in Daysim/Radiance and then assembled an annual *ill file using a script. In your case I probably would use DIVA-for-Rhino in combination with some Python scripting.

Best,

Christoph

From: Stefano Moret [mailto:smoret at ucdavis.edu]
Sent: Tuesday, February 28, 2012 7:12 PM
To: radiance-general at radiance-online.org
Subject: [Radiance-general] Louvered skylights simulation

Hi,

I'm a Master student in Mechanical Engineering, and I'm working in California at UC Davis CLTC to complete my Master Thesis on lighting energy efficiency and daylighting.
I'm interested in daylighting simulation, and I found the following pages online giving some insights about the topic:

http://www.radiance-online.org/pipermail/radiance-general/2007-November/004577.html

I was particularly interested by the latter article, since it refers to something quite similar to what I would like to do: I want to simulate the behavior of controlled louvered skylights to get the luminance maps of the a space, possibly reproducing their motion (or, otherwise, manually setting the behavior at different angles).
I've no experience with lighting simulations environments.. could you give me a couple of suggestions? My questions are:


-          Is Radiance the best simulation tool available for the object I want to simulate?

-          How would you conceptually implement a louvered skylights with motion?

Thanks for your attention,
and Best Regards

--

Stefano Moret
California Lighting Technology Center<http://cltc.ucdavis.edu/>
University of California, Davis
633 Pena Drive
Davis, CA 95618

510-520-7923
smoret at ucdavis.edu<mailto:smoret at ad3.ucdavis.edu>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120229/52745175/attachment.html>

From smoret at ucdavis.edu  Tue Feb 28 17:06:28 2012
From: smoret at ucdavis.edu (Stefano Moret)
Date: Wed, 29 Feb 2012 01:06:28 +0000
Subject: [Radiance-general] Louvered skylights simulation
In-Reply-To: <1B23446CBF250648A2FC775DE3FE7E80058B13@OC11expo28.exchange.mit.edu>
References: <04B072E0E3317A4486513BB18D6579C0841D70@exmbx10.ex.ad3.ucdavis.edu>
	<1B23446CBF250648A2FC775DE3FE7E80058B13@OC11expo28.exchange.mit.edu>
Message-ID: <04B072E0E3317A4486513BB18D6579C0841DC9@exmbx10.ex.ad3.ucdavis.edu>

Dear Christoph,

Thanks for replying so quickly.
Two questions about what you wrote and before I delve into studying all the necessary programming:


-          Is DIVA-for-Rhino better than Daysim for this? On the website I read that Daysim is capable to interface with other software in order to perform, for example, thermal simulations. Is this right?

-          Is there any radiance/python script already available to study/learn from?

Thanks, regards
Stefano



From: Christoph Reinhart [mailto:tito_ at mit.edu]
Sent: Tuesday, February 28, 2012 4:57 PM
To: Radiance general discussion
Subject: Re: [Radiance-general] Louvered skylights simulation

Dear Stefano,

I had similar projects in the past in our daylighting class where students modeled the annual performance of a tracking heliostat by modeling a discrete number of mirror settings in Daysim/Radiance and then assembled an annual *ill file using a script. In your case I probably would use DIVA-for-Rhino in combination with some Python scripting.

Best,

Christoph

From: Stefano Moret [mailto:smoret at ucdavis.edu]<mailto:[mailto:smoret at ucdavis.edu]>
Sent: Tuesday, February 28, 2012 7:12 PM
To: radiance-general at radiance-online.org<mailto:radiance-general at radiance-online.org>
Subject: [Radiance-general] Louvered skylights simulation

Hi,

I'm a Master student in Mechanical Engineering, and I'm working in California at UC Davis CLTC to complete my Master Thesis on lighting energy efficiency and daylighting.
I'm interested in daylighting simulation, and I found the following pages online giving some insights about the topic:

http://www.radiance-online.org/pipermail/radiance-general/2007-November/004577.html

I was particularly interested by the latter article, since it refers to something quite similar to what I would like to do: I want to simulate the behavior of controlled louvered skylights to get the luminance maps of the a space, possibly reproducing their motion (or, otherwise, manually setting the behavior at different angles).
I've no experience with lighting simulations environments.. could you give me a couple of suggestions? My questions are:


-          Is Radiance the best simulation tool available for the object I want to simulate?

-          How would you conceptually implement a louvered skylights with motion?

Thanks for your attention,
and Best Regards

--

Stefano Moret
California Lighting Technology Center<http://cltc.ucdavis.edu/>
University of California, Davis
633 Pena Drive
Davis, CA 95618

510-520-7923
smoret at ucdavis.edu<mailto:smoret at ad3.ucdavis.edu>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120229/881cdeb2/attachment-0001.html>

From tito_ at mit.edu  Tue Feb 28 17:09:15 2012
From: tito_ at mit.edu (Christoph Reinhart)
Date: Wed, 29 Feb 2012 01:09:15 +0000
Subject: [Radiance-general] Louvered skylights simulation
In-Reply-To: <04B072E0E3317A4486513BB18D6579C0841DC9@exmbx10.ex.ad3.ucdavis.edu>
References: <04B072E0E3317A4486513BB18D6579C0841D70@exmbx10.ex.ad3.ucdavis.edu>
	<1B23446CBF250648A2FC775DE3FE7E80058B13@OC11expo28.exchange.mit.edu>
	<04B072E0E3317A4486513BB18D6579C0841DC9@exmbx10.ex.ad3.ucdavis.edu>
Message-ID: <1B23446CBF250648A2FC775DE3FE7E80058BD8@OC11expo28.exchange.mit.edu>

-          Is DIVA-for-Rhino better than Daysim for this? On the website I read that Daysim is capable to interface with other software in order to perform, for example, thermal simulations. Is this right?
Diva-for-Rhino is a plug-in for Rhino that runs Radiance/Daysim and E+ in the background.


-          Is there any radiance/python script already available to study/learn from?

Maybe some of the others have something?

From: Stefano Moret [mailto:smoret at ucdavis.edu]
Sent: Tuesday, February 28, 2012 8:06 PM
To: Radiance general discussion
Subject: Re: [Radiance-general] Louvered skylights simulation

Dear Christoph,

Thanks for replying so quickly.
Two questions about what you wrote and before I delve into studying all the necessary programming:


Thanks, regards
Stefano



From: Christoph Reinhart [mailto:tito_ at mit.edu]<mailto:[mailto:tito_ at mit.edu]>
Sent: Tuesday, February 28, 2012 4:57 PM
To: Radiance general discussion
Subject: Re: [Radiance-general] Louvered skylights simulation

Dear Stefano,

I had similar projects in the past in our daylighting class where students modeled the annual performance of a tracking heliostat by modeling a discrete number of mirror settings in Daysim/Radiance and then assembled an annual *ill file using a script. In your case I probably would use DIVA-for-Rhino in combination with some Python scripting.

Best,

Christoph

From: Stefano Moret [mailto:smoret at ucdavis.edu]<mailto:[mailto:smoret at ucdavis.edu]>
Sent: Tuesday, February 28, 2012 7:12 PM
To: radiance-general at radiance-online.org<mailto:radiance-general at radiance-online.org>
Subject: [Radiance-general] Louvered skylights simulation

Hi,

I'm a Master student in Mechanical Engineering, and I'm working in California at UC Davis CLTC to complete my Master Thesis on lighting energy efficiency and daylighting.
I'm interested in daylighting simulation, and I found the following pages online giving some insights about the topic:

http://www.radiance-online.org/pipermail/radiance-general/2007-November/004577.html

I was particularly interested by the latter article, since it refers to something quite similar to what I would like to do: I want to simulate the behavior of controlled louvered skylights to get the luminance maps of the a space, possibly reproducing their motion (or, otherwise, manually setting the behavior at different angles).
I've no experience with lighting simulations environments.. could you give me a couple of suggestions? My questions are:


-          Is Radiance the best simulation tool available for the object I want to simulate?

-          How would you conceptually implement a louvered skylights with motion?

Thanks for your attention,
and Best Regards

--

Stefano Moret
California Lighting Technology Center<http://cltc.ucdavis.edu/>
University of California, Davis
633 Pena Drive
Davis, CA 95618

510-520-7923
smoret at ucdavis.edu<mailto:smoret at ad3.ucdavis.edu>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120229/a24b0f48/attachment.html>

From grobe at gmx.net  Wed Feb 29 00:40:15 2012
From: grobe at gmx.net (Lars O. Grobe)
Date: Wed, 29 Feb 2012 09:40:15 +0100
Subject: [Radiance-general] Louvered skylights simulation
In-Reply-To: <04B072E0E3317A4486513BB18D6579C0841D70@exmbx10.ex.ad3.ucdavis.edu>
References: <04B072E0E3317A4486513BB18D6579C0841D70@exmbx10.ex.ad3.ucdavis.edu>
Message-ID: <4F4DE46F.2080807@gmx.net>

Hi!
>
> -Is Radiance the best simulation tool available for the object I want 
> to simulate?
>
> -How would you conceptually implement a louvered skylights with motion?
>
Hard to answer the first question. For the second, I used environment 
variable in my scene files for similar applications. That allows you to 
use any tool you could imagine (I used perl scripts in most cases) to 
calculate the transformation (if you want to use xform) and other 
parameters, assign these to environment variables and have these 
expanded in the scene file. You may build your own tools on the output 
of other Radiance programs, e.g. I used gensky to get the sun vector 
when I scripted a tracking mirror and only had to filter out the 
relevant information using regular expressions.

One step further would be to write a tool that writes not only these 
parameters, but the geometry description to stdout, so that it could be 
embedded in the scene file. Radiance is very flexible when it comes to 
integration with other, external tools.

Cheers, Lars.


From smoret at ucdavis.edu  Wed Feb 29 13:23:05 2012
From: smoret at ucdavis.edu (Stefano Moret)
Date: Wed, 29 Feb 2012 21:23:05 +0000
Subject: [Radiance-general] Louvered skylights simulation
In-Reply-To: <4F4DE46F.2080807@gmx.net>
References: <04B072E0E3317A4486513BB18D6579C0841D70@exmbx10.ex.ad3.ucdavis.edu>
	<4F4DE46F.2080807@gmx.net>
Message-ID: <04B072E0E3317A4486513BB18D6579C0842306@exmbx10.ex.ad3.ucdavis.edu>

Hi Lars,

So in this case you used tools within Radiance or graphical interfaces which are running Radiance on the back?
I've seen that Rhyno isn't free, so I would like to try with Daysim and some Python scripts to try to simulate my system. According to old posts in the mailing list this should work, am I right? Any suggestion avbout it?

Thanks, Stefano

-----Original Message-----
From: Lars O. Grobe [mailto:grobe at gmx.net] 
Sent: Wednesday, February 29, 2012 12:40 AM
To: Radiance general discussion
Subject: Re: [Radiance-general] Louvered skylights simulation

Hi!
>
> -Is Radiance the best simulation tool available for the object I want 
> to simulate?
>
> -How would you conceptually implement a louvered skylights with motion?
>
Hard to answer the first question. For the second, I used environment variable in my scene files for similar applications. That allows you to use any tool you could imagine (I used perl scripts in most cases) to calculate the transformation (if you want to use xform) and other parameters, assign these to environment variables and have these expanded in the scene file. You may build your own tools on the output of other Radiance programs, e.g. I used gensky to get the sun vector when I scripted a tracking mirror and only had to filter out the relevant information using regular expressions.

One step further would be to write a tool that writes not only these parameters, but the geometry description to stdout, so that it could be embedded in the scene file. Radiance is very flexible when it comes to integration with other, external tools.

Cheers, Lars.

_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general


From tito_ at mit.edu  Mon Feb  6 18:35:04 2012
From: tito_ at mit.edu (Christoph Reinhart)
Date: Tue, 07 Feb 2012 02:35:04 -0000
Subject: [Radiance-general] evalglare with regular lens
In-Reply-To: <CAKGV-k0zpJv+aFaZh6L13ySmTe-XtvbfF0t8=qbjvajmFL=s=g@mail.gmail.com>
References: <4F308933.3080109@gmail.com>
	<CAKGV-k0zpJv+aFaZh6L13ySmTe-XtvbfF0t8=qbjvajmFL=s=g@mail.gmail.com>
Message-ID: <1B23446CBF250648A2FC775DE3FE7E80023212@OC11expo28.exchange.mit.edu>

Dear Ery,

If you do not have a full fisheye lens you should use a vertical illuminance measurement with the HDR image and feed the measured illuminance into evalglare. As Thomas noted, the resulting contrast portion (second part of DGP equation) might be wrong depending on what happens outside of the lenses view range. I'd be happy for Jan to add his two cents as well.

Best,

Christoph
Christoph Reinhart
Associate Professor
Department of Architecture
Massachusetts Institute of Technology
77 Massachusetts Ave, Rm 5-418, Cambridge, MA 02139, USA
t: 617 253 7714, f: 617 253 6152, creinhart at mit.edu<mailto:creinhart at mit.edu>
Home<http://architecture.mit.edu/faculty/christoph-reinhart> | DIVA<http://www.diva-for-rhino.com/> | Daysim<http://daysim.com/>




From: Thomas Bleicher [mailto:tbleicher at googlemail.com]
Sent: Monday, February 06, 2012 9:27 PM
To: Radiance general discussion
Subject: Re: [Radiance-general] evalglare with regular lens

Ery

You can use the pinterp program to convert from one projection to another. See the man page for an example or dig in the archives where this has been discussed before. However, note that the glare equations are based on a full hemispherical image. You will have to fill in the missing perimeter of your converted fisheye image with values of the right brightness or your glare evaluation will be off.

Regards,
Thomas
On Mon, Feb 6, 2012 at 9:15 PM, Ery Djunaedy <ery.mailinglist at gmail.com<mailto:ery.mailinglist at gmail.com>> wrote:
Folks,

I have a bunch of HDR images generated from photographs taken with regular -- non-fisheye -- lens. Is there a way that we can use these images for glare analysis in evalglare? The evalglare description says that it only accepts fisheye images. There is a tutorial from Harvard GSD (Doyle and Reihart) that shows a non-fisheye photo in evalglare: http://www.gsd.harvard.edu/research/gsdsquare/Publications/HDR_III_Evalglare.pdf

I am wondering whether this can be done at all.

Thanks,

Ery

_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org<mailto:Radiance-general at radiance-online.org>
http://www.radiance-online.org/mailman/listinfo/radiance-general

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120207/83d7b712/attachment.html>

From tito_ at mit.edu  Fri Feb 24 10:14:19 2012
From: tito_ at mit.edu (Christoph Reinhart)
Date: Fri, 24 Feb 2012 18:14:19 -0000
Subject: [Radiance-general] Color surfaces information and link
	with	Sketchup defined colors
In-Reply-To: <3178D917-48BD-4D71-8EC3-5B50FDC63FE3@lbl.gov>
References: <CAAZQWqii1TMnNoBctU7NdswXo=An-sZApE2H0M6iCKyHitJwBQ@mail.gmail.com>
	<02FEEBA2-80E7-4072-B6D3-1D1BBFFC0770@lmi.net>
	<CAAZQWqgaONuJ27rQL3i2h1z-VoVy_5RCdtS1+sXpB+pVj+aTsw@mail.gmail.com>
	<4f47bdf3.a611440a.1fda.2435SMTPIN_ADDED@mx.google.com>
	<4AAB5F38-2CFA-4DC6-9747-D40C939C6B24@lbl.gov>
	<8E7F7C65-4387-45F6-B331-18569B2FE41A@solamen.fr>
	<3178D917-48BD-4D71-8EC3-5B50FDC63FE3@lbl.gov>
Message-ID: <1B23446CBF250648A2FC775DE3FE7E80054941@OC11expo28.exchange.mit.edu>

Daysim uses a program called radfiles2daysim.exe to take out light sources out of a Radiance scene and convert all color to gray. This is necessary because Daysim conducts the daylight coefficient calculation for the rad color channel only. Historically, this was introduced because in 1999 RAM used to be a serious limitation for annual  Radiance simulations.

Christoph
PS: Gosh, I feel old writing this email :).

From: Andy McNeil [mailto:amcneil at lbl.gov]
Sent: Friday, February 24, 2012 1:08 PM
To: Radiance general discussion
Subject: Re: [Radiance-general] Color surfaces information and link with Sketchup defined colors

Hmm...  That sounds odd.  I just tried an similar example with a red surface in sketchup, changed the materials.rad file after exporting so the surface is yellow and when re-rendered the rendering is yellow as expected.

Are you importing your model into Daysim before you make the changes?
It could be that Daysim creates a copy of the model somewhere else on your computer, so when you make changes you are not changing the model that Daysim is using.

Or, it could be that the material you are changing is not applied to the surface you are looking at.

Can you send me an off list email with the files in you objects folder and the materials.rad file?  I'll have a look to see what's going on.

Andy


On Feb 24, 2012, at 9:28 AM, Thibault Charles wrote:


Hi Andy,

Thanks for your response. I known the material file. It seemed to me that informations about colors where coded by patterns in this file and I have no pattern in my files...
I created a really simple example in which the surface is red in Sketchup and my material file is only :
void plastic outSideFacade
0
0
5 0.7 0.7 0.7

The result is that in the rendering, the surface appear to be red and if I change the values in the material file, it is still red.

Would you have an idea ?

Best,

Thibault Charles
Solamen
thibault.charles at solamen.fr<mailto:thibault.charles at solamen.fr>
+33 6 78 54 27 91







Le 24 f?vr. 2012 ? 18:19, Andy McNeil a ?crit :


Hi Thibault,

su2rad creates a file called materials.rad.  You can open it in a text editor and it has the material descriptions used in the Radiance model.

Descriptions of the material primitive types can be found in section 2.1.2 of this pdf: http://radsite.lbl.gov/radiance/refer/refman.pdf
And documentation of the materials algorithms are contained in this pdf: http://radsite.lbl.gov/radiance/refer/materials.pdf

Best,
Andy



On Feb 24, 2012, at 8:39 AM, Thibault Charles wrote:


Hi everyone,

I usually work with Radiance and Daysim by contructing 3D scene with Sketchup and importing it with Su2rad.

Something stay obscure for me : I cannot find the file in which is contained the information about the colors of surfaces. When I create a scene in Sketchup, the same colors appear in the rendering but I cannot understand how...

Thanks in advance,

Thibault Charles
Solamen
thibault.charles at solamen.fr<mailto:thibault.charles at solamen.fr>
+33 6 78 54 27 91

_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org<mailto:Radiance-general at radiance-online.org>
http://www.radiance-online.org/mailman/listinfo/radiance-general

_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org<mailto:Radiance-general at radiance-online.org>
http://www.radiance-online.org/mailman/listinfo/radiance-general

_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org<mailto:Radiance-general at radiance-online.org>
http://www.radiance-online.org/mailman/listinfo/radiance-general

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20120224/82ae5ebb/attachment-0001.html>

