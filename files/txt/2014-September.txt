From kjstotoro at naver.com  Mon Sep  1 03:14:56 2014
From: kjstotoro at naver.com (jinsook kang)
Date: Mon, 1 Sep 2014 19:14:56 +0900 (KST)
Subject: [Radiance-general] =?utf-8?q?Three-phase_Method_dctimestep?=
In-Reply-To: <CAOG+NixbDh5Wp4j_BD0B7JQa1M5=ZOJLY4nQPuD8fwFmG5=YMw@mail.gmail.com>
References: <569b51d05f7b3e7b2ad6444aaeec9c9@cweb18.nm.nhnsystem.com>
	<CAK+g53DivBrRXQmzm=He3+7E5HO-71A9URvk4D8=ZvMoBuDrEw@mail.gmail.com>
	<CAOG+NixbDh5Wp4j_BD0B7JQa1M5=ZOJLY4nQPuD8fwFmG5=YMw@mail.gmail.com>
Message-ID: <28d7b74e28cfdda4807fe4c1337dfa9@cweb17.nm.nhnsystem.com>

Thank you very much for your answer Andrew.
Can you explain me more in detail about the required "conversion" for BSDF xml ?
Thank you 
 
Jinsook
 
-----Original Message-----
From: "Andrew McNeil"&lt;amcneil at lbl.gov&gt; 
To: "Radiance general discussion"&lt;radiance-general at radiance-online.org&gt;; 
Cc: "jinsook kang"&lt;kjstotoro at naver.com&gt;; 
Sent: 2014-08-29 (?) 03:26:22
Subject: Re: [Radiance-general] Three-phase Method dctimestep
 
When dctimestep reads the BSDF xml, there is a conversion required for it to be a true coefficient matrix. If you're giving it a BSDF, I suspect this might be one of the causes of the discrepency you're observing.

Andy

On Thu, Aug 28, 2014 at 9:39 AM, CHI-German Molina &lt;gmolina at hdlao.com&gt; wrote:


Jinsook,  DCTIMESTEP does multiply matrices, a pretty naive method, actually. I have no idea what might be causing the dismatch between your results and DCTIMESTEP's.

 
Nothing too helpful... sorry. Bye!   

2014-08-28 12:27 GMT-04:00 jinsook kang &lt;kjstotoro at naver.com&gt;:



Hi everyone.
Is there anybody who knows how dctimestep works in three phase method?



When I tried to multiply as a normal matrix (with python language), the illuminance result is not matched with dctimestep result.
So, I wonder if dctimestep doesn't use normal matrix multiplication.



If there is a specific method in dctimestep, please teach me. 
* let you know, 



1. I picked up one column out of the every RGB(view matrix and daylight matrix), so that I made a simple matrix multiplication.
2. I created daylight matrix as a ASCII data instead of binary.
Thank you. 



Jinsook

 _______________________________________________

Radiance-general mailing list

Radiance-general at radiance-online.org

http://www.radiance-online.org/mailman/listinfo/radiance-general



 -- 
Germ?n Molina L.


Ingeniero Trainee
Hunter Douglas Chile S.A.Celular +569 89224445






Nota de Confidencialidad: Este mensaje inclu?do los archivos adjuntos son confidenciales y pueden contener informacion privilegiada protegida por ley. Si Ud. no es el destinatario, deberia abstenerse de copiarlo, distribuirlo, divulgarlo o usar la informacion contenida. Por favor, avise inmediatamente al emisor y borre este mensaje de su sistema. Los mensajes electronicos son susceptibles de ser cambiados, infectados o adulterados sin autorizacion. No asumimos responsabilidad alguna por ninguna clase de cambios o sus consecuencias. Usted debe estar informado que la compania puede hacer un seguimiento de sus mensajes electronicos y su contenido, gracias.


Confidentiality Notice: The information contained in this email message, including any attachment, is confidential and is intended only for the person or entity to which it is addressed. If you are neither the intended recipient nor the employee or agent responsible for delivering this message to the intended recipient, you are hereby notified that you may not review, retransmit, convert to hard copy, copy, use or distribute this email message or any attachments to it. If you have received this email in error, please contact the sender immediately and delete this message from any computer or other data bank, Thank you.


A informa??o transmitida ? confidencial e para conhecimento exclusivo do destinat?rio. Sua utiliza??o, n?o autorizada, constitui crime pass?vel de pris?o. Todas as precau??es poss?veis foram tomadas para garantir que este e-mail n?o contenha v?rus. Uma vez que nossa empresa n?o pode assumir responsabilidade por nenhuma perda ou dano causado por este e-mail ou de seus anexos, recomendamos que o destinat?rio utilize seus procedimentos de antiv?rus antes de qualquer uso.



_______________________________________________

Radiance-general mailing list

Radiance-general at radiance-online.org

http://www.radiance-online.org/mailman/listinfo/radiance-general


 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20140901/851cb90c/attachment.html>

From gregoryjward at gmail.com  Mon Sep  1 03:52:54 2014
From: gregoryjward at gmail.com (Greg Ward)
Date: Mon, 1 Sep 2014 11:52:54 +0100
Subject: [Radiance-general] Three-phase Method dctimestep
In-Reply-To: <28d7b74e28cfdda4807fe4c1337dfa9@cweb17.nm.nhnsystem.com>
References: <569b51d05f7b3e7b2ad6444aaeec9c9@cweb18.nm.nhnsystem.com>
	<CAK+g53DivBrRXQmzm=He3+7E5HO-71A9URvk4D8=ZvMoBuDrEw@mail.gmail.com>
	<CAOG+NixbDh5Wp4j_BD0B7JQa1M5=ZOJLY4nQPuD8fwFmG5=YMw@mail.gmail.com>
	<28d7b74e28cfdda4807fe4c1337dfa9@cweb17.nm.nhnsystem.com>
Message-ID: <A771077D-18C1-41F1-B970-6A7BE0BB748C@lmi.net>

It's a little bit complicated by whether or not reciprocity is needed, but the details are contained in the routines of src/util/cmbsdf.c.

When reciprocity is not needed, you must still multiply each direction by the projected solid angle of the incident directions (columns).

-Greg

> From: jinsook kang <kjstotoro at naver.com>
> Subject: Re: [Radiance-general] Three-phase Method dctimestep
> Date: September 1, 2014 11:14:56 AM GMT+01:00
> 
> Thank you very much for your answer Andrew.
> 
> Can you explain me more in detail about the required "conversion" for BSDF xml ?
> 
> Thank you 
> 
> Jinsook
> 
>  
> 
> -----Original Message-----
> From: "Andrew McNeil"<amcneil at lbl.gov> 
> To: "Radiance general discussion"<radiance-general at radiance-online.org>; 
> Cc: "jinsook kang"<kjstotoro at naver.com>; 
>  
> 
> When dctimestep reads the BSDF xml, there is a conversion required for it to be a true coefficient matrix. If you're giving it a BSDF, I suspect this might be one of the causes of the discrepency you're observing.
> Andy
> 
> 
> On Thu, Aug 28, 2014 at 9:39 AM, CHI-German Molina <gmolina at hdlao.com> wrote:
> Jinsook,
>  
> DCTIMESTEP does multiply matrices, a pretty naive method, actually. I have no idea what might be causing the dismatch between your results and DCTIMESTEP's.
>  
> Nothing too helpful... sorry.
>  
> Bye!
>  
>  
> 
> 
> 2014-08-28 12:27 GMT-04:00 jinsook kang <kjstotoro at naver.com>:
> Hi everyone.
> 
> Is there anybody who knows how dctimestep works in three phase method?
> 
> When I tried to multiply as a normal matrix (with python language), the illuminance result is not matched with dctimestep result.
> 
> So, I wonder if dctimestep doesn't use normal matrix multiplication.
> 
> If there is a specific method in dctimestep, please teach me.
> 
> * let you know,
> 
> 1. I picked up one column out of the every RGB(view matrix and daylight matrix), so that I made a simple matrix multiplication.
> 
> 2. I created daylight matrix as a ASCII data instead of binary.
> 
> Thank you.
> 
> Jinsook
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20140901/ac6bbc4f/attachment.html>

From geiger.mario at gmail.com  Tue Sep  2 03:43:14 2014
From: geiger.mario at gmail.com (Mario Geiger)
Date: Tue, 2 Sep 2014 12:43:14 +0200
Subject: [Radiance-general] rtrace vs rcontrib
Message-ID: <CAJ3JcAPcqUcT6Wj_t82UdmvZKLjOw2zFaUvi62T8+MgCnTXfKQ@mail.gmail.com>

Hello,

I would like to understand why *rtrace* and *rcontrib* are so different.

I ran the two programs as following.

oconv window.rad office.rad > scene.oct

echo "1.8 *y* 1 0 0 1" | rtrace   -w -h -I                option -n 4
scene.oct
echo "1.8 *y* 1 0 0 1" | rcontrib -w -h -I+ -m windowglow option -n 4
scene.oct

where option = -ab 5 -ad 1024 -as 256 -lw 1e-5 -dj 0 -ds .5 -dt .5 -dc .25
-dr 3 -dp 64 -st .85 -aa .1 -ar 32 -lr 4

My scene is a simple box 3.6 x 8.2 x 2.8 meters with a "window" as a role
of a light source. I put the *.rad files in attachment.

By varying *y* the distance from the "window" in the box I get the
following results.

Also it takes much longer to run *rtrace* than *rcontrib* :

*rtrace* : Elapsed time is 475.741 seconds.
*rcontrib* : Elapsed time is 1.10356 seconds.

To compute all the 50 points.

Why don't I get the same result in the same time ?

Thanks for your time!

?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20140902/69cecc5b/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: windowglow.jpeg
Type: image/jpeg
Size: 47026 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20140902/69cecc5b/attachment-0002.jpeg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: windowglow.jpeg
Type: image/jpeg
Size: 47026 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20140902/69cecc5b/attachment-0003.jpeg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: office.rad
Type: application/octet-stream
Size: 805 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20140902/69cecc5b/attachment-0002.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: window.rad
Type: application/octet-stream
Size: 127 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20140902/69cecc5b/attachment-0003.obj>

From hujia06 at gmail.com  Wed Sep  3 12:02:35 2014
From: hujia06 at gmail.com (Jia Hu)
Date: Wed, 3 Sep 2014 15:02:35 -0400
Subject: [Radiance-general] Reflectance data
Message-ID: <CABzgtwqnkA8q0Uzp2VmSjWzDgxRpk=Sxfko25OhFQBfaMOvvMw@mail.gmail.com>

Hello, I use a device to measure the reflectance from 344 to 1045
wavelength,
How could I convert these measured data into Radiance RGB,  and how could I
calculate the overall reflectance from the measurement?

I try to use weights of RGB channels in Radiance, but which wavelength out
of 344 - 1045 should I select for each channel?

Thanks,
Jia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20140903/c2b0bd9e/attachment.html>

From jedev at visarc.com  Wed Sep  3 12:05:51 2014
From: jedev at visarc.com (Jack de Valpine)
Date: Wed, 03 Sep 2014 15:05:51 -0400
Subject: [Radiance-general] rtrace vs rcontrib
In-Reply-To: <CAJ3JcAPcqUcT6Wj_t82UdmvZKLjOw2zFaUvi62T8+MgCnTXfKQ@mail.gmail.com>
References: <CAJ3JcAPcqUcT6Wj_t82UdmvZKLjOw2zFaUvi62T8+MgCnTXfKQ@mail.gmail.com>
Message-ID: <5407668F.5090303@visarc.com>

Hi Mario,

The programs do things very differently from each other.

One source of difference is in the options, both programs require 
different settings for the same set of options. Rcontrib actually 
disables the ambient cache by setting -aa 0, so you will need to 
increase ambient divisions (-ad) parameter along with a few others. As 
quick experiment you could try 2x or 4x whatever is set for -ad in the 
rtrace run in your rcontrib run. Also it would be instructive to see 
what defaults rcontrib uses and perhaps work from those. To do this you 
can do rcontrib -defaults.

Axel Jacobs had a very instructive tutorial on rtcontrib (older version 
of rcontrib) that included a section that compared running rtrace and 
rtcontrib. I think unfortunately it is no longer available though.

Regards,

-Jack de Valpine

-- 
Jack de Valpine
President

Visarc Incorporated
www.visarc.com

channeling technology for superior design and construction

On 9/2/2014 6:43 AM, Mario Geiger wrote:
> Hello,
>
> I would like to understand why /rtrace/ and /rcontrib/ are so different.
>
> I ran the two programs as following.
>
> oconv window.rad office.rad > scene.oct
>
> echo "1.8 *y* 1 0 0 1" | rtrace   -w -h -I                option -n 4 
> scene.oct
> echo "1.8 *y* 1 0 0 1" | rcontrib -w -h -I+ -m windowglow option -n 4 
> scene.oct
>
> where option = -ab 5 -ad 1024 -as 256 -lw 1e-5 -dj 0 -ds .5 -dt .5 -dc 
> .25 -dr 3 -dp 64 -st .85 -aa .1 -ar 32 -lr 4
>
> My scene is a simple box 3.6 x 8.2 x 2.8 meters with a "window" as a 
> role of a light source. I put the *.rad files in attachment.
>
> By varying *y* the distance from the "window" in the box I get the 
> following results.
>
> Also it takes much longer to run /rtrace/ than /rcontrib/ :
>
> /rtrace/ : Elapsed time is 475.741 seconds.
> /rcontrib/ : Elapsed time is 1.10356 seconds.
>
> To compute all the 50 points.
>
> Why don't I get the same result in the same time ?
>
> Thanks for your time!
>
>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20140903/7c8a6316/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/jpeg
Size: 47026 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20140903/7c8a6316/attachment-0001.jpe>

From gregoryjward at gmail.com  Wed Sep  3 14:14:10 2014
From: gregoryjward at gmail.com (Greg Ward)
Date: Wed, 3 Sep 2014 22:14:10 +0100
Subject: [Radiance-general] Reflectance data
In-Reply-To: <CABzgtwqnkA8q0Uzp2VmSjWzDgxRpk=Sxfko25OhFQBfaMOvvMw@mail.gmail.com>
References: <CABzgtwqnkA8q0Uzp2VmSjWzDgxRpk=Sxfko25OhFQBfaMOvvMw@mail.gmail.com>
Message-ID: <D9888523-8E0F-4C06-9163-E72A320A0752@lmi.net>

You can use the routines defined in src/common/ccolor.h to convert from spectral measurements to a CIE color and from there to RGB:

#include "ccolor.h"
{
	C_COLOR		clr;
	float				spec_data[MYNWL];
	float				rgb[3];
	double			myLuminance = 0.5;

	/* set spec_data[] array] */
	c_sset(&clr, 344.0, 1045.0, spec_data, MYNWL);
	ccy2rgb(&clr, myLuminance, rgb);
}

Note that you have to decide the number of wavelengths ahead of time, and they must be evenly spaced.

I've arbitrarily set the overall Y value to 0.5, but of course you set it to what you need.  I can't help you with that part.

Cheers,
-Greg

> From: Jia Hu <hujia06 at gmail.com>
> Subject: [Radiance-general] Reflectance data
> Date: September 3, 2014 8:02:35 PM GMT+01:00
> 
> Hello, I use a device to measure the reflectance from 344 to 1045 wavelength, 
> How could I convert these measured data into Radiance RGB,  and how could I calculate the overall reflectance from the measurement?    
> 
> I try to use weights of RGB channels in Radiance, but which wavelength out of 344 - 1045 should I select for each channel?  
> 
> Thanks,
> Jia
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20140903/6bb1979b/attachment.html>

From grobe at gmx.net  Fri Sep  5 05:09:59 2014
From: grobe at gmx.net (Lars O. Grobe)
Date: Fri, 05 Sep 2014 14:09:59 +0200
Subject: [Radiance-general] Reflectance data
In-Reply-To: <CABzgtwqnkA8q0Uzp2VmSjWzDgxRpk=Sxfko25OhFQBfaMOvvMw@mail.gmail.com>
References: <CABzgtwqnkA8q0Uzp2VmSjWzDgxRpk=Sxfko25OhFQBfaMOvvMw@mail.gmail.com>
Message-ID: <5409A817.4050301@gmx.net>

Hi Jia,

I have been using mgfilt to convert from spectrally resolved reflectance 
to rgb.

Cheers, Lars.

> Hello, I use a device to measure the reflectance from 344 to 1045 
> wavelength,
> How could I convert these measured data into Radiance RGB,  and how 
> could I calculate the overall reflectance from the measurement?
>
> I try to use weights of RGB channels in Radiance, but which wavelength 
> out of 344 - 1045 should I select for each channel?
>
> Thanks,
> Jia


From geotrupes at me.com  Wed Sep  3 15:54:03 2014
From: geotrupes at me.com (giulioandrea antonutto foi)
Date: Wed, 03 Sep 2014 23:54:03 +0100
Subject: [Radiance-general] rtrace vs rcontrib
In-Reply-To: <CAJ3JcAPcqUcT6Wj_t82UdmvZKLjOw2zFaUvi62T8+MgCnTXfKQ@mail.gmail.com>
References: <CAJ3JcAPcqUcT6Wj_t82UdmvZKLjOw2zFaUvi62T8+MgCnTXfKQ@mail.gmail.com>
Message-ID: <C0FAC15D-7F6E-4B95-BF71-25CC249BA8F2@me.com>

try with -lw a little lower in rtcontrib and also increase rays.
the key is that rtcontrib uses pure monte carlo
rtrace uses ambient interpolation (-aa .1)
G

On 2 Sep 2014, at 11:43, Mario Geiger <geiger.mario at gmail.com> wrote:

> Also it takes much longer to run rtrace than rcontrib :
> 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20140903/2f47f3cf/attachment.html>

From gmolina at hdlao.com  Tue Sep  9 08:41:37 2014
From: gmolina at hdlao.com (CHI-German Molina)
Date: Tue, 9 Sep 2014 12:41:37 -0300
Subject: [Radiance-general] comparing RTRACE vs DAYSIM Daylight Coefficients
Message-ID: <CAK+g53CW1Ge8qoC2xWA8ZPObQLv56zsUNuVbmQvqB4H8km2__w@mail.gmail.com>

Dear All,

I have been trying to replicate the "DAYSIM Daylight Coefficients",
comparing those results with the RTRACE output. I am doing this following
the 5 phase method tutorial, but I have not been succesful yet. Any
comments would be great! I am not sure I am doing this well...

So, what I did is to separate the whole scene (including overhangs) from
the window.

*FILE CONTENT*

##White.sky
void glow skymat
0
0
4    1     1     1    0

skymat source skysource
0
0
4     0    0    1    360


## suns.rad
void light solar 0 0 3 1e6 1e6 1e6
solar source sun 0 0 4 0 0.999 0.018 0.018 0.533
.....
lots of them.

## black.rad
void plastic black
0
0
5 0 0 0 0 0

##clear.sky
!gendaylit 3 1 9.5 -W 756 189 -g 0.7 -a -33.38 -o 70.78     ##There is a
big ground with 70% reflectance

skyfunc glow skyglow
0
0
4   1   1   1   0

skyglow source skysource
0
0
4   0    0    1    360


##Santiago.wea
place SANTIAGO_CHL
latitude -33.38
longitude 70.78
time_zone 60
site_elevation 476.0
weather_data_file_units 1
1 1 9.5 756 189





*RTRACE CALCULATIONS*
oconv Materials/* scene.rad clear.sky windows.rad > clear_octree.oct
cat Workplanes/WP.pts | rtrace -n 4 -I -ab 8 -ad 50000 -lw 2e-5 -dc 1 -dt 0
-dj 0 -st 1 -ss 0 -faa -af amb.af clear_octree.oct > rtrace.lux


*DC CALCULATIONS*

#Full sky DC
oconv Materials/* scene.rad windows.rad white.sky > white_octree.oct
gendaymtx -h -m 1 Santiago.wea > full_sky.skv
cat Workplanes/WP.pts | rcontrib -e MF:1 -f reinhart.cal -b rbin -bn Nrbins
-m skymat -n 4 -I -ab 8 -ad 50000 -lw 2e-5 -dc 1 -dt 0 -dj 0 -st 1 -ss 0
white_octree.oct > DC1.mtx
dctimestep -n 1 DC1.mtx full_sky.skv > DC1.lux

#Direct sun from patches, to be sustracted
xform -m scene.rad > black_scene.rad
oconv Materials/* black.rad black_scene.rad windows.rad white.sky >
black_octree.oct
gendaymtx -h  -m 1 -d Santiago.wea > sun_only_sky.skv
cat Workplanes/WP.pts | rcontrib -e MF:1 -f reinhart.cal -b rbin -bn Nrbins
-m skymat -n 4 -I -ab 1 -ad 50000 -lw 2e-5 -dc 1 -dt 0 -dj 0 -st 1 -ss 0
black_octree.oct > DC2.mtx
dctimestep -n 1 DC2.mtx sun_only_sky.skv > DC2.lux

#Sharp sun addition
oconv Materials/* black.rad black_scene.rad windows.rad suns.rad >
suns_octree.oct
gendaymtx -h -m 6 -5 Santiago.wea > direct_sun_M6_sky.skv
cat Workplanes/WP.pts | rcontrib  -n 4 -I -ab 1 -ad 50000 -lw 2e-5 -dc 1
-dt 0 -dj 0 -st 1 -ss 0 -e MF:6 -f reinhart.cal -b rbin -bn Nrbins -m solar
suns_octree.oct > directsun.mtx
dctimestep -n 1 directsun.mtx direct_sun_M6_sky.skv > directSun.lux



The results are horrible!!! So, any help would be awesome!!! THANKS


-- 
*Germ?n Molina L.*
Ingeniero Trainee
Hunter Douglas Chile S.A.
Celular +569 89224445

-- 


*Nota de Confidencialidad:* Este mensaje inclu?do los archivos adjuntos son 
confidenciales y pueden contener informacion privilegiada protegida por 
ley. Si Ud. no es el destinatario, deberia abstenerse de copiarlo, 
distribuirlo, divulgarlo o usar la informacion contenida. Por favor, avise 
inmediatamente al emisor y borre este mensaje de su sistema. Los mensajes 
electronicos son susceptibles de ser cambiados, infectados o adulterados 
sin autorizacion. No asumimos responsabilidad alguna por ninguna clase de 
cambios o sus consecuencias. Usted debe estar informado que la compania 
puede hacer un seguimiento de sus mensajes electronicos y su contenido, 
gracias.

*Confidentiality Notice:* The information contained in this email message, 
including any attachment, is confidential and is intended only for the 
person or entity to which it is addressed. If you are neither the intended 
recipient nor the employee or agent responsible for delivering this message 
to the intended recipient, you are hereby notified that you may not review, 
retransmit, convert to hard copy, copy, use or distribute this email 
message or any attachments to it. If you have received this email in error, 
please contact the sender immediately and delete this message from any 
computer or other data bank, Thank you.

A informa??o transmitida ? confidencial e para conhecimento exclusivo do 
destinat?rio. Sua utiliza??o, n?o autorizada, constitui crime pass?vel de 
pris?o. Todas as precau??es poss?veis foram tomadas para garantir que este 
e-mail n?o contenha v?rus. Uma vez que nossa empresa n?o pode assumir 
responsabilidade por nenhuma perda ou dano causado por este e-mail ou de 
seus anexos, recomendamos que o destinat?rio utilize seus procedimentos de 
antiv?rus antes de qualquer uso.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20140909/70165eb3/attachment.html>

From RFritz at Candela.com  Wed Sep 10 07:57:11 2014
From: RFritz at Candela.com (Randolph Fritz)
Date: Wed, 10 Sep 2014 14:57:11 +0000
Subject: [Radiance-general] Modeling LED Tape in Radiance?
Message-ID: <ssig.133031fd28.C098B3BD47B28B4EAEB331D6FF0546FD3FA43F16@colmbx01.corp.sparling.com>

Anyone tried this, other than using the generic "light" material?

Randolph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20140910/29974513/attachment.html>

From stephen at coolshadow.com  Thu Sep 11 18:57:27 2014
From: stephen at coolshadow.com (Stephen Wasilewski)
Date: Thu, 11 Sep 2014 18:57:27 -0700
Subject: [Radiance-general] Ambient File and BSDF
Message-ID: <BE219063-594C-4496-97DF-1259112872EB@coolshadow.com>

I?m trying to model woven shades using a BSDF from the CGDB.  To get better looking and more accurate results I am using a BRDF as the standing geometry that is based off of a .cal file that greg wrote for metal grating:  https://www.dropbox.com/s/bzo9apzcl4ioika/rollershade.cal?dl=0

when I apply this material to geometry it behaves as expected and cuts off the direct relative to the angle of incidence (which I hope explains this funny test scene I?m using)

image of BRDF shades:  https://www.dropbox.com/s/tlcqqij9rjng5s6/BRDF_mar21_test_test_fc.jpg?dl=0

But this does not give me accurate diffuse values.  So I then put the BRDF as a proxy for the BSDF and get an image like this:
https://www.dropbox.com/s/7k2n38kvn5jp8fg/both_mar21_test_test_fc.jpg?dl=0

My question arises when I look at image without proxy geometry for the BSDF.

First rendered with multiple processes: https://www.dropbox.com/s/1cw56kwevnx9ajt/mt_BSDF_mar21_test_test_fc.jpg?dl=0
And run on a single processor: https://www.dropbox.com/s/pm5q8ikh6kgwh6f/BSDF_mar21_test_test_fc.jpg?dl=0

or to view it more starkly, the difference between the BSDF alone and with proxy:

bsdf - proxy: https://www.dropbox.com/s/hf2vy2wfpss7gr0/BSDFboth_fc.jpg?dl=0
proxy - bsdf: https://www.dropbox.com/s/di8duoz2gob0ams/bothBSDF_fc.jpg?dl=0

There is a major change in the ambient values once the rendering gets to the window (which is why the band is horizontal in the single process run and vertical in the multiple process run.  I ran these using rad so there is an overture calculation.  Anyone have an idea as to what is going on?

Stephen Wasilewski
LOISOS + UBBELOHDE
- - - - - - - - - - - - - - - - - - - - - - - - - - - 
1917 Clement Avenue  Building 10A
Alameda, CA  94501 USA
- - - - - - - - - - - - - - - - - - - - - - - - - - - 
510 521 3800 VOICE
510 521 3820 FAX
- - - - - - - - - - - - - - - - - - - - - - - - - - - 
www.coolshadow.com






From gregoryjward at gmail.com  Thu Sep 11 20:01:19 2014
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu, 11 Sep 2014 20:01:19 -0700
Subject: [Radiance-general] Ambient File and BSDF
In-Reply-To: <BE219063-594C-4496-97DF-1259112872EB@coolshadow.com>
References: <BE219063-594C-4496-97DF-1259112872EB@coolshadow.com>
Message-ID: <C3D724DF-A7E0-479E-A4ED-F5A783C60125@lmi.net>

Hi Stephen,

What is outside your space?  Did you model a ground plane?  What rendering parameters is rad handing to rpict and rpiece?

My best guess is that when your rays get to the upper sill of the window, they bounce outside and create ambient values that then leak some energy into your scene interior.  It shouldn't really happen with the latest release, so if that's what is going on, then there may be a bug in the new interreflection code.

If you want to send me your complete model, etc. offline, I can try to have a look at it tomorrow.

Cheers,
-Greg

> From: Stephen Wasilewski <stephen at coolshadow.com>
> Subject: [Radiance-general] Ambient File and BSDF
> Date: September 11, 2014 6:57:27 PM PDT
> 
> I?m trying to model woven shades using a BSDF from the CGDB.  To get better looking and more accurate results I am using a BRDF as the standing geometry that is based off of a .cal file that greg wrote for metal grating:  https://www.dropbox.com/s/bzo9apzcl4ioika/rollershade.cal?dl=0
> 
> when I apply this material to geometry it behaves as expected and cuts off the direct relative to the angle of incidence (which I hope explains this funny test scene I?m using)
> 
> image of BRDF shades:  https://www.dropbox.com/s/tlcqqij9rjng5s6/BRDF_mar21_test_test_fc.jpg?dl=0
> 
> But this does not give me accurate diffuse values.  So I then put the BRDF as a proxy for the BSDF and get an image like this:
> https://www.dropbox.com/s/7k2n38kvn5jp8fg/both_mar21_test_test_fc.jpg?dl=0
> 
> My question arises when I look at image without proxy geometry for the BSDF.
> 
> First rendered with multiple processes: https://www.dropbox.com/s/1cw56kwevnx9ajt/mt_BSDF_mar21_test_test_fc.jpg?dl=0
> And run on a single processor: https://www.dropbox.com/s/pm5q8ikh6kgwh6f/BSDF_mar21_test_test_fc.jpg?dl=0
> 
> or to view it more starkly, the difference between the BSDF alone and with proxy:
> 
> bsdf - proxy: https://www.dropbox.com/s/hf2vy2wfpss7gr0/BSDFboth_fc.jpg?dl=0
> proxy - bsdf: https://www.dropbox.com/s/di8duoz2gob0ams/bothBSDF_fc.jpg?dl=0
> 
> There is a major change in the ambient values once the rendering gets to the window (which is why the band is horizontal in the single process run and vertical in the multiple process run.  I ran these using rad so there is an overture calculation.  Anyone have an idea as to what is going on?
> 
> Stephen Wasilewski
> LOISOS + UBBELOHDE
> - - - - - - - - - - - - - - - - - - - - - - - - - - - 
> 1917 Clement Avenue  Building 10A
> Alameda, CA  94501 USA
> - - - - - - - - - - - - - - - - - - - - - - - - - - - 
> 510 521 3800 VOICE
> 510 521 3820 FAX
> - - - - - - - - - - - - - - - - - - - - - - - - - - - 
> www.coolshadow.com
> 


From ytwman at hanmail.net  Fri Sep 12 05:38:02 2014
From: ytwman at hanmail.net (=?utf-8?B?7IS47IOB7IK07J20?=)
Date: Fri, 12 Sep 2014 21:38:02 +0900 (KST)
Subject: [Radiance-general] Luminance and Incidence angle question
Message-ID: <20140912213802.HM.R000000000IgLNA@ytwman.wwl1486.hanmail.net>

An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20140912/4df2e325/attachment.html>

From gregoryjward at gmail.com  Fri Sep 12 09:11:27 2014
From: gregoryjward at gmail.com (Greg Ward)
Date: Fri, 12 Sep 2014 09:11:27 -0700
Subject: [Radiance-general] Luminance and Incidence angle question
In-Reply-To: <20140912213802.HM.R000000000IgLNA@ytwman.wwl1486.hanmail.net>
References: <20140912213802.HM.R000000000IgLNA@ytwman.wwl1486.hanmail.net>
Message-ID: <67F9265B-1223-4AD5-92ED-455D151FB9C1@lmi.net>

Depending on how your material is translated into Radiance, it either uses an exact formula for glass with an index of refraction of 1.52, or it uses a more advanced approximation than Rivero, which is defined in src/cv/window.cal.

Cheers,
-Greg

> From: "????" <ytwman at hanmail.net>
> Subject: [Radiance-general] Luminance and Incidence angle question
> Date: September 12, 2014 5:38:02 AM PDT
> 
> Dear all
> I'm worked Luminance analysis.
>  
> but, I saw Rivero formula. so I have question.
> 
> According to Rivero formula varies transmittance of the incidence angle.
>  
> Therefore, it seems to change the reflectance&transmittance of the incidence angle.
>  
> [Rivero formula, T1 = 1.018T2(Cos?+sin^3?cos?), T1= transmittance of the incidence angle?, T2= transmittance of the perpendicularly incident]
>  
> According to my results
>  
>  - Simulation summary -
>  
> [Glass material from optics6(NFRC ID 6974+6957), transmittance 0.5022, Reflectance(front) 0.178]
> [Date : June 21, 19:05 , Incidence angle[deg] : 83.244 ]
> [Latitude(deg) : 37.225 , Longitude(deg) : 127.07]
> [Sky : clear sky ( +s)]
>  
>  - Simulation result-
> Sun Luminance : 295,473,152 cd/m2
> A spot Lumimance(Specular reflection) : 52,734,259 cd/m2   |   B spot Luminance(Specular reflection) : 52,734,259 cd/m2
> A spot/Sun : 0.1785 , B spot/Sun : 0.1785   
>  
> This Reflectance ratio is similar of the glass material.
> I did the simulation proceeds properly?
> Is the angle of incidence of the light is applied?
>  
> Kind regards,
> Tae Wook
>  
>  
>  
> 
> 
>    _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20140912/4f1abe69/attachment.html>

From anniesim at surbana.com  Fri Sep 12 12:02:56 2014
From: anniesim at surbana.com (Sim Swee Ling Annie)
Date: Sat, 13 Sep 2014 03:02:56 +0800
Subject: [Radiance-general] Annie is out of the office.
Message-ID: <OF2FD68202.78F17F33-ON48257D51.0068A38E-48257D51.0068A38E@surbana.com>


I will be out of the office starting  09/11/2014 and will not return until
09/16/2014.

Kindly leave your email message and I shall get back to you the soonest
possible.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20140913/9c4a6d59/attachment.html>

From gregoryjward at gmail.com  Sun Sep 14 20:38:37 2014
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Sun, 14 Sep 2014 20:38:37 -0700
Subject: [Radiance-general] Ambient File and BSDF
In-Reply-To: <C3D724DF-A7E0-479E-A4ED-F5A783C60125@lmi.net>
References: <BE219063-594C-4496-97DF-1259112872EB@coolshadow.com>
	<C3D724DF-A7E0-479E-A4ED-F5A783C60125@lmi.net>
Message-ID: <005CD8D3-C4A3-4AD4-B82D-BCAFCA8D118E@gmail.com>

Hi Stephen,

This turned out to be a subtle problem that I've seen on rare occasions in the past related to the direct approximation in Radiance.  If you set -dt 0, the issue goes away (and accuracy improves).  In 1990 or so, I implemented an optimization in Radiance for many light sources that comes up with a statistical estimate of direct illumination.  It usually doesn't cause any issues, but in scenes with one or two sources and a lot of indirect illumination, it can result in systematic errors when you compute a scanline at a time.

In your scene, the indirect rays are all inside, and never see the sun directly.  (Even the rays that hit the window count as indirect.)  Thus, the statistical estimate of hitting the sun is very small or zero.  Once the rendering reaches the window, however, it treats it like a trans and computes direct rays from the opposite side, with nearly 100% of hitting the sun.  This causes a sudden shift in the statistical estimate, so that subsequent rays that forgo testing get this higher estimate.

As a fix, I've changed the code so with 4 or fewer sources, shadow rays will be sent every time, even when indirect dominates.  This should eliminate this problem and others like it.  I wish I had thought of this fix a long time ago....

Cheers,
-Greg

> From: Greg Ward <gward at lmi.net>
> Subject: Re: [Radiance-general] Ambient File and BSDF
> Date: September 11, 2014 8:01:19 PM PDT
> 
> Hi Stephen,
> 
> What is outside your space?  Did you model a ground plane?  What rendering parameters is rad handing to rpict and rpiece?
> 
> My best guess is that when your rays get to the upper sill of the window, they bounce outside and create ambient values that then leak some energy into your scene interior.  It shouldn't really happen with the latest release, so if that's what is going on, then there may be a bug in the new interreflection code.
> 
> If you want to send me your complete model, etc. offline, I can try to have a look at it tomorrow.
> 
> Cheers,
> -Greg
> 
>> From: Stephen Wasilewski <stephen at coolshadow.com>
>> Subject: [Radiance-general] Ambient File and BSDF
>> Date: September 11, 2014 6:57:27 PM PDT
>> 
>> I?m trying to model woven shades using a BSDF from the CGDB.  To get better looking and more accurate results I am using a BRDF as the standing geometry that is based off of a .cal file that greg wrote for metal grating:  https://www.dropbox.com/s/bzo9apzcl4ioika/rollershade.cal?dl=0
>> 
>> when I apply this material to geometry it behaves as expected and cuts off the direct relative to the angle of incidence (which I hope explains this funny test scene I?m using)
>> 
>> image of BRDF shades:  https://www.dropbox.com/s/tlcqqij9rjng5s6/BRDF_mar21_test_test_fc.jpg?dl=0
>> 
>> But this does not give me accurate diffuse values.  So I then put the BRDF as a proxy for the BSDF and get an image like this:
>> https://www.dropbox.com/s/7k2n38kvn5jp8fg/both_mar21_test_test_fc.jpg?dl=0
>> 
>> My question arises when I look at image without proxy geometry for the BSDF.
>> 
>> First rendered with multiple processes: https://www.dropbox.com/s/1cw56kwevnx9ajt/mt_BSDF_mar21_test_test_fc.jpg?dl=0
>> And run on a single processor: https://www.dropbox.com/s/pm5q8ikh6kgwh6f/BSDF_mar21_test_test_fc.jpg?dl=0
>> 
>> or to view it more starkly, the difference between the BSDF alone and with proxy:
>> 
>> bsdf - proxy: https://www.dropbox.com/s/hf2vy2wfpss7gr0/BSDFboth_fc.jpg?dl=0
>> proxy - bsdf: https://www.dropbox.com/s/di8duoz2gob0ams/bothBSDF_fc.jpg?dl=0
>> 
>> There is a major change in the ambient values once the rendering gets to the window (which is why the band is horizontal in the single process run and vertical in the multiple process run.  I ran these using rad so there is an overture calculation.  Anyone have an idea as to what is going on?
>> 
>> Stephen Wasilewski
>> LOISOS + UBBELOHDE


From ytwman at hanmail.net  Mon Sep 15 05:36:33 2014
From: ytwman at hanmail.net (Tae wook)
Date: Mon, 15 Sep 2014 12:36:33 +0000 (UTC)
Subject: [Radiance-general] Luminance and Incidence angle question
References: <20140912213802.HM.R000000000IgLNA@ytwman.wwl1486.hanmail.net>
	<67F9265B-1223-4AD5-92ED-455D151FB9C1@lmi.net>
Message-ID: <loom.20140915T143553-858@post.gmane.org>

Thank you for answered. Greg

I have any question.

1. Is my simulation of result about A,B spot/sun=0.1785  different from Optics 
glass reflectance 0.178?

2. You explain me 'Fresnel equations' about refraction right? 
Does RADIANCE apply it? 
If not, Could tell me which theory does RADIANCE apply?

Kind regards,
Tae Wook



From gregoryjward at gmail.com  Mon Sep 15 11:21:20 2014
From: gregoryjward at gmail.com (Greg Ward)
Date: Mon, 15 Sep 2014 11:21:20 -0700
Subject: [Radiance-general] Luminance and Incidence angle question
In-Reply-To: <loom.20140915T143553-858@post.gmane.org>
References: <20140912213802.HM.R000000000IgLNA@ytwman.wwl1486.hanmail.net>
	<67F9265B-1223-4AD5-92ED-455D151FB9C1@lmi.net>
	<loom.20140915T143553-858@post.gmane.org>
Message-ID: <5C3B29C7-BBF9-445D-B6FB-1E7E0775F526@lmi.net>

Answers:

1.  This is within the accuracy limit of the Radiance image format, which is slighly less than 1%.

2.  For the "glass" type, Radiance applies the infinite series of the Fresnel equations for two parallel dielectric interfaces with absorption.

-Greg

> From: Tae wook <ytwman at hanmail.net>
> Subject: Re: [Radiance-general] Luminance and Incidence angle question
> Date: September 15, 2014 5:36:33 AM PDT
> 
> Thank you for answered. Greg
> 
> I have any question.
> 
> 1. Is my simulation of result about A,B spot/sun=0.1785  different from Optics 
> glass reflectance 0.178?
> 
> 2. You explain me 'Fresnel equations' about refraction right? 
> Does RADIANCE apply it? 
> If not, Could tell me which theory does RADIANCE apply?
> 
> Kind regards,
> Tae Wook


From ytwman at hanmail.net  Mon Sep 15 16:49:07 2014
From: ytwman at hanmail.net (Tae wook)
Date: Mon, 15 Sep 2014 23:49:07 +0000 (UTC)
Subject: [Radiance-general] Luminance and Incidence angle question
References: <20140912213802.HM.R000000000IgLNA@ytwman.wwl1486.hanmail.net>
	<67F9265B-1223-4AD5-92ED-455D151FB9C1@lmi.net>
	<loom.20140915T143553-858@post.gmane.org>
	<5C3B29C7-BBF9-445D-B6FB-1E7E0775F526@lmi.net>
Message-ID: <loom.20140916T014453-385@post.gmane.org>

Thank you for your answer.

The question has been resolved.

Thanks.

Tae wook.



From nathanieljon at gmail.com  Wed Sep 17 10:58:23 2014
From: nathanieljon at gmail.com (Nathaniel Jones)
Date: Wed, 17 Sep 2014 13:58:23 -0400
Subject: [Radiance-general] Accelerad - lighting simulation on the GPU
Message-ID: <CAJR73ts3mCRxxFkvp-eYRnB8Ayia+CLNFp8CY9KqkvgRFfHtRw@mail.gmail.com>

I'm pleased to announce the beta release of Accelerad,
a free GPU-accelerated suite of programs for lighting and daylighting
analysis and visualization.

Accelerad uses physically-based backward ray tracing algorithms inspired by
Lawrence Berkeley National Laboratory?s popular Radiance software suite by
Greg Ward. These algorithms are accelerated up to twenty times faster using
a ray tracing engine built for the graphics processor unit (GPU). The
acceleration factor scales with the number of available GPUs and is
expected to increase on new generations of hardware. In order to allow for
smooth adoption among Radiance users and software developers, Accelerad
maintains compatibility with Radiance scene and output file formats and
currently uses a subset of Radiance?s material modifiers and command-line
arguments.

For more information and to receive a copy of the beta release, visit
http://mit.edu/sustainabledesignlab/projects/Accelerad/.

Nathaniel Jones
PhD student
Massachusetts Institute of Technology
http://nljones.scripts.mit.edu/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20140917/c63f1926/attachment.html>

From amcneil at lbl.gov  Wed Sep 24 10:42:00 2014
From: amcneil at lbl.gov (Andrew McNeil)
Date: Wed, 24 Sep 2014 10:42:00 -0700
Subject: [Radiance-general] comparing RTRACE vs DAYSIM Daylight
	Coefficients
In-Reply-To: <CAK+g53CW1Ge8qoC2xWA8ZPObQLv56zsUNuVbmQvqB4H8km2__w@mail.gmail.com>
References: <CAK+g53CW1Ge8qoC2xWA8ZPObQLv56zsUNuVbmQvqB4H8km2__w@mail.gmail.com>
Message-ID: <CAOG+NiyetJ6Uone0Pa-NADu5WmZPS+FbnmjxeqpCkyHjErVC3Q@mail.gmail.com>

Hi German,
Sorry to have taken so long to respond. When I first read your email I
didn't have time to dig in and planned to come back to it. Then I promptly
forgot about it.

The one thing that stands out, and could be a major source of error for a
clear sky is the ground reflectance. You're using 70% in the rtraced model,
but you aren't using it in the 5-phase method. Though if you have large-ish
local ground plane defined in scene.rad (which you always should, but even
the best of us sometimes leave out) this will be less of a problem.

You can specify ground reflectance in gendaymtx with the -g argument. The
default is -g 0.2 0.2 0.2 (which is a lot different from 70%). You
gendaymtx command would look something like this:
gendaymtx -h -g 0.7 0.7 0.7 -m 1 Santiago.wea > full_sky.skv

Let me know if this doesn't improve things and I'll dig in further.

Andy


On Tue, Sep 9, 2014 at 8:41 AM, CHI-German Molina <gmolina at hdlao.com> wrote:

> Dear All,
>
> I have been trying to replicate the "DAYSIM Daylight Coefficients",
> comparing those results with the RTRACE output. I am doing this following
> the 5 phase method tutorial, but I have not been succesful yet. Any
> comments would be great! I am not sure I am doing this well...
>
> So, what I did is to separate the whole scene (including overhangs) from
> the window.
>
> *FILE CONTENT*
>
> ##White.sky
> void glow skymat
> 0
> 0
> 4    1     1     1    0
>
> skymat source skysource
> 0
> 0
> 4     0    0    1    360
>
>
> ## suns.rad
> void light solar 0 0 3 1e6 1e6 1e6
> solar source sun 0 0 4 0 0.999 0.018 0.018 0.533
> .....
> lots of them.
>
> ## black.rad
> void plastic black
> 0
> 0
> 5 0 0 0 0 0
>
> ##clear.sky
> !gendaylit 3 1 9.5 -W 756 189 -g 0.7 -a -33.38 -o 70.78     ##There is a
> big ground with 70% reflectance
>
> skyfunc glow skyglow
> 0
> 0
> 4   1   1   1   0
>
> skyglow source skysource
> 0
> 0
> 4   0    0    1    360
>
>
> ##Santiago.wea
> place SANTIAGO_CHL
> latitude -33.38
> longitude 70.78
> time_zone 60
> site_elevation 476.0
> weather_data_file_units 1
> 1 1 9.5 756 189
>
>
>
>
>
> *RTRACE CALCULATIONS*
> oconv Materials/* scene.rad clear.sky windows.rad > clear_octree.oct
> cat Workplanes/WP.pts | rtrace -n 4 -I -ab 8 -ad 50000 -lw 2e-5 -dc 1 -dt
> 0 -dj 0 -st 1 -ss 0 -faa -af amb.af clear_octree.oct > rtrace.lux
>
>
> *DC CALCULATIONS*
>
> #Full sky DC
> oconv Materials/* scene.rad windows.rad white.sky > white_octree.oct
> gendaymtx -h -m 1 Santiago.wea > full_sky.skv
> cat Workplanes/WP.pts | rcontrib -e MF:1 -f reinhart.cal -b rbin -bn
> Nrbins -m skymat -n 4 -I -ab 8 -ad 50000 -lw 2e-5 -dc 1 -dt 0 -dj 0 -st 1
> -ss 0 white_octree.oct > DC1.mtx
> dctimestep -n 1 DC1.mtx full_sky.skv > DC1.lux
>
> #Direct sun from patches, to be sustracted
> xform -m scene.rad > black_scene.rad
> oconv Materials/* black.rad black_scene.rad windows.rad white.sky >
> black_octree.oct
> gendaymtx -h  -m 1 -d Santiago.wea > sun_only_sky.skv
> cat Workplanes/WP.pts | rcontrib -e MF:1 -f reinhart.cal -b rbin -bn
> Nrbins -m skymat -n 4 -I -ab 1 -ad 50000 -lw 2e-5 -dc 1 -dt 0 -dj 0 -st 1
> -ss 0 black_octree.oct > DC2.mtx
> dctimestep -n 1 DC2.mtx sun_only_sky.skv > DC2.lux
>
> #Sharp sun addition
> oconv Materials/* black.rad black_scene.rad windows.rad suns.rad >
> suns_octree.oct
> gendaymtx -h -m 6 -5 Santiago.wea > direct_sun_M6_sky.skv
> cat Workplanes/WP.pts | rcontrib  -n 4 -I -ab 1 -ad 50000 -lw 2e-5 -dc 1
> -dt 0 -dj 0 -st 1 -ss 0 -e MF:6 -f reinhart.cal -b rbin -bn Nrbins -m solar
> suns_octree.oct > directsun.mtx
> dctimestep -n 1 directsun.mtx direct_sun_M6_sky.skv > directSun.lux
>
>
>
> The results are horrible!!! So, any help would be awesome!!! THANKS
>
>
> --
> *Germ?n Molina L.*
> Ingeniero Trainee
> Hunter Douglas Chile S.A.
> Celular +569 89224445
>
> *Nota de Confidencialidad:* Este mensaje inclu?do los archivos adjuntos
> son confidenciales y pueden contener informacion privilegiada protegida por
> ley. Si Ud. no es el destinatario, deberia abstenerse de copiarlo,
> distribuirlo, divulgarlo o usar la informacion contenida. Por favor, avise
> inmediatamente al emisor y borre este mensaje de su sistema. Los mensajes
> electronicos son susceptibles de ser cambiados, infectados o adulterados
> sin autorizacion. No asumimos responsabilidad alguna por ninguna clase de
> cambios o sus consecuencias. Usted debe estar informado que la compania
> puede hacer un seguimiento de sus mensajes electronicos y su contenido,
> gracias.
>
> *Confidentiality Notice:* The information contained in this email
> message, including any attachment, is confidential and is intended only for
> the person or entity to which it is addressed. If you are neither the
> intended recipient nor the employee or agent responsible for delivering
> this message to the intended recipient, you are hereby notified that you
> may not review, retransmit, convert to hard copy, copy, use or distribute
> this email message or any attachments to it. If you have received this
> email in error, please contact the sender immediately and delete this
> message from any computer or other data bank, Thank you.
>
> A informa??o transmitida ? confidencial e para conhecimento exclusivo do
> destinat?rio. Sua utiliza??o, n?o autorizada, constitui crime pass?vel de
> pris?o. Todas as precau??es poss?veis foram tomadas para garantir que este
> e-mail n?o contenha v?rus. Uma vez que nossa empresa n?o pode assumir
> responsabilidade por nenhuma perda ou dano causado por este e-mail ou de
> seus anexos, recomendamos que o destinat?rio utilize seus procedimentos de
> antiv?rus antes de qualquer uso.
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20140924/4986d5db/attachment.html>

From edzhang at cs.washington.edu  Wed Sep 24 15:04:03 2014
From: edzhang at cs.washington.edu (Edward Zhang)
Date: Wed, 24 Sep 2014 15:04:03 -0700
Subject: [Radiance-general] Radiance output not satisfying radiosity
	equations
Message-ID: <CAGM_O-qSSFScdZ8q9ysUtRYoeZBgL03UD_MfDXk4rq1N6-Wu-g@mail.gmail.com>

Hi,

I'm working on an inverse rendering project and we're using Radiance to
generate synthetic data for validation. Given a scene with diffuse
surfaces, we're using the radiosity formulation as the core of our inverse
process, namely that at any given scene point:

radiosity at point = (reflectance at point) x
sum_over_scene_points(radiosity at scene point x form factor between points)

The sum is calculated using a hemicube method (with suitably high
resolution) and the radiosities are obtained from reprojecting the .hdr
outputs of Radiance onto the scene geometry.

My problem is that even in simple box scenes this equation doesn't hold.
Most of the time, the reflectance estimated from this equation is too low.
I've used enough ambient bounces that the Radiance output has converged,
but I'm wondering if there are other Radiance rendering options that might
be causing these problems.

Thanks for your help!

Edward
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20140924/47c928f6/attachment.html>

From amcneil at lbl.gov  Thu Sep 25 10:25:21 2014
From: amcneil at lbl.gov (Andrew McNeil)
Date: Thu, 25 Sep 2014 10:25:21 -0700
Subject: [Radiance-general] Radiance output not satisfying radiosity
	equations
In-Reply-To: <CAGM_O-qSSFScdZ8q9ysUtRYoeZBgL03UD_MfDXk4rq1N6-Wu-g@mail.gmail.com>
References: <CAGM_O-qSSFScdZ8q9ysUtRYoeZBgL03UD_MfDXk4rq1N6-Wu-g@mail.gmail.com>
Message-ID: <CAOG+Niz7eaLD9OR7oN6E=sRtTdU=eNFGs1JX8m-5_KGORy-F6A@mail.gmail.com>

Edward,

When I create ground truth renderings I pay close attention to the
following parameters:
-aa 0
-ad very high (like 10,000 - 50,000)
-lw between 1/ad and 1/ad^3

Also, if you're using large area illumination sources, use the glow
material instead of light material. If you're use light material for small
area sources pay attention to the direct sampling parameters (-d?).

Andy


On Wed, Sep 24, 2014 at 3:04 PM, Edward Zhang <edzhang at cs.washington.edu>
wrote:

> Hi,
>
> I'm working on an inverse rendering project and we're using Radiance to
> generate synthetic data for validation. Given a scene with diffuse
> surfaces, we're using the radiosity formulation as the core of our inverse
> process, namely that at any given scene point:
>
> radiosity at point = (reflectance at point) x
> sum_over_scene_points(radiosity at scene point x form factor between points)
>
> The sum is calculated using a hemicube method (with suitably high
> resolution) and the radiosities are obtained from reprojecting the .hdr
> outputs of Radiance onto the scene geometry.
>
> My problem is that even in simple box scenes this equation doesn't hold.
> Most of the time, the reflectance estimated from this equation is too low.
> I've used enough ambient bounces that the Radiance output has converged,
> but I'm wondering if there are other Radiance rendering options that might
> be causing these problems.
>
> Thanks for your help!
>
> Edward
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20140925/b1e86a6d/attachment.html>

From gmolina at hdlao.com  Thu Sep 25 14:56:45 2014
From: gmolina at hdlao.com (CHI-German Molina)
Date: Thu, 25 Sep 2014 18:56:45 -0300
Subject: [Radiance-general] comparing RTRACE vs DAYSIM Daylight
	Coefficients
In-Reply-To: <CAOG+NiyetJ6Uone0Pa-NADu5WmZPS+FbnmjxeqpCkyHjErVC3Q@mail.gmail.com>
References: <CAK+g53CW1Ge8qoC2xWA8ZPObQLv56zsUNuVbmQvqB4H8km2__w@mail.gmail.com>
	<CAOG+NiyetJ6Uone0Pa-NADu5WmZPS+FbnmjxeqpCkyHjErVC3Q@mail.gmail.com>
Message-ID: <CAK+g53BqgUuTWuGipU3WZhu7iBca1aaFFYOtPnS7O=3iDwz2jg@mail.gmail.com>

Thanks, Andy.

I have not been lucky yet. I am not sure I am using the correct
parameters....?

I will  try a few more things before asking again!

Bye

Germ?n



2014-09-24 14:42 GMT-03:00 Andrew McNeil <amcneil at lbl.gov>:

> Hi German,
> Sorry to have taken so long to respond. When I first read your email I
> didn't have time to dig in and planned to come back to it. Then I promptly
> forgot about it.
>
> The one thing that stands out, and could be a major source of error for a
> clear sky is the ground reflectance. You're using 70% in the rtraced model,
> but you aren't using it in the 5-phase method. Though if you have large-ish
> local ground plane defined in scene.rad (which you always should, but even
> the best of us sometimes leave out) this will be less of a problem.
>
> You can specify ground reflectance in gendaymtx with the -g argument. The
> default is -g 0.2 0.2 0.2 (which is a lot different from 70%). You
> gendaymtx command would look something like this:
> gendaymtx -h -g 0.7 0.7 0.7 -m 1 Santiago.wea > full_sky.skv
>
> Let me know if this doesn't improve things and I'll dig in further.
>
> Andy
>
>
> On Tue, Sep 9, 2014 at 8:41 AM, CHI-German Molina <gmolina at hdlao.com>
> wrote:
>
>> Dear All,
>>
>> I have been trying to replicate the "DAYSIM Daylight Coefficients",
>> comparing those results with the RTRACE output. I am doing this following
>> the 5 phase method tutorial, but I have not been succesful yet. Any
>> comments would be great! I am not sure I am doing this well...
>>
>> So, what I did is to separate the whole scene (including overhangs) from
>> the window.
>>
>> *FILE CONTENT*
>>
>> ##White.sky
>> void glow skymat
>> 0
>> 0
>> 4    1     1     1    0
>>
>> skymat source skysource
>> 0
>> 0
>> 4     0    0    1    360
>>
>>
>> ## suns.rad
>> void light solar 0 0 3 1e6 1e6 1e6
>> solar source sun 0 0 4 0 0.999 0.018 0.018 0.533
>> .....
>> lots of them.
>>
>> ## black.rad
>> void plastic black
>> 0
>> 0
>> 5 0 0 0 0 0
>>
>> ##clear.sky
>> !gendaylit 3 1 9.5 -W 756 189 -g 0.7 -a -33.38 -o 70.78     ##There is a
>> big ground with 70% reflectance
>>
>> skyfunc glow skyglow
>> 0
>> 0
>> 4   1   1   1   0
>>
>> skyglow source skysource
>> 0
>> 0
>> 4   0    0    1    360
>>
>>
>> ##Santiago.wea
>> place SANTIAGO_CHL
>> latitude -33.38
>> longitude 70.78
>> time_zone 60
>> site_elevation 476.0
>> weather_data_file_units 1
>> 1 1 9.5 756 189
>>
>>
>>
>>
>>
>> *RTRACE CALCULATIONS*
>> oconv Materials/* scene.rad clear.sky windows.rad > clear_octree.oct
>> cat Workplanes/WP.pts | rtrace -n 4 -I -ab 8 -ad 50000 -lw 2e-5 -dc 1 -dt
>> 0 -dj 0 -st 1 -ss 0 -faa -af amb.af clear_octree.oct > rtrace.lux
>>
>>
>> *DC CALCULATIONS*
>>
>> #Full sky DC
>> oconv Materials/* scene.rad windows.rad white.sky > white_octree.oct
>> gendaymtx -h -m 1 Santiago.wea > full_sky.skv
>> cat Workplanes/WP.pts | rcontrib -e MF:1 -f reinhart.cal -b rbin -bn
>> Nrbins -m skymat -n 4 -I -ab 8 -ad 50000 -lw 2e-5 -dc 1 -dt 0 -dj 0 -st 1
>> -ss 0 white_octree.oct > DC1.mtx
>> dctimestep -n 1 DC1.mtx full_sky.skv > DC1.lux
>>
>> #Direct sun from patches, to be sustracted
>> xform -m scene.rad > black_scene.rad
>> oconv Materials/* black.rad black_scene.rad windows.rad white.sky >
>> black_octree.oct
>> gendaymtx -h  -m 1 -d Santiago.wea > sun_only_sky.skv
>> cat Workplanes/WP.pts | rcontrib -e MF:1 -f reinhart.cal -b rbin -bn
>> Nrbins -m skymat -n 4 -I -ab 1 -ad 50000 -lw 2e-5 -dc 1 -dt 0 -dj 0 -st 1
>> -ss 0 black_octree.oct > DC2.mtx
>> dctimestep -n 1 DC2.mtx sun_only_sky.skv > DC2.lux
>>
>> #Sharp sun addition
>> oconv Materials/* black.rad black_scene.rad windows.rad suns.rad >
>> suns_octree.oct
>> gendaymtx -h -m 6 -5 Santiago.wea > direct_sun_M6_sky.skv
>> cat Workplanes/WP.pts | rcontrib  -n 4 -I -ab 1 -ad 50000 -lw 2e-5 -dc 1
>> -dt 0 -dj 0 -st 1 -ss 0 -e MF:6 -f reinhart.cal -b rbin -bn Nrbins -m solar
>> suns_octree.oct > directsun.mtx
>> dctimestep -n 1 directsun.mtx direct_sun_M6_sky.skv > directSun.lux
>>
>>
>>
>> The results are horrible!!! So, any help would be awesome!!! THANKS
>>
>>
>> --
>> *Germ?n Molina L.*
>> Ingeniero Trainee
>> Hunter Douglas Chile S.A.
>> Celular +569 89224445
>>
>> *Nota de Confidencialidad:* Este mensaje inclu?do los archivos adjuntos
>> son confidenciales y pueden contener informacion privilegiada protegida por
>> ley. Si Ud. no es el destinatario, deberia abstenerse de copiarlo,
>> distribuirlo, divulgarlo o usar la informacion contenida. Por favor, avise
>> inmediatamente al emisor y borre este mensaje de su sistema. Los mensajes
>> electronicos son susceptibles de ser cambiados, infectados o adulterados
>> sin autorizacion. No asumimos responsabilidad alguna por ninguna clase de
>> cambios o sus consecuencias. Usted debe estar informado que la compania
>> puede hacer un seguimiento de sus mensajes electronicos y su contenido,
>> gracias.
>>
>> *Confidentiality Notice:* The information contained in this email
>> message, including any attachment, is confidential and is intended only for
>> the person or entity to which it is addressed. If you are neither the
>> intended recipient nor the employee or agent responsible for delivering
>> this message to the intended recipient, you are hereby notified that you
>> may not review, retransmit, convert to hard copy, copy, use or distribute
>> this email message or any attachments to it. If you have received this
>> email in error, please contact the sender immediately and delete this
>> message from any computer or other data bank, Thank you.
>>
>> A informa??o transmitida ? confidencial e para conhecimento exclusivo do
>> destinat?rio. Sua utiliza??o, n?o autorizada, constitui crime pass?vel de
>> pris?o. Todas as precau??es poss?veis foram tomadas para garantir que este
>> e-mail n?o contenha v?rus. Uma vez que nossa empresa n?o pode assumir
>> responsabilidade por nenhuma perda ou dano causado por este e-mail ou de
>> seus anexos, recomendamos que o destinat?rio utilize seus procedimentos de
>> antiv?rus antes de qualquer uso.
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>


-- 
*Germ?n Molina L.*
Ingeniero Trainee
Hunter Douglas Chile S.A.
Celular +569 89224445

-- 


*Nota de Confidencialidad:* Este mensaje inclu?do los archivos adjuntos son 
confidenciales y pueden contener informacion privilegiada protegida por 
ley. Si Ud. no es el destinatario, deberia abstenerse de copiarlo, 
distribuirlo, divulgarlo o usar la informacion contenida. Por favor, avise 
inmediatamente al emisor y borre este mensaje de su sistema. Los mensajes 
electronicos son susceptibles de ser cambiados, infectados o adulterados 
sin autorizacion. No asumimos responsabilidad alguna por ninguna clase de 
cambios o sus consecuencias. Usted debe estar informado que la compania 
puede hacer un seguimiento de sus mensajes electronicos y su contenido, 
gracias.

*Confidentiality Notice:* The information contained in this email message, 
including any attachment, is confidential and is intended only for the 
person or entity to which it is addressed. If you are neither the intended 
recipient nor the employee or agent responsible for delivering this message 
to the intended recipient, you are hereby notified that you may not review, 
retransmit, convert to hard copy, copy, use or distribute this email 
message or any attachments to it. If you have received this email in error, 
please contact the sender immediately and delete this message from any 
computer or other data bank, Thank you.

A informa??o transmitida ? confidencial e para conhecimento exclusivo do 
destinat?rio. Sua utiliza??o, n?o autorizada, constitui crime pass?vel de 
pris?o. Todas as precau??es poss?veis foram tomadas para garantir que este 
e-mail n?o contenha v?rus. Uma vez que nossa empresa n?o pode assumir 
responsabilidade por nenhuma perda ou dano causado por este e-mail ou de 
seus anexos, recomendamos que o destinat?rio utilize seus procedimentos de 
antiv?rus antes de qualquer uso.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20140925/6bb3707b/attachment.html>

From gregoryjward at gmail.com  Fri Sep 26 14:38:51 2014
From: gregoryjward at gmail.com (Greg Ward)
Date: Fri, 26 Sep 2014 14:38:51 -0700
Subject: [Radiance-general] Radiance output not satisfying radiosity
	equations
In-Reply-To: <CAOG+Niz7eaLD9OR7oN6E=sRtTdU=eNFGs1JX8m-5_KGORy-F6A@mail.gmail.com>
References: <CAGM_O-qSSFScdZ8q9ysUtRYoeZBgL03UD_MfDXk4rq1N6-Wu-g@mail.gmail.com>
	<CAOG+Niz7eaLD9OR7oN6E=sRtTdU=eNFGs1JX8m-5_KGORy-F6A@mail.gmail.com>
Message-ID: <53F58B0D-2F83-4686-87F1-F0F3A60DE953@lmi.net>

Suggest using -dt 0 if you are computing many ambient bounces.

-Greg

> From: Andrew McNeil <amcneil at lbl.gov>
> Subject: Re: [Radiance-general] Radiance output not satisfying radiosity equations
> Date: September 25, 2014 10:25:21 AM PDT
> 
> Edward,
> 
> When I create ground truth renderings I pay close attention to the following parameters:
> -aa 0 
> -ad very high (like 10,000 - 50,000)
> -lw between 1/ad and 1/ad^3
> 
> Also, if you're using large area illumination sources, use the glow material instead of light material. If you're use light material for small area sources pay attention to the direct sampling parameters (-d?).
> 
> Andy
> 
> 
> On Wed, Sep 24, 2014 at 3:04 PM, Edward Zhang <edzhang at cs.washington.edu> wrote:
> Hi,
> 
> I'm working on an inverse rendering project and we're using Radiance to generate synthetic data for validation. Given a scene with diffuse surfaces, we're using the radiosity formulation as the core of our inverse process, namely that at any given scene point:
> 
> radiosity at point = (reflectance at point) x sum_over_scene_points(radiosity at scene point x form factor between points)
> 
> The sum is calculated using a hemicube method (with suitably high resolution) and the radiosities are obtained from reprojecting the .hdr outputs of Radiance onto the scene geometry.
> 
> My problem is that even in simple box scenes this equation doesn't hold. Most of the time, the reflectance estimated from this equation is too low. I've used enough ambient bounces that the Radiance output has converged, but I'm wondering if there are other Radiance rendering options that might be causing these problems.
> 
> Thanks for your help!
> 
> Edward
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
> 
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20140926/4c77c027/attachment.html>

