From jacobs.axel at gmail.com  Mon Dec 12 14:22:08 2016
From: jacobs.axel at gmail.com (Axel Jacobs)
Date: Mon, 12 Dec 2016 22:22:08 +0000
Subject: [Radiance-dev] NREL LINUX binary tar balls
Message-ID: <7d595209-b076-8e94-4feb-24ef29960797@gmail.com>

Hi devs, hi Rob,

I'm just helping someone in a far, far away country who is on an Ubuntu 
machine, but needs the latest getinfo (with the new -a option), as well 
as the most recent evalglare.

Her Radiance package seems to be very outdated, and I believe it is no 
longer actively maintained in any LINUX distro [citation needed].  I 
therefore thought that downloading and installing the 
radiance-5.0.a.12-Linux.tar.gz archive is the quickest option for her to 
get all the latest additions and bug fixes.

So I went to
https://github.com/NREL/Radiance/releases and downloaded the 5.0.a.12 
tar ball, which was released 3 Oct, which would suggest that it comes

- with the latest evalglare (2 Aug 2016)
http://radiance-online.org/cgi-bin/viewcvs.cgi/ray/src/util/evalglare.c?view=log&pathrev=MAIN
- with the latest getinfo (30 Aug)
http://radiance-online.org/cgi-bin/viewcvs.cgi/ray/src/util/getinfo.c?view=log&pathrev=MAIN

It turns out that the latest file in the entire tar ball is from 27 
April 2016:

find -type f -printf '%TY%Tm%Td-%TH%TM %p\n' |sort -r -n |head
20160427-2350 ./NREL_ver.txt
20160427-2350 ./lib/vchars.mta
20160427-2350 ./lib/symbols.mta
20160427-2350 ./bin/libtiff.so.5
20160427-2349 ./bin/rvu
...

and does not even contain the new fisheye_corr.cal which was added to 
Radiance 30 Aug 2015

http://radiance-online.org/cgi-bin/viewcvs.cgi/ray/src/cal/cal/fisheye_corr.cal?view=log&pathrev=MAIN

Is there an issue with the build system for LINUX?

Thank you for looking into this

Cheers

Axel


From jacobs.axel at gmail.com  Mon Dec 12 14:22:58 2016
From: jacobs.axel at gmail.com (Axel Jacobs)
Date: Mon, 12 Dec 2016 22:22:58 +0000
Subject: [Radiance-dev] NREL LINUX binary tar balls
Message-ID: <4807fdbe-98d1-1321-21b2-f234e1efac58@gmail.com>

Hi devs, hi Rob,

I'm just helping someone in a far, far away country who is on an Ubuntu 
machine, but needs the latest getinfo (with the new -a option), as well 
as the most recent evalglare.

Her Radiance package seems to be very outdated, and I believe it is no 
longer actively maintained in any LINUX distro [citation needed].  I 
therefore thought that downloading and installing the 
radiance-5.0.a.12-Linux.tar.gz archive is the quickest option for her to 
get all the latest additions and bug fixes.

So I went to
https://github.com/NREL/Radiance/releases and downloaded the 5.0.a.12 
tar ball, which was released 3 Oct, which would suggest that it comes

- with the latest evalglare (2 Aug 2016)
http://radiance-online.org/cgi-bin/viewcvs.cgi/ray/src/util/evalglare.c?view=log&pathrev=MAIN
- with the latest getinfo (30 Aug)
http://radiance-online.org/cgi-bin/viewcvs.cgi/ray/src/util/getinfo.c?view=log&pathrev=MAIN

It turns out that the latest file in the entire tar ball is from 27 
April 2016:

find -type f -printf '%TY%Tm%Td-%TH%TM %p\n' |sort -r -n |head
20160427-2350 ./NREL_ver.txt
20160427-2350 ./lib/vchars.mta
20160427-2350 ./lib/symbols.mta
20160427-2350 ./bin/libtiff.so.5
20160427-2349 ./bin/rvu
...

and does not even contain the new fisheye_corr.cal which was added to 
Radiance 30 Aug 2015

http://radiance-online.org/cgi-bin/viewcvs.cgi/ray/src/cal/cal/fisheye_corr.cal?view=log&pathrev=MAIN

Is there an issue with the build system for LINUX?  Within the source 
code Zip file on the NREL release page, all files are time stamped 3 Oct.

Thank you for looking into this

Cheers

Axel


From Robert.Guglielmetti at nrel.gov  Mon Dec 12 14:37:34 2016
From: Robert.Guglielmetti at nrel.gov (Guglielmetti, Robert)
Date: Mon, 12 Dec 2016 22:37:34 +0000
Subject: [Radiance-dev] NREL LINUX binary tar balls
In-Reply-To: <4807fdbe-98d1-1321-21b2-f234e1efac58@gmail.com>
References: <4807fdbe-98d1-1321-21b2-f234e1efac58@gmail.com>
Message-ID: <D4747365.9527%robert.guglielmetti@nrel.gov>

Hi Axel,

Looks like we need to fix these up a bit. I am in the process of getting
those packages up to scratch in anticipation of creating tar balls for all
three platforms, for inclusion in the upcoming OpenStudio 2.0 release
packages. I was not going to make a new release tag, since the current
code does not compile for Windows; however we should absolutely buff up
the Cmake files to include the new fisheye_corr.cal, and see what else
I?ve missed. Thanks for bringing this to my attention.

- Rob

On 12/12/16, 3:22 PM, "Axel Jacobs" <jacobs.axel at gmail.com> wrote:

>Hi devs, hi Rob,
>
>I'm just helping someone in a far, far away country who is on an Ubuntu
>machine, but needs the latest getinfo (with the new -a option), as well
>as the most recent evalglare.
>
>Her Radiance package seems to be very outdated, and I believe it is no
>longer actively maintained in any LINUX distro [citation needed].  I
>therefore thought that downloading and installing the
>radiance-5.0.a.12-Linux.tar.gz archive is the quickest option for her to
>get all the latest additions and bug fixes.
>
>So I went to
>https://github.com/NREL/Radiance/releases and downloaded the 5.0.a.12
>tar ball, which was released 3 Oct, which would suggest that it comes
>
>- with the latest evalglare (2 Aug 2016)
>http://radiance-online.org/cgi-bin/viewcvs.cgi/ray/src/util/evalglare.c?vi
>ew=log&pathrev=MAIN
>- with the latest getinfo (30 Aug)
>http://radiance-online.org/cgi-bin/viewcvs.cgi/ray/src/util/getinfo.c?view
>=log&pathrev=MAIN
>
>It turns out that the latest file in the entire tar ball is from 27
>April 2016:
>
>find -type f -printf '%TY%Tm%Td-%TH%TM %p\n' |sort -r -n |head
>20160427-2350 ./NREL_ver.txt
>20160427-2350 ./lib/vchars.mta
>20160427-2350 ./lib/symbols.mta
>20160427-2350 ./bin/libtiff.so.5
>20160427-2349 ./bin/rvu
>...
>
>and does not even contain the new fisheye_corr.cal which was added to
>Radiance 30 Aug 2015
>
>http://radiance-online.org/cgi-bin/viewcvs.cgi/ray/src/cal/cal/fisheye_cor
>r.cal?view=log&pathrev=MAIN
>
>Is there an issue with the build system for LINUX?  Within the source
>code Zip file on the NREL release page, all files are time stamped 3 Oct.
>
>Thank you for looking into this
>
>Cheers
>
>Axel
>
>_______________________________________________
>Radiance-dev mailing list
>Radiance-dev at radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-dev



From rioboo at gmail.com  Thu Dec 22 04:15:26 2016
From: rioboo at gmail.com (Victor LRG)
Date: Thu, 22 Dec 2016 12:15:26 +0000
Subject: [Radiance-dev] Compiling Radiance for Windows
Message-ID: <CADr1nSGwc2q1QKjaU4t67e4ze8jQqzkZNHBQa6nFOUTQn=y3ow@mail.gmail.com>

Dear all,

I amtrying to compile Radiance 5R0 for Windows using Cmake 3.7.1 x86 and
MVSC 2015 v14 with libtiff 3.8.2 and qt-x86-2.0.4. The compilation finished
with no errors (although some 1700 warnings), but when I am trying a simple
test I get the following error with ovonv: fatal - (!xform
objects/cage_sphere2.rad): bad arguments for polygon "311s1m134f". This
object has the following description, which seems right to me:

cage_sphere polygon 311s1m134f
0
0
9 -0.833925170898 0.506038208008 0.096073600769
   -0.819481933594 0.473128112793 0.0903565139771
   -0.853187255859 0.492587890625 0.0980178833008

In VS I can see the following warnings regarding oconv and xform:

C4273 'erf': inconsistent dll linkage
C4273 'erfc': inconsistent dll linkage

They both refer to rtmath.h file, which I guess they should refer to erf.c
as well? Actually, this warning also appears for most projects. I've
compiled and used the same package in linux before with no problem.

Any ideas?

Thanks

Victor Lopez-Rioboo Gil
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-dev/attachments/20161222/1e7eb6d9/attachment.html>

From Robert.Guglielmetti at nrel.gov  Thu Dec 22 06:39:27 2016
From: Robert.Guglielmetti at nrel.gov (Guglielmetti, Robert)
Date: Thu, 22 Dec 2016 14:39:27 +0000
Subject: [Radiance-dev] Compiling Radiance for Windows
In-Reply-To: <CADr1nSGwc2q1QKjaU4t67e4ze8jQqzkZNHBQa6nFOUTQn=y3ow@mail.gmail.com>
References: <CADr1nSGwc2q1QKjaU4t67e4ze8jQqzkZNHBQa6nFOUTQn=y3ow@mail.gmail.com>
Message-ID: <D4812EAA.97D9%robert.guglielmetti@nrel.gov>

What?s the vintage of the source code? There were a couple of minor
patches to the 5.0 official release (Mid-September), and the last tag that
builds for Windows for me is the 'NREL 5.0.a.12? tag:

https://github.com/NREL/Radiance/releases/tag/5.0.a.12


You could try the Windows installers we have, which seem to be working:

https://github.com/NREL/Radiance/releases/download/5.0.a.6/radiance-5.0.a.6
-win64.exe
https://github.com/NREL/Radiance/releases/download/5.0.a.6/radiance-5.0.a.6
-win32.exe

I also ?get? wanting to roll your own, though. Again you?d need to make
sure your source aligns with this commit, or earlier:
https://github.com/NREL/Radiance/commit/0c842736bf2b0908ba0ea42963ea8f4680c
d1fc5

And for the record, that NREL Windows build used Cmake 3.3.2, MSVC 12
2013, a libtiff I rolled myself with 4.0.4-beta, and Qt5.3.

The NREL packages aren?t bulletproof, I?m finding, but xform and oconv
seem to work fine. It?d be potentially mutually beneficial for you to try
the NREL package on your input and see what happens. Or, send me your test
input and we can go from there.

- Rob


On 12/22/16, 5:15 AM, "Victor LRG" <rioboo at gmail.com> wrote:

>Dear all,
>
>I amtrying to compile Radiance 5R0 for Windows using Cmake 3.7.1 x86 and
>MVSC 2015 v14 with libtiff 3.8.2 and qt-x86-2.0.4. The compilation
>finished with no errors (although some 1700 warnings), but when I am
>trying a simple test
> I get the following error with ovonv: fatal - (!xform
>objects/cage_sphere2.rad): bad arguments for polygon "311s1m134f". This
>object has the following description, which seems right to me:
>
>
>cage_sphere polygon 311s1m134f
>0
>0
>9 -0.833925170898 0.506038208008 0.096073600769
>   -0.819481933594 0.473128112793 0.0903565139771
>   -0.853187255859 0.492587890625 0.0980178833008
>
>
>
>In VS I can see the following warnings regarding oconv and xform:
>
>
>C4273 'erf': inconsistent dll linkage
>C4273 'erfc': inconsistent dll linkage
>
>
>
>They both refer to rtmath.h file, which I guess they should refer to
>erf.c as well? Actually, this warning also appears for most projects.
>I've compiled and used the same package in linux before with no problem.
>
>
>Any ideas?
>
>
>Thanks
>
>
>Victor Lopez-Rioboo Gil
>



From jan.wienold at epfl.ch  Thu Dec 22 07:00:04 2016
From: jan.wienold at epfl.ch (Jan Wienold)
Date: Thu, 22 Dec 2016 16:00:04 +0100
Subject: [Radiance-dev] Compiling Radiance for Windows
In-Reply-To: <D4812EAA.97D9%robert.guglielmetti@nrel.gov>
References: <CADr1nSGwc2q1QKjaU4t67e4ze8jQqzkZNHBQa6nFOUTQn=y3ow@mail.gmail.com>
 <D4812EAA.97D9%robert.guglielmetti@nrel.gov>
Message-ID: <fedb939b-24b2-24f6-7f63-14a105a99ffb@epfl.ch>

Hi Rob,

just a short question : is the evalglare-compilation bug for windows 
solved for the 5.0.a.12 ?

if not, just let me know if you need help for solving. Also give me a 
hint when a new "big" release is planned.

FYI: I away from 29.12 to 15.12 without access to email 8-)

best,

Jan


On 22/12/16 15:39, Guglielmetti, Robert wrote:
> What?s the vintage of the source code? There were a couple of minor
> patches to the 5.0 official release (Mid-September), and the last tag that
> builds for Windows for me is the 'NREL 5.0.a.12? tag:
>
> https://github.com/NREL/Radiance/releases/tag/5.0.a.12
>
>
> You could try the Windows installers we have, which seem to be working:
>
> https://github.com/NREL/Radiance/releases/download/5.0.a.6/radiance-5.0.a.6
> -win64.exe
> https://github.com/NREL/Radiance/releases/download/5.0.a.6/radiance-5.0.a.6
> -win32.exe
>
> I also ?get? wanting to roll your own, though. Again you?d need to make
> sure your source aligns with this commit, or earlier:
> https://github.com/NREL/Radiance/commit/0c842736bf2b0908ba0ea42963ea8f4680c
> d1fc5
>
> And for the record, that NREL Windows build used Cmake 3.3.2, MSVC 12
> 2013, a libtiff I rolled myself with 4.0.4-beta, and Qt5.3.
>
> The NREL packages aren?t bulletproof, I?m finding, but xform and oconv
> seem to work fine. It?d be potentially mutually beneficial for you to try
> the NREL package on your input and see what happens. Or, send me your test
> input and we can go from there.
>
> - Rob
>
>
> On 12/22/16, 5:15 AM, "Victor LRG" <rioboo at gmail.com> wrote:
>
>> Dear all,
>>
>> I amtrying to compile Radiance 5R0 for Windows using Cmake 3.7.1 x86 and
>> MVSC 2015 v14 with libtiff 3.8.2 and qt-x86-2.0.4. The compilation
>> finished with no errors (although some 1700 warnings), but when I am
>> trying a simple test
>> I get the following error with ovonv: fatal - (!xform
>> objects/cage_sphere2.rad): bad arguments for polygon "311s1m134f". This
>> object has the following description, which seems right to me:
>>
>>
>> cage_sphere polygon 311s1m134f
>> 0
>> 0
>> 9 -0.833925170898 0.506038208008 0.096073600769
>>    -0.819481933594 0.473128112793 0.0903565139771
>>    -0.853187255859 0.492587890625 0.0980178833008
>>
>>
>>
>> In VS I can see the following warnings regarding oconv and xform:
>>
>>
>> C4273 'erf': inconsistent dll linkage
>> C4273 'erfc': inconsistent dll linkage
>>
>>
>>
>> They both refer to rtmath.h file, which I guess they should refer to
>> erf.c as well? Actually, this warning also appears for most projects.
>> I've compiled and used the same package in linux before with no problem.
>>
>>
>> Any ideas?
>>
>>
>> Thanks
>>
>>
>> Victor Lopez-Rioboo Gil
>>
>
> _______________________________________________
> Radiance-dev mailing list
> Radiance-dev at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-dev

-- 
Dr.-Ing.  Jan Wienold
Ecole Polytechnique F?d?rale de Lausanne (EPFL)
EPFL ENAC IA LIPID

http://people.epfl.ch/jan.wienold
LE 1 111 (Office)
Phone    +41 21 69 30849



From rioboo at gmail.com  Thu Dec 22 07:09:31 2016
From: rioboo at gmail.com (Victor LRG)
Date: Thu, 22 Dec 2016 15:09:31 +0000
Subject: [Radiance-dev] Compiling Radiance for Windows
In-Reply-To: <D4812EAA.97D9%robert.guglielmetti@nrel.gov>
References: <CADr1nSGwc2q1QKjaU4t67e4ze8jQqzkZNHBQa6nFOUTQn=y3ow@mail.gmail.com>
 <D4812EAA.97D9%robert.guglielmetti@nrel.gov>
Message-ID: <CADr1nSEfjgUA-cMd=LEwMrZPjrtroOqk5s1=9LPH-1eFQ_94HA@mail.gmail.com>

Rob,

I have tried the last official release, so just 5.0. I'll try 5.0.a.12 to
see what happens. I have used the NREL Windows installers before and I had
no issues.

The reason I wanted to compile Radiance myself is that I was playing around
with the source code and I wanted to try the changes. So far I have
incorporated an equirectangular view to rpict (see Radiance General October
2016 Creating new view types for Radiance) and an additional option for
pextrem. They do seem to work fine in Linux, but unfortunately I not always
have access to a Linux machine. Therefore, it would be great to be able to
compile it for Windows.

I'll have a look at the link to the commit. For now a was using the
CMakeLists.txt that came with the source code package with the following
modifications:

cmake_policy(SET CMP0045 OLD)
SET(CMAKE_PREFIX_PATH ?C:/Qt/5.7/msvc2015_64/lib/cmake/Qt5Widgets?)
SET(TIFF_INCLUDE_DIR ?C:/Program Files (x86)/GnuWin32/include?)

I'll try using the CMake/MSVC/libtiff/Qt versions you suggest to see if
that makes a difference.

Many thanks,

Victor




On 22 December 2016 at 14:39, Guglielmetti, Robert <
Robert.Guglielmetti at nrel.gov> wrote:

> What?s the vintage of the source code? There were a couple of minor
> patches to the 5.0 official release (Mid-September), and the last tag that
> builds for Windows for me is the 'NREL 5.0.a.12? tag:
>
> https://github.com/NREL/Radiance/releases/tag/5.0.a.12
>
>
> You could try the Windows installers we have, which seem to be working:
>
> https://github.com/NREL/Radiance/releases/download/5.
> 0.a.6/radiance-5.0.a.6
> -win64.exe
> https://github.com/NREL/Radiance/releases/download/5.
> 0.a.6/radiance-5.0.a.6
> -win32.exe
>
> I also ?get? wanting to roll your own, though. Again you?d need to make
> sure your source aligns with this commit, or earlier:
> https://github.com/NREL/Radiance/commit/0c842736bf2b0908ba0ea42963ea8f
> 4680c
> d1fc5
>
> And for the record, that NREL Windows build used Cmake 3.3.2, MSVC 12
> 2013, a libtiff I rolled myself with 4.0.4-beta, and Qt5.3.
>
> The NREL packages aren?t bulletproof, I?m finding, but xform and oconv
> seem to work fine. It?d be potentially mutually beneficial for you to try
> the NREL package on your input and see what happens. Or, send me your test
> input and we can go from there.
>
> - Rob
>
>
> On 12/22/16, 5:15 AM, "Victor LRG" <rioboo at gmail.com> wrote:
>
> >Dear all,
> >
> >I amtrying to compile Radiance 5R0 for Windows using Cmake 3.7.1 x86 and
> >MVSC 2015 v14 with libtiff 3.8.2 and qt-x86-2.0.4. The compilation
> >finished with no errors (although some 1700 warnings), but when I am
> >trying a simple test
> > I get the following error with ovonv: fatal - (!xform
> >objects/cage_sphere2.rad): bad arguments for polygon "311s1m134f". This
> >object has the following description, which seems right to me:
> >
> >
> >cage_sphere polygon 311s1m134f
> >0
> >0
> >9 -0.833925170898 0.506038208008 0.096073600769
> >   -0.819481933594 0.473128112793 0.0903565139771
> >   -0.853187255859 0.492587890625 0.0980178833008
> >
> >
> >
> >In VS I can see the following warnings regarding oconv and xform:
> >
> >
> >C4273 'erf': inconsistent dll linkage
> >C4273 'erfc': inconsistent dll linkage
> >
> >
> >
> >They both refer to rtmath.h file, which I guess they should refer to
> >erf.c as well? Actually, this warning also appears for most projects.
> >I've compiled and used the same package in linux before with no problem.
> >
> >
> >Any ideas?
> >
> >
> >Thanks
> >
> >
> >Victor Lopez-Rioboo Gil
> >
>
>
> _______________________________________________
> Radiance-dev mailing list
> Radiance-dev at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-dev/attachments/20161222/0719143c/attachment-0001.html>

From nathanieljon at gmail.com  Thu Dec 22 07:11:39 2016
From: nathanieljon at gmail.com (Nathaniel Jones)
Date: Thu, 22 Dec 2016 10:11:39 -0500
Subject: [Radiance-dev] Compiling Radiance for Windows
In-Reply-To: <fedb939b-24b2-24f6-7f63-14a105a99ffb@epfl.ch>
References: <CADr1nSGwc2q1QKjaU4t67e4ze8jQqzkZNHBQa6nFOUTQn=y3ow@mail.gmail.com>
 <D4812EAA.97D9%robert.guglielmetti@nrel.gov>
 <fedb939b-24b2-24f6-7f63-14a105a99ffb@epfl.ch>
Message-ID: <CAJR73tv9m+0rnBn6RTehC-URScTjXgxzhnZ909gKL0JUkBwhmg@mail.gmail.com>

"Roll your own" has been working fine for me with the GitHub combined
branch head, VS2013, CMake 3.3.1, Qt 5.5, and the libtiff rolled from the
source files included in the repo. I haven't seed any problems with
evalglare, and I believe the erf and erfc warnings were fixed a few months
ago. I do get this warning with all the projects now:

1>D:\nljones\Radiance\src\common\platform.h(24): warning C4005: 'fseeko' :
macro redefinition
1>          command-line arguments :  see previous definition of 'fseeko'

Nathaniel

On Thu, Dec 22, 2016 at 10:00 AM, Jan Wienold <jan.wienold at epfl.ch> wrote:

> Hi Rob,
>
> just a short question : is the evalglare-compilation bug for windows
> solved for the 5.0.a.12 ?
>
> if not, just let me know if you need help for solving. Also give me a hint
> when a new "big" release is planned.
>
> FYI: I away from 29.12 to 15.12 without access to email 8-)
>
> best,
>
> Jan
>
>
>
> On 22/12/16 15:39, Guglielmetti, Robert wrote:
>
>> What?s the vintage of the source code? There were a couple of minor
>> patches to the 5.0 official release (Mid-September), and the last tag that
>> builds for Windows for me is the 'NREL 5.0.a.12? tag:
>>
>> https://github.com/NREL/Radiance/releases/tag/5.0.a.12
>>
>>
>> You could try the Windows installers we have, which seem to be working:
>>
>> https://github.com/NREL/Radiance/releases/download/5.0.a.6/
>> radiance-5.0.a.6
>> -win64.exe
>> https://github.com/NREL/Radiance/releases/download/5.0.a.6/
>> radiance-5.0.a.6
>> -win32.exe
>>
>> I also ?get? wanting to roll your own, though. Again you?d need to make
>> sure your source aligns with this commit, or earlier:
>> https://github.com/NREL/Radiance/commit/0c842736bf2b0908ba0e
>> a42963ea8f4680c
>> d1fc5
>>
>> And for the record, that NREL Windows build used Cmake 3.3.2, MSVC 12
>> 2013, a libtiff I rolled myself with 4.0.4-beta, and Qt5.3.
>>
>> The NREL packages aren?t bulletproof, I?m finding, but xform and oconv
>> seem to work fine. It?d be potentially mutually beneficial for you to try
>> the NREL package on your input and see what happens. Or, send me your test
>> input and we can go from there.
>>
>> - Rob
>>
>>
>> On 12/22/16, 5:15 AM, "Victor LRG" <rioboo at gmail.com> wrote:
>>
>> Dear all,
>>>
>>> I amtrying to compile Radiance 5R0 for Windows using Cmake 3.7.1 x86 and
>>> MVSC 2015 v14 with libtiff 3.8.2 and qt-x86-2.0.4. The compilation
>>> finished with no errors (although some 1700 warnings), but when I am
>>> trying a simple test
>>> I get the following error with ovonv: fatal - (!xform
>>> objects/cage_sphere2.rad): bad arguments for polygon "311s1m134f". This
>>> object has the following description, which seems right to me:
>>>
>>>
>>> cage_sphere polygon 311s1m134f
>>> 0
>>> 0
>>> 9 -0.833925170898 0.506038208008 0.096073600769
>>>    -0.819481933594 0.473128112793 0.0903565139771
>>>    -0.853187255859 0.492587890625 0.0980178833008
>>>
>>>
>>>
>>> In VS I can see the following warnings regarding oconv and xform:
>>>
>>>
>>> C4273 'erf': inconsistent dll linkage
>>> C4273 'erfc': inconsistent dll linkage
>>>
>>>
>>>
>>> They both refer to rtmath.h file, which I guess they should refer to
>>> erf.c as well? Actually, this warning also appears for most projects.
>>> I've compiled and used the same package in linux before with no problem.
>>>
>>>
>>> Any ideas?
>>>
>>>
>>> Thanks
>>>
>>>
>>> Victor Lopez-Rioboo Gil
>>>
>>>
>> _______________________________________________
>> Radiance-dev mailing list
>> Radiance-dev at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-dev
>>
>
> --
> Dr.-Ing.  Jan Wienold
> Ecole Polytechnique F?d?rale de Lausanne (EPFL)
> EPFL ENAC IA LIPID
>
> http://people.epfl.ch/jan.wienold
> LE 1 111 (Office)
> Phone    +41 21 69 30849
>
>
>
> _______________________________________________
> Radiance-dev mailing list
> Radiance-dev at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-dev/attachments/20161222/dfc1bd36/attachment.html>

From rioboo at gmail.com  Thu Dec 22 08:08:17 2016
From: rioboo at gmail.com (Victor LRG)
Date: Thu, 22 Dec 2016 16:08:17 +0000
Subject: [Radiance-dev] Compiling Radiance for Windows
In-Reply-To: <CAJR73tv9m+0rnBn6RTehC-URScTjXgxzhnZ909gKL0JUkBwhmg@mail.gmail.com>
References: <CADr1nSGwc2q1QKjaU4t67e4ze8jQqzkZNHBQa6nFOUTQn=y3ow@mail.gmail.com>
 <D4812EAA.97D9%robert.guglielmetti@nrel.gov>
 <fedb939b-24b2-24f6-7f63-14a105a99ffb@epfl.ch>
 <CAJR73tv9m+0rnBn6RTehC-URScTjXgxzhnZ909gKL0JUkBwhmg@mail.gmail.com>
Message-ID: <CADr1nSE8EL=dE3J7hE72CdqrvqJMa_5S2t6GfDoRPPUUiy8d5w@mail.gmail.com>

Nathaniel/Robert,

I've tried compiling 5.0.a.12 and I also get the same C4005 'fseeko' macro
definition warning (no more erf/erfc warnings though). Annoyingly,
xform/oconv are still giving me the same problems, but I'am not sure if
that is related to these warnings.

For now I am still using MVSC2015 and Cmake 3.7.1. I wonder if it is worth
trying the older versions you are using. It is a bit of work to remove and
reinstall MVSC...

Cheers,

Victor

On 22 December 2016 at 15:11, Nathaniel Jones <nathanieljon at gmail.com>
wrote:

> "Roll your own" has been working fine for me with the GitHub combined
> branch head, VS2013, CMake 3.3.1, Qt 5.5, and the libtiff rolled from the
> source files included in the repo. I haven't seed any problems with
> evalglare, and I believe the erf and erfc warnings were fixed a few months
> ago. I do get this warning with all the projects now:
>
> 1>D:\nljones\Radiance\src\common\platform.h(24): warning C4005: 'fseeko'
> : macro redefinition
> 1>          command-line arguments :  see previous definition of 'fseeko'
>
> Nathaniel
>
> On Thu, Dec 22, 2016 at 10:00 AM, Jan Wienold <jan.wienold at epfl.ch> wrote:
>
>> Hi Rob,
>>
>> just a short question : is the evalglare-compilation bug for windows
>> solved for the 5.0.a.12 ?
>>
>> if not, just let me know if you need help for solving. Also give me a
>> hint when a new "big" release is planned.
>>
>> FYI: I away from 29.12 to 15.12 without access to email 8-)
>>
>> best,
>>
>> Jan
>>
>>
>>
>> On 22/12/16 15:39, Guglielmetti, Robert wrote:
>>
>>> What?s the vintage of the source code? There were a couple of minor
>>> patches to the 5.0 official release (Mid-September), and the last tag
>>> that
>>> builds for Windows for me is the 'NREL 5.0.a.12? tag:
>>>
>>> https://github.com/NREL/Radiance/releases/tag/5.0.a.12
>>>
>>>
>>> You could try the Windows installers we have, which seem to be working:
>>>
>>> https://github.com/NREL/Radiance/releases/download/5.0.a.6/r
>>> adiance-5.0.a.6
>>> -win64.exe
>>> https://github.com/NREL/Radiance/releases/download/5.0.a.6/r
>>> adiance-5.0.a.6
>>> -win32.exe
>>>
>>> I also ?get? wanting to roll your own, though. Again you?d need to make
>>> sure your source aligns with this commit, or earlier:
>>> https://github.com/NREL/Radiance/commit/0c842736bf2b0908ba0e
>>> a42963ea8f4680c
>>> d1fc5
>>>
>>> And for the record, that NREL Windows build used Cmake 3.3.2, MSVC 12
>>> 2013, a libtiff I rolled myself with 4.0.4-beta, and Qt5.3.
>>>
>>> The NREL packages aren?t bulletproof, I?m finding, but xform and oconv
>>> seem to work fine. It?d be potentially mutually beneficial for you to try
>>> the NREL package on your input and see what happens. Or, send me your
>>> test
>>> input and we can go from there.
>>>
>>> - Rob
>>>
>>>
>>> On 12/22/16, 5:15 AM, "Victor LRG" <rioboo at gmail.com> wrote:
>>>
>>> Dear all,
>>>>
>>>> I amtrying to compile Radiance 5R0 for Windows using Cmake 3.7.1 x86 and
>>>> MVSC 2015 v14 with libtiff 3.8.2 and qt-x86-2.0.4. The compilation
>>>> finished with no errors (although some 1700 warnings), but when I am
>>>> trying a simple test
>>>> I get the following error with ovonv: fatal - (!xform
>>>> objects/cage_sphere2.rad): bad arguments for polygon "311s1m134f". This
>>>> object has the following description, which seems right to me:
>>>>
>>>>
>>>> cage_sphere polygon 311s1m134f
>>>> 0
>>>> 0
>>>> 9 -0.833925170898 0.506038208008 0.096073600769
>>>>    -0.819481933594 0.473128112793 0.0903565139771
>>>>    -0.853187255859 0.492587890625 0.0980178833008
>>>>
>>>>
>>>>
>>>> In VS I can see the following warnings regarding oconv and xform:
>>>>
>>>>
>>>> C4273 'erf': inconsistent dll linkage
>>>> C4273 'erfc': inconsistent dll linkage
>>>>
>>>>
>>>>
>>>> They both refer to rtmath.h file, which I guess they should refer to
>>>> erf.c as well? Actually, this warning also appears for most projects.
>>>> I've compiled and used the same package in linux before with no problem.
>>>>
>>>>
>>>> Any ideas?
>>>>
>>>>
>>>> Thanks
>>>>
>>>>
>>>> Victor Lopez-Rioboo Gil
>>>>
>>>>
>>> _______________________________________________
>>> Radiance-dev mailing list
>>> Radiance-dev at radiance-online.org
>>> http://www.radiance-online.org/mailman/listinfo/radiance-dev
>>>
>>
>> --
>> Dr.-Ing.  Jan Wienold
>> Ecole Polytechnique F?d?rale de Lausanne (EPFL)
>> EPFL ENAC IA LIPID
>>
>> http://people.epfl.ch/jan.wienold
>> LE 1 111 (Office)
>> Phone    +41 21 69 30849
>>
>>
>>
>> _______________________________________________
>> Radiance-dev mailing list
>> Radiance-dev at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-dev
>>
>
>
> _______________________________________________
> Radiance-dev mailing list
> Radiance-dev at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-dev/attachments/20161222/02cfa775/attachment-0001.html>

From nathanieljon at gmail.com  Thu Dec 22 08:42:49 2016
From: nathanieljon at gmail.com (Nathaniel Jones)
Date: Thu, 22 Dec 2016 11:42:49 -0500
Subject: [Radiance-dev] Compiling Radiance for Windows
In-Reply-To: <CADr1nSE8EL=dE3J7hE72CdqrvqJMa_5S2t6GfDoRPPUUiy8d5w@mail.gmail.com>
References: <CADr1nSGwc2q1QKjaU4t67e4ze8jQqzkZNHBQa6nFOUTQn=y3ow@mail.gmail.com>
 <D4812EAA.97D9%robert.guglielmetti@nrel.gov>
 <fedb939b-24b2-24f6-7f63-14a105a99ffb@epfl.ch>
 <CAJR73tv9m+0rnBn6RTehC-URScTjXgxzhnZ909gKL0JUkBwhmg@mail.gmail.com>
 <CADr1nSE8EL=dE3J7hE72CdqrvqJMa_5S2t6GfDoRPPUUiy8d5w@mail.gmail.com>
Message-ID: <CAJR73ts9n_KLtk2ZxMtqVRohhHEnkrnY1b0F7_nLB9LDdoW2uw@mail.gmail.com>

Well, the fseeko macro is only used by rcontrib, even though it appears in
a header that gets used almost everywhere. So that's unlikely to be the
problem.

For what it's worth, I had no problem running that triangle through my
compiled oconv. The error seems to indicate some problem reading the real
arguments. Does everything work if you remove that triangle from the model?
Or is this a problem with reading all polygons?

It's hard to imagine that something like this would change depending on the
MVSC version, but I guess if you've eliminated all the other
possibilities...

Nathaniel

On Thu, Dec 22, 2016 at 11:08 AM, Victor LRG <rioboo at gmail.com> wrote:

> Nathaniel/Robert,
>
> I've tried compiling 5.0.a.12 and I also get the same C4005 'fseeko' macro
> definition warning (no more erf/erfc warnings though). Annoyingly,
> xform/oconv are still giving me the same problems, but I'am not sure if
> that is related to these warnings.
>
> For now I am still using MVSC2015 and Cmake 3.7.1. I wonder if it is worth
> trying the older versions you are using. It is a bit of work to remove and
> reinstall MVSC...
>
> Cheers,
>
> Victor
>
> On 22 December 2016 at 15:11, Nathaniel Jones <nathanieljon at gmail.com>
> wrote:
>
>> "Roll your own" has been working fine for me with the GitHub combined
>> branch head, VS2013, CMake 3.3.1, Qt 5.5, and the libtiff rolled from the
>> source files included in the repo. I haven't seed any problems with
>> evalglare, and I believe the erf and erfc warnings were fixed a few months
>> ago. I do get this warning with all the projects now:
>>
>> 1>D:\nljones\Radiance\src\common\platform.h(24): warning C4005: 'fseeko'
>> : macro redefinition
>> 1>          command-line arguments :  see previous definition of 'fseeko'
>>
>> Nathaniel
>>
>> On Thu, Dec 22, 2016 at 10:00 AM, Jan Wienold <jan.wienold at epfl.ch>
>> wrote:
>>
>>> Hi Rob,
>>>
>>> just a short question : is the evalglare-compilation bug for windows
>>> solved for the 5.0.a.12 ?
>>>
>>> if not, just let me know if you need help for solving. Also give me a
>>> hint when a new "big" release is planned.
>>>
>>> FYI: I away from 29.12 to 15.12 without access to email 8-)
>>>
>>> best,
>>>
>>> Jan
>>>
>>>
>>>
>>> On 22/12/16 15:39, Guglielmetti, Robert wrote:
>>>
>>>> What?s the vintage of the source code? There were a couple of minor
>>>> patches to the 5.0 official release (Mid-September), and the last tag
>>>> that
>>>> builds for Windows for me is the 'NREL 5.0.a.12? tag:
>>>>
>>>> https://github.com/NREL/Radiance/releases/tag/5.0.a.12
>>>>
>>>>
>>>> You could try the Windows installers we have, which seem to be working:
>>>>
>>>> https://github.com/NREL/Radiance/releases/download/5.0.a.6/r
>>>> adiance-5.0.a.6
>>>> -win64.exe
>>>> https://github.com/NREL/Radiance/releases/download/5.0.a.6/r
>>>> adiance-5.0.a.6
>>>> -win32.exe
>>>>
>>>> I also ?get? wanting to roll your own, though. Again you?d need to make
>>>> sure your source aligns with this commit, or earlier:
>>>> https://github.com/NREL/Radiance/commit/0c842736bf2b0908ba0e
>>>> a42963ea8f4680c
>>>> d1fc5
>>>>
>>>> And for the record, that NREL Windows build used Cmake 3.3.2, MSVC 12
>>>> 2013, a libtiff I rolled myself with 4.0.4-beta, and Qt5.3.
>>>>
>>>> The NREL packages aren?t bulletproof, I?m finding, but xform and oconv
>>>> seem to work fine. It?d be potentially mutually beneficial for you to
>>>> try
>>>> the NREL package on your input and see what happens. Or, send me your
>>>> test
>>>> input and we can go from there.
>>>>
>>>> - Rob
>>>>
>>>>
>>>> On 12/22/16, 5:15 AM, "Victor LRG" <rioboo at gmail.com> wrote:
>>>>
>>>> Dear all,
>>>>>
>>>>> I amtrying to compile Radiance 5R0 for Windows using Cmake 3.7.1 x86
>>>>> and
>>>>> MVSC 2015 v14 with libtiff 3.8.2 and qt-x86-2.0.4. The compilation
>>>>> finished with no errors (although some 1700 warnings), but when I am
>>>>> trying a simple test
>>>>> I get the following error with ovonv: fatal - (!xform
>>>>> objects/cage_sphere2.rad): bad arguments for polygon "311s1m134f". This
>>>>> object has the following description, which seems right to me:
>>>>>
>>>>>
>>>>> cage_sphere polygon 311s1m134f
>>>>> 0
>>>>> 0
>>>>> 9 -0.833925170898 0.506038208008 0.096073600769
>>>>>    -0.819481933594 0.473128112793 0.0903565139771
>>>>>    -0.853187255859 0.492587890625 0.0980178833008
>>>>>
>>>>>
>>>>>
>>>>> In VS I can see the following warnings regarding oconv and xform:
>>>>>
>>>>>
>>>>> C4273 'erf': inconsistent dll linkage
>>>>> C4273 'erfc': inconsistent dll linkage
>>>>>
>>>>>
>>>>>
>>>>> They both refer to rtmath.h file, which I guess they should refer to
>>>>> erf.c as well? Actually, this warning also appears for most projects.
>>>>> I've compiled and used the same package in linux before with no
>>>>> problem.
>>>>>
>>>>>
>>>>> Any ideas?
>>>>>
>>>>>
>>>>> Thanks
>>>>>
>>>>>
>>>>> Victor Lopez-Rioboo Gil
>>>>>
>>>>>
>>>> _______________________________________________
>>>> Radiance-dev mailing list
>>>> Radiance-dev at radiance-online.org
>>>> http://www.radiance-online.org/mailman/listinfo/radiance-dev
>>>>
>>>
>>> --
>>> Dr.-Ing.  Jan Wienold
>>> Ecole Polytechnique F?d?rale de Lausanne (EPFL)
>>> EPFL ENAC IA LIPID
>>>
>>> http://people.epfl.ch/jan.wienold
>>> LE 1 111 (Office)
>>> Phone    +41 21 69 30849
>>>
>>>
>>>
>>> _______________________________________________
>>> Radiance-dev mailing list
>>> Radiance-dev at radiance-online.org
>>> http://www.radiance-online.org/mailman/listinfo/radiance-dev
>>>
>>
>>
>> _______________________________________________
>> Radiance-dev mailing list
>> Radiance-dev at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-dev
>>
>>
>
> _______________________________________________
> Radiance-dev mailing list
> Radiance-dev at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-dev/attachments/20161222/69925bc0/attachment.html>

From gregoryjward at gmail.com  Thu Dec 22 09:15:11 2016
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Thu, 22 Dec 2016 09:15:11 -0800
Subject: [Radiance-dev] Compiling Radiance for Windows
In-Reply-To: <CAJR73ts9n_KLtk2ZxMtqVRohhHEnkrnY1b0F7_nLB9LDdoW2uw@mail.gmail.com>
References: <CADr1nSGwc2q1QKjaU4t67e4ze8jQqzkZNHBQa6nFOUTQn=y3ow@mail.gmail.com>
 <D4812EAA.97D9%robert.guglielmetti@nrel.gov>
 <fedb939b-24b2-24f6-7f63-14a105a99ffb@epfl.ch>
 <CAJR73tv9m+0rnBn6RTehC-URScTjXgxzhnZ909gKL0JUkBwhmg@mail.gmail.com>
 <CADr1nSE8EL=dE3J7hE72CdqrvqJMa_5S2t6GfDoRPPUUiy8d5w@mail.gmail.com>
 <CAJR73ts9n_KLtk2ZxMtqVRohhHEnkrnY1b0F7_nLB9LDdoW2uw@mail.gmail.com>
Message-ID: <38F9C743-71FB-4F91-AE1E-4EB75E6F3312@gmail.com>

I just checked in a fix for the fseeko macro warning, but I doubt it's related to the errors you're seeing.

Did you run xform on its own to see what it spits out for this file?  We should figure out if it's xform rather than oconv that is screwing up.

Cheers,
-Greg

> From: Nathaniel Jones <nathanieljon at gmail.com>
> Date: December 22, 2016 8:42:49 AM PST
> 
> Well, the fseeko macro is only used by rcontrib, even though it appears in a header that gets used almost everywhere. So that's unlikely to be the problem.
> 
> For what it's worth, I had no problem running that triangle through my compiled oconv. The error seems to indicate some problem reading the real arguments. Does everything work if you remove that triangle from the model? Or is this a problem with reading all polygons?
> 
> It's hard to imagine that something like this would change depending on the MVSC version, but I guess if you've eliminated all the other possibilities...
> 
> Nathaniel
> 
> On Thu, Dec 22, 2016 at 11:08 AM, Victor LRG <rioboo at gmail.com> wrote:
> Nathaniel/Robert,
> 
> I've tried compiling 5.0.a.12 and I also get the same C4005 'fseeko' macro definition warning (no more erf/erfc warnings though). Annoyingly, xform/oconv are still giving me the same problems, but I'am not sure if that is related to these warnings.
> 
> For now I am still using MVSC2015 and Cmake 3.7.1. I wonder if it is worth trying the older versions you are using. It is a bit of work to remove and reinstall MVSC...
> 
> Cheers,
> 
> Victor
> 
> On 22 December 2016 at 15:11, Nathaniel Jones <nathanieljon at gmail.com> wrote:
> "Roll your own" has been working fine for me with the GitHub combined branch head, VS2013, CMake 3.3.1, Qt 5.5, and the libtiff rolled from the source files included in the repo. I haven't seed any problems with evalglare, and I believe the erf and erfc warnings were fixed a few months ago. I do get this warning with all the projects now:
> 
> 1>D:\nljones\Radiance\src\common\platform.h(24): warning C4005: 'fseeko' : macro redefinition
> 1>          command-line arguments :  see previous definition of 'fseeko'
> 
> Nathaniel
> 
> On Thu, Dec 22, 2016 at 10:00 AM, Jan Wienold <jan.wienold at epfl.ch> wrote:
> Hi Rob,
> 
> just a short question : is the evalglare-compilation bug for windows solved for the 5.0.a.12 ?
> 
> if not, just let me know if you need help for solving. Also give me a hint when a new "big" release is planned.
> 
> FYI: I away from 29.12 to 15.12 without access to email 8-)
> 
> best,
> 
> Jan
> 
> 
> 
> On 22/12/16 15:39, Guglielmetti, Robert wrote:
> What?s the vintage of the source code? There were a couple of minor
> patches to the 5.0 official release (Mid-September), and the last tag that
> builds for Windows for me is the 'NREL 5.0.a.12? tag:
> 
> https://github.com/NREL/Radiance/releases/tag/5.0.a.12
> 
> 
> You could try the Windows installers we have, which seem to be working:
> 
> https://github.com/NREL/Radiance/releases/download/5.0.a.6/radiance-5.0.a.6
> -win64.exe
> https://github.com/NREL/Radiance/releases/download/5.0.a.6/radiance-5.0.a.6
> -win32.exe
> 
> I also ?get? wanting to roll your own, though. Again you?d need to make
> sure your source aligns with this commit, or earlier:
> https://github.com/NREL/Radiance/commit/0c842736bf2b0908ba0ea42963ea8f4680c
> d1fc5
> 
> And for the record, that NREL Windows build used Cmake 3.3.2, MSVC 12
> 2013, a libtiff I rolled myself with 4.0.4-beta, and Qt5.3.
> 
> The NREL packages aren?t bulletproof, I?m finding, but xform and oconv
> seem to work fine. It?d be potentially mutually beneficial for you to try
> the NREL package on your input and see what happens. Or, send me your test
> input and we can go from there.
> 
> - Rob
> 
> 
> On 12/22/16, 5:15 AM, "Victor LRG" <rioboo at gmail.com> wrote:
> 
> Dear all,
> 
> I amtrying to compile Radiance 5R0 for Windows using Cmake 3.7.1 x86 and
> MVSC 2015 v14 with libtiff 3.8.2 and qt-x86-2.0.4. The compilation
> finished with no errors (although some 1700 warnings), but when I am
> trying a simple test
> I get the following error with ovonv: fatal - (!xform
> objects/cage_sphere2.rad): bad arguments for polygon "311s1m134f". This
> object has the following description, which seems right to me:
> 
> 
> cage_sphere polygon 311s1m134f
> 0
> 0
> 9 -0.833925170898 0.506038208008 0.096073600769
>    -0.819481933594 0.473128112793 0.0903565139771
>    -0.853187255859 0.492587890625 0.0980178833008
> 
> 
> 
> In VS I can see the following warnings regarding oconv and xform:
> 
> 
> C4273 'erf': inconsistent dll linkage
> C4273 'erfc': inconsistent dll linkage
> 
> 
> 
> They both refer to rtmath.h file, which I guess they should refer to
> erf.c as well? Actually, this warning also appears for most projects.
> I've compiled and used the same package in linux before with no problem.
> 
> 
> Any ideas?
> 
> 
> Thanks
> 
> 
> Victor Lopez-Rioboo Gil
> 
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-dev/attachments/20161222/61a57ada/attachment-0001.html>

From rioboo at gmail.com  Thu Dec 22 09:38:15 2016
From: rioboo at gmail.com (Victor LRG)
Date: Thu, 22 Dec 2016 17:38:15 +0000
Subject: [Radiance-dev] Compiling Radiance for Windows
In-Reply-To: <38F9C743-71FB-4F91-AE1E-4EB75E6F3312@gmail.com>
References: <CADr1nSGwc2q1QKjaU4t67e4ze8jQqzkZNHBQa6nFOUTQn=y3ow@mail.gmail.com>
 <D4812EAA.97D9%robert.guglielmetti@nrel.gov>
 <fedb939b-24b2-24f6-7f63-14a105a99ffb@epfl.ch>
 <CAJR73tv9m+0rnBn6RTehC-URScTjXgxzhnZ909gKL0JUkBwhmg@mail.gmail.com>
 <CADr1nSE8EL=dE3J7hE72CdqrvqJMa_5S2t6GfDoRPPUUiy8d5w@mail.gmail.com>
 <CAJR73ts9n_KLtk2ZxMtqVRohhHEnkrnY1b0F7_nLB9LDdoW2uw@mail.gmail.com>
 <38F9C743-71FB-4F91-AE1E-4EB75E6F3312@gmail.com>
Message-ID: <CADr1nSHn55vvZ9mLnMEtkDxhHJBJVbO6sNYjbhLAx2oJ1F5+sg@mail.gmail.com>

Greg,

I've tried xform and oconv and they do seem to work on their own. However,
the problem is still happening when I try to oconv a scene file with xform,
which I always use for convenience:

!xform materials\mat.rad
!xform objects\cage_sphere.rad

I never had problems with that before, so I'm quite puzzled. I get bad
arguments for polygon... and then it looks like sometimes I get a random
polygon and sometimes the same one.

I have tried the same oconv and xform files in another computer and it says
VCRUNTIME140D.dll is missing...

Best,

Victor

On 22 December 2016 at 17:15, Gregory J. Ward <gregoryjward at gmail.com>
wrote:

> I just checked in a fix for the fseeko macro warning, but I doubt it's
> related to the errors you're seeing.
>
> Did you run xform on its own to see what it spits out for this file?  We
> should figure out if it's xform rather than oconv that is screwing up.
>
> Cheers,
> -Greg
>
> *From: *Nathaniel Jones <nathanieljon at gmail.com>
>
> *Date: *December 22, 2016 8:42:49 AM PST
>
>
> Well, the fseeko macro is only used by rcontrib, even though it appears in
> a header that gets used almost everywhere. So that's unlikely to be the
> problem.
>
> For what it's worth, I had no problem running that triangle through my
> compiled oconv. The error seems to indicate some problem reading the real
> arguments. Does everything work if you remove that triangle from the model?
> Or is this a problem with reading all polygons?
>
> It's hard to imagine that something like this would change depending on
> the MVSC version, but I guess if you've eliminated all the other
> possibilities...
>
> Nathaniel
>
> On Thu, Dec 22, 2016 at 11:08 AM, Victor LRG <rioboo at gmail.com> wrote:
>
>> Nathaniel/Robert,
>>
>> I've tried compiling 5.0.a.12 and I also get the same C4005 'fseeko'
>> macro definition warning (no more erf/erfc warnings though). Annoyingly,
>> xform/oconv are still giving me the same problems, but I'am not sure if
>> that is related to these warnings.
>>
>> For now I am still using MVSC2015 and Cmake 3.7.1. I wonder if it is
>> worth trying the older versions you are using. It is a bit of work to
>> remove and reinstall MVSC...
>>
>> Cheers,
>>
>> Victor
>>
>> On 22 December 2016 at 15:11, Nathaniel Jones <nathanieljon at gmail.com>
>> wrote:
>>
>>> "Roll your own" has been working fine for me with the GitHub combined
>>> branch head, VS2013, CMake 3.3.1, Qt 5.5, and the libtiff rolled from the
>>> source files included in the repo. I haven't seed any problems with
>>> evalglare, and I believe the erf and erfc warnings were fixed a few months
>>> ago. I do get this warning with all the projects now:
>>>
>>> 1>D:\nljones\Radiance\src\common\platform.h(24): warning C4005:
>>> 'fseeko' : macro redefinition
>>> 1>          command-line arguments :  see previous definition of 'fseeko'
>>>
>>> Nathaniel
>>>
>>> On Thu, Dec 22, 2016 at 10:00 AM, Jan Wienold <jan.wienold at epfl.ch>
>>> wrote:
>>>
>>>> Hi Rob,
>>>>
>>>> just a short question : is the evalglare-compilation bug for windows
>>>> solved for the 5.0.a.12 ?
>>>>
>>>> if not, just let me know if you need help for solving. Also give me a
>>>> hint when a new "big" release is planned.
>>>>
>>>> FYI: I away from 29.12 to 15.12 without access to email 8-)
>>>>
>>>> best,
>>>>
>>>> Jan
>>>>
>>>>
>>>>
>>>> On 22/12/16 15:39, Guglielmetti, Robert wrote:
>>>>
>>>>> What?s the vintage of the source code? There were a couple of minor
>>>>> patches to the 5.0 official release (Mid-September), and the last tag
>>>>> that
>>>>> builds for Windows for me is the 'NREL 5.0.a.12? tag:
>>>>>
>>>>> https://github.com/NREL/Radiance/releases/tag/5.0.a.12
>>>>>
>>>>>
>>>>> You could try the Windows installers we have, which seem to be working:
>>>>>
>>>>> https://github.com/NREL/Radiance/releases/download/5.0.a.6/r
>>>>> adiance-5.0.a.6
>>>>> -win64.exe
>>>>> https://github.com/NREL/Radiance/releases/download/5.0.a.6/r
>>>>> adiance-5.0.a.6
>>>>> -win32.exe
>>>>>
>>>>> I also ?get? wanting to roll your own, though. Again you?d need to make
>>>>> sure your source aligns with this commit, or earlier:
>>>>> https://github.com/NREL/Radiance/commit/0c842736bf2b0908ba0e
>>>>> a42963ea8f4680c
>>>>> d1fc5
>>>>>
>>>>> And for the record, that NREL Windows build used Cmake 3.3.2, MSVC 12
>>>>> 2013, a libtiff I rolled myself with 4.0.4-beta, and Qt5.3.
>>>>>
>>>>> The NREL packages aren?t bulletproof, I?m finding, but xform and oconv
>>>>> seem to work fine. It?d be potentially mutually beneficial for you to
>>>>> try
>>>>> the NREL package on your input and see what happens. Or, send me your
>>>>> test
>>>>> input and we can go from there.
>>>>>
>>>>> - Rob
>>>>>
>>>>>
>>>>> On 12/22/16, 5:15 AM, "Victor LRG" <rioboo at gmail.com> wrote:
>>>>>
>>>>> Dear all,
>>>>>>
>>>>>> I amtrying to compile Radiance 5R0 for Windows using Cmake 3.7.1 x86
>>>>>> and
>>>>>> MVSC 2015 v14 with libtiff 3.8.2 and qt-x86-2.0.4. The compilation
>>>>>> finished with no errors (although some 1700 warnings), but when I am
>>>>>> trying a simple test
>>>>>> I get the following error with ovonv: fatal - (!xform
>>>>>> objects/cage_sphere2.rad): bad arguments for polygon "311s1m134f".
>>>>>> This
>>>>>> object has the following description, which seems right to me:
>>>>>>
>>>>>>
>>>>>> cage_sphere polygon 311s1m134f
>>>>>> 0
>>>>>> 0
>>>>>> 9 -0.833925170898 0.506038208008 0.096073600769
>>>>>>    -0.819481933594 0.473128112793 0.0903565139771
>>>>>>    -0.853187255859 0.492587890625 0.0980178833008
>>>>>>
>>>>>>
>>>>>>
>>>>>> In VS I can see the following warnings regarding oconv and xform:
>>>>>>
>>>>>>
>>>>>> C4273 'erf': inconsistent dll linkage
>>>>>> C4273 'erfc': inconsistent dll linkage
>>>>>>
>>>>>>
>>>>>>
>>>>>> They both refer to rtmath.h file, which I guess they should refer to
>>>>>> erf.c as well? Actually, this warning also appears for most projects.
>>>>>> I've compiled and used the same package in linux before with no
>>>>>> problem.
>>>>>>
>>>>>>
>>>>>> Any ideas?
>>>>>>
>>>>>>
>>>>>> Thanks
>>>>>>
>>>>>>
>>>>>> Victor Lopez-Rioboo Gil
>>>>>>
>>>>>>
>
> _______________________________________________
> Radiance-dev mailing list
> Radiance-dev at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-dev/attachments/20161222/4e20748e/attachment.html>

From gregoryjward at gmail.com  Thu Dec 22 09:42:14 2016
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Thu, 22 Dec 2016 09:42:14 -0800
Subject: [Radiance-dev] Compiling Radiance for Windows
In-Reply-To: <CADr1nSHn55vvZ9mLnMEtkDxhHJBJVbO6sNYjbhLAx2oJ1F5+sg@mail.gmail.com>
References: <CADr1nSGwc2q1QKjaU4t67e4ze8jQqzkZNHBQa6nFOUTQn=y3ow@mail.gmail.com>
 <D4812EAA.97D9%robert.guglielmetti@nrel.gov>
 <fedb939b-24b2-24f6-7f63-14a105a99ffb@epfl.ch>
 <CAJR73tv9m+0rnBn6RTehC-URScTjXgxzhnZ909gKL0JUkBwhmg@mail.gmail.com>
 <CADr1nSE8EL=dE3J7hE72CdqrvqJMa_5S2t6GfDoRPPUUiy8d5w@mail.gmail.com>
 <CAJR73ts9n_KLtk2ZxMtqVRohhHEnkrnY1b0F7_nLB9LDdoW2uw@mail.gmail.com>
 <38F9C743-71FB-4F91-AE1E-4EB75E6F3312@gmail.com>
 <CADr1nSHn55vvZ9mLnMEtkDxhHJBJVbO6sNYjbhLAx2oJ1F5+sg@mail.gmail.com>
Message-ID: <5FF7220A-BEA1-432F-86AF-F575D02C8CBB@gmail.com>

This sounds like a popen() i/o error.  We've seen these in the past under Windows, and I have no idea about their cause or remedy.  Is this just a problem with the binaries you've compiled, or does it also happen with the package distribution?

-Greg

> From: Victor LRG <rioboo at gmail.com>
> Date: December 22, 2016 9:38:15 AM PST
> 
> Greg,
> 
> I've tried xform and oconv and they do seem to work on their own. However, the problem is still happening when I try to oconv a scene file with xform, which I always use for convenience:
> 
> !xform materials\mat.rad
> !xform objects\cage_sphere.rad
> 
> I never had problems with that before, so I'm quite puzzled. I get bad arguments for polygon... and then it looks like sometimes I get a random polygon and sometimes the same one.
> 
> I have tried the same oconv and xform files in another computer and it says VCRUNTIME140D.dll is missing...
> 
> Best,
> 
> Victor
> 
> On 22 December 2016 at 17:15, Gregory J. Ward <gregoryjward at gmail.com> wrote:
> I just checked in a fix for the fseeko macro warning, but I doubt it's related to the errors you're seeing.
> 
> Did you run xform on its own to see what it spits out for this file?  We should figure out if it's xform rather than oconv that is screwing up.
> 
> Cheers,
> -Greg
> 
>> From: Nathaniel Jones <nathanieljon at gmail.com>
>> Date: December 22, 2016 8:42:49 AM PST
>> 
>> Well, the fseeko macro is only used by rcontrib, even though it appears in a header that gets used almost everywhere. So that's unlikely to be the problem.
>> 
>> For what it's worth, I had no problem running that triangle through my compiled oconv. The error seems to indicate some problem reading the real arguments. Does everything work if you remove that triangle from the model? Or is this a problem with reading all polygons?
>> 
>> It's hard to imagine that something like this would change depending on the MVSC version, but I guess if you've eliminated all the other possibilities...
>> 
>> Nathaniel
>> 
>> On Thu, Dec 22, 2016 at 11:08 AM, Victor LRG <rioboo at gmail.com> wrote:
>> Nathaniel/Robert,
>> 
>> I've tried compiling 5.0.a.12 and I also get the same C4005 'fseeko' macro definition warning (no more erf/erfc warnings though). Annoyingly, xform/oconv are still giving me the same problems, but I'am not sure if that is related to these warnings.
>> 
>> For now I am still using MVSC2015 and Cmake 3.7.1. I wonder if it is worth trying the older versions you are using. It is a bit of work to remove and reinstall MVSC...
>> 
>> Cheers,
>> 
>> Victor
>> 
>> On 22 December 2016 at 15:11, Nathaniel Jones <nathanieljon at gmail.com> wrote:
>> "Roll your own" has been working fine for me with the GitHub combined branch head, VS2013, CMake 3.3.1, Qt 5.5, and the libtiff rolled from the source files included in the repo. I haven't seed any problems with evalglare, and I believe the erf and erfc warnings were fixed a few months ago. I do get this warning with all the projects now:
>> 
>> 1>D:\nljones\Radiance\src\common\platform.h(24): warning C4005: 'fseeko' : macro redefinition
>> 1>          command-line arguments :  see previous definition of 'fseeko'
>> 
>> Nathaniel
>> 
>> On Thu, Dec 22, 2016 at 10:00 AM, Jan Wienold <jan.wienold at epfl.ch> wrote:
>> Hi Rob,
>> 
>> just a short question : is the evalglare-compilation bug for windows solved for the 5.0.a.12 ?
>> 
>> if not, just let me know if you need help for solving. Also give me a hint when a new "big" release is planned.
>> 
>> FYI: I away from 29.12 to 15.12 without access to email 8-)
>> 
>> best,
>> 
>> Jan
>> 
>> 
>> 
>> On 22/12/16 15:39, Guglielmetti, Robert wrote:
>> What?s the vintage of the source code? There were a couple of minor
>> patches to the 5.0 official release (Mid-September), and the last tag that
>> builds for Windows for me is the 'NREL 5.0.a.12? tag:
>> 
>> https://github.com/NREL/Radiance/releases/tag/5.0.a.12
>> 
>> 
>> You could try the Windows installers we have, which seem to be working:
>> 
>> https://github.com/NREL/Radiance/releases/download/5.0.a.6/radiance-5.0.a.6
>> -win64.exe
>> https://github.com/NREL/Radiance/releases/download/5.0.a.6/radiance-5.0.a.6
>> -win32.exe
>> 
>> I also ?get? wanting to roll your own, though. Again you?d need to make
>> sure your source aligns with this commit, or earlier:
>> https://github.com/NREL/Radiance/commit/0c842736bf2b0908ba0ea42963ea8f4680c
>> d1fc5
>> 
>> And for the record, that NREL Windows build used Cmake 3.3.2, MSVC 12
>> 2013, a libtiff I rolled myself with 4.0.4-beta, and Qt5.3.
>> 
>> The NREL packages aren?t bulletproof, I?m finding, but xform and oconv
>> seem to work fine. It?d be potentially mutually beneficial for you to try
>> the NREL package on your input and see what happens. Or, send me your test
>> input and we can go from there.
>> 
>> - Rob
>> 
>> 
>> On 12/22/16, 5:15 AM, "Victor LRG" <rioboo at gmail.com> wrote:
>> 
>> Dear all,
>> 
>> I amtrying to compile Radiance 5R0 for Windows using Cmake 3.7.1 x86 and
>> MVSC 2015 v14 with libtiff 3.8.2 and qt-x86-2.0.4. The compilation
>> finished with no errors (although some 1700 warnings), but when I am
>> trying a simple test
>> I get the following error with ovonv: fatal - (!xform
>> objects/cage_sphere2.rad): bad arguments for polygon "311s1m134f". This
>> object has the following description, which seems right to me:
>> 
>> 
>> cage_sphere polygon 311s1m134f
>> 0
>> 0
>> 9 -0.833925170898 0.506038208008 0.096073600769
>>    -0.819481933594 0.473128112793 0.0903565139771
>>    -0.853187255859 0.492587890625 0.0980178833008
>> 
>> 
>> 
>> In VS I can see the following warnings regarding oconv and xform:
>> 
>> 
>> C4273 'erf': inconsistent dll linkage
>> C4273 'erfc': inconsistent dll linkage
>> 
>> 
>> 
>> They both refer to rtmath.h file, which I guess they should refer to
>> erf.c as well? Actually, this warning also appears for most projects.
>> I've compiled and used the same package in linux before with no problem.
>> 
>> 
>> Any ideas?
>> 
>> 
>> Thanks
>> 
>> 
>> Victor Lopez-Rioboo Gil
>> 
>> 
> 
> _______________________________________________
> Radiance-dev mailing list
> Radiance-dev at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-dev
> 
> 
> _______________________________________________
> Radiance-dev mailing list
> Radiance-dev at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-dev/attachments/20161222/49f9fc49/attachment-0001.html>

From rioboo at gmail.com  Fri Dec 23 05:03:23 2016
From: rioboo at gmail.com (Victor LRG)
Date: Fri, 23 Dec 2016 13:03:23 +0000
Subject: [Radiance-dev] Compiling Radiance for Windows
In-Reply-To: <D4812EAA.97D9%robert.guglielmetti@nrel.gov>
References: <CADr1nSGwc2q1QKjaU4t67e4ze8jQqzkZNHBQa6nFOUTQn=y3ow@mail.gmail.com>
 <D4812EAA.97D9%robert.guglielmetti@nrel.gov>
Message-ID: <CADr1nSE_Qyk-8eDQA87rwoG_+w8hSzaKCdZ+=dt5=2NKuWR=qQ@mail.gmail.com>

Robert,

Actually, your cooking recipe does work for me as well!, at least for
Radiance 5.0. It looks like there is something wrong when using more recent
versions of MVSC and/or CMake... but that's another story. So far I'm happy
with the result. Thanks!

Merry Christmas!

Victor

On 22 December 2016 at 14:39, Guglielmetti, Robert <
Robert.Guglielmetti at nrel.gov> wrote:

> What?s the vintage of the source code? There were a couple of minor
> patches to the 5.0 official release (Mid-September), and the last tag that
> builds for Windows for me is the 'NREL 5.0.a.12? tag:
>
> https://github.com/NREL/Radiance/releases/tag/5.0.a.12
>
>
> You could try the Windows installers we have, which seem to be working:
>
> https://github.com/NREL/Radiance/releases/download/5.
> 0.a.6/radiance-5.0.a.6
> -win64.exe
> https://github.com/NREL/Radiance/releases/download/5.
> 0.a.6/radiance-5.0.a.6
> -win32.exe
>
> I also ?get? wanting to roll your own, though. Again you?d need to make
> sure your source aligns with this commit, or earlier:
> https://github.com/NREL/Radiance/commit/0c842736bf2b0908ba0ea42963ea8f
> 4680c
> d1fc5
>
> And for the record, that NREL Windows build used Cmake 3.3.2, MSVC 12
> 2013, a libtiff I rolled myself with 4.0.4-beta, and Qt5.3.
>
> The NREL packages aren?t bulletproof, I?m finding, but xform and oconv
> seem to work fine. It?d be potentially mutually beneficial for you to try
> the NREL package on your input and see what happens. Or, send me your test
> input and we can go from there.
>
> - Rob
>
>
> On 12/22/16, 5:15 AM, "Victor LRG" <rioboo at gmail.com> wrote:
>
> >Dear all,
> >
> >I amtrying to compile Radiance 5R0 for Windows using Cmake 3.7.1 x86 and
> >MVSC 2015 v14 with libtiff 3.8.2 and qt-x86-2.0.4. The compilation
> >finished with no errors (although some 1700 warnings), but when I am
> >trying a simple test
> > I get the following error with ovonv: fatal - (!xform
> >objects/cage_sphere2.rad): bad arguments for polygon "311s1m134f". This
> >object has the following description, which seems right to me:
> >
> >
> >cage_sphere polygon 311s1m134f
> >0
> >0
> >9 -0.833925170898 0.506038208008 0.096073600769
> >   -0.819481933594 0.473128112793 0.0903565139771
> >   -0.853187255859 0.492587890625 0.0980178833008
> >
> >
> >
> >In VS I can see the following warnings regarding oconv and xform:
> >
> >
> >C4273 'erf': inconsistent dll linkage
> >C4273 'erfc': inconsistent dll linkage
> >
> >
> >
> >They both refer to rtmath.h file, which I guess they should refer to
> >erf.c as well? Actually, this warning also appears for most projects.
> >I've compiled and used the same package in linux before with no problem.
> >
> >
> >Any ideas?
> >
> >
> >Thanks
> >
> >
> >Victor Lopez-Rioboo Gil
> >
>
>
> _______________________________________________
> Radiance-dev mailing list
> Radiance-dev at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-dev/attachments/20161223/79fbc836/attachment.html>

