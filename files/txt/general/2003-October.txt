From radiance-general@radiance-online.org  Wed Oct  1 02:56:02 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Tue, 30 Sep 2003 21:56:02 -0400
Subject: [Radiance-general] Online availability of conference CD-ROM?
Message-ID: <6936E058-F3B2-11D7-B99D-000393824274@rumblestrip.org>

Question for the 2003 Radiance Workshop attendees (hi everyone!):

Last year, the workshop CD was made available online as an iso image 
for anyone who wanted it.  Will we be doing that again this year?  I 
vote yes; Peter, is there room/bandwidth available on 
radiance-online.org?  Reason I ask is that I'm writing a little report 
on the Workshop for my friend's computer graphics website, and I'd like 
to mention whether this is available (as I did last year).  I recall 
everyone voted on it last year, at the workshop.  Maybe we could reach 
an e-consensus here?  Let me know.

Rob Guglielmetti
rpg@rumblestrip.org
www.rumblestrip.org


From radiance-general@radiance-online.org  Wed Oct  1 15:24:10 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Wed, 01 Oct 2003 10:24:10 -0400
Subject: [Radiance-general] Online availability of conference CD-ROM?
Message-ID: <3F7AE38A.70609@rumblestrip.org>

Er...

http://www.radiance-online.org/radiance-workshop2/cd/

In the words of Emily Litella, "never mind".  =8-)

Thanks Peter!

----

      Rob Guglielmetti

e. rpg@rumblestrip.org
w. www.rumblestrip.org


From radiance-general@radiance-online.org  Wed Oct  1 17:36:24 2003
From: radiance-general@radiance-online.org (Jeffrey McGrew)
Date: Wed, 1 Oct 2003 09:36:24 -0700
Subject: [Radiance-general] Re: Aiming Failures and Geometry
Message-ID: <14F4D3C7236B9C42B381D1F66D78C6D9A09146@hunt-exch-01.huntsmanag.com>

> I perform quite a bit of my modeling 
> with 3D Studio VIZ. 

I might be able to help you out. I model everything
with AutoDesk Revit, and then export to AutoCAD &
use RADOUT to generate my Radiance files.

(Once Revit gets better export control for 3D or
an API I'll just export from Revit directly).

I use AutoCAD to 'clean-up' my model and set things
on more specific layers, which in turn translate those
items into separately named .rad files. 

> Once 
> rendering of the scene begins, a bunch of "Aiming failure" 
> error messages 
> are generated for all of my window polygons.

I too get this error sometimes, but not with the windows
(because my windows are rectangles), I get it with the
light fixtures, because the luminescent bit of the light
fixture isn't a radiance object, but rather a bunch of
triangles or polygons exported from CAD, which cause
problems as light sources. (it makes since why when
you read the documentation on it).

What I've found to be the best way around this is to
make the luminescent part of the light fixtures into
a 'place holder' object, that I then go in and replace
with a radiance object within the .rad files.

For example, I might have a bulb within a light fixture.
Within CAD, I'll just have a point or a single triangle
marking the location of that point in space. Then, once
the model is exported to .rad files, I go in, and replace
those 'placeholders' with Radiance spheres, and then I
don't have any problems with aiming failures when that
part of the light fixture is made into a light source
for my render.

But I'm just using Radiance for rendering, not for
light analysis, so I would think that this isn't a
terribly accurate approach if you're trying to
model a fixture for testing. 

Jeffrey


From radiance-general@radiance-online.org  Wed Oct  1 19:38:32 2003
From: radiance-general@radiance-online.org (Marcus Jacobs)
Date: Wed, 01 Oct 2003 18:38:32 +0000
Subject: [Radiance-general] Sequence for using pfilt and pcond
Message-ID: <BAY2-F145wZZUw6XboF000042ac@hotmail.com>

Dear Group

I have a question concerning the sequence for using pfilt and pcond. Since 
both of these programs actually adjust the exposure, it's hard for me to 
understand which approach is best. Any help would be useful.


Thanks

Marcus

_________________________________________________________________
Instant message with integrated webcam using MSN Messenger 6.0. Try it now 
FREE!  http://msnmessenger-download.com


From radiance-general@radiance-online.org  Wed Oct  1 20:29:28 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Wed, 01 Oct 2003 15:29:28 -0400
Subject: [Radiance-general] Sequence for using pfilt and pcond
In-Reply-To: <BAY2-F145wZZUw6XboF000042ac@hotmail.com>
References: <BAY2-F145wZZUw6XboF000042ac@hotmail.com>
Message-ID: <3F7B2B18.2070100@rumblestrip.org>

Marcus Jacobs wrote:

> Dear Group
> 
> I have a question concerning the sequence for using pfilt and pcond. 
> Since both of these programs actually adjust the exposure, it's hard for 
> me to understand which approach is best. Any help would be useful.

As I understand it*, pfilt is primarily for image scaling and exposure 
adjustment (handled automatically if you use rad), whereas pcond is more 
of an image tweaker, manipulating the pixels in the image to make up for 
dynamic range shortcomings in various media, or color correction.

What are you interested in doing with your images?  As I mentioned, rad 
is pretty good at getting the image exposed & scaled properly.  I 
usually just run my images through pcond -h after that, and end up with 
a satisfactory image.  But as with most aspects of Radiance, there is 
fantastic option complexity, if desired.


*Still learning, statements could be rubbish!

----

      Rob Guglielmetti

e. rpg@rumblestrip.org
w. www.rumblestrip.org


From radiance-general@radiance-online.org  Wed Oct  1 20:43:19 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Wed, 1 Oct 2003 12:43:19 -0700
Subject: [Radiance-general] Re: Sequence for using pfilt and pcond
In-Reply-To: <BAY2-F145wZZUw6XboF000042ac@hotmail.com>
Message-ID: <82681B7E-F447-11D7-BAC3-000A956D40C8@lmi.net>

Adding my 2 cents to what Rob said...

Pfilt is an important part of the rendering process, performing 
anti-aliasing necessary to reduce the appearance of sampling noise and 
artifacts.  The output from pfilt is generally the one you want to save 
or archive.  Exposure adjustment is really a very minor function to 
pfilt, and is completely reversible.

Pcond is specifically for preparing the output for display or printing, 
and the resulting file should probably not be saved, or if it is, the 
input given to pcond should not be deleted.  This is because, unlike 
pfilt, the exposure adjustment pcond does is not reversible.  Often, I 
send the output of pcond directly to ra_tiff or another image 
converter, since pcond brings the entire dynamic range of the original 
into the 0-1 limits of most formats and displays.

-Greg

> From: "Marcus Jacobs" <marcdevon@hotmail.com>
> Date: Wed Oct 1, 2003  11:38:32  AM US/Pacific
>
> Dear Group
>
> I have a question concerning the sequence for using pfilt and pcond. 
> Since both of these programs actually adjust the exposure, it's hard 
> for me to understand which approach is best. Any help would be useful.
>
> Thanks
>
> Marcus


From radiance-general@radiance-online.org  Wed Oct  1 21:54:48 2003
From: radiance-general@radiance-online.org (Marcus Jacobs)
Date: Wed, 01 Oct 2003 20:54:48 +0000
Subject: [Radiance-general] Re: Sequence for using pfilt and pcond
Message-ID: <BAY2-F133fAFvgvR0AW00004b52@hotmail.com>

Thanks for the info Rob and Greg

One thing that I have questioned though is whether it would be better to use 
pfilt only for anti-aliasing and filtering and leave exposure adjustment 
only to pcond if I am dealing with a high dynamic range scene. The way I 
understand it* is that pfilt uses a 2 pass method (by default) to properly 
expose the image. The way I am reading into this is that pfilt in a way 
corrects the exposure of the picture output by rpict. To use pcond after 
pfilt essentially rexposes the exposed picture. Would it be better to use a 
filtered but unexposed picture as an imput to pcond?


Marcus



* I am only a layman (higher than a newbie but not an expert) so take this 
statement with a grain of salt :>)



>From: Greg Ward <gward@lmi.net>
>To: radiance-general@radiance-online.org
>CC: "Marcus Jacobs" <marcdevon@hotmail.com>
>Subject: Re: Sequence for using pfilt and pcond
>Date: Wed, 1 Oct 2003 12:43:19 -0700
>
>Adding my 2 cents to what Rob said...
>
>Pfilt is an important part of the rendering process, performing 
>anti-aliasing necessary to reduce the appearance of sampling noise and 
>artifacts.  The output from pfilt is generally the one you want to save or 
>archive.  Exposure adjustment is really a very minor function to pfilt, and 
>is completely reversible.
>
>Pcond is specifically for preparing the output for display or printing, and 
>the resulting file should probably not be saved, or if it is, the input 
>given to pcond should not be deleted.  This is because, unlike pfilt, the 
>exposure adjustment pcond does is not reversible.  Often, I send the output 
>of pcond directly to ra_tiff or another image converter, since pcond brings 
>the entire dynamic range of the original into the 0-1 limits of most 
>formats and displays.
>
>-Greg
>
>>From: "Marcus Jacobs" <marcdevon@hotmail.com>
>>Date: Wed Oct 1, 2003  11:38:32  AM US/Pacific
>>
>>Dear Group
>>
>>I have a question concerning the sequence for using pfilt and pcond. Since 
>>both of these programs actually adjust the exposure, it's hard for me to 
>>understand which approach is best. Any help would be useful.
>>
>>Thanks
>>
>>Marcus
>

_________________________________________________________________
Get MSN 8 Dial-up Internet Service FREE for one month.  Limited time offer-- 
sign up now!   http://join.msn.com/?page=dept/dialup


From radiance-general@radiance-online.org  Wed Oct  1 22:02:26 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Wed, 1 Oct 2003 14:02:26 -0700
Subject: [Radiance-general] Re: Sequence for using pfilt and pcond
In-Reply-To: <BAY2-F133fAFvgvR0AW00004b52@hotmail.com>
Message-ID: <8F675CCC-F452-11D7-8896-000A956D40C8@lmi.net>

Hi Marcus,

I generally don't use the -2 option of pfilt for computing the 
exposure, even though it's the default.  I generally know the exposure 
correction for my scene by the time I reach the filtering stage, so I 
just set it explicitly with the -1 and -e options.  This is what rad 
does as well when you specify an EXPOSURE= value (as you should).

In either case, the exposure that's set by pfilt is completely 
reversible and doesn't affect the time taken or output produced by 
pcond.  As a side note, using pcond without the -h option is pretty 
much the same as displaying the image with ximage -e auto.

-Greg

> From: "Marcus Jacobs" <marcdevon@hotmail.com>
> Date: Wed Oct 1, 2003  1:54:48  PM US/Pacific
>
> Thanks for the info Rob and Greg
>
> One thing that I have questioned though is whether it would be better 
> to use pfilt only for anti-aliasing and filtering and leave exposure 
> adjustment only to pcond if I am dealing with a high dynamic range 
> scene. The way I understand it* is that pfilt uses a 2 pass method (by 
> default) to properly expose the image. The way I am reading into this 
> is that pfilt in a way corrects the exposure of the picture output by 
> rpict. To use pcond after pfilt essentially rexposes the exposed 
> picture. Would it be better to use a filtered but unexposed picture as 
> an imput to pcond?
>
> Marcus
>
> * I am only a layman (higher than a newbie but not an expert) so take 
> this statement with a grain of salt :>)


From radiance-general@radiance-online.org  Thu Oct  2 03:01:03 2003
From: radiance-general@radiance-online.org (Terrance Mc Minn)
Date: Thu, 2 Oct 2003 10:01:03 +0800
Subject: [Radiance-general] Online availability of conference CD-ROM?
Message-ID: <A2B098B4E624D511BED900508BB92A57078CDF44@exmsb02.curtin.edu.au>

Vote YES!!!! for ISO image for 2003 Radiance Workshop CDROM to be available
online.

Many of the readers of the valuable Radiance On-line forum were
unfortunately not able to attend the workshop. I for one would like to keep
a copy of the CDROM so that I can view/read the material whilst
off-line/remote from the internet.

On another issue, I see new prints of the Rendering with Radiance book were
being distributed to the participants of the workshop. Are there any plans
for a reprint being made for wider distribution?

Regards 

Terry Mc Minn 
Faculty of Built Environment, Art and Design 
Curtin University of Technology 
GPO Box U 1987 
Perth 6845 
Western Australia 
Email: T.Mcminn@curtin.edu.au 
CRICOS Provider Code: 00301J 

From radiance-general@radiance-online.org  Thu Oct  2 05:13:09 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Thu, 2 Oct 2003 00:13:09 -0400
Subject: [Radiance-general] Online availability of conference CD-ROM?
In-Reply-To: <A2B098B4E624D511BED900508BB92A57078CDF44@exmsb02.curtin.edu.au>
Message-ID: <BB5FF206-F48E-11D7-A568-000393824274@rumblestrip.org>

On Wednesday, October 1, 2003, at 10:01 PM, Terrance Mc Minn wrote:

> Vote YES!!!! for ISO image for 2003 Radiance Workshop CDROM to be 
> available
> online.

Hi Terrance,

The CD-ROM is already available on the site; they beat me to it, no 
vote required! =8-)

> On another issue, I see new prints of the Rendering with Radiance book 
> were
> being distributed to the participants of the workshop. Are there any 
> plans
> for a reprint being made for wider distribution?

They actually never got the books, there was some mixup with the 
printer.  They are looking for a new one.  Greg can give you better 
details, but I'm quite certain that once they have a solid setup with a 
print on demand publisher, anyone will be able to order a copy.

Rob Guglielmetti
rpg@rumblestrip.org
www.rumblestrip.org


From radiance-general@radiance-online.org  Thu Oct  2 06:19:09 2003
From: radiance-general@radiance-online.org (Terrance Mc Minn)
Date: Thu, 2 Oct 2003 13:19:09 +0800
Subject: [Radiance-general] Online availability of conference CD-ROM?
Message-ID: <A2B098B4E624D511BED900508BB92A57078CDF85@exmsb02.curtin.edu.au>

Hi Rob,

On Thursday , 2 Oct 2003 00:13:09 -0400  Rob Guglielmetti wrote:

> The CD-ROM is already available on the site; they beat me to it, no vote
required! =8-)

I can find the CD contents at
http://www.radiance-online.org/radiance-workshop2/cd/ but not the link to
the iso image.

Thanks for the update on the book.

Regards 

Terry Mc Minn 
Faculty of Built Environment, Art and Design 
Curtin University of Technology 
GPO Box U 1987 
Perth 6845 
Western Australia 
Email: T.Mcminn@curtin.edu.au 
CRICOS Provider Code: 00301J 

From radiance-general@radiance-online.org  Thu Oct  2 16:14:42 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Thu, 02 Oct 2003 11:14:42 -0400
Subject: [Radiance-general] Online availability of conference CD-ROM?
Message-ID: <3F7C40E2.3030005@rumblestrip.org>

Hi Terry,

Yeah, there doesn't seem to be an iso image, but all the stuff is there 
for downloading.  A bit more tedious, but still doable.  Perhaps the iso 
image was not posted due to a diskspace or bandwidth issue?

----

      Rob Guglielmetti

e. rpg@rumblestrip.org
w. www.rumblestrip.org


From radiance-general@radiance-online.org  Thu Oct  2 18:07:17 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Thu, 2 Oct 2003 10:07:17 -0700
Subject: [Radiance-general] Re: Online availability of conference CD-ROM?
In-Reply-To: <3F7C40E2.3030005@rumblestrip.org>
Message-ID: <E02E7533-F4FA-11D7-8FEC-000A956D40C8@lmi.net>

I suppose we should appeal to Peter A-B to make the ISO image of the CD 
available online.  I don't know if there are bandwidth issues -- Peter?

For my part, I have put some snapshots from the workshop up on my 
website, for those who are interested.  The URL is:

	http://www.anyhere.com/gward/snaps/workshops/radiance03.html

Also, for those who downloaded Photosphere recently and are 
experiencing crashes, there is a new version that fixes this problem 
also on my website:

	http://www.anyhere.com/gward/pickup/photosphere.tar.gz

The command-line tool for building HDR images is also available, but I 
have only compiled it on the Mac for the moment.  I should get around 
to compiling it under Linux "real soon now".  (Photosphere won't be 
available on other platforms until someone volunteers to rewrite the 
GUI.)

	http://www.anyhere.com/gward/pickup/hdrgen.tar.gz

Cheers,
-Greg


From radiance-general@radiance-online.org  Fri Oct  3 02:36:06 2003
From: radiance-general@radiance-online.org (Marcus Jacobs)
Date: Fri, 03 Oct 2003 01:36:06 +0000
Subject: [Radiance-general] OCONV and Radiance 3.5
Message-ID: <BAY2-F25lrDqlvAiDtH0000b092@hotmail.com>

Dear Group

I am having an issue with OCONV and Radiance 3.5 (I think that I had the 
same issue with V. 3.4 too). Although I am currently using binaries compiled 
for Cygwin, I have experienced the same issue with binaries that I have 
compiled for Linux. Usually, I use the I use binaries compiled for Desktop 
Radiance but in this situation, I would like to use the new OBJ2MESH 
utility.


It was my understanding that as a method of combining a scene containing 
many individual *.rad files, we could use one single file that calls xform 
in a manner such as this:


!xform -n (name1) file1.rad
!xform -n (name2) file2.rad
!xform -n (name3) file3.rad


I have not encountered any issues with the Desktop Radiance binaries with 
this approach but when using Radiance 3.5 (compiled for Windows or Linux), I 
contantly get error messages that usually look like this:


xform: cannot find file "file1.rad"
oconv: warning - (!xform -n name1 file1.rad): empty file

Can anyone tell me what's going wrong here?


Thanks

Marcus D. Jacobs

_________________________________________________________________
Share your photos without swamping your Inbox.  Get Hotmail Extra Storage 
today! http://join.msn.com/?PAGE=features/es


From radiance-general@radiance-online.org  Fri Oct  3 02:48:59 2003
From: radiance-general@radiance-online.org (Phillip Greenup)
Date: Fri, 03 Oct 2003 11:48:59 +1000
Subject: [Radiance-general] OCONV and Radiance 3.5
Message-ID: <sf7d62c5.047@sydnws04>

Hi Marcus,

I had similar problems when i created models in desktop radiance, combined the scene files together manually in the method you describe, and tried to investigate the resulting scene files in DAYSIM on Linux.  Two options:

1. Replace the '!xform' with '!cat', without the '-n' option.  this seems to work most of the time, but not always
2. if all else fails, combine all the scene files into one big scene file using 'xform .... .rad >> combined.rad' on the command line.

Any other advice, from someone who actually understands UNIX, is more than welcome...
Phil.

_______________________________
Phillip Greenup
Specialist Engineer
Arup Australasia
Level 10, 201 Kent St
Sydney NSW 2000
Ph (02) 9320 9426
Fax (02) 9320 9321


>>> marcdevon@hotmail.com 3/10/2003 11:36:06 am >>>
Dear Group

I am having an issue with OCONV and Radiance 3.5 (I think that I had the 
same issue with V. 3.4 too). Although I am currently using binaries compiled 
for Cygwin, I have experienced the same issue with binaries that I have 
compiled for Linux. Usually, I use the I use binaries compiled for Desktop 
Radiance but in this situation, I would like to use the new OBJ2MESH 
utility.


It was my understanding that as a method of combining a scene containing 
many individual *.rad files, we could use one single file that calls xform 
in a manner such as this:


!xform -n (name1) file1.rad
!xform -n (name2) file2.rad
!xform -n (name3) file3.rad


I have not encountered any issues with the Desktop Radiance binaries with 
this approach but when using Radiance 3.5 (compiled for Windows or Linux), I 
contantly get error messages that usually look like this:


xform: cannot find file "file1.rad"
oconv: warning - (!xform -n name1 file1.rad): empty file

Can anyone tell me what's going wrong here?


Thanks

Marcus D. Jacobs

_________________________________________________________________
Share your photos without swamping your Inbox.  Get Hotmail Extra Storage 
today! http://join.msn.com/?PAGE=features/es 

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org 
http://www.radiance-online.org/mailman/listinfo/radiance-general



From radiance-general@radiance-online.org  Fri Oct  3 07:05:02 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Thu, 2 Oct 2003 23:05:02 -0700
Subject: [Radiance-general] OCONV and Radiance 3.5
In-Reply-To: <BAY2-F25lrDqlvAiDtH0000b092@hotmail.com>
Message-ID: <86B1F40A-F567-11D7-AA62-000A956D40C8@lmi.net>

Hi Marcus,

It is good that you bring this up, as one or two others have written to 
me about this problem, before.

The RAYPATH environment variable if you have set it must include "." in 
order for xform to find files in or under the working directory without 
explicitly giving the full path or prefixing the file name with "./".  
This is due to an enhancement in xform since 3.1 where it checks the 
RAYPATH directories for its input files.  This facilitate the use of 
library objects, allowing you to collect common Radiance scene files in 
addition to the usual auxiliary files and frozen octrees in your own 
library location(s).

If you have set RAYPATH without including ".", you should add it.  This 
is necessary anyway for Radiance to find .cal files and the like in the 
working directory.  If for some reason you don't wish to do this, then 
you can change your inline xform commands to:

!xform -n (name1) ./file1.rad
!xform -n (name2) ./file2.rad
!xform -n (name3) ./file3.rad

I hope this fixes your problem.
-Greg

> From: "Marcus Jacobs" <marcdevon@hotmail.com>
> Date: Thu Oct 2, 2003  6:36:06  PM US/Pacific
>
> Dear Group
>
> I am having an issue with OCONV and Radiance 3.5 (I think that I had 
> the same issue with V. 3.4 too). Although I am currently using 
> binaries compiled for Cygwin, I have experienced the same issue with 
> binaries that I have compiled for Linux. Usually, I use the I use 
> binaries compiled for Desktop Radiance but in this situation, I would 
> like to use the new OBJ2MESH utility.
>
> It was my understanding that as a method of combining a scene 
> containing many individual *.rad files, we could use one single file 
> that calls xform in a manner such as this:
>
> !xform -n (name1) file1.rad
> !xform -n (name2) file2.rad
> !xform -n (name3) file3.rad
>
> I have not encountered any issues with the Desktop Radiance binaries 
> with this approach but when using Radiance 3.5 (compiled for Windows 
> or Linux), I contantly get error messages that usually look like this:
>
> xform: cannot find file "file1.rad"
> oconv: warning - (!xform -n name1 file1.rad): empty file
>
> Can anyone tell me what's going wrong here?
>
>
> Thanks
>
> Marcus D. Jacobs


From radiance-general@radiance-online.org  Fri Oct  3 21:39:52 2003
From: radiance-general@radiance-online.org (Arvinder Dang)
Date: Fri, 3 Oct 2003 13:39:52 -0700 (PDT)
Subject: [Radiance-general] Warning message and glass definition
Message-ID: <20031003203952.60273.qmail@web41611.mail.yahoo.com>

--0-1093973205-1065213592=:58617
Content-Type: text/plain; charset=us-ascii

Hello Everyone,
It was really nice meeting  some of  you at the Radiance conference. As a few of you already know I am really new with Radiance and am now shifting from Desktop Radiance to Radiance. (Thanks a lot Francesco.. Cygwin is a real hit, Thanks Rob for getting me started )
I have been trying to do some runs in Radiance wherein I am calculating illuminance levels at a workplane grid for 4 daylighting configurations. I will be comparing these results with results from Superlite and eventually with DOE 2 so as to determine the error in the calcs in DOE 2 
The configurations are 36wide  x 30 deep x 10' high  room with one window on the whole south face.
The same room with 2). a light shelf   3). 4 skylights  4) roof monitor.
Presently I am still doing the calcs with simple room with one window.
 
Now for the newbie questions.
1. When I am running rtrace I am getting a message warning no light source found. I am using a sky without sun and specifying -B. Is this because of the sky type or some other reason since I am getting the values which seem reasonable.
2. Since I am comparing results from superlite it is important that the geometry and material properties are exactly the same.The glass type in Superlite is a clear glass with  85% transmittance and 5% reflectance. How do I specify a similar glass type in radiance. The lib shows one with same properties as 
 
void  glass       E178-6_glass
0
0
3     0.61271     0.84589     0.68805
 
void  BRTDfunc    E178-6_front
10
      0.56202     0.77639     0.63125
      0.24487     0.09924     0.22543
      0 0 0
      .
0
9 0 0 0 0 0 0 0 0 0
void  BRTDfunc    E178-6_back
10
      0.56202     0.77639     0.63125
      0.22373     0.13212     0.24437
      0 0 0
      .
0
9 0 0 0 0 0 0 0 0 0

Is this what I should be using or simply put it as (for 85%transmittance)
 
void glass class_lglass
0
0
3
0.927 0.927 0.927
 
I know the questions may seem really simple  for the advanced users but I need your guidance to proceed.
 
Thanks
Arvinder 
 
 
 
 
 


---------------------------------
Do you Yahoo!?
The New Yahoo! Shopping - with improved product search
--0-1093973205-1065213592=:58617
Content-Type: text/html; charset=us-ascii

<DIV>Hello Everyone,</DIV>
<DIV>It was really nice&nbsp;meeting&nbsp;&nbsp;some of &nbsp;you at the Radiance conference. As a few of you already know I am really new with Radiance and am now shifting from Desktop Radiance to Radiance. (Thanks a lot&nbsp;Francesco.. Cygwin is a real hit, Thanks Rob for getting me started&nbsp;)</DIV>
<DIV>I have been trying to do some runs in Radiance wherein I am calculating illuminance levels at a workplane grid for 4 daylighting configurations. I will be&nbsp;comparing these results with results from Superlite and eventually with DOE 2 so as to determine the error in the calcs in DOE 2 </DIV>
<DIV>The configurations are 36wide &nbsp;x 30 deep x 10' high &nbsp;room with one window on the whole south face.</DIV>
<DIV>The same room with 2). a light shelf&nbsp;&nbsp; 3). 4 skylights&nbsp; 4) roof monitor.</DIV>
<DIV>Presently I am still doing the calcs with simple room with one window.</DIV>
<DIV>&nbsp;</DIV>
<DIV>Now for the newbie questions.</DIV>
<DIV>1. When I am running rtrace I am getting a message warning no light source found. I am using a sky without sun and specifying -B. Is this because of the sky type or some other reason since I am getting the values which seem reasonable.</DIV>
<DIV>2.&nbsp;Since I am comparing results from superlite it is important that the geometry and material properties are exactly the same.The glass type in Superlite is a clear glass with&nbsp; 85% transmittance and 5% reflectance. How do I specify a similar glass type in radiance. The lib shows one with&nbsp;same properties&nbsp;as </DIV>
<DIV>&nbsp;</DIV>
<DIV>void&nbsp; glass&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; E178-6_glass<BR>0<BR>0<BR>3&nbsp;&nbsp;&nbsp;&nbsp; 0.61271&nbsp;&nbsp;&nbsp;&nbsp; 0.84589&nbsp;&nbsp;&nbsp;&nbsp; 0.68805</DIV>
<DIV>&nbsp;</DIV>
<DIV>void&nbsp; BRTDfunc&nbsp;&nbsp;&nbsp; E178-6_front<BR>10<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.56202&nbsp;&nbsp;&nbsp;&nbsp; 0.77639&nbsp;&nbsp;&nbsp;&nbsp; 0.63125<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.24487&nbsp;&nbsp;&nbsp;&nbsp; 0.09924&nbsp;&nbsp;&nbsp;&nbsp; 0.22543<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0 0 0<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .<BR>0<BR>9 0 0 0 0 0 0 0 0 0</DIV>
<DIV>void&nbsp; BRTDfunc&nbsp;&nbsp;&nbsp; E178-6_back<BR>10<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.56202&nbsp;&nbsp;&nbsp;&nbsp; 0.77639&nbsp;&nbsp;&nbsp;&nbsp; 0.63125<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.22373&nbsp;&nbsp;&nbsp;&nbsp; 0.13212&nbsp;&nbsp;&nbsp;&nbsp; 0.24437<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0 0 0<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .<BR>0<BR>9 0 0 0 0 0 0 0 0 0<BR></DIV>
<DIV>Is this what I should be using or simply put it as (for 85%transmittance)</DIV>
<DIV>&nbsp;</DIV>
<DIV>void glass class_lglass<BR>0<BR>0<BR>3<BR>0.927 0.927 0.927</DIV>
<DIV>&nbsp;</DIV>
<DIV>I know the questions may seem really&nbsp;simple &nbsp;for the advanced users but I need your guidance to proceed.</DIV>
<DIV>&nbsp;</DIV>
<DIV>Thanks</DIV>
<DIV>Arvinder </DIV>
<DIV>&nbsp;</DIV>
<DIV>&nbsp;</DIV>
<DIV>&nbsp;</DIV>
<DIV>&nbsp;</DIV>
<DIV>&nbsp;</DIV><p><hr SIZE=1>
Do you Yahoo!?<br>
<a href="http://shopping.yahoo.com/?__yltc=s%3A150000443%2Cd%3A22708228%2Cslk%3Atext%2Csec%3Amail">The New Yahoo! Shopping</a> - with improved product search
--0-1093973205-1065213592=:58617--

From radiance-general@radiance-online.org  Fri Oct  3 20:43:05 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Fri, 3 Oct 2003 12:43:05 -0700
Subject: [Radiance-general] Re: OCONV and Radiance 3.5
In-Reply-To: <BAY2-F146suZ2K4xDh900004964@hotmail.com>
Message-ID: <CEAEB014-F5D9-11D7-A1EA-00306540F848@lmi.net>

Hi Marcus,

I don't use BASH myself, but I think you add the following to your 
$HOME/.profile or $HOME/.bash_login file:

RAYPATH=.:/usr/local/lib/ray
export RAYPATH

This of course applies only if your Radiance library files are 
installed in /usr/local/lib/ray.  They might be somewhere else on your 
system.  Someone must have set the RAYPATH environment variable 
somewhere, so you should check that setting and change it there.  If it 
hasn't been set, then I'm puzzled by this error since the default value 
includes "." as the first entry.  Did you recompile from the source 
files, or install the precompiled binaries?  (Maybe we should take this 
discussion off-list.)

-Greg

> From: "Marcus Jacobs" <marcdevon@hotmail.com>
> Date: Fri Oct 3, 2003  10:45:47  AM US/Pacific
>
> Greg
>
> Do you know how to set RAYPATH within BASH shell with these settings?
>
> Thanks
>
> Marcus


From radiance-general@radiance-online.org  Fri Oct  3 18:45:47 2003
From: radiance-general@radiance-online.org (Marcus Jacobs)
Date: Fri, 03 Oct 2003 17:45:47 +0000
Subject: [Radiance-general] OCONV and Radiance 3.5
Message-ID: <BAY2-F146suZ2K4xDh900004964@hotmail.com>

Greg

Do you know how to set RAYPATH within BASH shell with these settings?

Thanks

Marcus


>From: Greg Ward <gward@lmi.net>
>To: radiance-general@radiance-online.org
>CC: "Marcus Jacobs" <marcdevon@hotmail.com>
>Subject: Re: [Radiance-general] OCONV and Radiance 3.5
>Date: Thu, 2 Oct 2003 23:05:02 -0700
>
>Hi Marcus,
>
>It is good that you bring this up, as one or two others have written to me 
>about this problem, before.
>
>The RAYPATH environment variable if you have set it must include "." in 
>order for xform to find files in or under the working directory without 
>explicitly giving the full path or prefixing the file name with "./".  This 
>is due to an enhancement in xform since 3.1 where it checks the RAYPATH 
>directories for its input files.  This facilitate the use of library 
>objects, allowing you to collect common Radiance scene files in addition to 
>the usual auxiliary files and frozen octrees in your own library 
>location(s).
>
>If you have set RAYPATH without including ".", you should add it.  This is 
>necessary anyway for Radiance to find .cal files and the like in the 
>working directory.  If for some reason you don't wish to do this, then you 
>can change your inline xform commands to:
>
>!xform -n (name1) ./file1.rad
>!xform -n (name2) ./file2.rad
>!xform -n (name3) ./file3.rad
>
>I hope this fixes your problem.
>-Greg
>
>>From: "Marcus Jacobs" <marcdevon@hotmail.com>
>>Date: Thu Oct 2, 2003  6:36:06  PM US/Pacific
>>
>>Dear Group
>>
>>I am having an issue with OCONV and Radiance 3.5 (I think that I had the 
>>same issue with V. 3.4 too). Although I am currently using binaries 
>>compiled for Cygwin, I have experienced the same issue with binaries that 
>>I have compiled for Linux. Usually, I use the I use binaries compiled for 
>>Desktop Radiance but in this situation, I would like to use the new 
>>OBJ2MESH utility.
>>
>>It was my understanding that as a method of combining a scene containing 
>>many individual *.rad files, we could use one single file that calls xform 
>>in a manner such as this:
>>
>>!xform -n (name1) file1.rad
>>!xform -n (name2) file2.rad
>>!xform -n (name3) file3.rad
>>
>>I have not encountered any issues with the Desktop Radiance binaries with 
>>this approach but when using Radiance 3.5 (compiled for Windows or Linux), 
>>I contantly get error messages that usually look like this:
>>
>>xform: cannot find file "file1.rad"
>>oconv: warning - (!xform -n name1 file1.rad): empty file
>>
>>Can anyone tell me what's going wrong here?
>>
>>
>>Thanks
>>
>>Marcus D. Jacobs
>

_________________________________________________________________
Instant message during games with MSN Messenger 6.0. Download it now FREE!  
http://msnmessenger-download.com


From radiance-general@radiance-online.org  Sun Oct  5 04:14:06 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Sat, 4 Oct 2003 23:14:06 -0400
Subject: [Radiance-general] Warning message and glass definition
In-Reply-To: <20031003203952.60273.qmail@web41611.mail.yahoo.com>
Message-ID: <FA79538B-F6E1-11D7-A568-000393824274@rumblestrip.org>

On Friday, October 3, 2003, at 04:39 PM, Arvinder Dang wrote:

> Hello Everyone,
> It was really nice meeting  some of  you at the Radiance conference. 
> As a few of you already know I am really new with Radiance and am now 
> shifting from Desktop Radiance to Radiance. (Thanks a lot Francesco.. 
> Cygwin is a real hit, Thanks Rob for getting me started )

Hi Arvinder,

It was a pleasure to meet you as well, and to watch your face light up 
as you pressed return following "ximage test1.pic" for the first time!  
=8-)

> Now for the newbie questions.
> 1. When I am running rtrace I am getting a message warning no light 
> source found. I am using a sky without sun and specifying -B. Is this 
> because of the sky type or some other reason since I am getting the 
> values which seem reasonable.

Yep, the warning is because you are using a sky without sun, nothing to 
worry about.  Happens anytime you spec an overcast sky too...

> 2. Since I am comparing results from superlite it is important that 
> the geometry and material properties are exactly the same.The glass 
> type in Superlite is a clear glass with  85% transmittance and 5% 
> reflectance. How do I specify a similar glass type in radiance.

I know nothing about Superlite, and little more about Radiance, but a 
clear 85% transmittance glass in Radiance looks like this:

void glass Avrinder's_glass
0
0
3
.85 .85 .85

Now, the glass material in Radiance has a fixed reflectance value, but 
I don't recall what it is (but it's not 5%).  If you wanna explicitly 
spec the reflectance you will have to use the fancier BRTDfunc, which 
is the domain of the gurus on the list. Sorry I can't be of additional 
help on that one.

Rob Guglielmetti
rpg@rumblestrip.org
www.rumblestrip.org



From radiance-general@radiance-online.org  Sun Oct  5 06:40:06 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Sat, 4 Oct 2003 22:40:06 -0700
Subject: [Radiance-general] Re: Warning message and glass definition
In-Reply-To: <20031003203952.60273.qmail@web41611.mail.yahoo.com>
Message-ID: <6009952A-F6F6-11D7-A89B-000A956D40C8@lmi.net>

Thanks, Rob, for responding to Arvinder's questions.  I have nothing to 
add to your comments on the warning, but let me add a bit to your 
response on glazings.

First, I agree that Arvinder should go with the glass type.  The 
library glass type is probably not appropriate, and you are better off 
defining your own.  The specification you came up with:

void glass class_lglass
0
0
3
0.927 0.927 0.927

is very close to correct.  I assume you used the formula recommended in 
the Radiance reference manual, or else the identical one from Chapter 4 
(page 240) of "Rendering with Radiance":

{ ---------------- trans1.52.cal --------------- }
sq(x) : x*x;
n = 1.52;				{ index of refraction }
rn = sq((1-n)/(1+n));		{ normal reflectivity }
					{ normal transmissivity }
tn = (sqrt(sq(sq(1-rn))+4*sq(rn*Tn))-sq(1-rn))
			/ (2*rn*rn*Tn);

I actually got a slightly different value when I used 85% as the 
transmittance:  tn=0.926 for Tn=0.85.  However, the part that isn't 
documented for you is the formula for normal reflectance, which is:

Rn=rn+rn*(1-rn)*sq(tn)*(1-sq(tn)*sq(rn))/(2-sq(tn)*sq(rn));

If you add this to the above file and run calc on, you'll find that by 
plugging in an index of refraction of 1.52 (the default for glass), 
your normal reflectance is 6% rather than your desired 5%.  To get a 
value of 5%, I had to play around with the index of refraction in calc 
until I got something close, as the formula is rather nasty to solve 
exactly.  What I came up with was n=1.465, which gives a transmissivity 
of 0.913.  Your glass specification then becomes:

void glass class_lglass
0
0
4
0.913 0.913 0.913 1.465

This is the specification you should use.  Notice the extra argument to 
specify the index of refraction.

It would be much simpler if Radiance took the normal reflectance and 
transmittance of the glazing and figured out the transmissivity and 
index of refraction for you.  The only downside is that you wouldn't 
really know whether the values you'd be giving it were physically 
realizable.  You might want to give a transmittance of 90% and a 
reflectance of 8%, thinking that were perfectly reasonable as it 
doesn't sum to 100%.  Oddly enough, no such pane of glass exists or 
could be made in the real world.  This is why the specification is for 
the normal transmissivity (the light not absorbed in one pass through 
the glass interior), which is legal anywhere between 0 and 1, and the 
index of refraction, which is well-studied and available in tables and 
can be inferred by measurements.

The exact behavior of glass as a function of angle is a bit 
complicated, even though it is physically one of the simplest materials 
to model.  Section 3.3 of 
<http://floyd.lbl.gov/radiance/refer/materials.pdf> gives the full 
formula if you feel like diving into the deep end, as it seems you do.

-Greg


From radiance-general@radiance-online.org  Mon Oct  6 02:54:55 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Sun, 5 Oct 2003 21:54:55 -0400
Subject: [Radiance-general] Radiance Workshop report online
Message-ID: <1541AC0B-F7A0-11D7-A568-000393824274@rumblestrip.org>

Hi Gang,

Just a quick note to say that a brief article on the Radiance workshop 
was published on my friend's website.  You can have a look here:

http://www.cgarchitect.com/news/Reviews/Review022_1.asp

Rob Guglielmetti
rpg@rumblestrip.org
www.rumblestrip.org


From radiance-general@radiance-online.org  Mon Oct  6 03:30:15 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Sun, 5 Oct 2003 22:30:15 -0400
Subject: [Radiance-general] Re: Warning message and glass definition
In-Reply-To: <6009952A-F6F6-11D7-A89B-000A956D40C8@lmi.net>
Message-ID: <0518DABB-F7A5-11D7-A568-000393824274@rumblestrip.org>

On Sunday, October 5, 2003, at 01:40 AM, Greg Ward wrote:

> Thanks, Rob, for responding to Arvinder's questions.  I have nothing 
> to add to your comments on the warning, but let me add a bit to your 
> response on glazings.

On the off-chance that someone asks a question I know the answer to, 
time permitting, I'm thrilled to be able to answer them! =8-)  I also 
believe that everyone benefits from these exchanges, from the gurus on 
down.  Your glazing reply is a perfect example, because I just learned 
a whole lot about what you can do with the glass primitive.  In a way, 
it's good to ask lots of questions on here, because Greg's noggin has 
so much Radiance info locked up in it that it's good for the regular 
users of the software to ask questions, to open the tap every once in a 
while!


Rob Guglielmetti
rpg@rumblestrip.org
www.rumblestrip.org


From radiance-general@radiance-online.org  Mon Oct  6 16:46:00 2003
From: radiance-general@radiance-online.org (R Gillibrand)
Date: Mon, 6 Oct 2003 16:46:00 +0100
Subject: [Radiance-general] Fitting texture to mesh
Message-ID: <002101c38c20$f13ee960$e767de89@MASAMUNE>

This is a multi-part message in MIME format.

------=_NextPart_000_0022_01C38C29.53035160
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi all,

Nice to see those who came at the workshop,

I am having fun with the mesh primitive at the moment and can get the
geometry in no problem but.

How do I get the texture map into the scene in the correct place?

I have been using colorpict but this seems to just be a projection
rather than a wrapping which tells me I am making a mistake somewhere or
using the wrong thing,

Any help gratefully received,

Rich

 

____________________________

Richard Gillibrand

Department of Computer Science,

University of Bristol,

Tel: 0117 9545256

____________________________

 

 


------=_NextPart_000_0022_01C38C29.53035160
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html>

<head>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Dus-ascii">


<meta name=3DGenerator content=3D"Microsoft Word 10 (filtered)">

<style>
<!--
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{font-family:Arial;
	color:windowtext;}
@page Section1
	{size:595.3pt 841.9pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;}
div.Section1
	{page:Section1;}
-->
</style>

</head>

<body lang=3DEN-GB link=3Dblue vlink=3Dpurple>

<div class=3DSection1>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>Hi all,</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>Nice to see those who came at the </span></font><font
 size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;font-family:Arial'>workshop</span></font><font
size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;font-family:Arial'>,</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>I am having fun with the mesh primitive at the moment =
and
can get the geometry in no problem but&#8230;</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>How do I get the texture map into the scene in the =
correct
place?</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>I have been using colorpict but this seems to just be =
a
projection rather than a wrapping which tells me I am making a mistake
somewhere or using the wrong thing,</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>Any help gratefully received,</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>Rich</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>&nbsp;</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>____________________________</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>Richard Gillibrand</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>Department of Computer Science,</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
  font-family:Arial'>University</span></font><font size=3D2 =
face=3DArial><span
 style=3D'font-size:10.0pt;font-family:Arial'> of </span></font><font =
size=3D2
  face=3DArial><span =
style=3D'font-size:10.0pt;font-family:Arial'>Bristol</span></font><font
size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;font-family:Arial'>,</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>Tel: 0117 9545256</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>____________________________</span></font></p>

<p class=3DMsoNormal><font size=3D3 face=3D"Times New Roman"><span =
style=3D'font-size:
12.0pt'>&nbsp;</span></font></p>

<p class=3DMsoNormal><font size=3D3 face=3D"Times New Roman"><span =
style=3D'font-size:
12.0pt'>&nbsp;</span></font></p>

</div>

</body>

</html>

------=_NextPart_000_0022_01C38C29.53035160--


From radiance-general@radiance-online.org  Mon Oct  6 17:51:02 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Mon, 6 Oct 2003 09:51:02 -0700
Subject: [Radiance-general] Radiance Workshop report online
In-Reply-To: <1541AC0B-F7A0-11D7-A568-000393824274@rumblestrip.org>
Message-ID: <44F7FF9D-F81D-11D7-8CBD-000A956D40C8@lmi.net>

Nice article, Rob.  Judy and I and a couple of our student volunteers 
will assemble summaries of all the seminar presentations as well, at 
Steve Selkowitz's request.  This could be a nice adjuct to your article.

BTW, I had to rederive the formula for glass reflectance -- it wasn't 
really "locked in my brain" and I hope I didn't screw it up...

-Greg

> From: Rob Guglielmetti <rpg@rumblestrip.org>
> Date: Sun Oct 5, 2003  6:54:55  PM US/Pacific
>
> Hi Gang,
>
> Just a quick note to say that a brief article on the Radiance workshop 
> was published on my friend's website.  You can have a look here:
>
> http://www.cgarchitect.com/news/Reviews/Review022_1.asp
>
> Rob Guglielmetti


From radiance-general@radiance-online.org  Mon Oct  6 17:46:21 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Mon, 6 Oct 2003 09:46:21 -0700
Subject: [Radiance-general] Re: Fitting texture to mesh
In-Reply-To: <002101c38c20$f13ee960$e767de89@MASAMUNE>
Message-ID: <9D770D60-F81C-11D7-8CBD-000A956D40C8@lmi.net>

Hi Rich,

I guess I should have explained how to map patterns to mesh primitives 
better during the tutorial...

First, you need to download and compile the HEAD distribution from 
<www.radiance-online.org> if you haven't already, as the local 
coordinate mapping isn't _quite_ working in the official 3.5 release.

Second, you need to make sure that you have local coordinates defined 
and exported for all your surfaces from your modeler of choice (Maya in 
your case).

Third, you need to follow directions similar to the ones excerpted 
below from an earlier inquiry, which I probably should have 
cross-posted to the list:

-----------
From: Greg Ward <gward@lmi.net>
Date: Tue Sep 30, 2003  4:11:53  PM US/Pacific
To: Faouzi Djafi <fdjafi@yahoo.fr>
Subject: Re: Help-me

Hi Djafi,

It is unlikely that you will be able to get your image to map correctly 
to your object unless you download and compile the latest (HEAD) 
version of radiance from www.radiance-online.org and apply the new mesh 
primitive rather than relying on obj2rad.  This is the only way to get 
local texture coordinates, which you have in your .OBJ file.

To do this, I created two files -- Box.mat and box_mesh.rad.  Box.mat 
contains:

void colorpict patt
7 red green blue image_1.pic . Lu Lv
0
0

patt plastic map_image_1
0
0
5 .75 .75 .75 0 0

And box_mesh.rad contains:

map_image_1 mesh box1
1 Box.rtm
0
0

I then ran the following commands:

% obj2mesh Box.obj > Box.rtm
% oconv Box.mat Light.rad box_mesh.rad > scene.oct

You can then produce renderings from scene.oct.

If you are under Windows, none of this will work as the mesh primitive 
is not part of Desktop Radiance.

-Greg
------------

> From: R Gillibrand <gillibrand@cs.bris.ac.uk>
> Date: Mon Oct 6, 2003  8:46:00  AM US/Pacific
>
> Hi all,
>
> Nice to see those who came at theworkshop,
>
> I am having fun with the mesh primitive at the moment and can get the 
> geometry in no problem but…
>
> How do I get the texture map into the scene in the correct place?
>
> I have been using colorpict but this seems to just be a projection 
> rather than a wrapping which tells me I am making a mistake somewhere 
> or using the wrong thing,
>
> Any help gratefully received,
>
> Rich



From radiance-general@radiance-online.org  Tue Oct  7 11:43:58 2003
From: radiance-general@radiance-online.org (R Gillibrand)
Date: Tue, 7 Oct 2003 11:43:58 +0100
Subject: [Radiance-general] Re: Fitting texture to mesh (Greg Ward)
Message-ID: <000f01c38cbf$ea6007b0$e767de89@MASAMUNE>

This is a multi-part message in MIME format.

------=_NextPart_000_0010_01C38CC8.4C246FB0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

Ah it was the Lu Lv bit that I had got wrong, I now have a beautifully
mapped sphere of checkers!

Thanks

Rich

 

____________________________

Richard Gillibrand

Department of Computer Science,

University of Bristol,

Tel: 0117 9545256

____________________________

 

 


------=_NextPart_000_0010_01C38CC8.4C246FB0
Content-Type: text/html;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

<html>

<head>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Dus-ascii">


<meta name=3DGenerator content=3D"Microsoft Word 10 (filtered)">

<style>
<!--
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{font-family:Arial;
	color:windowtext;}
@page Section1
	{size:595.3pt 841.9pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;}
div.Section1
	{page:Section1;}
-->
</style>

</head>

<body lang=3DEN-GB link=3Dblue vlink=3Dpurple>

<div class=3DSection1>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>Ah it was the Lu Lv bit that I had got wrong, I now =
have a
beautifully mapped sphere of checkers!</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>Thanks</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>Rich</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>&nbsp;</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>____________________________</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>Richard Gillibrand</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>Department of Computer Science,</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
  font-family:Arial'>University</span></font><font size=3D2 =
face=3DArial><span
 style=3D'font-size:10.0pt;font-family:Arial'> of </span></font><font =
size=3D2
  face=3DArial><span =
style=3D'font-size:10.0pt;font-family:Arial'>Bristol</span></font><font
size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;font-family:Arial'>,</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>Tel: 0117 9545256</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>____________________________</span></font></p>

<p class=3DMsoNormal><font size=3D3 face=3D"Times New Roman"><span =
style=3D'font-size:
12.0pt'>&nbsp;</span></font></p>

<p class=3DMsoNormal><font size=3D3 face=3D"Times New Roman"><span =
style=3D'font-size:
12.0pt'>&nbsp;</span></font></p>

</div>

</body>

</html>

------=_NextPart_000_0010_01C38CC8.4C246FB0--


From radiance-general@radiance-online.org  Tue Oct  7 18:37:21 2003
From: radiance-general@radiance-online.org (Jeffrey McGrew)
Date: Tue, 7 Oct 2003 10:37:21 -0700
Subject: [Radiance-general] 'Alias' material modifier questions...
Message-ID: <14F4D3C7236B9C42B381D1F66D78C6D9A09149@hunt-exch-01.huntsmanag.com>

Hello all,

So I hate to ask a stupid, basic question (yet again :)
however I've read all I can, and not being able to find
a copy of the 'Rendering with Radiance' book anywhere,
this is the only place I can turn to.

I can't figure out what application the 'alias'
material modifier is for. I understand how to
apply modifiers, and patterns, and I've read the old
tutorial, the new tutorial, the help files,
and the man pages, and still can't get my head
around what this is for or where you would apply
it.

If anyone could point me to a help file,
or just give a few quick examples of what the
alias modifier would be used for in application,
I would be incredibly grateful.

Thanks a ton,

Jeffrey



From radiance-general@radiance-online.org  Tue Oct  7 19:14:27 2003
From: radiance-general@radiance-online.org (Rob Shakespeare)
Date: Tue, 7 Oct 2003 13:14:27 -0500
Subject: [Radiance-general] 'Alias' material modifier questions...
In-Reply-To: <14F4D3C7236B9C42B381D1F66D78C6D9A09149@hunt-exch-01.huntsmanag.com>
Message-ID: <000301c38cfe$d83a3120$72424f81@ads.iu.edu>

Alias, in its basic mode, creates an additional name for a material.
I often use materials descriptions written in French. Without changing 
the original file ids, I simply add a line:

!xform  French_mat_file.rad

void      alias      red      rouge  
# modifier  alias  additional_id  original_id

The function has additional benefits. If the alias command is modified,
only the new identifier acquires these modifier properties.  I use this
method as a convenient way to combine picture data from a colorpict
description with a predefined material.

!xform   picture_descriptions.rad
!xform   paint_surfaces.rad

picturedata  alias  painting   canvas

Of course there are other ways to achieve the same end, but when working
with several large material description libraries, I find that alias
provides the most convenient method.

-Rob Shakespeare
 Indiana University

-----Original Message-----
From: radiance-general-admin@radiance-online.org
[mailto:radiance-general-admin@radiance-online.org] On Behalf Of Jeffrey
McGrew
Sent: Tuesday, October 07, 2003 12:37 PM
To: radiance-general@radiance-online.org
Subject: [Radiance-general] 'Alias' material modifier questions...


Hello all,

So I hate to ask a stupid, basic question (yet again :)
however I've read all I can, and not being able to find
a copy of the 'Rendering with Radiance' book anywhere,
this is the only place I can turn to.

I can't figure out what application the 'alias'
material modifier is for. I understand how to
apply modifiers, and patterns, and I've read the old
tutorial, the new tutorial, the help files,
and the man pages, and still can't get my head
around what this is for or where you would apply
it.

If anyone could point me to a help file,
or just give a few quick examples of what the
alias modifier would be used for in application,
I would be incredibly grateful.

Thanks a ton,

Jeffrey


_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general




From radiance-general@radiance-online.org  Wed Oct  8 18:26:01 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Wed, 8 Oct 2003 10:26:01 -0700
Subject: [Radiance-general] Re: Thanks .... Warning message and glass definition
In-Reply-To: <20031008165041.56788.qmail@web41613.mail.yahoo.com>
Message-ID: <7D239D12-F9B4-11D7-851C-000A956D40C8@lmi.net>

Hi Arvinder,

It's funny you should write this morning, as I just realized that I 
made a mistake (two, actually) in my formula for the normal reflectance 
of a simple glazing, and I was just about to post a correction.

There are actually two files in the ray/src/cal/cal directory that 
should be helpful, which I forgot were there:

	trans.cal	- the exact solution for transmissivity based on normal 
transmittance and index of refraction

	trans2.cal	- an approximate solution for the index of refraction and 
transmissivity based on normal reflectance and transmittance

If you run "calc trans2.cal" in the ray/src/cal/cal directory and enter:

	Tn = 0.85
	Rn = 0.05

Typing in "n" and "tn" will give you these results:

	n
	$1=1.39992615
	tn
	$2=0.894736842
	^D

Checking this against the file trans.cal, to which I've added the 
corrected formula for Rn:

	% calc trans.cal
	Rn = rn + rn*sq((1-rn)*tn)/(1-sq(tn*rn));

	n = 1.4
	Tn = 0.85

	Rn
	$1=0.0489971986
	tn
	$2=0.898704882

We can see there's just a slight error in the approximations made in 
trans2.cal.  Playing around with these values in trans.cal, I was able 
to get closer to the correct parameters for your glass type:

	n = 1.405
	Rn
	$9=0.0500464342
	tn
	$10=0.899753993

Actually, the first approximate result is probably good enough, but 
anyway, the correct glass specification should be:

	void glass class_lglass
	0
	0
	4	0.900 0.900 0.900	1.405

Sorry for the screw-up.  The advantage of programming is that you can 
fix your errors (usually) before they do irreperable harm.

-Greg

> From: Arvinder Dang <ashudang@yahoo.com>
> Date: Wed Oct 8, 2003  9:50:41  AM US/Pacific
>
> Thanks a lot Greg for responding to my questions and actually 
> calculating the transmittivity for me .Your explanation of the same 
> would definitely help to calculate it myself in the future. My results 
> in comparison to Superlite seem reasonable unlike intially when there 
> was a difference of about 25%.
> I 'm sure there will be lots more coming your way :)
> Thanks Again
> Arvinder


From radiance-general@radiance-online.org  Thu Oct  9 16:17:00 2003
From: radiance-general@radiance-online.org (Marcus Jacobs)
Date: Thu, 09 Oct 2003 15:17:00 +0000
Subject: [Radiance-general] Radiance *.pic fie format compatibility
Message-ID: <BAY2-F6wKYx6XJ0KD8N00001f5c@hotmail.com>

Dear Group

I use Radiance 3.5 in the Windows environment. Although I haven't tried to 
duplicate my problem in Linux, I have had issues with the *.pic files 
generated and read by Radiance 3.5. It seems that the files that are 
generated by Radiance 3.5 binaries compiled for Windows can be read by 
ximage but can not be read by winimage (issued with Desktop Radiance) or HDR 
Shop. The same can be said of picture files read by Radiance 3.5. Picture 
files created via ra_tiff with Desktop Radiance or Radiance 3.4 (Linux) 
binaries can not be read by Radiance 3.5 and visa/versa. Has anyone had this 
issue in the Linux/Unix or MacOs environment.


Thanks

Marcus

_________________________________________________________________
High-speed Internet access as low as $29.95/month (depending on the local 
service providers in your area). Click here.   https://broadband.msn.com


From radiance-general@radiance-online.org  Thu Oct  9 16:29:44 2003
From: radiance-general@radiance-online.org (Giulio Antonutto)
Date: Thu, 9 Oct 2003 16:29:44 +0100
Subject: [Radiance-general] Radiance *.pic fie format compatibility
Message-ID: <DC0CAEEA090E984C911D3B85B16C3F90302E31@l-gnts05>

hi, I worked for a while with radiance on linux and mac....
(version 3.4 and 3.5) and I had no problems.
now I am using also radiance on dos (desktop radiance 1.02) and I haven't
experienced any compatibility issue. (I open and work with all pic files on
all systems)

cheers,
giulio

PS what about radiance 3.5 for PC, did you compiled on your own or it is the
cygwin version?



-----Original Message-----
From: Marcus Jacobs [mailto:marcdevon@hotmail.com]
Sent: 09 October 2003 16:17
To: radiance-general@radiance-online.org
Subject: [Radiance-general] Radiance *.pic fie format compatibility


Dear Group

I use Radiance 3.5 in the Windows environment. Although I haven't tried to 
duplicate my problem in Linux, I have had issues with the *.pic files 
generated and read by Radiance 3.5. It seems that the files that are 
generated by Radiance 3.5 binaries compiled for Windows can be read by 
ximage but can not be read by winimage (issued with Desktop Radiance) or HDR

Shop. The same can be said of picture files read by Radiance 3.5. Picture 
files created via ra_tiff with Desktop Radiance or Radiance 3.4 (Linux) 
binaries can not be read by Radiance 3.5 and visa/versa. Has anyone had this

issue in the Linux/Unix or MacOs environment.


Thanks

Marcus

_________________________________________________________________
High-speed Internet access as low as $29.95/month (depending on the local 
service providers in your area). Click here.   https://broadband.msn.com

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general

___________________________________________________________________
Electronic mail messages entering and leaving Arup business
systems are scanned for acceptability of content and viruses.

From radiance-general@radiance-online.org  Thu Oct  9 21:47:20 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Thu, 9 Oct 2003 13:47:20 -0700
Subject: [Radiance-general] Re: Realistic glass colours
In-Reply-To: <OF99FF0F98.1953387B-ONCC256DBA.00701299-CC256DBA.00703D5B@conwag.com>
Message-ID: <C7077DE7-FA99-11D7-9ED6-000A956D40C8@lmi.net>

Hi Ben,

I should know, but I don't.  Does the Window 5 program output colored 
materials for Radiance?  Maybe Judy knows.  (Judy?)

The names of the colors don't really help, much.  You need either 
spectral transmittance and reflectance values or (at least) CIE (x,y) 
chromaticities for each transmitted and reflected color.  I can't get 
these values from the names.  Perhaps Window 5 can??

Other help!
-Greg

> From: "Ben Masters" <mastersb@conwag.com>
> Date: Thu Oct 9, 2003  1:38:48  PM US/Pacific
> To: gward@lmi.net
>
> Hi Greg,
>
> Hopefully you can help me. I am using Radiance to model a series of 
> coloured glass panels on a building. We have chosen each glass type 
> from the Window 5 program. I will be using Radiance to produce both 
> colour rederings and for numerical daylight factor output.
>
> I understand how to realistically model the glass using just the 
> transmittance value of each glazing type. How do I exactly match the 
> colour of each glazing type by specifying each RGB colour? The glass 
> colours will be critical to give a realistic image.
>
> Here are the glass types I will be modelling:
>
> From the G. James range.
> Sea spray
> Aqueous
> Island Sea
> Oceanic
> Atlantis
> Outer Reef
> Pacific Sky
>
> Thanking you in advance,
>
> Ben Masters
> Auckland, New Zealand


From radiance-general@radiance-online.org  Thu Oct  9 22:24:23 2003
From: radiance-general@radiance-online.org (Jack de Valpine)
Date: Thu, 09 Oct 2003 17:24:23 -0400
Subject: [Radiance-general] Re: Realistic glass colours
References: <C7077DE7-FA99-11D7-9ED6-000A956D40C8@lmi.net>
Message-ID: <3F85D207.4060308@visarc.com>

Hi Ben and Greg,

I am by no means a glazing expert but I think that the best bet so far 
for glazing color based on measured data is to use Optics 5 from LBNL. 
This is a sister product to Window 5 and in fact Window 5 relies on the 
optical property data produced by Optics 5 for its glazing database and 
calculations. With Optics 5 you can build up your glazing system and 
then export it in a number of formats including to Radiance. The 
underlying data for the program is measured spectral transmittance and 
reflectance. For Radiance it will export 3 material definitions, which 
you need to choose from when assigning to geometry. There is the simple 
glass type and then there is a front and back BRTDfunc that gets 
exported. The latter specifically assigns the specular reflectance and 
transmittance for the material (although I do not know if this is 
calculated based on normal incidence or over the hemisphere). I think 
the BRDTfunc is probably the way to go for looking at glass on the 
outside of a building. But this is a very simple use of this very 
powerful material type and as Greg can much more ably explain it still 
does not account for any angular dependance/interaction in the material.

Perhaps some others with Optics 5 and Radiance experience would like to 
chip in their two cents as well? Also depending on how dirty you want to 
get your hands, there is something called glaze.csh which Greg put 
together for us a while ago. I believe this was released in the Radiance 
3.5. This computes a more sophisticated BRTDfunc glazing material. But 
it would need to be modified for the relevant reflectance/transmittance 
data that you are interested in, which would still need to be derived 
from Optics 5 as I recall.

Regards,

-Jack de Valpine

PS: Apologies to the Window 5 and Optics 5 team, I have not really done 
a great job explaining the relation of the tools to each other and there 
respective features. Again if someone wants to chip in a more robust 
explanation this would be great!

Greg Ward wrote:

> Hi Ben,
>
> I should know, but I don't.  Does the Window 5 program output colored 
> materials for Radiance?  Maybe Judy knows.  (Judy?)
>
> The names of the colors don't really help, much.  You need either 
> spectral transmittance and reflectance values or (at least) CIE (x,y) 
> chromaticities for each transmitted and reflected color.  I can't get 
> these values from the names.  Perhaps Window 5 can??
>
> Other help!
> -Greg
>
>> From: "Ben Masters" <mastersb@conwag.com>
>> Date: Thu Oct 9, 2003  1:38:48  PM US/Pacific
>> To: gward@lmi.net
>>
>> Hi Greg,
>>
>> Hopefully you can help me. I am using Radiance to model a series of 
>> coloured glass panels on a building. We have chosen each glass type 
>> from the Window 5 program. I will be using Radiance to produce both 
>> colour rederings and for numerical daylight factor output.
>>
>> I understand how to realistically model the glass using just the 
>> transmittance value of each glazing type. How do I exactly match the 
>> colour of each glazing type by specifying each RGB colour? The glass 
>> colours will be critical to give a realistic image.
>>
>> Here are the glass types I will be modelling:
>>
>> From the G. James range.
>> Sea spray
>> Aqueous
>> Island Sea
>> Oceanic
>> Atlantis
>> Outer Reef
>> Pacific Sky
>>
>> Thanking you in advance,
>>
>> Ben Masters
>> Auckland, New Zealand
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>

-- 
#	John E. de Valpine
#	president
#
#	visarc incorporated
#	http://www.visarc.com
#
#	channeling technology for superior design and construction




From radiance-general@radiance-online.org  Thu Oct  9 23:17:57 2003
From: radiance-general@radiance-online.org (judy lai)
Date: Thu, 09 Oct 2003 15:17:57 -0700
Subject: [Radiance-general] Re: Realistic glass colours
In-Reply-To: <C7077DE7-FA99-11D7-9ED6-000A956D40C8@lmi.net>
References: <C7077DE7-FA99-11D7-9ED6-000A956D40C8@lmi.net>
Message-ID: <3F85DE95.2000105@lbl.gov>

hi Greg, Ben,

I don't believe windows 5 can output colored materials for Radiance, 
maybe you are thinking of Optics 5?  There's an option in Optics5 to 
export a radfile of whatever glazing you chose.  You can get Optics5 here.

http://windows.lbl.gov/materials/optics5/default.htm

You want to compare the glazing types from looking from outside?
In that case I think you'll have to use the BRTDfunc "front" material. 

hope that helps...
.
judy



Greg Ward wrote:

> Hi Ben,
>
> I should know, but I don't.  Does the Window 5 program output colored 
> materials for Radiance?  Maybe Judy knows.  (Judy?)
>
> The names of the colors don't really help, much.  You need either 
> spectral transmittance and reflectance values or (at least) CIE (x,y) 
> chromaticities for each transmitted and reflected color.  I can't get 
> these values from the names.  Perhaps Window 5 can??
>
> Other help!
> -Greg
>
>> From: "Ben Masters" <mastersb@conwag.com>
>> Date: Thu Oct 9, 2003  1:38:48  PM US/Pacific
>> To: gward@lmi.net
>>
>> Hi Greg,
>>
>> Hopefully you can help me. I am using Radiance to model a series of 
>> coloured glass panels on a building. We have chosen each glass type 
>> from the Window 5 program. I will be using Radiance to produce both 
>> colour rederings and for numerical daylight factor output.
>>
>> I understand how to realistically model the glass using just the 
>> transmittance value of each glazing type. How do I exactly match the 
>> colour of each glazing type by specifying each RGB colour? The glass 
>> colours will be critical to give a realistic image.
>>
>> Here are the glass types I will be modelling:
>>
>> From the G. James range.
>> Sea spray
>> Aqueous
>> Island Sea
>> Oceanic
>> Atlantis
>> Outer Reef
>> Pacific Sky
>>
>> Thanking you in advance,
>>
>> Ben Masters
>> Auckland, New Zealand
>
>



From radiance-general@radiance-online.org  Thu Oct  9 23:34:20 2003
From: radiance-general@radiance-online.org (Arvinder Dang)
Date: Thu, 9 Oct 2003 15:34:20 -0700 (PDT)
Subject: [Radiance-general] Determining Direct component and Internally Reflected Component.
Message-ID: <20031009223420.32269.qmail@web41606.mail.yahoo.com>

--0-995922736-1065738860=:31807
Content-Type: text/plain; charset=us-ascii

Hello Everybody,
Another simple question coming your way.
In my grid calculations (at the workplane) which I talked about in my earlier message I am calculating illuminance levels for a clear sky without sun.
>From what I know the final answer is a sum of the direct calculation and the internally reflected caculation or the indirect calculation. The indirect calculation depends on the no of ambient bounces -ab parameter. I have done my calcs using the following parameters...using rad and modifying -ad -as -aa .
My opt file reads as below.
 
-dp 1024
-ar 165
-ms 4.2
-ds .3
-dt .1
-dc .5
-dr 1
-sj .7
-st .1
-ab 0
-af classLS.amb
-aa .15
-ad 768
-as 196
-av 0.5 0.5 0.5
-lr 6
-lw .002
-st .001
-dj .02
-ad 2048
-as 1024
-av 0 0 0
-aa 0.10
-i

To calculate the direct component separately at the points I think i would have to specify the ambient bounces as 0.This would remove the IRC from the total. However if I do this I get all my answers as 0. Is this due to the sky type (which I dont think should be since some light from the sky should reach the points directly) or there is something wrong in the parameters I have specified. I remember getting results with -ab 0 when I did the calculation in Desktop Radiance. 
Please guide me as to what I am doing wrong. Is there some other way to seperate the direct and IRC (say making reflectances 0).
 
Thanks
Arvinder
 


---------------------------------
Do you Yahoo!?
The New Yahoo! Shopping - with improved product search
--0-995922736-1065738860=:31807
Content-Type: text/html; charset=us-ascii

<DIV>Hello Everybody,</DIV>
<DIV>Another simple question coming your way.</DIV>
<DIV>In my grid calculations (at the workplane) which I talked about in my earlier message I am calculating illuminance levels for a clear sky without sun.</DIV>
<DIV>From what I know the final answer is a sum of the direct calculation and the internally reflected caculation or the indirect calculation. The indirect calculation depends on the no of ambient bounces -ab parameter. I have done my calcs using the following parameters...using rad and modifying -ad -as -aa .</DIV>
<DIV>My opt file reads as below.</DIV>
<DIV>&nbsp;</DIV>
<DIV>-dp 1024<BR>-ar 165<BR>-ms 4.2<BR>-ds .3<BR>-dt .1<BR>-dc .5<BR>-dr 1<BR>-sj .7<BR>-st .1<BR>-ab 0<BR>-af classLS.amb<BR>-aa .15<BR>-ad 768<BR>-as 196<BR>-av 0.5 0.5 0.5<BR>-lr 6<BR>-lw .002<BR>-st .001<BR>-dj .02<BR>-ad 2048<BR>-as 1024<BR>-av 0 0 0<BR>-aa 0.10<BR>-i<BR></DIV>
<DIV>To calculate the direct component separately at the points I think i would have to specify the ambient bounces as 0.This would remove the IRC from the total. However if I do this I get all my answers as 0. Is this due to the sky type (which&nbsp;I dont think should be since some light from the sky should reach the points directly) or there is something wrong in the parameters I have specified. I remember getting results with -ab 0 when I did the calculation in Desktop Radiance. </DIV>
<DIV>Please guide me as to what I am doing wrong. Is there some other way to seperate the direct and IRC (say making reflectances 0).</DIV>
<DIV>&nbsp;</DIV>
<DIV>Thanks</DIV>
<DIV>Arvinder</DIV>
<DIV>&nbsp;</DIV><p><hr SIZE=1>
Do you Yahoo!?<br>
<a href="http://shopping.yahoo.com/?__yltc=s%3A150000443%2Cd%3A22708228%2Cslk%3Atext%2Csec%3Amail">The New Yahoo! Shopping</a> - with improved product search
--0-995922736-1065738860=:31807--

From radiance-general@radiance-online.org  Fri Oct 10 03:20:34 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Thu, 9 Oct 2003 22:20:34 -0400
Subject: [Radiance-general] Determining Direct component and Internally Reflected Component.
In-Reply-To: <20031009223420.32269.qmail@web41606.mail.yahoo.com>
Message-ID: <543F6360-FAC8-11D7-B982-000393824274@rumblestrip.org>

On Thursday, October 9, 2003, at 06:34 PM, Arvinder Dang wrote:
> To calculate the direct component separately at the points I think i 
> would have to specify the ambient bounces as 0.This would remove the 
> IRC from the total. However if I do this I get all my answers as 0. Is 
> this due to the sky type (which I dont think should be since some 
> light from the sky should reach the points directly) or there is 
> something wrong in the parameters I have specified. I remember getting 
> results with -ab 0 when I did the calculation in Desktop Radiance.
> Please guide me as to what I am doing wrong. Is there some other way 
> to seperate the direct and IRC (say making reflectances 0).

Hi Ashu,

Here comes a weakly composed response, owing to my vague understanding 
of things, but I think I'm right about this.

With -ab 0, only points directly illuminated by the SUN will register 
in your rtraces.  The luminance of the sky (clear and overcast) is not 
factored in until the indirect calculation.

I believe this explains why with -ab 0 you don't get satisfactory 
results with overcast skies.  So, I don't know if it's possible to 
determine "direct component" of sky brightness.  But if anyone knows a 
workaround, you're sure to find out here...

Rob Guglielmetti
rpg@rumblestrip.org
www.rumblestrip.org



From radiance-general@radiance-online.org  Fri Oct 10 09:31:30 2003
From: radiance-general@radiance-online.org (John Mardaljevic)
Date: Fri, 10 Oct 2003 09:31:30 +0100 (BST)
Subject: [Radiance-general] Determining Direct component and Internally Reflected Component.
Message-ID: <E1A7sgM-0006qR-00@saturn.dmu.ac.uk>

Arvinder,

For a sky without sun (whatever the sky type), setting -ab 1 for
an illuminance(*) calculation will give the direct sky component
of daylight illuminance.  For the inter-reflected component, set
higher -ab values and subtract the values you got for -ab 1.
And, of course, the ambient value should be zero.

For the direct sky calculation, all opaque materials should be
set to diffuse only.  Otherwise you may get some specular reflections
happening at -ab 1.

-John Mardaljevic

(*) Of course, we first compute irradiance and convert to illuminance.

-----------------------------------------------
Dr. John Mardaljevic                     
Senior Research Fellow
Institute of Energy and Sustainable Development
De Montfort University
The Gateway
Leicester
LE1 9BH, UK
+44 (0) 116 257 7972   
+44 (0) 116 257 7981 (fax)

jm@dmu.ac.uk   
http://www.iesd.dmu.ac.uk/~jm


From radiance-general@radiance-online.org  Fri Oct 10 12:51:31 2003
From: radiance-general@radiance-online.org (Francesco Anselmo)
Date: Fri, 10 Oct 2003 13:51:31 +0200
Subject: [Radiance-general] cygwin binaries update / workshop photos
Message-ID: <200310101351.31958.anselmo@dream.unipa.it>

Hi all!

I've updated my Radiance related site with
a new cygwin binary package and with a
few photos prom the 2003 workshop.
As usual:

http://www.dream.unipa.it/dream/pub/dot/anselmo/radiance/

The binary package also contains gendaylit.

-- 
Francesco Anselmo
pisuke@libero.it
anselmo@dream.unipa.it


From radiance-general@radiance-online.org  Fri Oct 10 18:31:34 2003
From: radiance-general@radiance-online.org (Charles Ehrlich)
Date: Fri, 10 Oct 2003 10:31:34 -0700 (PDT)
Subject: [Radiance-general] Re: Realistic glass colours
Message-ID: <20031010173134.3515.qmail@web80314.mail.yahoo.com>

--0-755307577-1065807094=:1305
Content-Type: text/plain; charset=us-ascii

Actually, when developing the Radiance material output specifications for Optics 5, I defined the "front" material as the glazing surface that faces the "inside" of the building.  So, for accurate color rendition from the outside, use the "back" material. 
 
I haven't looked at the output for a while, but I think there is also a skeletal material definition for a BRTDfunc version of the glazing.
 
-Chas
 
========
 
Date: Thu, 09 Oct 2003 15:17:57 -0700
From: judy lai <jlai@lbl.gov>
To: Greg Ward <gward@lmi.net>
CC: Ben Masters <mastersb@conwag.com>, radiance-general@radiance-online.org
Subject: [Radiance-general] Re: Realistic glass colours
Reply-To: radiance-general@radiance-online.org

hi Greg, Ben,

I don't believe windows 5 can output colored materials for Radiance, 
maybe you are thinking of Optics 5?  There's an option in Optics5 to 
export a radfile of whatever glazing you chose.  You can get Optics5 here.

http://windows.lbl.gov/materials/optics5/default.htm

You want to compare the glazing types from looking from outside?
In that case I think you'll have to use the BRTDfunc "front" material. 

hope that helps...
.
judy


--0-755307577-1065807094=:1305
Content-Type: text/html; charset=us-ascii

<DIV>Actually, when developing the Radiance material output specifications for Optics 5, I defined the "front" material as the glazing surface that faces the "inside" of the building.&nbsp; So, for accurate color rendition from the outside, use the "back" material. </DIV>
<DIV>&nbsp;</DIV>
<DIV>I haven't looked at the output for a while, but I think there is also a skeletal material definition for a BRTDfunc version of the glazing.</DIV>
<DIV>&nbsp;</DIV>
<DIV>-Chas</DIV>
<DIV>&nbsp;</DIV>
<DIV>========</DIV>
<DIV>&nbsp;</DIV>
<DIV>Date: Thu, 09 Oct 2003 15:17:57 -0700<BR>From: judy lai &lt;<A href="http://us.f803.mail.yahoo.com/ym/Compose?To=jlai@lbl.gov&amp;YY=80327&amp;order=down&amp;sort=date&amp;pos=0&amp;view=a&amp;head=b">jlai@lbl.gov</A>&gt;<BR>To: Greg Ward &lt;<A href="http://us.f803.mail.yahoo.com/ym/Compose?To=gward@lmi.net&amp;YY=80327&amp;order=down&amp;sort=date&amp;pos=0&amp;view=a&amp;head=b">gward@lmi.net</A>&gt;<BR>CC: Ben Masters &lt;<A href="http://us.f803.mail.yahoo.com/ym/Compose?To=mastersb@conwag.com&amp;YY=80327&amp;order=down&amp;sort=date&amp;pos=0&amp;view=a&amp;head=b">mastersb@conwag.com</A>&gt;, <A href="http://us.f803.mail.yahoo.com/ym/Compose?To=radiance-general@radiance-online.org&amp;YY=80327&amp;order=down&amp;sort=date&amp;pos=0&amp;view=a&amp;head=b"><FONT color=#0000ff>radiance-general@radiance-online.org</FONT></A><BR>Subject: [Radiance-general] Re: Realistic glass colours<BR>Reply-To: <A
 href="http://us.f803.mail.yahoo.com/ym/Compose?To=radiance-general@radiance-online.org&amp;YY=80327&amp;order=down&amp;sort=date&amp;pos=0&amp;view=a&amp;head=b"><FONT color=#0000ff>radiance-general@radiance-online.org</FONT></A><BR><BR>hi Greg, Ben,<BR><BR>I don't believe windows 5 can output colored materials for Radiance, <BR>maybe you are thinking of Optics 5?&nbsp; There's an option in Optics5 to <BR>export a radfile of whatever glazing you chose.&nbsp; You can get Optics5 here.<BR><BR><A href="http://windows.lbl.gov/materials/optics5/default.htm" target=_blank>http://windows.lbl.gov/materials/optics5/default.htm</A><BR><BR>You want to compare the glazing types from looking from outside?<BR>In that case I think you'll have to use the BRTDfunc "front" material. <BR><BR>hope that helps...<BR>.<BR>judy<BR></DIV>
--0-755307577-1065807094=:1305--

From radiance-general@radiance-online.org  Fri Oct 10 18:59:53 2003
From: radiance-general@radiance-online.org (Jeffrey McGrew)
Date: Fri, 10 Oct 2003 10:59:53 -0700
Subject: [Radiance-general] RE: 'Alias' material modifier questions...
Message-ID: <14F4D3C7236B9C42B381D1F66D78C6D9A0914F@hunt-exch-01.huntsmanag.com>

First off, that you so very much in your clear
explanation of this. It was a great help!

Now I've got one other question, and then I
promise to leave everyone alone for a while
with my basic ignorance. :)

When using RAD to generate Radiance .pic
files, I have experimented with the various
options and understand them on a basic level;
all but the difference between the
'Medium' and the 'High' quality settings.
I know that these change what options
are passed onto rpict, which I'm in the
process of learning more about, however
I'm unable to find documentation that
explicitly lists what options are changed
when one goes from the 'Medium' setting to
the 'high' setting. Seeing that I tend to
get awful artifacts and spotting whenever
I use the 'high' setting, things I feel I
could get rid of if I understood what's getting
passed onto rpict better, I would love if someone
could point me to a resource that outlines
this, or sell me a copy of the Radiance
book :) (that I can't seem to find to
save my life).

Thanks again!

Jeffrey  


From radiance-general@radiance-online.org  Fri Oct 10 19:22:33 2003
From: radiance-general@radiance-online.org (Fitzsimmons, Rob)
Date: Fri, 10 Oct 2003 11:22:33 -0700
Subject: [Radiance-general] RE: 'Alias' material modifier questions...
Message-ID: <7B2F6EA5E35E214882CB9828962BC3CF04D6918B@corvallis.summit.fiserv.com>

I'm a newbie as well :-P

this link has helped me understand the parameters more
http://radsite.lbl.gov/deskrad/param_table.htm

The manpages of rad explains the Quality, variability, detail and other
settings.
though I don't know exactly which setting affect which rpict option

I have notice they change -ar, -ad, -as -ab
Rob Fitz

-----Original Message-----
From: Jeffrey McGrew
To: radiance-general@radiance-online.org
Sent: 10/10/2003 10:59 AM
Subject: [Radiance-general] RE: 'Alias' material modifier questions...


First off, that you so very much in your clear
explanation of this. It was a great help!

Now I've got one other question, and then I
promise to leave everyone alone for a while
with my basic ignorance. :)

When using RAD to generate Radiance .pic
files, I have experimented with the various
options and understand them on a basic level;
all but the difference between the
'Medium' and the 'High' quality settings.
I know that these change what options
are passed onto rpict, which I'm in the
process of learning more about, however
I'm unable to find documentation that
explicitly lists what options are changed
when one goes from the 'Medium' setting to
the 'high' setting. Seeing that I tend to
get awful artifacts and spotting whenever
I use the 'high' setting, things I feel I
could get rid of if I understood what's getting
passed onto rpict better, I would love if someone
could point me to a resource that outlines
this, or sell me a copy of the Radiance
book :) (that I can't seem to find to
save my life).

Thanks again!

Jeffrey  

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general


From radiance-general@radiance-online.org  Sat Oct 11 03:11:00 2003
From: radiance-general@radiance-online.org (Carsten Bauer)
Date: Sat, 11 Oct 2003 02:11:00 +0000
Subject: [Radiance-general] RE: 'Alias' material modifier questions...
References: <14F4D3C7236B9C42B381D1F66D78C6D9A0914F@hunt-exch-01.huntsmanag.com>
Message-ID: <3F8766B4.1020405@t-online.de>

>
>
>Hi Jeffrey,
>

I probably posted this advice already  a long time ago on this list, 
anyway, again:

Peter has published an interesting comparison study which -amongst other 
details - contains a section on (especially ambient) parameter settings 
which is quite helpful for beginners, its available from his website:

http://www.pab-opto.de/radiance/render_vergleich/report.en.pdf

The Rendering with Radiance book is of course a valuable resource (yeah, 
this book really exists, I'm
one of the few who has one ..), but the manpages e.g. contain lots of 
infos, too, about the meaning of
every parameter. Don't be 'afraid' of messing with the parameters, the 
sooner you leave the overall Quality/Variability etc.. settings and 
start experimenting with the different parameters directly, the quicker 
you will gain an understanding of the program.

-Carsten


>  
>




From radiance-general@radiance-online.org  Sat Oct 11 16:55:31 2003
From: radiance-general@radiance-online.org (Karen Carrier)
Date: Sat, 11 Oct 2003 08:55:31 -0700
Subject: [Radiance-general] RE: 'Alias' material modifier questions
Message-ID: <001f01c39010$19b8e510$6400a8c0@Karenswindows>

This is a multi-part message in MIME format.

------=_NextPart_000_001C_01C38FD5.6D3B6180
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi Jeff,

If you add the line

opt =3D filename.opt

to your rad file and run rad, it will generate
an .opt file that lists all settings for that rendering.
If you want to test out the settigs resulting from
various qualities, make sure not to override them
manually (do not put INDIRECT =3D  or=20
render =3D -ab  -av  etc. in your rad file)

Karen
______________________________________

Karen Carrier
M.ARCH
UC Berkeley




------=_NextPart_000_001C_01C38FD5.6D3B6180
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Diso-8859-1">
<META content=3D"MSHTML 6.00.2800.1226" name=3DGENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY bgColor=3D#ffffff>
<DIV><FONT face=3DArial size=3D2>Hi Jeff,</FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>If you&nbsp;add&nbsp;the =
line</FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>opt =3D filename.opt</FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>to&nbsp;your rad file and run rad, it =
will=20
generate</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>an .opt file that lists all settings =
for that=20
rendering.</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>If you want to test out the settigs =
resulting=20
from</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>various qualities, make sure not to =
override=20
them</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>manually </FONT><FONT face=3DArial =
size=3D2>(do not put=20
INDIRECT =3D&nbsp;&nbsp;or </FONT></DIV>
<DIV><FONT face=3DArial size=3D2>render =3D -ab&nbsp; -av&nbsp; etc. in =
your rad=20
file)</FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>Karen</FONT></DIV>
<DIV><FONT face=3DArial =
size=3D2>______________________________________</FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>Karen Carrier</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>M.ARCH</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>UC Berkeley</FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV></BODY></HTML>

------=_NextPart_000_001C_01C38FD5.6D3B6180--



From radiance-general@radiance-online.org  Sat Oct 11 17:07:01 2003
From: radiance-general@radiance-online.org (Karen Carrier)
Date: Sat, 11 Oct 2003 09:07:01 -0700
Subject: [Radiance-general] RE: 'Alias' material modifier questions
Message-ID: <002701c39011$b46c0e10$6400a8c0@Karenswindows>

Sorry everybody for the messed up message.
Being new to posting messages I didn't realize
that I needed to use plain text e-mails.
It should have read:

Hi Jeff,

If you add the line

opt= filename.opt

to your rad file and run rad, it will generate
an .opt file that lists all settings for that rendering.
If you want to test out the settings resulting from
various qualities, make sure not to override them
manually (do not put INDIRECT=  or
render= -ab  -av  etc. in your rad file)

Karen

______________________________________

Karen Carrier
M.ARCH
UC Berkeley






From radiance-general@radiance-online.org  Mon Oct 13 19:54:42 2003
From: radiance-general@radiance-online.org (gurneet)
Date: Tue, 14 Oct 2003 00:24:42 +0530
Subject: [Radiance-general] problem with falsecolor
In-Reply-To: <86B1F40A-F567-11D7-AA62-000A956D40C8@lmi.net>
References: <86B1F40A-F567-11D7-AA62-000A956D40C8@lmi.net>
Message-ID: <3F8AF4F2.9050307@students.iiit.net>

hi,
i am facing a problem with falsecolor
whenever i give the command i get an error "System - Out of memory in 
makemap"

cna anybody tell whats the error for and the remedy

gurneet


From radiance-general@radiance-online.org  Tue Oct 14 00:17:27 2003
From: radiance-general@radiance-online.org (Jeffrey McGrew)
Date: Mon, 13 Oct 2003 16:17:27 -0700
Subject: [Radiance-general] RE: 'Alias' material modifier questions...
Message-ID: <14F4D3C7236B9C42B381D1F66D78C6D9A65982@hunt-exch-01.huntsmanag.com>

Rob said:
> this link has helped me understand the parameters more
> http://radsite.lbl.gov/deskrad/param_table.htm

Thank you! this is dead-on for what I was looking for.

> The manpages of rad explains the Quality, variability, detail 
> and other
> settings.
> though I don't know exactly which setting affect which rpict option
> I have notice they change -ar, -ad, -as -ab

right this is the same boat I was in, until everyone's help.

Carsten said:
> Peter has published an interesting comparison study which 
> -amongst other 
> details - contains a section on (especially ambient) 
> parameter settings 
> which is quite helpful for beginners, its available from his website:
> 
> http://www.pab-opto.de/radiance/render_vergleich/report.en.pdf

I've read that. I understand the basics of what's going on
within the Radiance rendering engine, and the basic workflow.
I need a better understanding of the rpict perimeters.

> Don't be 'afraid' of messing with the parameters, the 
> sooner you leave the overall Quality/Variability etc.. settings and 
> start experimenting with the different parameters directly, 
> the quicker 
> you will gain an understanding of the program.

This is the point I'm at now; I'm trying to make the
jump from blind RAD settings to understanding RPICT and
being able to feed it what it needs to get the images
I want.

Thanks everyone for making this a lot easier.

Jeffrey


From radiance-general@radiance-online.org  Tue Oct 14 16:17:15 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Tue, 14 Oct 2003 08:17:15 -0700
Subject: [Radiance-general] problem with falsecolor
In-Reply-To: <3F8AF4F2.9050307@students.iiit.net>
Message-ID: <7E390107-FE59-11D7-9668-000A956D40C8@lmi.net>

Hi Gurneet,

Rob Shakespeare was also reporting this error with falsecolor.  I'm 
beginning to suspect that there's either something wrong with the "ev" 
program on some compiled systems, or else there is another program by 
this name that comes before the Radiance one in people's execution 
paths.  What do you get when you type the following command?

	which psign ev

(Respond to me directly at <gward@lmi.net> -- we'll post what we find 
out to the mailing list once it's sorted.)

-Greg

> From: gurneet <gurneet@students.iiit.net>
> Date: Mon Oct 13, 2003  11:54:42  AM US/Pacific
>
> hi,
> i am facing a problem with falsecolor
> whenever i give the command i get an error "System - Out of memory in 
> makemap"
>
> cna anybody tell whats the error for and the remedy
>
> gurneet


From radiance-general@radiance-online.org  Tue Oct 14 17:51:56 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Tue, 14 Oct 2003 09:51:56 -0700
Subject: [Radiance-general] Re: problem with falsecolor
In-Reply-To: <3F8C25C9.5050109@students.iiit.net>
Message-ID: <B8AAE0A4-FE66-11D7-9668-000A956D40C8@lmi.net>

Hi All,

Gurneet and I figured out the problem with falsecolor.  There was a 
declaration of errno in ev.c that has been deprecated, which was 
causing a run-time error with the following message on some systems:

	Incorrectly built binary which accesses errno, h_errno or _res 
directly. Needs to be fixed

Tragically, this message was being spat to stdout rather than stderr, 
which then got passed to psign rather than being visible to the user.  
(Those whacky GNU compiler guys -- what a fun bunch they are!)

The solution is to take out the line "extern int errno;" from 
ray/src/cal/ev.c and run "rmake install" in the ray/src/cal directory.  
The source tree has been updated as well.

Sorry for the trouble!
-Greg


From radiance-general@radiance-online.org  Tue Oct 14 17:40:39 2003
From: radiance-general@radiance-online.org (radiance-general@radiance-online.org)
Date: Tue, 14 Oct 2003 09:40:39 -0700 (MST)
Subject: [Radiance-general] sky definition
Message-ID: <1066149639.3f8c270792057@webmail.asu.edu>

hello everyone,

Thanks to u’all ‘the gurus’ I have not only started getting better results, 
but know better what I am doing.  However the sky still completely baffles me, 
especially since it is defined so easily even though it is so complex.  

Here are the questions:
1. All I do to specify the sun is write the following one line for the sun : 
does gensky model the sun as a light material using these definitions?
!gensky 4 11 13:0 +s -a (latitude) -o (longitude) -m (meridian) –B (horizontal 
diffuse irradiance) –R (horizontal direct irradiance, can direct normal be 
used?)

2. Should skyfunc be defined by me before it is used as a modifier in the sky 
definition, or does the skyfunc modifier take the input from the first line 
(as above) to modify the glow command?  (pg 355 of RWR)

3. Following parameters define the sky and I believe it is modified so as to 
give a blue hue etc, but how is it determined as to what it should be for a 
specific case?
skyfunc glow skyglow
0
0
4 .986 .986 1.205 0 (these values are modified, sometimes 4 .9 .9 1 0 is used 
also for sunny skies)

skyglow source sky
0
0
4 0 0 1 180

4. Similarly while defining the ground, what is the best way to determine what 
the ground values for RGB should be – I have been contemplating between using 
one of the following case but what should I base the decision on? How do you 
judge as to what values should be used for your specific case?
skyfunc glow ground_glow
0
0
4 1 .7 .25 0 (or 4 1 1 1 0 is used, I am guessing, for a uniform glow!)

ground_glow source ground
0
0
4 0 0 -1 180

I would really be grateful if someone could help me with this or guide me to a 
specific text material which I may have missed when trying to look for the 
answer to the above questions.

Thanks and have a great day!

Amarpreet

Graduate Student
Arizona State University




From radiance-general@radiance-online.org  Tue Oct 14 19:10:29 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Tue, 14 Oct 2003 14:10:29 -0400
Subject: [Radiance-general] sky definition
In-Reply-To: <1066149639.3f8c270792057@webmail.asu.edu>
References: <1066149639.3f8c270792057@webmail.asu.edu>
Message-ID: <3F8C3C15.7020907@rumblestrip.org>

Hi Amarpreet,

Good timing, I was just eating lunch here...

sethi@asu.edu wrote:

> ... However the sky ...  is defined so easily even though it is so complex.

Well said; I wish more of our clients understood this very simple truth!

> Here are the questions:
> 1. All I do to specify the sun is write the following one line for the sun : 
> does gensky model the sun as a light material using these definitions?
> !gensky 4 11 13:0 +s -a (latitude) -o (longitude) -m (meridian) –B (horizontal 
> diffuse irradiance) –R (horizontal direct irradiance, can direct normal be 
> used?)

Gensky is very flexible, and simple, but added complexity is available. 
   =8-) The manpage explicitly lists all the options, but I don't 
believe specifying direct normal irradiance is an option.  You can 
specify the sun radiance, however.  Others can probably give better info 
on these options, as I tend to use the lat/long/timezone/TOD method.

> 2. Should skyfunc be defined by me before it is used as a modifier in the sky 
> definition, or does the skyfunc modifier take the input from the first line 
> (as above) to modify the glow command?  (pg 355 of RWR)

You've got it, skyfunc is *defined* by gensky, and *applied* by you in 
your subsequent source statements.  When you use skyfunc as a modifier 
right after the inline !gensky command, the sky glow is modeled using 
your input parameters from that gensky command.

> 3. Following parameters define the sky and I believe it is modified so as to 
> give a blue hue etc, but how is it determined as to what it should be for a 
> specific case?
> skyfunc glow skyglow
> 0
> 0
> 4 .986 .986 1.205 0 (these values are modified, sometimes 4 .9 .9 1 0 is used 
> also for sunny skies)
> 
> skyglow source sky
> 0
> 0
> 4 0 0 1 180

By specific case you mean sky color?  The color is totally arbitrary, 
however this is very important, the weighted average RGB must add up to 
1!  If you pick values that give you a pleasing sky color but add up to 
greater or less than 1, your sky luminance will be incorrect.  It will 
be factored by the deviation from 1 in your average.  And, .9 .9 1 
(which is used as an example blue sky on the gensky manpage) is just 
such a combination!  I mentioned this to Greg a little while ago, and I 
think it got fixed in the distribution, but the radiance website still 
has the error:

http://www.radiance-online.org/pipermail/radiance-general/2003-May/000789.html

(hmm, Schorsch, yours still has this error as well: 
http://www.schorsch.com/rayfront/manual/htmlman/gensky.html)


> 4. Similarly while defining the ground, what is the best way to determine what 
> the ground values for RGB should be – I have been contemplating between using 
> one of the following case but what should I base the decision on? How do you 
> judge as to what values should be used for your specific case?
> skyfunc glow ground_glow
> 0
> 0
> 4 1 .7 .25 0 (or 4 1 1 1 0 is used, I am guessing, for a uniform glow!)

Colorwise, the same thing applies for grounds and skies.  Use a color 
that makes sense and don't over saturate it, and make sure its weighted 
average equals 1.  As for ground reflectance, just make sure you specify 
the average ground reflectance in your gensky command with the -g 
parameter.  When skyfunc sees the negative z component to your ground 
hemisphere it will modify the reflectance of that glow by whatever 
factor you used in -g. When you use this feature, as long as the -g 
reflectance matches whatever material you use for your local ground 
plane, you will get a very good match (except at certain shallow viewing 
angles) between the local plane and the distant horizon.

----

      Rob Guglielmetti

e. rpg@rumblestrip.org
w. www.rumblestrip.org



From radiance-general@radiance-online.org  Tue Oct 14 19:18:21 2003
From: radiance-general@radiance-online.org (Robin Rowe)
Date: Tue, 14 Oct 2003 11:18:21 -0700
Subject: [Radiance-general] Radiance presentation in Hollywood
Message-ID: <00f301c3927f$8e213a30$0200a8c0@tbird>

Hi. Would anyone like to make a Radiance presentation at the Linux Movies
Group in Hollywood?

Please respond off-list.

Thanks,

Robin
www.LinuxMovies.org
---------------------------------------------------------------------------
Robin.Rowe@MovieEditor.com   Hollywood, California
www.CinePaint.org   Free motion picture and still image editing software


From radiance-general@radiance-online.org  Tue Oct 14 19:49:34 2003
From: radiance-general@radiance-online.org (Georg Mischler)
Date: Tue, 14 Oct 2003 14:49:34 -0400 (EDT)
Subject: [Radiance-general] sky definition
In-Reply-To: <3F8C3C15.7020907@rumblestrip.org>
Message-ID: <Pine.BSF.4.44.0310141439570.47722-100000@emancholl.pair.com>

Rob Guglielmetti wrote:

> sethi@asu.edu wrote:
>
>> Here are the questions:
>> 1. All I do to specify the sun is write the following one line for the sun :
>> does gensky model the sun as a light material using these definitions?
>> !gensky 4 11 13:0 +s -a (latitude) -o (longitude) -m (meridian) –B (horizontal
>> used?)

Just type the command into a shell (console window), and you'll
get a better idea about what you still need to add yourself.


>   And, .9 .9 1
> (which is used as an example blue sky on the gensky manpage) is just
> such a combination!  I mentioned this to Greg a little while ago, and I
> think it got fixed in the distribution, but the radiance website still
> has the error:
>
> http://www.radiance-online.org/pipermail/radiance-general/2003-May/000789.html
>
> (hmm, Schorsch, yours still has this error as well:
> http://www.schorsch.com/rayfront/manual/htmlman/gensky.html)

That will be updated when I integrate a more current version
of Radiance with Rayfront.

Btw: Rayfront users don't need to worry about this. They can just
set the sky/ground color with the standard Rayfront color selector,
and the software will normalize the values to a weighted average
of 1 internally. The original deviation is remembered though,
so that you won't get confused too much when you reopen the same
dialog later.


-schorsch

-- 
Georg Mischler  --  simulations developer  --  schorsch at schorsch com
+schorsch.com+  --  lighting design tools  --  http://www.schorsch.com/



From radiance-general@radiance-online.org  Tue Oct 14 20:00:52 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Tue, 14 Oct 2003 12:00:52 -0700
Subject: [Radiance-general] sky definition
In-Reply-To: <3F8C3C15.7020907@rumblestrip.org>
Message-ID: <BB90F292-FE78-11D7-94B7-000A956D40C8@lmi.net>

Very nice response, Rob.  You're correct that gensky doesn't offer an 
option for specifying the direct normal solar irradiance, only the 
direct horizontal irradiance (-R) and solar radiance (-r).  To compute 
the solar radiance from direct normal irradiance, divide the normal 
irradiance by 5.98e-5, which is the number of steradians in a 0.5 
degree source like the sun.

To confuse matters further, you should probably consider the solar 
efficacy if you are working from true irradiance measurements and 
attempting to get absolute photometric results out of Radiance.  As I 
explained at the workshop, Radiance uses a conversion of 179 
lumens/watt to go back and forth between photometric and radiometric 
units.  Since the same constant is used for the forward and reverse 
conversions, it usually drops out and is of no concern.  However, no 
such conversion occurs on the input to gensky, so you should probably 
intervene with your own correction if you are working from physical 
data.  Therefore, I recommend multiplying values to the -r and -R 
options by:

	208/179		the ratio between the sun's efficacy and the standard 
Radiance factor

Likewise, values to the -b and -B options should be multiplied by:

	110/179		the ratio for sky radiation efficacy over the standard 
Radiance factor

This way, when 179 gets applied on the output conversion to photometric 
units, you will get closer to the correct absolute results.

If folks think I should add these factors directly into gensky, I would 
be happy to.  My principal hesitation in making such a correction is 
the confusion it may cause users whose scripts have been running one 
way for years when they get different results in the next version.

-Greg


From radiance-general@radiance-online.org  Tue Oct 14 22:52:02 2003
From: radiance-general@radiance-online.org (radiance-general@radiance-online.org)
Date: Tue, 14 Oct 2003 14:52:02 -0700 (MST)
Subject: [Radiance-general] sky definition
In-Reply-To: <BB90F292-FE78-11D7-94B7-000A956D40C8@lmi.net>
References: <BB90F292-FE78-11D7-94B7-000A956D40C8@lmi.net>
Message-ID: <1066168322.3f8c70028b33e@webmail.asu.edu>

Thank you all. This was extremely helpful.
 
Thanks Rob, for all the detail answers for so many of my questions.
  
Greg, I was using 120/179 multiplying factor for both sky and sun brightness 
values.  Hence, will switch to what you mentioned, which is seperate for the 
sky and sun brightness.  

Regarding the Direct normal radiation - I found that this value was specified 
as the amount of solar radiation received within a 5.7° field of view centered 
on the sun (during the 60 minutes preceding the hour indicated), would I still 
be dividing by 5.98e-5 as you mentioned to get the -r? or is this a different 
value all together?

Thanks very much.

best regards,
Amarpreet



Quoting Greg Ward <gward@lmi.net>:

> Very nice response, Rob.  You're correct that gensky doesn't offer an 
> option for specifying the direct normal solar irradiance, only the 
> direct horizontal irradiance (-R) and solar radiance (-r).  To compute
> 
> the solar radiance from direct normal irradiance, divide the normal 
> irradiance by 5.98e-5, which is the number of steradians in a 0.5 
> degree source like the sun.
> 
> To confuse matters further, you should probably consider the solar 
> efficacy if you are working from true irradiance measurements and 
> attempting to get absolute photometric results out of Radiance.  As I 
> explained at the workshop, Radiance uses a conversion of 179 
> lumens/watt to go back and forth between photometric and radiometric 
> units.  Since the same constant is used for the forward and reverse 
> conversions, it usually drops out and is of no concern.  However, no 
> such conversion occurs on the input to gensky, so you should probably 
> intervene with your own correction if you are working from physical 
> data.  Therefore, I recommend multiplying values to the -r and -R 
> options by:
> 
> 	208/179		the ratio between the sun's efficacy and the standard 
> Radiance factor
> 
> Likewise, values to the -b and -B options should be multiplied by:
> 
> 	110/179		the ratio for sky radiation efficacy over the standard 
> Radiance factor
> 
> This way, when 179 gets applied on the output conversion to photometric
> 
> units, you will get closer to the correct absolute results.
> 
> If folks think I should add these factors directly into gensky, I would
> 
> be happy to.  My principal hesitation in making such a correction is 
> the confusion it may cause users whose scripts have been running one 
> way for years when they get different results in the next version.
> 
> -Greg
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
> 




From radiance-general@radiance-online.org  Tue Oct 14 23:13:07 2003
From: radiance-general@radiance-online.org (Georg Mischler)
Date: Tue, 14 Oct 2003 18:13:07 -0400 (EDT)
Subject: [Radiance-general] sky definition
In-Reply-To: <BB90F292-FE78-11D7-94B7-000A956D40C8@lmi.net>
Message-ID: <Pine.BSF.4.44.0310141801000.47722-100000@emancholl.pair.com>

Greg Ward wrote:

>   Therefore, I recommend multiplying values to the -r and -R
> options by:
>
> 	208/179		the ratio between the sun's efficacy and the standard
> Radiance factor
>
> Likewise, values to the -b and -B options should be multiplied by:
>
> 	110/179		the ratio for sky radiation efficacy over the standard
> Radiance factor

Is that the clear sky?
DIN 5034 has 115 for the overcast sky. Not sure if that's
really a significant amount of difference, though.


> This way, when 179 gets applied on the output conversion to photometric
> units, you will get closer to the correct absolute results.
>
> If folks think I should add these factors directly into gensky, I would
> be happy to.  My principal hesitation in making such a correction is
> the confusion it may cause users whose scripts have been running one
> way for years when they get different results in the next version.

Not only that, but people will probably want to use different
values for different types of skies. I suspect that using any
specific conversion doesn't make much sense, unless you know
exactly under what conditions your measurements were taken.
Or are the above figures widely accepted to be "close enough"?


-schorsch

-- 
Georg Mischler  --  simulations developer  --  schorsch at schorsch com
+schorsch.com+  --  lighting design tools  --  http://www.schorsch.com/


From radiance-general@radiance-online.org  Wed Oct 15 06:22:33 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Tue, 14 Oct 2003 22:22:33 -0700
Subject: [Radiance-general] Re: sky definition
In-Reply-To: <1066168322.3f8c70028b33e@webmail.asu.edu>
Message-ID: <94CF54E2-FECF-11D7-9201-000A956D40C8@lmi.net>

Hi Amarpreet,

The fact that the direct normal measurement covers a 5.7 degree field 
of view doesn't change the actual angular size of the sun.  There 
should probably be some small correction added for the circumsolar that 
is included by the measurement, but it would vary so much with 
atmospheric turbidity, that the errors associated with such a 
correction would probably be so large as to make it a next to pointless 
fudge factor.  I wouldn't bother with it, myself.

-Greg

> From: sethi@asu.edu
> Date: Tue Oct 14, 2003  2:52:02  PM US/Pacific
>
> Regarding the Direct normal radiation - I found that this value was 
> specified
> as the amount of solar radiation received within a 5.7° field of view 
> centered
> on the sun (during the 60 minutes preceding the hour indicated), would 
> I still
> be dividing by 5.98e-5 as you mentioned to get the -r? or is this a 
> different
> value all together?



From radiance-general@radiance-online.org  Thu Oct 16 07:20:47 2003
From: radiance-general@radiance-online.org (Zack Rogers)
Date: Thu, 16 Oct 2003 00:20:47 -0600
Subject: [Radiance-general] sky definition part 2
Message-ID: <3F8E38BF.7000306@archenergy.com>

Hello,

Gensky seems to be a hot topic these days.  My questions have to do with 
the turbidity factor and the accuracy of the gensky in producing a CIE sky.

My quest started today when I noticed in the man pages that for gensky a 
low turbidity factor corresponds to less particles in the atmosphere (1 
being a completely dark sky) and a higher turbidity means more particles 
in the air.  This caused me to question the way we had calibrated some 
skies to better match some measurements taken here in Denver.  I was 
wanting to adjust the turbidity factor to account for the high elevation 
here (higher elevations having less particles in the air).  However, I 
mistakenly adjusted the turbidity up since that was increasing my global 
horiz. illuminance, the expected outcome since higher elevations do have 
a slightly higher global illuminance.

What I discovered (which I would have found documented in the archives, 
Feb, 1995) is that the turbidity only adjusts the sky component and does 
not effect the solar component at all.  So when I was raising turbidity, 
I was increasing atmospheric particles (my sky component) while keeping 
exactly the same direct solar component.  I got the overall result I was 
looking for but looking deeper at the sun and sky components separately, 
I realized my sun was producing 2000fc less than it should and my sky 
was producing 1500fc more!  Here's my comparison for June 21, 40 lat, 
105 long, 12:00PM;

The CIE sky function tells me I need approximately 1486 fc diffuse horiz 
and 8817fc direct horiz for a total of 10303fc

Gensky w/ T=1.5
Sky = 203fc ; Sun = 6836fc ; Global = 7039fc

T=2.5
Sky = 948fc ; Sun = 6836fc ; Global = 7784fc

T=3.5
Sky = 1694fc ; Sun = 6836fc ; Global = 8530fc

T=4.5
Sky = 2438fc ; Sun = 6836fc ; Global = 9274fc

T=5.5
Sky = 3184fc ; Sun = 6836fc ; Global = 10020fc

Obviously T=5.5 is wrong but it does give the closest global value.

So my question now, or problem, is that I would like to be able to 
create true CIE skies but am not sure the best way how.

I started by determining what Turbidity gives me the desired sky 
illuminance.  This came out to be 3.22 for summer, 3.41 for equinox, and 
3.55 for winter.  I am not sure why the variation between summer and 
winter, it seems perhaps because more particles get trapped by cold 
pockets during the winter??

So, using T=3.22 gives me the desired sky component during the summer 
solstice but I still need to specify the correct direct component.  I 
did this by specifying the radiance with the -r option.  I avoided 
having to mess efficacy conversions by just doing it iteratively until 
my global illuminance was what I wanted.  A solar radiance -r value of 
9,250,000 and T=3.22 gave me very good results for the summer sky - 
1486fc sky ; 8819fc sun ; and 10305fc total to be exact. BTW changing 
the -r value does cause a very small increase in the sky component (as 
it should, but not sure if it is accurate).

So, I went to see how these values, calibrated to give CIE summer sky, 
would work for an equinox and winter sky.  I already knew the turbidity 
should be a little different under these times but was hoping the same 
solar radiance value would work reasonably well.  Here's those results 
(all with -r 9,250,000) ;

Equinox, 12:00PM
CIE tells me I need 1328fc sky ; 6894fc sun ; 8223fc global
Radiance gives me 1223fc (T=3.22) or 1330fc (T=3.41) sky ; 7003fc sun ; 
8333fc global

Winter Solstice, 12:00PM
CIE tells me I need 1036fc sky ; 3421fc sun ; 4458fc global
Radiance gives me 919fc (T=3.22) or 1041fc (T=3.55) sky ; 4114fc sun ; 
5033fc global
This sun produces 600fc more than it should!

So, these comparisons tell me that for an accurate CIE sky, I need to 
use a Turbidity somewhere between 3.22 to 4, depending on elevation and 
pollution levels, and that I need to determine separate solar radiance 
values for each sky.

This is a pain.  Why does gensky not produce a more accurate CIE sky 
model?  I guess Greg acknowledged this back in his 1995 post
"

Let me start by saying that I have little confidence in the sky or solar
luminance calculations of gensky.  They are based on some simple 
rule-of-thumb
calculations and mean sky measurements taken years ago.  If you are serious
about your sky model (and it appears that you are), you should insert 
your own
values for sky and solar luminance via the -b and -r (or -B and -R) options
to gensky.  This will override the turbidity calculation for zenith 
luminance,
which as you noted, does not affect solar luminance as it ought.

"
So, my suggestion is to update gensky to accurately implement the CIE 
sky model, or is it the general consensus that gendaylit based on the 
perez sky model is the more accurate model?  The CIE sky model has 
always been resonably accurate for me when comparing with both luminance 
and illuminance measurements - I am always looking for the most average 
sky though and not a completely accurate sky for a given point in time. 

Maybe one the main issues is that the turbidity factor needs to adjust 
the solar component as well as the sky, and the solar component seems 
defaulted at too low of a value for a CIE sky.  Furthermore, maybe it 
would be a good idea just to hide the turbidity factor completely and 
just let the user adjust the elevation and perhaps give a pollution 
factor.  When I created a CIE sky model for TracePro (a highly accurate 
forward ray-tracing program),  I gave it essentially the same inputs as 
gensky (lat long month day time skytype) but instead of a turbidity 
factor, which as I recall is not part of the CIE sky model equations, I 
did some studies on elevation impacts and created elevation factors. 
 The elevation factors were based on weather data from stations at 
altitudes varying from sea level up to 10,000ft.  The results showed 
that the diffuse component decreases roughly 15% at 5,000fc and the 
direct component increases 20% at 5,000fc compared to sea level (If 
anyone is interested in this elevation factor study let me know and I 
can e-mail you the graphs).

Anyways, I'm very interested in the groups thoughts on these issues. 
 Please correct me if I have misunderstood any of these results.  BTW - 
the "accurate" CIE values I reported were calculated with 2 different 
programs - one that descretizes the sky into 1deg by 1deg blocks and 
then summates and the more accurate TracePro macro program that 
descretizes the sky into as many rays as you want to trace.  Both of 
these give very similar results.

Thanks in advance!
Zack

PS It was great meeting everybody out in Berkeley - what a wonderful 
group of techno geeks we are!
PPS Sorry for the long e-mail

-- 
Zack Rogers
Staff Engineer
Architectural Energy Corporation
2540 Frontier Avenue, Suite 201
Boulder, CO 80301 USA

tel (303)444-4149 ext.235
fax (303)444-4304
www.archenergy.com



From radiance-general@radiance-online.org  Thu Oct 16 11:48:17 2003
From: radiance-general@radiance-online.org (Axel Jacobs)
Date: Thu, 16 Oct 2003 11:48:17 +0100
Subject: [Radiance-general] LEARNIX 2003-10-14 released
Message-ID: <3F8E7771.5060407@londonmet.ac.uk>

Esteemed collegues, dear friends, fellow LINUXers

LEARN, the Low Energy Architecture Research Unit of the London 
Metropolitan University, proudly present LEARNIX version 2003-10-14. 
LEARNIX is a KNOPPIX based LINUX distributions that runs off the CD-ROM 
and doesn't require installing. User data can be saved onto existing 
Windoze partitions (not NTFS) or to USB storage devices.

KNOPPIX 3.3 + RADIANCE 3.5 + ESP-r 10.5 = LEARNIX 2003-10-14

Enjoy

Luisa Brotas and Axel Jacobs



From radiance-general@radiance-online.org  Thu Oct 16 15:22:57 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Thu, 16 Oct 2003 10:22:57 -0400
Subject: [Radiance-general] LEARNIX 2003-10-14 released
In-Reply-To: <3F8E7771.5060407@londonmet.ac.uk>
References: <3F8E7771.5060407@londonmet.ac.uk>
Message-ID: <3F8EA9C1.3000105@rumblestrip.org>

Axel Jacobs wrote:
> Esteemed collegues, dear friends, fellow LINUXers
> 
> LEARN, the Low Energy Architecture Research Unit of the London 
> Metropolitan University, proudly present LEARNIX version 2003-10-14. 
> LEARNIX is a KNOPPIX based LINUX distributions that runs off the CD-ROM 
> and doesn't require installing. User data can be saved onto existing 
> Windoze partitions (not NTFS) or to USB storage devices.
> 
> KNOPPIX 3.3 + RADIANCE 3.5 + ESP-r 10.5 = LEARNIX 2003-10-14
> 
> Enjoy

Looks very nice, Axel; this appears to be exactly what Terrance McMinn 
cooked up back in March:

http://www.radiance-online.org/pipermail/radiance-general/2003-March/000573.html

Hopefully these two projects get a few more people to have a go with 
Radiance.  One thing, you neglected to post a url to the project!  A few 
moments with Google showed me the way, though:

http://luminance.londonmet.ac.uk/learnix/index.php

All hail Google.  Google reigns supreme.  =8-)  Good luck with the 
project, Axel & Luisa.

----

      Rob Guglielmetti

e. rpg@rumblestrip.org
w. www.rumblestrip.org


From radiance-general@radiance-online.org  Thu Oct 16 16:02:08 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Thu, 16 Oct 2003 08:02:08 -0700
Subject: [Radiance-general] Re: sky definition part 2
In-Reply-To: <3F8E38BF.7000306@archenergy.com>
Message-ID: <B6AD5D54-FFE9-11D7-92C9-000A956D40C8@lmi.net>

Hi Zack,

It was great to meet you at the workshop, and I really enjoyed your 
presentation.

I think you're making trouble for yourself by trying to adjust the 
turbidity factor in gensky.  If you have the horizontal and diffuse 
irradiance, or facsimilies thereof, you should be giving those to 
gensky directly using the -B or -b and -R or -r options as we have been 
discussing.

Just to clarify, gensky ALWAYS produces an accurate CIE sky 
distribution.  Adjusting the turbidity or these other factors only 
affects the absolute levels and the ratio between solar and sky 
components.  It does not change the distribution of skylight.

This is not to say that the CIE sky model is the best.  It is just an 
agreed upon standard, and therefore serves as a reasonable point for 
comparison.  The Perez sky is probably a better approximation to actual 
skies, particularly for the intermediate case.

As I said in the bit of e-mail you so aptly quoted, the absolute values 
produced by gensky with the default settings are unreliable because 
they are not based on weather data for your area.  If you have such 
measurements, by all means use them, but don't adjust the turbidity -- 
go straight for the horizontal and diffuse specifications to gensky.  
This overrides the turbidity approximation and makes it irrelevant.

I hope this helps.
-Greg

P.S.  I got an e-mail from Martin Moeck on the related topic of solar 
efficacy, and include it here for discussion.  I don't know the right 
answer, but I'm sure someone out there does...

Begin forwarded message:

> From: Greg Ward <gward@lmi.net>
> Date: Wed Oct 15, 2003  2:33:06  PM US/Pacific
>
> Hi Martin,
>
> Now that you mention it, I'm not sure at all.  I got my number from 
> the efficacy of Standard Illuminant B, which is simulated (rather than 
> real) sunlight, and it could be way off.  Where do you get your 
> numbers?  If you are sure of them, please forward this message with my 
> apologies to radiance-general.
>
> Thanks!
> -Greg
>
>> From: "Martin Moeck" <MMoeck@engr.psu.edu>
>> Date: Wed Oct 15, 2003  2:26:55  PM US/Pacific
>>
>> Greg,
>>
>> are you sure? The sun's luminous efficacy above 20 deg. altitude is 
>> somewhere around 95-100 lm/W, overcast skies are around 120 lmW, 
>> clear skies around 150 lm/W. Therefore, your multipliers for the -R/r 
>> options should be smaller than the multipliers for the -B/b  options?
>>
>> Martin
>


From radiance-general@radiance-online.org  Thu Oct 16 16:14:16 2003
From: radiance-general@radiance-online.org (Axel Jacobs)
Date: Thu, 16 Oct 2003 16:14:16 +0100
Subject: [Radiance-general] LEARNIX 2003-10-14 released (update)
Message-ID: <3F8EB5C8.4020509@londonmet.ac.uk>

Silly me,

here comes the URL:

http://luminance.londonmet.ac.uk/learnix.

The difference to what Terry posted some time ago is that 
KNOPPIX/LEARNIX doesn't require any manual configuration (except  on 
rare occasions, e.g. for the screen resolution), and the ESP-r is also 
new. Note that KNOPPIX uses a compressed file system, so there are more 
than 1.5GB of applications on the CD, such as OpenOffice 1.1...

Cheers

Axel



From radiance-general@radiance-online.org  Thu Oct 16 16:55:17 2003
From: radiance-general@radiance-online.org (Alex Summerfield)
Date: Thu, 16 Oct 2003 16:55:17 +0100
Subject: [Radiance-general] Re: sky definition part 2
In-Reply-To: <B6AD5D54-FFE9-11D7-92C9-000A956D40C8@lmi.net>
Message-ID: <2383AB2A-FFF1-11D7-A1BB-003065469002@arch.usyd.edu.au>

Gidday Greg, Zack & others...

Just to chip in about measurement and efficacies -

Paul Littlefair wrote a great review paper on sky efficacies, with overall 
results:
144+-7 lm/W clear skys
115+-8 lm/W overcast skies

Littlefair, PJ Measurement of the Luminous Efficacy, Light. Res & Tech, 
1988 4:p177-188

This might also be of interest
Fontoynont, M, Perceived Performance of Daylighting Systems: Lighting 
Efficacy and Agreeableness, Solar Energy 2002 73(2) p83-94

And it should be remembered that measurements are often not of the actual 
sky spectral power distribution but are taken with equipment calibrated to 
Illuminant A with 160 lm/W.

And if calibrated to D65 then efficacy is 203 lm/W.

hopefully all this doesn't make things even more 'hazy' :)

cheers
alex

*******************************************************
A. J. Summerfield                 alex@arch.usyd.edu.au
Faculty of Architecture, University of Sydney

Outside of a dog, a book is man's best friend.
Inside a dog, it's too dark to read.       Groucho Marx
*******************************************************

On Thursday, October 16, 2003, at 04:02 PM, Greg Ward wrote:

> Hi Zack,
>
> It was great to meet you at the workshop, and I really enjoyed your 
> presentation.
>
> I think you're making trouble for yourself by trying to adjust the 
> turbidity factor in gensky.  If you have the horizontal and diffuse 
> irradiance, or facsimilies thereof, you should be giving those to gensky 
> directly using the -B or -b and -R or -r options as we have been 
> discussing.
>
> Just to clarify, gensky ALWAYS produces an accurate CIE sky distribution.
>   Adjusting the turbidity or these other factors only affects the 
> absolute levels and the ratio between solar and sky components.  It does 
> not change the distribution of skylight.
>
> This is not to say that the CIE sky model is the best.  It is just an 
> agreed upon standard, and therefore serves as a reasonable point for 
> comparison.  The Perez sky is probably a better approximation to actual 
> skies, particularly for the intermediate case.
>
> As I said in the bit of e-mail you so aptly quoted, the absolute values 
> produced by gensky with the default settings are unreliable because they 
> are not based on weather data for your area.  If you have such 
> measurements, by all means use them, but don't adjust the turbidity -- go 
> straight for the horizontal and diffuse specifications to gensky.  This 
> overrides the turbidity approximation and makes it irrelevant.
>
> I hope this helps.
> -Greg
>
> P.S.  I got an e-mail from Martin Moeck on the related topic of solar 
> efficacy, and include it here for discussion.  I don't know the right 
> answer, but I'm sure someone out there does...
>
> Begin forwarded message:
>
>> From: Greg Ward <gward@lmi.net>
>> Date: Wed Oct 15, 2003  2:33:06  PM US/Pacific
>>
>> Hi Martin,
>>
>> Now that you mention it, I'm not sure at all.  I got my number from the 
>> efficacy of Standard Illuminant B, which is simulated (rather than real)
>>  sunlight, and it could be way off.  Where do you get your numbers?  If 
>> you are sure of them, please forward this message with my apologies to 
>> radiance-general.
>>
>> Thanks!
>> -Greg
>>
>>> From: "Martin Moeck" <MMoeck@engr.psu.edu>
>>> Date: Wed Oct 15, 2003  2:26:55  PM US/Pacific
>>>
>>> Greg,
>>>
>>> are you sure? The sun's luminous efficacy above 20 deg. altitude is 
>>> somewhere around 95-100 lm/W, overcast skies are around 120 lmW, clear 
>>> skies around 150 lm/W. Therefore, your multipliers for the -R/r options 
>>> should be smaller than the multipliers for the -B/b  options?
>>>
>>> Martin
>>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>


From radiance-general@radiance-online.org  Thu Oct 16 16:58:33 2003
From: radiance-general@radiance-online.org (Alex Summerfield)
Date: Thu, 16 Oct 2003 16:58:33 +0100
Subject: [Radiance-general] Re: sky definition part 2
In-Reply-To: <B6AD5D54-FFE9-11D7-92C9-000A956D40C8@lmi.net>
Message-ID: <98721860-FFF1-11D7-A1BB-003065469002@arch.usyd.edu.au>

Gidday Greg, Zack & others...

Just to chip in about measurement and efficacies -

Paul Littlefair wrote a great review paper on sky efficacies, with overall 
results:
144+-7 lm/W clear sky
115+-8 lm/W overcast sky

Littlefair, PJ Measurement of the Luminous Efficacy, Light. Res & Tech, 
1988 4:p177-188

Also:
Fontoynont, M, Perceived Performance of Daylighting Systems: Lighting 
Efficacy and Agreeableness, Solar Energy 2002 73(2) p83-94

It should be remembered that measurements are often not of the actual sky 
spectral power distribution but are taken with equipment calibrated to 
Illuminant A with 160 lm/W.

And if calibrated to D65 then efficacy is 203 lm/W.

hopefully all this doesn't make things even more 'hazy' :)

cheers
alex

*******************************************************
A. J. Summerfield                 alex@arch.usyd.edu.au
Faculty of Architecture, University of Sydney

Outside of a dog, a book is man's best friend.
Inside a dog, it's too dark to read.       Groucho Marx
*******************************************************

On Thursday, October 16, 2003, at 04:02 PM, Greg Ward wrote:

> Hi Zack,
>
> It was great to meet you at the workshop, and I really enjoyed your 
> presentation.
>
> I think you're making trouble for yourself by trying to adjust the 
> turbidity factor in gensky.  If you have the horizontal and diffuse 
> irradiance, or facsimilies thereof, you should be giving those to gensky 
> directly using the -B or -b and -R or -r options as we have been 
> discussing.
>
> Just to clarify, gensky ALWAYS produces an accurate CIE sky distribution.
>   Adjusting the turbidity or these other factors only affects the 
> absolute levels and the ratio between solar and sky components.  It does 
> not change the distribution of skylight.
>
> This is not to say that the CIE sky model is the best.  It is just an 
> agreed upon standard, and therefore serves as a reasonable point for 
> comparison.  The Perez sky is probably a better approximation to actual 
> skies, particularly for the intermediate case.
>
> As I said in the bit of e-mail you so aptly quoted, the absolute values 
> produced by gensky with the default settings are unreliable because they 
> are not based on weather data for your area.  If you have such 
> measurements, by all means use them, but don't adjust the turbidity -- go 
> straight for the horizontal and diffuse specifications to gensky.  This 
> overrides the turbidity approximation and makes it irrelevant.
>
> I hope this helps.
> -Greg
>
> P.S.  I got an e-mail from Martin Moeck on the related topic of solar 
> efficacy, and include it here for discussion.  I don't know the right 
> answer, but I'm sure someone out there does...
>
> Begin forwarded message:
>
>> From: Greg Ward <gward@lmi.net>
>> Date: Wed Oct 15, 2003  2:33:06  PM US/Pacific
>>
>> Hi Martin,
>>
>> Now that you mention it, I'm not sure at all.  I got my number from the 
>> efficacy of Standard Illuminant B, which is simulated (rather than real)
>>  sunlight, and it could be way off.  Where do you get your numbers?  If 
>> you are sure of them, please forward this message with my apologies to 
>> radiance-general.
>>
>> Thanks!
>> -Greg
>>
>>> From: "Martin Moeck" <MMoeck@engr.psu.edu>
>>> Date: Wed Oct 15, 2003  2:26:55  PM US/Pacific
>>>
>>> Greg,
>>>
>>> are you sure? The sun's luminous efficacy above 20 deg. altitude is 
>>> somewhere around 95-100 lm/W, overcast skies are around 120 lmW, clear 
>>> skies around 150 lm/W. Therefore, your multipliers for the -R/r options 
>>> should be smaller than the multipliers for the -B/b  options?
>>>
>>> Martin
>>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>


From radiance-general@radiance-online.org  Thu Oct 16 17:20:05 2003
From: radiance-general@radiance-online.org (Martin Moeck)
Date: Thu, 16 Oct 2003 12:20:05 -0400
Subject: FW: [Radiance-general] sky definition
Message-ID: <84F05BA9118BBD4A8FC6409808CE266C06CD2C@ENGRMAIL2.engr.psu.edu>

Greg suggested yesterday:
"so you should probably intervene with your own correction if you are working from physical
data.  Therefore, I recommend multiplying values to the -r and -R options by:

        208/179         the ratio between the sun's efficacy and the standard
Radiance factor

Likewise, values to the -b and -B options should be multiplied by:

        110/179         the ratio for sky radiation efficacy over the standard
Radiance factor"

 

I wrote back:

> Greg,
>
> are you sure? The sun's luminous efficacy above 20 deg. altitude is
> somewhere around 95-100 lm/W, overcast skies are around 120 lmW, clear
> skies around 150 lm/W. Therefore, your multipliers for the -R/r
> options should be smaller than the multipliers for the -B/b  options?
>
> Martin


Greg answered:


	Hi Martin,
	
	Now that you mention it, I'm not sure at all.  I got my number from the
	efficacy of Standard Illuminant B, which is simulated (rather than
	real) sunlight, and it could be way off.  Where do you get your
	numbers?  If you are sure of them, please forward this message with my
	apologies to radiance-general.
	
	Thanks!
	-Greg
	
	

	

	My answer: 

	The numbers for the solar/beam lumens/watt can be obtained from the Illuminating Engineering Society Handbook , and they are listed as 95 lm/W. If you need more precise data, you can go to 

	http://idmp.entpe.fr/library/papers/evlumeff.pdf

	as one example. I do not think that taking the CIE daylight illuminants and their luminous efficacy is a good way to do it. 

	 

	The following book

	"Daylighting in Architecture" edited by Baker, Fanchiotti, Steemers and published by James & James  (ISBN 1-873936-21-4) lists luminous efficacy functions for various sky/cloud conditions and sun altitudes on pages 10.4 and 10.5. Input needed is the global irradiance for calculating the overcast efficacy. They also give a formula for calculating luminous efficacies for skies with both clear and diffuse components by taking their ratio. 

	From those values, they offer a formula to obtain internal illuminance subdivided into the internal direct sunlight factor, the clear sky factor and the overcast sky factor. 

	Nevertheless, I had good experiences with actual weather data from www.meteotest.com (software Meteonorm) and "gendaylit". 

	 

	Martin, Penn State

	 

	 



From radiance-general@radiance-online.org  Thu Oct 16 06:12:59 2003
From: radiance-general@radiance-online.org (Peter Apian-Bennewitz)
Date: Thu, 16 Oct 2003 07:12:59 +0200
Subject: [Radiance-general] Online availability of conference CD-ROM?
In-Reply-To: <A2B098B4E624D511BED900508BB92A57078CDF85@exmsb02.curtin.edu.au>
References: <A2B098B4E624D511BED900508BB92A57078CDF85@exmsb02.curtin.edu.au>
Message-ID: <3F8E28DB.8050509@pab-opto.de>

Terrance Mc Minn wrote:

>Hi Rob,
>
>On Thursday , 2 Oct 2003 00:13:09 -0400  Rob Guglielmetti wrote:
>
>  
>
>>The CD-ROM is already available on the site; they beat me to it, no vote
>>    
>>
>required! =8-)
>
>I can find the CD contents at
>http://www.radiance-online.org/radiance-workshop2/cd/ but not the link to
>the iso image.
>
Yeap. the ISO image (bzip2-ed compressed to save bandwidth) had been on 
my todo list once I got back from the workshop (yesterday, due to a two 
week holiday)
Expect it to appear on the website later today.

-Peter

-- 
 pab-opto, Freiburg, Germany, www.pab-opto.de



From radiance-general@radiance-online.org  Fri Oct 17 01:43:13 2003
From: radiance-general@radiance-online.org (Zack Rogers)
Date: Thu, 16 Oct 2003 18:43:13 -0600
Subject: [Radiance-general] Re: sky definition part 2
References: <B6AD5D54-FFE9-11D7-92C9-000A956D40C8@lmi.net>
Message-ID: <3F8F3B21.6020901@archenergy.com>

Hi Greg,

Thanks for the quick response.

> I think you're making trouble for yourself by trying to adjust the 
> turbidity factor in gensky.  If you have the horizontal and diffuse 
> irradiance, or facsimilies thereof, you should be giving those to 
> gensky directly using the -B or -b and -R or -r options as we have 
> been discussing.

Yes, the turbidity does seem to be trouble since it doesn't affect the 
sun component.  I don't have measurements I am trying to match, I am 
just trying to make sure I have the correct IESNA recommended sky (CIE 
sky) and sun components throughout the year.

> Just to clarify, gensky ALWAYS produces an accurate CIE sky 
> distribution.  Adjusting the turbidity or these other factors only 
> affects the absolute levels and the ratio between solar and sky 
> components.  It does not change the distribution of skylight.

I don't doubt the relative luminance distribution of the sky is 
accurate, I'm just questioning how Radiance determines the correct 
overall level.

I should clarify what I mean when I say the CIE sky function tells 
me....I am refering to both the sky and sun calculations laid out in the 
latest IESNA lighting handbook which uses Kittlers CIE adopted sky 
function (which I understand is from his 1967 studies) to determine the 
sky component.  So I probably should have said that IESNA sky/sun 
functions tell me.  I am not sure if this is the accepted method used by 
others.  The direct component is calculated as this;

Edn = Ext * e ^ (-cm)

where;
Edn = direct normal solar illuminance
Ext = extraterrestrial solar illuminance = Esc * (1 + 0.034 * cos ( 
(2pi/365)*(J-2)))
                where;
                Esc = solar illumination constant = 127.5 klx (11,850 fc)
                J = julian date
c = atmospheric extinction coefficient (given as c = 0.21 for clear ; c 
= 0.8 for partly cloudy)
m = optical air mass = 1 / sin (solar altitude)

and Direct Horizontal (Edh) would then be;
Edh = Edn * sin (solar altitude)

This gives the Direct Horiz to be 8,821 fc on a clear summer solstice at 
40 lat.  This is what I would like Radiance to give me without having to 
specify with the -r parameter.  Currently it is giving me 6,836fc.

The IESNA recommends calculating the diffuse component like this;

Ekh = A + B * (sin (solar altitude))^ C
where;
Ekh = horiz. sky illuminance
A = sunrise/set illuminance = given as 0.8 for clear sky
B = solar altitude illuminance coef. = given as 15.5 for clear sky
C = solar altitude illuminance exponent = given as 0.5 for clear sky 
(all in terms of klux)

This gives a diffuse horiz of 1484.2fc.  Radiance gives me this with a 
turbidity of 3.22.  But as I illustrated before it can range 
dramatically.  Ekh is then fed into the CIE sky distribution function 
like so;

Lz = Ekh * ZL
where;
Lz = zenith luminance
ZL = zenith luminance factor - given as a table of values

Then Lz is part of Kittlers distribution function.  I am not going to 
attempt to type this function but I think we are on the same page here. 
 Although I understand they, CIE, are about to adopt a new sky function 
with 15 different sky types (Thanks Karen for the info!).  I have not 
attempted to wrap my head around this yet...for now I am happy enough 
with the old function.  

> This is not to say that the CIE sky model is the best.  It is just an 
> agreed upon standard, and therefore serves as a reasonable point for 
> comparison.  The Perez sky is probably a better approximation to 
> actual skies, particularly for the intermediate case.

Agreed, although the calcs I have outlined here have generally matched 
up well with my measurements with enough accuracy for my uses, but I am 
usually not in need of an extremely accurate sky just good average 
representations.

> As I said in the bit of e-mail you so aptly quoted, the absolute 
> values produced by gensky with the default settings are unreliable 
> because they are not based on weather data for your area.  If you have 
> such measurements, by all means use them, but don't adjust the 
> turbidity -- go straight for the horizontal and diffuse specifications 
> to gensky.  This overrides the turbidity approximation and makes it 
> irrelevant.

Again, I don't necessarily have measurements and I don't want to have to 
give gensky horiz. or diffuse specifications for annual calculations. 
Although, I guess these could be pulled from annual weather data (TMY2). 
 Is this what others do???   I guess I am just wanting Radiance to give 
me these IESNA recommended results throughout the year without having to 
specify the correct turbidity, diffuce irradiance or solar radiance 
values which are not required inputs to these equations.  It would be 
nice to have an elevation factor as well or a turbidity factor that 
adjusts both the solar and sky accordingly.

Please give me feedback, let me know if I have misintepretted any of 
this.  Since daylighting design puts food on the table I need to make 
sure I am confident in my results.  I am especially concerned since one 
of my current projects is getting pretty detailed discussing fc-hours 
underneath a tree canopy in an atrium in Chicago, given all the other 
approximated variables that will be going into this model it would be 
nice to be confident I am starting with good data.  In this case though 
I am just creating DF's with Radiance and feeding that into TMY2 data. 
 And so I guess as long as my sun to sky ratios are correct it should be 
fine.  

Huh, maybe I just got it....Does the 2.75 default turbidity give the 
correct ratio for the lower sun component Radiance provides?  I guess 
this is what you meant when you said they are not based on measurements 
for my area.  But these IESNA calcs are not for my area either, they are 
for a generic sea level site.  It seems more and more its a discrepancy 
in where the c, A, B, C values come from (these variables essentially 
determine the absolute magnitude for the sun and sky components)  What 
other standards are there in determing the magnitude of the sun and sky 
throughout the year?  Is weather data just used?  I guess I could just 
give my skies a mulitplier outside of gensky that adjusts my skies to 
the levels I want.  Did I just answer my own questions?  Still it would 
be nice if Radiance did this on its own.  Are people really seeing7970 
fc on a clear summer day???? Where are you living?  I guess I am just 
used to our clear Colorado skies where we will see up to 11,000fc 
regularly in the summer.

Well, sorry for typing your eyes off?  Just describing this problem has 
helped me understand much better what is going on.  Hopefully others 
find this discussion useful.  If not, I aplogize.

Thanks!
Zack

-- 
Zack Rogers
Staff Engineer
Architectural Energy Corporation
2540 Frontier Avenue, Suite 201
Boulder, CO 80301 USA

tel (303)444-4149 ext.235
fax (303)444-4304
http://www.archenergy.com




From radiance-general@radiance-online.org  Fri Oct 17 05:21:01 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Thu, 16 Oct 2003 21:21:01 -0700
Subject: [Radiance-general] Re: sky definition part 2
In-Reply-To: <3F8F3B21.6020901@archenergy.com>
Message-ID: <509B4081-0059-11D8-8B57-000A956D40C8@lmi.net>


Begin forwarded message:

> From: Zack Rogers <zrogers@archenergy.com>
> Date: Thu Oct 16, 2003  5:43:13  PM US/Pacific
>
>> Just to clarify, gensky ALWAYS produces an accurate CIE sky 
>> distribution.  Adjusting the turbidity or these other factors only 
>> affects the absolute levels and the ratio between solar and sky 
>> components.  It does not change the distribution of skylight.
>
> I don't doubt the relative luminance distribution of the sky is 
> accurate, I'm just questioning how Radiance determines the correct 
> overall level.

In my opinion, and others may differ, there is no "correct overall 
level" for daylight.  You can come up with a ballpark value, but 
getting within 50% without some more specific weather data is overly 
ambitious.

> I should clarify what I mean when I say the CIE sky function tells 
> me....I am refering to both the sky and sun calculations laid out in 
> the latest IESNA lighting handbook which uses Kittlers CIE adopted sky 
> function (which I understand is from his 1967 studies) to determine 
> the sky component.  So I probably should have said that IESNA sky/sun 
> functions tell me.  I am not sure if this is the accepted method used 
> by others.  The direct component is calculated as this;
>
> Edn = Ext * e ^ (-cm)
>
> where;
> Edn = direct normal solar illuminance
> Ext = extraterrestrial solar illuminance = Esc * (1 + 0.034 * cos ( 
> (2pi/365)*(J-2)))
>                where;
>                Esc = solar illumination constant = 127.5 klx (11,850 
> fc)
>                J = julian date
> c = atmospheric extinction coefficient (given as c = 0.21 for clear ; 
> c = 0.8 for partly cloudy)
> m = optical air mass = 1 / sin (solar altitude)
>
> and Direct Horizontal (Edh) would then be;
> Edh = Edn * sin (solar altitude)
>
> This gives the Direct Horiz to be 8,821 fc on a clear summer solstice 
> at 40 lat.  This is what I would like Radiance to give me without 
> having to specify with the -r parameter.  Currently it is giving me 
> 6,836fc.

The formula above for Ext must be specific to the northern hemisphere.  
I don't see how the same seasonal correction factor could apply 
everywhere on the globe.  I don't think this is the declination angle, 
as the solar altitude includes that.  I'm not sure what this is about.

The variation of atmospheric extinction is quite large.  I wouldn't 
trust this, either.  In other words, this gives you a value, but I'm 
not sure it's any better than the guess provided by gensky.  It's still 
just a guess.

> The IESNA recommends calculating the diffuse component like this;
>
> Ekh = A + B * (sin (solar altitude))^ C
> where;
> Ekh = horiz. sky illuminance
> A = sunrise/set illuminance = given as 0.8 for clear sky
> B = solar altitude illuminance coef. = given as 15.5 for clear sky
> C = solar altitude illuminance exponent = given as 0.5 for clear sky 
> (all in terms of klux)
>
> This gives a diffuse horiz of 1484.2fc.  Radiance gives me this with a 
> turbidity of 3.22.  But as I illustrated before it can range 
> dramatically.  Ekh is then fed into the CIE sky distribution function 
> like so;
>
> Lz = Ekh * ZL
> where;
> Lz = zenith luminance
> ZL = zenith luminance factor - given as a table of values
>
> Then Lz is part of Kittlers distribution function.  I am not going to 
> attempt to type this function but I think we are on the same page 
> here. Although I understand they, CIE, are about to adopt a new sky 
> function with 15 different sky types (Thanks Karen for the info!).  I 
> have not attempted to wrap my head around this yet...for now I am 
> happy enough with the old function.

What is the table based on?  Is Kittler's function the same as the CIE 
clear sky?  I'm confused.  This all seems a bit arbitrary to me, 
especially in the slection of constants for clear vs. overcast skies.

However, if you like this calculation, you could certainly add it as a 
wrapper to gensky using a simple shell script that computes the -r and 
-b options based on these factors and I'd be happy to add it to the 
distribution.  To my sensibilities, it seems like a lot of effort for 
what must be a pretty crude estimate.

>> As I said in the bit of e-mail you so aptly quoted, the absolute 
>> values produced by gensky with the default settings are unreliable 
>> because they are not based on weather data for your area.  If you 
>> have such measurements, by all means use them, but don't adjust the 
>> turbidity -- go straight for the horizontal and diffuse 
>> specifications to gensky.  This overrides the turbidity approximation 
>> and makes it irrelevant.
>
> Again, I don't necessarily have measurements and I don't want to have 
> to give gensky horiz. or diffuse specifications for annual 
> calculations. Although, I guess these could be pulled from annual 
> weather data (TMY2). Is this what others do???   I guess I am just 
> wanting Radiance to give me these IESNA recommended results throughout 
> the year without having to specify the correct turbidity, diffuce 
> irradiance or solar radiance values which are not required inputs to 
> these equations.  It would be nice to have an elevation factor as well 
> or a turbidity factor that adjusts both the solar and sky accordingly.

It seems that the correct input to these equations is every bit as 
difficult as turbidity to obtain, if not moreso, and just using the 
values in the book is equivalent to using some rule-of-thumb value for 
turbidity in most respects.  It's just as likely to give you a 
reasonable value, not!

> Please give me feedback, let me know if I have misintepretted any of 
> this.  Since daylighting design puts food on the table I need to make 
> sure I am confident in my results.  I am especially concerned since 
> one of my current projects is getting pretty detailed discussing 
> fc-hours underneath a tree canopy in an atrium in Chicago, given all 
> the other approximated variables that will be going into this model it 
> would be nice to be confident I am starting with good data.  In this 
> case though I am just creating DF's with Radiance and feeding that 
> into TMY2 data. And so I guess as long as my sun to sky ratios are 
> correct it should be fine.

I really think TMY data is a better starting point than the IES 
handbook or gensky's default calculation.

> Huh, maybe I just got it....Does the 2.75 default turbidity give the 
> correct ratio for the lower sun component Radiance provides?  I guess 
> this is what you meant when you said they are not based on 
> measurements for my area.  But these IESNA calcs are not for my area 
> either, they are for a generic sea level site.  It seems more and more 
> its a discrepancy in where the c, A, B, C values come from (these 
> variables essentially determine the absolute magnitude for the sun and 
> sky components)  What other standards are there in determing the 
> magnitude of the sun and sky throughout the year?  Is weather data 
> just used?  I guess I could just give my skies a mulitplier outside of 
> gensky that adjusts my skies to the levels I want.  Did I just answer 
> my own questions?  Still it would be nice if Radiance did this on its 
> own.  Are people really seeing7970 fc on a clear summer day???? Where 
> are you living?  I guess I am just used to our clear Colorado skies 
> where we will see up to 11,000fc regularly in the summer.

Bottom line is that the calculation of absolute levels is suspect in 
gensky and also suspect in the equations you've listed.  Weather data 
is more reliable, and that will show you that absolutes vary quite a 
lot even in a particular locale, especially for overcast skies.  If 
there is a consensus as to what the default calculation should be in 
gensky, I'd be happy to implement it.  However, a change to the output 
from one version to the next can throw people off just as badly as 
leaving a slightly wrong calculation in there.

-Greg


From radiance-general@radiance-online.org  Fri Oct 17 06:25:46 2003
From: radiance-general@radiance-online.org (Karen Carrier)
Date: Thu, 16 Oct 2003 22:25:46 -0700
Subject: [Radiance-general] gensky, CIE, turbidity and luminous efficacy
References: <20031017004402.3314.29571.Mailman@radiance-on-linux.org>
Message-ID: <002201c3946f$1e813210$6400a8c0@Karenswindows>

> Today's Topics:

>    3. Re: sky definition part 2 (Greg Ward) -gensky
>    9. Re: sky definition part 2 (Zack Rogers) -gensky
      6. Re: Re: sky definition part 2 (Alex Summerfield) -luminous efficacy
>    7. FW: [Radiance-general] sky definition (Martin Moeck) -luminous
efficacy
>    >
>
> Message: 3
> Date: Thu, 16 Oct 2003 08:02:08 -0700
> Cc: <zrogers@archenergy.com>
> To: radiance-general@radiance-online.org
> From: Greg Ward <gward@lmi.net>
> Subject: [Radiance-general] Re: sky definition part 2
> Reply-To: radiance-general@radiance-online.org
>
> Hi Zack,
>
> It was great to meet you at the workshop, and I really enjoyed your
> presentation.
>
> I think you're making trouble for yourself by trying to adjust the
> turbidity factor in gensky.  If you have the horizontal and diffuse
> irradiance, or facsimilies thereof, you should be giving those to
> gensky directly using the -B or -b and -R or -r options as we have been
> discussing.
>
> Just to clarify, gensky ALWAYS produces an accurate CIE sky
> distribution.  Adjusting the turbidity or these other factors only
> affects the absolute levels and the ratio between solar and sky
> components.  It does not change the distribution of skylight.
>
> This is not to say that the CIE sky model is the best.  It is just an
> agreed upon standard, and therefore serves as a reasonable point for
> comparison.  The Perez sky is probably a better approximation to actual
> skies, particularly for the intermediate case.
>
> As I said in the bit of e-mail you so aptly quoted, the absolute values
> produced by gensky with the default settings are unreliable because
> they are not based on weather data for your area.  If you have such
> measurements, by all means use them, but don't adjust the turbidity -- 
> go straight for the horizontal and diffuse specifications to gensky.
> This overrides the turbidity approximation and makes it irrelevant.
>
> I hope this helps.
> -Greg
>
_________________________________________________________

> Message: 9
> Date: Thu, 16 Oct 2003 18:43:13 -0600
> From: Zack Rogers <zrogers@archenergy.com>
> To: radiance-general@radiance-online.org
> CC: Greg Ward <gward@lmi.net>
> Subject: [Radiance-general] Re: sky definition part 2
> Reply-To: radiance-general@radiance-online.org
>
> Hi Greg,
>
> > I think you're making trouble for yourself by trying to adjust the
> > turbidity factor in gensky.  If you have the horizontal and diffuse
> > irradiance, or facsimilies thereof, you should be giving those to
> > gensky directly using the -B or -b and -R or -r options as we have
> > been discussing.
>
> Yes, the turbidity does seem to be trouble since it doesn't affect the
> sun component.  I don't have measurements I am trying to match, I am
> just trying to make sure I have the correct IESNA recommended sky (CIE
> sky) and sun components throughout the year.
>
> > Just to clarify, gensky ALWAYS produces an accurate CIE sky
> > distribution.  Adjusting the turbidity or these other factors only
> > affects the absolute levels and the ratio between solar and sky
> > components.  It does not change the distribution of skylight.
>
> I don't doubt the relative luminance distribution of the sky is
> accurate, I'm just questioning how Radiance determines the correct
> overall level.
>
> I should clarify what I mean when I say the CIE sky function tells
> me....I am refering to both the sky and sun calculations laid out in the
> latest IESNA lighting handbook which uses Kittlers CIE adopted sky
> function (which I understand is from his 1967 studies) to determine the
> sky component.  So I probably should have said that IESNA sky/sun
> functions tell me.  I am not sure if this is the accepted method used by
> others.  The direct component is calculated as this;
>
> Edn = Ext * e ^ (-cm)
>
> where;
> Edn = direct normal solar illuminance
> Ext = extraterrestrial solar illuminance = Esc * (1 + 0.034 * cos (
> (2pi/365)*(J-2)))
>                 where;
>                 Esc = solar illumination constant = 127.5 klx (11,850 fc)
>                 J = julian date
> c = atmospheric extinction coefficient (given as c = 0.21 for clear ; c
> = 0.8 for partly cloudy)
> m = optical air mass = 1 / sin (solar altitude)
>
> and Direct Horizontal (Edh) would then be;
> Edh = Edn * sin (solar altitude)
>
> This gives the Direct Horiz to be 8,821 fc on a clear summer solstice at
> 40 lat.  This is what I would like Radiance to give me without having to
> specify with the -r parameter.  Currently it is giving me 6,836fc.
>
> The IESNA recommends calculating the diffuse component like this;
>
> Ekh = A + B * (sin (solar altitude))^ C
> where;
> Ekh = horiz. sky illuminance
> A = sunrise/set illuminance = given as 0.8 for clear sky
> B = solar altitude illuminance coef. = given as 15.5 for clear sky
> C = solar altitude illuminance exponent = given as 0.5 for clear sky
> (all in terms of klux)
>
> This gives a diffuse horiz of 1484.2fc.  Radiance gives me this with a
> turbidity of 3.22.  But as I illustrated before it can range
> dramatically.  Ekh is then fed into the CIE sky distribution function
> like so;
>
> Lz = Ekh * ZL
> where;
> Lz = zenith luminance
> ZL = zenith luminance factor - given as a table of values
>
> Then Lz is part of Kittlers distribution function.  I am not going to
> attempt to type this function but I think we are on the same page here.
>  Although I understand they, CIE, are about to adopt a new sky function
> with 15 different sky types (Thanks Karen for the info!).  I have not
> attempted to wrap my head around this yet...for now I am happy enough
> with the old function.
>
> > This is not to say that the CIE sky model is the best.  It is just an
> > agreed upon standard, and therefore serves as a reasonable point for
> > comparison.  The Perez sky is probably a better approximation to
> > actual skies, particularly for the intermediate case.
>
> Agreed, although the calcs I have outlined here have generally matched
> up well with my measurements with enough accuracy for my uses, but I am
> usually not in need of an extremely accurate sky just good average
> representations.
>
> > As I said in the bit of e-mail you so aptly quoted, the absolute
> > values produced by gensky with the default settings are unreliable
> > because they are not based on weather data for your area.  If you have
> > such measurements, by all means use them, but don't adjust the
> > turbidity -- go straight for the horizontal and diffuse specifications
> > to gensky.  This overrides the turbidity approximation and makes it
> > irrelevant.
>
> Again, I don't necessarily have measurements and I don't want to have to
> give gensky horiz. or diffuse specifications for annual calculations.
> Although, I guess these could be pulled from annual weather data (TMY2).
>  Is this what others do???   I guess I am just wanting Radiance to give
> me these IESNA recommended results throughout the year without having to
> specify the correct turbidity, diffuce irradiance or solar radiance
> values which are not required inputs to these equations.  It would be
> nice to have an elevation factor as well or a turbidity factor that
> adjusts both the solar and sky accordingly.
>
> Please give me feedback, let me know if I have misintepretted any of
> this.  Since daylighting design puts food on the table I need to make
> sure I am confident in my results.  I am especially concerned since one
> of my current projects is getting pretty detailed discussing fc-hours
> underneath a tree canopy in an atrium in Chicago, given all the other
> approximated variables that will be going into this model it would be
> nice to be confident I am starting with good data.  In this case though
> I am just creating DF's with Radiance and feeding that into TMY2 data.
>  And so I guess as long as my sun to sky ratios are correct it should be
> fine.
>
> Huh, maybe I just got it....Does the 2.75 default turbidity give the
> correct ratio for the lower sun component Radiance provides?  I guess
> this is what you meant when you said they are not based on measurements
> for my area.  But these IESNA calcs are not for my area either, they are
> for a generic sea level site.  It seems more and more its a discrepancy
> in where the c, A, B, C values come from (these variables essentially
> determine the absolute magnitude for the sun and sky components)  What
> other standards are there in determing the magnitude of the sun and sky
> throughout the year?  Is weather data just used?  I guess I could just
> give my skies a mulitplier outside of gensky that adjusts my skies to
> the levels I want.  Did I just answer my own questions?  Still it would
> be nice if Radiance did this on its own.  Are people really seeing7970
> fc on a clear summer day???? Where are you living?  I guess I am just
> used to our clear Colorado skies where we will see up to 11,000fc
> regularly in the summer.
>
> Well, sorry for typing your eyes off?  Just describing this problem has
> helped me understand much better what is going on.  Hopefully others
> find this discussion useful.  If not, I aplogize.
>
> Thanks!
> Zack
>
______________________________________________________________________
>
> Message: 6
> Date: Thu, 16 Oct 2003 16:58:33 +0100
> Subject: Re: [Radiance-general] Re: sky definition part 2
> From: Alex Summerfield <alex@arch.usyd.edu.au>
> To: radiance-general@radiance-online.org
> Reply-To: radiance-general@radiance-online.org
>
> Gidday Greg, Zack & others...
>
> Just to chip in about measurement and efficacies -
>
> Paul Littlefair wrote a great review paper on sky efficacies, with overall
> results:
> 144+-7 lm/W clear sky
> 115+-8 lm/W overcast sky
>
> Littlefair, PJ Measurement of the Luminous Efficacy, Light. Res & Tech,
> 1988 4:p177-188
>
> Also:
> Fontoynont, M, Perceived Performance of Daylighting Systems: Lighting
> Efficacy and Agreeableness, Solar Energy 2002 73(2) p83-94
>
> It should be remembered that measurements are often not of the actual sky
> spectral power distribution but are taken with equipment calibrated to
> Illuminant A with 160 lm/W.
>
> And if calibrated to D65 then efficacy is 203 lm/W.
>
> hopefully all this doesn't make things even more 'hazy' :)
>
> cheers
> alex
>
> *******************************************************
> A. J. Summerfield                 alex@arch.usyd.edu.au
> Faculty of Architecture, University of Sydney
> *******************************************************

>
> Message: 7
> Subject: FW: [Radiance-general] sky definition
> Date: Thu, 16 Oct 2003 12:20:05 -0400
> From: "Martin Moeck" <MMoeck@engr.psu.edu>
> To: <radiance-general@radiance-online.org>
> Reply-To: radiance-general@radiance-online.org
>
> Greg suggested yesterday:
> "so you should probably intervene with your own correction if you are
working from physical
> data.  Therefore, I recommend multiplying values to the -r and -R options
by:
>
>         208/179         the ratio between the sun's efficacy and the
standard
> Radiance factor
>
> Likewise, values to the -b and -B options should be multiplied by:
>
>         110/179         the ratio for sky radiation efficacy over the
standard
> Radiance factor"
>
>
> I wrote back:
> >
> > are you sure? The sun's luminous efficacy above 20 deg. altitude is
> > somewhere around 95-100 lm/W, overcast skies are around 120 lmW, clear
> > skies around 150 lm/W. Therefore, your multipliers for the -R/r
> > options should be smaller than the multipliers for the -B/b  options?
>
> Greg answered:
>
> Now that you mention it, I'm not sure at all.  I got my number from the
> efficacy of Standard Illuminant B, which is simulated (rather than
> real) sunlight, and it could be way off.  Where do you get your
> numbers?  If you are sure of them, please forward this message with my
> apologies to radiance-general.

>
> My answer:

> The numbers for the solar/beam lumens/watt can be obtained from the
Illuminating Engineering Society Handbook , and they are listed as 95 lm/W.
If you need more precise data, you can go to
>
> http://idmp.entpe.fr/library/papers/evlumeff.pdf
>
> as one example. I do not think that taking the CIE daylight illuminants
and their luminous efficacy is a good way to do it.
>
> The following book "Daylighting in Architecture" edited by Baker,
Fanchiotti, Steemers and published by James & James  (ISBN 1-873936-21-4)
lists luminous efficacy functions for various sky/cloud conditions and sun
altitudes on pages 10.4 and 10.5. Input needed is the global irradiance for
calculating the overcast efficacy. They also give a formula for calculating
luminous efficacies for skies with both clear and diffuse components by
taking their ratio.
>
> From those values, they offer a formula to obtain internal illuminance
subdivided into the internal direct sunlight factor, the clear sky factor
and the overcast sky factor.
>
> Nevertheless, I had good experiences with actual weather data from
www.meteotest.com (software Meteonorm) and "gendaylit".
>
> Martin, Penn State






From radiance-general@radiance-online.org  Fri Oct 17 06:25:29 2003
From: radiance-general@radiance-online.org (Zack Rogers)
Date: Thu, 16 Oct 2003 23:25:29 -0600
Subject: [Radiance-general] Re: sky definition part 2
References: <509B4081-0059-11D8-8B57-000A956D40C8@lmi.net>
Message-ID: <3F8F7D49.9070809@archenergy.com>

Hi Greg,

>>> Just to clarify, gensky ALWAYS produces an accurate CIE sky 
>>> distribution.  Adjusting the turbidity or these other factors only 
>>> affects the absolute levels and the ratio between solar and sky 
>>> components.  It does not change the distribution of skylight.
>>
>>
>> I don't doubt the relative luminance distribution of the sky is 
>> accurate, I'm just questioning how Radiance determines the correct 
>> overall level.
>
>
> In my opinion, and others may differ, there is no "correct overall 
> level" for daylight.  You can come up with a ballpark value, but 
> getting within 50% without some more specific weather data is overly 
> ambitious.

Huh, I've always seen a little better correlation between these 
calculations and both weather data and measurements I've taken in 
Colorado (when taking into account elevation factors).  I know you can 
never count on it to be exact but from the limited data I've looked I 
say it was always atleast within 20% both + and -.  And I guess all I'm 
looking for is a good average - so half the sites at that lat. might 
have higher and half, lower.

>> I should clarify what I mean when I say the CIE sky function tells 
>> me....I am refering to both the sky and sun calculations laid out in 
>> the latest IESNA lighting handbook which uses Kittlers CIE adopted 
>> sky function (which I understand is from his 1967 studies) to 
>> determine the sky component.  So I probably should have said that 
>> IESNA sky/sun functions tell me.  I am not sure if this is the 
>> accepted method used by others.  The direct component is calculated 
>> as this;
>>
>> Edn = Ext * e ^ (-cm)
>>
>> where;
>> Edn = direct normal solar illuminance
>> Ext = extraterrestrial solar illuminance = Esc * (1 + 0.034 * cos ( 
>> (2pi/365)*(J-2)))
>>                where;
>>                Esc = solar illumination constant = 127.5 klx (11,850 fc)
>>                J = julian date
>> c = atmospheric extinction coefficient (given as c = 0.21 for clear ; 
>> c = 0.8 for partly cloudy)
>> m = optical air mass = 1 / sin (solar altitude)
>>
>> and Direct Horizontal (Edh) would then be;
>> Edh = Edn * sin (solar altitude)
>>
>> This gives the Direct Horiz to be 8,821 fc on a clear summer solstice 
>> at 40 lat.  This is what I would like Radiance to give me without 
>> having to specify with the -r parameter.  Currently it is giving me 
>> 6,836fc.
>
>
> The formula above for Ext must be specific to the northern 
> hemisphere.  I don't see how the same seasonal correction factor could 
> apply everywhere on the globe.  I don't think this is the declination 
> angle, as the solar altitude includes that.  I'm not sure what this is 
> about.

I'm confused.  What seasonal correction factor, c?  The declination 
angle does go into the solar altitude angle calc, but it is not used 
elsewhere in this calc.

>
> The variation of atmospheric extinction is quite large.  I wouldn't 
> trust this, either.  In other words, this gives you a value, but I'm 
> not sure it's any better than the guess provided by gensky.  It's 
> still just a guess.

I'm sure this atmospheric extinction factor was derived from weather 
data.  I don't think IES would publish unless there was atleast some 
verification.  I think this variable is trying to take into account the 
different turbidities for clear and partly cloudy skies.

>
>> The IESNA recommends calculating the diffuse component like this;
>>
>> Ekh = A + B * (sin (solar altitude))^ C
>> where;
>> Ekh = horiz. sky illuminance
>> A = sunrise/set illuminance = given as 0.8 for clear sky
>> B = solar altitude illuminance coef. = given as 15.5 for clear sky
>> C = solar altitude illuminance exponent = given as 0.5 for clear sky 
>> (all in terms of klux)
>>
>> This gives a diffuse horiz of 1484.2fc.  Radiance gives me this with 
>> a turbidity of 3.22.  But as I illustrated before it can range 
>> dramatically.  Ekh is then fed into the CIE sky distribution function 
>> like so;
>>
>> Lz = Ekh * ZL
>> where;
>> Lz = zenith luminance
>> ZL = zenith luminance factor - given as a table of values
>>
>> Then Lz is part of Kittlers distribution function.  I am not going to 
>> attempt to type this function but I think we are on the same page 
>> here. Although I understand they, CIE, are about to adopt a new sky 
>> function with 15 different sky types (Thanks Karen for the info!).  I 
>> have not attempted to wrap my head around this yet...for now I am 
>> happy enough with the old function.
>
>
> What is the table based on?  Is Kittler's function the same as the CIE 
> clear sky?  I'm confused.  This all seems a bit arbitrary to me, 
> especially in the slection of constants for clear vs. overcast skies.

I'm not sure what the ZL table is based on, again I am guessing it is 
derived from weather data.  Yes, from what I understand the CIE clear 
sky is Kittler's function from the 1967 studies.  Yeah, I'm not sure 
where the A, B, and C variables are derived from either.  I just do what 
IES tells me to.  Actually, I tend to trust these calcs for several 
reasons; 1) they have never seemed to be off more than 20% from weather 
data and measurements I've looked at (but I've done no extensive study 
by any means) and 2) while I'm not one to question master Greg Ward, I 
am also not one to question David DiLaura or the IES.  One of the other 
sky calculation programs I'm using for these comparisons is one he wrote 
based on these equations, it was discussed as one of the best 
methodologies to estimate daylight levels, given that exact predictions 
are always impossible.

>
> However, if you like this calculation, you could certainly add it as a 
> wrapper to gensky using a simple shell script that computes the -r and 
> -b options based on these factors and I'd be happy to add it to the 
> distribution.  To my sensibilities, it seems like a lot of effort for 
> what must be a pretty crude estimate.

I do like this calculation.  If it is not too much trouble, I for one, 
would like to see it added to gensky.  Otherwise, I can always apply a 
multiplier outside of gensky to adjust.  BTW - I think what this has 
shown is that it is dangerous to apply the -r option without applying 
the -b options or adjusting the turbidity and vice versa.  Since that 
would change the sky to sun ratio and give you a false sky/sun 
condition?  When I was only specifying a -R the change in the sky 
illuminance was less than a 1 fc while the change in the solar 
illuminance was roughly 2000fc.

>
> It seems that the correct input to these equations is every bit as 
> difficult as turbidity to obtain, if not moreso, and just using the 
> values in the book is equivalent to using some rule-of-thumb value for 
> turbidity in most respects.  It's just as likely to give you a 
> reasonable value, not!

Well, I guess since the difficult input has be done for us with the 
constants, and if you trust the constants its not as difficult.  

>
> I really think TMY data is a better starting point than the IES 
> handbook or gensky's default calculation.

Yeah, I agree.  And when it matters (for annual calculations) I use TMY 
data.   Just sometimes in daylighting design you want to show those 
worst case conditions - a sunny summer solstice and a cloudy winter 
solstice.  These are all theoretical studies where it is okay to use an 
average sky and not actual data, since TMY weather data might not give 
you those conditions.  Also, with TMY data, I have never found the 
direct normal (converted to horiz.) and diffuse horiz. data to add up to 
the global data reported, they are typically close but never exact.  And 
it seems like the global measurement must be the most accurate of the 
three.

>
> Bottom line is that the calculation of absolute levels is suspect in 
> gensky and also suspect in the equations you've listed.  Weather data 
> is more reliable, and that will show you that absolutes vary quite a 
> lot even in a particular locale, especially for overcast skies.  If 
> there is a consensus as to what the default calculation should be in 
> gensky, I'd be happy to implement it.  However, a change to the output 
> from one version to the next can throw people off just as badly as 
> leaving a slightly wrong calculation in there.

Perhaps if you do the change, it could just be an add on specified by a 
-ies switch or something.

Thanks so much for the quick responses and helpful information!
Zack

-- 
Zack Rogers
Staff Engineer
Architectural Energy Corporation
2540 Frontier Avenue, Suite 201
Boulder, CO 80301 USA

tel (303)444-4149 ext.235
fax (303)444-4304
www.archenergy.com




From radiance-general@radiance-online.org  Fri Oct 17 06:30:49 2003
From: radiance-general@radiance-online.org (Santiago Torres)
Date: Fri, 17 Oct 2003 14:30:49 +0900
Subject: [Radiance-general] Re: sky definition part 2
In-Reply-To: <20031017004402.3314.29571.Mailman@radiance-on-linux.org>
Message-ID: <ABEIIOCILNBBDDEPEPICMEBJCBAA.tiago@tkh.att.ne.jp>

Hi Zack and all,

Just to add to the discussion (I hope not to the confusion) T. Muneer gives
a very detailed description of efficacy models in his book "Solar Radiation
& Daylight Models" which I think is very recommendable.
Or you can also look at:
Luminous Efficacy: Evaluation of models for the UK, Lighting Research &
Technology, 27(2) 71-77 (1995)
Solar irradiance and illuminance models for Japan II: Luminous efficacies,
Ligh. Res. & Tech., 27(4) 223-230 (1995)
both also by Muneer.

For beam luminous efficacy, he says that taking a single average value is "a
simple yet robust model", but he recommends using a value between 93-115
lm/W.

For global and diffuse efficacies there are several models. I used the Perez
model for my masters thesis, but I found it had to be corrected for Tokyo,
which I did with local weather data. There is a short description of what I
did in last year's Radiance Workshop CD. The Perez model considers many
factors like atmospheric turbidity, precipitable water content, etc, etc
(the list is long) which can be derived from TMY data, and since the model
was originally calculated from US and european data, you can probably use it
for your location without re-calibration.
I think the reference is:
Perez et al., Modeling daylight availability and irradiance components from
direct and global irradiance. Solar Energy, 44, 271 (1990)

Hope this helps. On the other hand, if it`s not a problem I would like to
see your study on different heights. I`m very interested in the subject as
we usually have to interpolate-extrapolate data in Argentina, due to the
lack of measuring stations.

Please keep posting your findings, I for one, get a lot from it. Thanks and
regards!

Santiago.


From radiance-general@radiance-online.org  Fri Oct 17 07:05:37 2003
From: radiance-general@radiance-online.org (Zack Rogers)
Date: Fri, 17 Oct 2003 00:05:37 -0600
Subject: [Radiance-general] Re: sky definition part 2
Message-ID: <3F8F86B1.9070204@archenergy.com>

Hi Santiago,

I've been buzzing with thoughts of Image Based Rendering and HDR 
displays ever since the conference, I've been showing Greg's Siggraph 
animation and your studies to all my colleagues.  I am very interested 
in getting into both of these in my daylighting design work.

Yeah, the IES recommends 94.2 lm/watt for direct beam --  IES is my 
master, but google does reign supreme;-) -- but I don't know how they 
think they can be so accurate when everyone else reports these 
relatively large ranges.

I plan on looking into the Perez sky model in more detail.  So you found 
it gave better correlation than the CIE model in your studies?  Is 
gendaylit available in any windows form yet?  If not I have I do have 
access to linux machines.

Georg, are there any plans to implement the Perez sky model (gendaylit) 
in Rayfront?

Thanks for the info!
Zack

PS I will send the elevation study separately as i think it will just 
turn binary here.
PPS but i need your e-mail address.  I can't seem to get it from the 
site.  Mine is zrogers@archenergy.com

-- 
Zack Rogers
Staff Engineer
Architectural Energy Corporation
2540 Frontier Avenue, Suite 201
Boulder, CO 80301 USA

tel (303)444-4149 ext.235
fax (303)444-4304
www.archenergy.com



From radiance-general@radiance-online.org  Fri Oct 17 08:59:35 2003
From: radiance-general@radiance-online.org (Lars O. Grobe)
Date: Fri, 17 Oct 2003 10:59:35 +0300
Subject: [Radiance-general] octree-instance efficiency with simple geometry but mapped images?
Message-ID: <D9282A22-0077-11D8-B678-000A959DDB22@gmx.net>

Hi!

My first mail to this list since a long time... I have moved (I am 
studying in Turkey now for one year) and internet access is not that 
easy for me at the moment ;-)

I have a model with lots of mapings here. I have set it up now by 
creating instances of its parts as octrees. I was told that with simple 
geometry it is more efficient not to use octrees for istances because 
of the overhead. However, I was thinking that with a large image map 
attached to this geometry, I will save memory by doing this. Am I right 
with this assumption?

CU Lars.


From radiance-general@radiance-online.org  Fri Oct 17 08:59:35 2003
From: radiance-general@radiance-online.org (Lars O. Grobe)
Date: Fri, 17 Oct 2003 10:59:35 +0300
Subject: [Radiance-general] octree-instance efficiency with simple geometry but mapped images?
Message-ID: <D9282A22-0077-11D8-B678-000A959DDB22@gmx.net>

Hi!

My first mail to this list since a long time... I have moved (I am 
studying in Turkey now for one year) and internet access is not that 
easy for me at the moment ;-)

I have a model with lots of mapings here. I have set it up now by 
creating instances of its parts as octrees. I was told that with simple 
geometry it is more efficient not to use octrees for istances because 
of the overhead. However, I was thinking that with a large image map 
attached to this geometry, I will save memory by doing this. Am I right 
with this assumption?

CU Lars.


From radiance-general@radiance-online.org  Fri Oct 17 16:39:39 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Fri, 17 Oct 2003 08:39:39 -0700
Subject: [Radiance-general] Re: sky definition part 2
In-Reply-To: <3F8F7D49.9070809@archenergy.com>
Message-ID: <1E6EB972-00B8-11D8-A568-000A956D40C8@lmi.net>

Hi Zack,

> From: Zack Rogers <zrogers@archenergy.com>
> Date: Thu Oct 16, 2003  10:25:29  PM US/Pacific
>>> I should clarify what I mean when I say the CIE sky function tells 
>>> me....I am refering to both the sky and sun calculations laid out in 
>>> the latest IESNA lighting handbook which uses Kittlers CIE adopted 
>>> sky function (which I understand is from his 1967 studies) to 
>>> determine the sky component.  So I probably should have said that 
>>> IESNA sky/sun functions tell me.  I am not sure if this is the 
>>> accepted method used by others.  The direct component is calculated 
>>> as this;
>>>
>>> Edn = Ext * e ^ (-cm)
>>>
>>> where;
>>> Edn = direct normal solar illuminance
>>> Ext = extraterrestrial solar illuminance = Esc * (1 + 0.034 * cos ( 
>>> (2pi/365)*(J-2)))
>>>                where;
>>>                Esc = solar illumination constant = 127.5 klx (11,850 
>>> fc)
>>>                J = julian date
>>> c = atmospheric extinction coefficient (given as c = 0.21 for clear 
>>> ; c = 0.8 for partly cloudy)
>>> m = optical air mass = 1 / sin (solar altitude)
>>>
>>> and Direct Horizontal (Edh) would then be;
>>> Edh = Edn * sin (solar altitude)
>>>
>>> This gives the Direct Horiz to be 8,821 fc on a clear summer 
>>> solstice at 40 lat.  This is what I would like Radiance to give me 
>>> without having to specify with the -r parameter.  Currently it is 
>>> giving me 6,836fc.
>>
>> The formula above for Ext must be specific to the northern 
>> hemisphere.  I don't see how the same seasonal correction factor 
>> could apply everywhere on the globe.  I don't think this is the 
>> declination angle, as the solar altitude includes that.  I'm not sure 
>> what this is about.
>
> I'm confused.  What seasonal correction factor, c?  The declination 
> angle does go into the solar altitude angle calc, but it is not used 
> elsewhere in this calc.

I'm referring to the expression for Ext = Esc * (1 + 0.034 * cos ( 
(2pi/365)*(J-2))), which looks like a seasonal correction much like 
declination angle to me.  I really don't know what it's doing in there.

>> The variation of atmospheric extinction is quite large.  I wouldn't 
>> trust this, either.  In other words, this gives you a value, but I'm 
>> not sure it's any better than the guess provided by gensky.  It's 
>> still just a guess.
>
> I'm sure this atmospheric extinction factor was derived from weather 
> data.  I don't think IES would publish unless there was atleast some 
> verification.  I think this variable is trying to take into account 
> the different turbidities for clear and partly cloudy skies.

Your trust is greater than mine if you believe you can take weather 
data and come up with one value for clear and another for cloudy.

> I'm not sure what the ZL table is based on, again I am guessing it is 
> derived from weather data.  Yes, from what I understand the CIE clear 
> sky is Kittler's function from the 1967 studies.  Yeah, I'm not sure 
> where the A, B, and C variables are derived from either.  I just do 
> what IES tells me to.  Actually, I tend to trust these calcs for 
> several reasons; 1) they have never seemed to be off more than 20% 
> from weather data and measurements I've looked at (but I've done no 
> extensive study by any means) and 2) while I'm not one to question 
> master Greg Ward, I am also not one to question David DiLaura or the 
> IES.  One of the other sky calculation programs I'm using for these 
> comparisons is one he wrote based on these equations, it was discussed 
> as one of the best methodologies to estimate daylight levels, given 
> that exact predictions are always impossible.

It's good to get your experience, but I'd like to hear others.  You 
should *always* question these calculations, no matter what the source. 
  Especially if it's from me!

>> However, if you like this calculation, you could certainly add it as 
>> a wrapper to gensky using a simple shell script that computes the -r 
>> and -b options based on these factors and I'd be happy to add it to 
>> the distribution.  To my sensibilities, it seems like a lot of effort 
>> for what must be a pretty crude estimate.
>
> I do like this calculation.  If it is not too much trouble, I for one, 
> would like to see it added to gensky.  Otherwise, I can always apply a 
> multiplier outside of gensky to adjust.  BTW - I think what this has 
> shown is that it is dangerous to apply the -r option without applying 
> the -b options or adjusting the turbidity and vice versa.  Since that 
> would change the sky to sun ratio and give you a false sky/sun 
> condition?  When I was only specifying a -R the change in the sky 
> illuminance was less than a 1 fc while the change in the solar 
> illuminance was roughly 2000fc.

The ratios between skylight and sunlight are no more reliable than the 
absolutes of the two in gensky.  It is indeed a very crude estimate I'm 
using.  If you have a look at the source, you'll see what I mean.  I do 
recommend specifying -r and -b options together, though -- if you're 
using one, you should use the other.  I would do this rather than 
applying a multiplier outside of gensky.

>> It seems that the correct input to these equations is every bit as 
>> difficult as turbidity to obtain, if not moreso, and just using the 
>> values in the book is equivalent to using some rule-of-thumb value 
>> for turbidity in most respects.  It's just as likely to give you a 
>> reasonable value, not!
>
> Well, I guess since the difficult input has be done for us with the 
> constants, and if you trust the constants its not as difficult.

As I indicated, I am agnostic towards these absolute sky level 
estimates, leaning towards athiest.  I am happy to implement the IES 
calcs in gensky, as I see them as being no worse than what's in there, 
but I would like to hear a general "huzzah!" from the group before 
doing so.

-Greg


From radiance-general@radiance-online.org  Fri Oct 17 16:46:59 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Fri, 17 Oct 2003 08:46:59 -0700
Subject: [Radiance-general] Re: octree-instance efficiency with simple geometry but mapped images?
In-Reply-To: <D9282A22-0077-11D8-B678-000A959DDB22@gmx.net>
Message-ID: <251E5818-00B9-11D8-A568-000A956D40C8@lmi.net>

Hi Lars,

Image maps (as used in "colorpict" primitives) are shared no matter 
their source or means of appearance in the scene file, so there is no 
additional benefit to using the instance primitive in this case.

-Greg

> From: "Lars O. Grobe" <grobe@gmx.net>
> Date: Fri Oct 17, 2003  12:59:35  AM US/Pacific
>
> Hi!
>
> My first mail to this list since a long time... I have moved (I am 
> studying in Turkey now for one year) and internet access is not that 
> easy for me at the moment ;-)
>
> I have a model with lots of mapings here. I have set it up now by 
> creating instances of its parts as octrees. I was told that with 
> simple geometry it is more efficient not to use octrees for istances 
> because of the overhead. However, I was thinking that with a large 
> image map attached to this geometry, I will save memory by doing this. 
> Am I right with this assumption?
>
> CU Lars.


From radiance-general@radiance-online.org  Fri Oct 17 18:01:31 2003
From: radiance-general@radiance-online.org (Martin Moeck)
Date: Fri, 17 Oct 2003 13:01:31 -0400
Subject: [Radiance-general] Re: sky definition part 2
Message-ID: <84F05BA9118BBD4A8FC6409808CE266C06CD3A@ENGRMAIL2.engr.psu.edu>

This is a multi-part message in MIME format.

------_=_NextPart_001_01C394D0.50437C3E
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64

SSByZWFsbHkgZG9uJ3QgY2FyZSB0b28gbXVjaCBhYm91dCBjaGFuZ2luZyBnZW5za3ksIHNpbmNl
IGhvcml6b250YWwgaWxsdW1pbmFuY2UgdmFsdWVzIGZvciBvdmVyY2FzdCBhbmQgY2xlYXIgc2t5
IGNvbmRpdGlvbnMgYXMgd2VsbCBhcyBzb2xhciBpbGx1bWluYW5jZSBjYW4gYmUgbG9va2VkIHVw
IHF1aWNrbHksIGFuZCBnZW5za3kgb3V0cHV0IGNhbiBiZSBhZGp1c3RlZCBhY2NvcmRpbmdseS4g
V2hhdCByZWFsbHkgbWF0dGVycyBmb3IgZ3JlZW4gYnVpbGRpbmdzIGFuZCBkYXlsaWdodCBhdmFp
bGFiaWxpdHkgY2FsY3VsYXRpb25zIGlzIG5vdCB0aGUgSUVTIGhhbmRib29rIGZvcm11bGFlIGFu
ZCB0dXJiaWRpdHkgZmFjdG9ycywgYnV0IHdlYXRoZXIgdGFwZXMgd2l0aCB5ZWFybHkgZGlmZnVz
ZSBhbmQgYmVhbSBkYXRhLCBhbmQgSSdkIGxpa2UgdG8gcmVwZWF0IHRoYXQgZ2VuZGF5bGl0IGJh
c2VkIG9uIHRoZSBQZXJleiBza3kgbW9kZWwgaXMgYSBnb29kIHByb2dyYW0gZm9yIHRoYXQuIFRo
ZSBDSUUgY2xlYXIgc2t5IG1vZGVsIG92ZXJlc3RpbWF0ZXMgbGlnaHQgZnJvbSB0aGUgaG9yaXpv
biB0b28gbXVjaCBmb3IgbXkgdGFzdGUuIA0KIA0KTWFydGluDQoNCgkgDQoNCg==

------_=_NextPart_001_01C394D0.50437C3E
Content-Type: application/ms-tnef;
	name="winmail.dat"
Content-Transfer-Encoding: base64

eJ8+IiERAQaQCAAEAAAAAAABAAEAAQeQBgAIAAAA5AQAAAAAAADoAAENgAQAAgAAAAIAAgABBYAD
AA4AAADTBwoAEQANAAEAHwAFACcBASCAAwAOAAAA0wcKABEADQABAB8ABQAnAQEJgAEAIQAAADFD
MTBBOTE4NDE1MTM4NDhBQTAxOUE0N0FCNEU0NTg4APcGAQOQBgDoDQAAOQAAAB8AGgABAAAAEgAA
AEkAUABNAC4ATgBvAHQAZQAAAAAAAwA2AAAAAAAfADcAAQAAAGIAAABSAEUAOgAgAFsAUgBhAGQA
aQBhAG4AYwBlAC0AZwBlAG4AZQByAGEAbABdACAAUgBlADoAIABzAGsAeQAgAGQAZQBmAGkAbgBp
AHQAaQBvAG4AIABwAGEAcgB0ACAAMgAAAAAAQAA5AD58Q1DQlMMBHwA9AAEAAAAKAAAAUgBFADoA
IAAAAAAAAgFHAAEAAAA6AAAAYz1VUzthPSA7cD1QZW5uIFN0YXRlIFVuaXZlO2w9RU5HUk1BSUwy
LTAzMTAxNzE3MDEzMVotMTMwAAAAHwBJAAEAAABaAAAAWwBSAGEAZABpAGEAbgBjAGUALQBnAGUA
bgBlAHIAYQBsAF0AIABSAGUAOgAgAHMAawB5ACAAZABlAGYAaQBuAGkAdABpAG8AbgAgAHAAYQBy
AHQAIAAyAAAAAABAAE4AgK8N4MSUwwEfAFoAAQAAABQAAABHAHIAZQBnACAAVwBhAHIAZAAAAAIB
WwABAAAANQAAAAAAAACBKx+kvqMQGZ1uAN0BD1QCAAAAAEdyZWcgV2FyZABTTVRQAGd3YXJkQGxt
aS5uZXQAAAAAAgFcAAEAAAATAAAAU01UUDpHV0FSREBMTUkuTkVUAAAfAF0AAQAAABQAAABHAHIA
ZQBnACAAVwBhAHIAZAAAAAIBXgABAAAANQAAAAAAAACBKx+kvqMQGZ1uAN0BD1QCAAAAAEdyZWcg
V2FyZABTTVRQAGd3YXJkQGxtaS5uZXQAAAAAAgFfAAEAAAATAAAAU01UUDpHV0FSREBMTUkuTkVU
AAAfAGYAAQAAAAoAAABTAE0AVABQAAAAAAAfAGcAAQAAABwAAABnAHcAYQByAGQAQABsAG0AaQAu
AG4AZQB0AAAAHwBoAAEAAAAKAAAAUwBNAFQAUAAAAAAAHwBpAAEAAAAcAAAAZwB3AGEAcgBkAEAA
bABtAGkALgBuAGUAdAAAAB8AcAABAAAAWgAAAFsAUgBhAGQAaQBhAG4AYwBlAC0AZwBlAG4AZQBy
AGEAbABdACAAUgBlADoAIABzAGsAeQAgAGQAZQBmAGkAbgBpAHQAaQBvAG4AIABwAGEAcgB0ACAA
MgAAAAAAAgFxAAEAAAAbAAAAAcOUzP9oPN51OvmtTBGwC+V4FaaozQAAmZv+AB8AcwABAAAAGAAA
AFoAYQBjAGsAIABSAG8AZwBlAHIAcwAAAB8AdAABAAAASgAAAHIAYQBkAGkAYQBuAGMAZQAtAGcA
ZQBuAGUAcgBhAGwAQAByAGEAZABpAGEAbgBjAGUALQBvAG4AbABpAG4AZQAuAG8AcgBnAAAAAAAf
ABoMAQAAABoAAABNAGEAcgB0AGkAbgAgAE0AbwBlAGMAawAAAAAAHwAdDgEAAABaAAAAWwBSAGEA
ZABpAGEAbgBjAGUALQBnAGUAbgBlAHIAYQBsAF0AIABSAGUAOgAgAHMAawB5ACAAZABlAGYAaQBu
AGkAdABpAG8AbgAgAHAAYQByAHQAIAAyAAAAAAACAQkQAQAAAAAFAAD8BAAAZwsAAExaRnVu0MoX
AwAKAHJjcGcxMjWCMgNDaHRtbDEDMD8BAwH3CoACpAPjAgBjaMEKwHNldDAgBxMCgP8QAwBQBFYI
VQeyEdUOUQMB3RDXMgYABsMR1TMERhDZbxLrEeMI7wn3OxjPDjA1OxHSDGBjAFALCQFkMzaTEWAL
pTQgEAIqXA6yvQGQZxTwCqMR4x3oNBTwADwhRE9DVFlQAEUgSFRNTCBQAFVCTElDICItIC8vVzND
IYBEVCJEIJQzLjIhgEVOnCI+Hu0ejyPBMTgf8G8goiMPJB8mkDMdgCVwRXxBRCXNDvEm7ylvJPQ2
QQ7wPE1FVEEHsEExLGA9IkcJ8ASQYXRFBbAiEtBPTlQi0FQTLPAF4UV4EPFuZ2U9BlJ2EzEvQQCQ
AiAgNhAuMC42HXA5LjEnIv4qzyUDNzcf8FRJKFRMRSXONA7wW1KEYWQHMG5jZS0u4AktMmxdB/Bl
OiBzmGt5IAEBC4BpdC/CqwqxBUAyJG41H/AvM09/MX8mRTSROKAoTyafPHQ1QRFgPEJPRFk2YGn0
cj08kHI74DxTACEDMDk+8WRvAOA+8QqxXHH/GLA+8RDwAzA/VRFgPAsc8RE9D2c5Nh/wRElWzz8p
AABBZzwpNjREn0GybEkgGNAHQGw2UQIgJx0FQGMKwC7wLXBvIG1/G4BBMAGgCGBI0S6yC4BndiA1
YTYxLDYgC4A1MCDyaAWwaXoCIQdAHZwdgPdC5AMQCkBtC4A1Ei9wB0BvClAEIAIQBcBvL0FI8HMr
BUAAcGQ8CzgdgCZumGJzcAKAP0gnYQFA+UFnY2xIMAXANjFP31DvP1H7AiA08DbSBCBPYCB33mVI
UFbCTF9DAnMG8ArBN02qSPADoGIu8Bhgb2uBCYAgdXAgcXUN4H5rSGBLIE+hSrVPAEoAcOdKAloE
NOBqdU9wWqFXjz9DAgDQBaE08C7QSGAuIP5XEQAFQEglAMACQC+RTsN3CcNaIFsQbF9SVrFboWTg
YXlsaWcOsEnATmD/AxABoAMQNsA2UF2/QwJI8DhsY3ULYFZ0BAAgbpJvBUB0aC7wSUUF8P0usWQG
4FqATsJJgAtgXQG9W6F0CHBjgFZRNlBmAND9LXFzSyBhsAVAVwAtYGaQ7wXAY/9DAgGQcAeRA/Bm
gNwgeVLRSGIGkGZdUGgEOVowYW1igQGQW3RJJ/9asGLAWpBJMUgRa8Bf8WaAv1/xNWFikwVAal9D
AmJPYJdaoS/RZoJQBJBlejYjdwRiAyBmEWFKsElQWrBwvwNgCcBtoU7Sb6JfsFRmkf5DZsBSqHNF
cJ9DAk8SB5D/NtBgkQeRYsQDUmZzS6VJOP1O0m02UAGQXWFfsDwpAcDfPzcKoj83CnEkfDAoESHg
/0RrfahB70L/RA9FH0YvhEv/U09UX1H6fA99H34vfz+AT7+BX4Jvg3+Jj4WfjqdNNzH/C4CKH4sv
jD+NT45fj2+Qf4U+UEwgMEtRVU8t8B8+pjYgY8BSwC4xQVJHwElOLVJJRyCgNhD4MHB4IvE/SAqx
EAJAVf9A80CxQU+bLx8bEWClAJwP35GPkp+Tr6InP9BpHNIkfFo0JVFGLdFLMXqekDKvposL4qIP
JNY1piEvq5L/mW+tv4f/iQ+Vr5a/l8+Y3/+v/7ZOnSi3e6CjuD+jL7yf/z1NJVG58D5xO+++r8Ex
MxELO5Alk33DYB8ANRABAAAAgAAAADwAOAA0AEYAMAA1AEIAQQA5ADEAMQA4AEIAQgBEADQAQQA4
AEYAQwA2ADQAMAA5ADgAMAA4AEMARQAyADYANgBDADAANgBDAEQAMwBBAEAARQBOAEcAUgBNAEEA
SQBMADIALgBlAG4AZwByAC4AcABzAHUALgBlAGQAdQA+AAAAHwBHEAEAAAAeAAAAbQBlAHMAcwBh
AGcAZQAvAHIAZgBjADgAMgAyAAAAAAALAPIQAQAAAB8A8xABAAAAcgAAAFIARQAlADMAQQAgAFsA
UgBhAGQAaQBhAG4AYwBlAC0AZwBlAG4AZQByAGEAbABdACAAUgBlACUAMwBBACAAcwBrAHkAIABk
AGUAZgBpAG4AaQB0AGkAbwBuACAAcABhAHIAdAAgADIALgBFAE0ATAAAAAAACwD2EAAAAABAAAcw
xJvVZc+UwwFAAAgw+kBIUNCUwwEDAN4/6f0AAAMA8T8JBAAAHwD4PwEAAAAaAAAATQBhAHIAdABp
AG4AIABNAG8AZQBjAGsAAAAAAAIB+T8BAAAAZgAAAAAAAADcp0DIwEIQGrS5CAArL+GCAQAAAAAA
AAAvTz1QRU5OIFNUQVRFIFVOSVZFUlNJVFkgLSBDT0UvT1U9UFNVX0VOR0lORUVSSU5HL0NOPVJF
Q0lQSUVOVFMvQ049TU1PRUNLAAAAHwD6PwEAAAAqAAAAUwB5AHMAdABlAG0AIABBAGQAbQBpAG4A
aQBzAHQAcgBhAHQAbwByAAAAAAACAfs/AQAAAB4AAAAAAAAA3KdAyMBCEBq0uQgAKy/hggEAAAAA
AAAALgAAAAMA/T/kBAAAAwAZQAAAAAADABpAAAAAAAMAHUAAAAAAAwAeQAAAAAAfADBAAQAAAA4A
AABNAE0ATwBFAEMASwAAAAAAHwAxQAEAAAAOAAAATQBNAE8ARQBDAEsAAAAAAB8AMkABAAAAHAAA
AGcAdwBhAHIAZABAAGwAbQBpAC4AbgBlAHQAAAAfADNAAQAAABwAAABnAHcAYQByAGQAQABsAG0A
aQAuAG4AZQB0AAAAHwA4QAEAAAAOAAAATQBNAE8ARQBDAEsAAAAAAB8AOUABAAAABAAAAC4AAAAL
ACkAAAAAAAsAIwAAAAAAAwAGEGK6cjwDAAcQ8gEAAAMAEBAAAAAAAwAREAAAAAAeAAgQAQAAAGUA
AABJUkVBTExZRE9OVENBUkVUT09NVUNIQUJPVVRDSEFOR0lOR0dFTlNLWSxTSU5DRUhPUklaT05U
QUxJTExVTUlOQU5DRVZBTFVFU0ZPUk9WRVJDQVNUQU5EQ0xFQVJTS1lDT05EAAAAAAIBfwABAAAA
QAAAADw4NEYwNUJBOTExOEJCRDRBOEZDNjQwOTgwOENFMjY2QzA2Q0QzQUBFTkdSTUFJTDIuZW5n
ci5wc3UuZWR1PgAiTg==

------_=_NextPart_001_01C394D0.50437C3E--

From radiance-general@radiance-online.org  Fri Oct 17 19:08:01 2003
From: radiance-general@radiance-online.org (Roland Schregle)
Date: Fri, 17 Oct 2003 20:08:01 +0200
Subject: [Radiance-general] Photon Map Update
Message-ID: <3F903001.6050906@gmx.net>

Howdy RADIANCE crew,

I've updated the RADIANCE photon map addon available at 
www.ise.fhg.de/radiance/photon-map. The code is no longer distributed as 
a patch, but rather as prepatched sources which replace the stock 
RADIANCE 3.5 code. This code will *not* work with the HEAD release.

Barring residual bugs, this update is final for the foreseeable future. 
No functionality has been added. I considered adding support for 
arbitrary BRDFs, but I soon realised this was more trouble than it was 
worth and of questionable practicality, given the abysmal performance.

Enjoy, and let me know how (if?) it works out for you.

Regards,

--Roland

-- 
Roland Schregle
PhD candidate, Fraunhofer Institute for Solar Energy Systems
RADIANCE Photon Map page: www.ise.fhg.de/radiance/photon-map

END OF LINE. (MCP)


From radiance-general@radiance-online.org  Sat Oct 18 08:55:06 2003
From: radiance-general@radiance-online.org (Santiago Torres)
Date: Sat, 18 Oct 2003 16:55:06 +0900
Subject: [Radiance-general] Re: sky definition part 2
In-Reply-To: <20031017100002.4913.77792.Mailman@radiance-on-linux.org>
Message-ID: <ABEIIOCILNBBDDEPEPICKEBMCBAA.tiago@tkh.att.ne.jp>

Hi again,

> I've been buzzing with thoughts of Image Based Rendering and HDR
I`m happy to hear you found it interesting. I promise to keep the list
posted about new results.

> I plan on looking into the Perez sky model in more detail.  So you found
> it gave better correlation than the CIE model in your studies?  Is

In fact I was referring to the Perez model for luminous efficacy. I should
have been more clear perhaps.
I haven`t tried the sky model (nor gendaylit), but I plan to compare results
between models in the future. If anyone knows of such studies, I would
really appreciate letting me know.
The efficacy model is a bit awkward, but all the input can be derived from
quite simple weather data (when they don`t include illuminances)

Regards,

Santiago.


From radiance-general@radiance-online.org  Sat Oct 18 11:39:53 2003
From: radiance-general@radiance-online.org (Santiago Torres)
Date: Sat, 18 Oct 2003 19:39:53 +0900
Subject: [Radiance-general] Re: sky definition part 2
In-Reply-To: <20031018100002.7432.92011.Mailman@radiance-on-linux.org>
Message-ID: <ABEIIOCILNBBDDEPEPICOEBNCBAA.tiago@tkh.att.ne.jp>

Just a short idea
> I'm referring to the expression for Ext = Esc * (1 + 0.034 * cos

> (2pi/365)*(J-2))), which looks like a seasonal correction much like
> declination angle to me.  I really don't know what it's doing in there.

That`s probably to compensate for the earth`s orbit excentricity. Being an
ellipse, the distance to sun is not allways the same. I think it`s closer
during southern summer, and only a little bit, that`s why the compensation
factor is so small (0.034). Extraterrestrial illuminance is the illuminance
measured outside the atmosphere, so it`s the same for all the world at any
given time. The solar illumination constant is probably the average value.




From radiance-general@radiance-online.org  Sat Oct 18 15:55:03 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Sat, 18 Oct 2003 07:55:03 -0700
Subject: [Radiance-general] Re: sky definition part 2
In-Reply-To: <ABEIIOCILNBBDDEPEPICOEBNCBAA.tiago@tkh.att.ne.jp>
Message-ID: <0E0DBBF1-017B-11D8-9ECA-000A956D40C8@lmi.net>

Thanks, Santiago.

This sounds like a good explanation for this expression in the formula. 
  That's an amazing coincidence that the eccentricity so closely 
corresponds to the seasons -- within a day!  It would have never 
occured to me.

-Greg

> From: "Santiago Torres" <tiago@tkh.att.ne.jp>
> Date: Sat Oct 18, 2003  3:39:53  AM US/Pacific
>
> Just a short idea
>> I'm referring to the expression for Ext = Esc * (1 + 0.034 * cos
>
>> (2pi/365)*(J-2))), which looks like a seasonal correction much like
>> declination angle to me.  I really don't know what it's doing in 
>> there.
>
> That`s probably to compensate for the earth`s orbit excentricity. 
> Being an
> ellipse, the distance to sun is not allways the same. I think it`s 
> closer
> during southern summer, and only a little bit, that`s why the 
> compensation
> factor is so small (0.034). Extraterrestrial illuminance is the 
> illuminance
> measured outside the atmosphere, so it`s the same for all the world at 
> any
> given time. The solar illumination constant is probably the average 
> value.


From radiance-general@radiance-online.org  Sat Oct 18 16:09:23 2003
From: radiance-general@radiance-online.org (radiance-general@radiance-online.org)
Date: Sat, 18 Oct 2003 17:09:23 +0200
Subject: [Radiance-general] Re: sky definition part 2
In-Reply-To: <0E0DBBF1-017B-11D8-9ECA-000A956D40C8@lmi.net>
References: <0E0DBBF1-017B-11D8-9ECA-000A956D40C8@lmi.net>
Message-ID: <1066489763.3f9157a36de50@www.dream.unipa.it>

Hi all!

My apologies if this message is much too long ...

Greg was asking about adding the efficacy correction factors into gensky:
as he already noticed this would cause many troubles with old scripts,
so I think that it is better not to make this change. Moreover, as
already pointed out, the sun/sky luminous efficacies do vary with solar
position and there can't be any agreed average standards ... they also
depend on site location ...

I have a few thoughts about gensky and the CIE standard skies that it models.

First I'll give a description of the gensky behaviour and of the
formulas that it uses (as far as I can understand from the gensky.c code),
and then I'll make a short proposal about some integrations that can be
done. I would like to receive some feedback about my ideas.

Part 1: gensky

gensky at the moment behaves this way (I hope not to make any error ...):

1. it can model uniform skies

2. it can model CIE standard clear skies (as described in CIE 110-1994)

3. it can model CIE standard overcast skies (as described in CIE 110-1994 and
   previous standards)

4. it can model non standard intermediate skies, whose definition is contained
   inside src/gen/gensky.c and /src/gen/skybright.cal
   (I've already asked this question 1 year ago: is it possible to give a
   reference about where the intermediate sky definition was taken from?)

If it is given zenith radiance (-b) and solar radiance (-r), gensky uses
directly the CIE formulas or the intermediate sky formula, since all the
sky distribution parameters are already defined, but it is not very usual to
have measured sequences of such weather data (at least not in Italy where
there isn't any IDMP station and sky scanners have only been watched in
photographs ...).

DIRECT CONTRIBUTION from the sun

If we provide gensky with horizontal direct irradiance (ees),
solar radiance (solarbr) is computed with the following formula:

solarbr = ees/(6e-5*sin(sunaltitude))

If we only specify location and time, gensky uses the following formula:

solarbr = 1.5e9/SUNEFFICACY*sin(sunaltitude)
                         if (1.147 - .147/sin(sunaltitude) > .16), otherwise
          1.5e9/SUNEFFICACY*.16
          (could anybody give any reference about this equation?)

where
SUNEFFICACY = 208 /* illuminant B (solar dir.) */

Additionally, if the sky is intermediate, the previous value is multiplied
by 0.15 (i.e the so called /* fudge factor! */)

DIFFUSE CONTRIBUTION from the sky

If neither zenith radiance (zenithbr) nor horizontal diffuse irradiance (eed)
are given, the Krochmann equation is used for the CIE OVERCAST SKY:

zenithbr = 8.6*sin(sunaltitude) + .123 [kcd/m^2] (Krochmann)

CIE 110-1994 also reports equations by Kittler and Nakamura, Oki et al. for this
purpose.

For the CIE CLEAR SKY the LBL equation (Karayel, Navvab, Ne'eman, Selkowitz) is used
(here the Linke Turbidity appears for the first time):

zenithbr = (1.376*turbidity-1.81)*tan(sunaltitude)+0.38 [kcd/m^2]
(Karayel, Navvab, Ne'eman, Selkowitz)

CIE 110-1994 also reports a lot of equations that should be chosen according to
the climate condition in the location of interest (Kittler, Dogniaux, Krochmann,
Liebelt, Gusev, Nagata, Nakamura Oki et al.), but gensky only uses the LBL one.

For the INTERMEDIATE SKY, gensky computes the average of the overcast and CIE clear
zenith radiances.

At the end, the computed resulting value is divided by SKYEFFICACY

D65EFFICACY = 203 /* standard illuminant D65 */
SKYEFFICACY = D65EFFICACY /* skylight */

If the horizontal diffuse irradiance (eed) is provided, then gensky
computes the zenith radiance by using the following formula:

zenithbr = eed/(normfactor*PI)

normfactor = 7/9 for CIE OVERCAST SKY (as we all know by heart!)

while for CIE CLEAR SKY and the INTERMEDIATE SKY, normfactor
is computed by using two different polynomial approximations
(I'd like to have some references about these approximations, too).

For the CIE CLEAR SKY, CIE 110-1994 suggests two different polynomial approximations
by Kittler (as said, "for practical purposes") and by Gusev (for polluted
atmosphere):
both of them are not used by gensky.


Part 2: proposal(s)

A)
As we've seen, gensky is compliant with the CIE standard for the CIE CLEAR and
CIE OVERCAST skies when the user gives solar and zenithal radiances.

When the user only specifies time and location, gensky uses only some of the
equations suggested by CIE. It would be useful to be able to switch between
those equations for practical reasons.
As I've already said, in Italy there is only a few directly measured illuminance
data:
some illuminance data series have been derived by using the Perez model.
Berin and Vio (University of Venice) have shown that the Doginaux equation
approximates very well the Italian luminous conditions, that's why I'm proposing
this integration inside the gensky code ...

B)
There is no standardised intermediate sky luminance distribution model at the
moment, but
CIE 110-1994 cites the Nakamura, Oki et al. intermediate sky (does anybody know
about
recent works of CIE commissions about this topic?)
Zack (hi Zack!) showed interest in being able to use the IESNA (Kittler) sky model.

It would be very useful to have a sort of "plug in" method to insert new sky models,
for instance simply via .cal files (at the moment sky definition is splitted between
a program and a .cal file).

Does anybody else think that this could be useful and feasible?
Probably it would be better to develop another program to generate skies and
leave gensky
as it is now ... and to add a sky library of .cal files to it ...

Any ideas?

Thank you for having the patience of reading it all!

--
Francesco Anselmo
pisuke@libero.it
anselmo@dream.unipa.it



-------------------------------------------------
This mail sent through IMP: http://horde.org/imp/

From radiance-general@radiance-online.org  Sat Oct 18 18:55:48 2003
From: radiance-general@radiance-online.org (Karen Carrier)
Date: Sat, 18 Oct 2003 10:55:48 -0700
Subject: [Radiance-general] Re: sky definition part 2
Message-ID: <000f01c395a1$0feeb000$6400a8c0@Karenswindows>

Thank you Francesco for summarizing so nicely how gensky generates skies. I
agree that it would be useful to have a method that allows one to pick sky
models via .cal files

This might be particularly interesting since the CIE recently approved a new
"Standard General Sky" Model that replaces all previous CIE Overcast and
Clear Standard Sky definitions. It is generalized from the old CIE Clear Sky
formula (Kittler) and consists of 15 sky types of various luminance
gradations and scattering characteristics - one of them being the new
Standard Overcast Sky, and two others representing the new Standard Clear
Skies (one for low luminance turbidity, one for polluted atmospheres).

I have listed a few links below, if anyone is interested .....

http://www.cie.co.at/publ/abst/s011.html announcement of new 2003 standard
http://www.cie-usnc.org/images/CIE%20DS011_2.pdf copy of the draft standard
(I could not find the final version online - if anyone does please let me
know)
http://www.esim.ca/2002/documents/Proceedings/other2.pdf presentation by
Kittler with information on General Sky Standard (Esim 2002)


- Karen

_________________
Karen Carrier
M.ARCH
UC Berkeley



From radiance-general@radiance-online.org  Sat Oct 18 19:24:21 2003
From: radiance-general@radiance-online.org (Martin Moeck)
Date: Sat, 18 Oct 2003 14:24:21 -0400
Subject: [Radiance-general] Re: sky definition part 2
Message-ID: <84F05BA9118BBD4A8FC6409808CE266C06CD41@ENGRMAIL2.engr.psu.edu>

This is a multi-part message in MIME format.

------_=_NextPart_001_01C395A5.0CD7E412
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64

IA0KDQoJIkluIGZhY3QgSSB3YXMgcmVmZXJyaW5nIHRvIHRoZSBQZXJleiBtb2RlbCBmb3IgbHVt
aW5vdXMgZWZmaWNhY3kuIEkgc2hvdWxkDQoJaGF2ZSBiZWVuIG1vcmUgY2xlYXIgcGVyaGFwcy4N
CglJIGhhdmVuYHQgdHJpZWQgdGhlIHNreSBtb2RlbCAobm9yIGdlbmRheWxpdCksIGJ1dCBJIHBs
YW4gdG8gY29tcGFyZSByZXN1bHRzDQoJYmV0d2VlbiBtb2RlbHMgaW4gdGhlIGZ1dHVyZS4gSWYg
YW55b25lIGtub3dzIG9mIHN1Y2ggc3R1ZGllcywgSSB3b3VsZA0KCXJlYWxseSBhcHByZWNpYXRl
IGxldHRpbmcgbWUga25vdy4NCglSZWdhcmRzLA0KCQ0KCVNhbnRpYWdvLiINCgkNCg0KCSANCg0K
CVZhcnRpYW5pbmVuLCBFLjogIkEgY29tcGFyaXNvbiBvZiBsdW1pbm91cyBlZmZpY2FjeSBtb2Rl
bHMgd2l0aCBpbGx1bWluYW5jZSBhbmQgaXJyYWRpYW5jZSBtZWFzdXJlbWVudHMiLCBSZW5ld2Fi
bGUgRW5lcmd5IDIwICgyMDAwKSwgcHAuIDI2NS0yNzcNCg0KCUFic3RyYWN0OiANCg0KCSJTZXZl
cmFsIGx1bWlub3VzIGVmZmljYWN5IG1vZGVscyBoYXZlIGJlZW4gdGVzdGVkIGFnYWluc3Qgc2lt
dWx0YW5lb3VzIGlsbHVtaW5hbmNlIGFuZCBpcnJhZGlhbmNlIG1lYXN1cmVtZW50cyBpbiBIZWxz
aW5raSAuLi4gVGhlIFBlcmV6IGx1bWlub3VzIGVmZmljYWN5IG1vZGVsIGhhZCB0aGUgbG93ZXN0
IHJlbGF0aXZlIG1lYW4gc3F1YXJlIGRpZmZlcmVuY2Ugb2YgNi43JS4gLi4uIEZvciBhbGwgbW9k
ZWxzLCB0aGUgZXJyb3Igd2FzIHNtYWxsZXIgZm9yIGhpZ2ggc29sYXIgYWx0aXR1ZGVzIGJ1dCBn
cmVhdGVyIGZvciB0aGUgbG93IGFsdGl0dWRlcyAuLi4iDQoNCgkgDQoNCglNYXJ0aW4NCg0KDQo=

------_=_NextPart_001_01C395A5.0CD7E412
Content-Type: application/ms-tnef;
	name="winmail.dat"
Content-Transfer-Encoding: base64

eJ8+IhcSAQaQCAAEAAAAAAABAAEAAQeQBgAIAAAA5AQAAAAAAADoAAENgAQAAgAAAAIAAgABBYAD
AA4AAADTBwoAEgAOABgAFQAGADcBASCAAwAOAAAA0wcKABIADgAYABUABgA3AQEJgAEAIQAAAEMx
MzYyRkE2RUM1MzBFNEJCMDNDMDIwN0E0MkY1NjNGACkHAQOQBgDgDwAAOAAAAB8AGgABAAAAEgAA
AEkAUABNAC4ATgBvAHQAZQAAAAAAAwA2AAAAAAAfADcAAQAAAGIAAABSAEUAOgAgAFsAUgBhAGQA
aQBhAG4AYwBlAC0AZwBlAG4AZQByAGEAbABdACAAUgBlADoAIABzAGsAeQAgAGQAZQBmAGkAbgBp
AHQAaQBvAG4AIABwAGEAcgB0ACAAMgAAAAAAQAA5ABLk1wyllcMBHwA9AAEAAAAKAAAAUgBFADoA
IAAAAAAAAgFHAAEAAAA6AAAAYz1VUzthPSA7cD1QZW5uIFN0YXRlIFVuaXZlO2w9RU5HUk1BSUwy
LTAzMTAxODE4MjQyMVotMTc1AAAAHwBJAAEAAABaAAAAWwBSAGEAZABpAGEAbgBjAGUALQBnAGUA
bgBlAHIAYQBsAF0AIABSAGUAOgAgAHMAawB5ACAAZABlAGYAaQBuAGkAdABpAG8AbgAgAHAAYQBy
AHQAIAAyAAAAAABAAE4AACndJE2VwwEfAFoAAQAAACAAAABTAGEAbgB0AGkAYQBnAG8AIABUAG8A
cgByAGUAcwAAAAIBWwABAAAAQQAAAAAAAACBKx+kvqMQGZ1uAN0BD1QCAAAAAFNhbnRpYWdvIFRv
cnJlcwBTTVRQAHRpYWdvQHRraC5hdHQubmUuanAAAAAAAgFcAAEAAAAZAAAAU01UUDpUSUFHT0BU
S0guQVRULk5FLkpQAAAAAB8AXQABAAAAIAAAAFMAYQBuAHQAaQBhAGcAbwAgAFQAbwByAHIAZQBz
AAAAAgFeAAEAAABBAAAAAAAAAIErH6S+oxAZnW4A3QEPVAIAAAAAU2FudGlhZ28gVG9ycmVzAFNN
VFAAdGlhZ29AdGtoLmF0dC5uZS5qcAAAAAACAV8AAQAAABkAAABTTVRQOlRJQUdPQFRLSC5BVFQu
TkUuSlAAAAAAHwBmAAEAAAAKAAAAUwBNAFQAUAAAAAAAHwBnAAEAAAAoAAAAdABpAGEAZwBvAEAA
dABrAGgALgBhAHQAdAAuAG4AZQAuAGoAcAAAAB8AaAABAAAACgAAAFMATQBUAFAAAAAAAB8AaQAB
AAAAKAAAAHQAaQBhAGcAbwBAAHQAawBoAC4AYQB0AHQALgBuAGUALgBqAHAAAAAfAHAAAQAAAFoA
AABbAFIAYQBkAGkAYQBuAGMAZQAtAGcAZQBuAGUAcgBhAGwAXQAgAFIAZQA6ACAAcwBrAHkAIABk
AGUAZgBpAG4AaQB0AGkAbwBuACAAcABhAHIAdAAgADIAAAAAAAIBcQABAAAAGwAAAAHDlU2i4nnx
Sg9LQ0bzvR6p9qM0Q9wAFaiWmwAfAHQAAQAAAEoAAAByAGEAZABpAGEAbgBjAGUALQBnAGUAbgBl
AHIAYQBsAEAAcgBhAGQAaQBhAG4AYwBlAC0AbwBuAGwAaQBuAGUALgBvAHIAZwAAAAAAHwAaDAEA
AAAaAAAATQBhAHIAdABpAG4AIABNAG8AZQBjAGsAAAAAAB8AHQ4BAAAAWgAAAFsAUgBhAGQAaQBh
AG4AYwBlAC0AZwBlAG4AZQByAGEAbABdACAAUgBlADoAIABzAGsAeQAgAGQAZQBmAGkAbgBpAHQA
aQBvAG4AIABwAGEAcgB0ACAAMgAAAAAAAgEJEAEAAACsBgAAqAYAAA0VAABMWkZ1kveHQQMACgBy
Y3BnOTMywQNDaHRtbDEDMAEDXwH3CoACpAPkBeFNC4Bj/GhvAoAP8wBQBFYQ3g5BDwMBAgARMArA
c2V0MjcGAAbDEWUzBEYT1zAgvwhVB7ICgBFzCO8J9zsYP9gyNTURYgxgYwBQCwmZAWQzNhZwC6U0
IA/y7CpcDqIBkGcUYAqjEXMFHVg0FGA8IURPQwBUWVBFIEhUTQBMIFBVQkxJQwAgIi0vL1czQxEg
8ERURCAEMy4y4SDwRU4iPh5dHf8jMXwxOB9gIBIifyOPJgAz4xzwJOBFQUQlPQ7hJl8LKN8kZDYO
4DxNRVSKQQewQSvQPSJHCfApBJBhdAWwIhaAT06aVCJAVCxgBeFFeBPx6G5nZQZSdhbhLrEAkIEC
ICA2LjAuNhzgODkuMSJuKj8kczc3QR9gVElUTEUlPjRhDuBbUmFkBzARIGUmLS5QLKJsXQfwZTpg
IHNreSABAQuAaa50LzIKsQVAMiPeNR9g/i8yvzDvJbU0ATgQJ78mDwU75DUWcDxCT0RZ0TXQaXI9
PAByO1A7w+cAIQMwPmFkbwDgPmEKsfxccRggPmERMAMwPsUWcC87exxhPH8OEDYfYERJnlY+mQAA
QNc7mTY0RA8FQS84HPAmbmJzcMcCgEY5FUEnYTA+p0U7vwHAPqcKokn4CoAj7DAngf8hUEPbSflB
b0J/Q4IggB+gcEtRVU8tYD4WNZB0CHlsZS2hQVJHSWBOLVJJRyAQNYAw/HB4ImE+uAqxD/I/xUBj
/0AhQL9QLx6LFnBaAFEPQ79vSh9F31cnP0BpHEIj7DRNJMFGLUE1kGl6U5Ayp1uLC+JXCSJJA6Bm
ANBhBUBJIHdhBCAYQGa3BJAFEC5AICzgZIBoLmDiUASQZXogBGIDIAIQ+wXACkBtC4AIYAQgOfxY
n59IFFoRAREN4ADQeS5jgeJzEUB1bGQj7CuAPbH2Uj6bC4BlCoFXJxQALrCcIGIJ4WVRGEAgY1OA
jQrBcASQFABwcy5qP89rT2xcY5BtMm5gBUA+cP0IkGRkszWiZp9nr2i0ZWTOKGZABcA00WRhU3A2
MPQpLG1wdWNyC1EDoGSRXQWgbQqxLmAYQHNqAHSec28PcB9sXG2AdHdtlH9lgQQgC4Bks3OPdJ9o
tGa7d4AIcGVpkT8gAHB5AiDVLmBrZkB3BCBvPyB48PtAkVNQdTRgB5B3UGORaf9veh97L2PhB0Bs
NcBuwHD1GEBjBzB0LmBTgAJAZFL/fa9+v3WlgSRu/4QvbE01YP5nCxGCgIrPi99sXI5Pj1+PbFwG
ETZAPCBvLiIj7Po1WyEvYJJOb0pfS29Mf/9Nj5aPXM9d317vX/0Ko2Dv/2H/lO+V/5wvmB+ZL5o/
Uij/pLtVo6KvWC9RT1JfU29Uf/9cIVYfq3+sj1lPO4qdgB9g/lBbj56vn7+hH6Ivoz+kT/9PD0fP
SN9J6qb/qAVVDb7f/6ZmOAG3MbOftK+1v7bPt9/vuO+5/7sPxSdWNqE0cWxB0m53UEUuNYAiLAB4
VP8EAC9BgaFmB2kWfLaHz8gf/2i0A/BkwH0ghlBmEjSCgMH/cuA+MCzANGRlUG5AePAYQPMHgAIw
cyJ3UDVgLKBjsGsCYC5gRSyhZzXAYjEo/wHQ2pB3QYagaZDTz9TfaLTgMjY1LTIycLyvvb//wf/D
D8QfxS/GP8dPyF/Jb7/Kf8uPzJ/Nr86/47NBwJD/PnBjUTWA3i/fP+BP4V/ib//jf+SP5Z/mr+e/
6M/p3+rv/+v/7Q9itAZgLrEHQNIv0zf/bTiHEK+QctE8IAtxr5DbL7f3P2ilDdBteQENsGVmUm/W
n9ev2LN9Ikh88QuAa8hpIC4JgCBUZNcC//8ED2i0/99lVRQAcuQX0HxwfwLBGEB34DZAbVHYQWMg
c/xxdXiSNGANgGURBsKBoc8Kbwt/aLQvcDclaZAJgv5GdoGGQXy1d1BkwmQhdoE5Y7JzbYZBLsFl
wmhp+meCAW934BTCNkCCMYJw73djEY8Sn2i0Z4YhhxAW5P8OpRfpCYGU3/AP8R/yL/M///RP9V/2
b/d/+I/5n/qv+7///M/93yL/Hi8fP79/wI/Bn/8gTyFfIm8jfySPJZ8mrye/XyjPKd8q7yv/LQlN
0CJu/y9PM480nzWvNr83zzjfOe/3Wp877y2PMUaxkmxE76if/5tPTs9JBKBRLtVPT6mPUP8vRy9I
P1efSQI1UvJCT7xEWUcNRrBZD0khN1SRKbCgTUySgH1dwB8ANRABAAAAgAAAADwAOAA0AEYAMAA1
AEIAQQA5ADEAMQA4AEIAQgBEADQAQQA4AEYAQwA2ADQAMAA5ADgAMAA4AEMARQAyADYANgBDADAA
NgBDAEQANAAxAEAARQBOAEcAUgBNAEEASQBMADIALgBlAG4AZwByAC4AcABzAHUALgBlAGQAdQA+
AAAAHwBHEAEAAAAeAAAAbQBlAHMAcwBhAGcAZQAvAHIAZgBjADgAMgAyAAAAAAALAPIQAQAAAB8A
8xABAAAAcgAAAFIARQAlADMAQQAgAFsAUgBhAGQAaQBhAG4AYwBlAC0AZwBlAG4AZQByAGEAbABd
ACAAUgBlACUAMwBBACAAcwBrAHkAIABkAGUAZgBpAG4AaQB0AGkAbwBuACAAcABhAHIAdAAgADIA
LgBFAE0ATAAAAAAACwD2EAAAAABAAAcwJFQ6RaSVwwFAAAgwim3hDKWVwwEDAN4/6f0AAAMA8T8J
BAAAHwD4PwEAAAAaAAAATQBhAHIAdABpAG4AIABNAG8AZQBjAGsAAAAAAAIB+T8BAAAAZgAAAAAA
AADcp0DIwEIQGrS5CAArL+GCAQAAAAAAAAAvTz1QRU5OIFNUQVRFIFVOSVZFUlNJVFkgLSBDT0Uv
T1U9UFNVX0VOR0lORUVSSU5HL0NOPVJFQ0lQSUVOVFMvQ049TU1PRUNLAAAAHwD6PwEAAAAqAAAA
UwB5AHMAdABlAG0AIABBAGQAbQBpAG4AaQBzAHQAcgBhAHQAbwByAAAAAAACAfs/AQAAAB4AAAAA
AAAA3KdAyMBCEBq0uQgAKy/hggEAAAAAAAAALgAAAAMA/T+kAwAAAwAZQAAAAAADABpAAAAAAAMA
HUAAAAAAAwAeQAAAAAAfADBAAQAAAA4AAABNAE0ATwBFAEMASwAAAAAAHwAxQAEAAAAOAAAATQBN
AE8ARQBDAEsAAAAAAB8AMkABAAAAKAAAAHQAaQBhAGcAbwBAAHQAawBoAC4AYQB0AHQALgBuAGUA
LgBqAHAAAAAfADNAAQAAACgAAAB0AGkAYQBnAG8AQAB0AGsAaAAuAGEAdAB0AC4AbgBlAC4AagBw
AAAAHwA4QAEAAAAOAAAATQBNAE8ARQBDAEsAAAAAAB8AOUABAAAABAAAAC4AAAALACkAAAAAAAsA
IwAAAAAAAwAGEC+NFqgDAAcQjgIAAAMAEBAAAAAAAwAREAAAAAAeAAgQAQAAAGUAAAAiSU5GQUNU
SVdBU1JFRkVSUklOR1RPVEhFUEVSRVpNT0RFTEZPUkxVTUlOT1VTRUZGSUNBQ1lJU0hPVUxESEFW
RUJFRU5NT1JFQ0xFQVJQRVJIQVBTSUhBVkVOVFRSSUVEVEhFAAAAAAIBfwABAAAAQAAAADw4NEYw
NUJBOTExOEJCRDRBOEZDNjQwOTgwOENFMjY2QzA2Q0Q0MUBFTkdSTUFJTDIuZW5nci5wc3UuZWR1
PgB1PQ==

------_=_NextPart_001_01C395A5.0CD7E412--

From radiance-general@radiance-online.org  Sat Oct 18 23:37:51 2003
From: radiance-general@radiance-online.org (Zack Rogers)
Date: Sat, 18 Oct 2003 16:37:51 -0600
Subject: [Radiance-general] Re: Sky Definition Part 2
References: <3F91849B.5020806@archenergy.com>
Message-ID: <3F91C0BF.4060005@archenergy.com>

Hi Francesco,

Thanks so much for your input.  I need to apologize, when I started this 
thread I narrow mindedly thought the IESNA equations were all part of 
what's defined as the "CIE standard sky".   I had no idea there were so 
many differing equations to determine the magnitudes of the sun and sky 
components.  I believe IES uses the CIE 110-1994 luminance distribution 
functions but I could not track down a copy of this at the moment.  Is 
it the same function from his 1967 studies and then adopted by CIE in 
1973?  or was it changed in 1994?  IES still lists the refence as 
Kittler 1967.

First, a note on sun/sky efficacies.  The 94.2 lm/W efficacy I had said 
IES gives is for extraterrestrial solar.  Which, along with the solar 
irradiation/illumination constants are the same for the entire world. 
 It can then range from ~95 - 120 lm/W or whatever depending on the 
amount of particles it has to travel through, which is a function of 
elevation, solar angles, and turbidity and as Santiago pointed out a 
function of the eccentricity of the earth orbit which just slightly 
varies the extraterrestrial values throughout the year.  I'm guessing 
air particles absorb more heat then light, hence the more particles the 
direct solar travels through the more efficacious it becomes.  Given 
this, it does not seem like the determination of solar illuminance or 
solar efficacy should be that difficult as long as it is a function of 
extraterrestrial solar, eccentricity, elevation, solar angles (day, 
time, lat etc), and turbidity.  This is partly why I trust the IES 
equation for direct solar at sea level because its a function of 
extraterrestrial solar, eccentricity, and sun angles.  It falls short by 
not including elevation or just estimating a turbidity.  Also, this is 
why I think direct solar estimates can be fairly accurate and not a 
matter of guesswork, since every input variable is extremely accurate 
except for perhaps the turbidity, which in the IES equations is assumed 
to be a constant value and probably based off weather data for north 
america.  But given an accurate turbidity value there is no reason why 
an accurate estimate of the direct solar component can't be made.  Also, 
it seems more logical to be able to vary the turbidity (and have it 
affect the solar component) as input to gensky rather than vary the 
solar radiance.  

Furthermore, the sky estimate shouldn't be too much harder to achieve 
since, for one, it can not exceed the difference between ground level 
and extraterrestrial direct solar.  It is also a function of the same 
variables listed above and is distributed according to either the 
kittler distribution function or perez or whatever.

> If we only specify location and time, gensky uses the following formula:
>
> solarbr = 1.5e9/SUNEFFICACY*sin(sunaltitude)
>                         if (1.147 - .147/sin(sunaltitude) > .16), 
> otherwise
>          1.5e9/SUNEFFICACY*.16
>          (could anybody give any reference about this equation?)
>
> where
> SUNEFFICACY = 208 /* illuminant B (solar dir.) */

Given what I just said above, from what I can tell, this equation only 
takes into account the sun angles with perhaps an estimate for ext. 
solar radiance.  Hence, I'm more inclined to believe the IES equations 
which estimate a turbidity value and only misses an elevation factor.

>
> DIFFUSE CONTRIBUTION from the sky
>
> If neither zenith radiance (zenithbr) nor horizontal diffuse 
> irradiance (eed)
> are given, the Krochmann equation is used for the CIE OVERCAST SKY:
>
> zenithbr = 8.6*sin(sunaltitude) + .123 [kcd/m^2] (Krochmann)
>
> CIE 110-1994 also reports equations by Kittler and Nakamura, Oki et 
> al. for this
> purpose.

IES's equation for cloudy sky zenith luminance (Lz) is this;

Lz = (0.3 + 21.0*sin (sunaltitude))*0.409

For comparison on summer solstice at 12:00PM at 40 lat., the Krochmann 
equation gives 8,366 cd/m2 and IES equation gives 8,356 cd/m2.   Pretty 
close!!!

>
> For the CIE CLEAR SKY the LBL equation (Karayel, Navvab, Ne'eman, 
> Selkowitz) is used
> (here the Linke Turbidity appears for the first time):
>
> zenithbr = (1.376*turbidity-1.81)*tan(sunaltitude)+0.38 [kcd/m^2]
> (Karayel, Navvab, Ne'eman, Selkowitz)

For comparison on the same day and lat. etc., the IES equation, which I 
listed earlier, gives roughly 8,147 cd/m2 and this equation gives 7,023 
cd/m2.

>
> CIE 110-1994 also reports a lot of equations that should be chosen 
> according to
> the climate condition in the location of interest (Kittler, Dogniaux, 
> Krochmann,
> Liebelt, Gusev, Nagata, Nakamura Oki et al.), but gensky only uses the 
> LBL one.
>
> For the CIE CLEAR SKY, CIE 110-1994 suggests two different polynomial 
> approximations
> by Kittler (as said, "for practical purposes") and by Gusev (for polluted
> atmosphere):
> both of them are not used by gensky.
>
I'd be interested how these other equations compare.

>
> Part 2: proposal(s)
>
> A)
> As we've seen, gensky is compliant with the CIE standard for the CIE 
> CLEAR and
> CIE OVERCAST skies when the user gives solar and zenithal radiances.
>
> When the user only specifies time and location, gensky uses only some 
> of the
> equations suggested by CIE. It would be useful to be able to switch 
> between
> those equations for practical reasons.
> As I've already said, in Italy there is only a few directly measured 
> illuminance
> data:
> some illuminance data series have been derived by using the Perez model.
> Berin and Vio (University of Venice) have shown that the Doginaux 
> equation
> approximates very well the Italian luminous conditions, that's why I'm 
> proposing
> this integration inside the gensky code ...

Yes, I would prefer not to have to input solar and zenithal radiances in 
lieu of some of the more accurate estimates discussed here.  Actually, I 
would prefer to just be able to adjust the turbidity to get my desired 
values as that should be the only less than accurate input variable.

>
> B)
> There is no standardised intermediate sky luminance distribution model 
> at the
> moment, but
> CIE 110-1994 cites the Nakamura, Oki et al. intermediate sky (does 
> anybody know
> about
> recent works of CIE commissions about this topic?)
> Zack (hi Zack!) showed interest in being able to use the IESNA 
> (Kittler) sky model.
>
> It would be very useful to have a sort of "plug in" method to insert 
> new sky models,
> for instance simply via .cal files (at the moment sky definition is 
> splitted between
> a program and a .cal file).
>
> Does anybody else think that this could be useful and feasible?
> Probably it would be better to develop another program to generate 
> skies and
> leave gensky
> as it is now ... and to add a sky library of .cal files to it ...

Good idea.  I think this is a good approach, that way old stuff reliant 
on gensky will not be affected.

Thanks again Francesco, that was some great info to add to the 
discussion!   Again, please correct me if I am wrong in any of this 
thinking.

Zack

-- 
Zack Rogers
Staff Engineer
Architectural Energy Corporation
2540 Frontier Avenue, Suite 201
Boulder, CO 80301 USA

tel (303)444-4149 ext.235
fax (303)444-4304
www.archenergy.com




From radiance-general@radiance-online.org  Sun Oct 19 07:41:53 2003
From: radiance-general@radiance-online.org (Peter Apian-Bennewitz)
Date: Sun, 19 Oct 2003 08:41:53 +0200
Subject: [Radiance-general] rholo restart stalls with "bad magic number"
In-Reply-To: <68ED4A3A-01F4-11D8-948A-000A956D40C8@lmi.net>
References: <68ED4A3A-01F4-11D8-948A-000A956D40C8@lmi.net>
Message-ID: <3F923231.4050305@pab-opto.de>

This is a multi-part message in MIME format.
--------------020606090706070300020809
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

Dear folks,

FYI: rholo (HEAD version as of today, 19.10.03) on Linux (tested on slackware and Debian 'sarge') screws writing holodeck files.
It works if holofile.c and rholo.c include

        #include <sys/types.h>
        #include <unistd.h>

as suggested by the lseek man page

note 2 (mostly for developpers): POSIX lseeks seem to favor macros for the lseek 'whence' parameter: lseek man page says:

       When converting old code, substitute values for whence with the following macros:
         old       new
        0        SEEK_SET
        1        SEEK_CUR
        2        SEEK_END
        L_SET    SEEK_SET
        L_INCR   SEEK_CUR
        L_XTND   SEEK_END

at least that keeps me going for now

I'm posting this to the general list to keep potential users updated, the cross-post to the dev list is indended for follow ups.

-Peter

PS: yet another good reason for a test suite

-- 
  pab-opto, Freiburg, Germany, www.pab-opto.de



--------------020606090706070300020809
Content-Type: text/plain;
 name="rholo.c"
Content-Transfer-Encoding: base64
Content-Disposition: inline;
 filename="rholo.c"

I2lmbmRlZiBsaW50CnN0YXRpYyBjb25zdCBjaGFyCVJDU2lkW10gPSAiJElkOiByaG9sby5j
LHYgMy42MCAyMDAzLzA3LzI3IDIyOjEyOjAyIHNjaG9yc2NoIEV4cCAkIjsKI2VuZGlmCi8q
CiAqIFJhZGlhbmNlIGhvbG9kZWNrIGdlbmVyYXRpb24gY29udHJvbGxlcgogKi8KCiNpbmNs
dWRlIDxzaWduYWwuaD4KI2luY2x1ZGUgPHN5cy9zdGF0Lmg+CiNpbmNsdWRlIDxzdHJpbmcu
aD4KCiNpbmNsdWRlICJyaG9sby5oIgojaW5jbHVkZSAicmFuZG9tLmgiCgojaWZuZGVmIEZS
QUdXQVJOCiNkZWZpbmUgRlJBR1dBUk4JMjAJCS8qIGZyYWdtZW50YXRpb24gZm9yIHdhcm5p
bmcgKCUpICovCiNlbmRpZgojaWZuZGVmIE1BWFFUSU1FCiNkZWZpbmUgTUFYUVRJTUUJNQkJ
LyogdGFyZ2V0IG1heGltdW0gc2Vjb25kcyBpbiBxdWV1ZSAqLwojZW5kaWYKCQkJCQkvKiBt
YW51YWwgY2FjaGUgZmx1c2hpbmcgZnJlcXVlbmN5ICovCiNpZm5kZWYgUlRGTFVTSAojaWYg
TUFYUVRJTUUKI2RlZmluZSBSVEZMVVNICQkoMzAwL01BWFFUSU1FKnRvdHFsZW4pCS8qIDw9
IDUgbWludXRlcyAqLwojZWxzZQojZGVmaW5lIFJURkxVU0gJCSg1MCp0b3RxbGVuKQkJLyog
anVzdCBndWVzcyAqLwojZW5kaWYKI2VuZGlmCgkJCS8qIHRoZSBmb2xsb3dpbmcgbXVzdCBi
ZSBjb25zaXN0ZW50IHdpdGggcmhvbG8uaCAqLwppbnQJTlZBUlMgPSBOUkhWQVJTOwkJLyog
dG90YWwgbnVtYmVyIG9mIHZhcmlhYmxlcyAqLwoKVkFSSUFCTEUJdnZbXSA9IFJIVklOSVQ7
CQkvKiB2YXJpYWJsZS12YWx1ZSBwYWlycyAqLwoKY2hhcgkqcHJvZ25hbWU7CQkvKiBvdXIg
cHJvZ3JhbSBuYW1lICovCmNoYXIJKmhka2ZpbGU7CQkvKiBob2xvZGVjayBmaWxlIG5hbWUg
Ki8KY2hhcglmcm9vdFsyNTZdOwkJLyogcm9vdCBmaWxlIG5hbWUgKi8KCmludAluY3Byb2Nz
ID0gMDsJCS8qIGRlc2lyZWQgbnVtYmVyIG9mIGNvbXB1dGUgcHJvY2Vzc2VzICovCgpjaGFy
CSpvdXRkZXYgPSBOVUxMOwkJLyogb3V0cHV0IGRldmljZSBuYW1lICovCgppbnQJcmVhZGlu
cCA9IDA7CQkvKiByZWFkIGNvbW1hbmRzIGZyb20gc3RkaW4gKi8KCmludAlmb3JjZSA9IDA7
CQkvKiBhbGxvdyBvdmVyd3JpdGUgb2YgaG9sb2RlY2sgKC0xID09IHJlYWQtb25seSkgKi8K
CnRpbWVfdAlzdGFydHRpbWU7CQkvKiB0aW1lIHdlIGdvdCBzdGFydGVkICovCnRpbWVfdAll
bmR0aW1lOwkJLyogdGltZSB3ZSBzaG91bGQgZW5kIGJ5ICovCnRpbWVfdAlyZXBvcnR0aW1l
OwkJLyogdGltZSBmb3IgbmV4dCByZXBvcnQgKi8KCm9mZl90CW1heGRpc2s7CQkvKiBtYXhp
bXVtIGZpbGUgc3BhY2UgKGJ5dGVzKSAqLwoKaW50CXJ0YXJnYyA9IDE7CQkvKiBydHJhY2Ug
Y29tbWFuZCAqLwpjaGFyCSpydGFyZ3ZbMTI4XSA9IHsicnRyYWNlIiwgTlVMTH07CgppbnQJ
b3JpZ19tb2RlID0gLTE7CQkvKiBvcmlnaW5hbCBmaWxlIG1vZGUgKC0xIGlmIHVuY2hhbmdl
ZCkgKi8KCmxvbmcJbnJheXNkb25lID0gMEw7CQkvKiBudW1iZXIgb2YgcmF5cyBkb25lICov
CmxvbmcJbnBhY2tzZG9uZSA9IDBMOwkvKiBudW1iZXIgb2YgcGFja2V0cyBkb25lICovCgpQ
QUNLRVQJKmZyZWVwYWNrczsJCS8qIGF2YWlsYWJsZSBwYWNrZXRzICovCmludAl0b3RxbGVu
OwkJLyogbWF4aW11bSBxdWV1ZSBsZW5ndGggKG51bWJlciBvZiBwYWNrZXRzKSAqLwoKY2hh
ciAgKnNpZ2VycltOU0lHXTsJCS8qIHNpZ25hbCBlcnJvciBtZXNzYWdlcyAqLwoKZXh0ZXJu
IGludAlub3dhcm47CQkvKiB0dXJuIHdhcm5pbmdzIG9mZj8gKi8KCmV4dGVybiB0aW1lX3QJ
dGltZSgpOwoKCm1haW4oYXJnYywgYXJndikKaW50CWFyZ2M7CmNoYXIJKmFyZ3ZbXTsKewoJ
aW50CWk7CgoJaW5pdHVyYW5kKDE2Mzg0KTsJCQkvKiBpbml0aWFsaXplIHVyYW5kICovCglw
cm9nbmFtZSA9IGFyZ3ZbMF07CQkJLyogZ2V0IGFyZ3VtZW50cyAqLwoJZm9yIChpID0gMTsg
aSA8IGFyZ2MgJiYgYXJndltpXVswXSA9PSAnLSc7IGkrKykKCQlzd2l0Y2ggKGFyZ3ZbaV1b
MV0pIHsKCQljYXNlICd3JzoJCQkvKiB0dXJuIG9mZiB3YXJuaW5ncyAqLwoJCQlub3dhcm4r
KzsKCQkJYnJlYWs7CgkJY2FzZSAnZic6CQkJLyogZm9yY2Ugb3ZlcndyaXRlICovCgkJCWZv
cmNlID0gMTsKCQkJYnJlYWs7CgkJY2FzZSAncic6CQkJLyogcmVhZC1vbmx5IG1vZGUgKi8K
CQkJZm9yY2UgPSAtMTsKCQkJYnJlYWs7CgkJY2FzZSAnaSc6CQkJLyogcmVhZCBpbnB1dCBm
cm9tIHN0ZGluICovCgkJCXJlYWRpbnArKzsKCQkJYnJlYWs7CgkJY2FzZSAnbic6CQkJLyog
Y29tcHV0ZSBwcm9jZXNzZXMgKi8KCQkJaWYgKGkgPj0gYXJnYy0yKQoJCQkJZ290byB1c2Vy
cjsKCQkJbmNwcm9jcyA9IGF0b2koYXJndlsrK2ldKTsKCQkJYnJlYWs7CgkJY2FzZSAnbyc6
CQkJLyogb3V0cHV0IGRpc3BsYXkgKi8KCQkJaWYgKGkgPj0gYXJnYy0yKQoJCQkJZ290byB1
c2VycjsKCQkJb3V0ZGV2ID0gYXJndlsrK2ldOwoJCQlicmVhazsKCQlkZWZhdWx0OgoJCQln
b3RvIHVzZXJyOwoJCX0KCQkJCQkJLyogZ2V0IHJvb3QgZmlsZSBuYW1lICovCglpZiAoaSA+
PSBhcmdjKQoJCWdvdG8gdXNlcnI7Cglyb290bmFtZShmcm9vdCwgaGRrZmlsZT1hcmd2W2kr
K10pOwoJCQkJCQkvKiBsb2FkIHZhcmlhYmxlcz8gKi8KCWlmIChpIDwgYXJnYykKCQlpZiAo
YXJndltpXVswXSAhPSAnLScgJiYgYXJndltpXVswXSAhPSAnKycpCgkJCWxvYWR2YXJzKGFy
Z3ZbaV0pOwkvKiBsb2FkIHZhcmlhYmxlcyBmcm9tIGZpbGUgKi8KCglpZiAoaSA+PSBhcmdj
IHx8IGFyZ3ZbaV1bMF0gPT0gJysnKQoJCWxvYWRob2xvKCk7CQkJLyogbG9hZCBleGlzdGlu
ZyBob2xvZGVjayAqLwoKCXdoaWxlICgrK2kgPCBhcmdjKQkJCS8qIGdldCBjb21tYW5kIGxp
bmUgc2V0dGluZ3MgKi8KCQlpZiAoc2V0dmFyaWFibGUoYXJndltpXSwgbWF0Y2h2YXIpIDwg
MCkgewoJCQlzcHJpbnRmKGVycm1zZywgInVua25vd24gdmFyaWFibGU6ICVzIiwgYXJndltp
XSk7CgkJCWVycm9yKFVTRVIsIGVycm1zZyk7CgkJfQoJCQkJCQkvKiBjaGVjayBzZXR0aW5n
cyAqLwoJY2hlY2t2YWx1ZXMoKTsKCQkJCQkJLyogbG9hZCByYWQgaW5wdXQgZmlsZSAqLwoJ
Z2V0cmFkZmlsZSgpOwoKCWlmIChoZGxpc3RbMF0gPT0gTlVMTCkgewkJLyogY3JlYXRlIG5l
dyBob2xvZGVjayAqLwoJCUhER1JJRAloZGdbSERNQVhdOwoJCQkJCQkJLyogc2V0IGRlZmF1
bHRzICovCgkJc2V0ZGVmYXVsdHMoaGRnKTsKCQkJCQkJCS8qIGNoZWNrIHJlYWQtb25seSAq
LwoJCWlmIChmb3JjZSA8IDApCgkJCWVycm9yKFVTRVIsICJjYW5ub3QgY3JlYXRlIHJlYWQt
b25seSBob2xvZGVjayIpOwoJCQkJCQkJLyogaG9sb2RlY2sgZXhpc3RzPyAqLwoJCWlmICgh
Zm9yY2UgJiYgYWNjZXNzKGhka2ZpbGUsIFJfT0t8V19PSykgPT0gMCkKCQkJZXJyb3IoVVNF
UiwKCQkJCSJob2xvZGVjayBmaWxlIGV4aXN0cyAtLSB1c2UgLWYgdG8gb3ZlcndyaXRlIik7
CgkJCQkJCQkvKiBjcmVhdGUgaG9sb2RlY2sgKi8KCQljcmVhdGhvbG8oaGRnKTsKCX0gZWxz
ZQkJCQkJLyogZWxzZSBqdXN0IHNldCBkZWZhdWx0cyAqLwoJCXNldGRlZmF1bHRzKE5VTEwp
OwoJCQkJCQkvKiBpbml0aWFsaXplICovCglpbml0cmhvbG8oKTsKCQkJCQkJLyogbWFpbiBs
b29wICovCgl3aGlsZSAocmhvbG8oKSkKCQk7CgkJCQkJCS8qIGRvbmUgKi8KCXF1aXQoMCk7
CnVzZXJyOgoJZnByaW50ZihzdGRlcnIsCiJVc2FnZTogJXMgWy1uIG5wcm9jc11bLW8gZGlz
cF1bLXddWy1yfC1mXSBvdXRwdXQuaGRrIFtjb250cm9sLmhpZnwrfC0gW1ZBUj12YWwgLi5d
XVxuIiwKCQkJcHJvZ25hbWUpOwoJcXVpdCgxKTsKfQoKCnZvaWQKb25zaWcoc2lnbm8pCQkJ
CS8qIGZhdGFsIHNpZ25hbCAqLwppbnQgIHNpZ25vOwp7CglzdGF0aWMgaW50ICBnb3RzaWcg
PSAwOwoKCWlmIChnb3RzaWcgPiAxKQkJCS8qIHdlJ3JlIGdvaW5nIGFzIGZhc3QgYXMgd2Ug
Y2FuISAqLwoJCXJldHVybjsKCWlmIChnb3RzaWcrKykgewkJCS8qIHR3byBzaWduYWxzIGFu
ZCB3ZSBzcGxpdCAqLwoJCWhkc3luYyhOVUxMLCAwKTsJLyogZG9uJ3QgbGVhdmUgdy9vIHNh
eWluZyBnb29kYnllICovCgkJX2V4aXQoc2lnbm8pOwoJfQoJYWxhcm0oMzAwKTsJCQkvKiBh
bGxvdyA1IG1pbnV0ZXMgdG8gY2xlYW4gdXAgKi8KCWVwdXRzKCJzaWduYWwgLSAiKTsKCWVw
dXRzKHNpZ2VycltzaWdub10pOwoJZXB1dHMoIlxuIik7CglxdWl0KDMpOwp9CgoKc2lnZGll
KHNpZ25vLCBtc2cpCQkJLyogc2V0IGZhdGFsIHNpZ25hbCAqLwppbnQgIHNpZ25vOwpjaGFy
ICAqbXNnOwp7CglpZiAoc2lnbmFsKHNpZ25vLCBvbnNpZykgPT0gU0lHX0lHTikKCQlzaWdu
YWwoc2lnbm8sIFNJR19JR04pOwoJc2lnZXJyW3NpZ25vXSA9IG1zZzsKfQoKCmludApyZXNm
bW9kZShmZCwgbW9kKQkJLyogcmVzdHJpY3Qgb3BlbiBmaWxlIGFjY2VzcyBtb2RlICovCmlu
dAlmZCwgbW9kOwp7CglzdHJ1Y3Qgc3RhdAlzdGJ1ZjsKCQkJCQkvKiBnZXQgb3JpZ2luYWwg
bW9kZSAqLwoJaWYgKGZzdGF0KGZkLCAmc3RidWYpIDwgMCkKCQllcnJvcihTWVNURU0sICJj
YW5ub3Qgc3RhdCBvcGVuIGhvbG9kZWNrIGZpbGUiKTsKCW1vZCAmPSBzdGJ1Zi5zdF9tb2Rl
OwkJLyogYWx3YXlzIG1vcmUgcmVzdHJpY3RpdmUgKi8KCWlmIChtb2QgPT0gKHN0YnVmLnN0
X21vZGUgJiAwNzc3KSkKCQlyZXR1cm4oLTEpOwkJLyogYWxyZWFkeSBzZXQgKi8KCQkJCQkv
KiBlbHNlIGNoYW5nZSBpdCAqLwoJaWYgKGZjaG1vZChmZCwgbW9kKSA8IDApIHsKCQllcnJv
cihXQVJOSU5HLCAiY2Fubm90IGNoYW5nZSBob2xvZGVjayBmaWxlIGFjY2VzcyBtb2RlIik7
CgkJcmV0dXJuKC0xKTsKCX0KCXJldHVybihzdGJ1Zi5zdF9tb2RlKTsJCS8qIHJldHVybiBv
cmlnaW5hbCBtb2RlICovCn0KCgppbml0cmhvbG8oKQkJCS8qIGdldCBvdXIgaG9sb2RlY2sg
cnVubmluZyAqLwp7CglleHRlcm4gaW50CWdsb2JhbF9wYWNrZXQoKTsKCXJlZ2lzdGVyIGlu
dAlpOwoJCQkJCQkvKiBjbG9zZSBob2xvZGVjayBvbiBleGVjKCkgKi8KCWZjbnRsKGhkbGlz
dFswXS0+ZmQsIEZfU0VURkQsIEZEX0NMT0VYRUMpOwoKCWlmIChvdXRkZXYgIT0gTlVMTCkJ
CQkvKiBvcGVuIG91dHB1dCBkZXZpY2UgKi8KCQlkaXNwX29wZW4ob3V0ZGV2KTsKCWVsc2Ug
aWYgKG5jcHJvY3MgPiAwKQkJCS8qIGVsc2UgdXNlIGdsb2JhbCByYXkgZmVlZCAqLwoJCWlu
aXRfZ2xvYmFsKCk7CgkJCQkJCS8qIHJlY29yZCBkaXNrIHNwYWNlIGxpbWl0ICovCglpZiAo
IXZkZWYoRElTS1NQQUNFKSkKCQltYXhkaXNrID0gKChvZmZfdCkxPDwoc2l6ZW9mKG9mZl90
KSo4LTIpKSAtIDEwMjQ7CgllbHNlCgkJbWF4ZGlzayA9IDEwMjQuKjEwMjQuKnZmbHQoRElT
S1NQQUNFKTsKCQkJCQkJLyogc2V0IHVwIG1lbW9yeSBjYWNoZSAqLwoJaWYgKG91dGRldiA9
PSBOVUxMKQoJCWhkY2FjaGVzaXplID0gMDsJCS8qIG1hbnVhbCBmbHVzaGluZyAqLwoJZWxz
ZSBpZiAodmRlZihDQUNIRSkpCgkJaGRjYWNoZXNpemUgPSAxMDI0LioxMDI0Lip2Zmx0KENB
Q0hFKTsKCQkJCQkJLyogb3BlbiByZXBvcnQgZmlsZSAqLwoJaWYgKHZkZWYoUkVQT1JUKSkg
ewoJCXJlZ2lzdGVyIGNoYXIJKnMgPSBzc2tpcDIodnZhbChSRVBPUlQpLCAxKTsKCQlpZiAo
KnMgJiYgZnJlb3BlbihzLCAiYSIsIHN0ZGVycikgPT0gTlVMTCkKCQkJcXVpdCgyKTsKCX0K
CQkJCQkJLyogbWFyayB0aGUgc3RhcnRpbmcgdGltZSAqLwoJc3RhcnR0aW1lID0gdGltZShO
VUxMKTsKCQkJCQkJLyogY29tcHV0ZSBlbmQgdGltZSAqLwoJaWYgKCF2ZGVmKFRJTUUpIHx8
IHZmbHQoVElNRSkgPD0gRlRJTlkpCgkJZW5kdGltZSA9IDA7CgllbHNlCgkJZW5kdGltZSA9
IHN0YXJ0dGltZSArIHZmbHQoVElNRSkqMzYwMC4gKyAuNTsKCQkJCQkJLyogc3RhcnQgcnRy
YWNlICovCglpZiAobmNwcm9jcyA+IDApIHsKCQl0b3RxbGVuID0gaSA9IHN0YXJ0X3J0cmFj
ZSgpOwoJCWlmIChpIDwgMSkKCQkJZXJyb3IoVVNFUiwgImNhbm5vdCBzdGFydCBydHJhY2Ug
cHJvY2VzcyhlcykiKTsKCQlpZiAodmRlZihSRVBPUlQpKSB7CQkvKiBtYWtlIGZpcnN0IHJl
cG9ydCAqLwoJCQlwcmludGFyZ3MocnRhcmdjLCBydGFyZ3YsIHN0ZGVycik7CgkJCXJlcG9y
dCgwKTsKCQl9CgkJCQkJCS8qIGFsbG9jYXRlIHBhY2tldHMgKi8KCQlmcmVlcGFja3MgPSAo
UEFDS0VUICopYm1hbGxvYyhpKnNpemVvZihQQUNLRVQpKTsKCQlpZiAoZnJlZXBhY2tzID09
IE5VTEwpCgkJCWdvdG8gbWVtZXJyOwoJCWZyZWVwYWNrc1stLWldLm5yID0gMDsKCQlmcmVl
cGFja3NbaV0ubmV4dCA9IE5VTEw7CgkJaWYgKCF2ZGVmKE9CU1RSVUNUSU9OUykgfHwgIXZi
b29sKE9CU1RSVUNUSU9OUykpIHsKCQkJZnJlZXBhY2tzW2ldLm9mZnNldCA9IChmbG9hdCAq
KWJtYWxsb2MoCgkJCQkJUlBBQ0tTSVoqc2l6ZW9mKGZsb2F0KSooaSsxKSApOwoJCQlpZiAo
ZnJlZXBhY2tzW2ldLm9mZnNldCA9PSBOVUxMKQoJCQkJZ290byBtZW1lcnI7CgkJfSBlbHNl
CgkJCWZyZWVwYWNrc1tpXS5vZmZzZXQgPSBOVUxMOwoJCXdoaWxlIChpLS0pIHsKCQkJZnJl
ZXBhY2tzW2ldLm5yID0gMDsKCQkJZnJlZXBhY2tzW2ldLm9mZnNldCA9IGZyZWVwYWNrc1tp
KzFdLm9mZnNldCA9PSBOVUxMID8KCQkJCQlOVUxMIDogZnJlZXBhY2tzW2krMV0ub2Zmc2V0
K1JQQUNLU0laIDsKCQkJZnJlZXBhY2tzW2ldLm5leHQgPSAmZnJlZXBhY2tzW2krMV07CgkJ
fQoJfQoJCQkJCS8qIHNldCB1cCBzaWduYWwgaGFuZGxpbmcgKi8KCXNpZ2RpZShTSUdJTlQs
ICJJbnRlcnJ1cHQiKTsKCXNpZ2RpZShTSUdIVVAsICJIYW5ndXAiKTsKCXNpZ2RpZShTSUdU
RVJNLCAiVGVybWluYXRlIik7CglzaWdkaWUoU0lHUElQRSwgIkJyb2tlbiBwaXBlIik7Cglz
aWdkaWUoU0lHQUxSTSwgIkFsYXJtIGNsb2NrIik7CiNpZmRlZglTSUdYQ1BVCglzaWdkaWUo
U0lHWENQVSwgIkNQVSBsaW1pdCBleGNlZWRlZCIpOwoJc2lnZGllKFNJR1hGU1osICJGaWxl
IHNpemUgZXhjZWVkZWQiKTsKI2VuZGlmCgkJCQkJLyogcHJvdGVjdCBob2xvZGVjayBmaWxl
ICovCglvcmlnX21vZGUgPSByZXNmbW9kZShoZGxpc3RbMF0tPmZkLCAobmNwcm9jcz4wKSAm
IChmb3JjZT49MCkgPyAwIDogMDQ0NCk7CglyZXR1cm47Cm1lbWVycjoKCWVycm9yKFNZU1RF
TSwgIm91dCBvZiBtZW1vcnkgaW4gaW5pdHJob2xvIik7Cn0KCgpyaG9sbygpCQkJCS8qIGhv
bG9kZWNrIG1haW4gbG9vcCAqLwp7CglzdGF0aWMgbG9uZwluZXh0ZnJhZ3dhcm4gPSAxMDAq
KDFMPDwyMCk7CglzdGF0aWMgaW50CWlkbGUgPSAwOwoJUEFDS0VUCSpwbCA9IE5VTEwsICpw
bGVuZDsKCW9mZl90CWZzaXo7CglpbnQJcGtzaXo7CglyZWdpc3RlciBQQUNLRVQJKnA7Cgl0
aW1lX3QJdDsKCQkJCQkvKiBjaGVjayBkaXNwbGF5ICovCglpZiAobnByb2NzIDw9IDApCgkJ
aWRsZSA9IDE7CglpZiAob3V0ZGV2ICE9IE5VTEwpIHsKCQlpZiAoIWRpc3BfY2hlY2soaWRs
ZSkpCgkJCXJldHVybigwKTsJLyogcXVpdCByZXF1ZXN0ICovCgkJaWYgKG5wcm9jcyA8PSAw
KQoJCQlyZXR1cm4oMSk7Cgl9IGVsc2UgaWYgKGlkbGUpCgkJcmV0dXJuKDApOwkJLyogYWxs
IGRvbmUgKi8KCWZzaXogPSBoZGZpbGVuKGhkbGlzdFswXS0+ZmQpOwkvKiBjaGVjayBmaWxl
IHNpemUgKi8KCWlmIChtYXhkaXNrID4gMCAmJiBmc2l6ID49IG1heGRpc2spIHsKCQllcnJv
cihXQVJOSU5HLCAiZmlsZSBsaW1pdCBleGNlZWRlZCIpOwoJCWRvbmVfcnRyYWNlKCk7CgkJ
cmV0dXJuKDEpOwkvKiBjb21lcyBiYWNrICovCgl9CiNpZiBGUkFHV0FSTgoJaWYgKGZzaXog
Pj0gbmV4dGZyYWd3YXJuICYmCgkJKGZzaXotaGRmaWx1c2UoaGRsaXN0WzBdLT5mZCwwKSkv
KGZzaXovMTAwKSA+IEZSQUdXQVJOKSB7CgkJc3ByaW50ZihlcnJtc2csICJob2xvZGVjayBm
aWxlIGZyYWdtZW50YXRpb24gaXMgJS4wZiUlIiwKCQkJCTEwMC4qKGZzaXotaGRmaWx1c2Uo
aGRsaXN0WzBdLT5mZCwxKSkvZnNpeik7CgkJZXJyb3IoV0FSTklORywgZXJybXNnKTsKCQlu
ZXh0ZnJhZ3dhcm4gPSBmc2l6ICsgKGZzaXo+PjIpOwkvKiBkZWNlbnQgaW50ZXJ2YWwgKi8K
CX0KI2VuZGlmCgl0ID0gdGltZShOVUxMKTsJCQkvKiBjaGVjayB0aW1lICovCglpZiAoZW5k
dGltZSA+IDAgJiYgdCA+PSBlbmR0aW1lKSB7CgkJZXJyb3IoV0FSTklORywgInRpbWUgbGlt
aXQgZXhjZWVkZWQiKTsKCQlkb25lX3J0cmFjZSgpOwoJCXJldHVybigxKTsJLyogY29tZXMg
YmFjayAqLwoJfQoJaWYgKHJlcG9ydHRpbWUgPiAwICYmIHQgPj0gcmVwb3J0dGltZSkKCQly
ZXBvcnQodCk7CgkJCQkJLyogZmlndXJlIG91dCBnb29kIHBhY2tldCBzaXplICovCglwa3Np
eiA9IFJQQUNLU0laOwojaWYgTUFYUVRJTUUKCWlmICghY2h1bmt5Y21wKSB7CgkJcGtzaXog
PSBucmF5c2RvbmUqTUFYUVRJTUUvKHRvdHFsZW4qKHQgLSBzdGFydHRpbWUgKyAxTCkpOwoJ
CWlmIChwa3NpeiA8IDEpIHBrc2l6ID0gMTsKCQllbHNlIGlmIChwa3NpeiA+IFJQQUNLU0la
KSBwa3NpeiA9IFJQQUNLU0laOwoJfQojZW5kaWYKCWlkbGUgPSAwOwkJCS8qIGdldCBwYWNr
ZXRzIHRvIHByb2Nlc3MgKi8KCXdoaWxlIChmcmVlcGFja3MgIT0gTlVMTCkgewoJCXAgPSBm
cmVlcGFja3M7IGZyZWVwYWNrcyA9IHAtPm5leHQ7IHAtPm5leHQgPSBOVUxMOwoJCWlmICgh
bmV4dF9wYWNrZXQocCwgcGtzaXopKSB7CgkJCXAtPm5leHQgPSBmcmVlcGFja3M7IGZyZWVw
YWNrcyA9IHA7CgkJCWlkbGUgPSAxOwoJCQlicmVhazsKCQl9CgkJaWYgKHBsID09IE5VTEwp
IHBsID0gcDsKCQllbHNlIHBsZW5kLT5uZXh0ID0gcDsKCQlwbGVuZCA9IHA7Cgl9CgkJCQkJ
LyogcHJvY2VzcyBwYWNrZXRzICovCglkb25lX3BhY2tldHMoZG9fcGFja2V0cyhwbCkpOwoJ
cmV0dXJuKDEpOwkJCS8qIGFuZCBjb250aW51ZSAqLwp9CgoKc2V0ZGVmYXVsdHMoZ3ApCQkJ
Lyogc2V0IGRlZmF1bHQgdmFsdWVzICovCnJlZ2lzdGVyIEhER1JJRAkqZ3A7CnsKCWV4dGVy
biBjaGFyCSphdG9zKCk7CglyZWdpc3RlciBpbnQJaTsKCWludAluOwoJZG91YmxlCWxlblsz
XSwgZDsKCWNoYXIJYnVmWzY0XTsKCglpZiAoIXZkZWYoU0VDVElPTikpIHsKCQlzcHJpbnRm
KGVycm1zZywgIiVzIG11c3QgYmUgZGVmaW5lZCIsIHZuYW0oU0VDVElPTikpOwoJCWVycm9y
KFVTRVIsIGVycm1zZyk7Cgl9CglpZiAoIXZkZWYoT0NUUkVFKSkgewoJCWlmICgodnZhbChP
Q1RSRUUpID0gYm1hbGxvYyhzdHJsZW4oZnJvb3QpKzUpKSA9PSBOVUxMKQoJCQllcnJvcihT
WVNURU0sICJvdXQgb2YgbWVtb3J5Iik7CgkJc3ByaW50Zih2dmFsKE9DVFJFRSksICIlcy5v
Y3QiLCBmcm9vdCk7CgkJdmRlZihPQ1RSRUUpKys7Cgl9CglpZiAoIXZkZWYoVkRJU1QpKSB7
CgkJdnZhbChWRElTVCkgPSAiRiI7CgkJdmRlZihWRElTVCkrKzsKCX0KCQkJCS8qIGFwcGVu
ZCByZW5kZXJpbmcgb3B0aW9ucyAqLwoJaWYgKHZkZWYoUkVOREVSKSkKCQlydGFyZ2MgKz0g
d29yZHN0cmluZyhydGFyZ3YrcnRhcmdjLCB2dmFsKFJFTkRFUikpOwoJCglpZiAoZ3AgPT0g
TlVMTCkJCS8qIGFscmVhZHkgaW5pdGlhbGl6ZWQ/ICovCgkJcmV0dXJuOwoJCQkJLyogc2V0
IGdyaWQgcGFyYW1ldGVycyAqLwoJZm9yIChuID0gMDsgbiA8IHZkZWYoU0VDVElPTik7IG4r
KywgZ3ArKykgewoJCWdwLT5ncmlkWzBdID0gZ3AtPmdyaWRbMV0gPSBncC0+Z3JpZFsyXSA9
IDA7CgkJaWYgKHNzY2FuZihudmFsdWUoU0VDVElPTiwgbiksCgkJIiVsZiAlbGYgJWxmICVs
ZiAlbGYgJWxmICVsZiAlbGYgJWxmICVsZiAlbGYgJWxmICVoZCAlaGQgJWhkIiwKCQkJCSZn
cC0+b3JpZ1swXSwgJmdwLT5vcmlnWzFdLCAmZ3AtPm9yaWdbMl0sCgkJCQkmZ3AtPnh2WzBd
WzBdLCAmZ3AtPnh2WzBdWzFdLCAmZ3AtPnh2WzBdWzJdLAoJCQkJJmdwLT54dlsxXVswXSwg
JmdwLT54dlsxXVsxXSwgJmdwLT54dlsxXVsyXSwKCQkJCSZncC0+eHZbMl1bMF0sICZncC0+
eHZbMl1bMV0sICZncC0+eHZbMl1bMl0sCgkJCQkmZ3AtPmdyaWRbMF0sICZncC0+Z3JpZFsx
XSwgJmdwLT5ncmlkWzJdKSA8IDEyKQoJCQliYWR2YWx1ZShTRUNUSU9OKTsKCQlmb3IgKGkg
PSAwOyBpIDwgMzsgaSsrKQoJCQlsZW5baV0gPSBWTEVOKGdwLT54dltpXSk7CgkJaWYgKCF2
ZGVmKEdSSUQpKSB7CgkJCWQgPSAyLzJlNSooIGxlblswXSpsZW5bMF0qKGxlblsxXSpsZW5b
MV0gKwoJCQkJCWxlblsyXSpsZW5bMl0gKyA0KmxlblsxXSpsZW5bMl0pCgkJCQkrIGxlblsx
XSpsZW5bMV0qbGVuWzJdKihsZW5bMl0gKyA0KmxlblswXSkKCQkJCSsgNCpsZW5bMF0qbGVu
WzFdKmxlblsyXSpsZW5bMl0gKTsKCQkJZCA9IHNxcnQoc3FydChkKSk7CgkJfSBlbHNlIGlm
ICgoZCA9IHZmbHQoR1JJRCkpIDw9IEZUSU5ZKQoJCQliYWR2YWx1ZShHUklEKTsKCQlmb3Ig
KGkgPSAwOyBpIDwgMzsgaSsrKQoJCQlpZiAoZ3AtPmdyaWRbaV0gPD0gMCkKCQkJCWdwLT5n
cmlkW2ldID0gbGVuW2ldL2QgKyAoMS4tRlRJTlkpOwoJfQp9CgoKY3JlYXRob2xvKGdwKQkJ
CS8qIGNyZWF0ZSBhIGhvbG9kZWNrIG91dHB1dCBmaWxlICovCkhER1JJRAkqZ3A7CnsKCWV4
dGVybiBjaGFyCVZlcnNpb25JRFtdOwoJaW50MzIJbGFzdGxvYywgbmV4dGxvYzsKCWludAlu
OwoJaW50CWZkOwoJRklMRQkqZnA7CgkJCQkJLyogb3BlbiAmIHRydW5jYXRlIGZpbGUgKi8K
CWlmICgoZnAgPSBmb3BlbihoZGtmaWxlLCAidysiKSkgPT0gTlVMTCkgewoJCXNwcmludGYo
ZXJybXNnLCAiY2Fubm90IG9wZW4gXCIlc1wiIGZvciB3cml0aW5nIiwgaGRrZmlsZSk7CgkJ
ZXJyb3IoU1lTVEVNLCBlcnJtc2cpOwoJfQoJCQkJCS8qIHdyaXRlIGluZm9ybWF0aW9uIGhl
YWRlciAqLwoJbmV3aGVhZGVyKCJSQURJQU5DRSIsIGZwKTsKCWZwcmludGYoZnAsICJTT0ZU
V0FSRT0gJXNcbiIsIFZlcnNpb25JRCk7CglwcmludHZhcnMoZnApOwoJZnB1dGZvcm1hdChI
T0xPRk1ULCBmcCk7CglmcHV0YygnXG4nLCBmcCk7CglwdXR3KEhPTE9NQUdJQywgZnApOwkJ
LyogcHV0IG1hZ2ljIG51bWJlciAqLwoJaWYoIChmZCA9IGR1cChmaWxlbm8oZnApKSkgPCAw
ICkgewoJCXNwcmludGYoZXJybXNnLCAiY2Fubm90IGR1cCBcIiVzXCIgZm9yIHdyaXRpbmci
LCBoZGtmaWxlKTsKCQllcnJvcihTWVNURU0sIGVycm1zZyk7Cgl9CglpZiggRU9GPT1mY2xv
c2UoZnApICkgewkJLyogZmx1c2ggYW5kIGNsb3NlIHN0ZGlvIHN0cmVhbSAqLwoJCXNwcmlu
dGYoZXJybXNnLCAiY2Fubm90IGZjbG9zZSBcIiVzXCIgZm9yIHdyaXRpbmciLCBoZGtmaWxl
KTsKCQllcnJvcihTWVNURU0sIGVycm1zZyk7Cgl9CglpZiggKGxhc3Rsb2MgPSBsc2Vlayhm
ZCwgKG9mZl90KTAsIDIpKSA9PSAob2ZmX3QpLTEgKSB7CgkJc3ByaW50ZihlcnJtc2csICJj
YW5ub3QgbHNlZWsgXCIlc1wiIiwgaGRrZmlsZSk7CgkJZXJyb3IoU1lTVEVNLCBlcnJtc2cp
OwoJfQoJZm9yIChuID0gdmRlZihTRUNUSU9OKTsgbi0tOyBncCsrKSB7CS8qIGluaXRpYWxp
emUgZWFjaCBzZWN0aW9uICovCgkJbmV4dGxvYyA9IDBMOwoJCXdyaXRlKGZkLCAoY2hhciAq
KSZuZXh0bG9jLCBzaXplb2YobmV4dGxvYykpOwoJCWhkaW5pdChmZCwgZ3ApOwkJCS8qIHdy
aXRlcyBiZWFtIGluZGV4ICovCgkJaWYgKCFuKQoJCQlicmVhazsKCQluZXh0bG9jID0gaGRm
aWxlbihmZCk7CQkvKiB3cml0ZSBzZWN0aW9uIHBvaW50ZXIgKi8KCQlpZiAobHNlZWsoZmQs
IChvZmZfdClsYXN0bG9jLCAwKSA9PSAob2ZmX3QpLTEgKQoJCQllcnJvcihTWVNURU0sCgkJ
CQkiY2Fubm90IHNlZWsgb24gaG9sb2RlY2sgZmlsZSBpbiBjcmVhdGhvbG8iKTsKCQl3cml0
ZShmZCwgKGNoYXIgKikmbmV4dGxvYywgc2l6ZW9mKG5leHRsb2MpKTsKCQlsc2VlayhmZCwg
KG9mZl90KShsYXN0bG9jPW5leHRsb2MpLCAwKTsKCX0KfQoKCmludApoZWFkbGluZShzKQkJ
CS8qIHByb2Nlc3MgaW5mb3JtYXRpb24gaGVhZGVyIGxpbmUgKi8KY2hhcgkqczsKewoJZXh0
ZXJuIGNoYXIJRk1UU1RSW107CglyZWdpc3RlciBjaGFyCSpjcDsKCWNoYXIJZm10WzMyXTsK
CglpZiAoZm9ybWF0dmFsKGZtdCwgcykpIHsKCQlpZiAoc3RyY21wKGZtdCwgSE9MT0ZNVCkp
IHsKCQkJc3ByaW50ZihlcnJtc2csICIlcyBmaWxlIFwiJXNcIiBoYXMgJXMlcyIsCgkJCQkJ
SE9MT0ZNVCwgaGRrZmlsZSwgRk1UU1RSLCBmbXQpOwoJCQllcnJvcihVU0VSLCBlcnJtc2cp
OwoJCX0KCQlyZXR1cm4oMCk7Cgl9Cglmb3IgKGNwID0gczsgKmNwOyBjcCsrKQkJLyogdGFr
ZSBvZmYgYW55IGNvbW1lbnRzICovCgkJaWYgKCpjcCA9PSAnIycpIHsKCQkJKmNwID0gJ1ww
JzsKCQkJYnJlYWs7CgkJfQoJc2V0dmFyaWFibGUocywgbWF0Y2h2YXIpOwkvKiBkb24ndCBm
bGFnIGVycm9ycyAqLwoJcmV0dXJuKDApOwp9CgoKbG9hZGhvbG8oKQkJCS8qIHN0YXJ0IGxv
YWRpbmcgYSBob2xvZGVjayBmcm9tIGZuYW1lICovCnsKCUZJTEUJKmZwOwoJaW50CWZkOwoJ
aW50CW47CglpbnQzMgluZXh0bG9jOwoJCglpZiAoKG5jcHJvY3MgPiAwKSAmIChmb3JjZSA+
PSAwKSkKCQlmcCA9IGZvcGVuKGhka2ZpbGUsICJyKyIpOwoJZWxzZQoJCWZwID0gTlVMTDsK
CWlmIChmcCA9PSBOVUxMKSB7CgkJaWYgKChmcCA9IGZvcGVuKGhka2ZpbGUsICJyIikpID09
IE5VTEwpIHsKCQkJc3ByaW50ZihlcnJtc2csICJjYW5ub3Qgb3BlbiBcIiVzXCIiLCBoZGtm
aWxlKTsKCQkJZXJyb3IoU1lTVEVNLCBlcnJtc2cpOwoJCX0KCQlpZiAobmNwcm9jcyA+IDAp
IHsKCQkJc3ByaW50ZihlcnJtc2csCgkJCSJcIiVzXCIgb3BlbmVkIHJlYWQtb25seTsgbmV3
IHJheXMgd2lsbCBiZSBkaXNjYXJkZWQiLAoJCQkJCWhka2ZpbGUpOwoJCQllcnJvcihXQVJO
SU5HLCBlcnJtc2cpOwoJCQlmb3JjZSA9IC0xOwoJCX0KCX0KCQkJCQkvKiBsb2FkIHZhcmlh
YmxlcyBmcm9tIGhlYWRlciAqLwoJZ2V0aGVhZGVyKGZwLCBoZWFkbGluZSwgTlVMTCk7CgkJ
CQkJLyogY2hlY2sgbWFnaWMgbnVtYmVyICovCglpZiAoZ2V0dyhmcCkgIT0gSE9MT01BR0lD
KSB7CgkJc3ByaW50ZihlcnJtc2csICJiYWQgbWFnaWMgbnVtYmVyIGluIGhvbG9kZWNrIGZp
bGUgXCIlc1wiIiwKCQkJCWhka2ZpbGUpOwoJCWVycm9yKFVTRVIsIGVycm1zZyk7Cgl9Cglu
ZXh0bG9jID0gZnRlbGwoZnApOwkJCS8qIGdldCBzdGRpbyBwb3NpdGlvbiAqLwoJZmQgPSBk
dXAoZmlsZW5vKGZwKSk7CglmY2xvc2UoZnApOwkJCQkvKiBkb25lIHdpdGggc3RkaW8gKi8K
CWZvciAobiA9IDA7IG5leHRsb2MgPiAwTDsgbisrKSB7CS8qIGluaXRpYWxpemUgZWFjaCBz
ZWN0aW9uICovCgkJbHNlZWsoZmQsIChvZmZfdCluZXh0bG9jLCAwKTsKCQlyZWFkKGZkLCAo
Y2hhciAqKSZuZXh0bG9jLCBzaXplb2YobmV4dGxvYykpOwoJCWhkaW5pdChmZCwgTlVMTCk7
Cgl9CglpZiAobiAhPSB2ZGVmKFNFQ1RJT04pKSB7CgkJc3ByaW50ZihlcnJtc2csICJudW1i
ZXIgb2Ygc2VjdGlvbnMgZG9lcyBub3QgbWF0Y2ggJXMgc2V0dGluZyIsCgkJCQl2bmFtKFNF
Q1RJT04pKTsKCQllcnJvcihXQVJOSU5HLCBlcnJtc2cpOwoJfQp9CgoKZG9uZV9wYWNrZXRz
KHBsKQkJLyogaGFuZGxlIGZpbmlzaGVkIHBhY2tldHMgKi8KUEFDS0VUCSpwbDsKewoJc3Rh
dGljIGludAluMmZsdXNoID0gMDsKCXJlZ2lzdGVyIFBBQ0tFVAkqcDsKCgl3aGlsZSAocGwg
IT0gTlVMTCkgewoJCXAgPSBwbDsgcGwgPSBwLT5uZXh0OyBwLT5uZXh0ID0gTlVMTDsKCQlp
ZiAocC0+bnIgPiAwKSB7CQkvKiBhZGQgdG8gaG9sb2RlY2sgKi8KCQkJbWVtY3B5KCAodm9p
ZCAqKWhkbmV3cmF5cyhoZGxpc3RbcC0+aGRdLHAtPmJpLHAtPm5yKSwKCQkJCSh2b2lkICop
cC0+cmEsCgkJCQlwLT5ucipzaXplb2YoUkFZVkFMKSk7CgkJCWlmIChvdXRkZXYgIT0gTlVM
TCkJLyogZGlzcGxheSBpdCAqLwoJCQkJZGlzcF9wYWNrZXQoKFBBQ0tIRUFEICopcCk7CgkJ
CWlmIChoZGNhY2hlc2l6ZSA8PSAwKQoJCQkJbjJmbHVzaCsrOwoJCQlucmF5c2RvbmUgKz0g
cC0+bnI7CgkJCW5wYWNrc2RvbmUrKzsKCQkJcC0+bnIgPSAwOwoJCX0KCQlwLT5uZXh0ID0g
ZnJlZXBhY2tzOwkJLyogcHVzaCBvbnRvIGZyZWUgbGlzdCAqLwoJCWZyZWVwYWNrcyA9IHA7
Cgl9CglpZiAobjJmbHVzaCA+PSBSVEZMVVNIKSB7CgkJaWYgKG91dGRldiAhPSBOVUxMKQoJ
CQloZHN5bmMoTlVMTCwgMSk7CgkJZWxzZQoJCQloZGZsdXNoKE5VTEwpOwoJCW4yZmx1c2gg
PSAwOwoJfQp9CgoKcm9vdG5hbWUocm4sIGZuKQkJLyogcmVtb3ZlIHRhaWwgZnJvbSBlbmQg
b2YgZm4gKi8KcmVnaXN0ZXIgY2hhcgkqcm4sICpmbjsKewoJY2hhcgkqdHAsICpkcDsKCglm
b3IgKHRwID0gTlVMTCwgZHAgPSBybjsgKCpybiA9ICpmbisrKTsgcm4rKykgewoJCWlmICgq
cm4gPT0gJy8nKQoJCQlkcCA9IHJuOwoJCWVsc2UgaWYgKCpybiA9PSAnLicpCgkJCXRwID0g
cm47Cgl9CglpZiAodHAgIT0gTlVMTCAmJiB0cCA+IGRwKQoJCSp0cCA9ICdcMCc7Cn0KCgpi
YWR2YWx1ZSh2YykJCQkvKiByZXBvcnQgYmFkIHZhcmlhYmxlIHZhbHVlIGFuZCBleGl0ICov
CmludAl2YzsKewoJc3ByaW50ZihlcnJtc2csICJiYWQgdmFsdWUgZm9yIHZhcmlhYmxlICcl
cyciLCB2bmFtKHZjKSk7CgllcnJvcihVU0VSLCBlcnJtc2cpOwp9CgoKdm9pZAplcHV0cyhz
KQkJCS8qIHB1dCBlcnJvciBtZXNzYWdlIHRvIHN0ZGVyciAqLwpyZWdpc3RlciBjaGFyICAq
czsKewoJc3RhdGljIGludCAgbWlkbGluZSA9IDA7CgoJaWYgKCEqcykKCQlyZXR1cm47Cglp
ZiAoIW1pZGxpbmUrKykgewkvKiBwcmVwZW5kIGxpbmUgd2l0aCBwcm9ncmFtIG5hbWUgKi8K
CQlmcHV0cyhwcm9nbmFtZSwgc3RkZXJyKTsKCQlmcHV0cygiOiAiLCBzdGRlcnIpOwoJfQoJ
ZnB1dHMocywgc3RkZXJyKTsKCWlmIChzW3N0cmxlbihzKS0xXSA9PSAnXG4nKSB7CgkJZmZs
dXNoKHN0ZGVycik7CgkJbWlkbGluZSA9IDA7Cgl9Cn0KCgp2b2lkCnF1aXQoZWMpCQkJLyog
ZXhpdCBwcm9ncmFtIGdyYWNlZnVsbHkgKi8KaW50CWVjOwp7CglpbnQJc3RhdHVzID0gMDsK
CglpZiAoaGRsaXN0WzBdICE9IE5VTEwpIHsJLyogY2xvc2UgaG9sb2RlY2sgKi8KCQlpZiAo
bnByb2NzID4gMCkKCQkJc3RhdHVzID0gZG9uZV9ydHJhY2UoKTsJCS8qIGNhbGxzIGhkc3lu
YygpICovCgkJaWYgKChuY3Byb2NzID4gMCkgJiAoZm9yY2UgPj0gMCkgJiYgdmRlZihSRVBP
UlQpKSB7CgkJCW9mZl90CWZzaXosIGZ1c2U7CgkJCWZzaXogPSBoZGZpbGVuKGhkbGlzdFsw
XS0+ZmQpOwoJCQlmdXNlID0gaGRmaWx1c2UoaGRsaXN0WzBdLT5mZCwgMSk7CgkJCWZwcmlu
dGYoc3RkZXJyLAoJCQkiJXM6ICUuMWYgTWJ5dGUgaG9sb2RlY2sgZmlsZSwgJS4xZiUlIGZy
YWdtZW50YXRpb25cbiIsCgkJCQkJaGRrZmlsZSwgZnNpei8oMTAyNC4qMTAyNC4pLAoJCQkJ
CTEwMC4qKGZzaXotZnVzZSkvZnNpeik7CgkJfQoJfQoJaWYgKG9yaWdfbW9kZSA+PSAwKQkJ
LyogcmVzZXQgaG9sb2RlY2sgYWNjZXNzIG1vZGUgKi8KCQlmY2htb2QoaGRsaXN0WzBdLT5m
ZCwgb3JpZ19tb2RlKTsKCWlmIChvdXRkZXYgIT0gTlVMTCkJCS8qIGNsb3NlIGRpc3BsYXkg
Ki8KCQlkaXNwX2Nsb3NlKCk7CglleGl0KGVjID8gZWMgOiBzdGF0dXMpOwkJLyogZXhpdCAq
Lwp9Cg==
--------------020606090706070300020809--


From radiance-general@radiance-online.org  Sun Oct 19 19:14:00 2003
From: radiance-general@radiance-online.org (Marcus Jacobs)
Date: Sun, 19 Oct 2003 18:14:00 +0000
Subject: [Radiance-general] Focal Length
Message-ID: <BAY2-F24bh4gPqvi4jq0000ec33@hotmail.com>

Dear Group

I have a question concerning the simulation of varous cameras in Radiance.

>From the book, "Rendering with Radiance", in order to simulate a particular 
focal length on 35mm photography, the following formulas should be emplyed:

h35 = 114.6*atan(17/f)
v35 = 114.6*atan(11.5/f)

where h35 and v35 are the horizonal and vertical view angle respectively (in 
the book, they are actually switched but I think this is an error).

Earlier this year, someone sent a question to this group about the same 
subject and Greg responded with the following:

"Focal length is specified with the -vh and -vv options of rpict, which
also controls the image aspect ratio.  Knowing one from the other
requires a specific image (film) size and format.  For 35mm film, the
formula is:

focal_length = 35/2 / tan(vv_angle/2)

Where vv_angle is the vertical view angle for a landscape picture.  The
horizontal angle is then given by:

hh_angle = 2 * atan(vv_angle/2 * 3/2)

To check your calcs, a 50mm lens in 35mm photography is equivalent to a
Radiance view specification of:

-vh 49.6 -vv 35.3"

What I have found is that these are different formulas that produce 
different results. Could someone tell me which is correct? Also, could 
someone give a formula(s) for producing views in other film formats (i.e. 6 
x 7, 6 x 4.5, etc.).

Thanks

Marcus

_________________________________________________________________
Enjoy MSN 8 patented spam control and more with MSN 8 Dial-up Internet 
Service.  Try it FREE for one month!   http://join.msn.com/?page=dept/dialup


From radiance-general@radiance-online.org  Sun Oct 19 19:41:08 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Sun, 19 Oct 2003 11:41:08 -0700
Subject: [Radiance-general] Focal Length
In-Reply-To: <BAY2-F24bh4gPqvi4jq0000ec33@hotmail.com>
Message-ID: <CE009EF0-0263-11D8-A575-000A956D40C8@lmi.net>

Hi Marcus,

I am really sorry -- in my earlier (April) response, I was going from 
memory, which is something I should avoid these days...  The formula I 
gave you was based on the assumption that the height of a 35mm frame is 
35mm, which is just plain wrong.  35mm refers to the total width of the 
film, including the registration (sprocket) holes.  The actual size of 
the imageable frame is 24x36mm.  I found the following excellent page 
explaining focal lengths and how to use them, which explains everything:

	http://www.panoramafactory.com/equiv35/equiv35.html

The formula you fixed from the book:

	h35 = 114.6*atan(17/f)
	v35 = 114.6*atan(11.5/f)

is close to correct for a 35mm landscape frame.  It should actually be:

	h35 = 2*180/PI*atan(36/2/f)
	v35 = 2*180/PI*atan(24/2/f)

The values of 17 and 11.5mm may have been derived from measurements of 
an actual slide frame, which were probably slightly smaller than the 
official size.  The answer is pretty close either way.

To get the view angles for other focal lengths, simply substitute the 
target film dimensions for the 36 and 24mm values in the formmula 
above.  You'll have to verify these sizes yourself.  (I'm not sure for 
example if a 4x5 transparency has a 40x50mm imaging area or something 
smaller.)

I hope this helps this time.
-Greg


From radiance-general@radiance-online.org  Mon Oct 20 04:42:00 2003
From: radiance-general@radiance-online.org (Phillip Greenup)
Date: Mon, 20 Oct 2003 13:42:00 +1000
Subject: [Radiance-general] Re: sky definition part 2
Message-ID: <sf93e697.012@sydnws04>

Hi all,

The new CIE Standard General Sky is based on the Standard Sky Luminance Distribution of Kittler, Perez and Darula (1997).  I created a cal file and technique to model these skies a while ago, and have been using it wherever possible, as I believe it provides more representative sky models than the old, limited, CIE standards.  The cal file is not ideal, as it takes a few calculations and a bit of stuffing around to create the models.  the difficulty is in setting the relative intensities of sky and sun.  but, it does the trick.

If anyone wants it, i can send it and a document describing its use to you.  Otherwise, can i upload it somewhere?
Regards,
Phil.

_______________________________
Phillip Greenup
Specialist Engineer
Arup Australasia
Level 10, 201 Kent St
Sydney NSW 2000
Ph (02) 9320 9426
Fax (02) 9320 9321


>>> karencarrier@cox.net 19/10/2003 3:55:48 am >>>
Thank you Francesco for summarizing so nicely how gensky generates skies. I
agree that it would be useful to have a method that allows one to pick sky
models via .cal files

This might be particularly interesting since the CIE recently approved a new
"Standard General Sky" Model that replaces all previous CIE Overcast and
Clear Standard Sky definitions. It is generalized from the old CIE Clear Sky
formula (Kittler) and consists of 15 sky types of various luminance
gradations and scattering characteristics - one of them being the new
Standard Overcast Sky, and two others representing the new Standard Clear
Skies (one for low luminance turbidity, one for polluted atmospheres).

I have listed a few links below, if anyone is interested .....

http://www.cie.co.at/publ/abst/s011.html announcement of new 2003 standard
http://www.cie-usnc.org/images/CIE%20DS011_2.pdf copy of the draft standard
(I could not find the final version online - if anyone does please let me
know)
http://www.esim.ca/2002/documents/Proceedings/other2.pdf presentation by
Kittler with information on General Sky Standard (Esim 2002)


- Karen

_________________
Karen Carrier
M.ARCH
UC Berkeley


_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org 
http://www.radiance-online.org/mailman/listinfo/radiance-general



From radiance-general@radiance-online.org  Mon Oct 20 05:02:06 2003
From: radiance-general@radiance-online.org (Zack Rogers)
Date: Sun, 19 Oct 2003 22:02:06 -0600
Subject: [Radiance-general] Re: sky definition part 2
Message-ID: <3F935E3E.8060402@archenergy.com>

Slight correction to my last post.  I don't think solar efficacy is a 
function of eccentricity, only the extraterrestrial solar irradiation 
and illumination constants, since a vacuum does not change the efficacy 
of radiation.  But a change in the distance to the sun does change 
extraterrestrial irradiance and illuminance.  Is this correct?

-- 
Zack Rogers
Staff Engineer
Architectural Energy Corporation
2540 Frontier Avenue, Suite 201
Boulder, CO 80301 USA

tel (303)444-4149 ext.235
fax (303)444-4304
www.archenergy.com



From radiance-general@radiance-online.org  Mon Oct 20 06:08:31 2003
From: radiance-general@radiance-online.org (Peter Apian-Bennewitz)
Date: Mon, 20 Oct 2003 07:08:31 +0200
Subject: file uploads / was: Re: [Radiance-general] Re: sky definition part
 2
In-Reply-To: <sf93e697.012@sydnws04>
References: <sf93e697.012@sydnws04>
Message-ID: <3F936DCF.3010406@pab-opto.de>

Phillip Greenup wrote:

>...
>If anyone wants it, i can send it and a document describing its use to you.  Otherwise, can i upload it somewhere?
>
Sent it to  techsup@radiance-online.org  and I put it on the webpage, if 
you like.
An html page describing the contents would be useful, - pack everything 
in one tar or zip file, so I just have to unpack it into a directory and 
add a link from the main pages.
-Peter


-- 
 pab-opto, Freiburg, Germany, www.pab-opto.de



From radiance-general@radiance-online.org  Mon Oct 20 16:46:58 2003
From: radiance-general@radiance-online.org (Francesco Anselmo)
Date: Mon, 20 Oct 2003 17:46:58 +0200
Subject: [Radiance-general] Re: sky definition part 2
In-Reply-To: <sf93e697.012@sydnws04>
References: <sf93e697.012@sydnws04>
Message-ID: <200310201746.58541.anselmo@dream.unipa.it>

Hi Phillip and all!

> The cal file is not ideal, as it takes a few
> calculations and a bit of stuffing around to create the models.  the
> difficulty is in setting the relative intensities of sky and sun.  but, it
> does the trick.

That's the power of Radiance: 
if you give me a proper .cal file then I'll solve my problem! ;-)

Thanks for sharing it!

-- 
Francesco 


From radiance-general@radiance-online.org  Mon Oct 20 19:01:51 2003
From: radiance-general@radiance-online.org (Arvinder Dang)
Date: Mon, 20 Oct 2003 11:01:51 -0700 (PDT)
Subject: [Radiance-general] aiming failure for sun
Message-ID: <20031020180151.4352.qmail@web41604.mail.yahoo.com>

Hello Everybody, 

I am doing my work plane level grid calculations for a
simple room with a light shelf configuration and this
time am running into a new warning message. I have
specified the gensky and this time included both –B
and –R in my sky.rad file. When I do an r-trace I get
a message 
Warning: aiming failure for light source “sun”.
However it proceeds to do the run and gives me the
output, which seems correct. (Superlite gives me
similar results). What is this warning message due to?
Is it similar to the warning message, which I got
initially when I was doing only sky –warning no light
source found (Thanks Rob for your initial response) 
I read in the archives and found that the error may
arise if one is using odd shaped polygons /triangles
and illum however my geometry consists of simple
rectilinear forms and I am not using any secondary
sources. Could anyone explain the reason for this
warning message? 

Thank You 

Arvinder 



__________________________________
Do you Yahoo!?
The New Yahoo! Shopping - with improved product search
http://shopping.yahoo.com

From radiance-general@radiance-online.org  Tue Oct 21 16:13:31 2003
From: radiance-general@radiance-online.org (Giulio Antonutto)
Date: Tue, 21 Oct 2003 16:13:31 +0100
Subject: [Radiance-general] surface normal
Message-ID: <DC0CAEEA090E984C911D3B85B16C3F90302E8B@l-gnts05>

hi everybody!
I am playing with textfunc and mixfunc... just to create some changing
color-normal materials....
what I would like to do is to change the color according to the perturbated
normal ...
to do that I think to use the variable RdotP (perturbated dot product)....
but radiance doesn't seem to recognize it... (probably it works only with
brtdf?)
of course if I use Rdot... the normal is always the same and
deformation-color are not changing together.... 


I would like to do something like:

id1 mixfunc id2
4 idA idB f(RdotP) .
0
0

where idA and idB have same deformations but different color-specularity and
f(RdotP) is a function of Rdot-Perturbated

any idea?

thanks
giulio

___________________________________________________________________
Electronic mail messages entering and leaving Arup business
systems are scanned for acceptability of content and viruses.

From radiance-general@radiance-online.org  Tue Oct 21 17:05:10 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Tue, 21 Oct 2003 09:05:10 -0700
Subject: [Radiance-general] Re: surface normal
In-Reply-To: <DC0CAEEA090E984C911D3B85B16C3F90302E8B@l-gnts05>
Message-ID: <5893DBC2-03E0-11D8-BCD5-000A956D40C8@lmi.net>

Hi Giulio,

You can get the effect you want by using the RdotP variable in a 
BRDTfunc material and applying it to the specular reflection variables. 
  (As you noticed, RdotP is only available for the general reflectance 
types.)

-Greg

> From: Giulio Antonutto <Giulio.Antonutto@arup.com>
> Date: Tue Oct 21, 2003  8:13:31  AM US/Pacific
>
> hi everybody!
> I am playing with textfunc and mixfunc... just to create some changing
> color-normal materials....
> what I would like to do is to change the color according to the 
> perturbated
> normal ...
> to do that I think to use the variable RdotP (perturbated dot 
> product)....
> but radiance doesn't seem to recognize it... (probably it works only 
> with
> brtdf?)
> of course if I use Rdot... the normal is always the same and
> deformation-color are not changing together....
>
> I would like to do something like:
>
> id1 mixfunc id2
> 4 idA idB f(RdotP) .
> 0
> 0
>
> where idA and idB have same deformations but different 
> color-specularity and
> f(RdotP) is a function of Rdot-Perturbated
>
> any idea?
>
> thanks
> giulio


From radiance-general@radiance-online.org  Tue Oct 21 21:10:03 2003
From: radiance-general@radiance-online.org (Ben Masters)
Date: Wed, 22 Oct 2003 08:10:03 +1200
Subject: [Radiance-general] Sky definition
Message-ID: <OF34DE4499.C62D264E-ONCC256DC6.006DDD15-CC256DC6.006D46DE@conwag.com>

This is a multipart message in MIME format.
--=_alternative 006D46DACC256DC6_=
Content-Type: text/plain; charset="US-ASCII"

Hi

I want to model a sky that gives a ground illuminance of 50,000 lux. 
The sky will be clear and at 7am during winter in Auckland New Zealand 
(longtitude 174.76, latitude -36.85).

What is the easiest way to define the sky in terms of the required 
radiance and irradiance values? I dont have any other info apart from 
the resulting ground illuminance.

We are interested on the maximum levels of illuminance on the museum 
and 50,000 lux has been identified as the maximum expected.
I dont believe using the daylight factor approach would be the best 
way to compute the interior illuminance so I would be calculating the 
illuminance directly.

Do I just need to estimate the solar horizontal and diffuse illuminance 
values? If so, what would be realistic values??


Thanks,
Ben Masters
--=_alternative 006D46DACC256DC6_=
Content-Type: text/html; charset="US-ASCII"


<br><font size=2 face="sans-serif">Hi</font>
<br>
<br><font size=2><tt>I want to model a sky that gives a ground illuminance
of 50,000 lux. <br>
The sky will be clear and at 7am during winter in Auckland New Zealand
(longtitude 174.76, latitude -36.85).<br>
<br>
What is the easiest way to define the sky in terms of the required <br>
radiance and irradiance values? I dont have any other info apart from <br>
the resulting ground illuminance.<br>
<br>
We are interested on the maximum levels of illuminance on the museum <br>
and 50,000 lux has been identified as the maximum expected.<br>
I dont believe using the daylight factor approach would be the best <br>
way to compute the interior illuminance so I would be calculating the <br>
illuminance directly.</tt></font>
<br>
<br><font size=2><tt>Do I just need to estimate the solar horizontal and
diffuse illuminance values? If so, what would be realistic values??</tt></font>
<br>
<br><font size=2><tt><br>
Thanks,<br>
Ben Masters</tt></font>
--=_alternative 006D46DACC256DC6_=--

From radiance-general@radiance-online.org  Tue Oct 21 22:26:18 2003
From: radiance-general@radiance-online.org (Jeffrey McGrew)
Date: Tue, 21 Oct 2003 14:26:18 -0700
Subject: [Radiance-general] Modeling Paradox
Message-ID: <14F4D3C7236B9C42B381D1F66D78C6D9A0915B@hunt-exch-01.huntsmanag.com>

Hello all,

	Now that I've gotten my feet wet with
Radiance, so to speak, I'm left with a bit of
a paradox; Radiance has provisions to describe
almost any conceivable geometry I could need
in modeling buildings; however none of the export
programs I have used take advantage of this-
everything is turned to triangles.

There are times that this simply doesn't work;
such as aiming failures and bad looking curves,
and times where it's merely annoying, in that
I wish to replace some exported geometry from
CAD with Radiance-native geometry, but can't
easily do so because the item I wish to replace
is a tangle of triangles, and it's hard to discern
it's placement from the mess within the RAD files.

I can already produce renderings within
Radiance that are much better than anything
I've done before. However I still haven't
found an efficient and acceptable workflow
due to my reliance on CAD systems for generating
geometry (and their somewhat inferior exporting
ability).

So again I'm bothering all of you in asking
for two things; first off, how much & what do you
typically model in CAD and how much do you typically
describe within Radiance (or array, or instance)
for a given project; and secondly, has anyone
ever made an effort to make a 3D GUI modeler that
uses Radiance as it's native file format?

(would this even be possible?)

Thanks in advance,

Jeffrey


From radiance-general@radiance-online.org  Tue Oct 21 23:54:09 2003
From: radiance-general@radiance-online.org (Phillip Greenup)
Date: Wed, 22 Oct 2003 08:54:09 +1000
Subject: [Radiance-general] Re: sky definition part 2
Message-ID: <sf9645fc.007@sydnws04>

The Standard Sky Luminance Distribution algorithm, to model the current CIE standard skies, is now available from the Radiance-online web site.  The cal file and a pdf describing its use can be downloaded from www.radiance-online.org/patches/ssld/SSLD algorithm with PDF.zip.  Thanks heaps to Peter for your help getting that uploaded.

The SSLD became the new CIE standard in Feb this year - Spatial Distribution of Daylight - CIE Standard General Sky, S011/E:2003.  To find out more about the skies, follow the link to the paper by Kittler, Perez and Darula.  to see a pile of different sky models, go to Geoff Roy's SDF client web site.  both of these sites are listed in the pdf attached to the algorithm.

I hope someone finds it useful!
Phil.

_______________________________
Phillip Greenup
Specialist Engineer
Arup Australasia
Level 10, 201 Kent St
Sydney NSW 2000
Ph (02) 9320 9426
Fax (02) 9320 9321


>>> anselmo@dream.unipa.it 21/10/2003 1:46:58 am >>>
Hi Phillip and all!

> The cal file is not ideal, as it takes a few
> calculations and a bit of stuffing around to create the models.  the
> difficulty is in setting the relative intensities of sky and sun.  but, it
> does the trick.

That's the power of Radiance: 
if you give me a proper .cal file then I'll solve my problem! ;-)

Thanks for sharing it!

-- 
Francesco 

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org 
http://www.radiance-online.org/mailman/listinfo/radiance-general



From radiance-general@radiance-online.org  Wed Oct 22 03:54:49 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Tue, 21 Oct 2003 22:54:49 -0400
Subject: [Radiance-general] Modeling Paradox
In-Reply-To: <3F95B0ED.5000409@rumblestrip.org>
Message-ID: <1A162749-043B-11D8-B98C-000393824274@rumblestrip.org>

Hi Jeffrey,

> 	Now that I've gotten my feet wet with
> Radiance, so to speak, I'm left with a bit of
> a paradox; Radiance has provisions to describe
> almost any conceivable geometry I could need
> in modeling buildings; however none of the export
> programs I have used take advantage of this-
> everything is turned to triangles.

What CAD program are you using?  What exporter are you using?  You have  
to understand that the basic building block of ACIS-based modeling  
programs -- when talking to other software -- is the damned triangle,  
unfortunately.  3DStudio is great at producing models with more curves  
than Pamela Anderson, but when you ask it to export that model for use  
in another application, it spews forth a zillion triangles.  It's not a  
Radiance limitation, it's an ACIS translation problem.

> There are times that this simply doesn't work;
> such as aiming failures and bad looking curves,
> and times where it's merely annoying, in that
> I wish to replace some exported geometry from
> CAD with Radiance-native geometry, but can't
> easily do so because the item I wish to replace
> is a tangle of triangles, and it's hard to discern
> it's placement from the mess within the RAD files.

AutoCAD, when used with Georg Mischler's Radout program  
(http://www.schorsch.com/download/radout/), can produce much cleaner  
models.  I use AutoCAD and 3D faces as much as possible.  When you use  
3D solids in AutoCAD, the only way to get them out of ACAD is to  
convert them to a 3DStudio mesh first, and that means triangles (and  
oftentimes, LOTS of triangles).

As for the placement of native Radiance geometry, have a look at  
replmarks (http://radsite.lbl.gov/radiance/man_html/replmarks_1.htm).   
You can use your CAD program to place (with great accuracy and  
familiarity) markers that can be easily swapped out with a .rad file or  
an octree (but don't use octrees for light sources, as I found out the  
long way  
[http://www.radiance-online.org/pipermail/radiance-general/2003-August/ 
000946.html]!)

> I can already produce renderings within
> Radiance that are much better than anything
> I've done before. However I still haven't
> found an efficient and acceptable workflow
> due to my reliance on CAD systems for generating
> geometry (and their somewhat inferior exporting
> ability).

> So again I'm bothering all of you in asking
> for two things; first off, how much & what do you
> typically model in CAD and how much do you typically
> describe within Radiance (or array, or instance)
> for a given project; and secondly, has anyone
> ever made an effort to make a 3D GUI modeler that
> uses Radiance as it's native file format?

You know what?  I've been slowly learning Radiance over the last year  
and a half, and I still don't have a real workflow, and I know that's  
my biggest problem right now (well, that and the fact that I need to  
cut down on the cholesterol).  Right now I use CAD and try to use  
3Dfaces as much as possible, export with radout, and do some replmarks  
shenanigans for swapping out light sources.  Manual arrays with xform  
are used every once in a while, when the building supports it, but that  
is rare.  I think a lot of us rely on CAD for accuracy, I wouldn't  
worry about that; people like Greg Ward and Carsten Bauer who use vi to  
build entire Radiance scenes are in the minority, and are completely  
insane.  =8-)  Seriously, there's nothing wrong with relying on CAD for  
things; CAD is really good for things like building precision models.   
But I'd love to hear yours and others' methods for making the jump from  
CAD to Rad.

Rob Guglielmetti
rpg@rumblestrip.org
www.rumblestrip.org


From radiance-general@radiance-online.org  Wed Oct 22 09:25:26 2003
From: radiance-general@radiance-online.org (T. Schmidt)
Date: Wed, 22 Oct 2003 10:25:26 +0200
Subject: [Radiance-general] Contact information of Georg Mischler
Message-ID: <3F963EF6.8000406@exergia.de>

--------------080800020105090408080604
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

Hi all!

This mail is not directly related to a technical question.

Just a short introduction of myself:

Several years ago I was "deeply" engaged in the radiance business:

What I did was to write an additional preprocessor that enables one

to handle translation invariant daylight redirection systems in the

context of Radiance. In accordance with the mkillum it

was called mktis:  Make translation invariant Structure

For more information please see http://www.exergia.de/light_sim/mktis.htm

As the complete simulation process required a lot of scripting

I signed up a contract with Georg Mischler <www.schorsch.com> to use these original

routines to build up a user friendly front end in accordance to Rayfront

and bring it to the market as commercial software: Raydirect.

So far the story.

My problem is that I got no response to emails regarding my outstanding

license fees for serveral monthes. I tried to contact him via schorsch@schorsch.com

without success. So my concret question: Does anybody know an alternativ

mail address or way to contact him? I know that he was a participant of the last radiance 

workshop in Berkley and so still seems to be working in this business.

Sorry for this unconventional mail in this list, but perhaps someone could help.

Thanks and regards

Thomas Schmidt


-- 
exergia - ideas in light & energy
web  www.exergia.de | www.newenergyshop.com
fon +49-761 2923589 | fax +49-761 2925915


--------------080800020105090408080604
Content-Type: text/html; charset=us-ascii
Content-Transfer-Encoding: 7bit

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title></title>
</head>
<body>
<pre>Hi all!</pre>
<pre>
This mail is not directly related to a technical question.</pre>
<pre>
Just a short introduction of myself:</pre>
<pre>Several years ago I was "deeply" engaged in the radiance business:</pre>
<pre>What I did was to write an additional preprocessor that enables one</pre>
<pre>to handle translation invariant daylight redirection systems in the</pre>
<pre>context of <b>Radiance</b>. In accordance with the <b>mkillum</b> it</pre>
<pre>was called <b>mktis</b>:&nbsp; <b>M</b>a<b>k</b>e <b>t</b>ranslation <b>i</b>nvariant <b>S</b>tructure</pre>
<pre>For more information please see <a
 href="http://www.exergia.de/light_sim/mktis.htm">http://www.exergia.de/light_sim/mktis.htm</a></pre>
<pre>As the complete simulation process required a lot of scripting</pre>
<pre>I signed up a contract with <a href="www.schorsch.com">Georg Mischler</a> to use these original</pre>
<pre>routines to build up a user friendly front end in accordance to <b>Rayfront</b></pre>
<pre>and bring it to the market as commercial software: <b>Raydirect</b>.</pre>
<pre>So far the story.</pre>
<pre>
My problem is that I got no response to emails regarding <b>my outstanding</b></pre>
<pre><b>license fees</b> for serveral monthes. I tried to contact him via <a class="moz-txt-link-abbreviated" href="mailto:schorsch@schorsch.com">schorsch@schorsch.com</a></pre>
<pre>without success. So my concret question: Does anybody know an alternativ</pre>
<pre>mail address or way to contact him? I know that he was a participant of the last radiance </pre>
<pre>workshop in Berkley and so still seems to be working in this business.</pre>
<pre>
Sorry for this unconventional mail in this list, but perhaps someone could help.

Thanks and regards

Thomas Schmidt
</pre>
<pre class="moz-signature" cols="$mailwrapcol">

-- 
exergia - ideas in light &amp; energy
web  <a class="moz-txt-link-abbreviated" href="http://www.exergia.de">www.exergia.de</a> | <a class="moz-txt-link-abbreviated" href="http://www.newenergyshop.com">www.newenergyshop.com</a>
fon +49-761 2923589 | fax +49-761 2925915
</pre>
</body>
</html>

--------------080800020105090408080604--


From radiance-general@radiance-online.org  Wed Oct 22 09:59:28 2003
From: radiance-general@radiance-online.org (Roland Schregle)
Date: Wed, 22 Oct 2003 10:59:28 +0200
Subject: [Radiance-general] Modeling Paradox
In-Reply-To: <1A162749-043B-11D8-B98C-000393824274@rumblestrip.org>
References: <1A162749-043B-11D8-B98C-000393824274@rumblestrip.org>
Message-ID: <3F9646F0.50704@gmx.net>

Rob Guglielmetti wrote:

> What CAD program are you using?  What exporter are you using?  You have  
> to understand that the basic building block of ACIS-based modeling  
> programs -- when talking to other software -- is the damned triangle,  
> unfortunately.  3DStudio is great at producing models with more curves  
> than Pamela Anderson, but when you ask it to export that model for use  
> in another application, it spews forth a zillion triangles.

Dammit Greg, we want a Pam Anderson primitive in RADIANCE! :^)

-- 
Roland Schregle
PhD candidate, Fraunhofer Institute for Solar Energy Systems
RADIANCE Photon Map page: www.ise.fhg.de/radiance/photon-map

END OF LINE. (MCP)


From radiance-general@radiance-online.org  Wed Oct 22 13:02:42 2003
From: radiance-general@radiance-online.org (Carsten Bauer)
Date: Wed, 22 Oct 2003 12:02:42 +0000
Subject: [Radiance-general] Modeling Paradox
References: <1A162749-043B-11D8-B98C-000393824274@rumblestrip.org>
Message-ID: <3F9671E2.2070009@t-online.de>

Hi,

I remember it, I was at this point, too, some years ago in my life. Its 
one of the oddities of Radiance, having a powerful rendering engine but 
- at the first glance - no 'convenient' way to set up / put in a model. 
This is no complaint, consider that the stuff is for free, and you 
already get a rendering engine more or less surpassing many commercial 
packages in terms of quality and being currently accepted as the de 
facto standard for accuracy in terms of lighting analysis.

I once thought about writing some import module for Radiance geometry, 
but soon made up my mind. It probably is not very difficult, but it 
needs a lot of time and tedious work, and after all you'll end up 
reinventing another CAD program, although there are lots of them already 
on the market.. Additionally, with modern PC equipment and their high 
amount of RAM, treating geometry as polygon-meshes is not so much a 
limitation as it has been before (I remember that POV ray uses lots of 
different primitive types, for the more complex ones you need 
sophisticated root solvers to determine ray intersections, meaning 
longer calculation time)

Nevertheless, so far I worked exclusively with an editor and the 
Radiance native formats (Hi Rob, you're absolutely right, with one 
exception of course, I'm insane, but I'm not masochistic, so I don't use 
vi.... :-) . But even when working with CAD programs, its good to rely 
on exact coordinate specification rather than on mouse-drawing, to avoid 
inaccuracies like accidental small gaps between edges resulting in light 
leaks or other artifacts which need a lot of time to get tracked down 
later.

Another Tip: decompose your model in separate items as much as possible, 
and let the Radiance input engine put them together when calling oconv, 
the simplest means are often the most effective ones.

-cb  





From radiance-general@radiance-online.org  Wed Oct 22 17:36:52 2003
From: radiance-general@radiance-online.org (Jeffrey McGrew)
Date: Wed, 22 Oct 2003 09:36:52 -0700
Subject: [Radiance-general] Modeling Paradox
Message-ID: <14F4D3C7236B9C42B381D1F66D78C6D9A0915D@hunt-exch-01.huntsmanag.com>

> Hi Jeffrey,
> 
> What CAD program are you using?  What exporter are you using?

I am using AutoDesk Revit for the modeling, then exporting
from that to AutoCAD where everything becomes a polyface mesh,
and then using RADOUT to generate my .RAD files. The other
approach I've done is to export from Revit to DXF in parts,
and then use the DXF2RAD tool to translate them into .RAD.

The problem I have, and hence why I have to use AutoCAD
as an intermediary currently, is that AutoDesk Revit doesn't
have the ability to export geometry so that material = layer
within a DXF or DWG; instead it places elements upon layers
based upon those elements classification; i.e. existing walls,
new furniture, site elements, etc. Revit also currently lacks
an API, so I can't write my own Radiance exporter for it.

So, the best way I've found to export from Revit to
Radiance is to first export to a DWG or DXF file, open
that in AutoCAD, swap things onto layers per what
material I want them to be, then use RADOUT to generate
multiple .RAD files.

However the modeling capabilities of Revit *far* outshine
those of AutoCAD when it comes to modeling buildings; so
even having to jump through these translation hoops, it's
still faster than modeling in AutoCAD to begin with. Revit
is, more or less, 'Inventor or SolidEdge for Architects'.

>  You have  
> to understand that the basic building block of ACIS-based modeling  
> programs -- when talking to other software -- is the damned 
> triangle,  
> unfortunately.

That's what I've encountered.
  
> It's not a  
> Radiance limitation, it's an ACIS translation problem.

Oh no, I never ment to imply that it was a Radiance
limitation; I meant to imply that it was a limitation
with the translation programs; in that
they aren't aware enough to translate, say, a cylinder
in a DXF to a cylinder in Radiance.

> AutoCAD, when used with Georg Mischler's Radout program  
> (http://www.schorsch.com/download/radout/), can produce much cleaner  
> models.  I use AutoCAD and 3D faces as much as possible.  

Another benefit of using AutoCAD as an intermediary
from Revit is what you mention here; indeed using the
RADOUT tool I've had much less issue with aiming failures,
as well as replacing the luminescent parts of my light
fixtures within AutoCAD with simple AutoCAD 3Dface elements
has helped immensely.

> When you use  
> 3D solids in AutoCAD, the only way to get them out of ACAD is to  
> convert them to a 3DStudio mesh first, and that means triangles (and  
> oftentimes, LOTS of triangles).

I'm not using Soilds anymore; when I export from
Revit, everything comes into AutoCAD as a polyface
mesh.

> As for the placement of native Radiance geometry, have a look at  
> replmarks 
> (http://radsite.lbl.gov/radiance/man_html/replmarks_1.htm).   
> You can use your CAD program to place (with great accuracy and  
> familiarity) markers that can be easily swapped out with a 
> .rad file or  
> an octree (but don't use octrees for light sources, as I 
> found out the  
> long way  
> [http://www.radiance-online.org/pipermail/radiance-general/200
> 3-August/ 
> 000946.html]!)

Thanks a great deal for this link. I'm certain that
this will help a great deal! Something like this
was exactly what I was looking for; lacking the
ability to make 'good' RAD files directly from
my CAD software, I needed some way to easily
'swap' elements within my scenes. Thanks again!
 
> Right now I use CAD and try to use  
> 3Dfaces as much as possible, export with radout, and do some 
> replmarks  
> shenanigans for swapping out light sources.

This sounds like what I'll do, at least until
Revit has an API!

Thanks again,

Jeffrey 


From radiance-general@radiance-online.org  Thu Oct 23 15:54:09 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Thu, 23 Oct 2003 10:54:09 -0400
Subject: [Radiance-general] Modeling Paradox
In-Reply-To: <14F4D3C7236B9C42B381D1F66D78C6D9A0915D@hunt-exch-01.huntsmanag.com>
References: <14F4D3C7236B9C42B381D1F66D78C6D9A0915D@hunt-exch-01.huntsmanag.com>
Message-ID: <3F97EB91.5040902@rumblestrip.org>

Hi Jeffrey,

Jeffrey McGrew wrote:

> I am using AutoDesk Revit for the modeling, then exporting
> from that to AutoCAD where everything becomes a polyface mesh,
> and then using RADOUT to generate my .RAD files. The other
> approach I've done is to export from Revit to DXF in parts,
> and then use the DXF2RAD tool to translate them into .RAD.

> However the modeling capabilities of Revit *far* outshine
> those of AutoCAD when it comes to modeling buildings; so
> even having to jump through these translation hoops, it's
> still faster than modeling in AutoCAD to begin with. Revit
> is, more or less, 'Inventor or SolidEdge for Architects'.

Sounds interesting.  I must admit I don't pay close attention to what's 
coming out of Autodesk's, um, doors, besides AutoCAD.  I use my 
AutoCAD/ADT and hope that they don't raise the price too much.  Revit 
sounds interesting though.  Perhaps I'll have a look.

>>It's not a  
>>Radiance limitation, it's an ACIS translation problem.
> 
> 
> Oh no, I never ment to imply that it was a Radiance
> limitation; I meant to imply that it was a limitation
> with the translation programs; in that
> they aren't aware enough to translate, say, a cylinder
> in a DXF to a cylinder in Radiance.

I never meant to imply that you meant to imply that either.  Wait; now 
I'm confused. =8-)  Yes, it's frustrating to accept that while Radiance 
can deal with fantastic complexity, and smooth curves (don't get me 
started on *that* again), it does so internally.  You either speak 
Radiance or accept lots of triangles or facets. I guess most of us 
accept triangles.  It's less of a limitation than it was in the past, 
what with memory & CPU cycles coming cheaply now, but it still makes for 
illum headaches and I guess texture mapping is a pain.

> Thanks a great deal for this link. I'm certain that
> this will help a great deal! Something like this
> was exactly what I was looking for; lacking the
> ability to make 'good' RAD files directly from
> my CAD software, I needed some way to easily
> 'swap' elements within my scenes. Thanks again!

Yep, it's indispensible for that, and I assume is exactly why Greg wrote 
it.  Have fun!

----

      Rob Guglielmetti

e. rpg@rumblestrip.org
w. www.rumblestrip.org


From radiance-general@radiance-online.org  Fri Oct 24 03:02:08 2003
From: radiance-general@radiance-online.org (radiance-general@radiance-online.org)
Date: Thu, 23 Oct 2003 19:02:08 -0700 (MST)
Subject: [Radiance-general] modeling blinds
Message-ID: <1066960928.3f9888204526b@webmail.asu.edu>


Hi everyone,

I am trying to model blinds and would appreciate any help possible.  I got
some ideas from the desktop radiance manual, however have still not been able
to model them properly.

I am trying to model blinds for the glazing in a simple room with a south
facing glass.
I wrote the genblinds rad file as follows:

void plastic blinds
0
0
5        0.4           0.4          0.4        0.02        0

!genblinds blinds blind 1 180 51 58.29 0 | xform -t 240 6 30


and I tried modeling the blinds in the following two ways.

1.	here the glass is the illum and the blinds are located towards the
room side next to the glass.  (modeled using mkillum, using rad)

2.	here I modeled the glass and special illum separately.  The special
illum is located towards to inner side of the glass and blinds setup. (modeled
using mkillum, using rad)

Neither of them gave me proper results, i'm sure I was doing something wrong.
The glass and illum were both getting modelled sperately it seems, because the 
sun component remained unchanged.  What is the correct way to model blinds??

Is there another way of modeling the blinds?  I would really appreciate some
help here ...if there is some text I should be reading...let me know.

Thankyou
Amarpreet


Amarpreet Sethi
Graduate Student
Arizona State University



From radiance-general@radiance-online.org  Fri Oct 24 04:53:26 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Thu, 23 Oct 2003 20:53:26 -0700
Subject: [Radiance-general] Re: modeling blinds
Message-ID: <9EF56C5C-05D5-11D8-9CDD-000A956D40C8@lmi.net>

Hi Amarpreet,

What do you see when you look at the blinds with rview?  Are they in 
the right place?  What is the description of your window polygon?

Using mkillum with blinds is a bit tricky, as the most efficient 
calculation looks at only a small polygon in the middle of the window, 
then applies the computed distribution to the whole window.  There 
really shoul be a script to do this for you for some common blinds 
configurations, but I never got around to writing one.  Any volunteers?

I don't see how 58.29 is a sensible value for the number of slats.

-Greg


From radiance-general@radiance-online.org  Fri Oct 24 16:52:52 2003
From: radiance-general@radiance-online.org (Reinhart, Christoph)
Date: Fri, 24 Oct 2003 11:52:52 -0400
Subject: [Radiance-general] Re: modeling blinds
Message-ID: <10C94843061E094A98C02EB77CFC328702C3E610@nrcmrdex1d.imsb.nrc.ca>

This message is in MIME format. Since your mail reader does not understand
this format, some or all of this message may not be legible.

------_=_NextPart_001_01C39A46.E21597C0
Content-Type: text/plain;
	charset="iso-8859-1"

Hi Amarpreet,

We carried out an validation study of RADIANCE, comparing measurement and
simulation of an external venetian blind system under over 10000 different
sky conditions (sunny and overcast). The results have been published in:

Reinhart C F, Walkenhorst O, "Dynamic RADIANCE-based daylight simulations
for a full-scale test office with outer venetian blinds." Energy &
Buildings, 33:7 pp. 683-697, 2001.

The results show that RADIANCE can accurately model blinds. The main
difficulties are:
- you have to characterize the surface properties of the blinds with a very
high accuracy
- you have to make sure that the slat angle of the simulated blinds exactly
corresponds to the measured blinds
- for ceiling sensors you have to also carefully model the exterior of your
test room
- you have to set your simulation parameters sufficiently high. We used:
        ab 7
        ad 1500
        as 100
        aa 0.1
        ar 200
        dt 0
        ds 0
- we did not use mkillum

Christoph
Christoph "Tito" Reinhart, Ph.D.              tel: (613) 993-9703 
Research Officer                                      fax: (613) 954-3733 
Institute for Research in Construction      e-mail:
christoph.reinhart@nrc-cnrc.gc.ca 
National Research Council Canada        1200 Montreal Road M-24, Ottawa 
Ontario K1A 0R6 Canada 

Daylighting Analysis Software: 
The Lightswitch Wizard (initial design)   www.buildwiz.com
<http://www.buildwiz.com/lightswitch/index.cfm>  
DAYSIM (expert software)                       www.daysim.com
<outbind://36/www.daysim.com>   <outbind://36/www.daysim.com> 


IEA Task 31
http://www.iea-shc.org/task31/ <http://www.iea-shc.org/task31/>  



-----Original Message-----
From: Greg Ward [ mailto:gward@lmi.net <mailto:gward@lmi.net> ]
Sent: Thursday, October 23, 2003 11:53 PM
To: sethi@asu.edu
Cc: radiance-general@radiance-online.org
Subject: [Radiance-general] Re: modeling blinds


Hi Amarpreet,

What do you see when you look at the blinds with rview?  Are they in
the right place?  What is the description of your window polygon?

Using mkillum with blinds is a bit tricky, as the most efficient
calculation looks at only a small polygon in the middle of the window,
then applies the computed distribution to the whole window.  There
really shoul be a script to do this for you for some common blinds
configurations, but I never got around to writing one.  Any volunteers?

I don't see how 58.29 is a sensible value for the number of slats.

-Greg

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general
<http://www.radiance-online.org/mailman/listinfo/radiance-general> 



------_=_NextPart_001_01C39A46.E21597C0
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Diso-8859-1">
<TITLE></TITLE>

<META content=3D"MSHTML 5.50.4807.2300" name=3DGENERATOR></HEAD>
<BODY>
<P><FONT size=3D2>Hi Amarpreet,<BR><BR>We carried out an validation =
study of=20
RADIANCE, comparing measurement and simulation of an external venetian =
blind=20
system under over 10000 different sky conditions (sunny and overcast). =
The=20
results have been published in:<BR><BR>Reinhart C F, Walkenhorst O, =
"Dynamic=20
RADIANCE-based daylight simulations for a full-scale test office with =
outer=20
venetian blinds." Energy &amp; Buildings, 33:7 pp. 683-697, =
2001.<BR><BR>The=20
results show that RADIANCE can accurately model blinds. The main =
difficulties=20
are:<BR>- you have to characterize the surface properties of the blinds =
with a=20
very high accuracy<BR>- you have to make sure that the slat angle of =
the=20
simulated blinds exactly corresponds to the measured blinds<BR>- for =
ceiling=20
sensors you have to also carefully model the exterior of your test =
room<BR>- you=20
have to set your simulation parameters sufficiently high. We=20
used:<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ab=20
7<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ad=20
1500<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; as=20
100<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; aa=20
0.1<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ar=20
200<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dt=20
0<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ds 0<BR>- we did not =
use=20
mkillum<BR><BR>Christoph<BR><FONT face=3DArial size=3D1>Christoph =
"Tito" Reinhart,=20
Ph.D.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;=20
tel: (613) 993-9703</FONT><FONT size=3D3> <BR></FONT><FONT =
face=3DArial><FONT=20
size=3D-2>Research=20
Officer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;=20
fax: (613) 954-3733</FONT></FONT><FONT size=3D3> <BR></FONT><FONT =
face=3DArial><FONT=20
size=3D-2>Institute for Research in =
Construction&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
e-mail: christoph.reinhart@nrc-cnrc.gc.ca</FONT></FONT><FONT size=3D3>=20
<BR></FONT><FONT face=3DArial><FONT size=3D-2>National Research Council =

Canada&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1200 Montreal Road =
M-24,=20
Ottawa</FONT></FONT><FONT size=3D3> <BR></FONT><FONT face=3DArial><FONT =

size=3D-2>Ontario K1A 0R6 Canada</FONT></FONT><FONT size=3D3> =
</FONT></P>
<P><U><FONT face=3DArial><FONT size=3D-2>Daylighting Analysis=20
Software:</FONT></FONT></U> <BR><FONT face=3DArial><FONT size=3D-2>The =
Lightswitch=20
Wizard (initial design)&nbsp;&nbsp; <U><FONT color=3D#000000><A=20
href=3D"http://www.buildwiz.com/lightswitch/index.cfm">www.buildwiz.com<=
/A></FONT></U></FONT></FONT>=20
<BR><FONT face=3DArial><FONT size=3D-2>DAYSIM (expert=20
software)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
<U><FONT color=3D#000000><A=20
href=3D"outbind://36/www.daysim.com">www.daysim.com</A></FONT></U></FONT=
></FONT><U><FONT=20
face=3DArial><FONT color=3D#000000><FONT size=3D-2><A=20
href=3D"outbind://36/www.daysim.com"></A></FONT></FONT></FONT></U>=20
<P><FONT face=3DArial><FONT color=3D#000000><FONT size=3D-2>IEA Task=20
31&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
<A=20
href=3D"http://www.iea-shc.org/task31/">http://www.iea-shc.org/task31/</=
A></FONT></FONT></FONT>=20
</P>
<P><BR><BR>-----Original Message-----<BR>From: Greg Ward [<A=20
href=3D"mailto:gward@lmi.net">mailto:gward@lmi.net</A>]<BR>Sent: =
Thursday, October=20
23, 2003 11:53 PM<BR>To: sethi@asu.edu<BR>Cc:=20
radiance-general@radiance-online.org<BR>Subject: [Radiance-general] Re: =
modeling=20
blinds<BR><BR><BR>Hi Amarpreet,<BR><BR>What do you see when you look at =
the=20
blinds with rview?&nbsp; Are they in<BR>the right place?&nbsp; What is =
the=20
description of your window polygon?<BR><BR>Using mkillum with blinds is =
a bit=20
tricky, as the most efficient<BR>calculation looks at only a small =
polygon in=20
the middle of the window,<BR>then applies the computed distribution to =
the whole=20
window.&nbsp; There<BR>really shoul be a script to do this for you for =
some=20
common blinds<BR>configurations, but I never got around to writing =
one.&nbsp;=20
Any volunteers?<BR><BR>I don't see how 58.29 is a sensible value for =
the number=20
of=20
slats.<BR><BR>-Greg<BR><BR>_____________________________________________=
__<BR>Radiance-general=20
mailing list<BR>Radiance-general@radiance-online.org<BR><A =
target=3D_blank=20
href=3D"http://www.radiance-online.org/mailman/listinfo/radiance-general=
">http://www.radiance-online.org/mailman/listinfo/radiance-general</A><B=
R></FONT></P></BODY></HTML>

------_=_NextPart_001_01C39A46.E21597C0--

From radiance-general@radiance-online.org  Sat Oct 25 01:01:34 2003
From: radiance-general@radiance-online.org (Arvinder Dang)
Date: Fri, 24 Oct 2003 17:01:34 -0700 (PDT)
Subject: [Radiance-general] translucent glass
Message-ID: <20031025000134.23897.qmail@web41601.mail.yahoo.com>

Hello Everybody,
I am now modelling my skylight case, a 36' x30' room
with four 4' x 4' skylights distributed evenly.(well
depth 3'). In my Doe 2 model I am using a flat glass
which has properties similar to that of a 
2 dome fiberglass(translucent) with Visible
transmittance = 0.5, SC = 0.45
I need to create a similar glass type in Radiance.
I am using the trans material type and based a on
previous discussion have created

void trans skylight
0
0
7 0.54 0.54 0.54 0 0 1 0 

Is this the correct material definition.
What would be the definition for a similar white
translucent material.(Would the color effect the
illuminance values inside)

Also I know that I need to use mkillum for this.Do I
need to define both the window surface as well as a
polygon below the well as illums or simply the polygon
below the well so as to obtain accurate results.
Please Guide me with this.

Thank You
Arvinder 



__________________________________
Do you Yahoo!?
The New Yahoo! Shopping - with improved product search
http://shopping.yahoo.com

From radiance-general@radiance-online.org  Sat Oct 25 16:09:10 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Sat, 25 Oct 2003 08:09:10 -0700
Subject: [Radiance-general] High dynamic range image builder
Message-ID: <2F874CD2-06FD-11D8-A531-000A956D40C8@lmi.net>

Dear Group,

I have finally managed to recompile the command-line version of my HDR 
image builder.  I have uploaded two versions of this program, one for 
Linux and one for Mac OS X.  I have also written a separate program to 
perform lens flare removal, which may be applied during hdrgen or as a 
post-process.  I have a simple HTML man page for hdrgen, but not for 
hdrflare as it's pretty basic and has no options.

The files are available from my website at:

	http://www.anyhere.com/gward/pickup/hdrgen_linux.tar.gz
	http://www.anyhere.com/gward/pickup/hdrgen_macosx.tar.gz

Both programs will output either Radiance RGBE, 32-bit/pixel LogLuv 
TIFF, or PIZ-compressed EXR format images.  The input to hdrgen may be 
either JPEG or TIFF.  If the input files have valid camera exposure 
information in the header, this will be used to determine the relative 
and absolute exposure differences.  Otherwise, you will have to enter 
the exposure multipliers on the command line.  For those on a Mac who 
prefer a nice user interface, there is of course Photosphere.  The 
latest 1.1 release contains all the new goodies:

	http://www.anyhere.com/gward/pickup/photosphere.tar.gz

This version of the HDR builder includes a new ghost removal algorithm 
in addition to the alignment and lens flare removal options.  The ghost 
removal algorithm looks for parts of the scene where things have 
changed between exposures, and chooses the best exposure for those 
regions.  The alignment algorithm is written up in an upcoming JGT 
article.  I haven't written up the flare removal algorithm, but I hope 
to at some point, along with the ghost removal technique.  Everything 
is automatic, so if one of the techniques doesn't work, there's not 
much you can do about it but switch it off.  At least the whole thing 
is fast, so there's not much harm in running it multiple times.

Enjoy!
-Greg

P.S.  The Linux version is a little slower than it should be because 
the version of gcc I used has a broken optimizer.  I hope to recompile 
with optimizations in the near future, and will send out a follow-up 
announcement when I do.


From radiance-general@radiance-online.org  Sat Oct 25 17:45:06 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Sat, 25 Oct 2003 09:45:06 -0700
Subject: [Radiance-general] translucent glass
In-Reply-To: <20031025000134.23897.qmail@web41601.mail.yahoo.com>
Message-ID: <966A3698-070A-11D8-A531-000A956D40C8@lmi.net>

Hi Arvinder,

> From: Arvinder Dang <ashudang@yahoo.com>
> Date: Fri Oct 24, 2003  5:01:34  PM US/Pacific
>
> Hello Everybody,
> I am now modelling my skylight case, a 36' x30' room
> with four 4' x 4' skylights distributed evenly.(well
> depth 3'). In my Doe 2 model I am using a flat glass
> which has properties similar to that of a
> 2 dome fiberglass(translucent) with Visible
> transmittance = 0.5, SC = 0.45
> I need to create a similar glass type in Radiance.
> I am using the trans material type and based a on
> previous discussion have created
>
> void trans skylight
> 0
> 0
> 7 0.54 0.54 0.54 0 0 1 0
>
> Is this the correct material definition.
> What would be the definition for a similar white
> translucent material.(Would the color effect the
> illuminance values inside)

How did you come up with 0.54 for the diffuse?  I would have expected 
this to be 0.50 if all you wanted was a 50% visible transmittance.  
However, there is no material that transmits 50% of the visible 
diffusely without also reflecting a fair amount.  Given that you only 
care about the interior values, I suppose it doesn't matter in this 
case, but a more realistic model would be:

void trans skylight
0
0
7 1 1 1 0 0 0.5 0

This would be an ideal scattering surface, spreading the incident 
radiation equally in all directions, 50% transmitted and 50% reflected. 
  There is no such material in the real world, but some materials come 
reasonably close.  The diffuser is white because all of the components 
(red green and blue) are equal.  A colored surface would affect the 
illuminances somewhat.

> Also I know that I need to use mkillum for this.Do I
> need to define both the window surface as well as a
> polygon below the well as illums or simply the polygon
> below the well so as to obtain accurate results.
> Please Guide me with this.

In this special diffuse case, you can hand the skylight polygons to 
mkillum directly, setting

#@mkillum d=0 c=n l-

In the scene file to compute a total average diffuse light source for 
each surface using mkillum.  There is no sense in creating illum's (as 
opposed to light sources) because there is nothing to see through such 
a diffuser, and no sunlight will penetrate it.

-Greg


From radiance-general@radiance-online.org  Tue Oct 28 16:07:09 2003
From: radiance-general@radiance-online.org (Barbara Matusiak)
Date: Tue, 28 Oct 2003 17:07:09 +0100
Subject: [Radiance-general] Re: modeling blinds
In-Reply-To: <9EF56C5C-05D5-11D8-9CDD-000A956D40C8@lmi.net>
Message-ID: <5.0.0.25.2.20031028165508.00c20150@pop.ansatt.ntnu.no>

Hi Greg,
I wonder if your comment about using mkillum with blinds is true also for a 
specular horizontal lightshelf placed inside a room at the lower edge of 
the window? I gess, the calculation accuracy will be higher for lightshelf 
than for blinds?

Barbara.


>Using mkillum with blinds is a bit tricky, as the most efficient 
>calculation looks at only a small polygon in the middle of the window, 
>then applies the computed distribution to the whole window.  There really 
>shoul be a script to do this for you for some common blinds 
>configurations, but I never got around to writing one.  Any volunteers?
>
>I don't see how 58.29 is a sensible value for the number of slats.
>
>-Greg
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general@radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general


From radiance-general@radiance-online.org  Tue Oct 28 15:25:24 2003
From: radiance-general@radiance-online.org (radiance-general@radiance-online.org)
Date: Tue, 28 Oct 2003 16:25:24 +0100
Subject: Autoreply: Re: [Radiance-general] Re: modeling blinds
Message-ID: <B0024408155@mailengine3.web2000.activeisp.com>

I am on leave until Friday 31st October. If you need a response before then please contact the office on 020 8892 7947.

Nick Walker




From radiance-general@radiance-online.org  Wed Oct 29 05:50:55 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Wed, 29 Oct 2003 00:50:55 -0500
Subject: [Radiance-general] Re: modeling blinds
In-Reply-To: <5.0.0.25.2.20031028165508.00c20150@pop.ansatt.ntnu.no>
Message-ID: <DCC0A522-09D3-11D8-8809-00306540F848@lmi.net>

Hi Barbara,

You could use a smaller polygon for a light shelf, but there is less 
benefit from doing so.  You get a more efficient calculation in the 
case of blinds simply because you don't have to compute and place as 
many ambient values if you restrict mkillum to a smaller area, yet the 
result (provided there is no nearby exterior geometry) will be just the 
same.

I am attaching my reply to Amarpreet below for those who are interested.

In the case of your lightshelf, you probably don't need mkillum if the 
shelf is purely specular (i.e., a mirror), but you should definitely 
use the "mirror" primitive type for its material and set -vr 1 (or 
higher).

-Greg

> From: Barbara Matusiak <barbara.matusiak@ark.ntnu.no>
> Date: Tue Oct 28, 2003  11:07:09  AM US/Eastern
>
> Hi Greg,
> I wonder if your comment about using mkillum with blinds is true also 
> for a specular horizontal lightshelf placed inside a room at the lower 
> edge of the window? I gess, the calculation accuracy will be higher 
> for lightshelf than for blinds?
>
> Barbara.
>
>> Using mkillum with blinds is a bit tricky, as the most efficient 
>> calculation looks at only a small polygon in the middle of the 
>> window, then applies the computed distribution to the whole window.  
>> There really shoul be a script to do this for you for some common 
>> blinds configurations, but I never got around to writing one.  Any 
>> volunteers?
>>
>> I don't see how 58.29 is a sensible value for the number of slats.
>>
>> -Greg

Begin forwarded message:

> From: Greg Ward <gward@lmi.net>
> Date: Wed Oct 29, 2003  12:35:11  AM US/Eastern
> To: sethi@asu.edu
> Subject: Re: modeling blinds
>
> Hi Amarpreet,
>
> It is difficult to tell from your renderings, but iit looks like your 
> illum surface is closer to the window than your blinds are.  You need 
> them to be on the other side of the blinds, preferably making (or 
> nearly making) a seal between the blinds and the room.  The upper, 
> uncovered portion of the window, should have a separate illum surface 
> or perhaps none at all.
>
> For a more efficient mkillum calculation, create the polygon and place 
> it appropriately as I have described above.  Put it in a separate 
> file, as you say you have done already for rad.  Then, scale the 
> blinds by a scalefactor 1/N and back, where N is the number of blinds, 
> using the following bit of C-shell code to this file, which I will 
> call "win_illum_poly.rad":
>
> set cent=`getbbox -h win_illum.rad | rcalc -e 
> '$1=($1+$2)/2;$2=($3+$4)/2;$3=($5+$6)/2'`
> xform -t -$cent[0] -$cent[1] -$cent[2] -s {1/N} -t $cent[0] $cent[1] 
> $cent[2] win_illum_poly.rad \
> 	| mkillum [mkillum-opts] orig-octree.oct \
> 	| xform -t -$cent[0] -$cent[1] -$cent[2] -s {N} -t $cent[0] $cent[1] 
> $cent[2] > win_illum.rad
> oconv -i orig-octree.oct win_illum.rad > illum-octree.oct
>
> You must substitute the {1/N} and {N} symbols above by the numerical 
> results based on the number of blinds.  If you have 11 blinds, these 
> values would be 0.0909091 and 11, for example.
>
> I hope this helps.
> -Greg
>
> P.S.  I apologize for the delay, but I am in NYC and rather 
> preoccupied with meetings, etc.
>
>> From: sethi@asu.edu
>> Date: Sat Oct 25, 2003  10:04:07  PM US/Eastern
>>
>> Dear Greg,
>>
>> Thankyou so much for your answer.  And I would really like to utilize 
>> the idea
>> of calculating the distribution of a small polygon, as the times for 
>> my
>> simulations are as much as a whole day.  However I really am not sure 
>> how I do
>> this.
>> Right now I am using Rad where I am specifying the scene file with 
>> the special
>> illum material.  And then Rad does everything.   Hence if I were to 
>> do this I
>> would have to do it without rad.  Would I use skyfunc and do it?  
>> Would i
>> create .dat files using skyfunc? and then how would I use the .dat 
>> file to do
>> the rest of the calculation.  I am really uncertain how I would do 
>> this and
>> didnt now where to find this information.  Hence if you would be able 
>> to tell
>> me how it would be extremely helpful.
>>
>> Thank you very much for your help, and sorry for asking soooo many 
>> questions.
>>
>> best regards,
>> Amarpreet
>


From radiance-general@radiance-online.org  Wed Oct 29 05:53:42 2003
From: radiance-general@radiance-online.org (radiance-general@radiance-online.org)
Date: Wed, 29 Oct 2003 06:53:42 +0100
Subject: Autoreply: [Radiance-general] Re: modeling blinds
Message-ID: <B0022239931@mailengine2.web2000.activeisp.com>

I am on leave until Friday 31st October. If you need a response before then please contact the office on 020 8892 7947.

Nick Walker




From radiance-general@radiance-online.org  Wed Oct 29 07:01:28 2003
From: radiance-general@radiance-online.org (Peter Apian-Bennewitz)
Date: Wed, 29 Oct 2003 08:01:28 +0100
Subject: [Radiance-general] Re: modeling blinds / suggesting photon-map
In-Reply-To: <DCC0A522-09D3-11D8-8809-00306540F848@lmi.net>
References: <DCC0A522-09D3-11D8-8809-00306540F848@lmi.net>
Message-ID: <3F9F65C8.4040403@pab-opto.de>

Greg Ward wrote:

> Hi Barbara,
>
> You could use a smaller polygon for a light shelf, but there is less 
> benefit from doing so.  You get a more efficient calculation in the 
> case of blinds simply because you don't have to compute and place as 
> many ambient values if you restrict mkillum to a smaller area, yet the 
> result (provided there is no nearby exterior geometry) will be just 
> the same. 

Users may find modelling blinds with direct sunlight benefits from the 
photon-map add-on, since forward raytracing is more effective than 
backward raytracing in this situation. At least when using the entry 
aperture option in photon-map. The photon map method avoids problems 
with mkillum's glowing area surfaces as well.

-Peter

PS: The basic idea is to trace only lightpaths which carry most of the 
scene's energy. A low energy ray is a wasted ray in terms of computer 
time. That's why modeling blinds with ambient rays only on a sunny day 
is such a drag: Most rays miss the window, those traced through the 
structure miss the sun and hit something low lit outside (or inside, 
depending on the blind). On a cloudy day it actually doesn't work as bad.
Mkillum intruduces an auxilary surface and does the same backward step 
from this surface. This speed things up, but doesn't work well for 
glazings of complex structure (multiple reflecting elements in it), is 
limited in angular output resolution and is based on self luminous area 
sources (which are subdivided). The latter two can be eased with 
parameter setting, but  the concept is not nice for elements generating 
a highly directed output (light redirecting elements without diffuser).
Photon-map was motivated to cope with these: Tracing rays from the sun 
(actually from the bounding cube, see Roland's phd for details) though 
the window structure (including mulitple reflecting surfaces) into the 
room. It solves the problem of interfacing the forward with the backward 
step more elegantly, as the traced photons are stored on the inside room 
surfaces and not at the window. If you're prepared to face some new 
parameters for photon-map, you'll find it worth the effort.
If anyone locates money and workers, there's another interesting step 
beyond that: more effective raytracing based on the Metropolis algorithm.
- end of compact early-morning Radiance comment -

-- 
 pab-opto, Freiburg, Germany, www.pab-opto.de



From radiance-general@radiance-online.org  Wed Oct 29 07:06:06 2003
From: radiance-general@radiance-online.org (radiance-general@radiance-online.org)
Date: Wed, 29 Oct 2003 08:06:06 +0100
Subject: Autoreply: Re: [Radiance-general] Re: modeling blinds / suggesting
 photon-map
Message-ID: <B0022214493@mailengine1.web2000.activeisp.com>

I am on leave until Friday 31st October. If you need a response before then please contact the office on 020 8892 7947.

Nick Walker




From radiance-general@radiance-online.org  Wed Oct 29 18:22:20 2003
From: radiance-general@radiance-online.org (Carsten Bauer)
Date: Wed, 29 Oct 2003 18:22:20 +0000
Subject: [Radiance-general] Re: modeling blinds / suggesting photon-map
References: <DCC0A522-09D3-11D8-8809-00306540F848@lmi.net> <3F9F65C8.4040403@pab-opto.de>
Message-ID: <3FA0055C.5050607@t-online.de>

Peter Apian-Bennewitz wrote:

>   raytracing based on the Metropolis algorithm.
> - end of compact early-morning Radiance comment -
>
- begin of lazy afternoon  Radiance reply -

Hi Peter ,
what's Metropolis ?? (certainly you don't mean the film :-).
Any url hints or other info pointers appreciated.....

-cb


From radiance-general@radiance-online.org  Wed Oct 29 16:11:16 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Wed, 29 Oct 2003 11:11:16 -0500
Subject: [Radiance-general] Compiling Radiance on Panther (Mac OS X 10.3)
Message-ID: <862D32AD-0A2A-11D8-AF2F-000393824274@rumblestrip.org>

Folks,

I recently picked up the new release of Apple's extraordinary operating 
system (it's nice).  I even performed what I like to call a "binary 
enema", deleting my entire partition and installing the new OS fresh.  
Naturally, one of the first proggies I wanted to get on here is 
Radiance, but the install script that worked so well on 10.2 is having 
problems on 10.3.

I downloaded the HEAD release, and tried:

sudo ./makeall install

Everything went well until:

	Where do you want the library files [/usr/local/lib/ray]?
	ls: lib: No such file or directory
	csh: d1: Subscript out of range.

The directory *is* there, and I own it, but even that shouldn't matter 
because I'm trying to install it as root by using the sudo command.  
Ideas?  I could download the binaries, but that's so boring.

-:-:-:-:-:-:-:-:-:-:-:-:-:-:-:-:-
   Rob Guglielmetti
rpg@rumblestrip.org
www.rumblestrip.org


From radiance-general@radiance-online.org  Wed Oct 29 16:12:26 2003
From: radiance-general@radiance-online.org (radiance-general@radiance-online.org)
Date: Wed, 29 Oct 2003 17:12:26 +0100
Subject: Autoreply: Re: [Radiance-general] Re: modeling blinds / suggesting
 photon-map
Message-ID: <B0024521291@mailengine3.web2000.activeisp.com>

I am on leave until Friday 31st October. If you need a response before then please contact the office on 020 8892 7947.

Nick Walker




From radiance-general@radiance-online.org  Wed Oct 29 16:15:18 2003
From: radiance-general@radiance-online.org (Giulio Antonutto)
Date: Wed, 29 Oct 2003 16:15:18 -0000
Subject: [Radiance-general] Compiling Radiance on Panther (Mac OS X 10
 .3)
Message-ID: <DC0CAEEA090E984C911D3B85B16C3F90302EFA@l-gnts05>

have you tried different places for lib's and bin's?

-----Original Message-----
From: Rob Guglielmetti [mailto:rpg@rumblestrip.org]
Sent: 29 October 2003 16:11
To: radiance-general@radiance-online.org
Subject: [Radiance-general] Compiling Radiance on Panther (Mac OS X
10.3)


Folks,

I recently picked up the new release of Apple's extraordinary operating 
system (it's nice).  I even performed what I like to call a "binary 
enema", deleting my entire partition and installing the new OS fresh.  
Naturally, one of the first proggies I wanted to get on here is 
Radiance, but the install script that worked so well on 10.2 is having 
problems on 10.3.

I downloaded the HEAD release, and tried:

sudo ./makeall install

Everything went well until:

	Where do you want the library files [/usr/local/lib/ray]?
	ls: lib: No such file or directory
	csh: d1: Subscript out of range.

The directory *is* there, and I own it, but even that shouldn't matter 
because I'm trying to install it as root by using the sudo command.  
Ideas?  I could download the binaries, but that's so boring.

-:-:-:-:-:-:-:-:-:-:-:-:-:-:-:-:-
   Rob Guglielmetti
rpg@rumblestrip.org
www.rumblestrip.org

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general

___________________________________________________________________
Electronic mail messages entering and leaving Arup business
systems are scanned for acceptability of content and viruses.

From radiance-general@radiance-online.org  Wed Oct 29 16:20:28 2003
From: radiance-general@radiance-online.org (radiance-general@radiance-online.org)
Date: Wed, 29 Oct 2003 17:20:28 +0100
Subject: Autoreply: RE: [Radiance-general] Compiling Radiance on Panther (Mac OS
 X 10 .3)
Message-ID: <B0022281982@mailengine1.web2000.activeisp.com>

I am on leave until Friday 31st October. If you need a response before then please contact the office on 020 8892 7947.

Nick Walker




From radiance-general@radiance-online.org  Wed Oct 29 16:32:01 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Wed, 29 Oct 2003 11:32:01 -0500
Subject: [Radiance-general] Compiling Radiance on Panther (Mac OS X 10 .3)
In-Reply-To: <DC0CAEEA090E984C911D3B85B16C3F90302EFA@l-gnts05>
References: <DC0CAEEA090E984C911D3B85B16C3F90302EFA@l-gnts05>
Message-ID: <6C79D839-0A2D-11D8-AF2F-000393824274@rumblestrip.org>

On Oct 29, 2003, at 11:15 AM, Giulio Antonutto wrote:

> have you tried different places for lib's and bin's?

Hi Giulio,

I tried an alternate lib directory (/usr/lib/ray/radiance), and even 
created a lib directory in my home directory, but that failed as well:

Where do you want the library files [/usr/local/lib/ray]? ~/lib/ray
ls: lib: No such file or directory
csh: d1: Subscript out of range.
rumblestrip:~/Desktop/Software/Radiance/source/ray rpg$

It says lib doesn't exist, yet:

rumblestrip:~/Desktop/Software/Radiance/source/ray rpg$ ls ~/
Desktop         Library         Music           Public          lib
Documents       Movies          Pictures        Sites

Hmmm...

-:-:-:-:-:-:-:-:-:-:-:-:-:-:-:-:-
   Rob Guglielmetti
rpg@rumblestrip.org
www.rumblestrip.org


From radiance-general@radiance-online.org  Wed Oct 29 16:33:53 2003
From: radiance-general@radiance-online.org (radiance-general@radiance-online.org)
Date: Wed, 29 Oct 2003 17:33:53 +0100
Subject: Autoreply: Re: [Radiance-general] Compiling Radiance on Panther (Mac OS
 X 10 .3)
Message-ID: <B0024523067@mailengine3.web2000.activeisp.com>

I am on leave until Friday 31st October. If you need a response before then please contact the office on 020 8892 7947.

Nick Walker




From radiance-general@radiance-online.org  Wed Oct 29 16:13:31 2003
From: radiance-general@radiance-online.org (radiance-general@radiance-online.org)
Date: Wed, 29 Oct 2003 17:13:31 +0100
Subject: Autoreply: [Radiance-general] Compiling Radiance on Panther (Mac OS X
 10.3)
Message-ID: <B0027574845@mailengine4.web2000.activeisp.com>

I am on leave until Friday 31st October. If you need a response before then please contact the office on 020 8892 7947.

Nick Walker




From radiance-general@radiance-online.org  Wed Oct 29 16:47:52 2003
From: radiance-general@radiance-online.org (Giulio Antonutto)
Date: Wed, 29 Oct 2003 16:47:52 -0000
Subject: [Radiance-general] Compiling Radiance on Panther (Mac OS X 10
 .3)
Message-ID: <DC0CAEEA090E984C911D3B85B16C3F90302EFE@l-gnts05>

Just thinking about this:

try to change in the terminal between csh to tcsh

in the preferences of term.app:

"execute this command:
/bin/tcsh "

open a new window and try again..... I am crossing my fingers!!




-----Original Message-----
From: Rob Guglielmetti [mailto:rpg@rumblestrip.org]
Sent: 29 October 2003 16:32
To: radiance-general@radiance-online.org
Subject: Re: [Radiance-general] Compiling Radiance on Panther (Mac OS X
10 .3)



On Oct 29, 2003, at 11:15 AM, Giulio Antonutto wrote:

> have you tried different places for lib's and bin's?

Hi Giulio,

I tried an alternate lib directory (/usr/lib/ray/radiance), and even 
created a lib directory in my home directory, but that failed as well:

Where do you want the library files [/usr/local/lib/ray]? ~/lib/ray
ls: lib: No such file or directory
csh: d1: Subscript out of range.
rumblestrip:~/Desktop/Software/Radiance/source/ray rpg$

It says lib doesn't exist, yet:

rumblestrip:~/Desktop/Software/Radiance/source/ray rpg$ ls ~/
Desktop         Library         Music           Public          lib
Documents       Movies          Pictures        Sites

Hmmm...

-:-:-:-:-:-:-:-:-:-:-:-:-:-:-:-:-
   Rob Guglielmetti
rpg@rumblestrip.org
www.rumblestrip.org

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general

___________________________________________________________________
Electronic mail messages entering and leaving Arup business
systems are scanned for acceptability of content and viruses.

From radiance-general@radiance-online.org  Wed Oct 29 16:53:45 2003
From: radiance-general@radiance-online.org (radiance-general@radiance-online.org)
Date: Wed, 29 Oct 2003 17:53:45 +0100
Subject: Autoreply: RE: [Radiance-general] Compiling Radiance on Panther (Mac OS
 X 10 .3)
Message-ID: <B0024524651@mailengine3.web2000.activeisp.com>

I am on leave until Friday 31st October. If you need a response before then please contact the office on 020 8892 7947.

Nick Walker




From radiance-general@radiance-online.org  Wed Oct 29 17:26:56 2003
From: radiance-general@radiance-online.org (Francisco Pereira/CS-UoB)
Date: Wed, 29 Oct 2003 17:26:56 -0000
Subject: [Radiance-general] Compiling Radiance on Panther (Mac OS X 10 .3)
In-Reply-To: <DC0CAEEA090E984C911D3B85B16C3F90302EFE@l-gnts05>
Message-ID: <007d01c39e41$da81ac20$0100a8c0@cs.bris.ac.uk>

Hi,

I new to this but I had the same problem with the 3.5 HEAD version on
linux.
The problem is not the directory (lib) creation but the source. In 3.5
HEAD version source tree the lib directory is missing. I copied the lib
form 3.5 source dir into the 3.5 HEAD version tree.

I hope this will help u.

Cheers,
Francisco Pereira


-----Original Message-----
From: radiance-general-admin@radiance-online.org
[mailto:radiance-general-admin@radiance-online.org] On Behalf Of Giulio
Antonutto
Sent: 29 October 2003 16:48
To: 'radiance-general@radiance-online.org'
Subject: RE: [Radiance-general] Compiling Radiance on Panther (Mac OS X
10 .3)

Just thinking about this:

try to change in the terminal between csh to tcsh

in the preferences of term.app:

"execute this command:
/bin/tcsh "

open a new window and try again..... I am crossing my fingers!!




-----Original Message-----
From: Rob Guglielmetti [mailto:rpg@rumblestrip.org]
Sent: 29 October 2003 16:32
To: radiance-general@radiance-online.org
Subject: Re: [Radiance-general] Compiling Radiance on Panther (Mac OS X
10 .3)



On Oct 29, 2003, at 11:15 AM, Giulio Antonutto wrote:

> have you tried different places for lib's and bin's?

Hi Giulio,

I tried an alternate lib directory (/usr/lib/ray/radiance), and even 
created a lib directory in my home directory, but that failed as well:

Where do you want the library files [/usr/local/lib/ray]? ~/lib/ray
ls: lib: No such file or directory
csh: d1: Subscript out of range.
rumblestrip:~/Desktop/Software/Radiance/source/ray rpg$

It says lib doesn't exist, yet:

rumblestrip:~/Desktop/Software/Radiance/source/ray rpg$ ls ~/
Desktop         Library         Music           Public          lib
Documents       Movies          Pictures        Sites

Hmmm...

-:-:-:-:-:-:-:-:-:-:-:-:-:-:-:-:-
   Rob Guglielmetti
rpg@rumblestrip.org
www.rumblestrip.org

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general

___________________________________________________________________
Electronic mail messages entering and leaving Arup business
systems are scanned for acceptability of content and viruses.
_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general

---
Incoming mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.530 / Virus Database: 325 - Release Date: 22/10/2003
 

---
Outgoing mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.530 / Virus Database: 325 - Release Date: 22/10/2003
 


From radiance-general@radiance-online.org  Wed Oct 29 17:28:17 2003
From: radiance-general@radiance-online.org (radiance-general@radiance-online.org)
Date: Wed, 29 Oct 2003 18:28:17 +0100
Subject: Autoreply: RE: [Radiance-general] Compiling Radiance on Panther (Mac OS
 X 10 .3)
Message-ID: <B0024527235@mailengine3.web2000.activeisp.com>

I am on leave until Friday 31st October. If you need a response before then please contact the office on 020 8892 7947.

Nick Walker




From radiance-general@radiance-online.org  Wed Oct 29 17:33:46 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Wed, 29 Oct 2003 12:33:46 -0500
Subject: [Radiance-general] Compiling Radiance on Panther (Mac OS X 10 .3)
In-Reply-To: <DC0CAEEA090E984C911D3B85B16C3F90302EFE@l-gnts05>
References: <DC0CAEEA090E984C911D3B85B16C3F90302EFE@l-gnts05>
Message-ID: <0CD6E7BA-0A36-11D8-AF2F-000393824274@rumblestrip.org>

On Oct 29, 2003, at 11:47 AM, Giulio Antonutto wrote:

> Just thinking about this:
>
> try to change in the terminal between csh to tcsh
>
> in the preferences of term.app:
>
> "execute this command:
> /bin/tcsh "
>
> open a new window and try again..... I am crossing my fingers!!

Hi again,

I had already tried that with csh, but tried again per your instruction 
with tcsh.  No go.  Same error.

(note, the default shell in OS X 10.3 is now bash, as it should be ;-) )

-:-:-:-:-:-:-:-:-:-:-:-:-:-:-:-:-
   Rob Guglielmetti
rpg@rumblestrip.org
www.rumblestrip.org


From radiance-general@radiance-online.org  Wed Oct 29 17:33:35 2003
From: radiance-general@radiance-online.org (Jack de Valpine)
Date: Wed, 29 Oct 2003 12:33:35 -0500
Subject: [Radiance-general] Re: modeling blinds / suggesting photon-map
References: <DCC0A522-09D3-11D8-8809-00306540F848@lmi.net> <3F9F65C8.4040403@pab-opto.de> <3FA0055C.5050607@t-online.de>
Message-ID: <3F9FF9EF.5060503@visarc.com>

Hi Carsten,

As a start, check out:

http://graphics.stanford.edu/papers/metro/
http://graphics.lcs.mit.edu/~sumner/classes/6.838-F98/mlt/

also search on: metropolis light transport in your favorite engine.

-Jack

Carsten Bauer wrote:

> Peter Apian-Bennewitz wrote:
>
>>   raytracing based on the Metropolis algorithm.
>> - end of compact early-morning Radiance comment -
>>
> - begin of lazy afternoon  Radiance reply -
>
> Hi Peter ,
> what's Metropolis ?? (certainly you don't mean the film :-).
> Any url hints or other info pointers appreciated.....
>
> -cb
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
> .
>

-- 
#	John E. de Valpine
#	president
#
#	visarc incorporated
#	http://www.visarc.com
#
#	channeling technology for superior design and construction




From radiance-general@radiance-online.org  Wed Oct 29 17:35:56 2003
From: radiance-general@radiance-online.org (Jack de Valpine)
Date: Wed, 29 Oct 2003 12:35:56 -0500
Subject: [Radiance-general] Compiling Radiance on Panther (Mac OS X 10
 .3)
References: <DC0CAEEA090E984C911D3B85B16C3F90302EFE@l-gnts05> <0CD6E7BA-0A36-11D8-AF2F-000393824274@rumblestrip.org>
Message-ID: <3F9FFA7C.8020108@visarc.com>

I am guessing here, but is there a possibility that root has a different 
path setup and so cannot find the directories that are being specd for 
some bizarre reason?

Rob Guglielmetti wrote:

>
> On Oct 29, 2003, at 11:47 AM, Giulio Antonutto wrote:
>
>> Just thinking about this:
>>
>> try to change in the terminal between csh to tcsh
>>
>> in the preferences of term.app:
>>
>> "execute this command:
>> /bin/tcsh "
>>
>> open a new window and try again..... I am crossing my fingers!!
>
>
> Hi again,
>
> I had already tried that with csh, but tried again per your 
> instruction with tcsh.  No go.  Same error.
>
> (note, the default shell in OS X 10.3 is now bash, as it should be ;-) )
>
> -:-:-:-:-:-:-:-:-:-:-:-:-:-:-:-:-
>   Rob Guglielmetti
> rpg@rumblestrip.org
> www.rumblestrip.org
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>

-- 
#	John E. de Valpine
#	president
#
#	visarc incorporated
#	http://www.visarc.com
#
#	channeling technology for superior design and construction




From radiance-general@radiance-online.org  Wed Oct 29 17:38:21 2003
From: radiance-general@radiance-online.org (radiance-general@radiance-online.org)
Date: Wed, 29 Oct 2003 18:38:21 +0100
Subject: Autoreply: Re: [Radiance-general] Compiling Radiance on Panther (Mac OS
 X 10 .3)
Message-ID: <B0027582709@mailengine4.web2000.activeisp.com>

I am on leave until Friday 31st October. If you need a response before then please contact the office on 020 8892 7947.

Nick Walker




From radiance-general@radiance-online.org  Wed Oct 29 17:50:14 2003
From: radiance-general@radiance-online.org (radiance-general@radiance-online.org)
Date: Wed, 29 Oct 2003 18:50:14 +0100
Subject: Autoreply: Re: [Radiance-general] Compiling Radiance on Panther (Mac OS
 X 10 .3)
Message-ID: <B0024528957@mailengine3.web2000.activeisp.com>

I am on leave until Friday 31st October. If you need a response before then please contact the office on 020 8892 7947.

Nick Walker




From radiance-general@radiance-online.org  Wed Oct 29 17:51:27 2003
From: radiance-general@radiance-online.org (radiance-general@radiance-online.org)
Date: Wed, 29 Oct 2003 18:51:27 +0100
Subject: Autoreply: Re: [Radiance-general] Re: modeling blinds / suggesting
 photon-map
Message-ID: <B0027583752@mailengine4.web2000.activeisp.com>

I am on leave until Friday 31st October. If you need a response before then please contact the office on 020 8892 7947.

Nick Walker




From radiance-general@radiance-online.org  Wed Oct 29 20:34:25 2003
From: radiance-general@radiance-online.org (Carsten Bauer)
Date: Wed, 29 Oct 2003 20:34:25 +0000
Subject: Autoreply: Re: [Radiance-general] Compiling Radiance on Panther (Mac
 OS X 10 .3)
References: <DC0CAEEA090E984C911D3B85B16C3F90302EFE@l-gnts05> <0CD6E7BA-0A36-11D8-AF2F-000393824274@rumblestrip.org>
Message-ID: <3FA02451.3060809@t-online.de>

I'm sitting on the toilet right now. If you need urrrrrgent response 
please call 0815-666-4711

-captain B.


BTW: @ Rob: path specifying for the script needs to be done in absolute 
paths( if I don't mix things up),
                 so at least this one :
                   where do you want the library files 
[/usr/local/lib/ray]? ~/lib/ray
                  doesn't work (I'm not shure, everything seems  sooo 
long ago...)

 @ Jack  : thanks for the pointer, I'm curious what I'll find there



From radiance-general@radiance-online.org  Wed Oct 29 21:24:04 2003
From: radiance-general@radiance-online.org (Carsten Bauer)
Date: Wed, 29 Oct 2003 21:24:04 +0000
Subject: Autoreply: Re: Autoreply: Re: [Radiance-general] Compiling Radiance
 on Panther (Mac OS X 10 .3)
References: <DC0CAEEA090E984C911D3B85B16C3F90302EFE@l-gnts05> <0CD6E7BA-0A36-11D8-AF2F-000393824274@rumblestrip.org> <3FA02451.3060809@t-online.de>
Message-ID: <3FA02FF4.2020203@t-online.de>

Automatic error correction for message xyz-12 to Mr. Rob G:

the hint about the absolut path settings is of course rubbish in this 
case as you inserted the "~" ...

Automatic apology from :
-captainB


From radiance-general@radiance-online.org  Wed Oct 29 19:21:45 2003
From: radiance-general@radiance-online.org (Fitzsimmons, Rob)
Date: Wed, 29 Oct 2003 11:21:45 -0800
Subject: [Radiance-general] High dynamic range image builder
Message-ID: <7B2F6EA5E35E214882CB9828962BC3CF04D691C4@corvallis.summit.fiserv.com>

Thanks Greg for all your programming!
I have not yet used Photosphere for HDRI creation, but I use it regularly to
keep track of my Radiance pics.
I like how it keeps records of the rpict options
Someday I'll try the mirrored globe approach - after I buy my first digital
camera :-P
So much quicker than when I was converting to 48 bit Photoshop files. The
Auto exposure is great!

Keep up the good work

Rob Fitzsimmons

-----Original Message-----
From: Greg Ward
To: radiance-general@radiance-online.org
Sent: 10/25/2003 8:09 AM
Subject: [Radiance-general] High dynamic range image builder

Dear Group,

I have finally managed to recompile the command-line version of my HDR 
image builder.  I have uploaded two versions of this program, one for 
Linux and one for Mac OS X.  I have also written a separate program to 
perform lens flare removal, which may be applied during hdrgen or as a 
post-process.  I have a simple HTML man page for hdrgen, but not for 
hdrflare as it's pretty basic and has no options.

The files are available from my website at:

	http://www.anyhere.com/gward/pickup/hdrgen_linux.tar.gz
	http://www.anyhere.com/gward/pickup/hdrgen_macosx.tar.gz

Both programs will output either Radiance RGBE, 32-bit/pixel LogLuv 
TIFF, or PIZ-compressed EXR format images.  The input to hdrgen may be 
either JPEG or TIFF.  If the input files have valid camera exposure 
information in the header, this will be used to determine the relative 
and absolute exposure differences.  Otherwise, you will have to enter 
the exposure multipliers on the command line.  For those on a Mac who 
prefer a nice user interface, there is of course Photosphere.  The 
latest 1.1 release contains all the new goodies:

	http://www.anyhere.com/gward/pickup/photosphere.tar.gz

This version of the HDR builder includes a new ghost removal algorithm 
in addition to the alignment and lens flare removal options.  The ghost 
removal algorithm looks for parts of the scene where things have 
changed between exposures, and chooses the best exposure for those 
regions.  The alignment algorithm is written up in an upcoming JGT 
article.  I haven't written up the flare removal algorithm, but I hope 
to at some point, along with the ghost removal technique.  Everything 
is automatic, so if one of the techniques doesn't work, there's not 
much you can do about it but switch it off.  At least the whole thing 
is fast, so there's not much harm in running it multiple times.

Enjoy!
-Greg

P.S.  The Linux version is a little slower than it should be because 
the version of gcc I used has a broken optimizer.  I hope to recompile 
with optimizations in the near future, and will send out a follow-up 
announcement when I do.

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general


From radiance-general@radiance-online.org  Wed Oct 29 19:24:03 2003
From: radiance-general@radiance-online.org (radiance-general@radiance-online.org)
Date: Wed, 29 Oct 2003 20:24:03 +0100
Subject: Autoreply: RE: [Radiance-general] High dynamic range image builder
Message-ID: <B0027590230@mailengine4.web2000.activeisp.com>

I am on leave until Friday 31st October. If you need a response before then please contact the office on 020 8892 7947.

Nick Walker




From radiance-general@radiance-online.org  Wed Oct 29 20:04:49 2003
From: radiance-general@radiance-online.org (Fitzsimmons, Rob)
Date: Wed, 29 Oct 2003 12:04:49 -0800
Subject: Autoreply: Re: [Radiance-general] Compiling Radiance on Panth
 er (Mac OS X 10 .3)
Message-ID: <7B2F6EA5E35E214882CB9828962BC3CF04D691C5@corvallis.summit.fiserv.com>

There's something I could have gone all day without knowing!


From radiance-general@radiance-online.org  Wed Oct 29 20:07:14 2003
From: radiance-general@radiance-online.org (radiance-general@radiance-online.org)
Date: Wed, 29 Oct 2003 21:07:14 +0100
Subject: Autoreply: RE: Autoreply: Re: [Radiance-general] Compiling Radiance on
 Panth er (Mac OS X 10 .3)
Message-ID: <B0022324768@mailengine2.web2000.activeisp.com>

I am on leave until Friday 31st October. If you need a response before then please contact the office on 020 8892 7947.

Nick Walker




From radiance-general@radiance-online.org  Wed Oct 29 20:26:05 2003
From: radiance-general@radiance-online.org (David Janello)
Date: Wed, 29 Oct 2003 12:26:05 -0800 (PST)
Subject: [Radiance-general] Problems Running Radiance on Linux Alpha (RedHat 7.1)
Message-ID: <20031029202605.83383.qmail@web20810.mail.yahoo.com>

Greetings,

I have been trying to run radiance using the pre-built
binaries and some home-grown builds using gcc and ccc.

When I try to run the tutorial demo through rview (cut
and pasted from the man file), the rview rendering
window appears, says that rendering is complete, but
remains blank.  The command line interface says

warning- no light sources found

oconv and getinfo appear to work OK, but the rview
program will only produce a blank screen.

The results are consistent on my ds20 and a couple of
xp1000s.

I was wondering if this was a general radiance issue
or one specific to the 64-bit alpha platform.

I'm running RHAT 7.1 on all machines.

--David Janello
simulation and searches, llc
www.simulationandsearches.com

__________________________________
Do you Yahoo!?
Exclusive Video Premiere - Britney Spears
http://launch.yahoo.com/promos/britneyspears/

From radiance-general@radiance-online.org  Wed Oct 29 20:28:27 2003
From: radiance-general@radiance-online.org (radiance-general@radiance-online.org)
Date: Wed, 29 Oct 2003 21:28:27 +0100
Subject: Autoreply: [Radiance-general] Problems Running Radiance on Linux Alpha
 (RedHat 7.1)
Message-ID: <B0027595117@mailengine4.web2000.activeisp.com>

I am on leave until Friday 31st October. If you need a response before then please contact the office on 020 8892 7947.

Nick Walker




From radiance-general@radiance-online.org  Wed Oct 29 11:55:31 2003
From: radiance-general@radiance-online.org (Alexa I. Ruppertsberg)
Date: Wed, 29 Oct 2003 11:55:31 +0000
Subject: [Radiance-general] Illuminaire file
Message-ID: <3F9FAAB3.3060807@bradford.ac.uk>

Hello,

I'm trying to obtain an illuminaire file for an
ALTMAN Micro Ellipse ME/MR 16 light with a 75W, 12 V EYC bulb.
The manufacturer is rather silent to my emails and I'm now wondering if 
someone has that info or something that is quite similar to it.

Cheers,
Alexa

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Dr. Alexa I. Ruppertsberg
Department of Optometry
University of Bradford
Bradford
BD7 1DP
UK
email: a.i.ruppertsberg@bradford.ac.uk
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~



From radiance-general@radiance-online.org  Wed Oct 29 18:12:45 2003
From: radiance-general@radiance-online.org (John S. An)
Date: Wed, 29 Oct 2003 13:12:45 -0500
Subject: [Radiance-general] Re: Radiance-general digest, Vol 1 #389 - 30 msgs
In-Reply-To: <20031029175801.10580.36122.Mailman@radiance-on-linux.org>
References: <20031029175801.10580.36122.Mailman@radiance-on-linux.org>
Message-ID: <7EFF1AC6-0A3B-11D8-A198-000A95871DF2@gsd.harvard.edu>

Rob,

I also picked up Panther, and initially ran into the same problems you 
did.

I'm not sure what exactly fixed the problem, but here is what I did to 
get the install to run.

1) Install XCode (the developer's tools)
2) Download and extract radiance-HEAD.tgz
3) Download extract rad3R5supp.tar.gz
4) Copy the contents of rad3R5supp into the appropriate places into the 
content of radiance-HEAD
5) Run the makeall install script

So far, it seems as if the install went fine.  Let me know if this 
works for you as well.


John




> Message: 2
> To: radiance-general@radiance-online.org
> From: Rob Guglielmetti <rpg@rumblestrip.org>
> Date: Wed, 29 Oct 2003 11:11:16 -0500
> Subject: [Radiance-general] Compiling Radiance on Panther (Mac OS X 
> 10.3)
> Reply-To: radiance-general@radiance-online.org
>
> Folks,
>
> I recently picked up the new release of Apple's extraordinary operating
> system (it's nice).  I even performed what I like to call a "binary
> enema", deleting my entire partition and installing the new OS fresh.
> Naturally, one of the first proggies I wanted to get on here is
> Radiance, but the install script that worked so well on 10.2 is having
> problems on 10.3.
>
> I downloaded the HEAD release, and tried:
>
> sudo ./makeall install
>
> Everything went well until:
>
> 	Where do you want the library files [/usr/local/lib/ray]?
> 	ls: lib: No such file or directory
> 	csh: d1: Subscript out of range.
>
> The directory *is* there, and I own it, but even that shouldn't matter
> because I'm trying to install it as root by using the sudo command.
> Ideas?  I could download the binaries, but that's so boring.
>
> -:-:-:-:-:-:-:-:-:-:-:-:-:-:-:-:-
>    Rob Guglielmetti
> rpg@rumblestrip.org
> www.rumblestrip.org
>


From radiance-general@radiance-online.org  Wed Oct 29 21:06:37 2003
From: radiance-general@radiance-online.org (radiance-general@radiance-online.org)
Date: Wed, 29 Oct 2003 22:06:37 +0100
Subject: Autoreply: [Radiance-general] Re: Radiance-general digest, Vol 1 #389 -
 30 msgs
Message-ID: <B0022300096@mailengine1.web2000.activeisp.com>

I am on leave until Friday 31st October. If you need a response before then please contact the office on 020 8892 7947.

Nick Walker




From radiance-general@radiance-online.org  Wed Oct 29 21:06:32 2003
From: radiance-general@radiance-online.org (radiance-general@radiance-online.org)
Date: Wed, 29 Oct 2003 22:06:32 +0100
Subject: Autoreply: [Radiance-general] Illuminaire file
Message-ID: <B0027597740@mailengine4.web2000.activeisp.com>

I am on leave until Friday 31st October. If you need a response before then please contact the office on 020 8892 7947.

Nick Walker




From radiance-general@radiance-online.org  Wed Oct 29 21:39:38 2003
From: radiance-general@radiance-online.org (Mark Stock)
Date: Wed, 29 Oct 2003 16:39:38 -0500 (EST)
Subject: [Radiance-general] Several updates
Message-ID: <Pine.SOL.4.58.0310291625290.13823@tetris.gpcc.itd.umich.edu>

First, I frighteningly noticed that the rpict defaults had changed
recently when I ran PB's bench2 benchmark test and my Athlon took
an hour to do a 5-minute job. Thus, I updated the "bench2" benchmark
test to specifically set the rpict parameters to the old default
values. So, new chips don't look awful anymore. The benchmark page
is at the following URL, and it hasn't seen many new entries
recently.

http://mark.technolope.org/pages/rad_bench.html

Second, and I'm not sure if I sent this to the group, I updated
my "Radiance resolution and filtering test" page to include the
new behavior of the -r option in pfilt for Radiance
versions 3R5 and newer. The results are on the bottom half of
this page:

http://mark.technolope.org/radmisc/resolution_test/

Last, and again, if I've mentioned this before, please forgive
me, I've updated my "-aa 0" test page to include the -ps 1
option, and the results have changed somewhat. This page is at:

http://mark.technolope.org/radmisc/aa0_ps1_test/final.html

I hope some of this will come in handy to someone. It's helped
me refine some of compilation and rendering strategies.

Mark

From radiance-general@radiance-online.org  Wed Oct 29 21:44:26 2003
From: radiance-general@radiance-online.org (radiance-general@radiance-online.org)
Date: Wed, 29 Oct 2003 22:44:26 +0100
Subject: Autoreply: [Radiance-general] Several updates
Message-ID: <B0022304345@mailengine1.web2000.activeisp.com>

I am on leave until Friday 31st October. If you need a response before then please contact the office on 020 8892 7947.

Nick Walker




From radiance-general@radiance-online.org  Wed Oct 29 21:51:33 2003
From: radiance-general@radiance-online.org (Roland Schregle)
Date: Wed, 29 Oct 2003 22:51:33 +0100
Subject: Autoreply: [Radiance-general] Illuminaire file
In-Reply-To: <B0027597740@mailengine4.web2000.activeisp.com>
References: <B0027597740@mailengine4.web2000.activeisp.com>
Message-ID: <3FA03665.6010804@gmx.net>

nick@michaelpopper.com wrote:
> I am on leave until Friday 31st October. If you need a response before then please contact the office on 020 8892 7947.

Ok Nick, no hard feelings, but we *got* the message.
Maybe someone should call that number and tell them to redirect Nick's 
mail to /dev/null...

-- 
Roland Schregle
PhD candidate, Fraunhofer Institute for Solar Energy Systems
RADIANCE Photon Map page: www.ise.fhg.de/radiance/photon-map

END OF LINE. (MCP)


From radiance-general@radiance-online.org  Wed Oct 29 21:54:59 2003
From: radiance-general@radiance-online.org (radiance-general@radiance-online.org)
Date: Wed, 29 Oct 2003 22:54:59 +0100
Subject: Autoreply: Re: Autoreply: [Radiance-general] Illuminaire file
Message-ID: <B0024545528@mailengine3.web2000.activeisp.com>

I am on leave until Friday 31st October. If you need a response before then please contact the office on 020 8892 7947.

Nick Walker




From radiance-general@radiance-online.org  Thu Oct 30 01:45:34 2003
From: radiance-general@radiance-online.org (Carsten Bauer)
Date: Thu, 30 Oct 2003 01:45:34 +0000
Subject: Autoreplay Re: Autoreply: [Radiance-general] Illuminaire file
References: <B0027597740@mailengine4.web2000.activeisp.com> <3FA03665.6010804@gmx.net>
Message-ID: <3FA06D3E.3000008@t-online.de>

Roland Schregle wrote:

> nick@michaelpopper.com wrote:
>
>> I am on leave until Friday 31st October. If you need a response 
>> before then please contact the office on 020 8892 7947.
>
>
> Ok Nick, no hard feelings, but we *got* the message.
> Maybe someone should call that number and tell them to redirect Nick's 
> mail to /dev/null...
>
just reduce the -ab parameter of radiance-online  :-) (-ab:  # of 
autoreply-bounces)

-cb



From radiance-general@radiance-online.org  Wed Oct 29 23:35:14 2003
From: radiance-general@radiance-online.org (radiance-general@radiance-online.org)
Date: Thu, 30 Oct 2003 00:35:14 +0100
Subject: Autoreply: Re: Autoreplay Re: Autoreply: [Radiance-general] Illuminaire
 file
Message-ID: <B0022317449@mailengine1.web2000.activeisp.com>

I am on leave until Friday 31st October. If you need a response before then please contact the office on 020 8892 7947.

Nick Walker




From radiance-general@radiance-online.org  Thu Oct 30 02:24:42 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Wed, 29 Oct 2003 18:24:42 -0800
Subject: [Radiance-general] Re: good day to you sir
In-Reply-To: <20031029082146.30958.qmail@webmail32.rediffmail.com>
Message-ID: <381D4CCE-0A80-11D8-B064-00306540F848@lmi.net>

Hello Shiya,

I am forwarding your question to the radiance-general mailing list, 
where I think there may be others interested in this problem, some of 
whom may have a good idea or may have done something similar and could 
be of help.  If you are not subscribed to this group already, please go 
to

	http://www.radiance-online.org

and sign up.  There is no fee associated with membership, but there are 
many benefits.  (Note to others -- please CC Shiya on your response in 
case she's not yet on the list.)

> From: "shiya kuriachan odackal" <elizabeth_k@rediffmail.com>
> Date: Wed Oct 29, 2003  12:21:46  AM US/Pacific
> To: gward@lmi.net
> Subject: good day to you sir
>
> Dear sir,
> I'm a beginner in Radiance and i'm working on it as a part of my 
> project work.I've simulated some figures using Aotucad and then 
> imported materials from radiance library,i've used desktop radiance in 
> windows.i've completed the simulation successfully,and got the 
> luxlevels and the rendered image of the model createdi'm facing a 
> major problem in proceeding forward with my project. The initial aim 
> of my project is based on collecting the daylighting and electrical 
> lighting lux levels  for a time period of two months or so..inorder to 
> integrate both daylight and electric light and apply the 
> conrols.But,i'm unable to collect the continous data for a specific 
> day with a given sky condition.Is there any way in which i get the 
> continous lux levels for a specified day if i give the required 
> intervals?also i would like to know how to apply the controls to the 
> model if i'm simulating using electrical lighting.Is there any 
> possibility of appling dimming strategies?Please reply to this 
> mail,since i'm badly in need of information from you.
>                    Thanking you,
> shiya kuriachan.

If I understand your question correctly, you are attempting to design 
some daylighting control strategies or algorithms for a specific space, 
and need a continuous representation of daylight throughout the day 
and/or year.  I know that Christophe Reinhart has developed a system 
for the efficient calculation of annual daylight in Radiance, but I'm 
not sure if it could be easily adapted to your application.  You can 
find out more about it on the above radiance-online site under 
"add-ons," I believe.

If it were me, I would first ensure that I had arrived at a sufficient 
set of calculation parameters for rtrace, then apply them in separately 
computing illuminance levels at the workplane for the electric lighting 
zones I had control over, and daylight levels throughout the day at 
specific intervals.  I would then interpolate the resulting daylight 
values for in-between times of day, and use multipliers on the electric 
lighting zones in accordance with the available dimming/control levels. 
  Solving for the desired workplane illuminance would then be a fairly 
straightforward linear optimization problem.

The difficulty is of course in the details, but this is one possible 
approach.
-Greg


From radiance-general@radiance-online.org  Thu Oct 30 15:42:28 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Thu, 30 Oct 2003 07:42:28 -0800
Subject: [Radiance-general] Re: Compiling Radiance on Panther (Mac OS X 10.3)
In-Reply-To: <862D32AD-0A2A-11D8-AF2F-000393824274@rumblestrip.org>
Message-ID: <AAAC5B52-0AEF-11D8-BCDC-00306540F848@lmi.net>

Hi Rob,

You made the same mistake I made last time I installed from HEAD -- you 
forgot to download the rad3R5sup.tar.gz file and overlay it on the 
distribution prior to installation.

I made a correction to the "installib" script so it doesn't screw up 
like this next time.  It's very confusing the way it is, because you 
have no idea from the message that it's ray/lib that's missing rather 
than /usr/local/lib/ray.

Let me know if it works!
-Greg

> From: Rob Guglielmetti <rpg@rumblestrip.org>
> Date: Wed Oct 29, 2003  8:11:16  AM US/Pacific
>
> Folks,
>
> I recently picked up the new release of Apple's extraordinary 
> operating system (it's nice).  I even performed what I like to call a 
> "binary enema", deleting my entire partition and installing the new OS 
> fresh.  Naturally, one of the first proggies I wanted to get on here 
> is Radiance, but the install script that worked so well on 10.2 is 
> having problems on 10.3.
>
> I downloaded the HEAD release, and tried:
>
> sudo ./makeall install
>
> Everything went well until:
>
> 	Where do you want the library files [/usr/local/lib/ray]?
> 	ls: lib: No such file or directory
> 	csh: d1: Subscript out of range.
>
> The directory *is* there, and I own it, but even that shouldn't matter 
> because I'm trying to install it as root by using the sudo command.  
> Ideas?  I could download the binaries, but that's so boring.
>
> -:-:-:-:-:-:-:-:-:-:-:-:-:-:-:-:-
>   Rob Guglielmetti
> rpg@rumblestrip.org
> www.rumblestrip.org


From radiance-general@radiance-online.org  Thu Oct 30 16:04:50 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Thu, 30 Oct 2003 11:04:50 -0500
Subject: [Radiance-general] Re: Compiling Radiance on Panther (Mac OS X 10.3)
In-Reply-To: <AAAC5B52-0AEF-11D8-BCDC-00306540F848@lmi.net>
References: <AAAC5B52-0AEF-11D8-BCDC-00306540F848@lmi.net>
Message-ID: <3FA136A2.9020107@rumblestrip.org>

Greg Ward wrote:
> Hi Rob,
> 
> You made the same mistake I made last time I installed from HEAD -- you 
> forgot to download the rad3R5sup.tar.gz file and overlay it on the 
> distribution prior to installation.
> 
> I made a correction to the "installib" script so it doesn't screw up 
> like this next time.  It's very confusing the way it is, because you 
> have no idea from the message that it's ray/lib that's missing rather 
> than /usr/local/lib/ray.
> 
> Let me know if it works!

Hi Greg,

Thanks for the info, John An and Francisco P. said basically the same 
thing to me yesterday. You guys were right about my initial problem; 
overlaying the support files got the sctipt to get further along 
(thanks), but the compile process is still having some problems.  It's 
spewing tons of errors, and only about half the programs are getting built.

Things start going haywire when the process looks for this file: GL/glu.h

... and things fall apart from there.  I have a copy of the output from 
the build process if anyone wants to peek at it.  Maybe it's just the 
way I "overliad" the support folders on the HEAD distro.  What is the 
preferred method for that?

----

      Rob Guglielmetti

e. rpg@rumblestrip.org
w. www.rumblestrip.org


From radiance-general@radiance-online.org  Thu Oct 30 16:20:34 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Thu, 30 Oct 2003 08:20:34 -0800
Subject: [Radiance-general] Re: Compiling Radiance on Panther (Mac OS X 10.3)
In-Reply-To: <3FA136A2.9020107@rumblestrip.org>
Message-ID: <FD4B7C7A-0AF4-11D8-BCDC-00306540F848@lmi.net>

Hi Rob,

I just got back from NYC, and didn't read through all the other 
responses (and "vacation" messages) before sending my reply.

For the GL stuff, sounds like you need to download the developer's 
option for the X11 server to get the correct headers.  At least I'm 
hoping.  Check the Apple website and see if you can find some libraries 
and headers for X11.

-G

> From: Rob Guglielmetti <rpg@rumblestrip.org>
> Date: Thu Oct 30, 2003  8:04:50  AM US/Pacific
>
> Greg Ward wrote:
>> Hi Rob,
>> You made the same mistake I made last time I installed from HEAD -- 
>> you forgot to download the rad3R5sup.tar.gz file and overlay it on 
>> the distribution prior to installation.
>> I made a correction to the "installib" script so it doesn't screw up 
>> like this next time.  It's very confusing the way it is, because you 
>> have no idea from the message that it's ray/lib that's missing rather 
>> than /usr/local/lib/ray.
>> Let me know if it works!
>
> Hi Greg,
>
> Thanks for the info, John An and Francisco P. said basically the same 
> thing to me yesterday. You guys were right about my initial problem; 
> overlaying the support files got the sctipt to get further along 
> (thanks), but the compile process is still having some problems.  It's 
> spewing tons of errors, and only about half the programs are getting 
> built.
>
> Things start going haywire when the process looks for this file: 
> GL/glu.h
>
> ... and things fall apart from there.  I have a copy of the output 
> from the build process if anyone wants to peek at it.  Maybe it's just 
> the way I "overliad" the support folders on the HEAD distro.  What is 
> the preferred method for that?
>
> ----
>
>      Rob Guglielmetti


From radiance-general@radiance-online.org  Thu Oct 30 16:44:38 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Thu, 30 Oct 2003 11:44:38 -0500
Subject: [Radiance-general] Re: Compiling Radiance on Panther (Mac OS
 X 10.3)
In-Reply-To: <FD4B7C7A-0AF4-11D8-BCDC-00306540F848@lmi.net>
References: <FD4B7C7A-0AF4-11D8-BCDC-00306540F848@lmi.net>
Message-ID: <3FA13FF6.5090801@rumblestrip.org>

Greg Ward wrote:

> I just got back from NYC, and didn't read through all the other 
> responses (and "vacation" messages) before sending my reply.

I figured as much, just givin' credit where it's due. =8-)

> For the GL stuff, sounds like you need to download the developer's 
> option for the X11 server to get the correct headers.  At least I'm 
> hoping.  Check the Apple website and see if you can find some libraries 
> and headers for X11.

Hmmm.  Panther comes with this new "Xcode", which are the developer's 
tools now.  The Apple X11 server is an optional install with the main 
10.3 distribution, which I of course installed, along with X tools 
stuff.  From your email, I assumed I'm still missing something, so I 
went to the apple website and found this:

"X11 for Mac OS X SDK -- The software developer’s kit contains headers 
and other support files for X11, and is only needed if you want to 
compile your own X11 applications on Mac OS X v10.3. It is available on 
the Panther Developer CD as an optional package."

I'm assuming that "Panther Developer CD" means "Xcode CD".  Of course I 
left the install CDs at home, so I won't be abe to try this out 'till 
tonite, but I have a lead now.  Thanks.  I thought I installed 
"everything", but I guess not.

P.S.
When I got my Powerbook two years ago, I thought the little status 
lights on the battery were cool.  Now that my battery doesn't last more 
than 45 mins on a full charge, it's time to replace it -- one hundred 
and thirty bucks!  Maybe the lights aren't so cool after all...  =8-\

----

      Rob Guglielmetti

e. rpg@rumblestrip.org
w. www.rumblestrip.org



From radiance-general@radiance-online.org  Thu Oct 30 18:21:49 2003
From: radiance-general@radiance-online.org (Greg Ward)
Date: Thu, 30 Oct 2003 10:21:49 -0800
Subject: [Radiance-general] Re: Problems Running Radiance on Linux Alpha (RedHat 7.1)
In-Reply-To: <20031029202605.83383.qmail@web20810.mail.yahoo.com>
Message-ID: <ED4F28E3-0B05-11D8-9F44-000A956D40C8@lmi.net>

Hi David,

Check your scene carefully -- could be something like a window that 
faces the wrong way because the vertices are reverse-ordered, or you 
haven't used the options exactly set in the tutorial.

-Greg

> From: David Janello <djanello@yahoo.com>
> Date: Wed Oct 29, 2003  12:26:05  PM US/Pacific
>
> Greetings,
>
> I have been trying to run radiance using the pre-built
> binaries and some home-grown builds using gcc and ccc.
>
> When I try to run the tutorial demo through rview (cut
> and pasted from the man file), the rview rendering
> window appears, says that rendering is complete, but
> remains blank.  The command line interface says
>
> warning- no light sources found
>
> oconv and getinfo appear to work OK, but the rview
> program will only produce a blank screen.
>
> The results are consistent on my ds20 and a couple of
> xp1000s.
>
> I was wondering if this was a general radiance issue
> or one specific to the 64-bit alpha platform.
>
> I'm running RHAT 7.1 on all machines.
>
> --David Janello
> simulation and searches, llc
> www.simulationandsearches.com


From radiance-general@radiance-online.org  Thu Oct 30 19:02:23 2003
From: radiance-general@radiance-online.org (Fitzsimmons, Rob)
Date: Thu, 30 Oct 2003 11:02:23 -0800
Subject: [Radiance-general] Re: Problems Running Radiance on Linux Alp
 ha (RedHat 7.1)
Message-ID: <7B2F6EA5E35E214882CB9828962BC3CF04D691C7@corvallis.summit.fiserv.com>

Since you copy/pasted, you may want to check to make sure the line breaks
are the same.
I had that problem copy/pasting from a PDF
Perhaps you missed a hard return and your light was commented out

Rob F


>
> Greetings,
>
> I have been trying to run radiance using the pre-built
> binaries and some home-grown builds using gcc and ccc.
>
> When I try to run the tutorial demo through rview (cut
> and pasted from the man file), the rview rendering
> window appears, says that rendering is complete, but
> remains blank.  The command line interface says
>
> warning- no light sources found
>
> oconv and getinfo appear to work OK, but the rview
> program will only produce a blank screen.
>
> The results are consistent on my ds20 and a couple of
> xp1000s.
>
> I was wondering if this was a general radiance issue
> or one specific to the 64-bit alpha platform.
>
> I'm running RHAT 7.1 on all machines.
>
> --David Janello
> simulation and searches, llc
> www.simulationandsearches.com

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general


From radiance-general@radiance-online.org  Fri Oct 31 02:24:28 2003
From: radiance-general@radiance-online.org (Rob Guglielmetti)
Date: Thu, 30 Oct 2003 21:24:28 -0500
Subject: [Radiance-general] compiling continued
Message-ID: <5AB02A94-0B49-11D8-A82B-000393824274@rumblestrip.org>

OK, so I installed the so-called X11 SDK tonight after I got home, and 
now Radiance seemed to compile fine!  (only thing it complained about 
was wish wasn't found in the path, so it failed to compile trad, which 
I never use anyway).  I added /usr/local/bin to PATH and set 
RAYPATH=/usr/local/lib/ray (in .bash-profile).  I also added the 
DISPLAY variable, so I can call Radiance programs directly from the OSX 
terminal windows.

Specifically, I put:

PATH=/usr/local/bin:$PATH
RAYPATH=.:/usr/local/lib/ray
export PATH RAYPATH
set DISPLAY=:0.0
export DISPLAY

into my .bash_profile.  So far so good. =8-)

-:-:-:-:-:-:-:-:-:-:-:-:-:-:-:-:-
   Rob Guglielmetti
rpg@rumblestrip.org
www.rumblestrip.org


