From mdelafuente at wmtao.com  Tue Jun  1 04:10:19 2004
From: mdelafuente at wmtao.com (Mark de la Fuente)
Date: Tue Jun  1 04:10:52 2004
Subject: [Radiance-general] Typical Lighting Calculation
Message-ID: <s0bb9f4d.072@wmtao.com>

Hi group,

I don't really use radiance for architectural lighting calculations since rarely do I run into the situation where I need that kind of control, and more importantly I'm not always 100% comfortable with the results I've generated for anything other than "visualization" purposes.  Therefore I was hoping to get some feedback from some of you and just have everything one would need to run a "typical" calc in one post.  Then print it, frame it, and stick it on the wall! :)

Now, the calculations I do usually follow the same process:  make a model, define your light sources, make a calculation grid, run the calc, present the results.  In radiance this is how I would accomplish this.  Anyone see any mistakes?  It would be very easy to mess up the units since there are no apparent built in safeguards against this.

Let's look at calculating illuminance in SI first and then feet.

First we make a model in meters.

Then we download our ies files and bring them into radiance using the following command
ies2rad *dm *m .85 iesfile.ies   (I'm assuming a .85 Light Loss Factor.  We are using *dm to match our model in meters. )

We might as well add the sky at this point too.
Gensky $month $day $hour $lat $long $stdmer > sky  (No need for units to be defined?  Same sky for SI Vs SU units?)

Then we make our calculation point grid.  I would usually do a file (say input.inp) with six numbers per point (XYZ coordinate + aiming vector).

Next would be the calculation.  This is a three part deal.
	1.- rpict options octree > luminance.pic  (The units displayed in this image would be nits.  cd/m^2)
	2.- rpict *i options octree > lux.pix (The units displayed would be lux.  lm/m^2)
	3.- rtrace *i options < input.inp | rcalc -e '$1=47.4*$1+120*$2+11.6*$3' > output.out
(Now, that rcalc part is a bit spooky since it can be written more than one way.  We've got $1 $2 & $3 x the Vlamda curve x 179 lm/watt and then added together?.  This converts watts to lumens and the results get placed in my output.out file.)

At this point it would be really awesome to be able to see where the calculation grid points are in relation to the space!  I suppose a simple xform file placing spheres (or maybe a cone to help define direction?) in the space using the coordinates from input.inp would do the trick.  Or better yet, xforming the disks to an empty scene and then using pcompos to combine the images together would probably be better since you could re-use the images you have already created and save time.  Unfortunately the numerical results themselves are not visible.  Anyone have any ideas how to display numerical calculation results on an image?

Next would come the falsecolor image creation.
falsecolor *i lux.pic -l lux > falsecolor.pic  (Now, the *l thing worries me as well since one could botch things up pretty bad and not even realize it.)

Within reason that would be a basic SI unit calc from start to finish.  Now, for feet.

We make a model in feet.

Then we bring our same ies files into radiance using the following command
ies2rad *df *m .85 iesfile.ies   (We are using *df to match our model in feet.)

Next we add our sky.
Gensky $month $day $hour $lat $long $stdmer > sky  (No need for units to be defined?  Same sky for SI Vs SU units?)

Then we make our calculation grid.

Next would be the calculations. * Not too sure about these...
	1.- rpict options octree > luminance.pic  (The units displayed in this image would be footlamberts?  	cd/ft^2)
	2.- rpict *i options octree > footcandles.pic (The units displayed would be footcandles.  lm/ft^2)
	3.- rtrace *i options < input.inp | rcalc -e '$1=47.4*$1+120*$2+11.6*$3' > output.out
	(The numbers in the output file would be footcandles?)

Next would come the falsecolor image creation.
falsecolor *i footcandle.pic -l fc > falsecolor.pic


How does all that look?

Mark


From barbara.matusiak at ark.ntnu.no  Tue Jun  1 15:44:04 2004
From: barbara.matusiak at ark.ntnu.no (Barbara Matusiak)
Date: Tue Jun  1 15:37:10 2004
Subject: [Radiance-general] conversion of digital pictures to
  Radiance?
In-Reply-To: <40B74EC9.4010809@rumblestrip.org>
References: <5.2.1.1.2.20040528150010.01f20278@pop.ansatt.ntnu.no>
	<40B63B91.5030207@ise.fraunhofer.de>
	<OJEGILOIGGNAEAODNHIIOEBPCDAA.anthony.farrell@dit.ie>
	<40B63B91.5030207@ise.fraunhofer.de>
	<5.2.1.1.2.20040528150010.01f20278@pop.ansatt.ntnu.no>
Message-ID: <5.2.1.1.2.20040601153049.02018ae8@pop.ansatt.ntnu.no>

Thanks for the heads up!

I'm in the process of choosing a camera and the Digital Rebel seems to be a 
fine choice indeed. However I would like some more background info on the 
file formats. I can't seem to be able to dig up much on what the "raw" 
format actually contains, I imagine it isn't necessarily the same from 
camera to camera? Are there parameters to be passed on to the hdr 
generating software based on the raw format?

I have no support for macosx, so it's between windows and linux, although 
the hdrgen program looks interesting as it's command line based and easier 
to enter into batch processing. But I couldn't find any documentation about 
it and the executable doesn't have any built in help whatsoever. :)

Could I possibly ask you to roughly describe the process of generating hdr 
images from those taken with the Rebel? Any calibration involved?


Barbara


At 10:38 28.05.2004 -0400, you wrote:
>Barbara Matusiak wrote:
>
>>I wonder if it is possible to convert pictures taken by digital camera to 
>>Radiance format? And if yes, how it could be done? The Radiance format 
>>enables reading of luminance values directly from the pictures, something 
>>that could be very usefull in the project I plan to start soon.
>
>Yes, but only if you shoot the images in a specific manner and convert 
>them to high dynamic range (HDR) format first.  A single image does not 
>contain the dynamic range necessary for what you want to do.  But for 
>typical scenes, if you simply bracket your exposure (using aperture, not 
>changing shutter speed) by two F stops in each direction, you can use 
>utilities like Debevec's HDR Shop or Greg Ward's Photosphere (or his 
>command-line hdrgen) to merge those into an HDR image with the full 
>dynamic range.  You can then use Radiance tools like falsecolor (and even 
>pcond) to extract real luminance information from a photograph.
>
>We use a Canon Digital Rebel here in my office to create these image 
>sequences.  The autobracket function of the camera is very useful for 
>this.  Many "prosumer" cameras have this feature, but you must make sure 
>the camera will separate the images by two f-stops.  Of course you can do 
>it manually too, but then you usually need a tripod to keep everything in 
>registration.  You also need to "go manual" to capture scenes of really 
>high dynamic range, using more images to capture the full range.
>
>I've been meaning to place some samples on my website, but haven't had 
>time.  But these resources are better anyway:
>
>http://www.anyhere.com/
>http://www.debevec.org/HDRShop/
>
>HDR photography is extremely cool.  You can even use HDR images as light 
>sources for Radiance scenes!  Santiago Torres of this list has done quite 
>a bit of work in that.  Search the radiance-general archives for 
>details.  Have fun!
>
>----
>
>      Rob Guglielmetti
>
>e. rpg@rumblestrip.org
>w. www.rumblestrip.org
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general@radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general

associate professor Barbara Matusiak                            Tel.: +47 
73 59 50 77
Faculty of Arcitecture and Fine Art                             Fax: +47 73 
59 53 88
Norwegian Univ. of Science and Technology 
(NTNU)                barbara.matusiak@ark.ntnu.no
N-7491 Trondheim, 
Norway 
http://www.ab.ntnu.no/byggekunst/ansatte/ansattesider/bam.html


From gward at lmi.net  Tue Jun  1 15:52:41 2004
From: gward at lmi.net (Greg Ward)
Date: Tue Jun  1 15:53:03 2004
Subject: [Radiance-general] conversion of digital pictures to Radiance?
In-Reply-To: <5.2.1.1.2.20040601153049.02018ae8@pop.ansatt.ntnu.no>
References: <5.2.1.1.2.20040528150010.01f20278@pop.ansatt.ntnu.no>
	<40B63B91.5030207@ise.fraunhofer.de>
	<OJEGILOIGGNAEAODNHIIOEBPCDAA.anthony.farrell@dit.ie>
	<40B63B91.5030207@ise.fraunhofer.de>
	<5.2.1.1.2.20040528150010.01f20278@pop.ansatt.ntnu.no>
	<5.2.1.1.2.20040601153049.02018ae8@pop.ansatt.ntnu.no>
Message-ID: <F356B8F3-B3D2-11D8-B962-000A95BB392A@lmi.net>

Hi Barbara,

I don't recommend using the RAW format for Photosphere or hdrgen.  
Since there is no "RAW" standard -- RAW is a maker-specific and 
model-specific(!) format, conversion is necessary before it can be read 
by any other program (with few exceptions).  You only complicate your 
life by using RAW, and some of the exposure information that 
Photosphere and hdrgen need is usually lost in translation to JPEG or 
TIFF.

I'm sorry the manual page for hdrgen is missing from the binaries that 
are currently on the anyhere site -- I'll have to fix that as soon as 
I'm able to get back on there.  (They upgraded their servers and ssh 
isn't working right now.)  I am attaching the HTML documentation for 
hdrgen for your convenience.

If you can gain access to a Mac running OS X, you'll find it much 
easier to create and calibrate HDR images with Photosphere, I bet.

-Greg

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20040601/a9b5bcd0/hdrgen.html
-------------- next part --------------


> From: Barbara Matusiak <barbara.matusiak@ark.ntnu.no>
> Date: June 1, 2004 6:44:04 AM PDT
>
> Thanks for the heads up!
>
> I'm in the process of choosing a camera and the Digital Rebel seems to 
> be a fine choice indeed. However I would like some more background 
> info on the file formats. I can't seem to be able to dig up much on 
> what the "raw" format actually contains, I imagine it isn't 
> necessarily the same from camera to camera? Are there parameters to be 
> passed on to the hdr generating software based on the raw format?
>
> I have no support for macosx, so it's between windows and linux, 
> although the hdrgen program looks interesting as it's command line 
> based and easier to enter into batch processing. But I couldn't find 
> any documentation about it and the executable doesn't have any built 
> in help whatsoever. :)
>
> Could I possibly ask you to roughly describe the process of generating 
> hdr images from those taken with the Rebel? Any calibration involved?
>
>
> Barbara
From MdelaFuente at wmtao.com  Fri Jun  4 15:46:14 2004
From: MdelaFuente at wmtao.com (Mark de la Fuente)
Date: Fri Jun  4 15:47:05 2004
Subject: [Radiance-general] Weather Data
Message-ID: <s0c036f4.094@wmtao.com>

What is a good source for US weather data for incorporation into gensky?
 (This would be for calibrating the -b & -r parameters).
 
Thanks!
 
Mark
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20040604/c6ae4d9e/attachment.htm
From jedev at visarc.com  Fri Jun  4 15:57:28 2004
From: jedev at visarc.com (Jack de Valpine)
Date: Fri Jun  4 15:57:45 2004
Subject: [Radiance-general] Weather Data
In-Reply-To: <s0c036f4.094@wmtao.com>
References: <s0c036f4.094@wmtao.com>
Message-ID: <40C07FC8.504@visarc.com>

Hi Mark,

I think (hope) you should get some interesting responses to this 
question. One source that we have used is TMY2 data. See:

http://rredc.nrel.gov/solar/old_data/nsrdb/tmy2/State.html

for the state by state data files and:

http://rredc.nrel.gov/solar/old_data/nsrdb/tmy2/

for some explanation.

I will warn you that this is raw data and you will need some type of 
parser to read the files in a sensible way.

Regards,

-Jack de Valpine

Mark de la Fuente wrote:

> What is a good source for US weather data for incorporation into 
> gensky?  (This would be for calibrating the -b & -r parameters).
>  
> Thanks!
>  
> Mark
>
>------------------------------------------------------------------------
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general@radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general
>  
>

-- 
#	John E. de Valpine
#	president
#
#	visarc incorporated
#	http://www.visarc.com
#
#	channeling technology for superior design and construction

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20040604/09d72e8e/attachment.html
From pisuke at tiscali.co.uk  Fri Jun  4 17:56:38 2004
From: pisuke at tiscali.co.uk (pisuke@tiscali.co.uk)
Date: Fri Jun  4 17:56:47 2004
Subject: [Radiance-general] Weather Data
In-Reply-To: <s0c036f4.094@wmtao.com>
Message-ID: <40BC9D5D000102CA@mk-cpfrontend-3.mail.uk.tiscali.com>

Hi!

I've used the EPW data files, they're csv tables,
so it is very easy to write a script that automatically
converts the illuminance data to values for gensky:
http://www.eere.energy.gov/buildings/energyplus/cfm/weatherdata_us.cfm

You also need to check how the data has been formatted:
http://www.eere.energy.gov/buildings/energyplus/pdfs/weatherdatainformation.pdf

Hope this helps!

Francesco

>What is a good source for US weather data for incorporation into gensky?
> (This would be for calibrating the -b & -r parameters).


__________________________________________________
Broadband from an unbeatable ?15.99!

http://www.tiscali.co.uk/products/broadband/home.html?code=SM-NL-11AM




From cbauer- at t-online.de  Mon Jun  7 01:26:03 2004
From: cbauer- at t-online.de (Carsten Bauer)
Date: Mon Jun  7 00:18:21 2004
Subject: [Radiance-general] mesh help
Message-ID: <40C3A80B.908@t-online.de>

Hi all,

it definitely sounds funny, but I'm in need of a genuine Radiance .rtm 
mesh for testing purposes ..

I cannot easily generate one myself, as the only converter I've found so 
far is obj2mesh, but I cannot generate .obj files..

Now, to speed up things, I'll ask if someone could mail me a simple demo 
mesh or an .obj file to convert into one ? (really, nothing special is 
needed, anything out of the trash can will do :-)

Many thanx in advance !!!

-Carsten


From canoe at onetel.net.uk  Mon Jun  7 11:03:49 2004
From: canoe at onetel.net.uk (James Lee)
Date: Mon Jun  7 11:04:41 2004
Subject: [Radiance-general] mesh help
In-Reply-To: <40C3A80B.908@t-online.de>
References: <40C3A80B.908@t-online.de>
Message-ID: <20040607.9034900.1688944076@landeck.jamesipoos.com>

On 07/06/04, 00:26:03, Carsten Bauer <cbauer-@t-online.de> wrote regarding 
[Radiance-general] mesh help:

> Now, to speed up things, I'll ask if someone could mail me a simple demo
> mesh or an .obj file to convert into one ? (really, nothing special is
> needed, anything out of the trash can will do :-)

>From my most basic of demo parts, a ring in 2 mesh densities, with
and without face normals.  These convert to rtm files using obj2mesh.

http://web.onetel.net.uk/~canoe/meshes/ring.1x1.facet.obj
http://web.onetel.net.uk/~canoe/meshes/ring.1x1.normals.obj
http://web.onetel.net.uk/~canoe/meshes/ring.5x5.facet.obj
http://web.onetel.net.uk/~canoe/meshes/ring.5x5.normals.obj



(URLs valid until July 2004)

James.

From gward at lmi.net  Mon Jun  7 17:20:41 2004
From: gward at lmi.net (Greg Ward)
Date: Mon Jun  7 17:21:08 2004
Subject: [Radiance-general] Radiance workshop call for participation
Message-ID: <3CBF1439-B896-11D8-A48D-000A95BB392A@lmi.net>

CALL FOR PARTICIPATION -- THIRD ANNUAL RADIANCE WORKSHOP

What: Scientific Applications Using RADIANCE

Where: University of Applied Sciences of Fribourg, Switzerland 
(www.eif.ch)

When: October 11th & 12th (Monday & Tuesday) 2004

Organizers: Raphael Compagnon and Greg Ward

Registration:	CHF 205 for speakers (approx. 1.5 CHF per Euro)
		CHF 270 for attendees
		CHF 105 for students

Fee includes: Coffee breaks, lunch both days, a dinner on Monday 
evening, and a workshop CD-ROM

Hotel:	Rooms of various categories have been pre-booked for 
participants at rates specified on the hotel registration form

Download registration forms from the workshop's web page: 
http://www.eif.ch/~compag/rw2004/

Deadline for registration:	August 31, 2004
As early registrations greatly help us in organising the workshop, we 
recommend
that participants send their registration forms as soon as possible. 
During the workshop
we will make a prize drawing for 2 participants among those who have 
registered before
July 15. The 2 winners will get a 50% cash refund on their registration 
fee!

Purpose:
To provide researchers with an opportunity to present their work with 
Radiance, and to share ideas and solutions with other attendees.
Participants are invited to give a talk, which will be limited to 30 
minutes (~20 minute for the talk followed by ~10 minutes of open 
discussion).
No printed proceedings will be produced, but a CD-ROM will be 
distributed to attendees that will include electronic materials 
submitted by the speakers and edited by the organizers.

At this workshop, we will introduce a special Problem Solving session 
on the second day, where users may present their difficulties and seek 
advice and suggestions, possibly working through solutions in a 
collaborative "brain-storming" with Greg, Raphael, and other attendant 
experts.  In addition, Georg Mischler and Andreas Lahme have been 
invited to give a half-day tutorial on Rayfront, and will demonstrate 
their new Radiance web rendering service.  Depending on the number of 
talks we end up scheduling, we may or may not conduct the problem 
solving session and Rayfront tutorial in parallel. Either way, everyone 
should get a chance to ask questions, and ample opportunities to help 
others with their problems as well.

A list of planned speakers and preliminary titles is given below. The 
list will be regularly updated on the workshop's web page.

o Using image based lighting to assess glare under different conditions 
by capturing the whole dynamic range of daylight, by Santiago L. Torres
o Comparison and Analysis of quantitative and qualitative data on 
luminous ambiances in interior spaces using Radiance, by Ljubica Mudri
o Calculation of luminaires using Radiance, by Krzysztof Wandachowicz
o Using Radiance to verify and inform some interesting simplified 
daylighting and solar radiation models, by Darren Robinson
o Comparison of daylighting results obtained under the Belgian 
artificial sky and with several daylighting software, by Magali Bodart
o Some experiments with irradiation modelling using cumulative skies, 
by Darren Robinson
o Using Radiance for Right-To-Light and Solar Access Studies, by Andrew 
Marsh
o 3D Lighting: Integrated software modelling and simulation package 
using 3Dsolar and Rayfront with Radiance, by Andreas Lahme
o Material measurement & modelling, by Peter Apian-Bennewitz
o Blender based Radiance GUI, by Francesco Anselmo
o iPPF: a Radiance based online tool for solar and daylight access 
studies in urban areas, by Raphael Compagnon
o Rayfront Tutorial, taught by Georg Mischler & Andreas Lahme
o Radiance problem-solving session, moderated by Greg Ward

The names and titles above are not final, and we may get new speakers 
and lose some people before we can provide a proper workshop agenda in 
September.

By August 31 2004, we will also need the final titles and abstracts for 
all the talks, along with any materials the speakers wish to include on 
the workshop CD-ROM. At minimum, we would like to get a copy of each 
speaker's presentation in PowerPoint, PDF, or HTML (preferred) format, 
and a short bio with contact information. If the speaker also has test 
scenes, images, and/or software they would like to share, these would 
be most welcome. We need to get all of these materials in order to have 
sufficient time to assemble them into a usable CD-ROM, so we cannot 
promise to include anything submitted after the August 31 deadline.

We look forward to meeting you at the workshop!

Greg Ward and Raphael Compagnon



From jm at dmu.ac.uk  Mon Jun  7 17:48:32 2004
From: jm at dmu.ac.uk (John Mardaljevic)
Date: Mon Jun  7 17:48:39 2004
Subject: [Radiance-general] Radiance Teaser
Message-ID: <E1BXMMS-0004A5-00@saturn.dmu.ac.uk>

Dear Fellows,

Here's a little Radiance teaser to exercise the noggin(*).

Explain the absence of level 2 ambient sampling (blue) markers
directly under the box in Figure 2 of the Third Radiance Tech Note.
Level 2 markers are scattered across the rest of the plane, why not
under the box?

The Prize?  Something money can't buy: the respect of your peers!

The Judge?  As I'm not too sure of the reason myself, I nominate
whasisname....  Greg.  Post answers to this thread.

-John

The Tech Note can be found here:
http://www.iesd.dmu.ac.uk/~jm/resources.html 

(*) noggin
n : informal terms for a human head [syn: attic, bean, noodle]

-----------------------------------------------
Dr. John Mardaljevic                     
Senior Research Fellow
Institute of Energy and Sustainable Development
De Montfort University
The Gateway
Leicester
LE1 9BH, UK
+44 (0) 116 257 7972   
+44 (0) 116 257 7981 (fax)

jm@dmu.ac.uk   
http://www.iesd.dmu.ac.uk/~jm


From schorsch at schorsch.com  Mon Jun  7 19:36:36 2004
From: schorsch at schorsch.com (Georg Mischler)
Date: Mon Jun  7 19:36:41 2004
Subject: [Radiance-general] Radiance Teaser
In-Reply-To: <E1BXMMS-0004A5-00@saturn.dmu.ac.uk>
References: <E1BXMMS-0004A5-00@saturn.dmu.ac.uk>
Message-ID: <Pine.BSF.4.58.0406071320110.15356@emancholl.pair.com>

John Mardaljevic wrote:

> Dear Fellows,
>
> Here's a little Radiance teaser to exercise the noggin(*).
>
> Explain the absence of level 2 ambient sampling (blue) markers
> directly under the box in Figure 2 of the Third Radiance Tech Note.
> Level 2 markers are scattered across the rest of the plane, why not
> under the box?


The blue dots are coming late for the seats in
that part of the auditorium...


-schorsch

-- 
Georg Mischler  --  simulations developer  --  schorsch at schorsch com
+schorsch.com+  --  lighting design tools  --  http://www.schorsch.com/

From graf-o at freenet.de  Wed Jun  9 18:03:17 2004
From: graf-o at freenet.de (graf-o@freenet.de)
Date: Wed Jun  9 18:03:23 2004
Subject: [Radiance-general] rtrace-command
Message-ID: <E1BY5Xp-0003qO-DE@www11.emo.freenet-rz.de>

An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20040609/c975b958/attachment.htm
From gward at lmi.net  Wed Jun  9 18:21:52 2004
From: gward at lmi.net (Greg Ward)
Date: Wed Jun  9 18:22:23 2004
Subject: [Radiance-general] rtrace-command
In-Reply-To: <E1BY5Xp-0003qO-DE@www11.emo.freenet-rz.de>
References: <E1BY5Xp-0003qO-DE@www11.emo.freenet-rz.de>
Message-ID: <1DD990A6-BA31-11D8-883B-000A95BB392A@lmi.net>

Hi Olga,

It seems you did misunderstand a bit.  Rtrace is the underlying 
computational engine that permits the holodeck interactive program to 
operate.  Rtrace does the raw ray-tracing, and the holodeck program 
handles user interaction and display update.  For more details on 
running rholo, see the manual page at:

	http://radsite.lbl.gov/radiance/man_html/rholo.1.html

I hope this helps.
-Greg

> From: graf-o@freenet.de
> Date: June 9, 2004 9:03:17 AM PDT
>
Hi!

  In the paper 'The Holodeck Interactive Ray Cache' the authors describe 
amongs other things how the command rtrace is working. As far as I 
understood, it is possible to interact with the virtual environment 
using a mouse while running this command. Unfortunately I haven't 
managed yet to see anything while running rtrace even for 2 hours. The 
octree-file I am using is not that huge (5,2 MB), so I thing I am not 
using the right options of rtrace (or I misunderstood the whole thing 
completely). Which options I am supposed to use to run the program 
interactively? What would be an example command line?

  Thanks!

  Olga Graf
  


From Giulio.Antonutto at arup.com  Wed Jun  9 18:26:06 2004
From: Giulio.Antonutto at arup.com (Giulio Antonutto)
Date: Wed Jun  9 18:26:22 2004
Subject: [Radiance-general] rtrace-command
Message-ID: <DC0CAEEA090E984C911D3B85B16C3F90FAF5BF@l-gnts05>

I think you are referring to rholo and the interactive visualizer.
In this case what you should do to see something is:
 
- 1 - 
create a rif file like:   file.rif
OCTREE= name_of_the_octree
view= view_name -vf view_file.vf
render= -av 0 0 0 -ab 1
 
- 2 - 
create a hif file like:   file.hif
RIF= file.rif
section= xo yo zo    Xx Xy Xz     Yx Yy Yz      Zx Zy Zz
 
where section is a box containing your scene (read manual for better
explanation), o is origin and X,Y,Z are the end of box's x,y,z axis.
example for the unit cube is:    0 0 0    1 0 0  0 1 0    0 0 1
 
- 3 - 
run rholo (*** pay attention here before typing) :
rholo -n 1 -f -o x11 file.hdk file.hif
 
where: 
-n 1 is the number of processors
-f  (***here!) means that the solution can be overwritten, the file.hdk
(!!!)
-o x11 means that the x11 display driver will be used (works on macX)
-o ogl (works on macX)
-o glx (do not works on macX)
 
of course the manual will explain better.... this is just a starting point
;-)
cheers,
giulio
 

-----Original Message-----
From: graf-o@freenet.de [mailto:graf-o@freenet.de]
Sent: 09 June 2004 17:03
To: radiance-general@radiance-online.org
Subject: [Radiance-general] rtrace-command


Hi!

In the paper 'The Holodeck Interactive Ray Cache' the authors describe
amongs other things how the command rtrace is working. As far as I
understood, it is possible to interact with the virtual environment using a
mouse while running this command. Unfortunately I haven't managed yet to see
anything while running rtrace even for 2 hours. The octree-file I am using
is not that huge (5,2 MB), so I thing I am not using the right options of
rtrace (or I misunderstood the whole thing completely). Which options I am
supposed to use to run the program interactively? What would be an example
command line?

Thanks!

Olga Graf 
--
 
<http://adserver.freenet.de/click.ng/site=fn&prod=chetools&kat=rub&tbl=webma
il&ppos=1&TransactionID=1086796997271858&rgtg=256>  


___________________________________________________________________
Electronic mail messages entering and leaving Arup business
systems are scanned for acceptability of content and viruses.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20040609/bd2fc334/attachment.html
From beixiao at mail.med.upenn.edu  Thu Jun 10 01:23:39 2004
From: beixiao at mail.med.upenn.edu (Bei Xiao)
Date: Thu Jun 10 01:23:48 2004
Subject: [Radiance-general] soft shadow
In-Reply-To: <40BA135C.3000800@t-online.de>
References: <OJEGILOIGGNAEAODNHIIOEBPCDAA.anthony.farrell@dit.ie>
	<40B63B91.5030207@ise.fraunhofer.de> <40B73255.1030807@gmx.net>
	<40B86448.7050902@gmx.net> <40BA135C.3000800@t-online.de>
Message-ID: <Pine.SOL.4.58.0406091919400.13405@pobox.upenn.edu>

Hi,
   I used 4 area light sources to render a scene which include one glossy
object.
But the shadows in the scene are very harsh. I turned off the ambient
light.
My major parameters for rad commend are:
ps 3 -pt .08 -dp 512 -ar 101 -ms 0.71 -ds .2 -dj .5 -dt .1 -dc .5 -dr 1
-sj .7 -st .1 -ab 2 -aa .2 -ad 400 -as 64 -av 0.5 0.5 0.5 -lr 6 -lw .002
-aw 0 -av 0 0 0
  Are there ways that I could have softer shadows?

Thanks a lot.

Bei


From Giulio.Antonutto at arup.com  Thu Jun 10 10:23:37 2004
From: Giulio.Antonutto at arup.com (Giulio Antonutto)
Date: Thu Jun 10 10:23:53 2004
Subject: [Radiance-general] soft shadow
Message-ID: <DC0CAEEA090E984C911D3B85B16C3F90FAF5C0@l-gnts05>

Hi,
some quick suggestions:
 
try with -ds reduced to .1 or .05
and
with -dj increased to .6 or .8

these two options rule the light subdivision for large sources (-ds) and the
jittering (-dj).

You have also to oversample your image by a factor in order to obtain nice
and soft penumbra effect.  (rpict double or more + pfilt = final image )

There is a really good web page by Mark Stock, who explains some tricks
about penumbras:
http://mark.technolope.org/radmisc/aa0_ps1_test/final.html

I hope it helps,
giulio

-----Original Message-----
From: Bei Xiao [mailto:beixiao@mail.med.upenn.edu]
Sent: 10 June 2004 00:24
To: Radiance general discussion
Subject: [Radiance-general] soft shadow


Hi,
   I used 4 area light sources to render a scene which include one glossy
object.
But the shadows in the scene are very harsh. I turned off the ambient
light.
My major parameters for rad commend are:
ps 3 -pt .08 -dp 512 -ar 101 -ms 0.71 -ds .2 -dj .5 -dt .1 -dc .5 -dr 1
-sj .7 -st .1 -ab 2 -aa .2 -ad 400 -as 64 -av 0.5 0.5 0.5 -lr 6 -lw .002
-aw 0 -av 0 0 0
  Are there ways that I could have softer shadows?

Thanks a lot.

Bei


_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general

___________________________________________________________________
Electronic mail messages entering and leaving Arup business
systems are scanned for acceptability of content and viruses.

From graf-o at freenet.de  Thu Jun 10 11:43:53 2004
From: graf-o at freenet.de (graf-o@freenet.de)
Date: Thu Jun 10 11:43:59 2004
Subject: [Radiance-general] rtrace-command
Message-ID: <E1BYM6D-0007VM-HF@www4.emo.freenet-rz.de>

An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20040610/e05dac98/attachment.htm
From alex at juventuz.net  Thu Jun 10 14:20:10 2004
From: alex at juventuz.net (Martin Matusiak)
Date: Thu Jun 10 14:20:27 2004
Subject: [Radiance-general] Fwd: errors from hdrgen
Message-ID: <200406101420.10983.alex@juventuz.net>

Terribly sorry for sending that mammoth attachment to the list, I didn't 
realize it was that big before it was too late. :(

Here they are instead:
http://www.juventuz.com/_temp/good_set.tar.gz
http://www.juventuz.com/_temp/bad_set.tar.gz


Martin

----------  Forwarded Message  ----------

Subject: errors from hdrgen
Date: Thursday 10 June 2004 13:11
From: Martin Matusiak <alex@juventuz.net>
To: radiance-general@radiance-online.org

I seem to have trouble using hdrgen to generate hdr's.. The other day it
seemed to be working fine but now I'm getting errors like
"Poor covergence of order 1 fit"
"Cannot solve for response function"

Ultimately it won't generate the image. Perhaps you could tell me what they
mean and what I'm doing wrong? I've attached the five images that gave this
error. I've also attached another set of 3 that gave no error or warning at
all, even though the resulting hdr is quite blurry.

Thanks a lot!

Martin


From a.jacobs at londonmet.ac.uk  Thu Jun 10 16:25:36 2004
From: a.jacobs at londonmet.ac.uk (Axel Jacobs)
Date: Thu Jun 10 16:28:48 2004
Subject: [Radiance-general] Fwd: errors from hdrgen
In-Reply-To: <200406101420.10983.alex@juventuz.net>
References: <200406101420.10983.alex@juventuz.net>
Message-ID: <40C86F60.5020906@londonmet.ac.uk>

Martin Matusiak wrote:

>"Poor covergence of order 1 fit"
>  
>
Ignore this one, this is a debug message and only means that things are 
not running as smoothly as they could.

>"Cannot solve for response function"
>  
>
That is more of a problem. Essentially, the dynamic range of the images 
has gaps between them or is clipped on either side of the range. Try:

- Taking images at smaller f-stop intervals
- remove images that are too bright or too dark
- include darker or lighter images.

We keep having this problem with webhdr, but here doesn't seem to be a 
rule of thumb for getting it right. If the worst comes to the worst, you 
can disable hdrgen's built-in auto exposure routine and do a hand-jobby, 
but this is more difficult.
https://luminance.londonmet.ac.uk/webhdr/

You should also save the coefficients from a run that doesn't create any 
errors/warning and re-use them when you do get them. Please note that 
the response curve is/can be different even between two cameras of the 
same model/make, so don't mix-n-match them.

Axel


From Giulio.Antonutto at arup.com  Thu Jun 10 16:42:25 2004
From: Giulio.Antonutto at arup.com (Giulio Antonutto)
Date: Thu Jun 10 16:42:32 2004
Subject: [Radiance-general] Fwd: errors from hdrgen
Message-ID: <DC0CAEEA090E984C911D3B85B16C3F90FAF5C6@l-gnts05>

just a quick extra question about HDR and light sources:

supposing that with a camera we have got some images,

1 we calculate the HDR image
2 we measure on the mac screen the luminance with ximage
3 we measure the luminance in the real scene.
4 we compare the numbers and find a factor ( k=lum(hdr):lum(real) ).


is this factor independent from the spectrum of the light source once that
the camera is 'calibrated' or it is related to it?
like in the case of: sun, low pressure sodium, MH, mercury lamps, theatre
blue filtered light....
is the correction factor (k) constant for these different conditions?
if not is there a best calibration environment (D65 or something else)?

many thanks,
giulio

-----Original Message-----
From: radiance-general-bounces@radiance-online.org
[mailto:radiance-general-bounces@radiance-online.org]On Behalf Of Axel
Jacobs
Sent: 10 June 2004 15:26
To: Radiance general discussion
Subject: Re: [Radiance-general] Fwd: errors from hdrgen


Martin Matusiak wrote:

>"Poor covergence of order 1 fit"
>  
>
Ignore this one, this is a debug message and only means that things are 
not running as smoothly as they could.

>"Cannot solve for response function"
>  
>
That is more of a problem. Essentially, the dynamic range of the images 
has gaps between them or is clipped on either side of the range. Try:

- Taking images at smaller f-stop intervals
- remove images that are too bright or too dark
- include darker or lighter images.

We keep having this problem with webhdr, but here doesn't seem to be a 
rule of thumb for getting it right. If the worst comes to the worst, you 
can disable hdrgen's built-in auto exposure routine and do a hand-jobby, 
but this is more difficult.
https://luminance.londonmet.ac.uk/webhdr/

You should also save the coefficients from a run that doesn't create any 
errors/warning and re-use them when you do get them. Please note that 
the response curve is/can be different even between two cameras of the 
same model/make, so don't mix-n-match them.

Axel


_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general

___________________________________________________________________
Electronic mail messages entering and leaving Arup business
systems are scanned for acceptability of content and viruses.

From gward at lmi.net  Thu Jun 10 16:55:23 2004
From: gward at lmi.net (Greg Ward)
Date: Thu Jun 10 16:55:30 2004
Subject: [Radiance-general] rtrace-command
In-Reply-To: <E1BYM6D-0007VM-HF@www4.emo.freenet-rz.de>
References: <E1BYM6D-0007VM-HF@www4.emo.freenet-rz.de>
Message-ID: <3343D3E8-BAEE-11D8-89E2-000A95BB392A@lmi.net>

Hi Olga,

It sounds like one of your files (probably the octree) got truncated.  
This usually happens when you abort a make.  Try running "make clean" 
first, then "make sholo".  If you still have troubles, type "which 
getinfo" to make sure you don't have some other executable taking 
Radiance's place.

-Greg

> From: graf-o@freenet.de
> Date: June 10, 2004 2:43:53 AM PDT
>
Thanks for the hint, Greg! It works much better with rholo!

  Unfortunately, when I was trying to run one of the examples provided 
in ray/obj/cabin by typing make sholo I got the following error:

  [domna]s0343631: make sholo
  rholo -n 1 -o ogl summer.hdk
  rad: error reading bounding cube from getinfo
  rholo: system - cannot start rtrace process: No such file or directory
  summer.hdk: 6.0 Mbyte holodeck file, 0.0% fragmentation
  make: *** [sholo] Error 2

  Actually, if I run only rholo in the same directory, it works, which 
means that the PATH-variable is ok. But with 'make sholo' apparently 
something goes wrong. Is it possible that this command is not working 
because I use the tmp-directory, i.e. I copied the cabin-directory into 
tmp? Unfortunately, I am run out of space on my home directory, so I 
have no other choice at the moment.

  If somebody has an idea what could be wrong, I would be glatt to hear 
from him or her! Thanks!

  Olga Graf


From rpg at rumblestrip.org  Thu Jun 10 17:22:09 2004
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Thu Jun 10 17:21:23 2004
Subject: [Radiance-general] Fwd: errors from hdrgen
In-Reply-To: <DC0CAEEA090E984C911D3B85B16C3F90FAF5C6@l-gnts05>
References: <DC0CAEEA090E984C911D3B85B16C3F90FAF5C6@l-gnts05>
Message-ID: <40C87CA1.1050609@rumblestrip.org>

Hi Pillo,

Giulio Antonutto wrote:
> just a quick extra question about HDR and light sources:
> 
> supposing that with a camera we have got some images,
> 
> 1 we calculate the HDR image
> 2 we measure on the mac screen the luminance with ximage
> 3 we measure the luminance in the real scene.
> 4 we compare the numbers and find a factor ( k=lum(hdr):lum(real) ).

I think that there are a lot of reasons you will come up with a factor, 
and often they will vary (the factors, that is), making the factor an 
unreliable means of conversion.  In zones of extreme contrast, it's 
quite difficult to accurately sample a scene with a handheld luminance 
meter with the same precision that pextrem -o can find the peaks. The 
factor derived from peak values is different from the factor derived 
from other values, I've found. Which is right?  If the real scene and 
the HDR are within a certain precentage of each other, do you call them 
synonomous?  I'd love to hear others weigh in on this topic.

----

      Rob Guglielmetti

e. rpg@rumblestrip.org
w. www.rumblestrip.org

From gward at lmi.net  Thu Jun 10 17:23:25 2004
From: gward at lmi.net (Greg Ward)
Date: Thu Jun 10 17:23:33 2004
Subject: [Radiance-general] Fwd: errors from hdrgen
In-Reply-To: <200406101420.10983.alex@juventuz.net>
References: <200406101420.10983.alex@juventuz.net>
Message-ID: <1DC88052-BAF2-11D8-89E2-000A95BB392A@lmi.net>

Hi Martin,

To get a reasonable fit to a particular camera, Photosphere (or hdrgen) 
needs more than just a few exposures.  I find that it likes at least 7 
exposures, better 9,  of a wide dynamic-range scene.  Each exposure 
should be separated by an f-stop or so by varying the shutter speed 
only.  This is explained in the Photosphere quickstart_pf.txt file, 
which I have quoted on this list recently.  (See my response to Barbara 
Matusiak on May 28 under the subject "conversion of digital pictures to 
Radiance?")  Once you have established the response function for a 
particular camera, you can then reuse it for a shorter exposure 
sequence, or even a single image (though you should not expect a high 
dynamic-range result in that case).  This storage and reuse is 
accomplished with hdrgen's -r option, or via the preferences file in 
Photosphere.

If the algorithm cannot arrive at a reasonable response function for 
your camera, Photosphere offers the option of applying a generic 
response function, instead.  Although I don't recommend this if your 
goal is accuracy, the following response file will permit hdrgen a 
similar fall-back using the -r option:

2 1 0 0
2 1 0 0
2 1 0 0

This simply assigns each channel the polynomial f(x) = x^2, which 
roughly corresponds to a standard gamma curve.  It's really a crude 
approximation, but since you are taking overlapping exposures, the 
global errors in the mid-exposure region are reasonably small.

By the way, I managed to convert both your sequences without complaints 
in Photosphere, though the three-image sequence is a bit blurry.  
Obviously, the alignment algorithm didn't quite work on this one.  
Unfortunately, it doesn't know when it's failed, so no errors or 
warnings are issued in most cases.

-Greg

P.S.  In response to Pillo's inquiry, the luminance reported by ximage 
should correspond roughly to the luminance you would measure with a 
photometer, accounting for the photopic response of the probe's filter. 
  However, you are definitely better off measuring something as close to 
white as possible, and preferably not a light source -- something more 
in the middle of the exposure range, like a grey card.  The latest 
version of Photosphere even includes a calibration option to make this 
work easier.

> From: Martin Matusiak <alex@juventuz.net>
> Date: June 10, 2004 5:20:10 AM PDT
>
> Terribly sorry for sending that mammoth attachment to the list, I 
> didn't
> realize it was that big before it was too late. :(
>
> Here they are instead:
> http://www.juventuz.com/_temp/good_set.tar.gz
> http://www.juventuz.com/_temp/bad_set.tar.gz
>
> Martin
>
> Subject: errors from hdrgen
> Date: Thursday 10 June 2004 13:11
>
> I seem to have trouble using hdrgen to generate hdr's.. The other day 
> it
> seemed to be working fine but now I'm getting errors like
> "Poor covergence of order 1 fit"
> "Cannot solve for response function"
>
> Ultimately it won't generate the image. Perhaps you could tell me what 
> they
> mean and what I'm doing wrong? I've attached the five images that gave 
> this
> error. I've also attached another set of 3 that gave no error or 
> warning at
> all, even though the resulting hdr is quite blurry.
>
> Thanks a lot!
>
> Martin


From Giulio.Antonutto at arup.com  Thu Jun 10 18:06:09 2004
From: Giulio.Antonutto at arup.com (Giulio Antonutto)
Date: Thu Jun 10 18:06:19 2004
Subject: [Radiance-general] Fwd: errors from hdrgen
Message-ID: <DC0CAEEA090E984C911D3B85B16C3F90FAF5C7@l-gnts05>

My question arises from some experiments measuring the same paper surface
under different light conditions:

Unfortunately it appears that if the source has a really narrow spectrum
this affects the results within a 40% with my camera (which I cannot give
the name... 001DNOKIN ;-) ).

I am stressing the methodology to see if it is reliable enough to substitute
luminance readings for a wide range of conditions with consumer digital
cameras (street lighting - interior lighting - day lighting ).
I really underline the concept of 'wide use' (wide = cheap ;-) ).

With this sort of equipment I would like to achieve an error within +-10%
and therefore a correction factor quite constant (within +-10%); is it
feasible?


I found a very interesting product where the question is somehow explained:
http://www.technoteam.de/pdf/lmkrollei_e.pdf


"
Measuring variations1 
halogen, D65,...<5%
fluorescent lamp, MHN-T,...<10%
1 Due to spectral distributions deviating from CIE standard illuminant A
within the scene.
"

and also

"
Under certain circumstances, spectral distributions
deviating from the CIE standard illuminant A may
cause bad measuring errors.The value displayed can be corrected by applying
an additional factor (Colour Correction Factor, ccf) during recalibration
in the software. The calculation of the ccf value requires to know the
spectral distributions within the measuring scene or also to use a mean
correction factor...

...In addition, the user will also be provided with the relative spectral
sensitivity
of the single colour channels and the resulting relative spectral
sensitivity of standard matrix formation. Thus, he
will be able to calculate other ccf values or also other weighting factors.
"

This suggest to me, I am guessing, that calibration is really important,
that must be performed under very strict and controlled conditions and that
all the measurement should be within a reasonable range of conditions
similar to the calibration environment( if I calibrate with D65 I cannot
expect to measure accurately LPS or HPS, isn't it?).

Do you have any field experience about this?

thanks a lot,
giulio

PS - sorry for this long and labyrinth style email!

-----Original Message-----
From: radiance-general-bounces@radiance-online.org
[mailto:radiance-general-bounces@radiance-online.org]On Behalf Of Greg
Ward
Sent: 10 June 2004 16:23
To: Radiance general discussion
Subject: Re: [Radiance-general] Fwd: errors from hdrgen


Hi Martin,

To get a reasonable fit to a particular camera, Photosphere (or hdrgen) 
needs more than just a few exposures.  I find that it likes at least 7 
exposures, better 9,  of a wide dynamic-range scene.  Each exposure 
should be separated by an f-stop or so by varying the shutter speed 
only.  This is explained in the Photosphere quickstart_pf.txt file, 
which I have quoted on this list recently.  (See my response to Barbara 
Matusiak on May 28 under the subject "conversion of digital pictures to 
Radiance?")  Once you have established the response function for a 
particular camera, you can then reuse it for a shorter exposure 
sequence, or even a single image (though you should not expect a high 
dynamic-range result in that case).  This storage and reuse is 
accomplished with hdrgen's -r option, or via the preferences file in 
Photosphere.

If the algorithm cannot arrive at a reasonable response function for 
your camera, Photosphere offers the option of applying a generic 
response function, instead.  Although I don't recommend this if your 
goal is accuracy, the following response file will permit hdrgen a 
similar fall-back using the -r option:

2 1 0 0
2 1 0 0
2 1 0 0

This simply assigns each channel the polynomial f(x) = x^2, which 
roughly corresponds to a standard gamma curve.  It's really a crude 
approximation, but since you are taking overlapping exposures, the 
global errors in the mid-exposure region are reasonably small.

By the way, I managed to convert both your sequences without complaints 
in Photosphere, though the three-image sequence is a bit blurry.  
Obviously, the alignment algorithm didn't quite work on this one.  
Unfortunately, it doesn't know when it's failed, so no errors or 
warnings are issued in most cases.

-Greg

P.S.  In response to Pillo's inquiry, the luminance reported by ximage 
should correspond roughly to the luminance you would measure with a 
photometer, accounting for the photopic response of the probe's filter. 
  However, you are definitely better off measuring something as close to 
white as possible, and preferably not a light source -- something more 
in the middle of the exposure range, like a grey card.  The latest 
version of Photosphere even includes a calibration option to make this 
work easier.

> From: Martin Matusiak <alex@juventuz.net>
> Date: June 10, 2004 5:20:10 AM PDT
>
> Terribly sorry for sending that mammoth attachment to the list, I 
> didn't
> realize it was that big before it was too late. :(
>
> Here they are instead:
> http://www.juventuz.com/_temp/good_set.tar.gz
> http://www.juventuz.com/_temp/bad_set.tar.gz
>
> Martin
>
> Subject: errors from hdrgen
> Date: Thursday 10 June 2004 13:11
>
> I seem to have trouble using hdrgen to generate hdr's.. The other day 
> it
> seemed to be working fine but now I'm getting errors like
> "Poor covergence of order 1 fit"
> "Cannot solve for response function"
>
> Ultimately it won't generate the image. Perhaps you could tell me what 
> they
> mean and what I'm doing wrong? I've attached the five images that gave 
> this
> error. I've also attached another set of 3 that gave no error or 
> warning at
> all, even though the resulting hdr is quite blurry.
>
> Thanks a lot!
>
> Martin


_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general

___________________________________________________________________
Electronic mail messages entering and leaving Arup business
systems are scanned for acceptability of content and viruses.

From tiago at tkh.att.ne.jp  Thu Jun 10 19:34:30 2004
From: tiago at tkh.att.ne.jp (Santiago Torres)
Date: Thu Jun 10 19:32:24 2004
Subject: [Radiance-general] Fwd: errors from hdrgen
In-Reply-To: <DC0CAEEA090E984C911D3B85B16C3F90FAF5C7@l-gnts05>
Message-ID: <ABEIIOCILNBBDDEPEPICCEJHCCAA.tiago@tkh.att.ne.jp>


Hi all,

I`m not sure about this, but the way I understand the calibration procedure,
you have three curves (one for each rgb color) that relate the pixel values
in the jpegs to the luminance values. On the other hand, most cameras have
some built in correction functions for different light sources, so I guess
each correction function (daylight, tubes, etc.) will have different
response curves for the three colors (in order to compensate for the
different source spectra). However, if you use always the same correction
function in the camera (not the auto-correction, which is changing all the
time, this really got me confused for a while), you`ll get good results with
any light source (probably there is still some error caused by the rgb being
different from the CIE observer... is it?)

So, for example, if you make your calibration with the camera set up for
daylight, then you should use it always with the daylight correction, even
if you are measuring a scene lit up with tubes. The images will look
greenish, but the values will be calculated according to the correct
calibration curves. I`ve tried some measurings (not with such wide range of
conditions, but) using daylight compensation for an indoor scene, with good
results.
I hope this makes some sense, got too long...
Saludos,

Santiago




> -----Original Message-----
> From: radiance-general-bounces@radiance-online.org
> [mailto:radiance-general-bounces@radiance-online.org]On Behalf Of
> Giulio Antonutto
> Sent: Friday, June 11, 2004 1:06 AM
> To: 'Radiance general discussion'
> Subject: RE: [Radiance-general] Fwd: errors from hdrgen
>
>
> My question arises from some experiments measuring the same paper surface
> under different light conditions:
>
> Unfortunately it appears that if the source has a really narrow spectrum
> this affects the results within a 40% with my camera (which I cannot give
> the name... 001DNOKIN ;-) ).
>
> I am stressing the methodology to see if it is reliable enough to
> substitute
> luminance readings for a wide range of conditions with consumer digital
> cameras (street lighting - interior lighting - day lighting ).
> I really underline the concept of 'wide use' (wide = cheap ;-) ).
>
> With this sort of equipment I would like to achieve an error within +-10%
> and therefore a correction factor quite constant (within +-10%); is it
> feasible?
>
>
> I found a very interesting product where the question is somehow
> explained:
> http://www.technoteam.de/pdf/lmkrollei_e.pdf
>
>
> "
> Measuring variations1
> halogen, D65,...<5%
> fluorescent lamp, MHN-T,...<10%
> 1 Due to spectral distributions deviating from CIE standard illuminant A
> within the scene.
> "
>
> and also
>
> "
> Under certain circumstances, spectral distributions
> deviating from the CIE standard illuminant A may
> cause bad measuring errors.The value displayed can be corrected
> by applying
> an additional factor (Colour Correction Factor, ccf) during recalibration
> in the software. The calculation of the ccf value requires to know the
> spectral distributions within the measuring scene or also to use a mean
> correction factor...
>
> ...In addition, the user will also be provided with the relative spectral
> sensitivity
> of the single colour channels and the resulting relative spectral
> sensitivity of standard matrix formation. Thus, he
> will be able to calculate other ccf values or also other
> weighting factors.
> "
>
> This suggest to me, I am guessing, that calibration is really important,
> that must be performed under very strict and controlled
> conditions and that
> all the measurement should be within a reasonable range of conditions
> similar to the calibration environment( if I calibrate with D65 I cannot
> expect to measure accurately LPS or HPS, isn't it?).
>
> Do you have any field experience about this?
>
> thanks a lot,
> giulio
>
> PS - sorry for this long and labyrinth style email!
>
> -----Original Message-----
> From: radiance-general-bounces@radiance-online.org
> [mailto:radiance-general-bounces@radiance-online.org]On Behalf Of Greg
> Ward
> Sent: 10 June 2004 16:23
> To: Radiance general discussion
> Subject: Re: [Radiance-general] Fwd: errors from hdrgen
>
>
> Hi Martin,
>
> To get a reasonable fit to a particular camera, Photosphere (or hdrgen)
> needs more than just a few exposures.  I find that it likes at least 7
> exposures, better 9,  of a wide dynamic-range scene.  Each exposure
> should be separated by an f-stop or so by varying the shutter speed
> only.  This is explained in the Photosphere quickstart_pf.txt file,
> which I have quoted on this list recently.  (See my response to Barbara
> Matusiak on May 28 under the subject "conversion of digital pictures to
> Radiance?")  Once you have established the response function for a
> particular camera, you can then reuse it for a shorter exposure
> sequence, or even a single image (though you should not expect a high
> dynamic-range result in that case).  This storage and reuse is
> accomplished with hdrgen's -r option, or via the preferences file in
> Photosphere.
>
> If the algorithm cannot arrive at a reasonable response function for
> your camera, Photosphere offers the option of applying a generic
> response function, instead.  Although I don't recommend this if your
> goal is accuracy, the following response file will permit hdrgen a
> similar fall-back using the -r option:
>
> 2 1 0 0
> 2 1 0 0
> 2 1 0 0
>
> This simply assigns each channel the polynomial f(x) = x^2, which
> roughly corresponds to a standard gamma curve.  It's really a crude
> approximation, but since you are taking overlapping exposures, the
> global errors in the mid-exposure region are reasonably small.
>
> By the way, I managed to convert both your sequences without complaints
> in Photosphere, though the three-image sequence is a bit blurry.
> Obviously, the alignment algorithm didn't quite work on this one.
> Unfortunately, it doesn't know when it's failed, so no errors or
> warnings are issued in most cases.
>
> -Greg
>
> P.S.  In response to Pillo's inquiry, the luminance reported by ximage
> should correspond roughly to the luminance you would measure with a
> photometer, accounting for the photopic response of the probe's filter.
>   However, you are definitely better off measuring something as close to
> white as possible, and preferably not a light source -- something more
> in the middle of the exposure range, like a grey card.  The latest
> version of Photosphere even includes a calibration option to make this
> work easier.
>
> > From: Martin Matusiak <alex@juventuz.net>
> > Date: June 10, 2004 5:20:10 AM PDT
> >
> > Terribly sorry for sending that mammoth attachment to the list, I
> > didn't
> > realize it was that big before it was too late. :(
> >
> > Here they are instead:
> > http://www.juventuz.com/_temp/good_set.tar.gz
> > http://www.juventuz.com/_temp/bad_set.tar.gz
> >
> > Martin
> >
> > Subject: errors from hdrgen
> > Date: Thursday 10 June 2004 13:11
> >
> > I seem to have trouble using hdrgen to generate hdr's.. The other day
> > it
> > seemed to be working fine but now I'm getting errors like
> > "Poor covergence of order 1 fit"
> > "Cannot solve for response function"
> >
> > Ultimately it won't generate the image. Perhaps you could tell me what
> > they
> > mean and what I'm doing wrong? I've attached the five images that gave
> > this
> > error. I've also attached another set of 3 that gave no error or
> > warning at
> > all, even though the resulting hdr is quite blurry.
> >
> > Thanks a lot!
> >
> > Martin
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
> ___________________________________________________________________
> Electronic mail messages entering and leaving Arup business
> systems are scanned for acceptability of content and viruses.
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>



From alex at juventuz.net  Fri Jun 11 11:13:43 2004
From: alex at juventuz.net (Martin Matusiak)
Date: Fri Jun 11 11:14:12 2004
Subject: [Radiance-general] Fwd: errors from hdrgen
In-Reply-To: <1DC88052-BAF2-11D8-89E2-000A95BB392A@lmi.net>
References: <200406101420.10983.alex@juventuz.net>
	<1DC88052-BAF2-11D8-89E2-000A95BB392A@lmi.net>
Message-ID: <200406111113.43395.alex@juventuz.net>

Ah yes, I had been meaning to try the camera calibration technique but I 
hadn't come around to it. It turns out to be very useful. But I still have 
some issues. I took in all 13 pictures of an indoor scene looking out the 
window for the calibration. I then had to remove the darkest and the lightest 
of them to get a hdr image. That leaves about 8 images and I get a hdr image 
but there are errors in the conversion process.

The resulting hdr does not look very good, first of all the alignment 
algorithm always distorts it like crazy. The images were taken with a tripod 
so they should be reasonably well aligned but the algorithm moves them all 
over the place. So I disable that. I tried setting -g to kill the ghosts but 
that totally messed up the color balance of the image.

If I only turn off the alignment algorithm, the image still looks very 
green/brown however. I take it this isn't supposed to happen? I toggle the 
exposure adjustment but it makes no difference.

Pardon my ignorance, but is the hdr image supposed to look a lot like the 
original? Is it a bad sign when the color balance is all wrong? 

The images I took are enclosed. They were taken sequentially from lowest to 
highest exposure, -2 to 2 in 1/3 steps. White balance was set to "overcast" 
and should be the same for all, taken within 1 minute of each other.

url: http://www.juventuz.com/_temp/for_calibration.tar.bz2

If you have more luck with them, I'd love to know what options were used in 
the conversion process.


Martin



On Thursday 10 June 2004 17:23, Greg Ward wrote:
> conversion of digital pictures to
> Radiance?

From a.jacobs at londonmet.ac.uk  Fri Jun 11 11:43:07 2004
From: a.jacobs at londonmet.ac.uk (Axel Jacobs)
Date: Fri Jun 11 11:50:25 2004
Subject: [Radiance-general] Fwd: errors from hdrgen
In-Reply-To: <200406111113.43395.alex@juventuz.net>
References: <200406101420.10983.alex@juventuz.net>	<1DC88052-BAF2-11D8-89E2-000A95BB392A@lmi.net>
	<200406111113.43395.alex@juventuz.net>
Message-ID: <40C97EAB.4000405@londonmet.ac.uk>

Martin,

>Ah yes, I had been meaning to try the camera calibration technique but I 
>hadn't come around to it. It turns out to be very useful. But I still have 
>some issues. I took in all 13 pictures of an indoor scene looking out the 
>window for the calibration. I then had to remove the darkest and the lightest 
>of them to get a hdr image. That leaves about 8 images and I get a hdr image 
>but there are errors in the conversion process.
>  
>
I hdr'ed all ouf the 13 images in one go, and apart for some 'poor 
convergence' (orders 1, 3, 4 and 5) warnings, it worked fine. There is 
no apparent distortion.

>The resulting hdr does not look very good, first of all the alignment 
>algorithm always distorts it like crazy. The images were taken with a tripod 
>so they should be reasonably well aligned but the algorithm moves them all 
>over the place. So I disable that. I tried setting -g to kill the ghosts but 
>that totally messed up the color balance of the image.
>  
>
As you say, the indoor scene is a bit greenish, but outdoors is fine. 
There seems to be a lot of brown in the room (table, wall panelling). I 
don't know if this could cause the prob.

Axel

PS: I don't know if Greg has recently updated hdrgen. My copy is >6 
months old (LINUX).

PPS: With the two darkest and the two brightest images excluded, there 
is a poor convergence for orders 1 and 5 fit, but still no distortions.


From s0343631 at sms.ed.ac.uk  Fri Jun 11 13:21:53 2004
From: s0343631 at sms.ed.ac.uk (O Graf)
Date: Fri Jun 11 13:21:57 2004
Subject: [Radiance-general] rholo & .hif files
Message-ID: <1086952913.40c995d153a11@sms.ed.ac.uk>

Hi!

What is actually the trick for setting the right values for the 'section'
variable in a .hif file? The rad-file which I use contains a laser scan of a
real room and I have no idea what are the right values for the 'section'
variable. Every time I change the values the actual grid appears somewhere in
the middle of the whole scenery and I get such warnings as

          dev/ogl.hdi: no sections visible from this view

if I try to turn around or to zoom. I understand why these warnings come, but I
would like to know how I can estimate the values for the section to avoid the
warnings and to be able to see the whole room and not only 2 walls.

Another funny thing is that the whole room stands on its side, i.e. lines that
are supposed to be vertical appear horizontal. First I thought the view
direction might be wrong, but if I run the same .oct-file with rview using the
same view-file everything is perfect. In addition to the right view direction
the rview-command produces colored images and rholo gives only grey values from
the same .oct-file. Is there a particular reason for such different results?

regards,

Olga


From alex at juventuz.net  Fri Jun 11 14:17:29 2004
From: alex at juventuz.net (Martin Matusiak)
Date: Fri Jun 11 14:18:26 2004
Subject: [Radiance-general] Fwd: errors from hdrgen
In-Reply-To: <40C97EAB.4000405@londonmet.ac.uk>
References: <200406101420.10983.alex@juventuz.net>
	<200406111113.43395.alex@juventuz.net>
	<40C97EAB.4000405@londonmet.ac.uk>
Message-ID: <200406111417.29402.alex@juventuz.net>

> I hdr'ed all ouf the 13 images in one go, and apart for some 'poor
> convergence' (orders 1, 3, 4 and 5) warnings, it worked fine. There is
> no apparent distortion.

I repeated the process using the manual mode of the camera rather than 
aperture priority. Again 13 images (same room, scene was a bit different as I 
eliminated the sky in the framing) and I was able to compute a hdr. But the 
alignment problem still persists, I use the -a switch to turn it off.

Later I took a couple more images and used the calibration data to compute a 
hdr and read the luminance values off it. It turns out that those are 
somewhat accurate so that's a good sign!

However, I'm still not quite satisfied. Obviously, the calibration procedure 
is meant to give a most accurate static description of the camera, but I used 
the camera's automatic whitebalance correction, so that's a variable. My 
question is a complete novice one: how does the whitebalance affect the 
luminance? What can I do to eliminate this variable (if it is significant).


Martin

From alex at juventuz.net  Fri Jun 11 14:21:55 2004
From: alex at juventuz.net (Martin Matusiak)
Date: Fri Jun 11 14:22:51 2004
Subject: Fwd: Re: [Radiance-general] Fwd: errors from hdrgen
Message-ID: <200406111421.55929.alex@juventuz.net>

I forgot to mention that my "cvs build" of hdrgen is from last week, so there 
could have been changes from the version you have.

Martin

----------  Forwarded Message  ----------

Subject: Re: [Radiance-general] Fwd: errors from hdrgen
Date: Friday 11 June 2004 14:17
From: Martin Matusiak <alex@juventuz.net>
To: Radiance general discussion <radiance-general@radiance-online.org>

> I hdr'ed all ouf the 13 images in one go, and apart for some 'poor
> convergence' (orders 1, 3, 4 and 5) warnings, it worked fine. There is
> no apparent distortion.

I repeated the process using the manual mode of the camera rather than
aperture priority. Again 13 images (same room, scene was a bit different as I
eliminated the sky in the framing) and I was able to compute a hdr. But the
alignment problem still persists, I use the -a switch to turn it off.

Later I took a couple more images and used the calibration data to compute a
hdr and read the luminance values off it. It turns out that those are
somewhat accurate so that's a good sign!

However, I'm still not quite satisfied. Obviously, the calibration procedure
is meant to give a most accurate static description of the camera, but I used
the camera's automatic whitebalance correction, so that's a variable. My
question is a complete novice one: how does the whitebalance affect the
luminance? What can I do to eliminate this variable (if it is significant).


Martin

-------------------------------------------------------

From anthony.farrell at dit.ie  Fri Jun 11 15:51:26 2004
From: anthony.farrell at dit.ie (Anthony J. Farrell)
Date: Fri Jun 11 15:53:44 2004
Subject: [Radiance-general] Prismatic glazing in radiance PMAP
Message-ID: <OJEGILOIGGNAEAODNHIICEEGCDAA.anthony.farrell@dit.ie>

Hi,

I am trying to model a simple sheet of prismatic glazing, but am unclear of
the dimension variable set out in the PMAP user manual for the prism
command.

Could anyone please forward me a drawing or sketch of what this command is
based?

Kind regards,

Anthony


-- 
This message has been scanned for content and 
viruses by the DIT Information Services MailScanner 
Service, and is believed to be clean.
http://www.dit.ie


From gward at lmi.net  Fri Jun 11 17:09:17 2004
From: gward at lmi.net (Greg Ward)
Date: Fri Jun 11 17:09:24 2004
Subject: [Radiance-general] Fwd: errors from hdrgen
In-Reply-To: <200406111421.55929.alex@juventuz.net>
References: <200406111421.55929.alex@juventuz.net>
Message-ID: <4EE8BCAC-BBB9-11D8-BDAA-000A95BB392A@lmi.net>

Hi Martin,

I believe that hdrgen isn't coming up with a good response function for 
your camera with this scene, probably due to the strong color cast of 
the walls.  Since hdrgen (and Photosphere) compute the responses for 
each of the RGB channels, using a lot of colorful patch samples can 
skew the result.  I've never seen such an extreme example before, 
though -- most walls are off-white so this hadn't come up.  Come to 
think of it, the tendency of cameras to super-saturate their colors 
could spell trouble in such cases, and I probably should modify my 
algorithm to avoid colorful patch samples.

Thanks for the image set -- I'll run some experiments on my end to see 
if I can improve on this.  It is important to fix the white balance 
whenever you take an HDR sequence, as the camera in auto white mode 
will alter the coefficients between exposures otherwise, making it 
impossible to get a consistent result.

-Greg

> From: Martin Matusiak <alex@juventuz.net>
> Date: June 11, 2004 5:17:29 AM PDT
>
>> I hdr'ed all ouf the 13 images in one go, and apart for some 'poor
>> convergence' (orders 1, 3, 4 and 5) warnings, it worked fine. There is
>> no apparent distortion.
>
> I repeated the process using the manual mode of the camera rather than
> aperture priority. Again 13 images (same room, scene was a bit 
> different as I
> eliminated the sky in the framing) and I was able to compute a hdr. 
> But the
> alignment problem still persists, I use the -a switch to turn it off.
>
> Later I took a couple more images and used the calibration data to 
> compute a
> hdr and read the luminance values off it. It turns out that those are
> somewhat accurate so that's a good sign!
>
> However, I'm still not quite satisfied. Obviously, the calibration 
> procedure
> is meant to give a most accurate static description of the camera, but 
> I used
> the camera's automatic whitebalance correction, so that's a variable. 
> My
> question is a complete novice one: how does the whitebalance affect the
> luminance? What can I do to eliminate this variable (if it is 
> significant).
>
> Martin


From gward at lmi.net  Fri Jun 11 18:18:46 2004
From: gward at lmi.net (Greg Ward)
Date: Fri Jun 11 18:18:58 2004
Subject: [Radiance-general] Re: Fwd: errors from hdrgen
In-Reply-To: <200406111421.55929.alex@juventuz.net>
References: <200406111421.55929.alex@juventuz.net>
Message-ID: <03936172-BBC3-11D8-992A-000A95BB392A@lmi.net>

Hi again.

Well, I played around with limiting the saturation on patches, and it 
only seems to make matters worse; I'm not sure why.  I think it's 
because you don't have enough unsaturated pixels in your scene for it 
to work, but I'll have to perform some more experiments to determine 
that for certain.  For now, you'll just have to find a more "neutral" 
scene to perform your calibration on, then save the response function 
and reuse it for other scenes, which is what I've been doing.

-Greg

> From: Martin Matusiak <alex@juventuz.net>
> Date: June 11, 2004 5:21:55 AM PDT
>
> I forgot to mention that my "cvs build" of hdrgen is from last week, 
> so there
> could have been changes from the version you have.
>
> Martin


From ganjatron at gmx.net  Fri Jun 11 21:11:56 2004
From: ganjatron at gmx.net (Roland Schregle)
Date: Fri Jun 11 21:15:54 2004
Subject: [Radiance-general] Prismatic glazing in radiance PMAP
In-Reply-To: <OJEGILOIGGNAEAODNHIICEEGCDAA.anthony.farrell@dit.ie>
References: <OJEGILOIGGNAEAODNHIICEEGCDAA.anthony.farrell@dit.ie>
Message-ID: <40CA03FC.6010504@gmx.net>

Anthony J. Farrell wrote:
> Hi,
> 
> I am trying to model a simple sheet of prismatic glazing, but am unclear of
> the dimension variable set out in the PMAP user manual for the prism
> command.

Dimension variable? If you're referring to the -ds parameter, that 
affects the resolution with which the light source surfaces are sampled 
during photon emission. Are you referring to the prism material or the 
genprism command?


-- 
Roland Schregle
PhD candidate, Fraunhofer Institute for Solar Energy Systems
RADIANCE Photon Map page: www.ise.fhg.de/radiance/photon-map

END OF LINE. (MCP)


From MMoeck at engr.psu.edu  Fri Jun 11 22:03:42 2004
From: MMoeck at engr.psu.edu (Martin Moeck)
Date: Fri Jun 11 22:05:01 2004
Subject: [Radiance-general] Prismatic glazing in radiance PMAP
Message-ID: <84F05BA9118BBD4A8FC6409808CE266C113A1F@ENGRMAIL2.engr.psu.edu>

Are there any validations of pmap? If desired, I can make measured data available for some prismatic  glazings as shown at www.siteco.de. See http://www.siteco.de/products/tageslichtsysteme/?currency=EUR&lang=en&javascript=true  Click on "large panel prism systems". 
 
Martin, Penn State

	-----Original Message----- 
	From: Roland Schregle [mailto:ganjatron@gmx.net] 
	Sent: Fri 6/11/2004 3:11 PM 
	To: Radiance general discussion 
	Cc: 
	Subject: Re: [Radiance-general] Prismatic glazing in radiance PMAP
	
	

	Anthony J. Farrell wrote:
	> Hi,
	>
	> I am trying to model a simple sheet of prismatic glazing, but am unclear of
	> the dimension variable set out in the PMAP user manual for the prism
	> command.
	
	Dimension variable? If you're referring to the -ds parameter, that
	affects the resolution with which the light source surfaces are sampled
	during photon emission. Are you referring to the prism material or the
	genprism command?
	
	
	--
	Roland Schregle
	PhD candidate, Fraunhofer Institute for Solar Energy Systems
	RADIANCE Photon Map page: www.ise.fhg.de/radiance/photon-map
	
	END OF LINE. (MCP)
	
	
	_______________________________________________
	Radiance-general mailing list
	Radiance-general@radiance-online.org
	http://www.radiance-online.org/mailman/listinfo/radiance-general
	

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 4902 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20040611/83d558e7/attachment-0001.bin
From rpg at rumblestrip.org  Fri Jun 11 22:08:00 2004
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Fri Jun 11 22:07:29 2004
Subject: [Radiance-general] IES file fun
Message-ID: <40CA1120.4070203@rumblestrip.org>

I was creating a light source the other day, from an IES file.  Turns 
out this was to be my first encounter with an IESNA LM-63-95-formatted 
file, on a directional, linear fixture.  Well, the first time, using 
Radiance that is.

I ran the *non*-directional downlight file thru ies2rad and then checked 
it in ltview, and it looked like this:

http://www.rumblestrip.org/site-img/rad/linear.jpg

So far so good.

Then I ran the *directional* downlight file thru ies2rad and checked it 
in ltview, and it looked like this:

http://www.rumblestrip.org/site-img/rad/assym.jpg

Eureka!  I have defied physics!  It was after looking at this image that 
I re-checked the ies file, and discovered that it's the LM-63-95 spec. 
This is a problem, because the spec calls for the 0-180 vertical plane 
to be oriented parallel to the lamp axis, whereas it's more common to 
orient it perpendicular.  ies2rad can't even have a check for this, 
because the spec is so loosely written.  This is why checking the 
distribution of my converted luminaires is so important to me, prior 
using them in a calc.  I always did it because I don't trust myself, but 
clearly too much faith in the quality of your input files is also a bad 
thing.

Anyhoo, I simply reversed the length and width values for the luminous 
opening parameters in the ies file, and got this:

http://www.rumblestrip.org/site-img/rad/assym90.jpg

Now, I have a useable fixture, albeit one with a default plan 
orientation that is 90 degrees off from the norm.  I guess I could 
"wrap" the whole thing in an xform file so that I could use it in a 
standard library.

Is there a better way to "correct" a funky IES file for ies2rad? What do 
you all do when you encounter this?

- Rob G.


From toast at becausewecan.org  Fri Jun 11 22:22:37 2004
From: toast at becausewecan.org (Jeffrey McGrew)
Date: Fri Jun 11 22:22:41 2004
Subject: [Radiance-general] OS X - strange problem with Octrees
In-Reply-To: <84F05BA9118BBD4A8FC6409808CE266C113A1F@ENGRMAIL2.engr.psu.edu>
References: <84F05BA9118BBD4A8FC6409808CE266C113A1F@ENGRMAIL2.engr.psu.edu>
Message-ID: <40CA148D.1040500@becausewecan.org>


Hello all,

	I've been using Radiance now for a little while on a G4 at home that 
I've set up with ssh so that I can submit jobs to it while I'm at 
work. And I've run into a very strange issue that I haven't hit using 
Radiance on any other platform, and seeing that several here use 
Radiance on OS X I figured I ask. I bet it's something obvious, but I 
don't know enough yet about OS X's flavor of *nix to know what's going on.

So here's my problem: doesn't matter if I'm logged on local or via 
ssh, when I run Rad, and it generates an Octree, everything is fine 
and works. But if I try to reuse that Octree in the future, or in a 
later session, I get a strange error reporting that the system can't 
find some temporary file that appears to have a machine-generated name 
that's different every time.

What's going on? Why would there be anything temporary about Octree 
generation?

Thanks in advance,

Jeffrey McGrew

From tecnico at omniluxlighting.it  Sat Jun 12 00:51:15 2004
From: tecnico at omniluxlighting.it (Stefano Callegari)
Date: Sat Jun 12 00:51:45 2004
Subject: [Radiance-general] IES file fun
In-Reply-To: <40CA1120.4070203@rumblestrip.org>
References: <40CA1120.4070203@rumblestrip.org>
Message-ID: <20040611225115.GE4242@tecnico>

Il 11Jun 16:08, Rob Guglielmetti scrisse:
> I was creating a light source the other day, from an IES file.  Turns 

First, are you sure the ies data are correct?

[cut]
> 
> http://www.rumblestrip.org/site-img/rad/linear.jpg
> 
> So far so good.

It seems a symmetric fitting.

> 
> Then I ran the *directional* downlight file thru ies2rad and checked it 
> in ltview, and it looked like this:
> 
> http://www.rumblestrip.org/site-img/rad/assym.jpg

This time it seems an asymmetric fitting. What you meen with
*directional*?

> Eureka!  I have defied physics!  It was after looking at this image that 
> I re-checked the ies file, and discovered that it's the LM-63-95 spec. 
> This is a problem, because the spec calls for the 0-180 vertical plane 
> to be oriented parallel to the lamp axis, whereas it's more common to 
> orient it perpendicular.  ies2rad can't even have a check for this, 

It's right, the 0-180 plane normally must be oriented parallel to the
lamp axis. This is a general rule to point right the fitting.

The IES specifies:

[...]
This integer value indicates the type of photometric web used for the
photometric measurements as follows:

  Value Description

    1   Type C photometry
    2   Type B photometry
    3   Type A photometry

Luminaires are photometered by locating the luminaire at the center of
an imaginary sphere and measuring the light intensity (candela) values
at grid points (the "photometric web') on the sphere's surface. The
orientation of the luminaire's axes relative to that of the sphere
determines the photometric type.

Type C photometry is normally used for architectural and roadway
luminaires. The polar axis of the photometric web coincides with the
vertical axis of the luminaire, and the 0-180 degree photometric plane
coincides with the luminaire's major axis (length).

Type B photometry is normally used for adjustable outdoor area and
sports lighting luminaires. The polar axis of the luminaire coincides
with the minor axis (width) of the luminaire, and the 0-180 degree
photometric plane coinicides with the luminaire's vertical axis.

Type A photometry is normally used for automotive headlights and signal
lights. The polar axis of the luminaire coincides with the major axis
(length) of the luminaire, and the 0-180 degree photometric plane
coinicides with the luminaire's vertical axis.
[...]

Normally the major axis in the type C (the most used) coincides whit
the lengt of the lamps. If the lamp is vertical in the fitting, like a
downlight, the luminous flux is normaly simmetric so is not important
which is the 0-180 plane.

If the fitting has an asymmetric reflector, then the direction of the
max flux coincides at 90? (0? 3 o'clock, 90? 12 o'clock)

> because the spec is so loosely written.  This is why checking the 

I have a good text about the IESNA Photometric Data File (about 33K).
If you need it, could I attach it to the ML?

[cut]
> Is there a better way to "correct" a funky IES file for ies2rad? What do 
> you all do when you encounter this?

If the rad is wrong most likely you have a bad IES file. 

Ciao
-- 
Stefano Callegari <tecnico@omniluxlighting.it>
Omnilux Srl
Via Frassanedo, 2 - I 35020 Villatora di Saonara (PD)
+39 049 8792281
GnuPG Public Key Server: pgp.mit.edu

From rpg at rumblestrip.org  Sat Jun 12 04:19:16 2004
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Sat Jun 12 04:19:29 2004
Subject: [Radiance-general] IES file fun
In-Reply-To: <20040611225115.GE4242@tecnico>
References: <40CA1120.4070203@rumblestrip.org> <20040611225115.GE4242@tecnico>
Message-ID: <E73D4EEA-BC16-11D8-B220-000393824274@rumblestrip.org>

Ciao Stefano!

On Jun 11, 2004, at 6:51 PM, Stefano Callegari wrote:
>
> First, are you sure the ies data are correct?

It looks fine to me in two different photometric file viewers, as well 
as in plain text...
>
> It seems a symmetric fitting.

It is.  No problems there.  That was just for example.

>> http://www.rumblestrip.org/site-img/rad/assym.jpg
>
> This time it seems an asymmetric fitting. What you meen with
> *directional*?

Sorry, I mean exactly the same thing, asymmetric.

>> Eureka!  I have defied physics!  It was after looking at this image 
>> that
>> I re-checked the ies file, and discovered that it's the LM-63-95 spec.
>> This is a problem, because the spec calls for the 0-180 vertical plane
>> to be oriented parallel to the lamp axis, whereas it's more common to
>> orient it perpendicular.  ies2rad can't even have a check for this,
>
> It's right, the 0-180 plane normally must be oriented parallel to the
> lamp axis. This is a general rule to point right the fitting.

Depends on which version of the IES spec you reference, and this is the 
whole problem.  There is a good bit about it in Ian Ashdown's Lightfair 
presentation "Thinking Photometrically".  A link to the course notes is 
at the bottom of the page referenced by this url (there is also an 
excellent summary of the IES file format in there):  
http://www.helios32.com/resources.htm

I have cribbed from these course notes the following section 3.6.2, 
"Luminaire Orientation and Position":

"Given a luminaire with an asymmetric luminous flux distribution (such 
as a fluorescent  wall-washer), it is essential to orient the luminaire 
correctly in a CAD model.  Unfortunately, this can be more difficult 
than you might expect.

"The first problem is that the various IESNA LM-series documents 
provide contradictory  specifications on how the photometric web is to 
be oriented with respect to the physical  outline of a luminaire.  For 
example, IESNA LM-63-95 implies (but does not specify) that the 0?180 
degree  vertical plane of the photometric web is oriented parallel to 
the lamp axis of linear  fluorescent luminaires. If the luminous flux 
distribution is bilaterally symmetric about the  90?270 degree vertical 
plane (that is, perpendicular to the lamp axis), then the horizontal 
angles must be reported from 90 to 270 degrees.

"However, IESNA LM-41-98 recommends (but does not specify) that the 
photometric web  for such luminaires be oriented perpendicular to the 
lamp axis, with 0 degrees being the ?beam side.?  Most (but not all) 
fluorescent lighting manufacturers have ignored IESNA LM-63-95 and  
followed the recommendation of IESNA LM-41-98. This means that the 
lighting design  software program user must manually examine the IESNA 
LM-63 text file to see whether  the photometric web is oriented 
parallel or perpendicular to the lamps axis. If this  information is 
not stated in the file header, the user may have to contact the 
luminaire  manufacturer."
   - From Ian Ashdown's "Thinking Photometrically"

So, I guess we could call it a faulty file, but really it seems to me 
to be a difference in opinion as to how the photometric web is supposed 
to be arranged, between the manufacturer that supplied this IES file, 
and the IES spec. Or am I missing something (else)?

-Rob G.

From gward at lmi.net  Sat Jun 12 07:05:16 2004
From: gward at lmi.net (Greg Ward)
Date: Sat Jun 12 07:05:27 2004
Subject: [Radiance-general] rholo & .hif files
In-Reply-To: <1086952913.40c995d153a11@sms.ed.ac.uk>
References: <1086952913.40c995d153a11@sms.ed.ac.uk>
Message-ID: <180514A0-BC2E-11D8-9C1F-000A95BB392A@lmi.net>

Hi Olga,

Download my paper on the Holodeck from:

	http://www.anyhere.com/gward/papers.html

You want to align your model with the coordinate axis, and create a 
section grid that corresponds to a volume of free movement inside your 
space.  How you figure out these coordinates is up to you -- I might 
recommend trying rview with the "trace" command to determine the 
locations of various scanned surfaces.

-Greg

> From: O Graf <s0343631@sms.ed.ac.uk>
> Date: June 11, 2004 4:21:53 AM PDT
>
> Hi!
>
> What is actually the trick for setting the right values for the 
> 'section'
> variable in a .hif file? The rad-file which I use contains a laser 
> scan of a
> real room and I have no idea what are the right values for the 
> 'section'
> variable. Every time I change the values the actual grid appears 
> somewhere in
> the middle of the whole scenery and I get such warnings as
>
>           dev/ogl.hdi: no sections visible from this view
>
> if I try to turn around or to zoom. I understand why these warnings 
> come, but I
> would like to know how I can estimate the values for the section to 
> avoid the
> warnings and to be able to see the whole room and not only 2 walls.
>
> Another funny thing is that the whole room stands on its side, i.e. 
> lines that
> are supposed to be vertical appear horizontal. First I thought the view
> direction might be wrong, but if I run the same .oct-file with rview 
> using the
> same view-file everything is perfect. In addition to the right view 
> direction
> the rview-command produces colored images and rholo gives only grey 
> values from
> the same .oct-file. Is there a particular reason for such different 
> results?
>
> regards,
>
> Olga


From gward at lmi.net  Sat Jun 12 07:18:51 2004
From: gward at lmi.net (Greg Ward)
Date: Sat Jun 12 07:18:58 2004
Subject: [Radiance-general] Fwd: errors from hdrgen
In-Reply-To: <DC0CAEEA090E984C911D3B85B16C3F90FAF5C7@l-gnts05>
References: <DC0CAEEA090E984C911D3B85B16C3F90FAF5C7@l-gnts05>
Message-ID: <FDFA6D6B-BC2F-11D8-9C1F-000A95BB392A@lmi.net>

Hi Pillo,

Basically, I'm writing to agree with Santiago.  If you want repeatable 
measurements, you have to fix your camera's white balance to a 
particular setting.  Otherwise, the response curves for the three 
channels will change.  Technically, the camera merely applies a 
different multiplier to its three channels, but it does this in a color 
space other than RGB -- a space we cannot know after the image has been 
recorded in a JPEG or TIFF.  Because we cannot know when and how the 
camera's gamma/contrast curve is applied relative to its color 
transformation(s), it is not possible to back this out.  The best we 
can do is keep the color space transitions constant by fixing the white 
balance and contrast settings on the camera, and let hdrgen do its best 
to estimate the response function on the result.

-Greg

> From: Giulio Antonutto <Giulio.Antonutto@arup.com>
> Date: June 10, 2004 9:06:09 AM PDT
>
> My question arises from some experiments measuring the same paper 
> surface
> under different light conditions:
>
> Unfortunately it appears that if the source has a really narrow 
> spectrum
> this affects the results within a 40% with my camera (which I cannot 
> give
> the name... 001DNOKIN ;-) ).
>
> I am stressing the methodology to see if it is reliable enough to 
> substitute
> luminance readings for a wide range of conditions with consumer digital
> cameras (street lighting - interior lighting - day lighting ).
> I really underline the concept of 'wide use' (wide = cheap ;-) ).
>
> With this sort of equipment I would like to achieve an error within 
> +-10%
> and therefore a correction factor quite constant (within +-10%); is it
> feasible?
>
> ...


From schorsch at schorsch.com  Sat Jun 12 12:49:18 2004
From: schorsch at schorsch.com (Georg Mischler)
Date: Sat Jun 12 12:49:23 2004
Subject: [Radiance-general] IES file fun
In-Reply-To: <E73D4EEA-BC16-11D8-B220-000393824274@rumblestrip.org>
References: <40CA1120.4070203@rumblestrip.org> <20040611225115.GE4242@tecnico>
	<E73D4EEA-BC16-11D8-B220-000393824274@rumblestrip.org>
Message-ID: <Pine.BSF.4.58.0406120645140.91161@emancholl.pair.com>

Rob Guglielmetti wrote:

> IESNA LM-63-95 implies (but does not specify) that the 0?180
> degree  vertical plane of the photometric web is oriented parallel to
> the lamp axis of linear  fluorescent luminaires.

As I understand my copy of the standards document, this is not
just "implied" but clearly spelled out. At least the phrasing
left me with no doubt about the intended goal (I'm not at the
office, so I can't cite the original right now). nevertheless,
I consider this requirement a conceptual defect in the
specification.

The practical result is that with asymmetric linear fixtures, the
C0 plane will show the least interesting curve of the complete
dataset. For this reason, many manufacturers "cheat". They create
their files so that the width is given a larger value than the
length. That way, they can place the most interesting
(asymmetric) curve in the C0 plane, without violating the letter
of the standard (of course, they still violate its intention).

Most software reading IES files knows about those tricks, and
will apply the necessary corrections. I do the same in Rayfront,
but I didn't check if ies2rad does. In either case, I don't know
if this is the reason for the troubles described here, but it
might...

FWIW, the Eulumdat format specifies the orientation of the C0
plane in the sensible way, so that it will contain the most
interesting curve for asymmetric distributions.


-schorsch

-- 
Georg Mischler  --  simulations developer  --  schorsch at schorsch com
+schorsch.com+  --  lighting design tools  --  http://www.schorsch.com/

From gward at lmi.net  Sat Jun 12 16:09:19 2004
From: gward at lmi.net (Greg Ward)
Date: Sat Jun 12 16:09:31 2004
Subject: [Radiance-general] IES file fun
In-Reply-To: <Pine.BSF.4.58.0406120645140.91161@emancholl.pair.com>
References: <40CA1120.4070203@rumblestrip.org> <20040611225115.GE4242@tecnico>
	<E73D4EEA-BC16-11D8-B220-000393824274@rumblestrip.org>
	<Pine.BSF.4.58.0406120645140.91161@emancholl.pair.com>
Message-ID: <188458A7-BC7A-11D8-880E-000A95BB392A@lmi.net>

I can attest that ies2rad doesn't know about these "tricks," as I 
didn't know about these tricks.  I don't think I'll have time to fix it 
in the immediate future, and given that I still don't understand the 
subtleties involved, I wouldn't want to attempt a quick hack in this 
case.  It sounds like Schorsch is definitely onto something, though...

-Greg

> From: Georg Mischler <schorsch@schorsch.com>
> Date: June 12, 2004 3:49:18 AM PDT
>
> Rob Guglielmetti wrote:
>
>> IESNA LM-63-95 implies (but does not specify) that the 0?180
>> degree  vertical plane of the photometric web is oriented parallel to
>> the lamp axis of linear  fluorescent luminaires.
>
> As I understand my copy of the standards document, this is not
> just "implied" but clearly spelled out. At least the phrasing
> left me with no doubt about the intended goal (I'm not at the
> office, so I can't cite the original right now). nevertheless,
> I consider this requirement a conceptual defect in the
> specification.
>
> The practical result is that with asymmetric linear fixtures, the
> C0 plane will show the least interesting curve of the complete
> dataset. For this reason, many manufacturers "cheat". They create
> their files so that the width is given a larger value than the
> length. That way, they can place the most interesting
> (asymmetric) curve in the C0 plane, without violating the letter
> of the standard (of course, they still violate its intention).
>
> Most software reading IES files knows about those tricks, and
> will apply the necessary corrections. I do the same in Rayfront,
> but I didn't check if ies2rad does. In either case, I don't know
> if this is the reason for the troubles described here, but it
> might...
>
> FWIW, the Eulumdat format specifies the orientation of the C0
> plane in the sensible way, so that it will contain the most
> interesting curve for asymmetric distributions.
>
> -schorsch


From rpg at rumblestrip.org  Mon Jun 14 04:13:45 2004
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Mon Jun 14 04:13:58 2004
Subject: [Radiance-general] IES file fun
In-Reply-To: <Pine.BSF.4.58.0406120645140.91161@emancholl.pair.com>
References: <40CA1120.4070203@rumblestrip.org> <20040611225115.GE4242@tecnico>
	<E73D4EEA-BC16-11D8-B220-000393824274@rumblestrip.org>
	<Pine.BSF.4.58.0406120645140.91161@emancholl.pair.com>
Message-ID: <76F430DA-BDA8-11D8-9CE1-000393824274@rumblestrip.org>


On Jun 12, 2004, at 6:49 AM, Georg Mischler wrote:
> Most software reading IES files knows about those tricks, and
> will apply the necessary corrections. I do the same in Rayfront,
> but I didn't check if ies2rad does. In either case, I don't know
> if this is the reason for the troubles described here, but it
> might...

Methinks you are right.  I will have to look at the file(s) tomorrow 
when I get back into the office.

=================
    Rob Guglielmetti
www.rumblestrip.org


From anthony.farrell at dit.ie  Mon Jun 14 19:53:07 2004
From: anthony.farrell at dit.ie (Anthony J. Farrell)
Date: Mon Jun 14 19:50:59 2004
Subject: [Radiance-general] RE: Prismatic glazing simulation in PMAP using
	Siteco data
In-Reply-To: <01LB6O0OY4288YKXFY@mail.dit.ie>
Message-ID: <OJEGILOIGGNAEAODNHIIIEELCDAA.anthony.farrell@dit.ie>

Thanks Roland, Martin for input,

I meant to make to reference to the Prism1 and Prism2 commands in the 3.5
release of Radiance. I am uncertain of the function file command line

mod prism1 id
5+ coef dx dy dz funcfile transform
0
n A1 A2...An where the new direction variables

So if I wanted to redirect light from a vertical glazed window down at an
angle of 45 degrees onto the working plane what values would I substitute in
for A1 etc?

* DxA DyA DzA and are the normalised direction to the target light source
* dx, dy, dz are?

I sketch of the dimensions would be very helpful, as I just can't picture
the above scenario.

Roland, Is it possible to use Prism1 or Prism2 commands in the PMAP version
of Radiance to forward raytrace from the photon port (the target light
(*luminance* source?)to the target illuminance source (the working plane)?

Martin, could is it possible to model a standard prismatic panel that
redirects vertical light from a light pipe for example, out at an angle of
45degrees onto the working plane? I will be testing one of the siteco panels
on my test rig so would be interesting to compare the results.

Regards,

Anthony.

-----Original Message-----
From: radiance-general-bounces@radiance-online.org
[mailto:radiance-general-bounces@radiance-online.org]On Behalf Of
radiance-general-request@radiance-online.org
Sent: 11 June 2004 21:04
To: radiance-general@radiance-online.org
Subject: Radiance-general Digest, Vol 4, Issue 9


Send Radiance-general mailing list submissions to
	radiance-general@radiance-online.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://www.radiance-online.org/mailman/listinfo/radiance-general
or, via email, send a message with subject or body 'help' to
	radiance-general-request@radiance-online.org

You can reach the person managing the list at
	radiance-general-owner@radiance-online.org

When replying, please edit your Subject line so it is more specific
than "Re: Contents of Radiance-general digest..."


Today's Topics:

   1. rholo & .hif files (O Graf)
   2. Re: Fwd: errors from hdrgen (Martin Matusiak)
   3. Fwd: Re: [Radiance-general] Fwd: errors from hdrgen
      (Martin Matusiak)
   4. Prismatic glazing in radiance PMAP (Anthony J. Farrell)
   5. Re: Fwd: errors from hdrgen (Greg Ward)
   6. Re: Fwd: errors from hdrgen (Greg Ward)
   7. Re: Prismatic glazing in radiance PMAP (Roland Schregle)
   8. RE: Prismatic glazing in radiance PMAP (Martin Moeck)


----------------------------------------------------------------------

Message: 1
Date: Fri, 11 Jun 2004 12:21:53 +0100
From: O Graf <s0343631@sms.ed.ac.uk>
Subject: [Radiance-general] rholo & .hif files
To: radiance-general@radiance-online.org
Message-ID: <1086952913.40c995d153a11@sms.ed.ac.uk>
Content-Type: text/plain; charset=ISO-8859-15

Hi!

What is actually the trick for setting the right values for the 'section'
variable in a .hif file? The rad-file which I use contains a laser scan of a
real room and I have no idea what are the right values for the 'section'
variable. Every time I change the values the actual grid appears somewhere
in
the middle of the whole scenery and I get such warnings as

          dev/ogl.hdi: no sections visible from this view

if I try to turn around or to zoom. I understand why these warnings come,
but I
would like to know how I can estimate the values for the section to avoid
the
warnings and to be able to see the whole room and not only 2 walls.

Another funny thing is that the whole room stands on its side, i.e. lines
that
are supposed to be vertical appear horizontal. First I thought the view
direction might be wrong, but if I run the same .oct-file with rview using
the
same view-file everything is perfect. In addition to the right view
direction
the rview-command produces colored images and rholo gives only grey values
from
the same .oct-file. Is there a particular reason for such different results?

regards,

Olga




------------------------------

Message: 2
Date: Fri, 11 Jun 2004 14:17:29 +0200
From: Martin Matusiak <alex@juventuz.net>
Subject: Re: [Radiance-general] Fwd: errors from hdrgen
To: Radiance general discussion <radiance-general@radiance-online.org>
Message-ID: <200406111417.29402.alex@juventuz.net>
Content-Type: text/plain;  charset="iso-8859-1"

> I hdr'ed all ouf the 13 images in one go, and apart for some 'poor
> convergence' (orders 1, 3, 4 and 5) warnings, it worked fine. There is
> no apparent distortion.

I repeated the process using the manual mode of the camera rather than
aperture priority. Again 13 images (same room, scene was a bit different as
I
eliminated the sky in the framing) and I was able to compute a hdr. But the
alignment problem still persists, I use the -a switch to turn it off.

Later I took a couple more images and used the calibration data to compute a
hdr and read the luminance values off it. It turns out that those are
somewhat accurate so that's a good sign!

However, I'm still not quite satisfied. Obviously, the calibration procedure
is meant to give a most accurate static description of the camera, but I
used
the camera's automatic whitebalance correction, so that's a variable. My
question is a complete novice one: how does the whitebalance affect the
luminance? What can I do to eliminate this variable (if it is significant).


Martin



------------------------------

Message: 3
Date: Fri, 11 Jun 2004 14:21:55 +0200
From: Martin Matusiak <alex@juventuz.net>
Subject: Fwd: Re: [Radiance-general] Fwd: errors from hdrgen
To: radiance-general@radiance-online.org
Message-ID: <200406111421.55929.alex@juventuz.net>
Content-Type: text/plain;  charset="iso-8859-1"

I forgot to mention that my "cvs build" of hdrgen is from last week, so
there
could have been changes from the version you have.

Martin

----------  Forwarded Message  ----------

Subject: Re: [Radiance-general] Fwd: errors from hdrgen
Date: Friday 11 June 2004 14:17
From: Martin Matusiak <alex@juventuz.net>
To: Radiance general discussion <radiance-general@radiance-online.org>

> I hdr'ed all ouf the 13 images in one go, and apart for some 'poor
> convergence' (orders 1, 3, 4 and 5) warnings, it worked fine. There is
> no apparent distortion.

I repeated the process using the manual mode of the camera rather than
aperture priority. Again 13 images (same room, scene was a bit different as
I
eliminated the sky in the framing) and I was able to compute a hdr. But the
alignment problem still persists, I use the -a switch to turn it off.

Later I took a couple more images and used the calibration data to compute a
hdr and read the luminance values off it. It turns out that those are
somewhat accurate so that's a good sign!

However, I'm still not quite satisfied. Obviously, the calibration procedure
is meant to give a most accurate static description of the camera, but I
used
the camera's automatic whitebalance correction, so that's a variable. My
question is a complete novice one: how does the whitebalance affect the
luminance? What can I do to eliminate this variable (if it is significant).


Martin

-------------------------------------------------------



------------------------------

Message: 4
Date: Fri, 11 Jun 2004 14:51:26 +0100
From: "Anthony J. Farrell" <anthony.farrell@dit.ie>
Subject: [Radiance-general] Prismatic glazing in radiance PMAP
To: radiance-general@radiance-online.org
Message-ID: <OJEGILOIGGNAEAODNHIICEEGCDAA.anthony.farrell@dit.ie>
Content-Type: text/plain; charset=iso-8859-1

Hi,

I am trying to model a simple sheet of prismatic glazing, but am unclear of
the dimension variable set out in the PMAP user manual for the prism
command.

Could anyone please forward me a drawing or sketch of what this command is
based?

Kind regards,

Anthony


--
This message has been scanned for content and
viruses by the DIT Information Services MailScanner
Service, and is believed to be clean.
http://www.dit.ie




------------------------------

Message: 5
Date: Fri, 11 Jun 2004 08:09:17 -0700
From: Greg Ward <gward@lmi.net>
Subject: Re: [Radiance-general] Fwd: errors from hdrgen
To: Radiance general discussion <radiance-general@radiance-online.org>
Message-ID: <4EE8BCAC-BBB9-11D8-BDAA-000A95BB392A@lmi.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed

Hi Martin,

I believe that hdrgen isn't coming up with a good response function for
your camera with this scene, probably due to the strong color cast of
the walls.  Since hdrgen (and Photosphere) compute the responses for
each of the RGB channels, using a lot of colorful patch samples can
skew the result.  I've never seen such an extreme example before,
though -- most walls are off-white so this hadn't come up.  Come to
think of it, the tendency of cameras to super-saturate their colors
could spell trouble in such cases, and I probably should modify my
algorithm to avoid colorful patch samples.

Thanks for the image set -- I'll run some experiments on my end to see
if I can improve on this.  It is important to fix the white balance
whenever you take an HDR sequence, as the camera in auto white mode
will alter the coefficients between exposures otherwise, making it
impossible to get a consistent result.

-Greg

> From: Martin Matusiak <alex@juventuz.net>
> Date: June 11, 2004 5:17:29 AM PDT
>
>> I hdr'ed all ouf the 13 images in one go, and apart for some 'poor
>> convergence' (orders 1, 3, 4 and 5) warnings, it worked fine. There is
>> no apparent distortion.
>
> I repeated the process using the manual mode of the camera rather than
> aperture priority. Again 13 images (same room, scene was a bit
> different as I
> eliminated the sky in the framing) and I was able to compute a hdr.
> But the
> alignment problem still persists, I use the -a switch to turn it off.
>
> Later I took a couple more images and used the calibration data to
> compute a
> hdr and read the luminance values off it. It turns out that those are
> somewhat accurate so that's a good sign!
>
> However, I'm still not quite satisfied. Obviously, the calibration
> procedure
> is meant to give a most accurate static description of the camera, but
> I used
> the camera's automatic whitebalance correction, so that's a variable.
> My
> question is a complete novice one: how does the whitebalance affect the
> luminance? What can I do to eliminate this variable (if it is
> significant).
>
> Martin




------------------------------

Message: 6
Date: Fri, 11 Jun 2004 09:18:46 -0700
From: Greg Ward <gward@lmi.net>
Subject: [Radiance-general] Re: Fwd: errors from hdrgen
To: Radiance general discussion <radiance-general@radiance-online.org>
Message-ID: <03936172-BBC3-11D8-992A-000A95BB392A@lmi.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed

Hi again.

Well, I played around with limiting the saturation on patches, and it
only seems to make matters worse; I'm not sure why.  I think it's
because you don't have enough unsaturated pixels in your scene for it
to work, but I'll have to perform some more experiments to determine
that for certain.  For now, you'll just have to find a more "neutral"
scene to perform your calibration on, then save the response function
and reuse it for other scenes, which is what I've been doing.

-Greg

> From: Martin Matusiak <alex@juventuz.net>
> Date: June 11, 2004 5:21:55 AM PDT
>
> I forgot to mention that my "cvs build" of hdrgen is from last week,
> so there
> could have been changes from the version you have.
>
> Martin




------------------------------

Message: 7
Date: Fri, 11 Jun 2004 21:11:56 +0200
From: Roland Schregle <ganjatron@gmx.net>
Subject: Re: [Radiance-general] Prismatic glazing in radiance PMAP
To: Radiance general discussion <radiance-general@radiance-online.org>
Message-ID: <40CA03FC.6010504@gmx.net>
Content-Type: text/plain; charset=us-ascii; format=flowed

Anthony J. Farrell wrote:
> Hi,
>
> I am trying to model a simple sheet of prismatic glazing, but am unclear
of
> the dimension variable set out in the PMAP user manual for the prism
> command.

Dimension variable? If you're referring to the -ds parameter, that
affects the resolution with which the light source surfaces are sampled
during photon emission. Are you referring to the prism material or the
genprism command?


--
Roland Schregle
PhD candidate, Fraunhofer Institute for Solar Energy Systems
RADIANCE Photon Map page: www.ise.fhg.de/radiance/photon-map

END OF LINE. (MCP)




------------------------------

Message: 8
Date: Fri, 11 Jun 2004 16:03:42 -0400
From: "Martin Moeck" <MMoeck@engr.psu.edu>
Subject: RE: [Radiance-general] Prismatic glazing in radiance PMAP
To: "Radiance general discussion"
	<radiance-general@radiance-online.org>
Message-ID:
	<84F05BA9118BBD4A8FC6409808CE266C113A1F@ENGRMAIL2.engr.psu.edu>
Content-Type: text/plain; charset="utf-8"

Are there any validations of pmap? If desired, I can make measured data
available for some prismatic  glazings as shown at www.siteco.de. See
http://www.siteco.de/products/tageslichtsysteme/?currency=EUR&lang=en&javasc
ript=true  Click on "large panel prism systems".

Martin, Penn State

	-----Original Message-----
	From: Roland Schregle [mailto:ganjatron@gmx.net]
	Sent: Fri 6/11/2004 3:11 PM
	To: Radiance general discussion
	Cc:
	Subject: Re: [Radiance-general] Prismatic glazing in radiance PMAP



	Anthony J. Farrell wrote:
	> Hi,
	>
	> I am trying to model a simple sheet of prismatic glazing, but am unclear
of
	> the dimension variable set out in the PMAP user manual for the prism
	> command.

	Dimension variable? If you're referring to the -ds parameter, that
	affects the resolution with which the light source surfaces are sampled
	during photon emission. Are you referring to the prism material or the
	genprism command?


	--
	Roland Schregle
	PhD candidate, Fraunhofer Institute for Solar Energy Systems
	RADIANCE Photon Map page: www.ise.fhg.de/radiance/photon-map

	END OF LINE. (MCP)


	_______________________________________________
	Radiance-general mailing list
	Radiance-general@radiance-online.org
	http://www.radiance-online.org/mailman/listinfo/radiance-general


-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 4902 bytes
Desc: not available
Url :
http://radiance-online.org/pipermail/radiance-general/attachments/20040611/8
3d558e7/attachment.bin

------------------------------

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general


End of Radiance-general Digest, Vol 4, Issue 9
**********************************************

--
This message has been scanned for content and
viruses by the DIT Information Services MailScanner
Service, and is believed to be clean.
http://www.dit.ie


--
This message has been scanned for content and
viruses by the DIT Information Services MailScanner
Service, and is believed to be clean.
http://www.dit.ie


--
This message has been scanned for content and
viruses by the DIT Information Services MailScanner
Service, and is believed to be clean.
http://www.dit.ie


--
This message has been scanned for content and
viruses by the DIT Information Services MailScanner
Service, and is believed to be clean.
http://www.dit.ie


--
This message has been scanned for content and
viruses by the DIT Information Services MailScanner
Service, and is believed to be clean.
http://www.dit.ie


--
This message has been scanned for content and
viruses by the DIT Information Services MailScanner
Service, and is believed to be clean.
http://www.dit.ie


--
This message has been scanned for content and
viruses by the DIT Information Services MailScanner
Service, and is believed to be clean.
http://www.dit.ie


--
This message has been scanned for content and
viruses by the DIT Information Services MailScanner
Service, and is believed to be clean.
http://www.dit.ie


-- 
This message has been scanned for content and 
viruses by the DIT Information Services MailScanner 
Service, and is believed to be clean.
http://www.dit.ie


From MMoeck at engr.psu.edu  Mon Jun 14 20:04:10 2004
From: MMoeck at engr.psu.edu (Martin Moeck)
Date: Mon Jun 14 20:05:33 2004
Subject: [Radiance-general] RE: Prismatic glazing simulation in PMAP
	usingSiteco data
Message-ID: <84F05BA9118BBD4A8FC6409808CE266C113A29@ENGRMAIL2.engr.psu.edu>

Anthony,
 
Raphael Compagnon is the author of prism2. His code has been validated and I am very happy with it. 
 
There are 7 different prismatic panels from Siteco/Bartenbach - there is no standard prismatic panel. Which one do you mean? For redirecting light from a vertical light pipe onto the horizontal workplane at an incidence angle of 45 degrees, the easiest device seems to be a mirror/two mirrors mounted at the bottom of the pipe. 
 
You need a good setup for testing to get meaningful results. This is expensive. Meters are the other problem. I am building a setup right now and my students have been working on it for 3 months (on and off). I am using a 1000W metal halide floodlight with a near parallel beam as a light source. Everything else makes weak signal-to-noise ratios with values below 5 Lux or so. 
 
Martin

	-----Original Message----- 
	From: Anthony J. Farrell [mailto:anthony.farrell@dit.ie] 
	Sent: Mon 6/14/2004 1:53 PM 
	To: radiance-general@radiance-online.org 
	Cc: 
	Subject: [Radiance-general] RE: Prismatic glazing simulation in PMAP usingSiteco data
	
	

	Thanks Roland, Martin for input,
	
	I meant to make to reference to the Prism1 and Prism2 commands in the 3.5
	release of Radiance. I am uncertain of the function file command line
	
	mod prism1 id
	5+ coef dx dy dz funcfile transform
	0
	n A1 A2...An where the new direction variables
	
	So if I wanted to redirect light from a vertical glazed window down at an
	angle of 45 degrees onto the working plane what values would I substitute in
	for A1 etc?
	
	* DxA DyA DzA and are the normalised direction to the target light source
	* dx, dy, dz are?
	
	I sketch of the dimensions would be very helpful, as I just can't picture
	the above scenario.
	
	Roland, Is it possible to use Prism1 or Prism2 commands in the PMAP version
	of Radiance to forward raytrace from the photon port (the target light
	(*luminance* source?)to the target illuminance source (the working plane)?
	
	Martin, could is it possible to model a standard prismatic panel that
	redirects vertical light from a light pipe for example, out at an angle of
	45degrees onto the working plane? I will be testing one of the siteco panels
	on my test rig so would be interesting to compare the results.
	
	Regards,
	
	Anthony.
	
	-----Original Message-----
	From: radiance-general-bounces@radiance-online.org
	[mailto:radiance-general-bounces@radiance-online.org]On Behalf Of
	radiance-general-request@radiance-online.org
	Sent: 11 June 2004 21:04
	To: radiance-general@radiance-online.org
	Subject: Radiance-general Digest, Vol 4, Issue 9
	
	
	Send Radiance-general mailing list submissions to
	        radiance-general@radiance-online.org
	
	To subscribe or unsubscribe via the World Wide Web, visit
	        http://www.radiance-online.org/mailman/listinfo/radiance-general
	or, via email, send a message with subject or body 'help' to
	        radiance-general-request@radiance-online.org
	
	You can reach the person managing the list at
	        radiance-general-owner@radiance-online.org
	
	When replying, please edit your Subject line so it is more specific
	than "Re: Contents of Radiance-general digest..."
	
	
	Today's Topics:
	
	   1. rholo & .hif files (O Graf)
	   2. Re: Fwd: errors from hdrgen (Martin Matusiak)
	   3. Fwd: Re: [Radiance-general] Fwd: errors from hdrgen
	      (Martin Matusiak)
	   4. Prismatic glazing in radiance PMAP (Anthony J. Farrell)
	   5. Re: Fwd: errors from hdrgen (Greg Ward)
	   6. Re: Fwd: errors from hdrgen (Greg Ward)
	   7. Re: Prismatic glazing in radiance PMAP (Roland Schregle)
	   8. RE: Prismatic glazing in radiance PMAP (Martin Moeck)
	
	
	----------------------------------------------------------------------
	
	Message: 1
	Date: Fri, 11 Jun 2004 12:21:53 +0100
	From: O Graf <s0343631@sms.ed.ac.uk>
	Subject: [Radiance-general] rholo & .hif files
	To: radiance-general@radiance-online.org
	Message-ID: <1086952913.40c995d153a11@sms.ed.ac.uk>
	Content-Type: text/plain; charset=ISO-8859-15
	
	Hi!
	
	What is actually the trick for setting the right values for the 'section'
	variable in a .hif file? The rad-file which I use contains a laser scan of a
	real room and I have no idea what are the right values for the 'section'
	variable. Every time I change the values the actual grid appears somewhere
	in
	the middle of the whole scenery and I get such warnings as
	
	          dev/ogl.hdi: no sections visible from this view
	
	if I try to turn around or to zoom. I understand why these warnings come,
	but I
	would like to know how I can estimate the values for the section to avoid
	the
	warnings and to be able to see the whole room and not only 2 walls.
	
	Another funny thing is that the whole room stands on its side, i.e. lines
	that
	are supposed to be vertical appear horizontal. First I thought the view
	direction might be wrong, but if I run the same .oct-file with rview using
	the
	same view-file everything is perfect. In addition to the right view
	direction
	the rview-command produces colored images and rholo gives only grey values
	from
	the same .oct-file. Is there a particular reason for such different results?
	
	regards,
	
	Olga
	
	
	
	
	------------------------------
	
	Message: 2
	Date: Fri, 11 Jun 2004 14:17:29 +0200
	From: Martin Matusiak <alex@juventuz.net>
	Subject: Re: [Radiance-general] Fwd: errors from hdrgen
	To: Radiance general discussion <radiance-general@radiance-online.org>
	Message-ID: <200406111417.29402.alex@juventuz.net>
	Content-Type: text/plain;  charset="iso-8859-1"
	
	> I hdr'ed all ouf the 13 images in one go, and apart for some 'poor
	> convergence' (orders 1, 3, 4 and 5) warnings, it worked fine. There is
	> no apparent distortion.
	
	I repeated the process using the manual mode of the camera rather than
	aperture priority. Again 13 images (same room, scene was a bit different as
	I
	eliminated the sky in the framing) and I was able to compute a hdr. But the
	alignment problem still persists, I use the -a switch to turn it off.
	
	Later I took a couple more images and used the calibration data to compute a
	hdr and read the luminance values off it. It turns out that those are
	somewhat accurate so that's a good sign!
	
	However, I'm still not quite satisfied. Obviously, the calibration procedure
	is meant to give a most accurate static description of the camera, but I
	used
	the camera's automatic whitebalance correction, so that's a variable. My
	question is a complete novice one: how does the whitebalance affect the
	luminance? What can I do to eliminate this variable (if it is significant).
	
	
	Martin
	
	
	
	------------------------------
	
	Message: 3
	Date: Fri, 11 Jun 2004 14:21:55 +0200
	From: Martin Matusiak <alex@juventuz.net>
	Subject: Fwd: Re: [Radiance-general] Fwd: errors from hdrgen
	To: radiance-general@radiance-online.org
	Message-ID: <200406111421.55929.alex@juventuz.net>
	Content-Type: text/plain;  charset="iso-8859-1"
	
	I forgot to mention that my "cvs build" of hdrgen is from last week, so
	there
	could have been changes from the version you have.
	
	Martin
	
	----------  Forwarded Message  ----------
	
	Subject: Re: [Radiance-general] Fwd: errors from hdrgen
	Date: Friday 11 June 2004 14:17
	From: Martin Matusiak <alex@juventuz.net>
	To: Radiance general discussion <radiance-general@radiance-online.org>
	
	> I hdr'ed all ouf the 13 images in one go, and apart for some 'poor
	> convergence' (orders 1, 3, 4 and 5) warnings, it worked fine. There is
	> no apparent distortion.
	
	I repeated the process using the manual mode of the camera rather than
	aperture priority. Again 13 images (same room, scene was a bit different as
	I
	eliminated the sky in the framing) and I was able to compute a hdr. But the
	alignment problem still persists, I use the -a switch to turn it off.
	
	Later I took a couple more images and used the calibration data to compute a
	hdr and read the luminance values off it. It turns out that those are
	somewhat accurate so that's a good sign!
	
	However, I'm still not quite satisfied. Obviously, the calibration procedure
	is meant to give a most accurate static description of the camera, but I
	used
	the camera's automatic whitebalance correction, so that's a variable. My
	question is a complete novice one: how does the whitebalance affect the
	luminance? What can I do to eliminate this variable (if it is significant).
	
	
	Martin
	
	-------------------------------------------------------
	
	
	
	------------------------------
	
	Message: 4
	Date: Fri, 11 Jun 2004 14:51:26 +0100
	From: "Anthony J. Farrell" <anthony.farrell@dit.ie>
	Subject: [Radiance-general] Prismatic glazing in radiance PMAP
	To: radiance-general@radiance-online.org
	Message-ID: <OJEGILOIGGNAEAODNHIICEEGCDAA.anthony.farrell@dit.ie>
	Content-Type: text/plain; charset=iso-8859-1
	
	Hi,
	
	I am trying to model a simple sheet of prismatic glazing, but am unclear of
	the dimension variable set out in the PMAP user manual for the prism
	command.
	
	Could anyone please forward me a drawing or sketch of what this command is
	based?
	
	Kind regards,
	
	Anthony
	
	
	--
	This message has been scanned for content and
	viruses by the DIT Information Services MailScanner
	Service, and is believed to be clean.
	http://www.dit.ie
	
	
	
	
	------------------------------
	
	Message: 5
	Date: Fri, 11 Jun 2004 08:09:17 -0700
	From: Greg Ward <gward@lmi.net>
	Subject: Re: [Radiance-general] Fwd: errors from hdrgen
	To: Radiance general discussion <radiance-general@radiance-online.org>
	Message-ID: <4EE8BCAC-BBB9-11D8-BDAA-000A95BB392A@lmi.net>
	Content-Type: text/plain; charset=US-ASCII; format=flowed
	
	Hi Martin,
	
	I believe that hdrgen isn't coming up with a good response function for
	your camera with this scene, probably due to the strong color cast of
	the walls.  Since hdrgen (and Photosphere) compute the responses for
	each of the RGB channels, using a lot of colorful patch samples can
	skew the result.  I've never seen such an extreme example before,
	though -- most walls are off-white so this hadn't come up.  Come to
	think of it, the tendency of cameras to super-saturate their colors
	could spell trouble in such cases, and I probably should modify my
	algorithm to avoid colorful patch samples.
	
	Thanks for the image set -- I'll run some experiments on my end to see
	if I can improve on this.  It is important to fix the white balance
	whenever you take an HDR sequence, as the camera in auto white mode
	will alter the coefficients between exposures otherwise, making it
	impossible to get a consistent result.
	
	-Greg
	
	> From: Martin Matusiak <alex@juventuz.net>
	> Date: June 11, 2004 5:17:29 AM PDT
	>
	>> I hdr'ed all ouf the 13 images in one go, and apart for some 'poor
	>> convergence' (orders 1, 3, 4 and 5) warnings, it worked fine. There is
	>> no apparent distortion.
	>
	> I repeated the process using the manual mode of the camera rather than
	> aperture priority. Again 13 images (same room, scene was a bit
	> different as I
	> eliminated the sky in the framing) and I was able to compute a hdr.
	> But the
	> alignment problem still persists, I use the -a switch to turn it off.
	>
	> Later I took a couple more images and used the calibration data to
	> compute a
	> hdr and read the luminance values off it. It turns out that those are
	> somewhat accurate so that's a good sign!
	>
	> However, I'm still not quite satisfied. Obviously, the calibration
	> procedure
	> is meant to give a most accurate static description of the camera, but
	> I used
	> the camera's automatic whitebalance correction, so that's a variable.
	> My
	> question is a complete novice one: how does the whitebalance affect the
	> luminance? What can I do to eliminate this variable (if it is
	> significant).
	>
	> Martin
	
	
	
	
	------------------------------
	
	Message: 6
	Date: Fri, 11 Jun 2004 09:18:46 -0700
	From: Greg Ward <gward@lmi.net>
	Subject: [Radiance-general] Re: Fwd: errors from hdrgen
	To: Radiance general discussion <radiance-general@radiance-online.org>
	Message-ID: <03936172-BBC3-11D8-992A-000A95BB392A@lmi.net>
	Content-Type: text/plain; charset=US-ASCII; format=flowed
	
	Hi again.
	
	Well, I played around with limiting the saturation on patches, and it
	only seems to make matters worse; I'm not sure why.  I think it's
	because you don't have enough unsaturated pixels in your scene for it
	to work, but I'll have to perform some more experiments to determine
	that for certain.  For now, you'll just have to find a more "neutral"
	scene to perform your calibration on, then save the response function
	and reuse it for other scenes, which is what I've been doing.
	
	-Greg
	
	> From: Martin Matusiak <alex@juventuz.net>
	> Date: June 11, 2004 5:21:55 AM PDT
	>
	> I forgot to mention that my "cvs build" of hdrgen is from last week,
	> so there
	> could have been changes from the version you have.
	>
	> Martin
	
	
	
	
	------------------------------
	
	Message: 7
	Date: Fri, 11 Jun 2004 21:11:56 +0200
	From: Roland Schregle <ganjatron@gmx.net>
	Subject: Re: [Radiance-general] Prismatic glazing in radiance PMAP
	To: Radiance general discussion <radiance-general@radiance-online.org>
	Message-ID: <40CA03FC.6010504@gmx.net>
	Content-Type: text/plain; charset=us-ascii; format=flowed
	
	Anthony J. Farrell wrote:
	> Hi,
	>
	> I am trying to model a simple sheet of prismatic glazing, but am unclear
	of
	> the dimension variable set out in the PMAP user manual for the prism
	> command.
	
	Dimension variable? If you're referring to the -ds parameter, that
	affects the resolution with which the light source surfaces are sampled
	during photon emission. Are you referring to the prism material or the
	genprism command?
	
	
	--
	Roland Schregle
	PhD candidate, Fraunhofer Institute for Solar Energy Systems
	RADIANCE Photon Map page: www.ise.fhg.de/radiance/photon-map
	
	END OF LINE. (MCP)
	
	
	
	
	------------------------------
	
	Message: 8
	Date: Fri, 11 Jun 2004 16:03:42 -0400
	From: "Martin Moeck" <MMoeck@engr.psu.edu>
	Subject: RE: [Radiance-general] Prismatic glazing in radiance PMAP
	To: "Radiance general discussion"
	        <radiance-general@radiance-online.org>
	Message-ID:
	        <84F05BA9118BBD4A8FC6409808CE266C113A1F@ENGRMAIL2.engr.psu.edu>
	Content-Type: text/plain; charset="utf-8"
	
	Are there any validations of pmap? If desired, I can make measured data
	available for some prismatic  glazings as shown at www.siteco.de. See
	http://www.siteco.de/products/tageslichtsysteme/?currency=EUR&lang=en&javasc
	ript=true  Click on "large panel prism systems".
	
	Martin, Penn State
	
	        -----Original Message-----
	        From: Roland Schregle [mailto:ganjatron@gmx.net]
	        Sent: Fri 6/11/2004 3:11 PM
	        To: Radiance general discussion
	        Cc:
	        Subject: Re: [Radiance-general] Prismatic glazing in radiance PMAP
	
	
	
	        Anthony J. Farrell wrote:
	        > Hi,
	        >
	        > I am trying to model a simple sheet of prismatic glazing, but am unclear
	of
	        > the dimension variable set out in the PMAP user manual for the prism
	        > command.
	
	        Dimension variable? If you're referring to the -ds parameter, that
	        affects the resolution with which the light source surfaces are sampled
	        during photon emission. Are you referring to the prism material or the
	        genprism command?
	
	
	        --
	        Roland Schregle
	        PhD candidate, Fraunhofer Institute for Solar Energy Systems
	        RADIANCE Photon Map page: www.ise.fhg.de/radiance/photon-map
	
	        END OF LINE. (MCP)
	
	
	        _______________________________________________
	        Radiance-general mailing list
	        Radiance-general@radiance-online.org
	        http://www.radiance-online.org/mailman/listinfo/radiance-general
	
	
	-------------- next part --------------
	A non-text attachment was scrubbed...
	Name: not available
	Type: application/ms-tnef
	Size: 4902 bytes
	Desc: not available
	Url :
	http://radiance-online.org/pipermail/radiance-general/attachments/20040611/8
	3d558e7/attachment.bin
	
	------------------------------
	
	_______________________________________________
	Radiance-general mailing list
	Radiance-general@radiance-online.org
	http://www.radiance-online.org/mailman/listinfo/radiance-general
	
	
	End of Radiance-general Digest, Vol 4, Issue 9
	**********************************************
	
	--
	This message has been scanned for content and
	viruses by the DIT Information Services MailScanner
	Service, and is believed to be clean.
	http://www.dit.ie
	
	
	--
	This message has been scanned for content and
	viruses by the DIT Information Services MailScanner
	Service, and is believed to be clean.
	http://www.dit.ie
	
	
	--
	This message has been scanned for content and
	viruses by the DIT Information Services MailScanner
	Service, and is believed to be clean.
	http://www.dit.ie
	
	
	--
	This message has been scanned for content and
	viruses by the DIT Information Services MailScanner
	Service, and is believed to be clean.
	http://www.dit.ie
	
	
	--
	This message has been scanned for content and
	viruses by the DIT Information Services MailScanner
	Service, and is believed to be clean.
	http://www.dit.ie
	
	
	--
	This message has been scanned for content and
	viruses by the DIT Information Services MailScanner
	Service, and is believed to be clean.
	http://www.dit.ie
	
	
	--
	This message has been scanned for content and
	viruses by the DIT Information Services MailScanner
	Service, and is believed to be clean.
	http://www.dit.ie
	
	
	--
	This message has been scanned for content and
	viruses by the DIT Information Services MailScanner
	Service, and is believed to be clean.
	http://www.dit.ie
	
	
	--
	This message has been scanned for content and
	viruses by the DIT Information Services MailScanner
	Service, and is believed to be clean.
	http://www.dit.ie
	
	
	_______________________________________________
	Radiance-general mailing list
	Radiance-general@radiance-online.org
	http://www.radiance-online.org/mailman/listinfo/radiance-general
	

From rpg at rumblestrip.org  Mon Jun 14 20:22:03 2004
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Mon Jun 14 20:25:37 2004
Subject: [Radiance-general] RE: Prismatic glazing simulation in
	PMAP	usingSiteco data
In-Reply-To: <84F05BA9118BBD4A8FC6409808CE266C113A29@ENGRMAIL2.engr.psu.edu>
References: <84F05BA9118BBD4A8FC6409808CE266C113A29@ENGRMAIL2.engr.psu.edu>
Message-ID: <40CDECCB.9010407@rumblestrip.org>

Martin Moeck wrote:

> I am using a 1000W metal halide floodlight with a near parallel beam as a light source.

What floodlight would that be?  Just curious...

----

      Rob Guglielmetti

e. rpg@rumblestrip.org
w. www.rumblestrip.org

From ganjatron at gmx.net  Mon Jun 14 20:56:37 2004
From: ganjatron at gmx.net (Roland Schregle)
Date: Mon Jun 14 21:00:51 2004
Subject: [Radiance-general] RE: Prismatic glazing simulation in PMAP using
	Siteco data
In-Reply-To: <OJEGILOIGGNAEAODNHIIIEELCDAA.anthony.farrell@dit.ie>
References: <OJEGILOIGGNAEAODNHIIIEELCDAA.anthony.farrell@dit.ie>
Message-ID: <40CDF4E5.3070505@gmx.net>

Anthony J. Farrell wrote:
> Thanks Roland, Martin for input,
> 
> I meant to make to reference to the Prism1 and Prism2 commands in the 3.5
> release of Radiance. I am uncertain of the function file command line
> 
> mod prism1 id
> 5+ coef dx dy dz funcfile transform
> 0
> n A1 A2...An where the new direction variables
> 
> So if I wanted to redirect light from a vertical glazed window down at an
> angle of 45 degrees onto the working plane what values would I substitute in
> for A1 etc?

According to the manual, dx, dy, dz are the redirection coefficients, 
presumably applied to the incident ray's local coords. A1.. An are 
optional variables passed to the funcfile. However, having never used 
the PRISM material, I dunno for sure -- better check with Raphael Compagnon.

> Roland, Is it possible to use Prism1 or Prism2 commands in the PMAP version
> of Radiance to forward raytrace from the photon port (the target light
> (*luminance* source?)to the target illuminance source (the working plane)?

Beats me. :^)
Seriously, I never tried. I only included support for the more common 
materials. Looking at the code, it would appear that the PRISM material 
simply acts as a secondary light source -- a concept that is invalidated 
by the photon map anyway. Furthermore, the source vector [DxA, DyA, DzA] 
would be undefined, since it's only available specifically for this 
material. My guess is it simply won't work and immediately bail out 
since there's no scattering routine for this specific material.

You'll probably have to go the hard way and model the prism explicitly 
using instances, like the Y-glass example on the pmap webpage. This is 
extremely ugly, but it's the only solution I can envisage in your case.

--Roland


-- 
Roland Schregle
PhD candidate, Fraunhofer Institute for Solar Energy Systems
RADIANCE Photon Map page: www.ise.fhg.de/radiance/photon-map

END OF LINE. (MCP)


From ganjatron at gmx.net  Mon Jun 14 21:05:10 2004
From: ganjatron at gmx.net (Roland Schregle)
Date: Mon Jun 14 21:09:13 2004
Subject: [Radiance-general] RE: Prismatic glazing simulation in
	PMAP	usingSiteco data
In-Reply-To: <84F05BA9118BBD4A8FC6409808CE266C113A29@ENGRMAIL2.engr.psu.edu>
References: <84F05BA9118BBD4A8FC6409808CE266C113A29@ENGRMAIL2.engr.psu.edu>
Message-ID: <40CDF6E6.9040406@gmx.net>

Martin Moeck wrote:

> For redirecting light from a vertical light pipe onto the horizontal workplane at an incidence angle of 45 degrees, the easiest device seems to be a mirror/two mirrors mounted at the bottom of the pipe. 

I agree -- this is the easiest way to get around the limitations. I also 
went the El Cheapo way and used a mirror in my lightpipe tests (see pmap 
webpage). As I understand it, Anthony wants to simulate an actual 
prismatic panel which transmits and redirects light coming from the 
pipe. This is certainly more elegant (and realistic), but simply not 
doable with the current pmap implementation. Anthony will most likely 
have to go the awkward way with a separate transmitting (nonredirecting) 
panel followed by a mirror in order to circumvent the limitations of the 
system. Come to think of it, do you need a panel at all, then?

--Roland


-- 
Roland Schregle
PhD candidate, Fraunhofer Institute for Solar Energy Systems
RADIANCE Photon Map page: www.ise.fhg.de/radiance/photon-map

END OF LINE. (MCP)


From Rob.Fitzsimmons at Summit.Fiserv.com  Thu Jun 17 20:22:16 2004
From: Rob.Fitzsimmons at Summit.Fiserv.com (Fitzsimmons, Rob)
Date: Thu Jun 17 20:23:22 2004
Subject: [Radiance-general] tube, genworm question
Message-ID: <7B2F6EA5E35E214882CB9828962BC3CF04D69525@corvallis>

I'm sure this will be a no brainer for most of you, But I'm not getting
genworm.

I'd like to make a tube that connects 9 xyz coordinates with a radius of say
0.2

My coords are as follows
-6.07 -1.56 1.53
-5.4 -1.56 1.53
-5.4 -1.56 .2
-3.7 -1.56 .2
-3.7 -4.5 .2
0 -4.5 .2
0 --1.9 .2
0 --1 .5
0 .28 .5

Should I list this in a file and use the -f in genworm.
If so, what format is needed?

Or, since this has linear segments, should I manually do it with cylinders
and spheres?
Left my RwR book at home!

Thanks
Rob F
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20040617/a7692fde/attachment.htm
From Rob.Fitzsimmons at Summit.Fiserv.com  Fri Jun 18 00:40:07 2004
From: Rob.Fitzsimmons at Summit.Fiserv.com (Fitzsimmons, Rob)
Date: Fri Jun 18 00:40:54 2004
Subject: [Radiance-general] RE: tube, genworm question
Message-ID: <7B2F6EA5E35E214882CB9828962BC3CF04D69528@corvallis>

Never mind -
I broke down and spent 10 minutes to do it with spheres and cylinders!

Rob

-----Original Message-----
From: radiance-general-bounces@radiance-online.org
To: 'radiance-general@radiance-online.org'
Sent: 6/17/2004 11:22 AM
Subject: [Radiance-general] tube, genworm question

I'm sure this will be a no brainer for most of you, But I'm not getting
genworm. 

I'd like to make a tube that connects 9 xyz coordinates with a radius of
say 0.2 

My coords are as follows 
-6.07 -1.56 1.53 
-5.4 -1.56 1.53 
-5.4 -1.56 .2 
-3.7 -1.56 .2 
-3.7 -4.5 .2 
0 -4.5 .2 
0 --1.9 .2 
0 --1 .5 
0 .28 .5 

Should I list this in a file and use the -f in genworm. 
If so, what format is needed? 

Or, since this has linear segments, should I manually do it with
cylinders and spheres? 
Left my RwR book at home! 

Thanks 
Rob F 

 <<ATT502109.txt>> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20040617/b60e1d62/attachment.html
From s0343631 at sms.ed.ac.uk  Sun Jun 20 15:48:04 2004
From: s0343631 at sms.ed.ac.uk (O Graf)
Date: Sun Jun 20 15:48:09 2004
Subject: [Radiance-general] output in holodeck file
Message-ID: <1087739284.40d595942ea25@sms.ed.ac.uk>

Hi!

Is it possible to control the output in the holodeck file to be able to see the
actual values? I already tried to add the following line to the .hif-file:
render= -faa, but unfortunately the output (=holodeck file) was not readable at
all. Basicly it was the same as without the mentioned line or with -fdd instead
of -faa. Maybe I am using the wrong command or just the wrong place for the
right command? Or is the holodeck file not supposed to be viewable at all?

regards,

Olga


From gward at lmi.net  Mon Jun 21 07:20:49 2004
From: gward at lmi.net (Greg Ward)
Date: Mon Jun 21 09:06:56 2004
Subject: [Radiance-general] Re: output in holodeck file
In-Reply-To: <1087739284.40d595942ea25@sms.ed.ac.uk>
References: <1087739284.40d595942ea25@sms.ed.ac.uk>
Message-ID: <C1F5FD5D-C342-11D8-B62A-00306540F848@lmi.net>

Hi Olga,

There is no method provided for looking at the ray values in a holodeck 
in ASCII format, as I never found this useful even for debugging 
purposes.  The data is organized in a very hard-to-understand way, and 
the individual ray values are so many that I'm not sure what you would 
do with them if you had them.  However, there are a couple of useful 
utilities for holodecks that you might enjoy:

rhinfo	- prints the header and grid information from a holodeck file
rhcopy	- copies information from one holodeck to another, or from a 
picture to a holodeck
rhoptimize	- optimizes beam placements in a holodeck for more efficient 
rendering
rhpict	- reconstructs a picture from beams stored in a holodeck

What purpose did you have in mind for recovering ray values?
-Greg

> From: O Graf <s0343631@sms.ed.ac.uk>
> Date: June 20, 2004 3:48:04 PM CEST
>
> Hi!
>
> Is it possible to control the output in the holodeck file to be able 
> to see the
> actual values? I already tried to add the following line to the 
> .hif-file:
> render= -faa, but unfortunately the output (=holodeck file) was not 
> readable at
> all. Basicly it was the same as without the mentioned line or with 
> -fdd instead
> of -faa. Maybe I am using the wrong command or just the wrong place 
> for the
> right command? Or is the holodeck file not supposed to be viewable at 
> all?
>
> regards,
>
> Olga


From a.i.ruppertsberg at Bradford.ac.uk  Mon Jun 21 11:04:21 2004
From: a.i.ruppertsberg at Bradford.ac.uk (Alexa I. Ruppertsberg)
Date: Mon Jun 21 11:06:46 2004
Subject: [Radiance-general] Opportunity for PhD studies in RADIANCE (almost
	:-)
Message-ID: <40D6A495.9000504@bradford.ac.uk>

Please, reply to MARINA, not me!
--------------------------------------------------------------------

I have funds to pay for an interested person to carry out Doctoral (PhD)
studies over a 3 year full time period.

Closing date for applications: 30 July 2004. Only open to UK, EU
citizens and others classed as Home fees by the UK government.

You will be involved in a project funded by the EPSRC (www.epsrc.ac.uk)
to study how we see colours of real objects compared to computer
simulated ones. We will use Radiance to generate the computer images.
The aim of this project is to establish how good human colour constancy
is in the presence of gradients and to study how it depends on the image
characteristics (real vs simulated, etc) but you can also think of the
project as an attempt to carry out a psychophysical validation of the
images generated by Radiance.

You will be working with me and another experienced post-doctoral
researcher within the Department of Optometry at the University of
Bradford (www.brad.ac.uk). The EPSRC funding covers the construction of
a unique lighting booth in which to carry out the real objects
experiments, other equipment (computers, etc), travel money to attend
conferences and payment of observers. The project has scope for you to
develop your own ideas particularly in the later years of the PhD.

See:
http://www.brad.ac.uk/acad/lifesci/optometry/research/projects/ColourGrad.htm
for more info.

This is an interdisciplinary project combining techniques from colour
science, psychology and computing. It would suit an enthusiastic
candidate with a degree in architecture, engineering, computing, design,
physics, maths or psychology with an interest in human factors and
comfortable with computers (and Radiance!). It will give you an
opportunity to acquire experience in academic research, gain a PhD and
publish in top quality journals.

The University upholds a strong equal opportunity policy and I welcome
enquiries from mature students. Bradford (www.bradford.gov.uk) is
situated in West Yorkshire (in the North of England) among beautiful
countryside including the Yorkshire Dales National Park
(www.yorkshiredales.org.uk) and Bronte Country
(www.bronte-country.com/welcome.html). You will find excellent mountain
and road biking, walking, rock climbing and long boat sailing a short
distance from the University. The city is small and multicultural with
low cost of living, host to the National Film and Photography Museum
(www.nmsi.ac.uk) and the Bradford Bulls (www.bradfordbulls.co.uk). There
are excellent rail links (Leeds 20min, London 2.5 hs, Ilkley 30 min) and
an international airport.

Start date for the PhD is flexible; between September 04 and February 05.
Stipend is at Research council level (currently pounds 10000), as a full
time student you will be exempt from paying tax. There are opportunities
to supplement your income via teaching/demonstrating.

Interested parties should submit a personal statement indicating why
they are interested in the project and their background, a CV and
contact details of 3 referees (by 14 June 2004) to:

Dr Marina Bloj
Department of Optometry, Richmond Building
University of Bradford
BD7 1DP
UK

e-mail applications accepted at m.bloj@brad.ac.uk

Short list will be drawn up soon after the closing date and award
decisions will be made by July 2004.

I am happy to deal with informal enquiries via e-mail m.bloj@brad.ac.uk


---
Marina Bloj PhD, Lecturer
Department of Optometry, Richmond Building
University of Bradford
BD7 1DP
Tel: +44-(0)1274 23 6258 Fax: +44-(0)1274 235570




From s0343631 at sms.ed.ac.uk  Mon Jun 21 13:05:54 2004
From: s0343631 at sms.ed.ac.uk (O Graf)
Date: Mon Jun 21 13:05:58 2004
Subject: [Radiance-general] Re: output in holodeck file
In-Reply-To: <C1F5FD5D-C342-11D8-B62A-00306540F848@lmi.net>
References: <1087739284.40d595942ea25@sms.ed.ac.uk>
	<C1F5FD5D-C342-11D8-B62A-00306540F848@lmi.net>
Message-ID: <1087815954.40d6c1122ab97@sms.ed.ac.uk>

Thanks for your reply, Greg!

The purpose is to try to manipulate a holodeck file in terms of inserting an
artificial object (like a mirrored shpere) into a laser scan of a room. Of
course it is possible to do so in the appropriate .rad file (or in the octree),
but I was just wondering if it's also possible to do it directly by changing
the actual holodeck file. This is why I wanted to see the actual values.

-Olga

> Hi Olga,
>
> There is no method provided for looking at the ray values in a holodeck
> in ASCII format, as I never found this useful even for debugging
> purposes.  The data is organized in a very hard-to-understand way, and
> the individual ray values are so many that I'm not sure what you would
> do with them if you had them.  However, there are a couple of useful
> utilities for holodecks that you might enjoy:
>
> rhinfo	- prints the header and grid information from a holodeck file
> rhcopy	- copies information from one holodeck to another, or from a
> picture to a holodeck
> rhoptimize	- optimizes beam placements in a holodeck for more efficient
> rendering
> rhpict	- reconstructs a picture from beams stored in a holodeck
>
> What purpose did you have in mind for recovering ray values?
> -Greg
>
> > From: O Graf <s0343631@sms.ed.ac.uk>
> > Date: June 20, 2004 3:48:04 PM CEST
> >
> > Hi!
> >
> > Is it possible to control the output in the holodeck file to be able
> > to see the
> > actual values? I already tried to add the following line to the
> > .hif-file:
> > render= -faa, but unfortunately the output (=holodeck file) was not
> > readable at
> > all. Basicly it was the same as without the mentioned line or with
> > -fdd instead
> > of -faa. Maybe I am using the wrong command or just the wrong place
> > for the
> > right command? Or is the holodeck file not supposed to be viewable at
> > all?
> >
> > regards,
> >
> > Olga
>
>



From gward at lmi.net  Mon Jun 21 14:26:48 2004
From: gward at lmi.net (Greg Ward)
Date: Mon Jun 21 14:27:09 2004
Subject: [Radiance-general] Re: output in holodeck file
In-Reply-To: <1087815954.40d6c1122ab97@sms.ed.ac.uk>
References: <1087739284.40d595942ea25@sms.ed.ac.uk>
	<C1F5FD5D-C342-11D8-B62A-00306540F848@lmi.net>
	<1087815954.40d6c1122ab97@sms.ed.ac.uk>
Message-ID: <4440EC32-C37E-11D8-80D0-00306540F848@lmi.net>

Hi Olga,

> The purpose is to try to manipulate a holodeck file in terms of 
> inserting an
> artificial object (like a mirrored shpere) into a laser scan of a 
> room. Of
> course it is possible to do so in the appropriate .rad file (or in the 
> octree),
> but I was just wondering if it's also possible to do it directly by 
> changing
> the actual holodeck file. This is why I wanted to see the actual 
> values.

I don't recommend inserting samples into a holodeck for this purpose, 
but you could create one or more rpict pictures and use rhcopy to add 
these to the holodeck manually.  Adding the object to the octree is a 
much more robust solution, however.  If you were to insert samples 
using rhcopy, you could end up with some odd reconstruction errors in 
rholo.

-Greg


From gward at lmi.net  Mon Jun 21 18:04:05 2004
From: gward at lmi.net (Greg Ward)
Date: Mon Jun 21 18:04:28 2004
Subject: [Radiance-general] Re: Radiance Teaser (reminder)
In-Reply-To: <E1BXMMS-0004A5-00@saturn.dmu.ac.uk>
References: <E1BXMMS-0004A5-00@saturn.dmu.ac.uk>
Message-ID: <9EC4E380-C39C-11D8-ADB2-00306540F848@lmi.net>

So far, we've had only one entry, from Schorsch.  Anyone want to offer 
a serious one??

-Greg

> From: John Mardaljevic <jm@dmu.ac.uk>
> Date: June 7, 2004 5:48:32 PM CEST
>
> Dear Fellows,
>
> Here's a little Radiance teaser to exercise the noggin(*).
>
> Explain the absence of level 2 ambient sampling (blue) markers
> directly under the box in Figure 2 of the Third Radiance Tech Note.
> Level 2 markers are scattered across the rest of the plane, why not
> under the box?
>
> The Prize?  Something money can't buy: the respect of your peers!
>
> The Judge?  As I'm not too sure of the reason myself, I nominate
> whasisname....  Greg.  Post answers to this thread.
>
> -John
>
> The Tech Note can be found here:
> http://www.iesd.dmu.ac.uk/~jm/resources.html
>
> (*) noggin
> n : informal terms for a human head [syn: attic, bean, noodle]
>
> -----------------------------------------------
> Dr. John Mardaljevic
> Senior Research Fellow
> Institute of Energy and Sustainable Development
> De Montfort University
> The Gateway
> Leicester
> LE1 9BH, UK
> +44 (0) 116 257 7972
> +44 (0) 116 257 7981 (fax)
>
> jm@dmu.ac.uk
> http://www.iesd.dmu.ac.uk/~jm


From schorsch at schorsch.com  Mon Jun 21 21:15:53 2004
From: schorsch at schorsch.com (Georg Mischler)
Date: Mon Jun 21 21:15:58 2004
Subject: [Radiance-general] Re: Radiance Teaser (reminder)
In-Reply-To: <9EC4E380-C39C-11D8-ADB2-00306540F848@lmi.net>
References: <E1BXMMS-0004A5-00@saturn.dmu.ac.uk>
	<9EC4E380-C39C-11D8-ADB2-00306540F848@lmi.net>
Message-ID: <Pine.BSF.4.58.0406211510010.30859@emancholl.pair.com>

Greg Ward wrote:

> So far, we've had only one entry, from Schorsch.  Anyone want to offer
> a serious one??


Actually, my entry *was* serious...

I just chose to make it a little cryptic, so that others would
have a chance to find their own solution, or to translate mine
into plain english.


-schorsch

-- 
Georg Mischler  --  simulations developer  --  schorsch at schorsch com
+schorsch.com+  --  lighting design tools  --  http://www.schorsch.com/

From gward at lmi.net  Tue Jun 22 09:29:40 2004
From: gward at lmi.net (Greg Ward)
Date: Tue Jun 22 09:32:42 2004
Subject: [Radiance-general] Re: Radiance Teaser (reminder)
In-Reply-To: <Pine.BSF.4.58.0406211510010.30859@emancholl.pair.com>
References: <E1BXMMS-0004A5-00@saturn.dmu.ac.uk>
	<9EC4E380-C39C-11D8-ADB2-00306540F848@lmi.net>
	<Pine.BSF.4.58.0406211510010.30859@emancholl.pair.com>
Message-ID: <EC422582-C41D-11D8-9202-00306540F848@lmi.net>

Of course.  As the official judge, I should have spotted the truth in 
your jest.  As you also gave your response right away, you deserve the 
first prize.  Anyone want to try for second place by explaining what 
Schorsch meant in his response (attached)?

-Greg

> From: Georg Mischler <schorsch@schorsch.com>
> Date: June 21, 2004 9:15:53 PM CEST
>
> Greg Ward wrote:
>
>> So far, we've had only one entry, from Schorsch.  Anyone want to offer
>> a serious one??
>
>
> Actually, my entry *was* serious...
>
> I just chose to make it a little cryptic, so that others would
> have a chance to find their own solution, or to translate mine
> into plain english.
>
> -schorsch

Begin forwarded message:

> From: Georg Mischler <schorsch@schorsch.com>
> Date: June 7, 2004 7:36:36 PM CEST
>
> John Mardaljevic wrote:
>
>> Dear Fellows,
>>
>> Here's a little Radiance teaser to exercise the noggin(*).
>>
>> Explain the absence of level 2 ambient sampling (blue) markers
>> directly under the box in Figure 2 of the Third Radiance Tech Note.
>> Level 2 markers are scattered across the rest of the plane, why not
>> under the box?
>
> The blue dots are coming late for the seats in
> that part of the auditorium...
>
> -schorsch


From cbauer- at t-online.de  Tue Jun 22 11:48:12 2004
From: cbauer- at t-online.de (Carsten Bauer)
Date: Tue Jun 22 10:39:22 2004
Subject: [Radiance-general] Re: Radiance Teaser (reminder)
References: <E1BXMMS-0004A5-00@saturn.dmu.ac.uk>	<9EC4E380-C39C-11D8-ADB2-00306540F848@lmi.net>	<Pine.BSF.4.58.0406211510010.30859@emancholl.pair.com>
	<EC422582-C41D-11D8-9202-00306540F848@lmi.net>
Message-ID: <40D8005C.4050800@t-online.de>

Hi Greg,

yeah, we're a bunch of lazybones. Folks are waiting for YOU to give us 
the answer :-) (-:

-cb


From rpg at rumblestrip.org  Tue Jun 22 15:48:21 2004
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Tue Jun 22 15:47:25 2004
Subject: [Radiance-general] Re: Radiance Teaser (reminder)
In-Reply-To: <40D8005C.4050800@t-online.de>
References: <E1BXMMS-0004A5-00@saturn.dmu.ac.uk>	<9EC4E380-C39C-11D8-ADB2-00306540F848@lmi.net>	<Pine.BSF.4.58.0406211510010.30859@emancholl.pair.com>	<EC422582-C41D-11D8-9202-00306540F848@lmi.net>
	<40D8005C.4050800@t-online.de>
Message-ID: <40D838A5.7070803@rumblestrip.org>

Carsten Bauer wrote:
> Hi Greg,
> 
> yeah, we're a bunch of lazybones. Folks are waiting for YOU to give us 
> the answer :-) (-:

Yeah, what gives there?  Like it was a shock Schorsch would take the 
crown?  Come on Judge Greg, let us have it!

----

      Rob Guglielmetti

e. rpg@rumblestrip.org
w. www.rumblestrip.org

From schorsch at schorsch.com  Tue Jun 22 16:04:43 2004
From: schorsch at schorsch.com (Georg Mischler)
Date: Tue Jun 22 16:08:27 2004
Subject: [Radiance-general] Re: Radiance Teaser (reminder)
In-Reply-To: <40D838A5.7070803@rumblestrip.org>
References: <E1BXMMS-0004A5-00@saturn.dmu.ac.uk>
	<9EC4E380-C39C-11D8-ADB2-00306540F848@lmi.net>
	<Pine.BSF.4.58.0406211510010.30859@emancholl.pair.com>
	<EC422582-C41D-11D8-9202-00306540F848@lmi.net>
	<40D8005C.4050800@t-online.de> <40D838A5.7070803@rumblestrip.org>
Message-ID: <Pine.BSF.4.58.0406220956090.14762@emancholl.pair.com>

Rob Guglielmetti wrote:

> Carsten Bauer wrote:
> > Hi Greg,
> >
> > yeah, we're a bunch of lazybones. Folks are waiting for YOU to give us
> > the answer :-) (-:
>
> Yeah, what gives there?  Like it was a shock Schorsch would take the
> crown?  Come on Judge Greg, let us have it!


The explanation is not particularly technical. Pretty much
everybody on this list could figure it out by considering the
sequence of ambient ray propagation, and a minimal amount of
spatial imagination. A look at the diagram on page 552 of the
book might make it even more obvious.


-schorsch

-- 
Georg Mischler  --  simulations developer  --  schorsch at schorsch com
+schorsch.com+  --  lighting design tools  --  http://www.schorsch.com/

From erwin.zierler at archvisu.at  Wed Jun 23 21:06:44 2004
From: erwin.zierler at archvisu.at (Erwin Zierler)
Date: Wed Jun 23 21:06:46 2004
Subject: [Radiance-general] ConRAD / 3ds2rad converter - ArchiCAD -> Radiance
Message-ID: <64059.193.154.186.143.1088017604.squirrel@193.154.186.143>

Hi list,

2 questions:

1. Does anyone happen to have the 3ds2rad converter from Ole Lemming?
Both his website and he himself seem to have vanished from the internet
and even after extensive search I was unable to find his converter.

2. Does anyone know a reasonable method to render an ArchCAD (6.5+)
3D model with radiance? All the DXF output options I have tried so far
were rather unsuccessful, I have not found a way to correctly
export/ translate materials or elements from ArchiCAD.

With Georg's dxf2rad I get a Radiance model, but the resulting Radiance
scene is pretty much unusable which is not Georgs fault. If I load the
DXF file into AutoCAD for examination I see that the DXF file is just
messed up with regards to layers/blocks/materials.

Any input very welcome!

 Erwin



From MdelaFuente at wmtao.com  Thu Jun 24 00:08:51 2004
From: MdelaFuente at wmtao.com (Mark de la Fuente)
Date: Thu Jun 24 00:09:36 2004
Subject: [Radiance-general] IES file manipulation
Message-ID: <s0d9b93a.064@wmtao.com>

Hi everyone,
 
I have a situation where I'm using ies2rad to bring files into
radiance.  Only I want to attach the photometric info to illum surfaces
surrounding my detailed fixture geometry rather than to the default
geometry...  (pretty typical I think) However in order to do so, I have
to add rectangles in order to "seal" my fixture.  I am concerned that
the addition of these rectangles will affect the magnitude of the
photometric information.
 
I guess one way to not even deal with boxing the luminaire with illums
is to attach a negative value to the lamp's glow material.  Then rays
won't "sneak out".  Of course the lamps won't add internal illumination
in that case.
 
Any thoughts would be appreciated.  I will try and run some tests when
I get a chance.
 
Thanks.
 
Mark
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20040623/31f463cf/attachment.htm
From gward at lmi.net  Thu Jun 24 09:05:14 2004
From: gward at lmi.net (Greg Ward)
Date: Thu Jun 24 09:05:39 2004
Subject: [Radiance-general] ConRAD / 3ds2rad converter - ArchiCAD ->
	Radiance
In-Reply-To: <64059.193.154.186.143.1088017604.squirrel@193.154.186.143>
References: <64059.193.154.186.143.1088017604.squirrel@193.154.186.143>
Message-ID: <D77D843F-C5AC-11D8-964B-00306540F848@lmi.net>

In answer to your first question, 3ds2mgf is distributed with Radiance, 
but not built by default.  To build it, switch to the ray/src/cv/mgflib 
directory and type the command:

	make 3ds2mgf

Then, copy the resulting executable to the appropriate directory (e.g., 
/usr/local/bin).

-Greg

> From: "Erwin Zierler" <erwin.zierler@archvisu.at>
> Date: June 23, 2004 9:06:44 PM CEST
> To: radiance-general@radiance-online.org
>
> Hi list,
>
> 2 questions:
>
> 1. Does anyone happen to have the 3ds2rad converter from Ole Lemming?
> Both his website and he himself seem to have vanished from the internet
> and even after extensive search I was unable to find his converter.
>
> 2. Does anyone know a reasonable method to render an ArchCAD (6.5+)
> 3D model with radiance? All the DXF output options I have tried so far
> were rather unsuccessful, I have not found a way to correctly
> export/ translate materials or elements from ArchiCAD.
>
> With Georg's dxf2rad I get a Radiance model, but the resulting Radiance
> scene is pretty much unusable which is not Georgs fault. If I load the
> DXF file into AutoCAD for examination I see that the DXF file is just
> messed up with regards to layers/blocks/materials.
>
> Any input very welcome!
>
>  Erwin


From gward at lmi.net  Thu Jun 24 09:08:39 2004
From: gward at lmi.net (Greg Ward)
Date: Thu Jun 24 09:09:01 2004
Subject: [Radiance-general] IES file manipulation
In-Reply-To: <s0d9b93a.064@wmtao.com>
References: <s0d9b93a.064@wmtao.com>
Message-ID: <519FC44F-C5AD-11D8-964B-00306540F848@lmi.net>

Hi Mark,

Did you try the -i option to ies2rad?

-Greg

> From: "Mark de la Fuente" <MdelaFuente@wmtao.com>
> Date: June 24, 2004 12:08:51 AM CEST
>
> Hi everyone,
> ?
> I have a situation where I'm using ies2rad to bring files into 
> radiance.? Only I want to attach the photometric info to illum 
> surfaces surrounding my detailed fixture geometry rather than to the 
> default geometry...? (pretty typical I think) However in order to do 
> so, I have to add rectangles in order to "seal" my fixture.? I am 
> concerned that the addition of these rectangles will affect the 
> magnitude of the photometric information.
> ?
> I guess one way to not even deal with boxing the luminaire with illums 
> is to?attach a negative value to the lamp's glow material.? Then?rays 
> won't "sneak out".? Of course the lamps won't add internal 
> illumination in that case.
> ?
> Any thoughts would be appreciated.? I will try and run some tests when 
> I get a chance.
> ?
> Thanks.
> ?
> Mark


From jm at dmu.ac.uk  Thu Jun 24 10:07:18 2004
From: jm at dmu.ac.uk (John Mardaljevic)
Date: Thu Jun 24 10:07:27 2004
Subject: [Radiance-general] ConRAD / 3ds2rad converter - ArchiCAD -> Radiance
Message-ID: <E1BdPGQ-0003YX-00@saturn.dmu.ac.uk>

Erwin,

To follow on from Greg - here's a tiny shell script to carry
out the 3ds > mgf > rad in one command.  I called it 3ds2rad (not knowing
there was another).

The mgfilt command (upto $nam.rad) is all one line.  This command
strips out perturbations to the surface normal that may have been
added to the CAD model at some point.  In my experience they have always
been spurious and best removed.

For file, say, "model.3ds", just enter:

	3ds2rad model.3ds

Ignore the report "3ds2mgf: unexpected EOF".

This will produce the files:

	matmodel.rad	- the material description
	model.rad	- the geometry
	
You should be able to view it right away:

	objview matmodel.rad model.rad

-John

PS.  I'd welcome any reports of using SketchUp to model scenes for Radiance.

=======================3ds2rad========================
#!/bin/csh -f

set tds = $1

set nam = $tds:r

3ds2mgf $tds

mgfilt '#,c,cct,cmix,cspec,cxy,cyl,ed,f,ies,ir,m,o,p,prism,rd,rs,sides,sph,td,ts,v,xf,fh' $nam.mgf | 
mgf2rad -m mat$n
am.rad >! $nam.rad

rm $nam.mgf $nam.inc
======================================================

---------------------------------------------
Dr. John Mardaljevic                     
Senior Research Fellow
Institute of Energy and Sustainable Development
De Montfort University
The Gateway
Leicester
LE1 9BH, UK
+44 (0) 116 257 7972   
+44 (0) 116 257 7981 (fax)

jm@dmu.ac.uk   
http://www.iesd.dmu.ac.uk/~jm


From grobe at gmx.net  Thu Jun 24 12:06:45 2004
From: grobe at gmx.net (Lars O. Grobe)
Date: Thu Jun 24 12:06:44 2004
Subject: [Radiance-general] colorpict and materials
Message-ID: <32E462A4-C5C6-11D8-8F3A-000A959DDB22@gmx.net>

Hi!

I have a question regarding the proper use of colorpicts.

I have "calibrated" pics of materials (using macbethcal) that I used to 
get the rgb-values for material definitions. These samples have 
typically dimensions of about 30 x 20 cm (similar to the Macbeth 
colorchecker). I rendered using the materials colors obtained from 
these samples.

Now I want to map pictures onto the surfaces. I still want to use the 
color as obtained from the sample. But the mapped picture is usually 
much larger than the sample. So I would need a way to bring the average 
color of the picture to the (average) color of the calibrated sample. 
Is there a way to do that with Radiance's tools? I could use these 
mappings on a clear white (.9 .9 .9) surface than, right?

Is there a way to use the pic only as variation of the color? E.g. 
converting from radiance pic to a file that could be used by 
brightdata? I could use the color from the calibrated (small) sample 
than, and the big pattern only to map some structure.

The way I used so far: applying normpat to a grayscale pattern, and 
mapping that onto the surface which has the color measured from the 
sample. Similar to using brightdata, and not able to reflect the color 
variation.

Thanks, CU Lars.
--
Lars O. Grobe, grobe@gmx.net, ++90-212-2458330

Kardesler Apartment, Turnacibasi Sokak 28
Galatasaray - Beyoglu, 34433 Istanbul


From MdelaFuente at wmtao.com  Thu Jun 24 15:23:37 2004
From: MdelaFuente at wmtao.com (Mark de la Fuente)
Date: Thu Jun 24 15:24:21 2004
Subject: [Radiance-general] IES file manipulation
Message-ID: <s0da8fa5.049@wmtao.com>

Greg, in this case I'm looking at a 20' linear fluorescent
Indirect/Direct pendant.  The IES file is for a 4' section and I would
array it 5 times.  A sphere with 2' diameter would probably not work if
the suspension length were less than 2' since this is a partially
indirect pendant..  Also, not sure if having the pendant poking through
the illum sphere would work.
 
I thought of a different way of handling this.  Since the ies2rad
program creates the top and bottom rectangles in this case, why not just
use an illum material with a void modifier to create the edges of the
box?
 
Thanks for the response.  It would certainly be faster to use the -i
option.
 
Mark
 
 
> Hi Mark,
>
> Did you try the -i option to ies2rad?
>
> -Greg
>
> From: "Mark de la Fuente" <MdelaFuente at wmtao.com>
> Date: June 24, 2004 12:08:51 AM CEST
>
> Hi everyone,
>  
> I have a situation where I'm using ies2rad to bring files into 
> radiance.  Only I want to attach the photometric info to illum 
> surfaces surrounding my detailed fixture geometry rather than to the

> default geometry...  (pretty typical I think) However in order to do

> so, I have to add rectangles in order to "seal" my fixture.  I am 
> concerned that the addition of these rectangles will affect the 
> magnitude of the photometric information.
>  
> I guess one way to not even deal with boxing the luminaire with
illums 
> is to attach a negative value to the lamp's glow material.  Then rays

> won't "sneak out".  Of course the lamps won't add internal 
> illumination in that case.
>  
> Any thoughts would be appreciated.  I will try and run some tests
when 
> I get a chance.
>  
> Thanks.
>  
> Mark

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20040624/1b9bacff/attachment.html
From rpg at rumblestrip.org  Thu Jun 24 20:05:21 2004
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Thu Jun 24 20:04:16 2004
Subject: [Radiance-general] IES file manipulation
In-Reply-To: <s0da8fa5.049@wmtao.com>
References: <s0da8fa5.049@wmtao.com>
Message-ID: <40DB17E1.1000805@rumblestrip.org>

Mark de la Fuente wrote:

> Greg, in this case I'm looking at a 20' linear fluorescent 
> Indirect/Direct pendant.  The IES file is for a 4' section and I would 
> array it 5 times.  A sphere with 2' diameter would probably not work if 
> the suspension length were less than 2' since this is a partially 
> indirect pendant..  Also, not sure if having the pendant poking through 
> the illum sphere would work.
>  
> I thought of a different way of handling this.  Since the ies2rad 
> program creates the top and bottom rectangles in this case, why not just 
> use an illum material with a void modifier to create the edges of the box?

Hiya Mark,

Do you have the Rendering with Radiance book?  there's a detailed 
example of using lboxcorr to create a rectangular shaped illum container 
for your IES distro.  I think that's what you need. (?)

----

      Rob Guglielmetti

e. rpg@rumblestrip.org
w. www.rumblestrip.org

From erwin.zierler at archvisu.at  Thu Jun 24 20:31:26 2004
From: erwin.zierler at archvisu.at (Erwin Zierler)
Date: Thu Jun 24 20:31:29 2004
Subject: [Radiance-general] ConRAD / 3ds2rad converter - ArchiCAD -> 
	Radiance
In-Reply-To: <E1BdPGQ-0003YX-00@saturn.dmu.ac.uk>
References: <E1BdPGQ-0003YX-00@saturn.dmu.ac.uk>
Message-ID: <61582.193.154.186.143.1088101886.squirrel@193.154.186.143>

Hi,

thanks for the quick response. I'll run some tests with this script.
I never actually heard about it before! Anyway, it's been a while since
I have examined the mgf file format but for the sole purpose of runninig
a few conversion tests I guess it's not really required to understand it
all ;-)

And thanks alot to all who responded!

 Erwin

---
John Mardaljevic said:
> Erwin,
>
> To follow on from Greg - here's a tiny shell script to carry
> out the 3ds > mgf > rad in one command.  I called it 3ds2rad (not knowing
> there was another).
>
> The mgfilt command (upto $nam.rad) is all one line.  This command
> strips out perturbations to the surface normal that may have been
> added to the CAD model at some point.  In my experience they have always
> been spurious and best removed.
>
> For file, say, "model.3ds", just enter:
>
> 	3ds2rad model.3ds
>
> Ignore the report "3ds2mgf: unexpected EOF".
>
> This will produce the files:
>
> 	matmodel.rad	- the material description
> 	model.rad	- the geometry
>
> You should be able to view it right away:
>
> 	objview matmodel.rad model.rad
>
> -John
>
> PS.  I'd welcome any reports of using SketchUp to model scenes for
> Radiance.
>
> =======================3ds2rad========================
> #!/bin/csh -f
>
> set tds = $1
>
> set nam = $tds:r
>
> 3ds2mgf $tds
>
> mgfilt
> '#,c,cct,cmix,cspec,cxy,cyl,ed,f,ies,ir,m,o,p,prism,rd,rs,sides,sph,td,ts,v,xf,fh'
> $nam.mgf |
> mgf2rad -m mat$n
> am.rad >! $nam.rad
>
> rm $nam.mgf $nam.inc
> ======================================================
>
> ---------------------------------------------
> Dr. John Mardaljevic
> Senior Research Fellow
> Institute of Energy and Sustainable Development
> De Montfort University
> The Gateway
> Leicester
> LE1 9BH, UK
> +44 (0) 116 257 7972
> +44 (0) 116 257 7981 (fax)
>
> jm@dmu.ac.uk
> http://www.iesd.dmu.ac.uk/~jm
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>



From Rob.Fitzsimmons at Summit.Fiserv.com  Thu Jun 24 21:03:40 2004
From: Rob.Fitzsimmons at Summit.Fiserv.com (Fitzsimmons, Rob)
Date: Thu Jun 24 21:04:07 2004
Subject: [Radiance-general] ConRAD / 3ds2rad converter - ArchiCAD -> R
	adiance
Message-ID: <7B2F6EA5E35E214882CB9828962BC3CF04D69544@corvallis>

 -John

PS.  I'd welcome any reports of using SketchUp to model scenes for
Radiance. 



I tried exporting a Sketchup model to Rad. It's been a while but I recall
having problems going directly to Radiance with dxf2rad and strata2rad.? I
exported dxf and then brought that into Infini-D. I also tried going through
Bryce.. and Hash Animation Master

When finally got it into Radiance, there were too many unnecessary polygons
- I ended up Re-modelling the house. 

But now, playing with the 3ds2rad script, it seems to be a much more
seamless process, not to mention maintaining material properties.

After a quick try, Sketchup export to3ds, > 3ds2rad seems to work well. 

Rob F 

PS - when you reply to a message, it directs to
radiance-general-bounces@radiance-online.org
But that does'nt seem to make it to the list. I'm always copy/pasting the
adddress. Is it just my email client (MS Outlook)?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20040624/3ff72821/attachment.htm
From schorsch at schorsch.com  Thu Jun 24 21:23:17 2004
From: schorsch at schorsch.com (Georg Mischler)
Date: Thu Jun 24 21:23:23 2004
Subject: [Radiance-general] Return address (was: ConRAD...)
In-Reply-To: <7B2F6EA5E35E214882CB9828962BC3CF04D69544@corvallis>
References: <7B2F6EA5E35E214882CB9828962BC3CF04D69544@corvallis>
Message-ID: <Pine.BSF.4.58.0406241521310.89028@emancholl.pair.com>

Fitzsimmons, Rob wrote:

> PS - when you reply to a message, it directs to
> radiance-general-bounces@radiance-online.org
> But that does'nt seem to make it to the list. I'm always copy/pasting the
> adddress. Is it just my email client (MS Outlook)?


Yes, it's probably Outlook. You should instruct it (if possible)
to reply to the address given in the "Reply-To:" header, instead
of the "Return-Path:" header.


-schorsch

-- 
Georg Mischler  --  simulations developer  --  schorsch at schorsch com
+schorsch.com+  --  lighting design tools  --  http://www.schorsch.com/

From MdelaFuente at wmtao.com  Fri Jun 25 03:27:18 2004
From: MdelaFuente at wmtao.com (Mark de la Fuente)
Date: Fri Jun 25 03:28:20 2004
Subject: [Radiance-general] [Radiance General] IES file
	manipulation&In-Reply-To=s0da8fa5.049@wmtao
Message-ID: <s0db394a.003@wmtao.com>

I do have the book....  Looks promising.  I was having trouble keeping
the glow material from illuminating my scene!  Hopefully this will do
that trick.  Thanks!
 
Mark
 
> Hiya Mark,
>
> Do you have the Rendering with Radiance book?  there's a detailed 
> example of using lboxcorr to create a rectangular shaped illum
container 
> for your IES distro.  I think that's what you need. (?)

 
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20040624/a51ac54e/attachment.html
From s0343631 at sms.ed.ac.uk  Fri Jun 25 17:47:05 2004
From: s0343631 at sms.ed.ac.uk (O Graf)
Date: Fri Jun 25 17:47:11 2004
Subject: [Radiance-general] rhcopy/rholo
Message-ID: <1088178425.40dc48f937e4b@sms.ed.ac.uk>

Hi!

I've just copied one holodeck file into another hdk-file using rhcopy, which
seemed to work fine, i.e. without error messages, but unfortunately I don't see
any changes in the destination file when I start rholo. Actually there is an
option -r for the rholo command which is supposed to open the holodeck file
only for reading, but each time I try to use it with the destination hdk-file i
get the following error:

           rholo: fatal - cannot create read-only holodeck

It doesn't matter how I use rholo, without or without -n/-o, this error appears
every time. Maybe I'm missing something about how to use this -r option? Or is
there another possibility just to view the content of a holodeck file without
actually recalculating the rays?


Thanks!

regards,

Olga

From MdelaFuente at wmtao.com  Fri Jun 25 23:36:13 2004
From: MdelaFuente at wmtao.com (Mark de la Fuente)
Date: Fri Jun 25 23:36:46 2004
Subject: [Radiance-general] IES File Manipulation
Message-ID: <s0dc548f.052@wmtao.com>

Will this work with feet?  My IES file looks like this...  Note that the
IES file was converted in feet with a .81 light loss factor, then the
lboxcorr dimensions are in meters, and then my genbox is in feet again. 
(Note the insertion point is the top of the fixture at 0,0,0).
 
The fixture looks right.. the distribution is no longer shadowing
itself, so it looks right....
 
Sound good?  
 
# ies2rad -i .56419 -df -m .81
# Dimensions in feet
#<IESNA:LM-63-1995
#<[TEST] 5547
#<[MANUFAC] PEERLESS LIGHTING
#<[LUMCAT] 10CRM8-2-32-30/70
#<[LUMINAIRE] 10 1/2"W X 3 1/8"H PEERLITE DIRECT/INDIRECT LIGHT WITH
#<WHITE PAINTED REFLECTOR AND PERFORATED BAFFLES
#<[LAMP] 2-F32/SP35 RATED @ 2850 LUMENS
#<[BALLAST] REL-2P32-SC
# CIE(x,y) = (0.333300,0.333300)
# Depreciation = 100.0%
# 57.4 watt luminaire, lamp*ballast factor = 1
 
void brightdata peerless_dist
5 lboxcorr ./scene/peerless.dat source.cal src_phi4 src_theta 
0
4 1 1.2193 .2713 .0799
 
peerless_dist illum peerless_light
0
0
3 1 1 1
 
!genbox peerless_light peerless.s 4 .89 .262 | xform -t -2 -.445 -.262
 
 
 
> Hiya Mark,
>
> Do you have the Rendering with Radiance book?  there's a detailed 
> example of using lboxcorr to create a rectangular shaped illum
container 
> for your IES distro.  I think that's what you need. (?)

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20040625/d9f38da5/attachment.html
From gward at lmi.net  Sun Jun 27 11:36:50 2004
From: gward at lmi.net (gward@lmi.net)
Date: Sun Jun 27 11:37:00 2004
Subject: [Radiance-general] rhcopy/rholo
In-Reply-To: <1088178425.40dc48f937e4b@sms.ed.ac.uk>
References: <1088178425.40dc48f937e4b@sms.ed.ac.uk>
Message-ID: <1088329010.40de9532ba444@webmail.lmi.net>

What is the exact rholo command you are using (with options)?

Quoting O Graf <s0343631@sms.ed.ac.uk>:

> Hi!
> 
> I've just copied one holodeck file into another hdk-file using rhcopy, which
> seemed to work fine, i.e. without error messages, but unfortunately I don't
> see
> any changes in the destination file when I start rholo. Actually there is an
> option -r for the rholo command which is supposed to open the holodeck file
> only for reading, but each time I try to use it with the destination hdk-file
> i
> get the following error:
> 
>            rholo: fatal - cannot create read-only holodeck
> 
> It doesn't matter how I use rholo, without or without -n/-o, this error
> appears
> every time. Maybe I'm missing something about how to use this -r option? Or
> is
> there another possibility just to view the content of a holodeck file
> without
> actually recalculating the rays?
> 
> 
> Thanks!
> 
> regards,
> 
> Olga
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
> 
> 


From s0343631 at sms.ed.ac.uk  Sun Jun 27 13:54:24 2004
From: s0343631 at sms.ed.ac.uk (O Graf)
Date: Sun Jun 27 13:54:28 2004
Subject: [Radiance-general] rhcopy/rholo
In-Reply-To: <1088329010.40de9532ba444@webmail.lmi.net>
References: <1088178425.40dc48f937e4b@sms.ed.ac.uk>
	<1088329010.40de9532ba444@webmail.lmi.net>
Message-ID: <1088337264.40deb5709777c@sms.ed.ac.uk>

I guess, I've solved the problem with -r option of the rholo command. My mistake
was that I used

rholo -o ogl -r bar.hdk bar.hif        instead of
rholo -o ogl -r bar.hdk

But I still can't see any changes in the bar.hdk. Actually I've done the
following: (bar.hdk is a holodeck file from a laser scan of a real bar room)

rholo -n 1 -o ogl bar.hdk bar.hif         to calculate the destination hdk-file
rholo -n 1 -o ogl sphere.hdk sphere.hif   to calculate the second hdk-file
rhcopy bar.hdk -h sphere.hdk              to copy sphere into bar
rholo -o ogl bar.hdk                      to view the changed bar-file without
                                          overwriting the values

Maybe I am just missing some important bit of the whole procedure?


-Olga

> What is the exact rholo command you are using (with options)?
>
>
> > Hi!
> >
> > I've just copied one holodeck file into another hdk-file using rhcopy,
> which
> > seemed to work fine, i.e. without error messages, but unfortunately I don't
> > see
> > any changes in the destination file when I start rholo. Actually there is
> an
> > option -r for the rholo command which is supposed to open the holodeck file
> > only for reading, but each time I try to use it with the destination
> hdk-file
> > i
> > get the following error:
> >
> >            rholo: fatal - cannot create read-only holodeck
> >
> > It doesn't matter how I use rholo, without or without -n/-o, this error
> > appears
> > every time. Maybe I'm missing something about how to use this -r option? Or
> > is
> > there another possibility just to view the content of a holodeck file
> > without
> > actually recalculating the rays?
> >
> >
> > Thanks!
> >
> > regards,
> >
> > Olga
> >
> > _______________________________________________
> > Radiance-general mailing list
> > Radiance-general@radiance-online.org
> > http://www.radiance-online.org/mailman/listinfo/radiance-general
> >
> >
>
>



From gward at lmi.net  Sun Jun 27 17:49:51 2004
From: gward at lmi.net (gward@lmi.net)
Date: Sun Jun 27 17:49:57 2004
Subject: [Radiance-general] rhcopy/rholo
In-Reply-To: <1088337264.40deb5709777c@sms.ed.ac.uk>
References: <1088178425.40dc48f937e4b@sms.ed.ac.uk>
	<1088329010.40de9532ba444@webmail.lmi.net>
	<1088337264.40deb5709777c@sms.ed.ac.uk>
Message-ID: <1088351391.40deec9fcf2a4@webmail.lmi.net>

Hi Olga,

You may need to include the -d option to rhcopy if you have 
set the OBSTRUCTIONS variable in bar.hif. This is mentioned
in the rhcopy man page.

-Greg

Quoting O Graf <s0343631@sms.ed.ac.uk>:

> I guess, I've solved the problem with -r option of the rholo command. My
> mistake
> was that I used
> 
> rholo -o ogl -r bar.hdk bar.hif        instead of
> rholo -o ogl -r bar.hdk
> 
> But I still can't see any changes in the bar.hdk. Actually I've done the
> following: (bar.hdk is a holodeck file from a laser scan of a real bar room)
> 
> rholo -n 1 -o ogl bar.hdk bar.hif         to calculate the destination
> hdk-file
> rholo -n 1 -o ogl sphere.hdk sphere.hif   to calculate the second hdk-file
> rhcopy bar.hdk -h sphere.hdk              to copy sphere into bar
> rholo -o ogl bar.hdk                      to view the changed bar-file
> without
>                                           overwriting the values
> 
> Maybe I am just missing some important bit of the whole procedure?
> 
> 
> -Olga
> 
> > What is the exact rholo command you are using (with options)?

From jmestes at austin.rr.com  Sun Jun 27 23:02:20 2004
From: jmestes at austin.rr.com (Jim Estes)
Date: Sun Jun 27 23:02:29 2004
Subject: [Radiance-general] Illuminance calculation on a virtual surface?
Message-ID: <40DF35DC.704@austin.rr.com>

Hi-

I have been using a script with rtrace to calculate the illuminance
values on a grid of points representing the work surface in my modeled
room. But now I would like to generate a false-color image of the
illuminance values on a plane .8m above the floor. I can easily do
the floor (or walls, etc.) with a parallel projection view, but I
don't see how to get the workplane illuminance values without creating
an opaque surface at the correct height which would change the light
distribution. Does anyone know of a way to specify a "virtual" surface
or other technique to do this?

Thanks,
Jim Estes

From raphael.compagnon at eif.ch  Mon Jun 28 09:26:14 2004
From: raphael.compagnon at eif.ch (Raphael Compagnon)
Date: Mon Jun 28 09:26:22 2004
Subject: [Radiance-general] Illuminance calculation on a virtual surface?
In-Reply-To: <40DF35DC.704@austin.rr.com>
Message-ID: <5.1.0.14.2.20040628092234.01fa90c0@pop.eif.ch>

Hello Jim,

You can simply slightly change your script by specifying rtrace option -fac 
that will directly generate a Radiance picture on its output. Of course, 
you will surely have to increase the density of the calculation points 
piped to rtrace in order to have a picture with reasonable size.

Raphael Compagnon

At 27.06.2004 23:02, you wrote:
>Hi-
>
>I have been using a script with rtrace to calculate the illuminance
>values on a grid of points representing the work surface in my modeled
>room. But now I would like to generate a false-color image of the
>illuminance values on a plane .8m above the floor. I can easily do
>the floor (or walls, etc.) with a parallel projection view, but I
>don't see how to get the workplane illuminance values without creating
>an opaque surface at the correct height which would change the light
>distribution. Does anyone know of a way to specify a "virtual" surface
>or other technique to do this?
>
>Thanks,
>Jim Estes


From Giulio.Antonutto at arup.com  Mon Jun 28 10:25:41 2004
From: Giulio.Antonutto at arup.com (Giulio Antonutto)
Date: Mon Jun 28 10:25:49 2004
Subject: [Radiance-general] rhcopy/rholo
Message-ID: <DC0CAEEA090E984C911D3B85B16C3F90FAF644@l-gnts05>

I am just guessing:
did you tried this:

rholo -r -o x11  your.hdk

(without -n and your.hif)
hope it helps,
giulio


-----Original Message-----
From: radiance-general-bounces@radiance-online.org
[mailto:radiance-general-bounces@radiance-online.org]On Behalf Of O Graf
Sent: 25 June 2004 16:47
To: radiance-general@radiance-online.org
Subject: [Radiance-general] rhcopy/rholo


Hi!

I've just copied one holodeck file into another hdk-file using rhcopy, which
seemed to work fine, i.e. without error messages, but unfortunately I don't
see
any changes in the destination file when I start rholo. Actually there is an
option -r for the rholo command which is supposed to open the holodeck file
only for reading, but each time I try to use it with the destination
hdk-file i
get the following error:

           rholo: fatal - cannot create read-only holodeck

It doesn't matter how I use rholo, without or without -n/-o, this error
appears
every time. Maybe I'm missing something about how to use this -r option? Or
is
there another possibility just to view the content of a holodeck file
without
actually recalculating the rays?


Thanks!

regards,

Olga

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general

___________________________________________________________________
Electronic mail messages entering and leaving Arup business
systems are scanned for acceptability of content and viruses.

From gward at lmi.net  Mon Jun 28 10:24:25 2004
From: gward at lmi.net (Greg Ward)
Date: Mon Jun 28 10:26:42 2004
Subject: [Radiance-general] colorpict and materials
In-Reply-To: <32E462A4-C5C6-11D8-8F3A-000A959DDB22@gmx.net>
References: <32E462A4-C5C6-11D8-8F3A-000A959DDB22@gmx.net>
Message-ID: <909E7B2E-C8DC-11D8-ABE9-00306540F848@lmi.net>

Hi Lars,

I guess no one really understood your question.  I'm away on travel, 
with spotty access to e-mail, so I missed this one.  I still think I'm 
missing the question.  You can use the pfilt command to adjust the 
overall image brightness used by brightpict or colorpict -- is this 
what you're asking?

-Greg

> From: "Lars O. Grobe" <grobe@gmx.net>
> Date: June 24, 2004 11:06:45 AM GMT+01:00
>
> Hi!
>
> I have a question regarding the proper use of colorpicts.
>
> I have "calibrated" pics of materials (using macbethcal) that I used 
> to get the rgb-values for material definitions. These samples have 
> typically dimensions of about 30 x 20 cm (similar to the Macbeth 
> colorchecker). I rendered using the materials colors obtained from 
> these samples.
>
> Now I want to map pictures onto the surfaces. I still want to use the 
> color as obtained from the sample. But the mapped picture is usually 
> much larger than the sample. So I would need a way to bring the 
> average color of the picture to the (average) color of the calibrated 
> sample. Is there a way to do that with Radiance's tools? I could use 
> these mappings on a clear white (.9 .9 .9) surface than, right?
>
> Is there a way to use the pic only as variation of the color? E.g. 
> converting from radiance pic to a file that could be used by 
> brightdata? I could use the color from the calibrated (small) sample 
> than, and the big pattern only to map some structure.
>
> The way I used so far: applying normpat to a grayscale pattern, and 
> mapping that onto the surface which has the color measured from the 
> sample. Similar to using brightdata, and not able to reflect the color 
> variation.
>
> Thanks, CU Lars.
> --
> Lars O. Grobe, grobe@gmx.net, ++90-212-2458330
>
> Kardesler Apartment, Turnacibasi Sokak 28
> Galatasaray - Beyoglu, 34433 Istanbul


From gward at lmi.net  Mon Jun 28 10:30:36 2004
From: gward at lmi.net (Greg Ward)
Date: Mon Jun 28 10:31:03 2004
Subject: [Radiance-general] IES file manipulation
In-Reply-To: <s0da8fa5.049@wmtao.com>
References: <s0da8fa5.049@wmtao.com>
Message-ID: <6E06F5E8-C8DD-11D8-ABE9-00306540F848@lmi.net>

Hi Mark,

That should work -- set the three real illum arguments to zero, though, 
so it won't try to contribute to the output.

-Greg

> From: "Mark de la Fuente" <MdelaFuente@wmtao.com>
> Date: June 24, 2004 2:23:37 PM GMT+01:00
>
Greg, in this case I'm looking at a 20' linear fluorescent 
Indirect/Direct pendant.? The IES file is for a 4' section and I would 
array it 5 times.? A sphere with 2' diameter would probably not work if 
the suspension length were?less than 2' since this is a partially 
indirect pendant..? Also, not sure if having the pendant poking through 
the illum sphere would work.
?
I thought of a different way of handling this.? Since the ies2rad 
program creates the top and bottom?rectangles in this case,?why not 
just use an illum material with a void modifier to create the edges of 
the box?
?
Thanks for the response.? It would certainly be faster to use the -i 
option.
?
Mark
?
 > Hi Mark,
 >
 > Did you try the -i option to ies2rad?
 >
 > -Greg
 >
 > From: "Mark de la Fuente" <MdelaFuente at wmtao.com>
 > Date: June 24, 2004 12:08:51 AM CEST
 >
 > Hi everyone,
 > ?
 > I have a situation where I'm using ies2rad to bring files into
 > radiance.? Only I want to attach the photometric info to illum
 > surfaces surrounding my detailed fixture geometry rather than to the
 > default geometry...? (pretty typical I think) However in order to do
 > so, I have to add rectangles in order to "seal" my fixture.? I am
  > concerned that the addition of these rectangles will affect the
  > magnitude of the photometric information.
 > ?
 > I guess one way to not even deal with boxing the luminaire with illums
 > is to?attach a negative value to the lamp's glow material.? Then?rays
 > won't "sneak out".? Of course the lamps won't add internal
 > illumination in that case.
 > ?
 > Any thoughts would be appreciated.? I will try and run some tests when
 > I get a chance.
 > ?
 > Thanks.
 > ?
 > Mark


From rpg at rumblestrip.org  Mon Jun 28 16:12:13 2004
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Mon Jun 28 16:11:11 2004
Subject: [Radiance-general] Illuminance calculation on a virtual surface?
In-Reply-To: <5.1.0.14.2.20040628092234.01fa90c0@pop.eif.ch>
References: <5.1.0.14.2.20040628092234.01fa90c0@pop.eif.ch>
Message-ID: <40E0273D.2050504@rumblestrip.org>

Raphael Compagnon wrote:
> Hello Jim,
> 
> You can simply slightly change your script by specifying rtrace option 
> -fac that will directly generate a Radiance picture on its output. Of 
> course, you will surely have to increase the density of the calculation 
> points piped to rtrace in order to have a picture with reasonable size.

How about making the plane out of a trans material with zero reflectance 
and 100% transmission?  Martin (Moeck), didn't you mention that 
technique once?  Or am I confused again? =8-)

----

      Rob Guglielmetti

e. rpg@rumblestrip.org
w. www.rumblestrip.org

From gward at lmi.net  Mon Jun 28 16:45:15 2004
From: gward at lmi.net (Greg Ward)
Date: Mon Jun 28 16:45:51 2004
Subject: [Radiance-general] Illuminance calculation on a virtual surface?
In-Reply-To: <40E0273D.2050504@rumblestrip.org>
References: <5.1.0.14.2.20040628092234.01fa90c0@pop.eif.ch>
	<40E0273D.2050504@rumblestrip.org>
Message-ID: <C47BE7A4-C911-11D8-BFBB-00306540F848@lmi.net>

No good.  Trans gets ignored by the rpict -i option.  Just use pfilt to 
scale the illuminance map if it's not big enough.  (John M's suggestion 
-- he's sitting next to me in Leicester.)

-Greg

> From: Rob Guglielmetti <rpg@rumblestrip.org>
> Date: June 28, 2004 3:12:13 PM GMT+01:00
>
> Raphael Compagnon wrote:
>> Hello Jim,
>> You can simply slightly change your script by specifying rtrace 
>> option -fac that will directly generate a Radiance picture on its 
>> output. Of course, you will surely have to increase the density of 
>> the calculation points piped to rtrace in order to have a picture 
>> with reasonable size.
>
> How about making the plane out of a trans material with zero 
> reflectance and 100% transmission?  Martin (Moeck), didn't you mention 
> that technique once?  Or am I confused again? =8-)
>
> ----
>
>      Rob Guglielmetti
>
> e. rpg@rumblestrip.org
> w. www.rumblestrip.org


From rpg at rumblestrip.org  Mon Jun 28 21:05:36 2004
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Mon Jun 28 21:04:38 2004
Subject: [Radiance-general] Illuminance calculation on a virtual surface?
In-Reply-To: <C47BE7A4-C911-11D8-BFBB-00306540F848@lmi.net>
References: <5.1.0.14.2.20040628092234.01fa90c0@pop.eif.ch>	<40E0273D.2050504@rumblestrip.org>
	<C47BE7A4-C911-11D8-BFBB-00306540F848@lmi.net>
Message-ID: <40E06C00.5060407@rumblestrip.org>

Hi Greg, Hi John,

Greg Ward wrote:

> No good.  Trans gets ignored by the rpict -i option.  Just use pfilt to 
> scale the illuminance map if it's not big enough.  (John M's suggestion 
> -- he's sitting next to me in Leicester.)

Oh yeah?  =8-p

vwrays -x XRES -y YRES -vf viewfile -fd | rtrace -h -fd -opn octree \
| rtrace -fdc -I render_options -x XRES -y YRES octree > illum_picture.pic

Greg, does this look familiar?  A little ditty from a year or so ago? 
You sent me this tip when I asked you how to get illuminance on a 
building's curtain wall.  The first rtrace computes the intersection 
point (which is fast) and the second rtrace does the illuminance 
calculation.  Cool, yes?  Yes.

Now, given this little tip, could he use trans as I described?

----

      Rob Guglielmetti

e. rpg@rumblestrip.org
w. www.rumblestrip.org

From jmestes at austin.rr.com  Tue Jun 29 05:31:52 2004
From: jmestes at austin.rr.com (Jim Estes)
Date: Tue Jun 29 05:32:05 2004
Subject: [Radiance-general] Illuminance calculation on a virtual surface?
In-Reply-To: <40E06C00.5060407@rumblestrip.org>
References: <5.1.0.14.2.20040628092234.01fa90c0@pop.eif.ch>
	<40E0273D.2050504@rumblestrip.org>
	<C47BE7A4-C911-11D8-BFBB-00306540F848@lmi.net>
	<40E06C00.5060407@rumblestrip.org>
Message-ID: <40E0E2A8.8060302@austin.rr.com>

Rob Guglielmetti wrote:
> Hi Greg, Hi John,
> 
> Greg Ward wrote:
> 
>> No good.  Trans gets ignored by the rpict -i option.  Just use pfilt 
>> to scale the illuminance map if it's not big enough.  (John M's 
>> suggestion -- he's sitting next to me in Leicester.)

Thanks, that should get me there. Also thanks to Raphael for pointing out
the obvious that I missed in the rtrace man page for computing an image
(using the "-fac -x and -y" options, so far it is generating bad picture
files, but I'm on the right track).

> vwrays -x XRES -y YRES -vf viewfile -fd | rtrace -h -fd -opn octree \
> | rtrace -fdc -I render_options -x XRES -y YRES octree > illum_picture.pic
> 
> Greg, does this look familiar?  A little ditty from a year or so ago? 
> You sent me this tip when I asked you how to get illuminance on a 
> building's curtain wall.  The first rtrace computes the intersection 
> point (which is fast) and the second rtrace does the illuminance 
> calculation.  Cool, yes?  Yes.
> 
> Now, given this little tip, could he use trans as I described?

Thanks. That looks promising. My next step was to create a finer grid for
input to rtrace anyway. If this technique works not only would it do that
but hopefully (maybe) render the image much faster also. It might take a
little while but if I come up with anything interesting I'll report back.

Jim Estes

From gward at lmi.net  Tue Jun 29 13:18:48 2004
From: gward at lmi.net (gward@lmi.net)
Date: Tue Jun 29 13:19:02 2004
Subject: [Radiance-general] Illuminance calculation on a virtual surface?
In-Reply-To: <40E06C00.5060407@rumblestrip.org>
References: <5.1.0.14.2.20040628092234.01fa90c0@pop.eif.ch>
	<40E0273D.2050504@rumblestrip.org>
	<C47BE7A4-C911-11D8-BFBB-00306540F848@lmi.net>
	<40E06C00.5060407@rumblestrip.org>
Message-ID: <1088507928.40e1501822b7c@webmail.lmi.net>

OK, Rob -- you got me.  Your little trick would work.  I don't think he
really needs it, though, since he already has a method for generating
the grid points for rtrace.  He can simply increase the resolution of
the grid he already has (as Raphael suggested) and/or upsample the
result using pfilt.  Or your method.  All will work.

-Greg

Quoting Rob Guglielmetti <rpg@rumblestrip.org>:

> Hi Greg, Hi John,
> 
> Greg Ward wrote:
> 
> > No good.  Trans gets ignored by the rpict -i option.  Just use pfilt to 
> > scale the illuminance map if it's not big enough.  (John M's suggestion 
> > -- he's sitting next to me in Leicester.)
> 
> Oh yeah?  =8-p
> 
> vwrays -x XRES -y YRES -vf viewfile -fd | rtrace -h -fd -opn octree \
> | rtrace -fdc -I render_options -x XRES -y YRES octree > illum_picture.pic
> 
> Greg, does this look familiar?  A little ditty from a year or so ago? 
> You sent me this tip when I asked you how to get illuminance on a 
> building's curtain wall.  The first rtrace computes the intersection 
> point (which is fast) and the second rtrace does the illuminance 
> calculation.  Cool, yes?  Yes.
> 
> Now, given this little tip, could he use trans as I described?
> 

From grobe at gmx.net  Tue Jun 29 13:34:03 2004
From: grobe at gmx.net (Lars O. Grobe)
Date: Tue Jun 29 13:45:14 2004
Subject: [Radiance-general] colorpict and materials
In-Reply-To: <909E7B2E-C8DC-11D8-ABE9-00306540F848@lmi.net>
Message-ID: <38C05080-C9C0-11D8-ACAF-000A959DDB22@gmx.net>

Hi,

sorry, so again, I try to be clear in asking this time ;-) By the way, 
have nice holidays (I hope that's the reason for your travel ;-)!

All is about the question how to map pictures onto a surface without 
corrupting its material properties. I understand that colorpict 
multiplies the material color components with those of the picture.

If I have a grayscale image processed by normpat (which means that the 
average gray value is 1.0) and apply it to a material, the overall 
color and brightness will remain the same. So I get the "pattern" from 
the image, but the surface still has the correct material properties 
(color, brightness etc). I used this so far.

Now I want to use a colored picture for mapping. I also apply normpat 
to it, so, as far as I understand, the average of all R, G and B must 
be 1.0, right? For example, I use a normpat'ed picture of green marble. 
I than apply this using colorpict to a surface, which has a "marble" 
material. Will the overall color and brightness still be that of the 
defined material, as the picture map has the average of 1.0?

The background: I try to use exact data for material definitions, but 
the image maps can't all be color corrected. So I want the overall 
color and brightness from defined materials, e.g. from the plastic 
material, and use the map only for what I would call "local color 
variation". The reason is that I have e.g. red marble, got its color, 
brightness and all that defined as plastic marble. But the marble has 
blue particles which won't appear if I use a grayscale imagemap. So I 
want to use a normpat'ed (NOT colorcorrected e.g. by macbethcal!) to 
bring these blue parts onto the surface. The whole surface however must 
still have the average color of my plastic marble material.

If I understand the man-page of normpat, that's just what it was 
invented for. However, I am a bit unsure, as all Radiance documentation 
uses colorpict with a bright white material.

TIA+CU, Lars.
--
Lars O. Grobe
grobe@gmx.net


From jedev at visarc.com  Tue Jun 29 15:38:59 2004
From: jedev at visarc.com (Jack de Valpine)
Date: Tue Jun 29 15:39:08 2004
Subject: [Radiance-general] colorpict and materials
In-Reply-To: <38C05080-C9C0-11D8-ACAF-000A959DDB22@gmx.net>
References: <38C05080-C9C0-11D8-ACAF-000A959DDB22@gmx.net>
Message-ID: <40E170F3.9040504@visarc.com>

Hi Lars,

I believe that what you need to do is take your colorpict modifier and 
apply it to a material such as a plastic that uses the reflectance of 
your material sample as the rgb parameters. I believe that you DO want 
to use macbethcal to callibrate the color values of the image and 
determine an estimated reflectance. Then using normpat on the image will 
move the values in image so the average is 1.0.

So steps as follows:

   1. acquire sample material image by photography, scan....
   2. callibrate sample image with macbethcal
   3. use callibrated sample image to estimate average color
   4. calculate reflectance based on average color values, grey(r,g,b)
   5. normpat the callibrated image

Then create material as follows:

void colorpict color.image.pattern
7 red green blue <normpat picture>.pic picture.cal Px Py
0
1 <aspect>

color.image.pattern plastic color.image.material
0
0
5 <grey(r,g,b)> <grey(r,g,b)> <grey(r,g,b)> <s> <r>

Since the colorpict is normalized to an average value of one, it will 
modify the plastic around the reflectance of the plastic. For example, 
if colorpict returns 1.1 for red then the red of the plastic will be 10% 
brighter.

In short I think that there are two main ways to use colorpict

   1. final reflectance set by colorpict image - colorpict is used to
      set final reflectance of material, that is use callibrated image
      colorpict modifier and material with reflectance of  1.0
   2. final reflectance set by base material - colorpict is used to
      modify reflectance set by material, that is normpat image
      colorpict modifier is used to modify reflectance set by material

I hope this is helpful.

Regards,

-Jack

Lars O. Grobe wrote:

> Hi,
>
> sorry, so again, I try to be clear in asking this time ;-) By the way, 
> have nice holidays (I hope that's the reason for your travel ;-)!
>
> All is about the question how to map pictures onto a surface without 
> corrupting its material properties. I understand that colorpict 
> multiplies the material color components with those of the picture.
>
> If I have a grayscale image processed by normpat (which means that the 
> average gray value is 1.0) and apply it to a material, the overall 
> color and brightness will remain the same. So I get the "pattern" from 
> the image, but the surface still has the correct material properties 
> (color, brightness etc). I used this so far.
>
> Now I want to use a colored picture for mapping. I also apply normpat 
> to it, so, as far as I understand, the average of all R, G and B must 
> be 1.0, right? For example, I use a normpat'ed picture of green 
> marble. I than apply this using colorpict to a surface, which has a 
> "marble" material. Will the overall color and brightness still be that 
> of the defined material, as the picture map has the average of 1.0?
>
> The background: I try to use exact data for material definitions, but 
> the image maps can't all be color corrected. So I want the overall 
> color and brightness from defined materials, e.g. from the plastic 
> material, and use the map only for what I would call "local color 
> variation". The reason is that I have e.g. red marble, got its color, 
> brightness and all that defined as plastic marble. But the marble has 
> blue particles which won't appear if I use a grayscale imagemap. So I 
> want to use a normpat'ed (NOT colorcorrected e.g. by macbethcal!) to 
> bring these blue parts onto the surface. The whole surface however 
> must still have the average color of my plastic marble material.
>
> If I understand the man-page of normpat, that's just what it was 
> invented for. However, I am a bit unsure, as all Radiance 
> documentation uses colorpict with a bright white material.
>
> TIA+CU, Lars.
> -- 
> Lars O. Grobe
> grobe@gmx.net
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>

-- 
#	John E. de Valpine
#	president
#
#	visarc incorporated
#	http://www.visarc.com
#
#	channeling technology for superior design and construction

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20040629/db72607e/attachment.htm
From anthony.farrell at dit.ie  Wed Jun 30 13:42:55 2004
From: anthony.farrell at dit.ie (Anthony J. Farrell)
Date: Wed Jun 30 13:40:41 2004
Subject: [Radiance-general] RE: 60Watt bulb luminaries data
In-Reply-To: <01LBWMFDIDZC91FQIR@mail.dit.ie>
Message-ID: <OJEGILOIGGNAEAODNHIIEEHBCDAA.anthony.farrell@dit.ie>

I am currently carrying out basic validation techniques of the Radiance
software using a black box and standard 60Watt bulb therein.

I cannot locate a standard incandescent 60W bulb (just bare hung from
ceiling, no lamp shade) on the desktop radiance program.

Can anyone help me by way of an add on file for a standard light bulb (even
if not 60W!) or refer me to a suitable IESNA file?

Kind regards

Anthony

-----Original Message-----
From: radiance-general-bounces@radiance-online.org
[mailto:radiance-general-bounces@radiance-online.org]On Behalf Of
radiance-general-request@radiance-online.org
Sent: 30 June 2004 10:59
To: radiance-general@radiance-online.org
Subject: Radiance-general Digest, Vol 4, Issue 25


Send Radiance-general mailing list submissions to
	radiance-general@radiance-online.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://www.radiance-online.org/mailman/listinfo/radiance-general
or, via email, send a message with subject or body 'help' to
	radiance-general-request@radiance-online.org

You can reach the person managing the list at
	radiance-general-owner@radiance-online.org

When replying, please edit your Subject line so it is more specific
than "Re: Contents of Radiance-general digest..."


Today's Topics:

   1. Re: Illuminance calculation on a virtual surface? (gward@lmi.net)
   2. Re: colorpict and materials (Lars O. Grobe)
   3. Re: colorpict and materials (Jack de Valpine)


----------------------------------------------------------------------

Message: 1
Date: Tue, 29 Jun 2004 04:18:48 -0700
From: gward@lmi.net
Subject: Re: [Radiance-general] Illuminance calculation on a virtual
	surface?
To: rpg@rumblestrip.org,	Radiance general discussion
	<radiance-general@radiance-online.org>
Message-ID: <1088507928.40e1501822b7c@webmail.lmi.net>
Content-Type: text/plain; charset=ISO-8859-1

OK, Rob -- you got me.  Your little trick would work.  I don't think he
really needs it, though, since he already has a method for generating
the grid points for rtrace.  He can simply increase the resolution of
the grid he already has (as Raphael suggested) and/or upsample the
result using pfilt.  Or your method.  All will work.

-Greg

Quoting Rob Guglielmetti <rpg@rumblestrip.org>:

> Hi Greg, Hi John,
>
> Greg Ward wrote:
>
> > No good.  Trans gets ignored by the rpict -i option.  Just use pfilt to
> > scale the illuminance map if it's not big enough.  (John M's suggestion
> > -- he's sitting next to me in Leicester.)
>
> Oh yeah?  =8-p
>
> vwrays -x XRES -y YRES -vf viewfile -fd | rtrace -h -fd -opn octree \
> | rtrace -fdc -I render_options -x XRES -y YRES octree > illum_picture.pic
>
> Greg, does this look familiar?  A little ditty from a year or so ago?
> You sent me this tip when I asked you how to get illuminance on a
> building's curtain wall.  The first rtrace computes the intersection
> point (which is fast) and the second rtrace does the illuminance
> calculation.  Cool, yes?  Yes.
>
> Now, given this little tip, could he use trans as I described?
>



------------------------------

Message: 2
Date: Tue, 29 Jun 2004 14:34:03 +0300
From: Lars O. Grobe <grobe@gmx.net>
Subject: Re: [Radiance-general] colorpict and materials
To: Radiance general discussion <radiance-general@radiance-online.org>
Message-ID: <38C05080-C9C0-11D8-ACAF-000A959DDB22@gmx.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed

Hi,

sorry, so again, I try to be clear in asking this time ;-) By the way,
have nice holidays (I hope that's the reason for your travel ;-)!

All is about the question how to map pictures onto a surface without
corrupting its material properties. I understand that colorpict
multiplies the material color components with those of the picture.

If I have a grayscale image processed by normpat (which means that the
average gray value is 1.0) and apply it to a material, the overall
color and brightness will remain the same. So I get the "pattern" from
the image, but the surface still has the correct material properties
(color, brightness etc). I used this so far.

Now I want to use a colored picture for mapping. I also apply normpat
to it, so, as far as I understand, the average of all R, G and B must
be 1.0, right? For example, I use a normpat'ed picture of green marble.
I than apply this using colorpict to a surface, which has a "marble"
material. Will the overall color and brightness still be that of the
defined material, as the picture map has the average of 1.0?

The background: I try to use exact data for material definitions, but
the image maps can't all be color corrected. So I want the overall
color and brightness from defined materials, e.g. from the plastic
material, and use the map only for what I would call "local color
variation". The reason is that I have e.g. red marble, got its color,
brightness and all that defined as plastic marble. But the marble has
blue particles which won't appear if I use a grayscale imagemap. So I
want to use a normpat'ed (NOT colorcorrected e.g. by macbethcal!) to
bring these blue parts onto the surface. The whole surface however must
still have the average color of my plastic marble material.

If I understand the man-page of normpat, that's just what it was
invented for. However, I am a bit unsure, as all Radiance documentation
uses colorpict with a bright white material.

TIA+CU, Lars.
--
Lars O. Grobe
grobe@gmx.net




------------------------------

Message: 3
Date: Tue, 29 Jun 2004 09:38:59 -0400
From: Jack de Valpine <jedev@visarc.com>
Subject: Re: [Radiance-general] colorpict and materials
To: Radiance general discussion <radiance-general@radiance-online.org>
Message-ID: <40E170F3.9040504@visarc.com>
Content-Type: text/plain; charset="us-ascii"

Hi Lars,

I believe that what you need to do is take your colorpict modifier and
apply it to a material such as a plastic that uses the reflectance of
your material sample as the rgb parameters. I believe that you DO want
to use macbethcal to callibrate the color values of the image and
determine an estimated reflectance. Then using normpat on the image will
move the values in image so the average is 1.0.

So steps as follows:

   1. acquire sample material image by photography, scan....
   2. callibrate sample image with macbethcal
   3. use callibrated sample image to estimate average color
   4. calculate reflectance based on average color values, grey(r,g,b)
   5. normpat the callibrated image

Then create material as follows:

void colorpict color.image.pattern
7 red green blue <normpat picture>.pic picture.cal Px Py
0
1 <aspect>

color.image.pattern plastic color.image.material
0
0
5 <grey(r,g,b)> <grey(r,g,b)> <grey(r,g,b)> <s> <r>

Since the colorpict is normalized to an average value of one, it will
modify the plastic around the reflectance of the plastic. For example,
if colorpict returns 1.1 for red then the red of the plastic will be 10%
brighter.

In short I think that there are two main ways to use colorpict

   1. final reflectance set by colorpict image - colorpict is used to
      set final reflectance of material, that is use callibrated image
      colorpict modifier and material with reflectance of  1.0
   2. final reflectance set by base material - colorpict is used to
      modify reflectance set by material, that is normpat image
      colorpict modifier is used to modify reflectance set by material

I hope this is helpful.

Regards,

-Jack

Lars O. Grobe wrote:

> Hi,
>
> sorry, so again, I try to be clear in asking this time ;-) By the way,
> have nice holidays (I hope that's the reason for your travel ;-)!
>
> All is about the question how to map pictures onto a surface without
> corrupting its material properties. I understand that colorpict
> multiplies the material color components with those of the picture.
>
> If I have a grayscale image processed by normpat (which means that the
> average gray value is 1.0) and apply it to a material, the overall
> color and brightness will remain the same. So I get the "pattern" from
> the image, but the surface still has the correct material properties
> (color, brightness etc). I used this so far.
>
> Now I want to use a colored picture for mapping. I also apply normpat
> to it, so, as far as I understand, the average of all R, G and B must
> be 1.0, right? For example, I use a normpat'ed picture of green
> marble. I than apply this using colorpict to a surface, which has a
> "marble" material. Will the overall color and brightness still be that
> of the defined material, as the picture map has the average of 1.0?
>
> The background: I try to use exact data for material definitions, but
> the image maps can't all be color corrected. So I want the overall
> color and brightness from defined materials, e.g. from the plastic
> material, and use the map only for what I would call "local color
> variation". The reason is that I have e.g. red marble, got its color,
> brightness and all that defined as plastic marble. But the marble has
> blue particles which won't appear if I use a grayscale imagemap. So I
> want to use a normpat'ed (NOT colorcorrected e.g. by macbethcal!) to
> bring these blue parts onto the surface. The whole surface however
> must still have the average color of my plastic marble material.
>
> If I understand the man-page of normpat, that's just what it was
> invented for. However, I am a bit unsure, as all Radiance
> documentation uses colorpict with a bright white material.
>
> TIA+CU, Lars.
> --
> Lars O. Grobe
> grobe@gmx.net
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>

--
#	John E. de Valpine
#	president
#
#	visarc incorporated
#	http://www.visarc.com
#
#	channeling technology for superior design and construction

-------------- next part --------------
An HTML attachment was scrubbed...
URL:
http://radiance-online.org/pipermail/radiance-general/attachments/20040629/d
b72607e/attachment.html

------------------------------

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general


End of Radiance-general Digest, Vol 4, Issue 25
***********************************************

--
This message has been scanned for content and
viruses by the DIT Information Services MailScanner
Service, and is believed to be clean.
http://www.dit.ie


-- 
This message has been scanned for content and 
viruses by the DIT Information Services MailScanner 
Service, and is believed to be clean.
http://www.dit.ie


From jm at dmu.ac.uk  Wed Jun 30 15:32:15 2004
From: jm at dmu.ac.uk (John Mardaljevic)
Date: Wed Jun 30 15:32:28 2004
Subject: [Radiance-general] RE: 60Watt bulb luminaries data
Message-ID: <E1BffCB-0007OY-00@saturn.dmu.ac.uk>

Anthony,

Wait a moment whilst the spots before my eyes subside.  Ah, that's better.

> I am currently carrying out basic validation techniques of the Radiance
> software using a black box and standard 60Watt bulb therein.
> 
> I cannot locate a standard incandescent 60W bulb (just bare hung from
> ceiling, no lamp shade) on the desktop radiance program.
> 
> Can anyone help me by way of an add on file for a standard light bulb (even
> if not 60W!) or refer me to a suitable IESNA file?

The results you get are likely to depend on the size of the box
and the type of lamp, not to mention a few other factors.

You could model the bulb as a luminous sphere.  But you'd have to know
what the luminance of the bulb was.  Also, a sphere light source is not 
subdivided, i.e. it is sampled by a single ray (p511 RwR).  Which may
cause problems if the box is small compared to the bulb.  A 'frosted'
or pearl bulb may have a largely isotropic luminous output, provided you
don't see too much of the (luminous) shank where it connects to the
socket.  Any measured output distribution (say, IENSA) would, I guess,
be sensitive to the type of lamp.  And it would assume a 'point source'
distribution, even though you would model it as, say, a disc or polygon.

Squinting at my desk lamp through a pinched-finger aperture (hence the
spots) revealed that the uniform luminance of the pearl bulb was an
illusion - much of the output of the bulb is from around the filament.

In sort, I suspect that any comparison between measurement and predictions
for your bulb & box will say much about the precision of the photometry, 
maybe a little bit about the limitations of single ray light source sampling,
and not much at all about the intrinsic accuracy of Radiance for realistic
architectural scenarios (electric or daylighting).  The direct light source
calculation for small angular light sources (e.g. 'spherical' bulb from
several feet away with no occlusion) is pretty much a 'no brainer' and 
Radiance will give a result that is near as dammit to the exact solution.
When you get close up to a non-ideal bulb however, then it's a matter of
getting the photometry right. 

-John

-----------------------------------------------
Dr. John Mardaljevic                     
Senior Research Fellow
Institute of Energy and Sustainable Development
De Montfort University
The Gateway
Leicester
LE1 9BH, UK
+44 (0) 116 257 7972   
+44 (0) 116 257 7981 (fax)

jm@dmu.ac.uk   
http://www.iesd.dmu.ac.uk/~jm


From MMoeck at engr.psu.edu  Wed Jun 30 18:07:27 2004
From: MMoeck at engr.psu.edu (Martin Moeck)
Date: Wed Jun 30 18:07:44 2004
Subject: [Radiance-general] RE: 60Watt bulb luminaries data
Message-ID: <84F05BA9118BBD4A8FC6409808CE266C113AE1@ENGRMAIL2.engr.psu.edu>

Anthony, 
 
You can download an IES photometric file for a PAR 60W incandescent narrow flood from Osram Sylvania at
 
www.personal.psu.edu/mum13/60PAR30.CAP.NFL25.ies <http://www.personal.psu.edu/mum13/60PAR30.CAP.NFL25.ies> 
 
Use  "ies2rad 60PAR30.CAP.NFL25.ies"
 
This will create the file "60PAR30.CAP.NFL25.rad" in metric units (meters). 
 
I never saw photometric files for simple incandescent lamps. 
 
I am currently running a fairly accurate simulation in AGI32 V1.7, which will complete in 3 hours for a simple empty box 3X3X3 meters and one PAR lamp. 
 
Martin Moeck, Penn State
 
 

	-----Original Message----- 
	From: Anthony J. Farrell [mailto:anthony.farrell@dit.ie] 
	Sent: Wed 6/30/2004 7:42 AM 
	To: radiance-general@radiance-online.org 
	Cc: 
	Subject: [Radiance-general] RE: 60Watt bulb luminaries data
	
	

	I am currently carrying out basic validation techniques of the Radiance
	software using a black box and standard 60Watt bulb therein.
	
	I cannot locate a standard incandescent 60W bulb (just bare hung from
	ceiling, no lamp shade) on the desktop radiance program.
	
	Can anyone help me by way of an add on file for a standard light bulb (even
	if not 60W!) or refer me to a suitable IESNA file?
	
	Kind regards
	
	Anthony
	
	

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 5190 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20040630/051f97e3/attachment.bin
From grobe at gmx.net  Wed Jun 30 19:06:58 2004
From: grobe at gmx.net (Lars O. Grobe)
Date: Wed Jun 30 19:06:53 2004
Subject: [Radiance-general] colorpict and materials
In-Reply-To: <40E170F3.9040504@visarc.com>
Message-ID: <E5788A0C-CAB7-11D8-9111-000A959DDB22@gmx.net>

Hi Jack,

thank You for the reply.

> 2.	final reflectance set by base material - colorpict is used to 
> modify reflectance set by material, that is normpat image colorpict 
> modifier is used to modify reflectance set by material

I want to do this, I have the material values, the colorpict is just to 
add some visual credibility ;-) But I also want to have the final 
overall (that means the average over the whole surface, like selecting 
an area in ximage vs. a point) color from the base material.

> So steps as follows:
>
> 1.	acquire sample material image by photography, scan....
> 2.	callibrate sample image with macbethcal
> 3.	use callibrated sample image to estimate average color
> 4.	calculate reflectance based on average color values, grey(r,g,b)
> 5.	normpat the callibrated image

So, if I already have the rgb for the base material (which is plastic), 
do I really have to calibrate (macbethcal) the picture map?

Maybe I show you an example:
--
# porphyry red 1: values from ximage and macbethcal'ed pic
void plastic porphyry_red_1
0
0
5 .09 .06 .05 .02 0

# non-calibrated normpat'ed pic
void colorpict sophia_porphyry_red_1_pattern
13 noop noop noop sophia_porphyry_red_1.pic picture.cal tile_u tile_v 
-s .2 -rx 90 -rz 90
0
0

# give alias the modifier as output from dxf2rad
sophia_porphyry_red_1_pattern alias l_porphyry_red_1 porphyry_red_1
--
Will this be correct?

TIA, CU Lars.
--
Lars O. Grobe
grobe@gmx.net


From anthony.farrell at dit.ie  Wed Jun 30 20:46:50 2004
From: anthony.farrell at dit.ie (Anthony J. Farrell)
Date: Wed Jun 30 20:44:22 2004
Subject: [Radiance-general] RE: 60Watt bulb comparison
In-Reply-To: <01LBX1ATVUQK91JIBT@mail.dit.ie>
Message-ID: <OJEGILOIGGNAEAODNHIIGEHDCDAA.anthony.farrell@dit.ie>

John

Thanks for the useful info.

I had to construct a small black box (0.5 cube) for calibrating electronic
sensors I am currently using to monitor a full scale light pipe
installation, which in turn will be compared with a Radiance model thereof.

Furthermore, Recent research (Maamari et al. 2003) shows that a cube dark
box with an
opening central to one of the walls is most appropriate for simulation
modelling
comparison because reflectance values are minimal and easily measured, and
modelling complexities and associated anomalies are minimised. Conventional
modelling architectural black/white card display board. The reflectance
value for black mounting board was measured by Cannon-Brookes (1996) and is
quoted at 8.5%. A standard 60W incandescent light bulb was also fitted to
the dark box to fit into the recessed aperture, and was made removable for
daylight monitoring whereby the recessed aperture acted as a window or sky
light (without glass). I take your points though, that scale will influence
the final results, and in absence of good data for the GE 60W standard light
bulb I am using, its not good scientific comparison.

Anyway, I am more interested in the accuracy of the program with respect to
*daylight* rather than electric lighting. To date, I can only locate your
own work to the accuracy of the Radiance accuracy with daylight (as in the
RwR manual)...

Just on this point....does anyone know of any other references that have
compared daylight measurements with Radiance? would be great to include them
in my literature review.

It would be nice to model this simple box I have constructed in two
positions = recessed roof light, and recessed side window, facing each
orientation on overcast and sunny days. I could then create the model of the
box to scale (1=1) in Radiance and compare results with monitored values on
the roof of the campus building here in Dublin. What do you think about
this? or can you suggest some ways of enhancing the tests?

Kind Regards,


Anthony
Dublin Institute of Technology



-----Original Message-----
From: radiance-general-bounces@radiance-online.org
[mailto:radiance-general-bounces@radiance-online.org]On Behalf Of
radiance-general-request@radiance-online.org
Sent: 30 June 2004 18:05
To: radiance-general@radiance-online.org
Subject: Radiance-general Digest, Vol 4, Issue 26


Send Radiance-general mailing list submissions to
	radiance-general@radiance-online.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://www.radiance-online.org/mailman/listinfo/radiance-general
or, via email, send a message with subject or body 'help' to
	radiance-general-request@radiance-online.org

You can reach the person managing the list at
	radiance-general-owner@radiance-online.org

When replying, please edit your Subject line so it is more specific
than "Re: Contents of Radiance-general digest..."


Today's Topics:

   1. RE: 60Watt bulb luminaries data (Anthony J. Farrell)
   2. RE: 60Watt bulb luminaries data (John Mardaljevic)
   3. RE: 60Watt bulb luminaries data (Martin Moeck)
   4. Re: colorpict and materials (Lars O. Grobe)


----------------------------------------------------------------------

Message: 1
Date: Wed, 30 Jun 2004 12:42:55 +0100
From: "Anthony J. Farrell" <anthony.farrell@dit.ie>
Subject: [Radiance-general] RE: 60Watt bulb luminaries data
To: radiance-general@radiance-online.org
Message-ID: <OJEGILOIGGNAEAODNHIIEEHBCDAA.anthony.farrell@dit.ie>
Content-Type: text/plain; charset=us-ascii

I am currently carrying out basic validation techniques of the Radiance
software using a black box and standard 60Watt bulb therein.

I cannot locate a standard incandescent 60W bulb (just bare hung from
ceiling, no lamp shade) on the desktop radiance program.

Can anyone help me by way of an add on file for a standard light bulb (even
if not 60W!) or refer me to a suitable IESNA file?

Kind regards

Anthony

-----Original Message-----
From: radiance-general-bounces@radiance-online.org
[mailto:radiance-general-bounces@radiance-online.org]On Behalf Of
radiance-general-request@radiance-online.org
Sent: 30 June 2004 10:59
To: radiance-general@radiance-online.org
Subject: Radiance-general Digest, Vol 4, Issue 25


Send Radiance-general mailing list submissions to
	radiance-general@radiance-online.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://www.radiance-online.org/mailman/listinfo/radiance-general
or, via email, send a message with subject or body 'help' to
	radiance-general-request@radiance-online.org

You can reach the person managing the list at
	radiance-general-owner@radiance-online.org

When replying, please edit your Subject line so it is more specific
than "Re: Contents of Radiance-general digest..."


Today's Topics:

   1. Re: Illuminance calculation on a virtual surface? (gward@lmi.net)
   2. Re: colorpict and materials (Lars O. Grobe)
   3. Re: colorpict and materials (Jack de Valpine)


----------------------------------------------------------------------

Message: 1
Date: Tue, 29 Jun 2004 04:18:48 -0700
From: gward@lmi.net
Subject: Re: [Radiance-general] Illuminance calculation on a virtual
	surface?
To: rpg@rumblestrip.org,	Radiance general discussion
	<radiance-general@radiance-online.org>
Message-ID: <1088507928.40e1501822b7c@webmail.lmi.net>
Content-Type: text/plain; charset=ISO-8859-1

OK, Rob -- you got me.  Your little trick would work.  I don't think he
really needs it, though, since he already has a method for generating
the grid points for rtrace.  He can simply increase the resolution of
the grid he already has (as Raphael suggested) and/or upsample the
result using pfilt.  Or your method.  All will work.

-Greg

Quoting Rob Guglielmetti <rpg@rumblestrip.org>:

> Hi Greg, Hi John,
>
> Greg Ward wrote:
>
> > No good.  Trans gets ignored by the rpict -i option.  Just use pfilt to
> > scale the illuminance map if it's not big enough.  (John M's suggestion
> > -- he's sitting next to me in Leicester.)
>
> Oh yeah?  =8-p
>
> vwrays -x XRES -y YRES -vf viewfile -fd | rtrace -h -fd -opn octree \
> | rtrace -fdc -I render_options -x XRES -y YRES octree > illum_picture.pic
>
> Greg, does this look familiar?  A little ditty from a year or so ago?
> You sent me this tip when I asked you how to get illuminance on a
> building's curtain wall.  The first rtrace computes the intersection
> point (which is fast) and the second rtrace does the illuminance
> calculation.  Cool, yes?  Yes.
>
> Now, given this little tip, could he use trans as I described?
>



------------------------------

Message: 2
Date: Tue, 29 Jun 2004 14:34:03 +0300
From: Lars O. Grobe <grobe@gmx.net>
Subject: Re: [Radiance-general] colorpict and materials
To: Radiance general discussion <radiance-general@radiance-online.org>
Message-ID: <38C05080-C9C0-11D8-ACAF-000A959DDB22@gmx.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed

Hi,

sorry, so again, I try to be clear in asking this time ;-) By the way,
have nice holidays (I hope that's the reason for your travel ;-)!

All is about the question how to map pictures onto a surface without
corrupting its material properties. I understand that colorpict
multiplies the material color components with those of the picture.

If I have a grayscale image processed by normpat (which means that the
average gray value is 1.0) and apply it to a material, the overall
color and brightness will remain the same. So I get the "pattern" from
the image, but the surface still has the correct material properties
(color, brightness etc). I used this so far.

Now I want to use a colored picture for mapping. I also apply normpat
to it, so, as far as I understand, the average of all R, G and B must
be 1.0, right? For example, I use a normpat'ed picture of green marble.
I than apply this using colorpict to a surface, which has a "marble"
material. Will the overall color and brightness still be that of the
defined material, as the picture map has the average of 1.0?

The background: I try to use exact data for material definitions, but
the image maps can't all be color corrected. So I want the overall
color and brightness from defined materials, e.g. from the plastic
material, and use the map only for what I would call "local color
variation". The reason is that I have e.g. red marble, got its color,
brightness and all that defined as plastic marble. But the marble has
blue particles which won't appear if I use a grayscale imagemap. So I
want to use a normpat'ed (NOT colorcorrected e.g. by macbethcal!) to
bring these blue parts onto the surface. The whole surface however must
still have the average color of my plastic marble material.

If I understand the man-page of normpat, that's just what it was
invented for. However, I am a bit unsure, as all Radiance documentation
uses colorpict with a bright white material.

TIA+CU, Lars.
--
Lars O. Grobe
grobe@gmx.net




------------------------------

Message: 3
Date: Tue, 29 Jun 2004 09:38:59 -0400
From: Jack de Valpine <jedev@visarc.com>
Subject: Re: [Radiance-general] colorpict and materials
To: Radiance general discussion <radiance-general@radiance-online.org>
Message-ID: <40E170F3.9040504@visarc.com>
Content-Type: text/plain; charset="us-ascii"

Hi Lars,

I believe that what you need to do is take your colorpict modifier and
apply it to a material such as a plastic that uses the reflectance of
your material sample as the rgb parameters. I believe that you DO want
to use macbethcal to callibrate the color values of the image and
determine an estimated reflectance. Then using normpat on the image will
move the values in image so the average is 1.0.

So steps as follows:

   1. acquire sample material image by photography, scan....
   2. callibrate sample image with macbethcal
   3. use callibrated sample image to estimate average color
   4. calculate reflectance based on average color values, grey(r,g,b)
   5. normpat the callibrated image

Then create material as follows:

void colorpict color.image.pattern
7 red green blue <normpat picture>.pic picture.cal Px Py
0
1 <aspect>

color.image.pattern plastic color.image.material
0
0
5 <grey(r,g,b)> <grey(r,g,b)> <grey(r,g,b)> <s> <r>

Since the colorpict is normalized to an average value of one, it will
modify the plastic around the reflectance of the plastic. For example,
if colorpict returns 1.1 for red then the red of the plastic will be 10%
brighter.

In short I think that there are two main ways to use colorpict

   1. final reflectance set by colorpict image - colorpict is used to
      set final reflectance of material, that is use callibrated image
      colorpict modifier and material with reflectance of  1.0
   2. final reflectance set by base material - colorpict is used to
      modify reflectance set by material, that is normpat image
      colorpict modifier is used to modify reflectance set by material

I hope this is helpful.

Regards,

-Jack

Lars O. Grobe wrote:

> Hi,
>
> sorry, so again, I try to be clear in asking this time ;-) By the way,
> have nice holidays (I hope that's the reason for your travel ;-)!
>
> All is about the question how to map pictures onto a surface without
> corrupting its material properties. I understand that colorpict
> multiplies the material color components with those of the picture.
>
> If I have a grayscale image processed by normpat (which means that the
> average gray value is 1.0) and apply it to a material, the overall
> color and brightness will remain the same. So I get the "pattern" from
> the image, but the surface still has the correct material properties
> (color, brightness etc). I used this so far.
>
> Now I want to use a colored picture for mapping. I also apply normpat
> to it, so, as far as I understand, the average of all R, G and B must
> be 1.0, right? For example, I use a normpat'ed picture of green
> marble. I than apply this using colorpict to a surface, which has a
> "marble" material. Will the overall color and brightness still be that
> of the defined material, as the picture map has the average of 1.0?
>
> The background: I try to use exact data for material definitions, but
> the image maps can't all be color corrected. So I want the overall
> color and brightness from defined materials, e.g. from the plastic
> material, and use the map only for what I would call "local color
> variation". The reason is that I have e.g. red marble, got its color,
> brightness and all that defined as plastic marble. But the marble has
> blue particles which won't appear if I use a grayscale imagemap. So I
> want to use a normpat'ed (NOT colorcorrected e.g. by macbethcal!) to
> bring these blue parts onto the surface. The whole surface however
> must still have the average color of my plastic marble material.
>
> If I understand the man-page of normpat, that's just what it was
> invented for. However, I am a bit unsure, as all Radiance
> documentation uses colorpict with a bright white material.
>
> TIA+CU, Lars.
> --
> Lars O. Grobe
> grobe@gmx.net
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>

--
#	John E. de Valpine
#	president
#
#	visarc incorporated
#	http://www.visarc.com
#
#	channeling technology for superior design and construction

-------------- next part --------------
An HTML attachment was scrubbed...
URL:
http://radiance-online.org/pipermail/radiance-general/attachments/20040629/d
b72607e/attachment.html

------------------------------

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general


End of Radiance-general Digest, Vol 4, Issue 25
***********************************************

--
This message has been scanned for content and
viruses by the DIT Information Services MailScanner
Service, and is believed to be clean.
http://www.dit.ie


--
This message has been scanned for content and
viruses by the DIT Information Services MailScanner
Service, and is believed to be clean.
http://www.dit.ie




------------------------------

Message: 2
Date: Wed, 30 Jun 2004 14:32:15 +0100 (BST)
From: John Mardaljevic <jm@dmu.ac.uk>
Subject: [Radiance-general] RE: 60Watt bulb luminaries data
To: radiance-general@radiance-online.org
Message-ID: <E1BffCB-0007OY-00@saturn.dmu.ac.uk>
Content-Type: TEXT/plain; charset=us-ascii

Anthony,

Wait a moment whilst the spots before my eyes subside.  Ah, that's better.

> I am currently carrying out basic validation techniques of the Radiance
> software using a black box and standard 60Watt bulb therein.
>
> I cannot locate a standard incandescent 60W bulb (just bare hung from
> ceiling, no lamp shade) on the desktop radiance program.
>
> Can anyone help me by way of an add on file for a standard light bulb
(even
> if not 60W!) or refer me to a suitable IESNA file?

The results you get are likely to depend on the size of the box
and the type of lamp, not to mention a few other factors.

You could model the bulb as a luminous sphere.  But you'd have to know
what the luminance of the bulb was.  Also, a sphere light source is not
subdivided, i.e. it is sampled by a single ray (p511 RwR).  Which may
cause problems if the box is small compared to the bulb.  A 'frosted'
or pearl bulb may have a largely isotropic luminous output, provided you
don't see too much of the (luminous) shank where it connects to the
socket.  Any measured output distribution (say, IENSA) would, I guess,
be sensitive to the type of lamp.  And it would assume a 'point source'
distribution, even though you would model it as, say, a disc or polygon.

Squinting at my desk lamp through a pinched-finger aperture (hence the
spots) revealed that the uniform luminance of the pearl bulb was an
illusion - much of the output of the bulb is from around the filament.

In sort, I suspect that any comparison between measurement and predictions
for your bulb & box will say much about the precision of the photometry,
maybe a little bit about the limitations of single ray light source
sampling,
and not much at all about the intrinsic accuracy of Radiance for realistic
architectural scenarios (electric or daylighting).  The direct light source
calculation for small angular light sources (e.g. 'spherical' bulb from
several feet away with no occlusion) is pretty much a 'no brainer' and
Radiance will give a result that is near as dammit to the exact solution.
When you get close up to a non-ideal bulb however, then it's a matter of
getting the photometry right.

-John

-----------------------------------------------
Dr. John Mardaljevic
Senior Research Fellow
Institute of Energy and Sustainable Development
De Montfort University
The Gateway
Leicester
LE1 9BH, UK
+44 (0) 116 257 7972
+44 (0) 116 257 7981 (fax)

jm@dmu.ac.uk
http://www.iesd.dmu.ac.uk/~jm




------------------------------

Message: 3
Date: Wed, 30 Jun 2004 12:07:27 -0400
From: "Martin Moeck" <MMoeck@engr.psu.edu>
Subject: [Radiance-general] RE: 60Watt bulb luminaries data
To: "Radiance general discussion"
	<radiance-general@radiance-online.org>
Message-ID:
	<84F05BA9118BBD4A8FC6409808CE266C113AE1@ENGRMAIL2.engr.psu.edu>
Content-Type: text/plain; charset="utf-8"

Anthony,

You can download an IES photometric file for a PAR 60W incandescent narrow
flood from Osram Sylvania at

www.personal.psu.edu/mum13/60PAR30.CAP.NFL25.ies
<http://www.personal.psu.edu/mum13/60PAR30.CAP.NFL25.ies>

Use  "ies2rad 60PAR30.CAP.NFL25.ies"

This will create the file "60PAR30.CAP.NFL25.rad" in metric units (meters).

I never saw photometric files for simple incandescent lamps.

I am currently running a fairly accurate simulation in AGI32 V1.7, which
will complete in 3 hours for a simple empty box 3X3X3 meters and one PAR
lamp.

Martin Moeck, Penn State



	-----Original Message-----
	From: Anthony J. Farrell [mailto:anthony.farrell@dit.ie]
	Sent: Wed 6/30/2004 7:42 AM
	To: radiance-general@radiance-online.org
	Cc:
	Subject: [Radiance-general] RE: 60Watt bulb luminaries data



	I am currently carrying out basic validation techniques of the Radiance
	software using a black box and standard 60Watt bulb therein.

	I cannot locate a standard incandescent 60W bulb (just bare hung from
	ceiling, no lamp shade) on the desktop radiance program.

	Can anyone help me by way of an add on file for a standard light bulb (even
	if not 60W!) or refer me to a suitable IESNA file?

	Kind regards

	Anthony



-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 5190 bytes
Desc: not available
Url :
http://radiance-online.org/pipermail/radiance-general/attachments/20040630/0
51f97e3/attachment-0001.bin

------------------------------

Message: 4
Date: Wed, 30 Jun 2004 20:06:58 +0300
From: Lars O. Grobe <grobe@gmx.net>
Subject: Re: [Radiance-general] colorpict and materials
To: Radiance general discussion <radiance-general@radiance-online.org>
Message-ID: <E5788A0C-CAB7-11D8-9111-000A959DDB22@gmx.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed

Hi Jack,

thank You for the reply.

> 2.	final reflectance set by base material - colorpict is used to
> modify reflectance set by material, that is normpat image colorpict
> modifier is used to modify reflectance set by material

I want to do this, I have the material values, the colorpict is just to
add some visual credibility ;-) But I also want to have the final
overall (that means the average over the whole surface, like selecting
an area in ximage vs. a point) color from the base material.

> So steps as follows:
>
> 1.	acquire sample material image by photography, scan....
> 2.	callibrate sample image with macbethcal
> 3.	use callibrated sample image to estimate average color
> 4.	calculate reflectance based on average color values, grey(r,g,b)
> 5.	normpat the callibrated image

So, if I already have the rgb for the base material (which is plastic),
do I really have to calibrate (macbethcal) the picture map?

Maybe I show you an example:
--
# porphyry red 1: values from ximage and macbethcal'ed pic
void plastic porphyry_red_1
0
0
5 .09 .06 .05 .02 0

# non-calibrated normpat'ed pic
void colorpict sophia_porphyry_red_1_pattern
13 noop noop noop sophia_porphyry_red_1.pic picture.cal tile_u tile_v
-s .2 -rx 90 -rz 90
0
0

# give alias the modifier as output from dxf2rad
sophia_porphyry_red_1_pattern alias l_porphyry_red_1 porphyry_red_1
--
Will this be correct?

TIA, CU Lars.
--
Lars O. Grobe
grobe@gmx.net




------------------------------

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general


End of Radiance-general Digest, Vol 4, Issue 26
***********************************************

--
This message has been scanned for content and
viruses by the DIT Information Services MailScanner
Service, and is believed to be clean.
http://www.dit.ie


-- 
This message has been scanned for content and 
viruses by the DIT Information Services MailScanner 
Service, and is believed to be clean.
http://www.dit.ie


From jedev at visarc.com  Wed Jun 30 23:21:57 2004
From: jedev at visarc.com (Jack de Valpine)
Date: Wed Jun 30 23:22:10 2004
Subject: [Radiance-general] colorpict and materials
In-Reply-To: <E5788A0C-CAB7-11D8-9111-000A959DDB22@gmx.net>
References: <E5788A0C-CAB7-11D8-9111-000A959DDB22@gmx.net>
Message-ID: <40E32EF5.2040600@visarc.com>

Hi Lars,

Here is what I understood as the problem from your first message:

> The background: I try to use exact data for material definitions, but 
> the image maps can't all be color corrected. So I want the overall 
> color and brightness from defined materials, e.g. from the plastic 
> material, and use the map only for what I would call "local color 
> variation". The reason is that I have e.g. red marble, got its color, 
> brightness and all that defined as plastic marble. But the marble has 
> blue particles which won't appear if I use a grayscale imagemap. So I 
> want to use a normpat'ed (NOT colorcorrected e.g. by macbethcal!) to 
> bring these blue parts onto the surface. The whole surface however 
> must still have the average color of my plastic marble material. 

You want to take an image of a material (that has multiple colors in the 
image) and map this to geometry in some calibrated manner. But the 
problem is how to do this with a material/image that has multiple colors 
in it, such as red marble with blue flecks. Because the image has 
multiple colors you do not want to use the average color of the material 
for the definition instead you want to use the photopic reflectance 
value. You want to let the colorpict convey the color information of the 
image and the plastic to govern the overall reflectance of the material. 
Thus you should calibrate (macbethcal) the material and normalize 
(normpat) it.

So I think that you example should be as follows:

# porphyry red 1: values from ximage and macbethcal'ed pic
# rgb  = .09 .06 .05
# photopic reflectance =  .0673 as determined with grey(.09,.06,.05)  in 
calc
void plastic porphyry_red_1_reflectance
0
0
5 .0673 .0673 .0673 .02 0

# calibrate the image with macbethcal to get the colors "corrected"
# normpat the image to make its average 1.0
# not sure about the use of noop?
void colorpict sophia_porphyry_red_1_pattern
13 red green blue sophia_porphyry_red_1.pic picture.cal tile_u tile_v -s 
.2 -rx 90 -rz 90
0
0

# apply the material
# give alias the modifier as output from dxf2rad
sophia_porphyry_red_1_pattern alias l_porphyry_red_1 porphyry_red_1

Thus you have a base material that is a grey plastic. The reflectance of 
this material is equal to the photopic reflectance of your sampled 
material. The rgb color properties are multiplied by the color picture 
supplied in colorpict. Since the picture is corrected the colors should 
have a stronger basis in reality (assuming the sampling method is 
correct). Since the picture is normalized to an average of 1.0, the 
multiplication  of the image by the plastic still equals the reflectance 
of the material. Since the base material is neutral (eg grey/white) the 
colors of the image pattern will be what you want.

I hope this is right and if not some one should jump in and correct me.

-Jack

Lars O. Grobe wrote:

> Hi Jack,
>
> thank You for the reply.
>
>> 2.    final reflectance set by base material - colorpict is used to 
>> modify reflectance set by material, that is normpat image colorpict 
>> modifier is used to modify reflectance set by material
>
>
> I want to do this, I have the material values, the colorpict is just 
> to add some visual credibility ;-) But I also want to have the final 
> overall (that means the average over the whole surface, like selecting 
> an area in ximage vs. a point) color from the base material.
>
>> So steps as follows:
>>
>> 1.    acquire sample material image by photography, scan....
>> 2.    callibrate sample image with macbethcal
>> 3.    use callibrated sample image to estimate average color
>> 4.    calculate reflectance based on average color values, grey(r,g,b)
>> 5.    normpat the callibrated image
>
>
> So, if I already have the rgb for the base material (which is 
> plastic), do I really have to calibrate (macbethcal) the picture map?
>
> Maybe I show you an example:
> -- 
> # porphyry red 1: values from ximage and macbethcal'ed pic
> void plastic porphyry_red_1
> 0
> 0
> 5 .09 .06 .05 .02 0
>
> # non-calibrated normpat'ed pic
> void colorpict sophia_porphyry_red_1_pattern
> 13 noop noop noop sophia_porphyry_red_1.pic picture.cal tile_u tile_v 
> -s .2 -rx 90 -rz 90
> 0
> 0
>
> # give alias the modifier as output from dxf2rad
> sophia_porphyry_red_1_pattern alias l_porphyry_red_1 porphyry_red_1
> -- 
> Will this be correct?
>
> TIA, CU Lars.
> -- 
> Lars O. Grobe
> grobe@gmx.net
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>

-- 
#	John E. de Valpine
#	president
#
#	visarc incorporated
#	http://www.visarc.com
#
#	channeling technology for superior design and construction




