From grobe at gmx.net  Fri Apr  1 12:33:54 2005
From: grobe at gmx.net (Lars O. Grobe)
Date: Fri Apr  1 12:34:26 2005
Subject: [Radiance-general] how to filter objects by modifier?
In-Reply-To: <26715.1112097767@www39.gmx.net>
References: <42491B9F.7070608@t-online.de> <26715.1112097767@www39.gmx.net>
Message-ID: <6c50e0066cb8c16c7450583a4f165ecd@gmx.net>

Hi!

I have written a little bash script that will filter radiance scene 
files by modifier. It has two modes, -i and -e (similar to rpict). -i 
<modifier> will write ONLY geometry modified by <modifier> to STDOUT, 
-e <modifier> will output everything but geometry modified by 
<modifier>. This is a rather simple script, using sed and awk, and as I 
am not very good in using the text utilities, there is certainly a lot 
of overhead. However, it is useable, and can be found here:

http://130.83.168.34/lars/rad/rad_filter.sh.gz

CU Lars.


From ian at testers.homelinux.net  Fri Apr  1 16:17:35 2005
From: ian at testers.homelinux.net (Ian Tester)
Date: Fri Apr  1 16:18:21 2005
Subject: [Radiance-general] how to filter objects by modifier?
In-Reply-To: <6c50e0066cb8c16c7450583a4f165ecd@gmx.net>
References: <42491B9F.7070608@t-online.de> <26715.1112097767@www39.gmx.net>
	<6c50e0066cb8c16c7450583a4f165ecd@gmx.net>
Message-ID: <424D57FF.1000707@testers.homelinux.net>

Here's my contribution to the Radiance community. It looked like you guys 
needed the help of a good Perl programmer :)

It's not heavily tested, I only threw it together in a few hours. I've put 
in little comments to help anyone trying to follow the code. I know that 
Perl has a bad reputation, but I try to make my perl code neat and consistent.
*sigh* back in the day I was actually paid to code perl...

I added the feature of "following" modifiers with the -s option. When this 
option is specified, non-surface primitives (i.e materials, textures, 
patterns, or mixtures) will be matched by their modifier and their id will 
be added to the list of modifiers that are being matched. Make sense? This 
will allow the user to specify the name of one modifier that is then 
"modified" by other materials, etc.

Anyway, let me know how it goes. I've probably screwed up somewhere.
bye
-------------- next part --------------
A non-text attachment was scrubbed...
Name: rad_filter.pl.gz
Type: application/x-gzip
Size: 1303 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20050402/d4ca8ca8/rad_filter.pl.bin
From ian at testers.homelinux.net  Sat Apr  2 08:17:34 2005
From: ian at testers.homelinux.net (Ian Tester)
Date: Sat Apr  2 08:18:07 2005
Subject: [Radiance-general] how to filter objects by modifier?
In-Reply-To: <424D57FF.1000707@testers.homelinux.net>
References: <42491B9F.7070608@t-online.de>
	<26715.1112097767@www39.gmx.net>	<6c50e0066cb8c16c7450583a4f165ecd@gmx.net>
	<424D57FF.1000707@testers.homelinux.net>
Message-ID: <424E38FE.8010305@testers.homelinux.net>

After a problem report from Lars, here's an updated version of the filter 
script. It wasn't handling the rare alias declaration. I've tested it 
against a few scene files in the standard distribution, both 
virtual/illumoff.rad and cabin/lvfurn.rad. The second one put a spanner in 
the works because it contained this:

alberta_image alias alberta_photo
         photo_paper

So there's extra logic to handle having the reference on the following 
line. How lenient is the Radiance parser with respect to newlines? Can 
regular primitives also contain newlines in odd places, or is it just with 
aliases?

e.g
white sphere
	ball	<== is this accepted as well??
0
0
4	0	0	0
	1

I really hope that isn't allowed. Otherwise my perl code will become really 
ugly... :(

bye
-------------- next part --------------
A non-text attachment was scrubbed...
Name: rad_filter.pl.gz
Type: application/x-gzip
Size: 1396 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20050402/55eb69d9/rad_filter.pl.bin
From grobe at gmx.net  Sat Apr  2 12:17:00 2005
From: grobe at gmx.net (Lars O. Grobe)
Date: Sat Apr  2 13:33:33 2005
Subject: [Radiance-dev] Re: [Radiance-general] how to filter objects by
	modifier?
In-Reply-To: <6c50e0066cb8c16c7450583a4f165ecd@gmx.net>
References: <42491B9F.7070608@t-online.de> <26715.1112097767@www39.gmx.net>
	<6c50e0066cb8c16c7450583a4f165ecd@gmx.net>
Message-ID: <782852f55ce9ce56738b3ea23a93ba05@gmx.net>

> However, it is useable, and can be found here:

Sorry, that was not true, it worked only with some files here, there is 
a bad bug. Don't use it, I will put a useable script to the url asap. 
Lars.


From despina_m81 at hotmail.com  Tue Apr  5 12:43:31 2005
From: despina_m81 at hotmail.com (Despina Michael)
Date: Tue Apr  5 12:44:40 2005
Subject: [Radiance-general] About angmap.cal
Message-ID: <BAY22-DAV1530023A63AB71AE9DB49F903C0@phx.gbl>





Hi Tarik,

This is an answer to your post about angmap.cal posted some weeks ago.

I am not absolutely sure but I guess 0.159154943 is just to map acos(Dz)/d to values between -0.5 and 0.5.
If you multiply 0.159154943 *PI= 0.5
PI is the greater value that acos(Dz)/d may be.

It does this in order to values of u and v range between 0 and 1.

Despina

------------------------------

Hi
Can anyone explain this statement in the angmap.cal file.
r = if(d,0.159154943*Acos(DDz)/d, 0);

Is the 0.159154943 value related to the focal length and field of view
parameters for Paul Debevec's light map .hdrs, so that if I want to map my own
light maps I must calculate the value of r using my camera parameters (well
simulated in Radiance vv and vh angles) ?

Thanks for any help

Tarik



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20050405/de1d6c96/attachment.htm
From Christoph.Reinhart at nrc-cnrc.gc.ca  Tue Apr  5 21:47:46 2005
From: Christoph.Reinhart at nrc-cnrc.gc.ca (Reinhart, Christoph)
Date: Tue Apr  5 21:48:16 2005
Subject: [Radiance-general] Radiance model water
Message-ID: <10C94843061E094A98C02EB77CFC328713582BF7@nrcmrdex1d.imsb.nrc.ca>

Dear colleagues,
 
One of my students wants to model a swimming pool in Radiance. She is looking for a Radiance material model for the water surface (something similar to what Jack de Valpine has done for the rendering on the Radiance online web site). Has anybody modeled water in the past and is willing to share the model with us? 
 
Christoph
Christoph Reinhart, Ph.D.                        
Associate Research Officer                      National Research Council Canada         Institute for Research in Construction
Adjunct Professor                                     McGill University                                     School of Architecture
1200 Montreal Road M-24, Ottawa          Ontario K1A 0R6 Canada 
tel: (613) 993-9703                                  fax: (613) 954 3733                 
e-mail:  <blocked::mailto:christoph.reinhart@nrc-cnrc.gc.ca> christoph.reinhart@nrc-cnrc.gc.ca 
 
The Lightswitch Wizard (initial design)     <blocked::http://www.buildwiz.com/> www.buildwiz.com  
DAYSIM (expert software)                         <blocked::http://www.daysim.com/> www.daysim.com  
Radiance Workshop 2005                         <blocked::http://irc.nrc-cnrc.gc.ca/ie/light/RadianceWorkshop2005> http://irc.nrc-cnrc.gc.ca/ie/light/RadianceWorkshop2005   
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20050405/4c363518/attachment.html
From rpg at rumblestrip.org  Tue Apr  5 22:13:43 2005
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Tue Apr  5 22:14:07 2005
Subject: [Radiance-general] Radiance model water
In-Reply-To: <10C94843061E094A98C02EB77CFC328713582BF7@nrcmrdex1d.imsb.nrc.ca>
References: <10C94843061E094A98C02EB77CFC328713582BF7@nrcmrdex1d.imsb.nrc.ca>
Message-ID: <54858.209.212.87.250.1112732023.squirrel@209.212.87.250>


On Tue, April 5, 2005 3:47 pm, Reinhart, Christoph said:
> Dear colleagues,

Hi Christoph,

I found this in the radiance-general archives, perhaps this would be of
some help:

http://www.radiance-online.org/pipermail/radiance-general/2002-January/000124.html

-- 
Rob Guglielmetti
www.rumblestrip.org

From a.jacobs at londonmet.ac.uk  Tue Apr  5 23:53:30 2005
From: a.jacobs at londonmet.ac.uk (Axel Jacobs)
Date: Tue Apr  5 23:38:45 2005
Subject: [Radiance-general] Radiance model water
In-Reply-To: <54858.209.212.87.250.1112732023.squirrel@209.212.87.250>
References: <10C94843061E094A98C02EB77CFC328713582BF7@nrcmrdex1d.imsb.nrc.ca>
	<54858.209.212.87.250.1112732023.squirrel@209.212.87.250>
Message-ID: <10101.213.58.101.94.1112738010.squirrel@213.58.101.94>

> http://www.radiance-online.org/pipermail/radiance-general/2002-January/000124.html
>

The info in this thread is what I used to model a wavy water surface in
the Basic Tutorial which is linked in here:
http://luminance.londonmet.ac.uk/learnix/index.php?module=phatfile&FILE_MAN_OP=Main&MMN_position=4:4
See page 13.
The primitives are listed in the appendix.


Axel



From Rob.Fitzsimmons at Summit.Fiserv.com  Wed Apr  6 00:29:16 2005
From: Rob.Fitzsimmons at Summit.Fiserv.com (Fitzsimmons, Rob)
Date: Wed Apr  6 00:31:08 2005
Subject: [Radiance-general] Radiance Wiki
Message-ID: <B8DD8375FCE2C94B9F170D9277C1FA2B8C5890@corvallis>

Looks like the Wiki got hit with some nasty spammer
the front page is loaded with links to pharmacies

Does anyone on this list maintain that site?

http://www.radiance-wiki.org/index.php?title=Main_Page

Rob

From chriskl at familyhealth.com.au  Wed Apr  6 03:43:19 2005
From: chriskl at familyhealth.com.au (Christopher Kings-Lynne)
Date: Wed Apr  6 03:42:57 2005
Subject: [Radiance-general] Radiance Wiki
In-Reply-To: <B8DD8375FCE2C94B9F170D9277C1FA2B8C5890@corvallis>
References: <B8DD8375FCE2C94B9F170D9277C1FA2B8C5890@corvallis>
Message-ID: <42533EB7.9000005@familyhealth.com.au>

I've reverted it (anyone can)...

Mike - lock the damn home page already :D

Chris

Fitzsimmons, Rob wrote:
> Looks like the Wiki got hit with some nasty spammer
> the front page is loaded with links to pharmacies
> 
> Does anyone on this list maintain that site?
> 
> http://www.radiance-wiki.org/index.php?title=Main_Page
> 
> Rob
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general

From atelier at iebele.nl  Wed Apr  6 09:51:40 2005
From: atelier at iebele.nl (atelier iebele abel)
Date: Wed Apr  6 09:50:01 2005
Subject: [Radiance-general] objline
In-Reply-To: <BAY15-F301YmTemis7U000848c0@hotmail.com>
References: <BAY15-F301YmTemis7U000848c0@hotmail.com>
Message-ID: <4253950C.1070209@iebele.nl>


Hi,

Does anybody knows an option or work-around in Radiance to create a 
vector based, hidden-line drawing (like obline does ) using a 
camera/viewpoint (-vp) definition ?

Regards,

Iebele





From jm at dmu.ac.uk  Wed Apr  6 10:36:19 2005
From: jm at dmu.ac.uk (John Mardaljevic)
Date: Wed Apr  6 10:37:53 2005
Subject: [Radiance-general] Radiance model water
Message-ID: <F2F40CC1-A676-11D9-95BC-000D93355E26@dmu.ac.uk>

Hi Christoph,

I used 'wave.cal' (material below) to model the pools for the "Foggo 
Atrium".

-John

==========================================

void texfunc wavy
6 wave_x wave_y wave_z wave.cal -s .05
0
1 .25

wavy glass water
0
0
3       0.51    0.62    0.68

=========wave.cal==========================

{
	Ripples for water, whatever

	04Mar90

	A1 = degreee of waviness
}
wave_x = wave_mag * noise3a(Px, Py, Pz);
wave_y = wave_mag * noise3b(Px, Py, Pz);
wave_z = wave_mag * noise3c(Px, Py, Pz);

wave_mag = min(A1, .5*Rdot);

==========================================


-----------------------------------------------
Dr. John Mardaljevic
Senior Research Fellow
Institute of Energy and Sustainable Development
De Montfort University
The Gateway
Leicester
LE1 9BH, UK
+44 (0) 116 257 7972
+44 (0) 116 257 7981 (fax)

jm@dmu.ac.uk
http://www.iesd.dmu.ac.uk/~jm


From grobe at gmx.net  Wed Apr  6 12:26:54 2005
From: grobe at gmx.net (Lars O. Grobe)
Date: Wed Apr  6 12:27:14 2005
Subject: [Radiance-general] objline
In-Reply-To: <4253950C.1070209@iebele.nl>
References: <BAY15-F301YmTemis7U000848c0@hotmail.com>
	<4253950C.1070209@iebele.nl>
Message-ID: <a879bd1c61809f167bc9993fc6944284@gmx.net>

Paul Bourke wrote a nice text about generating wireframes from 
renderings:

http://astronomy.swin.edu.au/~pbourke/rendering/wireframe/index.html

You can make a vector drawing of this using tools like potrace.

You can also use the mgf, meta, postscript chain as supported by 
radiance tools, however this won't give you hidden lines, but 
wireframe.

CU Lars.


From tseebohm at fes.uwaterloo.ca  Wed Apr  6 15:21:38 2005
From: tseebohm at fes.uwaterloo.ca (Thomas Seebohm)
Date: Wed Apr  6 15:16:47 2005
Subject: [Radiance-general] water
In-Reply-To: <200504061000.j36A0BSu018588@fes.uwaterloo.ca>
References: <200504061000.j36A0BSu018588@fes.uwaterloo.ca>
Message-ID: <CEB1AC7C-A69E-11D9-8350-000D9340E31C@fes.uwaterloo.ca>


Hi,

My favourite for water is pucker.cal. I am not sure where it came from 
but here it is:

{This puckered texture is used to provide a bumpy look.
A1 is the degree of puckeredness puck_dx, puck_dy, puck_dz are the 
perturbation variables in the x, y and z directions.}


puck_dx = A1 * noise3a(Px, Py, Pz);
puck_dy = A1 * noise3b(Px, Py, Pz);
puck_dz = A1 * noise3c(Px, Py, Pz);

Thomas
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: text/enriched
Size: 494 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20050406/098e64cf/attachment.bin
From mike at cityscape3d.com  Wed Apr  6 15:51:50 2005
From: mike at cityscape3d.com (Michael Kruger)
Date: Wed Apr  6 15:53:01 2005
Subject: [Radiance-general] RE: Radiance Wiki fix
In-Reply-To: <200504060956.j369u6xv063037@server.cityscape3d.com>
Message-ID: <200504061347.j36DljDn066567@server.cityscape3d.com>

OK, OK - the damn home page is now locked! :P

Drop me a line if anyone wants to modify / add to it. I've also given Chriskl sysop priviledges, so there are now multiple points of
failure. :P  *yay*

mike


> Message: 6
> Date: Wed, 06 Apr 2005 09:43:19 +0800
> From: Christopher Kings-Lynne <chriskl@familyhealth.com.au>
> Subject: Re: [Radiance-general] Radiance Wiki
> To: Radiance general discussion <radiance-general@radiance-online.org>
> Message-ID: <42533EB7.9000005@familyhealth.com.au>
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
> 
> I've reverted it (anyone can)...
> 
> Mike - lock the damn home page already :D
> 
> Chris


From jedev at visarc.com  Wed Apr  6 17:03:26 2005
From: jedev at visarc.com (Jack de Valpine)
Date: Wed Apr  6 17:04:05 2005
Subject: [Radiance-general] Radiance model water
In-Reply-To: <10C94843061E094A98C02EB77CFC328713582BF7@nrcmrdex1d.imsb.nrc.ca>
References: <10C94843061E094A98C02EB77CFC328713582BF7@nrcmrdex1d.imsb.nrc.ca>
Message-ID: <4253FA3E.80205@visarc.com>

Hi Chistoph,

Just to pitch in, I think that what we used for the image at Radiance 
online was the wave.cal in a texfunc applied to a glass surface (as John 
M. already suggested). The point was not so much about physical accuracy 
but to get something that "looked" like water.

-Jack

Reinhart, Christoph wrote:

> Dear colleagues,
>  
> One of my students wants to model a swimming pool in Radiance. She is 
> looking for a Radiance material model for the water surface (something 
> similar to what Jack de Valpine has done for the rendering on the 
> Radiance online web site). Has anybody modeled water in the past and 
> is willing to share the model with us?
>  
> Christoph
> Christoph Reinhart, Ph.D.                       
> Associate Research Officer                      National Research 
> Council Canada         Institute for Research in Construction
> Adjunct Professor                                     McGill 
> University                                     School of Architecture
> 1200 Montreal Road M-24, Ottawa          Ontario K1A 0R6 Canada
> tel: (613) 993-9703                                  fax: (613) 954 
> 3733                
> e-mail: christoph.reinhart@nrc-cnrc.gc.ca 
> <blocked::mailto:christoph.reinhart@nrc-cnrc.gc.ca>
>  
> The Lightswitch Wizard (initial design)    www.buildwiz.com 
> <blocked::http://www.buildwiz.com/> 
> DAYSIM (expert software)                        www.daysim.com 
> <blocked::http://www.daysim.com/> 
> Radiance Workshop 2005                        
> http://irc.nrc-cnrc.gc.ca/ie/light/RadianceWorkshop2005 
> <blocked::http://irc.nrc-cnrc.gc.ca/ie/light/RadianceWorkshop2005>  
>  
>
>------------------------------------------------------------------------
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general@radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general
>  
>

-- 
#	John E. de Valpine
#	president
#
#	visarc incorporated
#	http://www.visarc.com
#
#	channeling technology for superior design and construction

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20050406/15af5d79/attachment.html
From wxo110 at psu.edu  Thu Apr  7 00:23:18 2005
From: wxo110 at psu.edu (woogie)
Date: Thu Apr  7 00:23:52 2005
Subject: [Radiance-general] Overflow in addobject....
Message-ID: <200504062223.SAA06536@webmail5.cac.psu.edu>

Hi, I have a trouble to make oct file.

I got an error message like below when oct file is created.

oconv material.rad room.rad blind.rad sky.rad > test.oct
"internal - set overflow in addobject < blinds.41.0 > "

my blind.rad file has 69 blinds polygon in it.

blinds_mat polygon blinds.41.0
0
0
12
                -14               -0.5       5.9347826087
                 -1               -0.5       5.9347826087
                 -1    -0.558689862838      5.87609274586
                -14    -0.558689862838      5.87609274586

Any idea what makes this problem?



From erwin.zierler at archvisu.at  Thu Apr  7 01:35:09 2005
From: erwin.zierler at archvisu.at (erwin.zierler@archvisu.at)
Date: Thu Apr  7 01:35:24 2005
Subject: [Radiance-general] Overflow in addobject....
Message-ID: <DIIE.000000C300000F01@mail.stubainet.at>

If I remeber right it has to do with coincident or objects very close to
each other in your scene.
Did you try to use the -r parameter? The man page of oconv explains, what it 
does.

-Erwin

-------- Original Message --------
Subject: [Radiance-general] Overflow in addobject.... (07-Apr-2005 0:23)
From:    wxo110@psu.edu
To:      radiance-general@radiance-online.org

> Hi, I have a trouble to make oct file.
> 
> I got an error message like below when oct file is created.
> 
> oconv material.rad room.rad blind.rad sky.rad > test.oct
> "internal - set overflow in addobject < blinds.41.0 > "
> 
> my blind.rad file has 69 blinds polygon in it.
> 
> blinds_mat polygon blinds.41.0
> 0
> 0
> 12
>                 -14               -0.5       5.9347826087
>                  -1               -0.5       5.9347826087
>                  -1    -0.558689862838      5.87609274586
>                 -14    -0.558689862838      5.87609274586
> 
> Any idea what makes this problem?
> 
> 
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
> 
> To: radiance-general@radiance-online.org


To: radiance-general@radiance-online.org
Cc: wxo110@psu.edu



From jedev at visarc.com  Thu Apr  7 17:12:24 2005
From: jedev at visarc.com (Jack de Valpine)
Date: Thu Apr  7 17:18:14 2005
Subject: [Radiance-general] Overflow in addobject....
In-Reply-To: <DIIE.000000C300000F01@mail.stubainet.at>
References: <DIIE.000000C300000F01@mail.stubainet.at>
Message-ID: <42554DD8.2080001@visarc.com>

Usually, there are three reasons that the oconv process can blow up like 
this:

   1. duplicate geometry - do you have overlapping geometry for the
      blinds (eg polygons on top of each other)
   2. scaling - some piece of geometry that is being built seperately
      and then xformed into the scene at the wrong scale
   3. density - lots of small geometry clustered tightly together in a
      large scene

In some of these cases you can work around the problem by increasing the 
octree resolution (-r), you can take a look at the man page for further 
information on this.

-Jack

erwin.zierler@archvisu.at wrote:

>If I remeber right it has to do with coincident or objects very close to
>each other in your scene.
>Did you try to use the -r parameter? The man page of oconv explains, what it 
>does.
>
>-Erwin
>
>-------- Original Message --------
>Subject: [Radiance-general] Overflow in addobject.... (07-Apr-2005 0:23)
>From:    wxo110@psu.edu
>To:      radiance-general@radiance-online.org
>
>  
>
>>Hi, I have a trouble to make oct file.
>>
>>I got an error message like below when oct file is created.
>>
>>oconv material.rad room.rad blind.rad sky.rad > test.oct
>>"internal - set overflow in addobject < blinds.41.0 > "
>>
>>my blind.rad file has 69 blinds polygon in it.
>>
>>blinds_mat polygon blinds.41.0
>>0
>>0
>>12
>>                -14               -0.5       5.9347826087
>>                 -1               -0.5       5.9347826087
>>                 -1    -0.558689862838      5.87609274586
>>                -14    -0.558689862838      5.87609274586
>>
>>Any idea what makes this problem?
>>
>>
>>
>>_______________________________________________
>>Radiance-general mailing list
>>Radiance-general@radiance-online.org
>>http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>To: radiance-general@radiance-online.org
>>    
>>
>
>
>To: radiance-general@radiance-online.org
>Cc: wxo110@psu.edu
>
>
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general@radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
>  
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20050407/2c76ecf4/attachment.htm
From plaberge at labergedaylight.com  Thu Apr  7 19:05:04 2005
From: plaberge at labergedaylight.com (Paul LaBerge)
Date: Thu Apr  7 19:06:13 2005
Subject: [Radiance-general] clipping planes exposing object interiors?
Message-ID: <a61ef643b01e08e51bd9745ac274e989@labergedaylight.com>

Hello colleagues,
In creating renderings of a room and its lightshelves with a fore 
clipping plane it appears that the clipping plane is exposing the wall 
interior in such a way that it becomes rendered. Is this the way 
clipping planes operate?
If so, it suggests that the rendering is created after the clipping 
plane is applied and therefore doesn?t include objects that are between 
the viewpoint and the fore clipping plane.

This can be seen where the ceiling meets the wall and where the floor 
meets the wall in the perspective image.  (-ab 2 -ad 1000 -av  .368 
.368 .368 -as 500 -ar 500 -aa .15 -dj .03)

The parallel view is also created with a clipping plane that seems to 
expose the wall interior, the scalloped isoline at the top of the 
image. (-ab 2 -ad 500 -av .37 .37 .37)

Images:
http://www.labergedaylight.com/pages/temp.html

Best regards,
Paul LaBerge


From a.jacobs at londonmet.ac.uk  Thu Apr  7 19:34:58 2005
From: a.jacobs at londonmet.ac.uk (Axel Jacobs)
Date: Thu Apr  7 19:19:45 2005
Subject: [Radiance-general] clipping planes exposing object interiors?
In-Reply-To: <a61ef643b01e08e51bd9745ac274e989@labergedaylight.com>
References: <a61ef643b01e08e51bd9745ac274e989@labergedaylight.com>
Message-ID: <29856.193.137.43.137.1112895298.squirrel@193.137.43.137>

Paul,

> In creating renderings of a room and its lightshelves with a fore
> clipping plane it appears that the clipping plane is exposing the wall
> interior in such a way that it becomes rendered. Is this the way
> clipping planes operate?

Clipping planes do not introduce extra light where it should not be.

Assuming the model is air tight (which is not always the case for imported
CAD geometry), the inside of the wall the ceiling is visible due to the
ambient light. Setting -av to 0 0 0 should remedy this.

Axel



From plaberge at labergedaylight.com  Thu Apr  7 22:45:20 2005
From: plaberge at labergedaylight.com (Paul LaBerge)
Date: Thu Apr  7 22:45:48 2005
Subject: [Radiance-general] clipping planes exposing object interiors?
In-Reply-To: <29856.193.137.43.137.1112895298.squirrel@193.137.43.137>
References: <a61ef643b01e08e51bd9745ac274e989@labergedaylight.com>
	<29856.193.137.43.137.1112895298.squirrel@193.137.43.137>
Message-ID: <ba25b7e9506bfca191b045307dde2ad8@labergedaylight.com>

Axel,
Thanks much for the suggestion. I?d also thought of light leaks as the 
culprit so I overlapped the objects in formz to ensure there would be 
no light leaks before exporting as an obj file. I tried the -av 0 0 0 
setting but am still getting rendered wall cavities.
settings were: rpict -vf scene-c1.vp -av 0 0 0 -ab 2 -ad 1000 -x 7000 
-y 5000 rm.oct | pfilt -1 -x /2 -y /2 > scene-c1a.pic
The rendering is posted at:
http://www.labergedaylight.com/pages/temp.html

Thanks,
Paul

> On Apr 7, 2005, at 10:34 AM, Axel Jacobs wrote:
> Paul,
> Clipping planes do not introduce extra light where it should not be.
> Assuming the model is air tight (which is not always the case for 
> imported
> CAD geometry), the inside of the wall the ceiling is visible due to the
> ambient light. Setting -av to 0 0 0 should remedy this.
>
> Axel


From a.jacobs at londonmet.ac.uk  Fri Apr  8 02:29:00 2005
From: a.jacobs at londonmet.ac.uk (Axel Jacobs)
Date: Fri Apr  8 02:14:00 2005
Subject: [Radiance-general] clipping planes exposing object interiors?
In-Reply-To: <ba25b7e9506bfca191b045307dde2ad8@labergedaylight.com>
References: <a61ef643b01e08e51bd9745ac274e989@labergedaylight.com>
	<29856.193.137.43.137.1112895298.squirrel@193.137.43.137>
	<ba25b7e9506bfca191b045307dde2ad8@labergedaylight.com>
Message-ID: <10113.213.58.100.17.1112920140.squirrel@213.58.100.17>


> Thanks much for the suggestion. I?d also thought of light leaks as the
> culprit so I overlapped the objects in formz to ensure there would be
> no light leaks before exporting as an obj file. I tried the -av 0 0 0
> setting but am still getting rendered wall cavities.
> settings were: rpict -vf scene-c1.vp -av 0 0 0 -ab 2 -ad 1000 -x 7000
> -y 5000 rm.oct | pfilt -1 -x /2 -y /2 > scene-c1a.pic

I think the overlapping parts are exactly the problem. Radiance does some
interpolation between ambient samples. A new indirect sample is only
triggered if the new point is outside of the sphere of influence of all
previously computed ones. This is controlled by the -a* options. The
radius of those spheres is

r_min = max_scene_dimension * aa / ar

The light from the ambient sampling can spill over into areas that would
normally not receive indirect light. Could you post a blow-up image of the
bottom part of the left-hand wall? And see what fiddling with the -aa and
-ar options results in.

Axel



From cbauer- at t-online.de  Fri Apr  8 11:29:02 2005
From: cbauer- at t-online.de (Carsten Bauer)
Date: Fri Apr  8 10:16:14 2005
Subject: [Radiance-general] clipping planes exposing object interiors?
References: <a61ef643b01e08e51bd9745ac274e989@labergedaylight.com>	<29856.193.137.43.137.1112895298.squirrel@193.137.43.137>	<ba25b7e9506bfca191b045307dde2ad8@labergedaylight.com>
	<10113.213.58.100.17.1112920140.squirrel@213.58.100.17>
Message-ID: <42564EDE.50605@t-online.de>

Hi,

In fact, it doesn't matter for the ambient calculation if polygons 
overlap or cut into each other, making the edge between them 'airtight'.
When reusing ambient values from the cache no 'quasi shadow testing' is 
done to ensure that nothing lies inbetween for the 'allowed' radius of 
this ambient value. Theoretically, this perhaps might be possible, but 
certainly at a very high computational cost.

So the solution is to set the ambient resolution -ar sufficiently high 
(and/or) -aa low. The size of the scene cube also plays a role as can be 
seen in the expression for rmin in Axels answer, so a big outside (e.g 
large ground polygon) increases the problem. (In the RwR book there is a 
section on this, and the use of a 'ground glow' is recommended to 
circumvent this problem.

If you want to model a huge outdoor part, it is better to use separate 
ambient caches for the 'outside' and the 'inside' part of your scene.

-cb


From plaberge at labergedaylight.com  Sun Apr 10 20:33:28 2005
From: plaberge at labergedaylight.com (Paul LaBerge)
Date: Sun Apr 10 20:34:14 2005
Subject: [Radiance-general] clipping planes exposing object interiors?
In-Reply-To: <42564EDE.50605@t-online.de>
References: <a61ef643b01e08e51bd9745ac274e989@labergedaylight.com>	<29856.193.137.43.137.1112895298.squirrel@193.137.43.137>	<ba25b7e9506bfca191b045307dde2ad8@labergedaylight.com>
	<10113.213.58.100.17.1112920140.squirrel@213.58.100.17>
	<42564EDE.50605@t-online.de>
Message-ID: <9fad46bd3ee99e2a4a2ae4657b9617a6@labergedaylight.com>

Hello,

We completed a second rendering with the settings below. It, as the 
other rendering, includes a ground polygon and ground glow. Prior to 
running the second interior rendering we did a quick outside view 
rendering to create an ambient cache. The difference we see between 
this and the first rendering is that the sky is blue.

Carsten; is this how you meant to ?use separate ambient caches for the 
?outside? and the ?inside? part of the scene??

-ab  2
-av  0.37 0.37 0.37
-ad  5000
-as  500
-ar  500
-aa  0.15
-dj  0.03

Axel; details of the left side are posted.

http://www.labergedaylight.com/pages/temp.html

Thank you for your time. We are going to continue working on this 
rendering with your suggestions.

Paul

From cbauer- at t-online.de  Mon Apr 11 19:01:28 2005
From: cbauer- at t-online.de (Carsten Bauer)
Date: Mon Apr 11 17:49:26 2005
Subject: [Radiance-general] clipping planes exposing object interiors?
References: <a61ef643b01e08e51bd9745ac274e989@labergedaylight.com>	<29856.193.137.43.137.1112895298.squirrel@193.137.43.137>	<ba25b7e9506bfca191b045307dde2ad8@labergedaylight.com>	<10113.213.58.100.17.1112920140.squirrel@213.58.100.17>	<42564EDE.50605@t-online.de>
	<9fad46bd3ee99e2a4a2ae4657b9617a6@labergedaylight.com>
Message-ID: <425AAD68.3060608@t-online.de>

Hi Paul,

sorry, with that separate cache I was referring to a still somewhat 
experimental radzilla feature ('scene') which is not present in classic 
Radiance

sticking to classic Radiance, or in fact general, the key point to keep 
in mind is perhaps that the ambient cache is independent of the 
geometry. This means except for the surface normal present at creation, 
there is no other geometry info the ambient cache can use for deciding 
if it's 'allowed' to use a cached value or not. So it is vital to
use a correct -ar resolution value, otherwise the cache cannot adapt 
itself adequately (means closer spaced sample points) in regions with 
high variation of illumination.
(Maybe expressed a bit simplified, Greg pelase correct me if I'm wrong :-).

Taken this little amount of info known to the algorithm, the ambient 
cache in fact does quite a good job in sorting out things, and you see 
the effect of a higer -ar value in your rendering, the  amount of spill 
light in the left wall is much lesser now.

Generally, I would not bother too much about this, as in fact the hollow
wall is an unphysical situation anyway. In reality, there's conrete 
inside. And a real, i.e. thick wall also means a greater distance 
between points outside and inside the room, and together with an 
adequate resolution value this makes it much easier then for the ambient 
algorithim to get things right, i.e. not use values from the outside for 
the inside.

-cb






From plaberge at labergedaylight.com  Mon Apr 11 20:35:55 2005
From: plaberge at labergedaylight.com (Paul LaBerge)
Date: Mon Apr 11 20:45:13 2005
Subject: [Radiance-general] clipping planes exposing object interiors?
In-Reply-To: <425AAD68.3060608@t-online.de>
References: <a61ef643b01e08e51bd9745ac274e989@labergedaylight.com>	<29856.193.137.43.137.1112895298.squirrel@193.137.43.137>	<ba25b7e9506bfca191b045307dde2ad8@labergedaylight.com>	<10113.213.58.100.17.1112920140.squirrel@213.58.100.17>	<42564EDE.50605@t-online.de>
	<9fad46bd3ee99e2a4a2ae4657b9617a6@labergedaylight.com>
	<425AAD68.3060608@t-online.de>
Message-ID: <5c91253313207ebe910c9dc98ef450fe@labergedaylight.com>

Hello Carsten,
Thanks for the clarification and the extra explanations.
We'll be rendering more tests so we can learn to apply them more deftly.
Paul


From tarik.rahman at ed.ac.uk  Tue Apr 12 15:25:47 2005
From: tarik.rahman at ed.ac.uk (Tarik Rahman)
Date: Tue Apr 12 15:26:12 2005
Subject: [Radiance-general] pcomb
In-Reply-To: <425AAD68.3060608@t-online.de>
References: <a61ef643b01e08e51bd9745ac274e989@labergedaylight.com>
	<29856.193.137.43.137.1112895298.squirrel@193.137.43.137>
	<ba25b7e9506bfca191b045307dde2ad8@labergedaylight.com>
	<10113.213.58.100.17.1112920140.squirrel@213.58.100.17>
	<42564EDE.50605@t-online.de>
	<9fad46bd3ee99e2a4a2ae4657b9617a6@labergedaylight.com>
	<425AAD68.3060608@t-online.de>
Message-ID: <1113312347.425bcc5b7fcea@sms.ed.ac.uk>

Hi there
I'm working with pcomb ; I have 2 images, one with a box in a room and one with
the empty room. I just want the box so I subtract the empty room but the result
doesn't seem to look like the box in the first picture, it's much brighter in
some areas and much darker in others. Am I missing something?
Thanks for any help

Tarik

--
Tarik Rahman
PhD student, Institute of Perception, Action and Behaviour
School of Informatics
University of Edinburgh

From Giulio.Antonutto at arup.com  Tue Apr 12 15:55:48 2005
From: Giulio.Antonutto at arup.com (Giulio Antonutto)
Date: Tue Apr 12 15:56:12 2005
Subject: [Radiance-general] pcomb
Message-ID: <3D77044FDAF3694E995689FC920C53E650EF5D@l-gnts05>

Tarik
What I would suggest is to render the box with -av 100 100 100 -ab 0,
without light sources (should be really quick).
After that perform a multiplication of the image with the white box and the
one with the box and the room together.
Since where is black is 0, you should have just the box at the end by
filtering: 

Pcomb -e 'lo=if(li(1)*li(2),li(1),0);' room whitebox > final

Or
-e 'ro=if(ri(1)*ri(2),ri(1),0); go=if(gi(1)*gi(2),gi(1),0);
bo=if(bi(1)*bi(2),bi(1),0)'


hope it works,
giulio


BTW Check that the luminance is the same at the end.


-----Original Message-----
From: radiance-general-bounces@radiance-online.org
[mailto:radiance-general-bounces@radiance-online.org] On Behalf Of Tarik
Rahman
Sent: 12 April 2005 14:26
To: Radiance general discussion
Subject: [Radiance-general] pcomb

Hi there
I'm working with pcomb ; I have 2 images, one with a box in a room and one
with
the empty room. I just want the box so I subtract the empty room but the
result
doesn't seem to look like the box in the first picture, it's much brighter
in
some areas and much darker in others. Am I missing something?
Thanks for any help

Tarik

--
Tarik Rahman
PhD student, Institute of Perception, Action and Behaviour
School of Informatics
University of Edinburgh

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general

___________________________________________________________________
Electronic mail messages entering and leaving Arup business
systems are scanned for acceptability of content and viruses.

From gregoryjward at gmail.com  Tue Apr 12 20:38:34 2005
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Tue Apr 12 20:39:14 2005
Subject: [Radiance-general] mksource program
Message-ID: <9bc1d79db5b75c6a755059e545b889f1@gmail.com>

I recently wrote a program for computing light sources to accelerate 
image-based lighting for anyone who's working on that.  You can get it 
in last night's HEAD, and the synopsis is below:

NAME
        mksource - compute distant sources for RADIANCE image-based 
lighting

SYNOPSIS
        mksource [ -d nsamps ][ -t thresh ][ -a maxang ] [ octree ]

DESCRIPTION
        Mksource produces a RADIANCE scene description of distant illum 
sources
        corresponding to bright, concentrated  regions  in  the  given  
ambient
        environment.   Any local geometry is ignored in the input 
octree, which
        should be derived from a captured light probe.  The output 
sources  may
        then  be  combined  with  this  environment to produce a more 
efficient
        scene for rendering, faster and less prone to sampling artifacts.

--------
I'd be interested in feedback if you give this a try.

-Greg


From a_castorina at yahoo.it  Tue Apr 12 22:41:00 2005
From: a_castorina at yahoo.it (alfio castorina)
Date: Tue Apr 12 22:40:33 2005
Subject: [Radiance-general] rview on mac os x
Message-ID: <2706f1f79dc4a4ca5f42b674203c288b@yahoo.it>

I've just started using radiance on Mac OS X Panther. I wonder why i 
can't input commands (like exposure) after launching rvu. It seems that 
the input doesn't return to the shell. why? Thanks.




From gregoryjward at gmail.com  Wed Apr 13 00:23:53 2005
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Wed Apr 13 00:24:37 2005
Subject: [Radiance-general] rview on mac os x
In-Reply-To: <2706f1f79dc4a4ca5f42b674203c288b@yahoo.it>
References: <2706f1f79dc4a4ca5f42b674203c288b@yahoo.it>
Message-ID: <1ae958323de11fc872a679655b85a89c@gmail.com>

The rvu program creates its own command window, so you have to click on 
that window and type your commands there.  Focus doesn't move with the 
mouse as on other systems.

You did remember to start X11, didn't you?

-G

> From: alfio castorina <a_castorina@yahoo.it>
> Date: April 12, 2005 1:41:00 PM PDT
>
> I've just started using radiance on Mac OS X Panther. I wonder why i 
> can't input commands (like exposure) after launching rvu. It seems 
> that the input doesn't return to the shell. why? Thanks.


From a_castorina at yahoo.it  Wed Apr 13 09:15:18 2005
From: a_castorina at yahoo.it (a_castorina@yahoo.it)
Date: Wed Apr 13 09:15:46 2005
Subject: [Radiance-general] rview on mac os x
Message-ID: <259780-22005431371518242@M2W062.mail2web.com>


Sorry, i didn't notice that commands had to be entered into the rview
window, i thought i had to use to shell.
Thanks.

Original Message:
-----------------
From: Gregory J. Ward gregoryjward@gmail.com
Date: Tue, 12 Apr 2005 15:23:53 -0700
To: radiance-general@radiance-online.org
Subject: Re: [Radiance-general] rview on mac os x


The rvu program creates its own command window, so you have to click on 
that window and type your commands there.  Focus doesn't move with the 
mouse as on other systems.

You did remember to start X11, didn't you?

-G


> From: alfio castorina <a_castorina@yahoo.it>
> Date: April 12, 2005 1:41:00 PM PDT
>
> I've just started using radiance on Mac OS X Panther. I wonder why i 
> can't input commands (like exposure) after launching rvu. It seems 
> that the input doesn't return to the shell. why? Thanks.


_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general

--------------------------------------------------------------------
mail2web - Check your email from the web at
http://mail2web.com/ .



From grobe at gmx.net  Wed Apr 13 10:28:41 2005
From: grobe at gmx.net (Lars O. Grobe)
Date: Wed Apr 13 10:28:55 2005
Subject: [Radiance-general] rview on mac os x
In-Reply-To: <2706f1f79dc4a4ca5f42b674203c288b@yahoo.it>
References: <2706f1f79dc4a4ca5f42b674203c288b@yahoo.it>
Message-ID: <258ca4f985f61dc22ed9a62fab32026e@gmx.net>

Hi,

works fine here. You must make sure that the rvu output window is 
active, not the shell window (I usually have to click into the 
graphical window after launching rvu). Than you get a "command line" at 
the bottom of the window.

OS X 10.3.7 here.

CU Lars.


From tarik.rahman at ed.ac.uk  Wed Apr 13 16:06:15 2005
From: tarik.rahman at ed.ac.uk (Tarik Rahman)
Date: Wed Apr 13 16:06:41 2005
Subject: [Radiance-general] pcomb
In-Reply-To: <3D77044FDAF3694E995689FC920C53E650EF5D@l-gnts05>
References: <3D77044FDAF3694E995689FC920C53E650EF5D@l-gnts05>
Message-ID: <1113401175.425d2757a5ec0@sms.ed.ac.uk>

That's a good idea, perfect. Thanks for that

Tarik
Quoting Giulio Antonutto <Giulio.Antonutto@arup.com>:

> Tarik
> What I would suggest is to render the box with -av 100 100 100 -ab 0,
> without light sources (should be really quick).
> After that perform a multiplication of the image with the white box and the
> one with the box and the room together.
> Since where is black is 0, you should have just the box at the end by
> filtering:
>
> Pcomb -e 'lo=if(li(1)*li(2),li(1),0);' room whitebox > final
>
> Or
> -e 'ro=if(ri(1)*ri(2),ri(1),0); go=if(gi(1)*gi(2),gi(1),0);
> bo=if(bi(1)*bi(2),bi(1),0)'
>
>
> hope it works,
> giulio
>
>
> BTW Check that the luminance is the same at the end.
>
>
> -----Original Message-----
> From: radiance-general-bounces@radiance-online.org
> [mailto:radiance-general-bounces@radiance-online.org] On Behalf Of Tarik
> Rahman
> Sent: 12 April 2005 14:26
> To: Radiance general discussion
> Subject: [Radiance-general] pcomb
>
> Hi there
> I'm working with pcomb ; I have 2 images, one with a box in a room and one
> with
> the empty room. I just want the box so I subtract the empty room but the
> result
> doesn't seem to look like the box in the first picture, it's much brighter
> in
> some areas and much darker in others. Am I missing something?
> Thanks for any help
>
> Tarik
>
> --
> Tarik Rahman
> PhD student, Institute of Perception, Action and Behaviour
> School of Informatics
> University of Edinburgh
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
> ___________________________________________________________________
> Electronic mail messages entering and leaving Arup business
> systems are scanned for acceptability of content and viruses.
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>


--
Tarik Rahman
PhD student, Institute of Perception, Action and Behaviour
School of Informatics
University of Edinburgh

From atelier at iebele.nl  Wed Apr 13 16:17:56 2005
From: atelier at iebele.nl (atelier iebele abel)
Date: Wed Apr 13 16:16:11 2005
Subject: [Radiance-general] perforate.cal
In-Reply-To: <259780-22005431371518242@M2W062.mail2web.com>
References: <259780-22005431371518242@M2W062.mail2web.com>
Message-ID: <425D2A14.1020002@iebele.nl>

Hi group,

I use a file called perforate.cal (from Georg).
Is it possible to change this file in such way that use it on surfaces 
which various normal directions ( not only through x, y or z plane) ?


-Iebele


perforate.cal:
{
        perforate.cal
        Perforation function for approximately horizontal sufaces,
        for use in a mixfunc. Foreground is solid, background the holes.
        Set background to empty for a true perforation, or to a different
        material for polka dots.

        Relative hole size is determined by A1.
        Size of single circle is 1 - scale as required (eg. 0.05m).

        x_hole cuts holes in x-direction (through the y-z plane)
        y_hole cuts holes in y-direction (through the x-z plane)
        z_hole cuts holes in z-direction (through the x-y plane)

    Georg Mischler 30. 04. 1993
}

`xn = mod(Px, 1) - 0.5;
`yn = mod(Py, 1) - 0.5;
`zn = mod(Pz, 1) - 0.5;

`outofcirc(x, y, r) = if(sqrt(x*x + y*y) - r, 1, 0);

z_hole = `outofcirc(`xn, `yn, A1);
x_hole = `outofcirc(`yn, `zn, A1);
y_hole = `outofcirc(`zn, `xn, A1);




From Giulio.Antonutto at arup.com  Wed Apr 13 16:26:02 2005
From: Giulio.Antonutto at arup.com (Giulio Antonutto)
Date: Wed Apr 13 16:30:41 2005
Subject: [Radiance-general] perforate.cal
Message-ID: <3D77044FDAF3694E995689FC920C53E650EF69@l-gnts05>

I would suggest to follow this route:

-1- use obj to export your model with an UV mapping defined (Maxon Bodypaint
is what I use to create the UV, works fine... but I am pretty sure that even
Blender has something similar)

-2- edit the cal file substituting Lu and Lv with Px Py, no need of Pz since
we are on a surface

-3-
Define a mesh primitive
Define the material as usual

-4- import the file with a mesh primitive and attach the material while
importing:
Obj2mesh -a materials model.obj > model.mesh



Open you file wit objview, just a quick check,
Hopefully all should be ok....

I found this new feature really useful... all the old parametric textures
are now UV... really cool!

Cheers,
Hope it works,

giulio

-----Original Message-----
From: radiance-general-bounces@radiance-online.org
[mailto:radiance-general-bounces@radiance-online.org] On Behalf Of atelier
iebele abel
Sent: 13 April 2005 15:18
To: Radiance general discussion
Subject: [Radiance-general] perforate.cal

Hi group,

I use a file called perforate.cal (from Georg).
Is it possible to change this file in such way that use it on surfaces 
which various normal directions ( not only through x, y or z plane) ?


-Iebele


perforate.cal:
{
        perforate.cal
        Perforation function for approximately horizontal sufaces,
        for use in a mixfunc. Foreground is solid, background the holes.
        Set background to empty for a true perforation, or to a different
        material for polka dots.

        Relative hole size is determined by A1.
        Size of single circle is 1 - scale as required (eg. 0.05m).

        x_hole cuts holes in x-direction (through the y-z plane)
        y_hole cuts holes in y-direction (through the x-z plane)
        z_hole cuts holes in z-direction (through the x-y plane)

    Georg Mischler 30. 04. 1993
}

`xn = mod(Px, 1) - 0.5;
`yn = mod(Py, 1) - 0.5;
`zn = mod(Pz, 1) - 0.5;

`outofcirc(x, y, r) = if(sqrt(x*x + y*y) - r, 1, 0);

z_hole = `outofcirc(`xn, `yn, A1);
x_hole = `outofcirc(`yn, `zn, A1);
y_hole = `outofcirc(`zn, `xn, A1);




_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general

___________________________________________________________________
Electronic mail messages entering and leaving Arup business
systems are scanned for acceptability of content and viruses.

From atelier at iebele.nl  Wed Apr 13 16:56:00 2005
From: atelier at iebele.nl (atelier iebele abel)
Date: Wed Apr 13 16:54:17 2005
Subject: [Radiance-general] perforate.cal
In-Reply-To: <3D77044FDAF3694E995689FC920C53E650EF69@l-gnts05>
References: <3D77044FDAF3694E995689FC920C53E650EF69@l-gnts05>
Message-ID: <425D3300.9070602@iebele.nl>

Hi Giulio,

Thanks for your quick reply. I will give Bodypaint a try, but I doubt if 
it does generate surface normals from a file that doesn't have them.
Anyways, I wonder if the perforate.cal could be changed to work at once 
on surfaces without UV coordinates.
When mapping pictures it goed well, since I (not really me:) changed a 
few lines in picture.cal :

pic_u = U;  //was: pic_u = Px;
pic_v = V;   //was: pic_v = Py;

I don't know why this works, but it does....
If something like this could be done in the perforate.cal file, that 
would be nice,

-Iebele


Giulio Antonutto wrote:

>I would suggest to follow this route:
>
>-1- use obj to export your model with an UV mapping defined (Maxon Bodypaint
>is what I use to create the UV, works fine... but I am pretty sure that even
>Blender has something similar)
>
>-2- edit the cal file substituting Lu and Lv with Px Py, no need of Pz since
>we are on a surface
>
>-3-
>Define a mesh primitive
>Define the material as usual
>
>-4- import the file with a mesh primitive and attach the material while
>importing:
>Obj2mesh -a materials model.obj > model.mesh
>
>
>
>Open you file wit objview, just a quick check,
>Hopefully all should be ok....
>
>I found this new feature really useful... all the old parametric textures
>are now UV... really cool!
>
>Cheers,
>Hope it works,
>
>giulio
>
>-----Original Message-----
>From: radiance-general-bounces@radiance-online.org
>[mailto:radiance-general-bounces@radiance-online.org] On Behalf Of atelier
>iebele abel
>Sent: 13 April 2005 15:18
>To: Radiance general discussion
>Subject: [Radiance-general] perforate.cal
>
>Hi group,
>
>I use a file called perforate.cal (from Georg).
>Is it possible to change this file in such way that use it on surfaces 
>which various normal directions ( not only through x, y or z plane) ?
>
>
>-Iebele
>
>
>perforate.cal:
>{
>        perforate.cal
>        Perforation function for approximately horizontal sufaces,
>        for use in a mixfunc. Foreground is solid, background the holes.
>        Set background to empty for a true perforation, or to a different
>        material for polka dots.
>
>        Relative hole size is determined by A1.
>        Size of single circle is 1 - scale as required (eg. 0.05m).
>
>        x_hole cuts holes in x-direction (through the y-z plane)
>        y_hole cuts holes in y-direction (through the x-z plane)
>        z_hole cuts holes in z-direction (through the x-y plane)
>
>    Georg Mischler 30. 04. 1993
>}
>
>`xn = mod(Px, 1) - 0.5;
>`yn = mod(Py, 1) - 0.5;
>`zn = mod(Pz, 1) - 0.5;
>
>`outofcirc(x, y, r) = if(sqrt(x*x + y*y) - r, 1, 0);
>
>z_hole = `outofcirc(`xn, `yn, A1);
>x_hole = `outofcirc(`yn, `zn, A1);
>y_hole = `outofcirc(`zn, `xn, A1);
>
>
>
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general@radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>___________________________________________________________________
>Electronic mail messages entering and leaving Arup business
>systems are scanned for acceptability of content and viruses.
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general@radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>  
>

From Giulio.Antonutto at arup.com  Wed Apr 13 17:05:02 2005
From: Giulio.Antonutto at arup.com (Giulio Antonutto)
Date: Wed Apr 13 17:07:04 2005
Subject: [Radiance-general] perforate.cal
Message-ID: <3D77044FDAF3694E995689FC920C53E650EF6A@l-gnts05>

As you say you need to define UV first.
If you have a mesh and not UV values I cannot help you.
Sorry,
giulio

-----Original Message-----
From: radiance-general-bounces@radiance-online.org
[mailto:radiance-general-bounces@radiance-online.org] On Behalf Of atelier
iebele abel
Sent: 13 April 2005 15:56
To: Radiance general discussion
Subject: Re: [Radiance-general] perforate.cal

Hi Giulio,

Thanks for your quick reply. I will give Bodypaint a try, but I doubt if 
it does generate surface normals from a file that doesn't have them.
Anyways, I wonder if the perforate.cal could be changed to work at once 
on surfaces without UV coordinates.
When mapping pictures it goed well, since I (not really me:) changed a 
few lines in picture.cal :

pic_u = U;  //was: pic_u = Px;
pic_v = V;   //was: pic_v = Py;

I don't know why this works, but it does....
If something like this could be done in the perforate.cal file, that 
would be nice,

-Iebele


Giulio Antonutto wrote:

>I would suggest to follow this route:
>
>-1- use obj to export your model with an UV mapping defined (Maxon
Bodypaint
>is what I use to create the UV, works fine... but I am pretty sure that
even
>Blender has something similar)
>
>-2- edit the cal file substituting Lu and Lv with Px Py, no need of Pz
since
>we are on a surface
>
>-3-
>Define a mesh primitive
>Define the material as usual
>
>-4- import the file with a mesh primitive and attach the material while
>importing:
>Obj2mesh -a materials model.obj > model.mesh
>
>
>
>Open you file wit objview, just a quick check,
>Hopefully all should be ok....
>
>I found this new feature really useful... all the old parametric textures
>are now UV... really cool!
>
>Cheers,
>Hope it works,
>
>giulio
>
>-----Original Message-----
>From: radiance-general-bounces@radiance-online.org
>[mailto:radiance-general-bounces@radiance-online.org] On Behalf Of atelier
>iebele abel
>Sent: 13 April 2005 15:18
>To: Radiance general discussion
>Subject: [Radiance-general] perforate.cal
>
>Hi group,
>
>I use a file called perforate.cal (from Georg).
>Is it possible to change this file in such way that use it on surfaces 
>which various normal directions ( not only through x, y or z plane) ?
>
>
>-Iebele
>
>
>perforate.cal:
>{
>        perforate.cal
>        Perforation function for approximately horizontal sufaces,
>        for use in a mixfunc. Foreground is solid, background the holes.
>        Set background to empty for a true perforation, or to a different
>        material for polka dots.
>
>        Relative hole size is determined by A1.
>        Size of single circle is 1 - scale as required (eg. 0.05m).
>
>        x_hole cuts holes in x-direction (through the y-z plane)
>        y_hole cuts holes in y-direction (through the x-z plane)
>        z_hole cuts holes in z-direction (through the x-y plane)
>
>    Georg Mischler 30. 04. 1993
>}
>
>`xn = mod(Px, 1) - 0.5;
>`yn = mod(Py, 1) - 0.5;
>`zn = mod(Pz, 1) - 0.5;
>
>`outofcirc(x, y, r) = if(sqrt(x*x + y*y) - r, 1, 0);
>
>z_hole = `outofcirc(`xn, `yn, A1);
>x_hole = `outofcirc(`yn, `zn, A1);
>y_hole = `outofcirc(`zn, `xn, A1);
>
>
>
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general@radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>___________________________________________________________________
>Electronic mail messages entering and leaving Arup business
>systems are scanned for acceptability of content and viruses.
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general@radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>  
>

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general

___________________________________________________________________
Electronic mail messages entering and leaving Arup business
systems are scanned for acceptability of content and viruses.

From jedev at visarc.com  Wed Apr 13 17:55:42 2005
From: jedev at visarc.com (Jack de Valpine)
Date: Wed Apr 13 17:56:11 2005
Subject: [Radiance-general] perforate.cal
In-Reply-To: <425D2A14.1020002@iebele.nl>
References: <259780-22005431371518242@M2W062.mail2web.com>
	<425D2A14.1020002@iebele.nl>
Message-ID: <425D40FE.2020702@visarc.com>

Hi Iebele,

You could try the following additions to the cal file. I am not sure if 
this will work as I am not in a location to try it out right now. See 
inline below...

-Jack

atelier iebele abel wrote:

> Hi group,
>
> I use a file called perforate.cal (from Georg).
> Is it possible to change this file in such way that use it on surfaces 
> which various normal directions ( not only through x, y or z plane) ?
>
>
> -Iebele
>
>
> perforate.cal:
> {
>        perforate.cal
>        Perforation function for approximately horizontal sufaces,
>        for use in a mixfunc. Foreground is solid, background the holes.
>        Set background to empty for a true perforation, or to a different
>        material for polka dots.
>
>        Relative hole size is determined by A1.
>        Size of single circle is 1 - scale as required (eg. 0.05m).
>
>        x_hole cuts holes in x-direction (through the y-z plane)
>        y_hole cuts holes in y-direction (through the x-z plane)
>        z_hole cuts holes in z-direction (through the x-y plane)
>
>    Georg Mischler 30. 04. 1993
> }
>
> `xn = mod(Px, 1) - 0.5;
> `yn = mod(Py, 1) - 0.5;
> `zn = mod(Pz, 1) - 0.5;

{uv coordinate mapping}
`un = mod(U, 1) - 0.5;
`vn = mod(V, 1) - 0.5;

{uv mesh coordinate mapping}
`lun = mod(Lu, 1) - 0.5;
`lvn = mod(Lv, 1) - 0.5;

> `outofcirc(x, y, r) = if(sqrt(x*x + y*y) - r, 1, 0);
>
> z_hole = `outofcirc(`xn, `yn, A1);
> x_hole = `outofcirc(`yn, `zn, A1);
> y_hole = `outofcirc(`zn, `xn, A1);

{uv coordinate mapping}
uv_hole = `outofcirc(`un, `vn, A1);

{uv mesh coordinate mapping}
luv_hole = `outofcirc(`lun, `lvn, A1);


>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>

-- 
#	John E. de Valpine
#	president
#
#	visarc incorporated
#	http://www.visarc.com
#
#	channeling technology for superior design and construction




From gregoryjward at gmail.com  Wed Apr 13 19:09:55 2005
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Wed Apr 13 19:12:26 2005
Subject: [Radiance-general] perforate.cal
In-Reply-To: <425D40FE.2020702@visarc.com>
References: <259780-22005431371518242@M2W062.mail2web.com>
	<425D2A14.1020002@iebele.nl> <425D40FE.2020702@visarc.com>
Message-ID: <8720764f9abcedacc627206e1db138e3@gmail.com>

The U and V values defined in rayinit.cal will work for planar surfaces 
of any orientation, but will not work for curved surfaces or meshes.  
For these, you need to define a local (u,v) mapping and apply Lu and Lv 
on a mesh surface as Guilio suggests, or else come up with an 
approximation plane that will work and use that by rotating your 
function.  You can always rotate any .cal function to another 
orientation by adding transform arguments (-rx, -ry, -rz) to the 
mixfunc primitive that references it.

-Greg

> From: atelier iebele abel <atelier@iebele.nl>
> Date: April 13, 2005 7:17:56 AM PDT
>
> Hi group,
>
> I use a file called perforate.cal (from Georg).
> Is it possible to change this file in such way that use it on surfaces 
> which various normal directions ( not only through x, y or z plane) ?
>
> -Iebele


From atelier at iebele.nl  Wed Apr 13 19:30:42 2005
From: atelier at iebele.nl (atelier iebele abel)
Date: Wed Apr 13 19:28:58 2005
Subject: [Radiance-general] perforate.cal
In-Reply-To: <425D40FE.2020702@visarc.com>
References: <259780-22005431371518242@M2W062.mail2web.com>	<425D2A14.1020002@iebele.nl>
	<425D40FE.2020702@visarc.com>
Message-ID: <425D5742.5020309@iebele.nl>

Hi Jack,

It works perfect! 
Great, thanks!

-Iebele

Jack de Valpine wrote:

> Hi Iebele,
>
> You could try the following additions to the cal file. I am not sure 
> if this will work as I am not in a location to try it out right now. 
> See inline below...
>
> -Jack
>
> atelier iebele abel wrote:
>
>> Hi group,
>>
>> I use a file called perforate.cal (from Georg).
>> Is it possible to change this file in such way that use it on 
>> surfaces which various normal directions ( not only through x, y or z 
>> plane) ?
>>
>>
>> -Iebele
>>
>>
>> perforate.cal:
>> {
>>        perforate.cal
>>        Perforation function for approximately horizontal sufaces,
>>        for use in a mixfunc. Foreground is solid, background the holes.
>>        Set background to empty for a true perforation, or to a different
>>        material for polka dots.
>>
>>        Relative hole size is determined by A1.
>>        Size of single circle is 1 - scale as required (eg. 0.05m).
>>
>>        x_hole cuts holes in x-direction (through the y-z plane)
>>        y_hole cuts holes in y-direction (through the x-z plane)
>>        z_hole cuts holes in z-direction (through the x-y plane)
>>
>>    Georg Mischler 30. 04. 1993
>> }
>>
>> `xn = mod(Px, 1) - 0.5;
>> `yn = mod(Py, 1) - 0.5;
>> `zn = mod(Pz, 1) - 0.5;
>
>
> {uv coordinate mapping}
> `un = mod(U, 1) - 0.5;
> `vn = mod(V, 1) - 0.5;
>
> {uv mesh coordinate mapping}
> `lun = mod(Lu, 1) - 0.5;
> `lvn = mod(Lv, 1) - 0.5;
>
>> `outofcirc(x, y, r) = if(sqrt(x*x + y*y) - r, 1, 0);
>>
>> z_hole = `outofcirc(`xn, `yn, A1);
>> x_hole = `outofcirc(`yn, `zn, A1);
>> y_hole = `outofcirc(`zn, `xn, A1);
>
>
> {uv coordinate mapping}
> uv_hole = `outofcirc(`un, `vn, A1);
>
> {uv mesh coordinate mapping}
> luv_hole = `outofcirc(`lun, `lvn, A1);
>
>
>>
>>
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general@radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
>

From missngao at gmail.com  Thu Apr 14 02:04:22 2005
From: missngao at gmail.com (Siritip Harn.)
Date: Thu Apr 14 02:04:48 2005
Subject: [Radiance-general] xglaresrc in CYGWIN
Message-ID: <b094d4d405041317041fe46963@mail.gmail.com>

Hi,

   I'm using CYGWIN version of Radiance release 3R6P1 compiled by
Francesco Anselmo.
   I was trying to use xglaresrc but it prompted "command not found".
When I tried this same command in the previous version of CYGWIN
Radiance in another computer, it worked. Please let me know what I
should do. Thank you very much.

Regards,
Siritip H.
MS Arch Candidate
Texas A&M University

From francesco.anselmo at arup.com  Thu Apr 14 17:42:44 2005
From: francesco.anselmo at arup.com (Francesco Anselmo)
Date: Thu Apr 14 17:52:50 2005
Subject: [Radiance-general] xglaresrc in CYGWIN
Message-ID: <13DD387AFBC5154096CF3097A6D71631078020@ldcexc01.global.arup.com>

Hi,

The latest Radiance binaries for Cygwin I've compiled do include xglaresrc

http://www.bozzograo.net/radiance/modules.php?op=modload&name=Downloads&file
=index&req=getit&lid=2

Regards,

Francesco


___________________________________________________________________
Electronic mail messages entering and leaving Arup business
systems are scanned for acceptability of content and viruses.

From grobe at gmx.net  Sat Apr 16 16:52:46 2005
From: grobe at gmx.net (Lars O. Grobe)
Date: Sat Apr 16 16:53:00 2005
Subject: [Radiance-general] instance problem?
Message-ID: <4d24fd59a4510d3e08db30fed037a4d8@gmx.net>

Hi!

I am having some strange errors with a huge radiance scene here. As you 
can see, some surfaces are rendered as black (the region over the 
arches). These errors arise since I added more and more geometry. The 
model is made up of a lot (!!!) of instances, to get all the geometry 
into memory, but I know that there is some problem with overlapping 
instances. So is this a symptom for such problems, or am I experiencing 
something completely different here?

I attach the small pic, which should be ok for the list. Thank you for 
any help, CU Lars.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: still05e.jpg
Type: image/jpeg
Size: 13368 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20050416/a25160e3/still05e.jpg
From gregoryjward at gmail.com  Sat Apr 16 17:45:24 2005
From: gregoryjward at gmail.com (Greg Ward)
Date: Sat Apr 16 17:46:37 2005
Subject: [Radiance-general] instance problem?
In-Reply-To: <4d24fd59a4510d3e08db30fed037a4d8@gmx.net>
References: <4d24fd59a4510d3e08db30fed037a4d8@gmx.net>
Message-ID: <339bed7366992175463110acada8f351@gmail.com>

Hi Lars,

Can you offer us a clue as to what this image is _supposed_ to look 
like, or what version of Radiance you are using?

-Greg

> From: Lars O. Grobe <grobe@gmx.net>
> Date: April 16, 2005 7:52:46 AM PDT
>
> Hi!
>
> I am having some strange errors with a huge radiance scene here. As 
> you can see, some surfaces are rendered as black (the region over the 
> arches). These errors arise since I added more and more geometry. The 
> model is made up of a lot (!!!) of instances, to get all the geometry 
> into memory, but I know that there is some problem with overlapping 
> instances. So is this a symptom for such problems, or am I 
> experiencing something completely different here?
>
> I attach the small pic, which should be ok for the list. Thank you for 
> any help, CU Lars.


From grobe at gmx.net  Sat Apr 16 17:59:06 2005
From: grobe at gmx.net (Lars O. Grobe)
Date: Sat Apr 16 17:59:13 2005
Subject: [Radiance-general] instance problem?
In-Reply-To: <339bed7366992175463110acada8f351@gmail.com>
References: <4d24fd59a4510d3e08db30fed037a4d8@gmx.net>
	<339bed7366992175463110acada8f351@gmail.com>
Message-ID: <ce937a6db6b5f1b9c10a528b8fc63b59@gmx.net>

> Can you offer us a clue as to what this image is _supposed_ to look 
> like, or what version of Radiance you are using?

Hi Greg!

There is an image mapped onto the region over the arcs. I attach an 
older image where I had less geometry in the scene. Here the black 
region does not appear.

I am using radiance 3.6.1, compiled it on a x86 machine.

CU Lars.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: still05good.jpg
Type: image/jpeg
Size: 7242 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20050416/26a99b77/still05good-0001.jpg
From gregoryjward at gmail.com  Sat Apr 16 23:01:10 2005
From: gregoryjward at gmail.com (Greg Ward)
Date: Sat Apr 16 23:02:23 2005
Subject: [Radiance-general] instance problem?
In-Reply-To: <ce937a6db6b5f1b9c10a528b8fc63b59@gmx.net>
References: <4d24fd59a4510d3e08db30fed037a4d8@gmx.net>
	<339bed7366992175463110acada8f351@gmail.com>
	<ce937a6db6b5f1b9c10a528b8fc63b59@gmx.net>
Message-ID: <7df7a15b4d0162d47059ec6d73774152@gmail.com>

Hi Lars,

I'm only guessing, but is it possible that you have two surfaces 
coincident in that plane?  There's no way to debug this problem based 
on a pair of images.  I haven't seen a rendering problem similar to 
this before.

-Greg

> From: Lars O. Grobe <grobe@gmx.net>
> Date: April 16, 2005 8:59:06 AM PDT
>
>> Can you offer us a clue as to what this image is _supposed_ to look 
>> like, or what version of Radiance you are using?
>
> Hi Greg!
>
> There is an image mapped onto the region over the arcs. I attach an 
> older image where I had less geometry in the scene. Here the black 
> region does not appear.
>
> I am using radiance 3.6.1, compiled it on a x86 machine.
>
> CU Lars.


From roland.fleming at tuebingen.mpg.de  Mon Apr 18 12:44:02 2005
From: roland.fleming at tuebingen.mpg.de (Roland William Fleming)
Date: Mon Apr 18 12:40:40 2005
Subject: [Radiance-general] ximage vs. pcond
Message-ID: <0b25c4789fa28e67cc66aecc40220018@tuebingen.mpg.de>


Hi ---

Why does pcond produce a (slightly) different tonemapping from ximage 
-e auto ?  The contrast is better with ximage and I would like to take 
the output as my final image.  Is there an easy way to do this ?  I use 
the default values for all options.

A few things I've tried:

ximage -e auto hdr.pic
# produces nice high-contrast rendition of image

pcond hdr.pic ldr.pic
ximage ldr.pic
# tonemapping is inferior

ra_tiff ldr.pic ldr.tif
xview ldr,tif
# tonemapping is still not good.  This suggests that it is not the 2.2 
gamma of ximage that makes the images look good, because ra_tiff also 
uses 2.2 gamma correction (according to the documentation).

  ximage -e auto ldr,pic
# tonemapping is better, but still not quite as good as the original.


Thanks for any tips!
Roland Fleming


r o l a n d   f l e m i n g   p h d
r e s e a r c h   s c i e n t i s t

m a x   p l a n c k   i n s t i t u t e   f o r   b i o l o g i c a l   
c y b e r n e t i c s
s p e m a n n s t r .   3 8
7 2 0 7 6    t u e b i n g e n
g e r m a n y

t e l ::   [ + 4 9 ]   0 7 0 7 1   6 0 1 - 6 0 9


From grobe at gmx.net  Mon Apr 18 13:52:53 2005
From: grobe at gmx.net (Lars O. Grobe)
Date: Mon Apr 18 13:53:02 2005
Subject: [Radiance-general] instance problem?
In-Reply-To: <7df7a15b4d0162d47059ec6d73774152@gmail.com>
References: <4d24fd59a4510d3e08db30fed037a4d8@gmx.net>
	<339bed7366992175463110acada8f351@gmail.com>
	<ce937a6db6b5f1b9c10a528b8fc63b59@gmx.net>
	<7df7a15b4d0162d47059ec6d73774152@gmail.com>
Message-ID: <c29b54ba081fed6cb4534b11838f8aa0@gmx.net>

Hi!

> I'm only guessing, but is it possible that you have two surfaces 
> coincident in that plane?

No, I don't think so. I checked everything this morning. The silly and 
interesting about this is that I get the wall behind the affected 
surfaces as some kind of mask. I attach one more rvu-screenshot to 
illustrate this. As you can see, the surface is black, if there is a 
wall behind, and bright (colorpict-modifier visible) if the window 
opening (or no geometry at all) is behind. So it seams to be some kind 
of geometry mess that I created here. Also, this behaviour changes with 
oconv -r settings.

I use instances heavily in my scene. I have been warned not to do so 
(and of course, most of my instances don't fit into a cube, but are all 
kinds of random geometries). On the other hand, the model is too huge 
to be rendered without the use of instances, and I also cannot divide 
the model into some cube-like parts, as there is a logical structure of 
building elements in this building which defines how the model is 
built. So maybe I just corrupted the scene by using too many 
(overlapping) instances' octrees? This is the only explanaition I could 
imagine at the moment.

TIA+CU Lars.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: radiance_error.jpg
Type: image/jpeg
Size: 25054 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20050418/b17a914e/radiance_error-0001.jpg
From grobe at gmx.net  Mon Apr 18 14:26:28 2005
From: grobe at gmx.net (Lars O. Grobe)
Date: Mon Apr 18 14:26:30 2005
Subject: Problem solved somehow. (Re: [Radiance-general] instance problem?)
In-Reply-To: <c29b54ba081fed6cb4534b11838f8aa0@gmx.net>
References: <4d24fd59a4510d3e08db30fed037a4d8@gmx.net>
	<339bed7366992175463110acada8f351@gmail.com>
	<ce937a6db6b5f1b9c10a528b8fc63b59@gmx.net>
	<7df7a15b4d0162d47059ec6d73774152@gmail.com>
	<c29b54ba081fed6cb4534b11838f8aa0@gmx.net>
Message-ID: <4f08ac6912446393dfee0e64c48bf9ef@gmx.net>

Hi again.

I've changed the scripts which build my model. I had a hierarchical 
structure of nested octrees (instances), which were not really good. I 
had used this structure as I wanted to "bundle" geometry into some more 
cubic-like clusters. In fact, I did the opposite as I later "invented" 
the use of ximage to repeat objects - the result was that the octree 
contained not this "cube-like" block, but all the instances of this 
block - and thus this octree was not cube-like any more.

Now I use instances only on a lower level, for small objects, and use 
xform everywhere else. The errors are gone, as there are fewer 
overlappings of octrees now.

CU and thanks a lot, Lars.


From grobe at gmx.net  Mon Apr 18 14:28:22 2005
From: grobe at gmx.net (Lars O. Grobe)
Date: Mon Apr 18 14:28:24 2005
Subject: Problem solved somehow. (Re: [Radiance-general] instance problem?)
In-Reply-To: <4f08ac6912446393dfee0e64c48bf9ef@gmx.net>
References: <4d24fd59a4510d3e08db30fed037a4d8@gmx.net>
	<339bed7366992175463110acada8f351@gmail.com>
	<ce937a6db6b5f1b9c10a528b8fc63b59@gmx.net>
	<7df7a15b4d0162d47059ec6d73774152@gmail.com>
	<c29b54ba081fed6cb4534b11838f8aa0@gmx.net>
	<4f08ac6912446393dfee0e64c48bf9ef@gmx.net>
Message-ID: <4ce70387b56bebef77777c8e00d692b3@gmx.net>

> use of ximage to repeat objects - the result was that the octree 
> contained not this "cube-like" block, [...]

          ^^^
          XFORM of course.

Sorry, CU Lars.


From gregoryjward at gmail.com  Mon Apr 18 18:14:36 2005
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Mon Apr 18 18:15:15 2005
Subject: Problem solved somehow. (Re: [Radiance-general] instance problem?)
In-Reply-To: <4f08ac6912446393dfee0e64c48bf9ef@gmx.net>
References: <4d24fd59a4510d3e08db30fed037a4d8@gmx.net>
	<339bed7366992175463110acada8f351@gmail.com>
	<ce937a6db6b5f1b9c10a528b8fc63b59@gmx.net>
	<7df7a15b4d0162d47059ec6d73774152@gmail.com>
	<c29b54ba081fed6cb4534b11838f8aa0@gmx.net>
	<4f08ac6912446393dfee0e64c48bf9ef@gmx.net>
Message-ID: <cf92157d86c8cc87c02ac995d75fec3b@gmail.com>

It's a shame we'll never know what caused this problem, whether it was 
the model or a bug....

> From: Lars O. Grobe <grobe@gmx.net>
> Date: April 18, 2005 5:26:28 AM PDT
>
> Hi again.
>
> I've changed the scripts which build my model. I had a hierarchical 
> structure of nested octrees (instances), which were not really good. I 
> had used this structure as I wanted to "bundle" geometry into some 
> more cubic-like clusters. In fact, I did the opposite as I later 
> "invented" the use of ximage to repeat objects - the result was that 
> the octree contained not this "cube-like" block, but all the instances 
> of this block - and thus this octree was not cube-like any more.
>
> Now I use instances only on a lower level, for small objects, and use 
> xform everywhere else. The errors are gone, as there are fewer 
> overlappings of octrees now.
>
> CU and thanks a lot, Lars.


From gregoryjward at gmail.com  Mon Apr 18 18:27:13 2005
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Mon Apr 18 18:28:28 2005
Subject: [Radiance-general] ximage vs. pcond
In-Reply-To: <0b25c4789fa28e67cc66aecc40220018@tuebingen.mpg.de>
References: <0b25c4789fa28e67cc66aecc40220018@tuebingen.mpg.de>
Message-ID: <9e21829bc9ffe8ca03db0197d7d20abc@gmail.com>

Hi Roland,

Pcond and ximage use completely different implementations of the 
histogram adjustment operator.  By design, they should be reasonably 
well matched if you use the default options for pcond and "ximage -e 
auto", or "pcond -s -c" to match "ximage -e human".  However, because 
the histograms are computed in a slightly different way, you can 
sometimes get discrepancies.

If you want your output to match the ximage display, I suggest you use 
normtiff rather than pcond, which performs tone-mapping using the same 
algorithms in ximage, and converts to a 24-bit RGB TIFF output.

-Greg


From rpg at rumblestrip.org  Mon Apr 18 20:17:31 2005
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Mon Apr 18 20:17:58 2005
Subject: [Radiance-general] ximage vs. pcond
In-Reply-To: <9e21829bc9ffe8ca03db0197d7d20abc@gmail.com>
References: <0b25c4789fa28e67cc66aecc40220018@tuebingen.mpg.de>
	<9e21829bc9ffe8ca03db0197d7d20abc@gmail.com>
Message-ID: <55736.209.212.87.250.1113848251.squirrel@209.212.87.250>


On Mon, April 18, 2005 12:27 pm, Gregory J. Ward said:

> If you want your output to match the ximage display, I suggest you use
> normtiff rather than pcond, which performs tone-mapping using the same
> algorithms in ximage, and converts to a 24-bit RGB TIFF output.

The bad thing about Radiance is its enormous depth.

The good thing about Radiance is its enormous depth.

Would you believe I've never used this program, normtiff?!  Don't answer
that.  I've always run pcond -h then used ra_tiff to get tiffs that I
could print.  And wouldn't you know it, just today I'm working on some
images that needed to go through this process; I just used normtiff
instead and they look *much* better (and it's one less step, to boot). 
Bliss.

-- 
Rob Guglielmetti
www.rumblestrip.org

From gregoryjward at gmail.com  Mon Apr 18 20:33:05 2005
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Mon Apr 18 20:33:39 2005
Subject: [Radiance-general] ximage vs. pcond
In-Reply-To: <55736.209.212.87.250.1113848251.squirrel@209.212.87.250>
References: <0b25c4789fa28e67cc66aecc40220018@tuebingen.mpg.de>
	<9e21829bc9ffe8ca03db0197d7d20abc@gmail.com>
	<55736.209.212.87.250.1113848251.squirrel@209.212.87.250>
Message-ID: <7c2813a733f8017046cb55c2c43f05cb@gmail.com>

Bear in mind that normtiff (and ximage -e auto) don't do everything 
pcond can do.  In particular, they cannot simulate human loss in acuity 
and veiling glare, so if you really want "pcond -h", don't expect 
"normtiff -h" to work as a substitute.  Also, if you are converting 
animation frames and want all the frames to use the same tone-mapping, 
pcond -I works with the output of phisto, whereas there is no such 
option in normtiff.

Just had to throw in some caveats.
-Greg

> From: "Rob Guglielmetti" <rpg@rumblestrip.org>
> Date: April 18, 2005 11:17:31 AM PDT
>
> On Mon, April 18, 2005 12:27 pm, Gregory J. Ward said:
>
>> If you want your output to match the ximage display, I suggest you use
>> normtiff rather than pcond, which performs tone-mapping using the same
>> algorithms in ximage, and converts to a 24-bit RGB TIFF output.
>
> The bad thing about Radiance is its enormous depth.
>
> The good thing about Radiance is its enormous depth.
>
> Would you believe I've never used this program, normtiff?!  Don't 
> answer
> that.  I've always run pcond -h then used ra_tiff to get tiffs that I
> could print.  And wouldn't you know it, just today I'm working on some
> images that needed to go through this process; I just used normtiff
> instead and they look *much* better (and it's one less step, to boot).
> Bliss.
>
> -- 
> Rob Guglielmetti
> www.rumblestrip.org


From rpg at rumblestrip.org  Mon Apr 18 20:43:52 2005
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Mon Apr 18 20:44:15 2005
Subject: [Radiance-general] ximage vs. pcond
In-Reply-To: <7c2813a733f8017046cb55c2c43f05cb@gmail.com>
References: <0b25c4789fa28e67cc66aecc40220018@tuebingen.mpg.de>
	<9e21829bc9ffe8ca03db0197d7d20abc@gmail.com>
	<55736.209.212.87.250.1113848251.squirrel@209.212.87.250>
	<7c2813a733f8017046cb55c2c43f05cb@gmail.com>
Message-ID: <56285.209.212.87.250.1113849832.squirrel@209.212.87.250>


On Mon, April 18, 2005 2:33 pm, Gregory J. Ward said:
> Bear in mind that normtiff (and ximage -e auto) don't do everything
> pcond can do.  In particular, they cannot simulate human loss in acuity
> and veiling glare, so if you really want "pcond -h", don't expect
> "normtiff -h" to work as a substitute.  Also, if you are converting
> animation frames and want all the frames to use the same tone-mapping,
> pcond -I works with the output of phisto, whereas there is no such
> option in normtiff.

Yes, I noticed in the manpage that "normtiff -h" is a subset of "pcond
-h".  In my case here, it worked well because these are nighttime exterior
images but made with crude representations for the luminaires, and pcond's
veiling glare treatment was not desirable for the purposes of these images
(and for some reason switching that off (pcond -h -v-) gave me some odd
artifacts).  It was about then that your email about normtiff showed up.

Thanks for the heads up though.  There should be a warning on the download
page for Radiance: "warning, entering DEEP water..." (or deep
*something*.)

-- 
Rob Guglielmetti
www.rumblestrip.org

From Rob.Fitzsimmons at Summit.Fiserv.com  Tue Apr 19 02:20:55 2005
From: Rob.Fitzsimmons at Summit.Fiserv.com (Fitzsimmons, Rob)
Date: Tue Apr 19 02:23:41 2005
Subject: [Radiance-general] 6" Fresnel ies
Message-ID: <B8DD8375FCE2C94B9F170D9277C1FA2B8C58D7@corvallis>

Would anyone happen to have an ies file for a
500 Watt 6" Fresnel Spot / flood light?
Or perhaps advise me on how to create one from this photometic data?
www.altmanltg.com/Data/Detail/ Theatrical%20Lighting/Fresnels/1KAF/kaf.pdf

Thanks
Rob F

From shakespe at indiana.edu  Tue Apr 19 03:42:20 2005
From: shakespe at indiana.edu (Shakespeare, Robert A.)
Date: Tue Apr 19 03:42:47 2005
Subject: [Radiance-general] 6" Fresnel ies
Message-ID: <C4DB975B8FB42B44AB8CD12824D239F201C4624B@iu-mssg-mbx07.exchange.iu.edu>

I think I can meet your need. I will look tomorrow. It may be a simple
and perhaps under sampled file but it would be physically based.
I do have an inventory of contemporary theatre ellipsoidal fixture files
which we have measured in my lab at a variety of lamp orientation(peak,
blending and flat field) and lens (barrel in, sharp and out)settings.

-Rob Shakespeare


-----Original Message-----
From: radiance-general-bounces@radiance-online.org
[mailto:radiance-general-bounces@radiance-online.org] On Behalf Of
Fitzsimmons, Rob
Sent: Monday, April 18, 2005 7:21 PM
To: 'Radiance-general@radiance-online.org'
Subject: [Radiance-general] 6" Fresnel ies

Would anyone happen to have an ies file for a
500 Watt 6" Fresnel Spot / flood light?
Or perhaps advise me on how to create one from this photometic data?
www.altmanltg.com/Data/Detail/
Theatrical%20Lighting/Fresnels/1KAF/kaf.pdf

Thanks
Rob F

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general



From rpg at rumblestrip.org  Tue Apr 19 04:25:41 2005
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Tue Apr 19 04:26:06 2005
Subject: [Radiance-general] 6" Fresnel ies
In-Reply-To: <C4DB975B8FB42B44AB8CD12824D239F201C4624B@iu-mssg-mbx07.exchange.iu.edu>
References: <C4DB975B8FB42B44AB8CD12824D239F201C4624B@iu-mssg-mbx07.exchange.iu.edu>
Message-ID: <088f8535e899d61b7a01dc88dcbeea6f@rumblestrip.org>


On Apr 18, 2005, at 9:42 PM, Shakespeare, Robert A. wrote:

> I think I can meet your need. I will look tomorrow. It may be a simple
> and perhaps under sampled file but it would be physically based.
> I do have an inventory of contemporary theatre ellipsoidal fixture 
> files
> which we have measured in my lab at a variety of lamp orientation(peak,
> blending and flat field) and lens (barrel in, sharp and out)settings.

Hi Rob(s),

Rob (S.), would you be willing to share those?  I recall reading about 
your measurement process (and of course the renderings in RwR) for 
these theatrical ERSs, and I think they'd be very helpful for some of 
the work I do, and more importantly, for some of the fun experimental 
stuff I'd *like* do do in all my abundant free time.  Let me (us) know.

=================
    Rob Guglielmetti
www.rumblestrip.org


From cbauer- at t-online.de  Tue Apr 19 10:56:34 2005
From: cbauer- at t-online.de (Carsten Bauer)
Date: Tue Apr 19 09:43:36 2005
Subject: Problem solved somehow. (Re: [Radiance-general] instance problem?)
References: <4d24fd59a4510d3e08db30fed037a4d8@gmx.net>	<339bed7366992175463110acada8f351@gmail.com>	<ce937a6db6b5f1b9c10a528b8fc63b59@gmx.net>	<7df7a15b4d0162d47059ec6d73774152@gmail.com>	<c29b54ba081fed6cb4534b11838f8aa0@gmx.net>	<4f08ac6912446393dfee0e64c48bf9ef@gmx.net>
	<cf92157d86c8cc87c02ac995d75fec3b@gmail.com>
Message-ID: <4264C7C2.8060907@t-online.de>

Gregory J. Ward wrote:
> It's a shame we'll never know what caused this problem, whether it was 
> the model or a bug....
> 


Hi Greg & Lars,

just guessing form afar, I think it is (was..) not a bug but a simple 
instance overlapping problem. If several instances overlap, each one 
will be traversed for a ray hit, and the one which actually 'wins' in 
the end is determined by the way they're inserted into the object set 
for this octree subcube, and not e.g by the distance of the ray hit to 
the view point.

(PS one reason for me joining into that discussion and risking a 
statement is to check if my understanding of the meachinism is correct...)

-cb


From gregoryjward at gmail.com  Tue Apr 19 20:03:49 2005
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Tue Apr 19 20:04:27 2005
Subject: Problem solved somehow. (Re: [Radiance-general] instance problem?)
In-Reply-To: <4264C7C2.8060907@t-online.de>
References: <4d24fd59a4510d3e08db30fed037a4d8@gmx.net>	<339bed7366992175463110acada8f351@gmail.com>	<ce937a6db6b5f1b9c10a528b8fc63b59@gmx.net>	<7df7a15b4d0162d47059ec6d73774152@gmail.com>	<c29b54ba081fed6cb4534b11838f8aa0@gmx.net>	<4f08ac6912446393dfee0e64c48bf9ef@gmx.net>
	<cf92157d86c8cc87c02ac995d75fec3b@gmail.com>
	<4264C7C2.8060907@t-online.de>
Message-ID: <0a17803f9ad2ef233ec6e351b6b147e7@gmail.com>

Carsten is correct in the case of actual overlapping geometry, but 
overlapping instances are not a problem per se, though they do tend to 
make oconv take a lot longer and use a lot more memory resolving them.

If two or more instances overlap, Radiance traces rays in each 
instance, and returns the geometry that intersects first (in the case 
of multiple intersections).  If two bits of geometry are coincident, 
the one that gets returned is decided randomly, usually as a result of 
floating point roundoff errors.  The same is true when geometry is not 
contained in instances.

-Greg

> From: Carsten Bauer <cbauer-@t-online.de>
> Date: April 19, 2005 1:56:34 AM PDT
>
> Gregory J. Ward wrote:
>> It's a shame we'll never know what caused this problem, whether it 
>> was the model or a bug....
>
> Hi Greg & Lars,
>
> just guessing form afar, I think it is (was..) not a bug but a simple 
> instance overlapping problem. If several instances overlap, each one 
> will be traversed for a ray hit, and the one which actually 'wins' in 
> the end is determined by the way they're inserted into the object set 
> for this octree subcube, and not e.g by the distance of the ray hit to 
> the view point.
>
> (PS one reason for me joining into that discussion and risking a 
> statement is to check if my understanding of the meachinism is 
> correct...)
>
> -cb


From tiago at tkh.att.ne.jp  Wed Apr 20 10:12:14 2005
From: tiago at tkh.att.ne.jp (Santiago Torres)
Date: Wed Apr 20 10:08:45 2005
Subject: [Radiance-general] mksource program
In-Reply-To: <9bc1d79db5b75c6a755059e545b889f1@gmail.com>
Message-ID: <ABEIIOCILNBBDDEPEPICOEOACEAA.tiago@tkh.att.ne.jp>


Hi Greg and all,
I`ve tried mksource a bit and it works wonderfully, it`s a great program
(and just what I needed)
I put a page with the first sample renders:
http://home.att.ne.jp/banana/tiago/radiance/mksource.htm
rpict was only with -ab 1, and all the rest defaults since I just wanted to
test the sources

first I tried mksource with the default settings but it seemed to produce
too few sources, and the render looked unnatural
(don`t think this could be fixed with rpict settings)
I tried changing the max angle to 0.5 (-a .5) but that was too small, and
the render took too long (at least for my laptop)
so I tried other three values (5 deg, 2 and 1, after moving to a faster
computer) and the differences are visible. The render with -a 1 took about
15 hours, so I don`t want to imagine what would happen with -ab 3 -ad 5000
etc...
I guess it`s a compromise, and maybe making the threshold higher would
reduce the number of sources and allow a smaller -a?
I will keep trying other settings and let you know how it goes.
Regards

Santiago




> -----Original Message-----
> From: radiance-general-bounces@radiance-online.org
> [mailto:radiance-general-bounces@radiance-online.org]On Behalf Of
> Gregory J.Ward
> Sent: Wednesday, April 13, 2005 3:39 AM
> To: Radiance general discussion
> Subject: [Radiance-general] mksource program
>
>
> I recently wrote a program for computing light sources to accelerate
> image-based lighting for anyone who's working on that.  You can get it
> in last night's HEAD, and the synopsis is below:
>
> NAME
>         mksource - compute distant sources for RADIANCE image-based
> lighting
>
> SYNOPSIS
>         mksource [ -d nsamps ][ -t thresh ][ -a maxang ] [ octree ]
>
> DESCRIPTION
>         Mksource produces a RADIANCE scene description of distant illum
> sources
>         corresponding to bright, concentrated  regions  in  the  given
> ambient
>         environment.   Any local geometry is ignored in the input
> octree, which
>         should be derived from a captured light probe.  The output
> sources  may
>         then  be  combined  with  this  environment to produce a more
> efficient
>         scene for rendering, faster and less prone to sampling artifacts.
>
> --------
> I'd be interested in feedback if you give this a try.
>
> -Greg
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>



From gregoryjward at gmail.com  Wed Apr 20 19:04:48 2005
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Wed Apr 20 19:05:27 2005
Subject: [Radiance-general] mksource program
In-Reply-To: <ABEIIOCILNBBDDEPEPICOEOACEAA.tiago@tkh.att.ne.jp>
References: <ABEIIOCILNBBDDEPEPICOEOACEAA.tiago@tkh.att.ne.jp>
Message-ID: <607e1e54e3ea2af6953e6e949035336e@gmail.com>

Hi Santiago,

Thanks for giving mksource a try -- and for sharing your results.

You might try adding "-dj .6 -ps 1" to your rpict options (or setting 
PENUMBRA=True if you're using rad) to see if that helps with a smaller 
number of light sources.  If it still looks wonky, maybe I'll reduce 
the maximum source angle default.

-Greg

> From: "Santiago Torres" <tiago@tkh.att.ne.jp>
> Date: April 20, 2005 1:12:14 AM PDT
>
> Hi Greg and all,
> I`ve tried mksource a bit and it works wonderfully, it`s a great 
> program
> (and just what I needed)
> I put a page with the first sample renders:
> http://home.att.ne.jp/banana/tiago/radiance/mksource.htm
> rpict was only with -ab 1, and all the rest defaults since I just 
> wanted to
> test the sources
>
> first I tried mksource with the default settings but it seemed to 
> produce
> too few sources, and the render looked unnatural
> (don`t think this could be fixed with rpict settings)
> I tried changing the max angle to 0.5 (-a .5) but that was too small, 
> and
> the render took too long (at least for my laptop)
> so I tried other three values (5 deg, 2 and 1, after moving to a faster
> computer) and the differences are visible. The render with -a 1 took 
> about
> 15 hours, so I don`t want to imagine what would happen with -ab 3 -ad 
> 5000
> etc...
> I guess it`s a compromise, and maybe making the threshold higher would
> reduce the number of sources and allow a smaller -a?
> I will keep trying other settings and let you know how it goes.
> Regards
>
> Santiago


From Rob.Fitzsimmons at Summit.Fiserv.com  Wed Apr 20 20:43:13 2005
From: Rob.Fitzsimmons at Summit.Fiserv.com (Fitzsimmons, Rob)
Date: Wed Apr 20 20:46:02 2005
Subject: [Radiance-general] mksource program
Message-ID: <B8DD8375FCE2C94B9F170D9277C1FA2B1919E7@corvallis>

Okay,
II'll be the guy sitting in the corner with the cone hat

What should the octree consist of exactly?  

I tried a rnl box - projected with angmap.cal
Made an octree and used it with mkillum.
But it produced no output.
probably because geometry is ignored...

I don't  get how it can derive anything from a probe without geometry -  the
probe image has to be projected onto something - right?

I can't make an octree directly of a probe pic - can I?

Rob "another question" Fitz


-----Original Message-----
From: Santiago Torres
To: Radiance general discussion
Sent: 4/20/2005 1:12 AM
Subject: RE: [Radiance-general] mksource program


Hi Greg and all,
I`ve tried mksource a bit and it works wonderfully, it`s a great program
(and just what I needed)
I put a page with the first sample renders:
http://home.att.ne.jp/banana/tiago/radiance/mksource.htm
rpict was only with -ab 1, and all the rest defaults since I just wanted
to
test the sources

first I tried mksource with the default settings but it seemed to
produce
too few sources, and the render looked unnatural
(don`t think this could be fixed with rpict settings)
I tried changing the max angle to 0.5 (-a .5) but that was too small,
and
the render took too long (at least for my laptop)
so I tried other three values (5 deg, 2 and 1, after moving to a faster
computer) and the differences are visible. The render with -a 1 took
about
15 hours, so I don`t want to imagine what would happen with -ab 3 -ad
5000
etc...
I guess it`s a compromise, and maybe making the threshold higher would
reduce the number of sources and allow a smaller -a?
I will keep trying other settings and let you know how it goes.
Regards

Santiago




> -----Original Message-----
> From: radiance-general-bounces@radiance-online.org
> [mailto:radiance-general-bounces@radiance-online.org]On Behalf Of
> Gregory J.Ward
> Sent: Wednesday, April 13, 2005 3:39 AM
> To: Radiance general discussion
> Subject: [Radiance-general] mksource program
>
>
> I recently wrote a program for computing light sources to accelerate
> image-based lighting for anyone who's working on that.  You can get it
> in last night's HEAD, and the synopsis is below:
>
> NAME
>         mksource - compute distant sources for RADIANCE image-based
> lighting
>
> SYNOPSIS
>         mksource [ -d nsamps ][ -t thresh ][ -a maxang ] [ octree ]
>
> DESCRIPTION
>         Mksource produces a RADIANCE scene description of distant
illum
> sources
>         corresponding to bright, concentrated  regions  in  the  given
> ambient
>         environment.   Any local geometry is ignored in the input
> octree, which
>         should be derived from a captured light probe.  The output
> sources  may
>         then  be  combined  with  this  environment to produce a more
> efficient
>         scene for rendering, faster and less prone to sampling
artifacts.
>
> --------
> I'd be interested in feedback if you give this a try.
>
> -Greg
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>



_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general

From ian at testers.homelinux.net  Wed Apr 20 21:05:17 2005
From: ian at testers.homelinux.net (Ian Tester)
Date: Wed Apr 20 21:05:51 2005
Subject: [Radiance-general] mksource program
In-Reply-To: <B8DD8375FCE2C94B9F170D9277C1FA2B1919E7@corvallis>
References: <B8DD8375FCE2C94B9F170D9277C1FA2B1919E7@corvallis>
Message-ID: <4266A7ED.5070306@testers.homelinux.net>

Fitzsimmons, Rob wrote:
> Okay,
> II'll be the guy sitting in the corner with the cone hat
> 
> What should the octree consist of exactly?  
> 
> I tried a rnl box - projected with angmap.cal
> Made an octree and used it with mkillum.
> But it produced no output.
> probably because geometry is ignored...
> 
> I don't  get how it can derive anything from a probe without geometry -  the
> probe image has to be projected onto something - right?
> 
> I can't make an octree directly of a probe pic - can I?
> 
> Rob "another question" Fitz

Below is what I've always used, taken from the example given by Paul
Debevec. I haven't used a light probe with mkillum yet. I had noticed that
I needed at least -ab 1 (really INDIRECT=1 in the .rif file) to make a
light probe work. I suppose using mkillum would allow the use of -ab 0
while still lighting up the scene?

---

void colorpict hdr_probe_image
7       red     green   blue    uffizi_probe.hdr        angmap.cal      u
     v
0
0

hdr_probe_image glow light_probe
0
0
4       1       1       1       0

light_probe source ibl_environment
0
0
4       0       1       0       360

From Rob.Fitzsimmons at Summit.Fiserv.com  Wed Apr 20 21:13:52 2005
From: Rob.Fitzsimmons at Summit.Fiserv.com (Fitzsimmons, Rob)
Date: Wed Apr 20 21:16:42 2005
Subject: [Radiance-general] mksource program
Message-ID: <B8DD8375FCE2C94B9F170D9277C1FA2B8C58E2@corvallis>

 Aha 

I've been using the genbox method - also from Debevec. 

Thanks 
 

-----Original Message-----
From: Ian Tester
To: Radiance general discussion
Sent: 4/20/2005 12:05 PM
Subject: Re: [Radiance-general] mksource program

Fitzsimmons, Rob wrote:
> Okay,
> II'll be the guy sitting in the corner with the cone hat
> 
> What should the octree consist of exactly?  
> 
> I tried a rnl box - projected with angmap.cal
> Made an octree and used it with mkillum.
> But it produced no output.
> probably because geometry is ignored...
> 
> I don't  get how it can derive anything from a probe without geometry
-  the
> probe image has to be projected onto something - right?
> 
> I can't make an octree directly of a probe pic - can I?
> 
> Rob "another question" Fitz

Below is what I've always used, taken from the example given by Paul
Debevec. I haven't used a light probe with mkillum yet. I had noticed
that
I needed at least -ab 1 (really INDIRECT=1 in the .rif file) to make a
light probe work. I suppose using mkillum would allow the use of -ab 0
while still lighting up the scene?

---

void colorpict hdr_probe_image
7       red     green   blue    uffizi_probe.hdr        angmap.cal
u
     v
0
0

hdr_probe_image glow light_probe
0
0
4       1       1       1       0

light_probe source ibl_environment
0
0
4       0       1       0       360

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general

From gregoryjward at gmail.com  Wed Apr 20 21:30:19 2005
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Wed Apr 20 21:30:54 2005
Subject: [Radiance-general] mksource program
In-Reply-To: <B8DD8375FCE2C94B9F170D9277C1FA2B8C58E2@corvallis>
References: <B8DD8375FCE2C94B9F170D9277C1FA2B8C58E2@corvallis>
Message-ID: <f48df097de7922d22e2081c005b215a2@gmail.com>

Yeah, local light probe mappings don't work with mksource.  I suppose 
you could get mkillum to work for these, but in general there is no 
real advantage to using local geometry for light probes, anyway.

-G

> From: "Fitzsimmons, Rob" <Rob.Fitzsimmons@Summit.Fiserv.com>
> Date: April 20, 2005 12:13:52 PM PDT
>
>  Aha
>
> I've been using the genbox method - also from Debevec.
>
> Thanks


From missngao at gmail.com  Sat Apr 23 03:50:56 2005
From: missngao at gmail.com (Siritip Harn.)
Date: Sat Apr 23 03:51:30 2005
Subject: [Radiance-general] xglaresrc question
Message-ID: <b094d4d4050422185018c7c528@mail.gmail.com>

Dear all,

    I'm a new user to RAD and now I'm using CYGWIN RADIANCE. I tried
to use xglaresrc command and then it prompted me with "window seems to
be the wrong size" and "error reading glare sources".
   I'm not sure what this means and how I could solve it. Could anyone
please let me know what was the cause of the problem?
   Thank you very much in advance.

Best Regards,
Siritip H.

From cveleglg at bankerinter.net  Fri Apr 22 10:32:50 2005
From: cveleglg at bankerinter.net (Marija)
Date: Sat Apr 23 12:00:54 2005
Subject: [Radiance-general] Illuminance values
Message-ID: <003401c54717$18b25f10$0100a8c0@mallah>

Hi,
I have simple question: How could I determine illuminance distribution on a 
workplane?

My scene is simple:
1.Rectangular room, with ideally diffuse surfaces. Reflectances are 0.8 0.8 
0.8.
2.Room dimensions are 10x10x10 and the center is positioned in the (0,0,0).
3.In the middle of the room is placed a luminaire, with indirect light 
distribution. It is oriented toward ceiling, so workplane illuminance has 
only indirect component.

I found somewhere in the mail archives a command for illuminance calculation 
for a grid of points. For my testing room the command is:
cnt 6 6| rcalc -e '$1=$1*2-5; $2=$2*2-5; $3=-4; $4=0; $5=0; $6=1'| 
rtrace -h -oov -I -ab 2 room.oct| rcalc -e '$1=$1; $2=$2; $3=$3; 
$4=47.4*$4+120*$5+11.6*$6'>illuminance.txt

Which value is the most appropriate for -ab parameter? Should I also use 
some other ambient parameters?
I've tried with different -ab values and results are ascending, so I don't 
know which result is the most accurate.

Purpose of this calculations is to compare values from Radiance with values 
obtained form "Infinite Plane-Exitance Difference Method" approved from 
IESNA for calculation of indirect illuminance.

Thanks,
Marija
 


From tiago at tkh.att.ne.jp  Sat Apr 23 13:39:00 2005
From: tiago at tkh.att.ne.jp (Santiago Torres)
Date: Sat Apr 23 13:35:36 2005
Subject: [Radiance-general] mksource program
In-Reply-To: <607e1e54e3ea2af6953e6e949035336e@gmail.com>
Message-ID: <ABEIIOCILNBBDDEPEPICMEPECEAA.tiago@tkh.att.ne.jp>

hello again,

I updated the page with one more image (No. 5) with -dj .6 -ps 1
the page address is again:
http://home.att.ne.jp/banana/tiago/radiance/mksource.htm
It looks much better but probably could improve. what do you think?
I`ll keep trying and reporting. Any suggestions are of course very welcome.
regards,

Santiago


> -----Original Message-----
> From: radiance-general-bounces@radiance-online.org 
> [mailto:radiance-general-bounces@radiance-online.org]On Behalf Of 
> Gregory J.Ward
> Sent: Thursday, April 21, 2005 2:05 AM
> To: Radiance general discussion
> Subject: Re: [Radiance-general] mksource program
> 
> 
> Hi Santiago,
> 
> Thanks for giving mksource a try -- and for sharing your results.
> 
> You might try adding "-dj .6 -ps 1" to your rpict options (or setting 
> PENUMBRA=True if you're using rad) to see if that helps with a smaller 
> number of light sources.  If it still looks wonky, maybe I'll reduce 
> the maximum source angle default.
> 
> -Greg
> 



From missngao at gmail.com  Sat Apr 23 22:09:07 2005
From: missngao at gmail.com (Siritip Harn.)
Date: Sat Apr 23 22:09:37 2005
Subject: [Radiance-general] xglaresrc question
Message-ID: <b094d4d4050423130931ddf59a@mail.gmail.com>

Dear all,

   I'm a new user to RAD and now I'm using CYGWIN RADIANCE. I tried
to use xglaresrc command and then it prompted me with "window seems to
be the wrong size" and "error reading glare sources".
  I'm not sure what this means and how I could solve it. Could anyone
please let me know what was the cause of the problem?
  Thank you very much in advance.

Best Regards,
Siritip H.

From maino at psu.edu  Sat Apr 23 23:42:57 2005
From: maino at psu.edu (J. David Maino)
Date: Sat Apr 23 23:43:24 2005
Subject: [Radiance-general] oconv question
Message-ID: <000001c5484d$6a38b4b0$3d1b4742@jdm341work>

Hi,

 

I'm new to radiance, and relatively new to linux (I've been running Debian
sarge (2.6 kernel) for a few months now). I recently installed the .deb
packages for radiance, but I'm having some problems with the oconv command.
For some reason bash can't find it. I followed the instructions for
installing the .deb files <a
href=http://www.dream.unipa.it/dream/pub/dot/anselmo/radiance/packages/>here
<a>, and did not see any mention of oconv. Is this a separate package I need
to install? Is there another PATH that needs to be set? Any help you could
offer would be appreciated.

 

Thanks,

 

Dave Maino

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20050423/b94a221a/attachment.htm
From rpg at rumblestrip.org  Sun Apr 24 06:17:14 2005
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Sun Apr 24 06:17:49 2005
Subject: [Radiance-general] oconv question
In-Reply-To: <000001c5484d$6a38b4b0$3d1b4742@jdm341work>
References: <000001c5484d$6a38b4b0$3d1b4742@jdm341work>
Message-ID: <9ac90250e2c9993d3542365972617875@rumblestrip.org>


On Apr 23, 2005, at 5:42 PM, J. David Maino wrote:
> I?m new to radiance, and relatively new to linux (I?ve been running  
> Debian sarge (2.6 kernel) for a few months now). I recently installed  
> the .deb packages for radiance, but I?m having some problems with the  
> oconv command. For some reason bash can?t find it. I followed the  
> instructions for installing the .deb files <a  
> href=http://www.dream.unipa.it/dream/pub/dot/anselmo/radiance/ 
> packages/>here<a>, and did not see any mention of oconv. Is this a  
> separate package I need to install? Is there another PATH that needs  
> to be set? Any help you could offer would be appreciated.

Hi David,

Welcome to the world of Radiance!  From the base of the learning curve,  
it can seem like a long way to the top.  I'm about 25% of the way up  
the slope and it was totally worth every grey hair.  =8-)

I'm not familiar with debian (tho my friend keeps telling me to ditch  
Fedora and use Debian instead), but I'd assume that the .deb thingy is  
like an .rpm distro?  Regardless, I'd bet that the problem is that the  
.deb installer is just not setting your PATH correctly, if at all.

Usually the Radiance binaries are installed to /usr/local/bin; probably  
the .deb installer placed all the binaries properly, but didn't set the  
PATH.  As a test you could try typing /usr/local/bin/oconv instead of  
oconv (along with the rest of the command you intended).  If that  
works, you can be sure that oconv is alive and well in the proper  
place, it's just that your "environment" doesn't know where to look for  
it.  You need to set your PATH (search path) to look in the  
/usr/local/bin directory.  There are actually a couple of search paths  
& variables that need to get set.  The way you do this is add a few  
instructions to your .bash_profile file.  Add these lines:

PATH=/usr/local/bin:$PATH
RAYPATH=.:/usr/local/lib/ray
export PATH RAYPATH

... to your .bash_profile file (this is always located in your home  
directory), and you should be good to go.  Let us know if you have  
trouble editing this file.  I know what it's like to arrive at a bash  
prompt after years of using windows PCs or macs, and trying to do the  
most basic of tasks.

Hopefully this will get you up and running and on your way to Radiance  
enlightenment. Good luck, have fun, and report back on this frequency  
if you have more questions!

=================
    Rob Guglielmetti
www.rumblestrip.org


From rpg at rumblestrip.org  Sun Apr 24 06:31:07 2005
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Sun Apr 24 06:31:38 2005
Subject: [Radiance-general] Illuminance values
In-Reply-To: <003401c54717$18b25f10$0100a8c0@mallah>
References: <003401c54717$18b25f10$0100a8c0@mallah>
Message-ID: <40e60a09465f010d753b711843ffdadc@rumblestrip.org>

On Apr 22, 2005, at 4:32 AM, Marija wrote:
> My scene is simple:
> 1.Rectangular room, with ideally diffuse surfaces. Reflectances are 
> 0.8 0.8 0.8.
> 2.Room dimensions are 10x10x10 and the center is positioned in the 
> (0,0,0).
> 3.In the middle of the room is placed a luminaire, with indirect light 
> distribution. It is oriented toward ceiling, so workplane illuminance 
> has only indirect component.

> Which value is the most appropriate for -ab parameter? Should I also 
> use some other ambient parameters?
> I've tried with different -ab values and results are ascending, so I 
> don't know which result is the most accurate.

The answer to the first question is, whatever value you deem 
appropriate.  The answer to the second one is, probably.

The raw truth of using Radiance is that there is no single correct 
answer for parameterizing your simulations. The proper settings for the 
myriad options will differ with every single simulation you do, and 
depend on... pretty much everything.  The good news is that the rad 
utility can be put to good use as you get started with Radiance.  rad 
makes good guesses about proper parameters for your simulations based 
on a few basic assumptions about your scene.  You can even save those 
assumptions to a file and reuse them in subsequent rpict and rtrace 
runs.  Refer to the manpage of rpict for more onfo on that.  There are 
also some good discussions of this on this list's archives (I should 
know, since I learned about this from this very list).

=================
    Rob Guglielmetti
www.rumblestrip.org


From maino at psu.edu  Sun Apr 24 15:36:12 2005
From: maino at psu.edu (J. David Maino)
Date: Sun Apr 24 15:36:40 2005
Subject: [Radiance-general] oconv question
In-Reply-To: <9ac90250e2c9993d3542365972617875@rumblestrip.org>
Message-ID: <000201c548d2$950fa650$3d1b4742@jdm341work>

Thanks for the helpful info and the warm welcome! I had tried to export the
path before but it apparently didn't work for some reason (probably put a
colon in the wrong place or something, heh), so I did it again and it works
fine now. 

On a side note, I would highly recommend Debian if you are thinking about
switching. I haven't had much experience with too many other distributions
(only RedHat and Mandrake), but I like Debian the best out of them, mostly
for it's package management system (to answer your question, yes, the deb
files are like rpms).

Thanks again,

Dave

-----Original Message-----
From: radiance-general-bounces@radiance-online.org
[mailto:radiance-general-bounces@radiance-online.org] On Behalf Of Rob
Guglielmetti
Sent: Sunday, April 24, 2005 12:17 AM
To: Radiance general discussion
Subject: Re: [Radiance-general] oconv question


On Apr 23, 2005, at 5:42 PM, J. David Maino wrote:
> I'm new to radiance, and relatively new to linux (I've been running  
> Debian sarge (2.6 kernel) for a few months now). I recently installed  
> the .deb packages for radiance, but I'm having some problems with the  
> oconv command. For some reason bash can't find it. I followed the  
> instructions for installing the .deb files <a  
> href=http://www.dream.unipa.it/dream/pub/dot/anselmo/radiance/ 
> packages/>here<a>, and did not see any mention of oconv. Is this a  
> separate package I need to install? Is there another PATH that needs  
> to be set? Any help you could offer would be appreciated.

Hi David,

Welcome to the world of Radiance!  From the base of the learning curve,  
it can seem like a long way to the top.  I'm about 25% of the way up  
the slope and it was totally worth every grey hair.  =8-)

I'm not familiar with debian (tho my friend keeps telling me to ditch  
Fedora and use Debian instead), but I'd assume that the .deb thingy is  
like an .rpm distro?  Regardless, I'd bet that the problem is that the  
.deb installer is just not setting your PATH correctly, if at all.

Usually the Radiance binaries are installed to /usr/local/bin; probably  
the .deb installer placed all the binaries properly, but didn't set the  
PATH.  As a test you could try typing /usr/local/bin/oconv instead of  
oconv (along with the rest of the command you intended).  If that  
works, you can be sure that oconv is alive and well in the proper  
place, it's just that your "environment" doesn't know where to look for  
it.  You need to set your PATH (search path) to look in the  
/usr/local/bin directory.  There are actually a couple of search paths  
& variables that need to get set.  The way you do this is add a few  
instructions to your .bash_profile file.  Add these lines:

PATH=/usr/local/bin:$PATH
RAYPATH=.:/usr/local/lib/ray
export PATH RAYPATH

... to your .bash_profile file (this is always located in your home  
directory), and you should be good to go.  Let us know if you have  
trouble editing this file.  I know what it's like to arrive at a bash  
prompt after years of using windows PCs or macs, and trying to do the  
most basic of tasks.

Hopefully this will get you up and running and on your way to Radiance  
enlightenment. Good luck, have fun, and report back on this frequency  
if you have more questions!

=================
    Rob Guglielmetti
www.rumblestrip.org


_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general



From cbauer- at t-online.de  Mon Apr 25 18:54:18 2005
From: cbauer- at t-online.de (Carsten Bauer)
Date: Mon Apr 25 18:06:54 2005
Subject: [Radiance-general] radzilla 1.0
Message-ID: <426D20BA.6040604@t-online.de>

Hi all,

with some months delay I finally managed to put together a 1.0 release
of radzilla.

There is a lot of new stuff to check out, e.g full compatibility to
classic Radiance, a new source partitioning scheme and some new
modifer/material primitives --

--and certainly this or that bug lurking around and waiting to be 
discovered :-)

The link is as usual:

http://www.cb-d.de/radzilla.html

Have fun !!

Carsten







From grobe at gmx.net  Fri Apr 29 14:21:11 2005
From: grobe at gmx.net (Lars O. Grobe)
Date: Fri Apr 29 14:21:38 2005
Subject: [Radiance-general] Material definition for bronze?
Message-ID: <91a43968beeadc9ca9e6c84378671f84@gmx.net>

Hi,

does anybody out there have a nice material definition of bronze? I 
have been searching in Andrew Glassner's collection (from mgf website) 
and in Radiance's libraries, without success, and I don't have samples 
here. So it would be great if someone has it in his collection, if not, 
I will go find samples and scan them...

TIA+CU, Lars.


