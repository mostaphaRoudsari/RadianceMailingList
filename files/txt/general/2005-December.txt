From b.beeson at cundall.com.au  Thu Dec  1 04:44:21 2005
From: b.beeson at cundall.com.au (Beeson, Brett)
Date: Thu Dec  1 04:45:56 2005
Subject: [Radiance-general] multiple processors
Message-ID: <7E0B66590000A543B7BFDDA5DF12FBD40840AE@CJPSYD2.cjp.co.uk>

Hi Francesco and all,

I've read through the mailing list archives and experimented with "rad
-N" and rpiece.  I'm using multiple CPUs and multiple machines on
'standard' linux distros - cannot use openmosix.

Two questions:

1. 
If I do this:
>rad -v single_view -N 5 myscene.rif
Rad will *not* split up my scene for me (using rpiece).  However, if I
specify multiple views, rad *will* run rpict multiple times
simultaneously (ie. as forked/backgrounded processes).
Is this expected behaviour? I was hoping it would split my scene!

2.
Usually I use RIF files to store my "scene=", "illum=", "zone="
variables, and to let rad handle calling oconv/rpict/pfilt/etc correctly
with appropriate settings.  

To divide up a scene, it seems I must use rpiece which calls rpict.
(Let's *assume* my NFS lockd is working okay).  Therefore I cannot use
rad and my rif files?  So I have to do what rad does *manually* and
incorporate rpiece into this process?

Many thanks,

Brett Beeson

CUNDALL
HSBC Building Level 20
300 Queen Street
Brisbane QLD 4000
tel:   +61 (0)7 3023 5048
fax:  +61 (0)7 3023 4000
www.cundall.com.au


-----Original Message-----
From: radiance-general-bounces@radiance-online.org
[mailto:radiance-general-bounces@radiance-online.org] On Behalf Of
Francesco Anselmo
Sent: 22 November 2005 18:55
To: Radiance general discussion
Subject: Re: [Radiance-general] multiple processors

Hi Nicholas,

There are many ways to run Radiance with multiple processors
and multiple machines. Some programs like rad and rholo have
support for multiple processors (-N option), rpiece can be used
to split a picture into tiles and have them rendered by different
processors or computers over a network (for instance sharing
the scene files with nfs).

Personally, I like to use openmosix with Radiance, and you can
read about my experience in a previous message to this mailing list:

http://www.radiance-online.org/pipermail/radiance-general/2004-August/00
1992.html

__
Francesco
pisuke@blueyonder.co.uk

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general



Brett Beeson
Sustainable Designer


Important Notice.  Use of this email and any attachments is subject to
the terms on www.cundall.com.au.
Please read that notice before proceeding. 
If you cannot access these terms please telephone (02) 8424 7000 or
reply to this email and we will send you a copy. 


From markus.reisinger at philips.com  Thu Dec  1 06:30:22 2005
From: markus.reisinger at philips.com (Markus Reisinger)
Date: Thu Dec  1 06:33:40 2005
Subject: [Radiance-general] Markus Reisinger/EHV/LIGHTING/PHILIPS is out of
	the office.
Message-ID: <OFE344896F.B7D24A22-ONC12570CA.001E3F0E-C12570CA.001E3F0F@philips.com>

I will be out of the office starting  01.12.2005 and will not return until
03.01.2006.

I will only be able to reach my  email intermittantly; so forgive me not
being able to respond for the time being.


From gregoryjward at gmail.com  Thu Dec  1 07:30:23 2005
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Thu Dec  1 07:52:20 2005
Subject: [Radiance-general] multiple processors
In-Reply-To: <7E0B66590000A543B7BFDDA5DF12FBD40840AE@CJPSYD2.cjp.co.uk>
References: <7E0B66590000A543B7BFDDA5DF12FBD40840AE@CJPSYD2.cjp.co.uk>
Message-ID: <E5C35223-D0DA-4388-AEB5-DC6C73CA9842@gmail.com>

Hi Brett,
> Two questions:
>
> 1.
> If I do this:
>> rad -v single_view -N 5 myscene.rif
> Rad will *not* split up my scene for me (using rpiece).  However, if I
> specify multiple views, rad *will* run rpict multiple times
> simultaneously (ie. as forked/backgrounded processes).
> Is this expected behaviour? I was hoping it would split my scene!

This is the current behavior of rad.  I did not implement calls to  
rpiece with the -N option, only parallel rendering of multiple  
views.  Running rpiece properly and handling all the border cases,  
recovery, etc., is a bit complicated.  It would be nice to do in rad,  
but I haven't put it in there, yet.  Maybe when I have a 4-processor  
machine, it will seem worth my while.

> 2.
> Usually I use RIF files to store my "scene=", "illum=", "zone="
> variables, and to let rad handle calling oconv/rpict/pfilt/etc  
> correctly
> with appropriate settings.
>
> To divide up a scene, it seems I must use rpiece which calls rpict.
> (Let's *assume* my NFS lockd is working okay).  Therefore I cannot use
> rad and my rif files?  So I have to do what rad does *manually* and
> incorporate rpiece into this process?

If you run "rad -v 0 input.rif", it will call oconv and mkillum to  
generate the octree, without doing any renderings.  You can then pick  
up the job with rpiece at that point.

-Greg

From francesco.anselmo at arup.com  Thu Dec  1 10:46:55 2005
From: francesco.anselmo at arup.com (Francesco Anselmo)
Date: Thu Dec  1 10:48:17 2005
Subject: [Radiance-general] multiple processors
Message-ID: <2C0020B9EB71CE4281B292F0E16A6DDE7FC741@ldcexc02.global.arup.com>

Hi Brett, 

>1. 
>If I do this:
>>rad -v single_view -N 5 myscene.rif
>Rad will *not* split up my scene for me (using rpiece).  However, if I
specify multiple views, rad >*will* run rpict multiple times
simultaneously (ie. as forked/backgrounded processes).
>Is this expected behaviour? I was hoping it would split my scene!

As Greg already explained, this is the expected behaviour, but if you
need to render
more than 1 view you can always share the ambient cache and save some
time.

>(Let's *assume* my NFS lockd is working okay).  

There shouldn't be any problem with NFS lockd if you're using a recent
linux distro.
Of course you will need to login to each machine or use some kind of
remote login 
to launch your rpiece processes.

Francesco
____________________________________________________________
Electronic mail messages entering and leaving Arup  business
systems are scanned for acceptability of content and viruses

From francesco.anselmo at arup.com  Thu Dec  1 11:09:05 2005
From: francesco.anselmo at arup.com (Francesco Anselmo)
Date: Thu Dec  1 11:11:28 2005
Subject: [Radiance-general] High Dynamic Range Imaging: the book
Message-ID: <2C0020B9EB71CE4281B292F0E16A6DDE7FC742@ldcexc02.global.arup.com>

Hi all,

For those who haven't noticed it yet, Greg is among 
the authors of a new book on HDRI:

ISBN: 978-0-12-585263-0 

http://www.elsevier.com/wps/find/bookdescription.cws_home/705753/descrip
tion#description

http://books.elsevier.com/companions/0125852630/hdri/html/hdri.html

I've received it a couple of days ago, so it should be easily available
in Europe. It also includes a DVD with HDR images and source code.

Once again: Thanks, Greg!

--
Francesco 
____________________________________________________________
Electronic mail messages entering and leaving Arup  business
systems are scanned for acceptability of content and viruses

From gregoryjward at gmail.com  Thu Dec  1 17:56:01 2005
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu Dec  1 18:04:05 2005
Subject: [Radiance-general] High Dynamic Range Imaging: the book
In-Reply-To: <2C0020B9EB71CE4281B292F0E16A6DDE7FC742@ldcexc02.global.arup.com>
References: <2C0020B9EB71CE4281B292F0E16A6DDE7FC742@ldcexc02.global.arup.com>
Message-ID: <61FE56DB-9427-4AB0-B590-95D4FF32EC3D@gmail.com>

Hi Francesco,

Thanks for the plug.  If anyone is interested in picking up a copy,  
be sure to order directly from Elsevier, as it will arrive a couple  
of weeks sooner.  Also, you will pay less by using the coupon on my  
website (and the publisher and therefore the authors will still end  
up making more than if you ordered on Amazon):

	http://www.anyhere.com/gward/papers/REINHARD_Flyer.pdf

-Greg

P.S.  In case you're curious, I wrote the chapters on HDR image  
encoding, capture, and display, and provided some of the material for  
the color chapter, which Erik Reinhard wrote.  Erik also wrote the  
intro. and chapters 7 & 8 on tone-mapping.  Sumanta Pattanaik wrote  
chapter 6 (also tone-mapping) and Paul Debevec wrote the chapter on  
image-based lighting.  That and the color chapter are probably my  
favorites.  (Though I like my chapters too, of course.)

> From: "Francesco Anselmo" <francesco.anselmo@arup.com>
> Date: December 1, 2005 2:09:05 AM PST
>
> Hi all,
>
> For those who haven't noticed it yet, Greg is among
> the authors of a new book on HDRI:
>
> ISBN: 978-0-12-585263-0
>
> http://www.elsevier.com/wps/find/bookdescription.cws_home/705753/ 
> descrip
> tion#description
>
> http://books.elsevier.com/companions/0125852630/hdri/html/hdri.html
>
> I've received it a couple of days ago, so it should be easily  
> available
> in Europe. It also includes a DVD with HDR images and source code.
>
> Once again: Thanks, Greg!
>
> --
> Francesco
>

From jedev at visarc.com  Thu Dec  1 18:19:48 2005
From: jedev at visarc.com (Jack de Valpine)
Date: Thu Dec  1 18:23:03 2005
Subject: [Radiance-general] High Dynamic Range Imaging: the book
In-Reply-To: <61FE56DB-9427-4AB0-B590-95D4FF32EC3D@gmail.com>
References: <2C0020B9EB71CE4281B292F0E16A6DDE7FC742@ldcexc02.global.arup.com>
	<61FE56DB-9427-4AB0-B590-95D4FF32EC3D@gmail.com>
Message-ID: <438F30B4.5020106@visarc.com>

He Greg,

Thanks for the information and the discount. I have been sitting around 
wondering when Amazon would finally ship. Based on this I canceled my 
order with them and went directly to the source. Though anyone who is 
ordering direct from Elsevier should be clear to explain that the 
discount is still in effect for 80810, (the person I spoke to on the 
phone initially thought that this might not be in effect, I guess 
because of how them do their numbering or something).

-Jack

Greg Ward wrote:

> Hi Francesco,
>
> Thanks for the plug.  If anyone is interested in picking up a copy,  
> be sure to order directly from Elsevier, as it will arrive a couple  
> of weeks sooner.  Also, you will pay less by using the coupon on my  
> website (and the publisher and therefore the authors will still end  
> up making more than if you ordered on Amazon):
>
>     http://www.anyhere.com/gward/papers/REINHARD_Flyer.pdf
>
> -Greg
>
> P.S.  In case you're curious, I wrote the chapters on HDR image  
> encoding, capture, and display, and provided some of the material for  
> the color chapter, which Erik Reinhard wrote.  Erik also wrote the  
> intro. and chapters 7 & 8 on tone-mapping.  Sumanta Pattanaik wrote  
> chapter 6 (also tone-mapping) and Paul Debevec wrote the chapter on  
> image-based lighting.  That and the color chapter are probably my  
> favorites.  (Though I like my chapters too, of course.)
>
>> From: "Francesco Anselmo" <francesco.anselmo@arup.com>
>> Date: December 1, 2005 2:09:05 AM PST
>>
>> Hi all,
>>
>> For those who haven't noticed it yet, Greg is among
>> the authors of a new book on HDRI:
>>
>> ISBN: 978-0-12-585263-0
>>
>> http://www.elsevier.com/wps/find/bookdescription.cws_home/705753/ 
>> descrip
>> tion#description
>>
>> http://books.elsevier.com/companions/0125852630/hdri/html/hdri.html
>>
>> I've received it a couple of days ago, so it should be easily  available
>> in Europe. It also includes a DVD with HDR images and source code.
>>
>> Once again: Thanks, Greg!
>>
>> -- 
>> Francesco
>>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>

-- 
# Jack de Valpine
# president
#
# visarc incorporated
# http://www.visarc.com
#
# channeling technology for superior design and construction



From kthibault at biomechanicsinc.com  Thu Dec  1 20:17:34 2005
From: kthibault at biomechanicsinc.com (Kirk Thibault)
Date: Thu Dec  1 20:19:03 2005
Subject: [Radiance-general] High Dynamic Range Imaging: the book
In-Reply-To: <438F30B4.5020106@visarc.com>
References: <2C0020B9EB71CE4281B292F0E16A6DDE7FC742@ldcexc02.global.arup.com>
	<61FE56DB-9427-4AB0-B590-95D4FF32EC3D@gmail.com>
	<438F30B4.5020106@visarc.com>
Message-ID: <8D22B178-5203-46E5-BE50-9B4BD4A1DB0F@biomechanicsinc.com>

Is Elsevier shipping to the US now?  I placed my order at the end of  
August and have not seen anything.  I used their web form yesterday  
to inquire about my order status.

Congrats again on the book!

kirk
------------------------------

Kirk L. Thibault, Ph.D.
kthibault@biomechanicsinc.com

p.  215.271.7720
f.   215.271.7740
c.  267.918.6908

skype. kirkthibault




On Dec 1, 2005, at 12:19 PM, Jack de Valpine wrote:

> He Greg,
>
> Thanks for the information and the discount. I have been sitting  
> around wondering when Amazon would finally ship. Based on this I  
> canceled my order with them and went directly to the source. Though  
> anyone who is ordering direct from Elsevier should be clear to  
> explain that the discount is still in effect for 80810, (the person  
> I spoke to on the phone initially thought that this might not be in  
> effect, I guess because of how them do their numbering or something).
>
> -Jack
>
> Greg Ward wrote:
>
>> Hi Francesco,
>>
>> Thanks for the plug.  If anyone is interested in picking up a  
>> copy,  be sure to order directly from Elsevier, as it will arrive  
>> a couple  of weeks sooner.  Also, you will pay less by using the  
>> coupon on my  website (and the publisher and therefore the authors  
>> will still end  up making more than if you ordered on Amazon):
>>
>>     http://www.anyhere.com/gward/papers/REINHARD_Flyer.pdf
>>
>> -Greg
>>
>> P.S.  In case you're curious, I wrote the chapters on HDR image   
>> encoding, capture, and display, and provided some of the material  
>> for  the color chapter, which Erik Reinhard wrote.  Erik also  
>> wrote the  intro. and chapters 7 & 8 on tone-mapping.  Sumanta  
>> Pattanaik wrote  chapter 6 (also tone-mapping) and Paul Debevec  
>> wrote the chapter on  image-based lighting.  That and the color  
>> chapter are probably my  favorites.  (Though I like my chapters  
>> too, of course.)
>>
>>> From: "Francesco Anselmo" <francesco.anselmo@arup.com>
>>> Date: December 1, 2005 2:09:05 AM PST
>>>
>>> Hi all,
>>>
>>> For those who haven't noticed it yet, Greg is among
>>> the authors of a new book on HDRI:
>>>
>>> ISBN: 978-0-12-585263-0
>>>
>>> http://www.elsevier.com/wps/find/bookdescription.cws_home/705753/  
>>> descrip
>>> tion#description
>>>
>>> http://books.elsevier.com/companions/0125852630/hdri/html/hdri.html
>>>
>>> I've received it a couple of days ago, so it should be easily   
>>> available
>>> in Europe. It also includes a DVD with HDR images and source code.
>>>
>>> Once again: Thanks, Greg!
>>>
>>> -- 
>>> Francesco
>>>
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general@radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
>
> -- 
> # Jack de Valpine
> # president
> #
> # visarc incorporated
> # http://www.visarc.com
> #
> # channeling technology for superior design and construction
>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general


From tjtiancheng at gmail.com  Fri Dec  2 06:32:20 2005
From: tjtiancheng at gmail.com (Tian Cheng)
Date: Fri Dec  2 06:34:01 2005
Subject: [Radiance-general] about Radlink
Message-ID: <779bb9320512012132r5896861du@mail.gmail.com>

Hi, everyone. I have some questions:
1. After my simulation via Radiance, how can I postprocess it via
Radlink? Once i convert a DXF file to a Radiance file in Adeline, it
seems that i can not open Radlink.
 2. In the process of simulation via Radlink, system always tell me :
Could not open file: *.rlo. Why? what can I do?
Thanks.

--
Peace of Mind.

From tbleicher at arcor.de  Fri Dec  2 11:44:05 2005
From: tbleicher at arcor.de (Thomas Bleicher)
Date: Fri Dec  2 11:45:38 2005
Subject: [Radiance-general] multiple processors
In-Reply-To: <E5C35223-D0DA-4388-AEB5-DC6C73CA9842@gmail.com>
References: <7E0B66590000A543B7BFDDA5DF12FBD40840AE@CJPSYD2.cjp.co.uk>
	<E5C35223-D0DA-4388-AEB5-DC6C73CA9842@gmail.com>
Message-ID: <8614B981-19C8-42C8-8805-46B063F9517A@arcor.de>


On 01.12.2005, at 07:30, Gregory J. Ward wrote:

>> 2.
>> Usually I use RIF files to store my "scene=", "illum=", "zone="
>> variables, and to let rad handle calling oconv/rpict/pfilt/etc  
>> correctly
>> with appropriate settings.
>>
>> To divide up a scene, it seems I must use rpiece which calls rpict.
>> (Let's *assume* my NFS lockd is working okay).  Therefore I cannot  
>> use
>> rad and my rif files?  So I have to do what rad does *manually* and
>> incorporate rpiece into this process?
>
> If you run "rad -v 0 input.rif", it will call oconv and mkillum to  
> generate the octree, without doing any renderings.  You can then  
> pick up the job with rpiece at that point.
>
> -Greg

To get the rpict parameters rad would produce use the options "-n -e"  
of rad
to have all the rendering steps printed to stdout. You can copy the  
necessary
rpict options to a file (ie. "rpict.opts") and include them in the  
rpiece
command line with "rpice ... @rpict.opts" (see the man page of rpiece  
for
details).

Thomas

From stb at sbi.dk  Fri Dec  2 13:13:46 2005
From: stb at sbi.dk (Steen Traberg-Borup)
Date: Fri Dec  2 13:15:43 2005
Subject: [Radiance-general] High Dynamic Range Imaging: the book
Message-ID: <000501c5f739$d8b14560$a162e282@stbpc>

Hello Radiance users!

I ordered one copy of the book yesterday from Amazon.co.uk (?34.99). I have just got a notice that they have dispatched the book today by air mail to be delivered between december 6. - 8., that is from UK to Denmark.

Best regards,

Steen Traberg-Borup

******************************************************************

Steen Traberg-Borup                   Phone:          +45 45865533
Danish Building Research Institute    Direct phone:   +45 45742380
Department of Health and Comfort      Fax:            +45 45867535
Dr. Neergaardsvej 15                  E-mail:           stb@sbi.dk
DK 2970 Horsholm                      URL:       http://www.sbi.dk
Denmark

******************************************************************
 


From gregoryjward at gmail.com  Fri Dec  2 18:17:28 2005
From: gregoryjward at gmail.com (Greg Ward)
Date: Fri Dec  2 18:18:56 2005
Subject: [Radiance-general] multiple processors
In-Reply-To: <8614B981-19C8-42C8-8805-46B063F9517A@arcor.de>
References: <7E0B66590000A543B7BFDDA5DF12FBD40840AE@CJPSYD2.cjp.co.uk>
	<E5C35223-D0DA-4388-AEB5-DC6C73CA9842@gmail.com>
	<8614B981-19C8-42C8-8805-46B063F9517A@arcor.de>
Message-ID: <32661A5E-3883-4BD1-A4A2-48396546E22B@gmail.com>

That's a good suggestion.  An easier method without the cut-and-paste  
is:

rad -v 0 input.rif OPT=render.opt
rpict @render.opt -vf view.vf [res] octree > output.pic

This also builds the octree.  Rpict can of course be replaced by rvu  
or rpiece or whatever.

-Greg

> From: Thomas Bleicher <tbleicher@arcor.de>
> Date: December 2, 2005 2:44:05 AM PST
>
> On 01.12.2005, at 07:30, Gregory J. Ward wrote:
>
>>> 2.
>>> Usually I use RIF files to store my "scene=", "illum=", "zone="
>>> variables, and to let rad handle calling oconv/rpict/pfilt/etc  
>>> correctly
>>> with appropriate settings.
>>>
>>> To divide up a scene, it seems I must use rpiece which calls rpict.
>>> (Let's *assume* my NFS lockd is working okay).  Therefore I  
>>> cannot use
>>> rad and my rif files?  So I have to do what rad does *manually* and
>>> incorporate rpiece into this process?
>>
>> If you run "rad -v 0 input.rif", it will call oconv and mkillum to  
>> generate the octree, without doing any renderings.  You can then  
>> pick up the job with rpiece at that point.
>>
>> -Greg
>
> To get the rpict parameters rad would produce use the options "-n - 
> e" of rad
> to have all the rendering steps printed to stdout. You can copy the  
> necessary
> rpict options to a file (ie. "rpict.opts") and include them in the  
> rpiece
> command line with "rpice ... @rpict.opts" (see the man page of  
> rpiece for
> details).
>
> Thomas
>

From Christoph.Reinhart at nrc-cnrc.gc.ca  Mon Dec  5 17:33:04 2005
From: Christoph.Reinhart at nrc-cnrc.gc.ca (Reinhart, Christoph)
Date: Mon Dec  5 17:34:33 2005
Subject: [Radiance-general] Workshop on Daylighting Simulation Tools offered
	at MIT to students and practitioners
Message-ID: <5910A0754536EA4AAD411AE8221C3962F47A1A@nrccenexb1.nrc.ca>

Dear Radiance colleagues,
 
The following announcement might be of interest to those of you located
in the greater Boston area.
 
Christoph
 
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 
Massachusetts Institute of Technology, Department of Architecture
Building Technology Program

If you wonder how to better integrate lighting issues in your design
projects, this 3-days IAP workshop is a great opportunity to learn more
about the tools and performance metrics available today to help you out
in this task:
 
Natural Light in Design: Using Simulation Tools to Explore Realistic
Daylight-Responsive Solutions

 
January 24, 25 and 31, 2006 - 09:30am-05:30pm 
 
Computer-based analysis techniques used as a basis for design decisions
are introduced in this course, with a focus on lighting and energy.
Participants will be exposed to traditional performance metrics, such as
daylight factor and avoidance of direct sunlight, and will also gain
knowledge and practice in emerging metrics based on dynamic annual
daylight simulations. Two days of formal instruction and hands-on
exercises will be followed by a day during which participants will be
able to apply the concepts learned to a design project of their
choosing. 
This workshop is open to students and practitioners. 
 
Prof. Marilyne Andersen, Dr. Christoph Reinhart (NRC Canada)
 
Registration deadline: December 12, 2005 

Course tuition fee: $180

 
For more information: http://architecture.mit.edu/subjects/sp06/4493.pdf
<http://architecture.mit.edu/subjects/sp06/4493.pdf>   
For questions and workshop registration: contact Kathleen Ross at 617-
253 1876 or kross@mit.edu <mailto:kross@mit.edu> 
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20051205/32b44508/attachment.html
From marcdevon at hotmail.com  Mon Dec  5 19:05:50 2005
From: marcdevon at hotmail.com (Marcus Jacobs)
Date: Mon Dec  5 19:07:34 2005
Subject: [Radiance-general] What's causing these artifacts???
Message-ID: <BAY102-F24B47FFB9825E0AC959DCAA4410@phx.gbl>

Dear Group

In some of my recent renders, I have encountered some very specious 
artifacts. I generally specify a high number of ambient division (usually 
around 3072) and ambient super samples (500-1000) for my renders.

The first ones are these mysterious dark splotches:

http://pg.photos.yahoo.com/ph/marcdevon/detail?.dir=b3e9&.dnm=4bcbre2.jpg&.src=ph

http://pg.photos.yahoo.com/ph/marcdevon/detail?.dir=b3e9&.dnm=c76fre2.jpg&.src=ph

I really can't figure out what's causing these. I am unsure if this is 
caused by poor interpolation. Also, occasionally I have come across the 
following bright spots:

http://pg.photos.yahoo.com/ph/marcdevon/detail?.dir=b3e9&.dnm=e02ere2.jpg&.src=ph

No matter how many ambient divisions that I specify (I went up to 16,000 
ambient divisions with 2000 ambient super samples),  I can't get rid of 
these bright spots. The problem with these particular artifacts is that I 
can not predict when it will occur. What I need the most when performing 
renders is predictability. Does anyone have any ideas?

Thanks

Marcus



From marcdevon at hotmail.com  Mon Dec  5 19:07:11 2005
From: marcdevon at hotmail.com (Marcus Jacobs)
Date: Mon Dec  5 19:08:42 2005
Subject: [Radiance-general] What's causing these artifacts???
Message-ID: <BAY102-F2938AED7558BA2E6FFCA90A4410@phx.gbl>

Dear Group

In some of my recent renders, I have encountered some very specious 
artifacts. I generally specify a high number of ambient division (usually 
around 3072) and ambient super samples (500-1000) for my renders.

The first ones are these mysterious dark splotches:

http://pg.photos.yahoo.com/ph/marcdevon/detail?.dir=b3e9&.dnm=4bcbre2.jpg&.src=ph

http://pg.photos.yahoo.com/ph/marcdevon/detail?.dir=b3e9&.dnm=c76fre2.jpg&.src=ph

I really can't figure out what's causing these. I am unsure if this is 
caused by poor interpolation. Also, occasionally I have come across the 
following bright spots:

http://pg.photos.yahoo.com/ph/marcdevon/detail?.dir=b3e9&.dnm=e02ere2.jpg&.src=ph

No matter how many ambient divisions that I specify (I went up to 16,000 
ambient divisions with 2000 ambient super samples),  I can't get rid of 
these bright spots. The problem with these particular artifacts is that I 
can not predict when it will occur. What I need the most when performing 
renders is predictability. Does anyone have any ideas?

Thanks

Marcus



From rob.fitzsimmons at Summit.Fiserv.com  Mon Dec  5 19:48:17 2005
From: rob.fitzsimmons at Summit.Fiserv.com (Fitzsimmons, Rob)
Date: Mon Dec  5 19:49:44 2005
Subject: [Radiance-general] What's causing these artifacts???
Message-ID: <B8DD8375FCE2C94B9F170D9277C1FA2B8C5C64@corvallis>

 What is your -aa ambient accuracy set at?
Also - does your rif have the correct size
ZONE= I  
I find that I often forget to update this when I create another rif based on
a previous rif

Rob

-----Original Message-----
From: Marcus Jacobs
To: radiance-general@radiance-online.org
Sent: 12/5/2005 10:07 AM
Subject: [Radiance-general] What's causing these artifacts???

Dear Group

In some of my recent renders, I have encountered some very specious 
artifacts. I generally specify a high number of ambient division
(usually 
around 3072) and ambient super samples (500-1000) for my renders.

The first ones are these mysterious dark splotches:

http://pg.photos.yahoo.com/ph/marcdevon/detail?.dir=b3e9&.dnm=4bcbre2.jp
g&.src=ph

http://pg.photos.yahoo.com/ph/marcdevon/detail?.dir=b3e9&.dnm=c76fre2.jp
g&.src=ph

I really can't figure out what's causing these. I am unsure if this is 
caused by poor interpolation. Also, occasionally I have come across the 
following bright spots:

http://pg.photos.yahoo.com/ph/marcdevon/detail?.dir=b3e9&.dnm=e02ere2.jp
g&.src=ph

No matter how many ambient divisions that I specify (I went up to 16,000

ambient divisions with 2000 ambient super samples),  I can't get rid of 
these bright spots. The problem with these particular artifacts is that
I 
can not predict when it will occur. What I need the most when performing

renders is predictability. Does anyone have any ideas?

Thanks

Marcus



_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general

From gregoryjward at gmail.com  Tue Dec  6 04:14:52 2005
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Tue Dec  6 04:56:56 2005
Subject: [Radiance-general] What's causing these artifacts???
In-Reply-To: <BAY102-F2938AED7558BA2E6FFCA90A4410@phx.gbl>
References: <BAY102-F2938AED7558BA2E6FFCA90A4410@phx.gbl>
Message-ID: <5087257D-916D-4D64-9DB3-7C11EF6363A3@gmail.com>

Hi Marcus,

Are you using rad at all for your renderings, or are you setting  
parameters by hand?  You wouldn't be performing an overture  
calculation with different -a* settings (in particular -ab and/or - 
av), would you?  The dark splotches look suspiciously like bad values  
in the ambient file at the start of the calculation.  Is that  
possible?  What are your rendering parameters?  It helps a lot in  
debugging a problem.  Your floor looks overly bright and even  
compared to the rest of the surfaces.  How is it defined?  Why aren't  
there any shadows under the chair legs?  What is your overall scene  
size (run oconv -d on the octree) and your -ar setting?

The bright splotches in your last example could be caused by the  
bright, narrow opening surrounding the skylight.  I would probably  
insert a rectangle flush with the ceiling and use mkillum to compute  
its effective output distribution to eliminate this particular artifact.

-Greg

> From: "Marcus Jacobs" <marcdevon@hotmail.com>
> Date: December 5, 2005 10:07:11 AM PST
>
> Dear Group
>
> In some of my recent renders, I have encountered some very specious  
> artifacts. I generally specify a high number of ambient division  
> (usually around 3072) and ambient super samples (500-1000) for my  
> renders.
>
> The first ones are these mysterious dark splotches:
>
> http://pg.photos.yahoo.com/ph/marcdevon/ 
> detail?.dir=b3e9&.dnm=4bcbre2.jpg&.src=ph
>
> http://pg.photos.yahoo.com/ph/marcdevon/ 
> detail?.dir=b3e9&.dnm=c76fre2.jpg&.src=ph
>
> I really can't figure out what's causing these. I am unsure if this  
> is caused by poor interpolation. Also, occasionally I have come  
> across the following bright spots:
>
> http://pg.photos.yahoo.com/ph/marcdevon/ 
> detail?.dir=b3e9&.dnm=e02ere2.jpg&.src=ph
>
> No matter how many ambient divisions that I specify (I went up to  
> 16,000 ambient divisions with 2000 ambient super samples),  I can't  
> get rid of these bright spots. The problem with these particular  
> artifacts is that I can not predict when it will occur. What I need  
> the most when performing renders is predictability. Does anyone  
> have any ideas?
>
> Thanks
>
> Marcus

From apian at pab-opto.de  Tue Dec  6 18:45:29 2005
From: apian at pab-opto.de (Peter Apian-Bennewitz)
Date: Tue Dec  6 18:46:59 2005
Subject: [Radiance-general] USB?linux remote shutter control of Nikons ?
Message-ID: <4395CE39.8030507@pab-opto.de>

Dear folks,

out of curisosity: has someone got a Nikon (model 8400/880/4500) 
remotely controlled (shutter speed etc. for HDR) under Linux  ?
Paul's informative posting from March 2005
    
http://www.radiance-online.org/pipermail/radiance-general/2005-March/002512.html
mentions hacking the firmware to get a remote controlled sequence of 
shutter speeds on a Nikon.

Linux USB pages say that most Nikons are supported by gphoto2:
    http://www.qbik.ch/usb/devices/showdev.php?id=1353
    http://www.teaser.fr/~hfiguiere/linux/digicam.html
Reading images on a 4500 with PTP mode works, remote trigger works, but 
mostly likely the firmware doesn't support setting of the shutter speed:

Nikon Europe support tells me that only the 8400,8800,L1/L101,S4 support 
remote control via USB (firmware of the 4500 at hand is 1.2, most recent 
one at Nikon is 1.3, which they say differs only in flash control). Has 
someone info on the inofficial side to this ?
(If you are not aware of it, holding the 'menu' button at power-on 
displays the firmware version)
Someone I talked to mentioned  some undocumented pins on the 4500 USB 
connector, which  are supposed to be RS232 with remote control 
features.  Apparently he'd be testing this soon.

Anyone aware of 3rd party companies selling something like an HDR 
firmware for NIkons (or other cameras) ?

Info on positive experiences with other brands and HDR control via USB 
on Linux would also be much appreciated.

TIA
-Peter

-- 
 pab-opto, Freiburg, Germany, http://www.pab-opto.de
 [see web page to check digital email signature]


From rpg at rumblestrip.org  Wed Dec  7 22:59:46 2005
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Wed Dec  7 23:01:13 2005
Subject: [Radiance-general] Sun too close to zenith
Message-ID: <43975B52.5040903@rumblestrip.org>

Hi all,

I'm using Francesco Anselmo's "radmap" script to generate some annual 
skies for a fairly low latitude, and for a portion of the summer gensky 
throws me a warning: "sun too close to zenith, reducing altitude to 87 
degrees".  This adjustment creates a slight "bump" in the summertime 
corner of the analemma when you view a hemispherical fisheye projection 
of the annual sun positions.  (The sun positions are being generated by 
the script, which is getting its info from an epw weather file.)

What is the cause for gensky relocating my suns to 87 degrees?

- Rob Guglielmetti

From gregoryjward at gmail.com  Wed Dec  7 23:39:28 2005
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Wed Dec  7 23:40:24 2005
Subject: [Radiance-general] Sun too close to zenith
In-Reply-To: <43975B52.5040903@rumblestrip.org>
References: <43975B52.5040903@rumblestrip.org>
Message-ID: <1980CFA3-A202-4FE1-BA69-B086C8F94240@gmail.com>

Hi Rob,

I'm not exactly sure why I put this in there, it was so long ago.  I  
may have simply been duplicating someone else's algorithm, or I may  
have found problems related to the sun at zenith.  The whole sky  
distribution is normalized to the zenith value, so having the sun too  
near could be a problem, or it might have been paranoia on my part.

You can try removing lines 218-225 in gensky.c and recompiling without:

	if (!overcast && altitude > 87.*PI/180.) {
		fprintf(stderr,
"%s: warning - sun too close to zenith, reducing altitude to 87  
degrees\n",
				progname);
		printf(
"# warning - sun too close to zenith, reducing altitude to 87 degrees 
\n");
		altitude = 87.*PI/180.;
	}

Try a few data points where the sun is at the zenith and see what  
happens.

-Greg

> From: Rob Guglielmetti <rpg@rumblestrip.org>
> Date: December 7, 2005 1:59:46 PM PST
>
> Hi all,
>
> I'm using Francesco Anselmo's "radmap" script to generate some  
> annual skies for a fairly low latitude, and for a portion of the  
> summer gensky throws me a warning: "sun too close to zenith,  
> reducing altitude to 87 degrees".  This adjustment creates a slight  
> "bump" in the summertime corner of the analemma when you view a  
> hemispherical fisheye projection of the annual sun positions.  (The  
> sun positions are being generated by the script, which is getting  
> its info from an epw weather file.)
>
> What is the cause for gensky relocating my suns to 87 degrees?
>
> - Rob Guglielmetti

From rpg at rumblestrip.org  Thu Dec  8 00:06:18 2005
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Thu Dec  8 00:07:34 2005
Subject: [Radiance-general] Sun too close to zenith
In-Reply-To: <1980CFA3-A202-4FE1-BA69-B086C8F94240@gmail.com>
References: <43975B52.5040903@rumblestrip.org>
	<1980CFA3-A202-4FE1-BA69-B086C8F94240@gmail.com>
Message-ID: <43976AEA.9070803@rumblestrip.org>

Gregory J. Ward wrote:

> Hi Rob,
>
> I'm not exactly sure why I put this in there, it was so long ago.
>
> You can try removing lines 218-225 in gensky.c and recompiling without:
>
>     if (!overcast && altitude > 87.*PI/180.) {
>         fprintf(stderr,
> "%s: warning - sun too close to zenith, reducing altitude to 87  
> degrees\n",
>                 progname);
>         printf(
> "# warning - sun too close to zenith, reducing altitude to 87 degrees 
> \n");
>         altitude = 87.*PI/180.;
>     }
>
> Try a few data points where the sun is at the zenith and see what  
> happens.

Thanks Greg, I'll check it out; thanks for getting back to me so quickly.

- Rob

From ap.huangwx at archi.kyoto-u.ac.jp  Thu Dec  8 08:29:35 2005
From: ap.huangwx at archi.kyoto-u.ac.jp (Huangwx)
Date: Thu Dec  8 08:31:18 2005
Subject: [Radiance-general] How to increase the rendering speed?
Message-ID: <000c01c5fbc9$27165360$1f7af90a@hwxin>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: day_Drad2.0.jpg
Type: image/jpeg
Size: 5264 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20051208/31192d97/day_Drad2.0.jpg
-------------- next part --------------
A non-text attachment was scrubbed...
Name: day_cygwin3.6.jpg
Type: image/jpeg
Size: 5483 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20051208/31192d97/day_cygwin3.6.jpg
From ap.huangwx at archi.kyoto-u.ac.jp  Thu Dec  8 08:33:55 2005
From: ap.huangwx at archi.kyoto-u.ac.jp (Huangwx)
Date: Thu Dec  8 08:35:24 2005
Subject: [Radiance-general] Fw: How to increase the rendering speed?
Message-ID: <000b01c5fbc9$bebc7ff0$1f7af90a@hwxin>

I do not know why the server deleted the text part of my letter. here is the letter. 

Dear all:

I am trying to render an interior scene in daytime and nighttime. I would like to render many images with different material colors and textures in this scene, that means the geometry and illumination remain the same, but the materials on the wall, ceiling ,floor and so on change. The image size I need is very small(175*255 pixels). I need to render the images as faster as possible. So I wonder is there any way to increase the rendering speed? 

I am using the Desktop Radiance2.0, I found it renders my model much faster than the Radiance 3.6 in cygwin. (2 min vs. 12 min. on same computer), and the results are different, the floor rendered by Radiance 3.6 in cygwin seems too much reflective. Are there any differences in the default settings of them? or is there something wrong with my installation? (Actually I just copy the model to cygwin directory and inpute the command: $ ./day.bat )

You can find my model here:
http://munemoto-lab.archi.kyoto-u.ac.jp/storage/huang/12.7.rar

I think it may be not easy to answer these questions, but your reply will be great help for me.

Yours,
Huang
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20051208/fb73b00a/attachment.html
From atelier at iebele.nl  Thu Dec  8 08:56:01 2005
From: atelier at iebele.nl (atelier iebele abel)
Date: Thu Dec  8 08:53:57 2005
Subject: [Radiance-general] Fw: How to increase the rendering speed?
In-Reply-To: <000b01c5fbc9$bebc7ff0$1f7af90a@hwxin>
References: <000b01c5fbc9$bebc7ff0$1f7af90a@hwxin>
Message-ID: <4397E711.9080504@iebele.nl>

Hi Huangwx,

You can find the default settings of rpict with the -defaults option, 
just type:
$ rpict  -defaults

-Iebele

Huangwx wrote:

> I do not know why the server deleted the text part of my letter. here 
> is the letter. 
> Dear all:
>  
> I am trying to render an interior scene in daytime and nighttime. I 
> would like to render many images with different material colors and 
> textures in this scene, that means the geometry and 
> illumination remain the same, but the materials on the wall, ceiling 
> ,floor and so on change. The image size I need is very small(175*255 
> pixels). I need to render the images as faster as possible. So I 
> wonder is there any way to increase the rendering speed?
>  
> I am using the Desktop Radiance2.0, I found it renders my model much 
> faster than the Radiance 3.6 in cygwin. (2 min vs. 12 min. on same 
> computer), and the results are different, the floor rendered by 
> Radiance 3.6 in cygwin seems too much reflective. Are there 
> any differences in the default settings of them? or is there something 
> wrong with my installation? (Actually I just copy the model to cygwin 
> directory and inpute the command: $ ./day.bat )
>  
> You can find my model here:
> http://munemoto-lab.archi.kyoto-u.ac.jp/storage/huang/12.7.rar
>  
> I think it may be not easy to answer these questions, but your reply 
> will be great help for me.
>  
> Yours,
> Huang
>
>------------------------------------------------------------------------
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general@radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general
>  
>

From gregoryjward at gmail.com  Thu Dec  8 18:58:52 2005
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu Dec  8 19:00:28 2005
Subject: [Radiance-general] Fw: How to increase the rendering speed?
In-Reply-To: <000b01c5fbc9$bebc7ff0$1f7af90a@hwxin>
References: <000b01c5fbc9$bebc7ff0$1f7af90a@hwxin>
Message-ID: <34F829A2-9E69-423F-B4AF-C9930048E12A@gmail.com>

Hi Huang,

Just in general, I prefer that people not post images in their  
messages to the mailing list, but you did, so I am, too...

The attached plot shows the correct Fresnel behavior for smooth  
dielectric surfaces, including plastics, waxed floors, and just about  
anything else with a specular reflection.  Radiance 3.6 uses an  
approximation to Fresnel reflection that is fairly accurate down to  
an index of refraction of 1.35 or so (water), but this was left out  
of the version that became Desktop Radiance due to normalization  
concerns I have since resolved.

The problem in your case is that you have specified a material that  
doesn't make sense, physically -- a perfectly smooth (zero roughness)  
floor with a specular reflection of 0.004.  I challenge you to find  
such a surface in the real world -- this corresponds to an index of  
refraction of about 1.135, which is greater than any of the gasses  
but less than any liquid at room temperature.  (Check out the web  
page <http://www.luxpop.com/#index%20of%20refraction%A0> if you want  
to know some physical ranges.)

Be that as it may, Radiance should really disable this approximation  
when the specularity is below the values for which it is accurate,  
which is around 1.8% (n=1.31).  I will fix this in the next release.   
In the meantime, you can set a roughness value of 0.01 or so to  
eliminate the problem in your model, as Radiance already disables the  
Fresnel approximation for rough surfaces, even when the roughness is  
very small.

As for the subject of your message, the best way to speed up your  
rendering is to increase the -aa value while setting the AMBFILE=  
variable in your rad input file.

-Greg

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Fresnel.bmp
Type: application/octet-stream
Size: 55882 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20051208/3cd4a276/Fresnel-0001.obj
-------------- next part --------------

> From: "Huangwx" <ap.huangwx@archi.kyoto-u.ac.jp>
> Date: December 7, 2005 11:33:55 PM PST
>
> I do not know why the server deleted the text part of my letter.  
> here is the letter.
> Dear all:
>
> I am trying to render an interior scene in daytime and nighttime. I  
> would like to render many images with different material colors and  
> textures in this scene, that means the geometry and illumination  
> remain the same, but the materials on the wall, ceiling ,floor and  
> so on change. The image size I need is very small(175*255 pixels).  
> I need to render the images as faster as possible. So I wonder is  
> there any way to increase the rendering speed?
>
> I am using the Desktop Radiance2.0, I found it renders my model  
> much faster than the Radiance 3.6 in cygwin. (2 min vs. 12 min. on  
> same computer), and the results are different, the floor rendered  
> by Radiance 3.6 in cygwin seems too much reflective. Are there any  
> differences in the default settings of them? or is there something  
> wrong with my installation? (Actually I just copy the model to  
> cygwin directory and inpute the command: $ ./day.bat )
>
> You can find my model here:
> http://munemoto-lab.archi.kyoto-u.ac.jp/storage/huang/12.7.rar
>
> I think it may be not easy to answer these questions, but your  
> reply will be great help for me.
>
> Yours,
> Huang
>
From info at aisarquitectura.com  Sun Dec 11 13:14:54 2005
From: info at aisarquitectura.com (=?iso-8859-1?Q?Ignacio_Mun=E1rriz?=)
Date: Sun Dec 11 13:16:57 2005
Subject: [Radiance-general] Segmentation fault
Message-ID: <000801c5fe4c$7f6ee1f0$0301a8c0@aisxeon>

Hi, I've got an error in my windows 2000 server with radiance running under cygwin, but it doesn't ocurr in windows xp, i dont know the reason.
It ocurrs when any radiance programs(ie rpict, oconv) goes over <> 500 mb of ram and crashes with Segmentation fault , here is the stack trace


Starting program: /usr/local/radiance/ray/bin/rpict.exe -x 8000 -y 8000 -af amba
ve -ar 2000 -aa .08 -ab 1 -vf arboldef todofin.oct
#?RADIANCE
oconv mest estacion.rad mates.rad cubo1.rad edificios.rad edinuevos.rad urbanism
o.rad arbolest.rad refis.rad arboles2.rad arboles3.rad edificiosf.rad grass.rad
/usr/local/radiance/ray/bin/rpict -x 8000 -y 8000 -af ambave -ar 2000 -aa .08 -a
b 1 -vf arboldef
SOFTWARE= RADIANCE 3.5 lastmod Mon Mar 14 18:37:57     2005 by chroma on chr-xeo
n
CAPDATE= 2005:12:11 12:46:55
/usr/local/radiance/ray/bin/rpict: warning - no light sources found

Program received signal SIGSEGV, Segmentation fault.
0x610c4914 in memcpy () from /usr/bin/cygwin1.dll
(gdb) bt
#0  0x610c4914 in memcpy () from /usr/bin/cygwin1.dll
#1  0x6100275e in toascii () from /usr/bin/cygwin1.dll
#2  0x61050c8e in lsearch () from /usr/bin/cygwin1.dll
#3  0x610516e4 in lsearch () from /usr/bin/cygwin1.dll
#4  0x61051f79 in lsearch () from /usr/bin/cygwin1.dll
#5  0x610ab36c in setstate () from /usr/bin/cygwin1.dll
#6  0x6104ed0a in lsearch () from /usr/bin/cygwin1.dll
#7  0x610844ff in cygwin1!aclcheck () from /usr/bin/cygwin1.dll
#8  0x0040817d in setambient () at ambient.c:148
#9  0x004013b6 in main (argc=16, argv=0x6a1bd8) at rpmain.c:297
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20051211/7cb9c2d2/attachment.html
From gregoryjward at gmail.com  Sun Dec 11 17:59:38 2005
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Sun Dec 11 18:00:36 2005
Subject: [Radiance-general] Segmentation fault
In-Reply-To: <000801c5fe4c$7f6ee1f0$0301a8c0@aisxeon>
References: <000801c5fe4c$7f6ee1f0$0301a8c0@aisxeon>
Message-ID: <19AC9FAF-8E9D-41D1-A482-E2E3EF64C047@gmail.com>

Hi Ignacio,

 From my experience, there are memory problems associated with  
Cygwin, and these are unrelated to Radiance (other than the fact that  
Radiance uses a lot of memory).  A backtrace isn't much help in this  
case, I'm afraid, as it is not a problem with the program, but with  
the system under which it is operating.

-Greg

> From: Ignacio Mun?rriz <info@aisarquitectura.com>
> Date: December 11, 2005 4:14:54 AM PST
>
> Hi, I've got an error in my windows 2000 server with radiance  
> running under cygwin, but it doesn't ocurr in windows xp, i dont  
> know the reason.
> It ocurrs when any radiance programs(ie rpict, oconv) goes over <>  
> 500 mb of ram and crashes with Segmentation fault , here is the  
> stack trace
>
> Starting program: /usr/local/radiance/ray/bin/rpict.exe -x 8000 -y  
> 8000 -af amba
> ve -ar 2000 -aa .08 -ab 1 -vf arboldef todofin.oct
> #?RADIANCE
> oconv mest estacion.rad mates.rad cubo1.rad edificios.rad  
> edinuevos.rad urbanism
> o.rad arbolest.rad refis.rad arboles2.rad arboles3.rad  
> edificiosf.rad grass.rad
> /usr/local/radiance/ray/bin/rpict -x 8000 -y 8000 -af ambave -ar  
> 2000 -aa .08 -a
> b 1 -vf arboldef
> SOFTWARE= RADIANCE 3.5 lastmod Mon Mar 14 18:37:57     2005 by  
> chroma on chr-xeo
> n
> CAPDATE= 2005:12:11 12:46:55
> /usr/local/radiance/ray/bin/rpict: warning - no light sources found
>
> Program received signal SIGSEGV, Segmentation fault.
> 0x610c4914 in memcpy () from /usr/bin/cygwin1.dll
> (gdb) bt
> #0  0x610c4914 in memcpy () from /usr/bin/cygwin1.dll
> #1  0x6100275e in toascii () from /usr/bin/cygwin1.dll
> #2  0x61050c8e in lsearch () from /usr/bin/cygwin1.dll
> #3  0x610516e4 in lsearch () from /usr/bin/cygwin1.dll
> #4  0x61051f79 in lsearch () from /usr/bin/cygwin1.dll
> #5  0x610ab36c in setstate () from /usr/bin/cygwin1.dll
> #6  0x6104ed0a in lsearch () from /usr/bin/cygwin1.dll
> #7  0x610844ff in cygwin1!aclcheck () from /usr/bin/cygwin1.dll
> #8  0x0040817d in setambient () at ambient.c:148
> #9  0x004013b6 in main (argc=16, argv=0x6a1bd8) at rpmain.c:297

From info at aisarquitectura.com  Mon Dec 12 10:21:05 2005
From: info at aisarquitectura.com (=?iso-8859-1?Q?Ignacio_Mun=E1rriz?=)
Date: Mon Dec 12 10:22:40 2005
Subject: [Radiance-general] Segmentation fault
References: <000801c5fe4c$7f6ee1f0$0301a8c0@aisxeon>
	<19AC9FAF-8E9D-41D1-A482-E2E3EF64C047@gmail.com>
Message-ID: <000501c5fefd$637c7910$0301a8c0@aisxeon>

Thanks greg, i'd prefer unix too, but all clients work with autocad...
I've calculated it with other computer and here are the results
http://www.aisarquitectura.com/todofinv3.jpg , each of those trees are 40mb
instances, radiance is amazing but it's a little hard working with colors
and textures in a text editor,
Ignacio


----- Original Message ----- 
From: "Gregory J. Ward" <gregoryjward@gmail.com>
To: "Radiance general discussion" <radiance-general@radiance-online.org>
Sent: Sunday, December 11, 2005 5:59 PM
Subject: Re: [Radiance-general] Segmentation fault


Hi Ignacio,

 From my experience, there are memory problems associated with
Cygwin, and these are unrelated to Radiance (other than the fact that
Radiance uses a lot of memory).  A backtrace isn't much help in this
case, I'm afraid, as it is not a problem with the program, but with
the system under which it is operating.

-Greg

> From: Ignacio Mun?rriz <info@aisarquitectura.com>
> Date: December 11, 2005 4:14:54 AM PST
>
> Hi, I've got an error in my windows 2000 server with radiance
> running under cygwin, but it doesn't ocurr in windows xp, i dont
> know the reason.
> It ocurrs when any radiance programs(ie rpict, oconv) goes over <>
> 500 mb of ram and crashes with Segmentation fault , here is the
> stack trace
>
> Starting program: /usr/local/radiance/ray/bin/rpict.exe -x 8000 -y
> 8000 -af amba
> ve -ar 2000 -aa .08 -ab 1 -vf arboldef todofin.oct
> #?RADIANCE
> oconv mest estacion.rad mates.rad cubo1.rad edificios.rad
> edinuevos.rad urbanism
> o.rad arbolest.rad refis.rad arboles2.rad arboles3.rad
> edificiosf.rad grass.rad
> /usr/local/radiance/ray/bin/rpict -x 8000 -y 8000 -af ambave -ar
> 2000 -aa .08 -a
> b 1 -vf arboldef
> SOFTWARE= RADIANCE 3.5 lastmod Mon Mar 14 18:37:57     2005 by
> chroma on chr-xeo
> n
> CAPDATE= 2005:12:11 12:46:55
> /usr/local/radiance/ray/bin/rpict: warning - no light sources found
>
> Program received signal SIGSEGV, Segmentation fault.
> 0x610c4914 in memcpy () from /usr/bin/cygwin1.dll
> (gdb) bt
> #0  0x610c4914 in memcpy () from /usr/bin/cygwin1.dll
> #1  0x6100275e in toascii () from /usr/bin/cygwin1.dll
> #2  0x61050c8e in lsearch () from /usr/bin/cygwin1.dll
> #3  0x610516e4 in lsearch () from /usr/bin/cygwin1.dll
> #4  0x61051f79 in lsearch () from /usr/bin/cygwin1.dll
> #5  0x610ab36c in setstate () from /usr/bin/cygwin1.dll
> #6  0x6104ed0a in lsearch () from /usr/bin/cygwin1.dll
> #7  0x610844ff in cygwin1!aclcheck () from /usr/bin/cygwin1.dll
> #8  0x0040817d in setambient () at ambient.c:148
> #9  0x004013b6 in main (argc=16, argv=0x6a1bd8) at rpmain.c:297

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general


From MdelaFuente at wmtao.com  Mon Dec 12 16:00:52 2005
From: MdelaFuente at wmtao.com (Mark de la Fuente)
Date: Mon Dec 12 16:02:55 2005
Subject: [Radiance-general] Segmentation fault
Message-ID: <s39d3c4c.034@wmtao.com>

I had radiance running fine under Cygwin/W2000 for over a year, but recently it stopped working.  Never did figure out what the problem was but it still works fine under XP.  With most of the binaries now available under windows, you might be able to use them instead.  Unfortunately I don't think the visual binaries are available for some reason.
 
Mark

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20051212/be067ae4/attachment.htm
From info at aisarquitectura.com  Mon Dec 12 17:02:40 2005
From: info at aisarquitectura.com (=?iso-8859-1?Q?Ignacio_Mun=E1rriz?=)
Date: Mon Dec 12 17:04:48 2005
Subject: [Radiance-general] Segmentation fault
References: <s39d3c4c.034@wmtao.com>
Message-ID: <001e01c5ff35$7b5f4d40$0301a8c0@aisxeon>

Thanks Mark, i've tried the rpict windows binary and it works fine, and i dont need the visual binaries because i only use the server for calculations
  ----- Original Message ----- 
  From: Mark de la Fuente 
  To: radiance-general@radiance-online.org 
  Sent: Monday, December 12, 2005 4:00 PM
  Subject: Re: [Radiance-general] Segmentation fault


  I had radiance running fine under Cygwin/W2000 for over a year, but recently it stopped working.  Never did figure out what the problem was but it still works fine under XP.  With most of the binaries now available under windows, you might be able to use them instead.  Unfortunately I don't think the visual binaries are available for some reason.

  Mark


------------------------------------------------------------------------------


  _______________________________________________
  Radiance-general mailing list
  Radiance-general@radiance-online.org
  http://www.radiance-online.org/mailman/listinfo/radiance-general
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20051212/5f721435/attachment.html
From ap.huangwx at archi.kyoto-u.ac.jp  Tue Dec 13 08:14:15 2005
From: ap.huangwx at archi.kyoto-u.ac.jp (Huangwx)
Date: Tue Dec 13 08:15:55 2005
Subject: [Radiance-general] Re: Fw: How to increase the rendering speed?
Message-ID: <000e01c5ffb4$d3d4ec30$1f7af90a@hwxin>

Dear Greg:

I am very sorry for posting images to the mailing list.

Thanks very much for your suggestion.I have fixed the problem by setting the roughness of floor to 0.01. 
And I have speed up the rendering process by increasing the -aa value. 

The AMBFILE seems can help to get better rendering results, and greatly increase the rendering speed 
for the same model. But I think when I change materials of the model, I should delete the old ambient file 
and let Radiance generate a new one, otherwize the result will be incorrect. Am I right? Or maybe the 
ambient file can be reused by models with similar materials?

best wishes.

Huang
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20051213/745ef4a7/attachment.htm
From coyne at semanticlight.com  Tue Dec 13 10:42:33 2005
From: coyne at semanticlight.com (bob coyne)
Date: Tue Dec 13 09:33:50 2005
Subject: [Radiance-general] rendering meshes with interpolated vertex normals
Message-ID: <439E9789.4020402@semanticlight.com>

Hi,

I'm having a problem rendering polygon mesh objects with interpolated
vertex normals (converted via obj2mesh). I'm running Radiance 3.7.2b
patch release 22 Aug 2005.

When I render a sphere mesh that's illuminated from above and to the
side, I get bad artifacts along the shadow line, with large dark
triangular wedges periodically protruding into the illuminated
area. (See link below for what this looks like.)  The dark triangles
seem to correspond to those quadrilaterals in the mesh where only a
single vertex is illuminated. My guess is that it's treating the whole
quad as pointing away from the light source, even though one vertex
and a significant area of it are in the illuminated region of the
object.

Is there any way to avoid this?

www.semanticlight.com/images/sphere-problem.jpg

Thanks for any help.

- Bob



From mstock at umich.edu  Tue Dec 13 15:49:52 2005
From: mstock at umich.edu (Mark Stock)
Date: Tue Dec 13 15:51:22 2005
Subject: [Radiance-general] rendering meshes with interpolated vertex
	normals
In-Reply-To: <439E9789.4020402@semanticlight.com>
References: <439E9789.4020402@semanticlight.com>
Message-ID: <Pine.LNX.4.63.0512130944040.28934@centipede.gpcc.itd.umich.edu>

Bob,

Your guess is right. Radiance's triangles, even with normal
interpolation, are still flat. To use the normals to present a 
true curved surface would (I think) require an implicit 
representation of the surface.

This particular example, with a low-res mesh and direct sunlight, 
is the "poster-child" of this problem.

I usually avoid this problem by a combination of higher 
resolution (I use tri meshes up to 1M elements) and more ambient 
than direct light.

So, I see no way to completely avoid this for some problems.

Mark
mstock@umich.edu

On Tue, 13 Dec 2005, bob coyne wrote:

> Hi,
>
> I'm having a problem rendering polygon mesh objects with interpolated
> vertex normals (converted via obj2mesh). I'm running Radiance 3.7.2b
> patch release 22 Aug 2005.
>
> When I render a sphere mesh that's illuminated from above and to the
> side, I get bad artifacts along the shadow line, with large dark
> triangular wedges periodically protruding into the illuminated
> area. (See link below for what this looks like.)  The dark triangles
> seem to correspond to those quadrilaterals in the mesh where only a
> single vertex is illuminated. My guess is that it's treating the whole
> quad as pointing away from the light source, even though one vertex
> and a significant area of it are in the illuminated region of the
> object.
>
> Is there any way to avoid this?
>
> www.semanticlight.com/images/sphere-problem.jpg
>
> Thanks for any help.
>
> - Bob
>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
>

From coyne at semanticlight.com  Tue Dec 13 18:32:20 2005
From: coyne at semanticlight.com (bob coyne)
Date: Tue Dec 13 17:24:47 2005
Subject: [Radiance-general] rendering meshes with interpolated vertex
	normals
In-Reply-To: <Pine.LNX.4.63.0512130944040.28934@centipede.gpcc.itd.umich.edu>
References: <439E9789.4020402@semanticlight.com>
	<Pine.LNX.4.63.0512130944040.28934@centipede.gpcc.itd.umich.edu>
Message-ID: <439F05A4.5080207@semanticlight.com>

Mark, thanks for verifying that this was the problem.

- Bob

Mark Stock wrote:

> Bob,
>
> Your guess is right. Radiance's triangles, even with normal
> interpolation, are still flat. To use the normals to present a true 
> curved surface would (I think) require an implicit representation of 
> the surface.
>
> This particular example, with a low-res mesh and direct sunlight, is 
> the "poster-child" of this problem.
>
> I usually avoid this problem by a combination of higher resolution (I 
> use tri meshes up to 1M elements) and more ambient than direct light.
>
> So, I see no way to completely avoid this for some problems.
>
> Mark
> mstock@umich.edu
>
> On Tue, 13 Dec 2005, bob coyne wrote:
>
>> Hi,
>>
>> I'm having a problem rendering polygon mesh objects with interpolated
>> vertex normals (converted via obj2mesh). I'm running Radiance 3.7.2b
>> patch release 22 Aug 2005.
>>
>> When I render a sphere mesh that's illuminated from above and to the
>> side, I get bad artifacts along the shadow line, with large dark
>> triangular wedges periodically protruding into the illuminated
>> area. (See link below for what this looks like.)  The dark triangles
>> seem to correspond to those quadrilaterals in the mesh where only a
>> single vertex is illuminated. My guess is that it's treating the whole
>> quad as pointing away from the light source, even though one vertex
>> and a significant area of it are in the illuminated region of the
>> object.
>>
>> Is there any way to avoid this?
>>
>> www.semanticlight.com/images/sphere-problem.jpg
>>
>> Thanks for any help.
>>
>> - Bob
>>
>>
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general@radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
>>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>


From gregoryjward at gmail.com  Tue Dec 13 17:39:29 2005
From: gregoryjward at gmail.com (Greg Ward)
Date: Tue Dec 13 17:41:01 2005
Subject: [Radiance-general] rendering meshes with interpolated vertex
	normals
In-Reply-To: <Pine.LNX.4.63.0512130944040.28934@centipede.gpcc.itd.umich.edu>
References: <439E9789.4020402@semanticlight.com>
	<Pine.LNX.4.63.0512130944040.28934@centipede.gpcc.itd.umich.edu>
Message-ID: <0134A81C-A096-4134-89EB-58FDEC4421F7@gmail.com>

Mark is right.  To get the correct appearance out of a triangle mesh,  
you actually need to use a displacement map to give the underlying  
model the correct appearance w.r.t. grazing shadows such as this  
one.  Implementing displacement maps in a ray tracer is pretty  
difficult, and in the end it costs more to render them than simply  
increasing the resolution of your T-mesh as Mark suggests.

-Greg

> From: Mark Stock <mstock@umich.edu>
> Date: December 13, 2005 6:49:52 AM PST
>
> Bob,
>
> Your guess is right. Radiance's triangles, even with normal
> interpolation, are still flat. To use the normals to present a true  
> curved surface would (I think) require an implicit representation  
> of the surface.
>
> This particular example, with a low-res mesh and direct sunlight,  
> is the "poster-child" of this problem.
>
> I usually avoid this problem by a combination of higher resolution  
> (I use tri meshes up to 1M elements) and more ambient than direct  
> light.
>
> So, I see no way to completely avoid this for some problems.
>
> Mark
> mstock@umich.edu
>
> On Tue, 13 Dec 2005, bob coyne wrote:
>
>> Hi,
>>
>> I'm having a problem rendering polygon mesh objects with interpolated
>> vertex normals (converted via obj2mesh). I'm running Radiance 3.7.2b
>> patch release 22 Aug 2005.
>>
>> When I render a sphere mesh that's illuminated from above and to the
>> side, I get bad artifacts along the shadow line, with large dark
>> triangular wedges periodically protruding into the illuminated
>> area. (See link below for what this looks like.)  The dark triangles
>> seem to correspond to those quadrilaterals in the mesh where only a
>> single vertex is illuminated. My guess is that it's treating the  
>> whole
>> quad as pointing away from the light source, even though one vertex
>> and a significant area of it are in the illuminated region of the
>> object.
>>
>> Is there any way to avoid this?
>>
>> www.semanticlight.com/images/sphere-problem.jpg
>>
>> Thanks for any help.
>>
>> - Bob
>

From gregoryjward at gmail.com  Tue Dec 13 17:41:36 2005
From: gregoryjward at gmail.com (Greg Ward)
Date: Tue Dec 13 17:43:03 2005
Subject: [Radiance-general] Re: Fw: How to increase the rendering speed?
In-Reply-To: <000e01c5ffb4$d3d4ec30$1f7af90a@hwxin>
References: <000e01c5ffb4$d3d4ec30$1f7af90a@hwxin>
Message-ID: <3C601C48-764F-4599-B1C7-5359C35BF0B7@gmail.com>

Hi Huang,

If the average reflectance of large surfaces change in your model,  
then reusing the ambient file will result in under- or over- 
estimation of the interreflected component.  If the average  
reflectance (and color) of your surfaces changes little, then  
removing the ambient file is not necessary.

-Greg

> From: "Huangwx" <ap.huangwx@archi.kyoto-u.ac.jp>
> Date: December 12, 2005 11:14:15 PM PST
>
> Dear Greg:
>
> I am very sorry for posting images to the mailing list.
>
> Thanks very much for your suggestion.I have fixed the problem by  
> setting the roughness of floor to 0.01.
> And I have speed up the rendering process by increasing the -aa value.
>
> The AMBFILE seems can help to get better rendering results, and  
> greatly increase the rendering speed
> for the same model. But I think when I change materials of the  
> model, I should delete the old ambient file
> and let Radiance generate a new one, otherwize the result will be  
> incorrect. Am I right? Or maybe the
> ambient file can be reused by models with similar materials?
>
> best wishes.
>
> Huang
>

From MdelaFuente at wmtao.com  Tue Dec 13 21:00:37 2005
From: MdelaFuente at wmtao.com (Mark de la Fuente)
Date: Tue Dec 13 21:03:03 2005
Subject: [Radiance-general] Math Help Needed
Message-ID: <s39ed426.048@wmtao.com>

Hi group,
 
I'm trying to write a tool for calculating the rotation angles necessary to aim a light fixture.  The tool will basically export a text file from AutoCAD containing xform rotation and transformation commands.
 
So far I've been approaching this problem using vectors (one at the fixture origin oriented down and one for the aiming direction based on the coordinate points of the source and target) and using the dot product to find the angles between the vectors. Unfortunately so far this only works for some cases.
 
Is there a better way to approach this?
 
Thanks for any input.
 
Mark

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20051213/49dada59/attachment.html
From gregoryjward at gmail.com  Wed Dec 14 00:18:39 2005
From: gregoryjward at gmail.com (Greg Ward)
Date: Wed Dec 14 00:20:17 2005
Subject: [Radiance-general] Math Help Needed
In-Reply-To: <s39ed426.048@wmtao.com>
References: <s39ed426.048@wmtao.com>
Message-ID: <4F33E201-DA29-4250-A21F-517B46C3A43A@gmail.com>

Hi Mark,

You should check out the replmarks program, if you don't know about  
it already.  You can use it to substitute simple triangles with  
whatever geometry you like.  If it doesn't do what you want, the  
following routine (taken from src/gen/replmarks.c) might prove useful.

-Greg

------------------

int
addrot(		/* compute rotation (x,y,z) => (xp,yp,zp) */
	register char	*xf,
	FVECT xp,
	FVECT yp,
	FVECT zp
)
{
	int	n;
	double	theta;

	n = 0;
	theta = atan2(yp[2], zp[2]);
	if (!FEQ(theta,0.0)) {
		sprintf(xf, " -rx %f", theta*(180./PI));
		while (*xf) ++xf;
		n += 2;
	}
	theta = asin(-xp[2]);
	if (!FEQ(theta,0.0)) {
		sprintf(xf, " -ry %f", theta*(180./PI));
		while (*xf) ++xf;
		n += 2;
	}
	theta = atan2(xp[1], xp[0]);
	if (!FEQ(theta,0.0)) {
		sprintf(xf, " -rz %f", theta*(180./PI));
		/* while (*xf) ++xf; */
		n += 2;
	}
	return(n);
}

> From: "Mark de la Fuente" <MdelaFuente@wmtao.com>
> Date: December 13, 2005 12:00:37 PM PST
>
> Hi group,
>
> I'm trying to write a tool for calculating the rotation angles  
> necessary to aim a light fixture.  The tool will basically export a  
> text file from AutoCAD containing xform rotation and transformation  
> commands.
>
> So far I've been approaching this problem using vectors (one at the  
> fixture origin oriented down and one for the aiming direction based  
> on the coordinate points of the source and target) and using the  
> dot product to find the angles between the vectors. Unfortunately  
> so far this only works for some cases.
>
> Is there a better way to approach this?
>
> Thanks for any input.
>
> Mark

From tbleicher at arcor.de  Wed Dec 14 00:44:49 2005
From: tbleicher at arcor.de (Thomas Bleicher)
Date: Wed Dec 14 00:46:19 2005
Subject: [Radiance-general] Math Help Needed
In-Reply-To: <s39ed426.048@wmtao.com>
References: <s39ed426.048@wmtao.com>
Message-ID: <294D906B-1E56-4DA7-840D-0C1FB5A6CDBE@arcor.de>


On 13.12.2005, at 21:00, Mark de la Fuente wrote:

> Hi group,
>
> I'm trying to write a tool for calculating the rotation angles  
> necessary
> to aim a light fixture.  The tool will basically export a text file  
> from
> AutoCAD containing xform rotation and transformation commands.
>
> So far I've been approaching this problem using vectors (one at the  
> fixture
> origin oriented down and one for the aiming direction based on the  
> coordinate points of the source and target) and using the dot  
> product to find the angles between the vectors. Unfortunately so  
> far this only works for some cases.
>
> Is there a better way to approach this?

Can you give us an example of the problem cases?

If you have a target object to get the coords from I'd reduce the  
process
to two rotations: one around x or y (tilt) and one around z  
(orientation).
You can calculate both rotations with simple trigonometry (dx,dy and dz
between light fixture and target).

Remember that Radiance uses a "world coordinate system" - the  
sequence of
rotations matters and Euler rotation angles (around object coordinates)
are different from Radiance angles.


Thomas


From gregoryjward at gmail.com  Fri Dec 16 05:51:28 2005
From: gregoryjward at gmail.com (Greg Ward)
Date: Fri Dec 16 05:53:02 2005
Subject: [Radiance-general] No more Mr. Nice Guy
Message-ID: <8E7D2A23-F0E5-4B93-9AB6-F0681311AD00@gmail.com>

Hi All,

This message is most relevant to Mac users, but introduces a change  
that may affect rpict and rtrace performance in future releases on  
all platforms.  Specifically, I have taken out the NICE= macro  
settings from the Rmakefile in src/rt, so future builds will run all  
Radiance programs at the standard user priority.

I made a fortuitous discovery whilst playing around with the very  
cool (no pun intended) TemperatureMonitor freeware <http:// 
www.bresink.com/osx/TemperatureMonitor.html> on my new PowerMac G5  
quad.  It's lots of fun to watch the processor temps go up and down  
with load.  The funny thing I noticed was that changing the Energy  
Savings settings had an unexpected effect on temperatures, which are  
in turn related to power consumption and (presumably) processor  
performance.

The Energy Saver options lists three processor performance settings,  
"Highest," "Automatic," and "Reduced."  With the machine idle, there  
were only slight differences between the three; I had expected to see  
more, especially on the "Highest" setting...  The biggest difference  
was between "Highest" and "Reduced" with all four processors busy,  
and that was no surprise.  What was a surprise was that when I had  
four rpict jobs going in parallel, there was a big difference between  
the temperatures using the "Highest" versus "Automatic" settings.   
Apple documentation states that the performance penalty for using  
"Automatic" should be very small, so I figured the temperature change  
would also be small.  That's when I decided to measure actual  
performance.

What a difference!  Between the "Highest" and "Automatic" settings, I  
noticed a performance difference of over 60%, where I expected to see  
little or none.  What I did expect was a performance hit moving to  
the "Reduced" setting, which indeed there was, but it was only  
another 13% worse than "Automatic."  This really seemed wrong to me.   
That's when I decided to start playing around with the "nice" level  
of rpict.

The "nice" setting on a process is a way to tell Unix that a job is  
not a top priority, and interactive processes should be given more of  
the CPU if there are any running.  However, in the past, it hasn't  
much affected the performance of a process if there are no other jobs  
to contend with.  I put nice() calls in Radiance way back when multi- 
user Unix's were the rule, and we had to peacefully coexist with a  
lot of other people who might get annoyed if I hogged all the system  
resources, as Radiance is wont to do.

In short, I found out that removing the nice() system call from rpict  
achieved the "Highest" performance figure even when the Energy Saver  
processor speed was set to "Automatic."  (The "Reduced" performance  
was not affected.)  Apparently, Mac OS X 10.4 (at least) uses the  
process "nice" setting to decide whether or not to kick the CPU speed  
up a notch.  This might be a new feature of the OS, as I don't have  
access to a maching running Jaguar or Panther to try it there.

The bottom line in all this is that if you own a Mac and you're  
running Radiance on it, be sure to use the "Highest" setting in the  
Energy Saver control panel, because if you don't, your rendering  
might just be running 60% slower than you would like it to.  Option B  
is to remove the -DNICE= arguments from the build lines in src/rt/ 
Rmakefile and remove the affected object files (rpmain.o and  
rtmain.o) then rerun "rmake install" in the rt directory.  Or,  
download Saturday's HEAD release and build that.  (I think I'm too  
late for tomorrow.)  Then, you can leave the processor performance on  
"Automatic," which is the default for normal operation.

I wish I had made this discovery a couple of years ago....

-Greg


From rpg at rumblestrip.org  Fri Dec 16 06:22:48 2005
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Fri Dec 16 06:24:19 2005
Subject: [Radiance-general] No more Mr. Nice Guy
In-Reply-To: <8E7D2A23-F0E5-4B93-9AB6-F0681311AD00@gmail.com>
References: <8E7D2A23-F0E5-4B93-9AB6-F0681311AD00@gmail.com>
Message-ID: <43A24F28.1020806@rumblestrip.org>

Greg Ward wrote:

> Hi All,
>
> This message is most relevant to Mac users, but introduces a change  
> that may affect rpict and rtrace performance in future releases on  
> all platforms.  Specifically, I have taken out the NICE= macro  
> settings from the Rmakefile in src/rt, so future builds will run all  
> Radiance programs at the standard user priority. <snip>
>
> I wish I had made this discovery a couple of years ago....
>
Me too.

Shoot Greg, I've had this PB for almost four years and I've always felt 
it was sluggish compared to equivalent horsepower wintel boxes.  I will 
most certainly try out the new source on Saturday and report back.  I'm 
still on Panther here, and I should mention that my Energy Saver panel 
does not have a specific setting for Processor Performance, just times 
for spinning down the HDD and dimming the display.  So I'll try the new 
source when it's available and see what happens.

Thanks for the report!  And rub it in about the quad G5, why don't 
you...  =8-)

- Rob Guglielmetti

From atelier at iebele.nl  Fri Dec 16 16:09:00 2005
From: atelier at iebele.nl (atelier iebele abel)
Date: Fri Dec 16 16:06:53 2005
Subject: [Radiance-general] No more Mr. Nice Guy
In-Reply-To: <8E7D2A23-F0E5-4B93-9AB6-F0681311AD00@gmail.com>
References: <8E7D2A23-F0E5-4B93-9AB6-F0681311AD00@gmail.com>
Message-ID: <43A2D88C.9030808@iebele.nl>

He Greg,

I just have a G5 for editing video my last project, and I was surprised 
how well a G5 is rendering with rpict. The G5 was one of the best 
workhorses this month!!
On my G5 the deafult processor performance is already set on  "Highest".
Besides that, removing the -DNICE= arguments in rt/ Rmakefile is 
something I like to check out, but I am fearly new with OSX, and I 
haven't found any development tools yet.
Where do I find development tools for OSX, so I can run make?

-Iebele



Greg Ward wrote:

> Hi All,
>
> This message is most relevant to Mac users, but introduces a change  
> that may affect rpict and rtrace performance in future releases on  
> all platforms.  Specifically, I have taken out the NICE= macro  
> settings from the Rmakefile in src/rt, so future builds will run all  
> Radiance programs at the standard user priority.
>
> I made a fortuitous discovery whilst playing around with the very  
> cool (no pun intended) TemperatureMonitor freeware <http:// 
> www.bresink.com/osx/TemperatureMonitor.html> on my new PowerMac G5  
> quad.  It's lots of fun to watch the processor temps go up and down  
> with load.  The funny thing I noticed was that changing the Energy  
> Savings settings had an unexpected effect on temperatures, which are  
> in turn related to power consumption and (presumably) processor  
> performance.
>
> The Energy Saver options lists three processor performance settings,  
> "Highest," "Automatic," and "Reduced."  With the machine idle, there  
> were only slight differences between the three; I had expected to see  
> more, especially on the "Highest" setting...  The biggest difference  
> was between "Highest" and "Reduced" with all four processors busy,  
> and that was no surprise.  What was a surprise was that when I had  
> four rpict jobs going in parallel, there was a big difference between  
> the temperatures using the "Highest" versus "Automatic" settings.   
> Apple documentation states that the performance penalty for using  
> "Automatic" should be very small, so I figured the temperature change  
> would also be small.  That's when I decided to measure actual  
> performance.
>
> What a difference!  Between the "Highest" and "Automatic" settings, I  
> noticed a performance difference of over 60%, where I expected to see  
> little or none.  What I did expect was a performance hit moving to  
> the "Reduced" setting, which indeed there was, but it was only  
> another 13% worse than "Automatic."  This really seemed wrong to me.   
> That's when I decided to start playing around with the "nice" level  
> of rpict.
>
> The "nice" setting on a process is a way to tell Unix that a job is  
> not a top priority, and interactive processes should be given more of  
> the CPU if there are any running.  However, in the past, it hasn't  
> much affected the performance of a process if there are no other jobs  
> to contend with.  I put nice() calls in Radiance way back when multi- 
> user Unix's were the rule, and we had to peacefully coexist with a  
> lot of other people who might get annoyed if I hogged all the system  
> resources, as Radiance is wont to do.
>
> In short, I found out that removing the nice() system call from rpict  
> achieved the "Highest" performance figure even when the Energy Saver  
> processor speed was set to "Automatic."  (The "Reduced" performance  
> was not affected.)  Apparently, Mac OS X 10.4 (at least) uses the  
> process "nice" setting to decide whether or not to kick the CPU speed  
> up a notch.  This might be a new feature of the OS, as I don't have  
> access to a maching running Jaguar or Panther to try it there.
>
> The bottom line in all this is that if you own a Mac and you're  
> running Radiance on it, be sure to use the "Highest" setting in the  
> Energy Saver control panel, because if you don't, your rendering  
> might just be running 60% slower than you would like it to.  Option B  
> is to remove the -DNICE= arguments from the build lines in src/rt/ 
> Rmakefile and remove the affected object files (rpmain.o and  
> rtmain.o) then rerun "rmake install" in the rt directory.  Or,  
> download Saturday's HEAD release and build that.  (I think I'm too  
> late for tomorrow.)  Then, you can leave the processor performance on  
> "Automatic," which is the default for normal operation.
>
> I wish I had made this discovery a couple of years ago....
>
> -Greg
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>

From Giulio.Antonutto at arup.com  Fri Dec 16 16:21:03 2005
From: Giulio.Antonutto at arup.com (Giulio Antonutto)
Date: Fri Dec 16 16:22:27 2005
Subject: [Radiance-general] No more Mr. Nice Guy
Message-ID: <CC0B19F4C6132F4D9FDDEBF194200FB5925FB5@ldcexc02.global.arup.com>

welcome to the mac community :-)
MacosX is really great because you can have the best of the open source
+ commercial world... you can both use photoshop or finalcut and
radiance on the same machine...
and cinema4d as well :-)

Anyway to answer your question, developer tool GUI, gcc, make and all is
required to compile your c/c++/java... project should be included with
the machine on a separate DVD.
The material is called MACOSX DEVELOPER TOOLS.
You may want to check out also FINK that allows you to install easily
other Open Source projects (as OpenDX or MAYAVI) 

Enjoy!
Ciao
G.

PS.
You may know already but... just in case... I tell you a nice trick:
you can change priority of tasks with 'renice....'
so if it is night time you may want to render as fast as possible and
during daytime you may prefer to have a more awake system....
renice is the answer :-)
sudo renice -20 PID for full power
and renice 0 PID for default 
and renice 20 PID for slooooow execution


-----Original Message-----
From: radiance-general-bounces@radiance-online.org
[mailto:radiance-general-bounces@radiance-online.org] On Behalf Of
atelier iebele abel
Sent: 16 December 2005 15:09
To: Radiance general discussion
Subject: Re: [Radiance-general] No more Mr. Nice Guy

He Greg,

I just have a G5 for editing video my last project, and I was surprised 
how well a G5 is rendering with rpict. The G5 was one of the best 
workhorses this month!!
On my G5 the deafult processor performance is already set on  "Highest".
Besides that, removing the -DNICE= arguments in rt/ Rmakefile is 
something I like to check out, but I am fearly new with OSX, and I 
haven't found any development tools yet.
Where do I find development tools for OSX, so I can run make?

-Iebele



Greg Ward wrote:

> Hi All,
>
> This message is most relevant to Mac users, but introduces a change  
> that may affect rpict and rtrace performance in future releases on  
> all platforms.  Specifically, I have taken out the NICE= macro  
> settings from the Rmakefile in src/rt, so future builds will run all  
> Radiance programs at the standard user priority.
>
> I made a fortuitous discovery whilst playing around with the very  
> cool (no pun intended) TemperatureMonitor freeware <http:// 
> www.bresink.com/osx/TemperatureMonitor.html> on my new PowerMac G5  
> quad.  It's lots of fun to watch the processor temps go up and down  
> with load.  The funny thing I noticed was that changing the Energy  
> Savings settings had an unexpected effect on temperatures, which are  
> in turn related to power consumption and (presumably) processor  
> performance.
>
> The Energy Saver options lists three processor performance settings,  
> "Highest," "Automatic," and "Reduced."  With the machine idle, there  
> were only slight differences between the three; I had expected to see

> more, especially on the "Highest" setting...  The biggest difference  
> was between "Highest" and "Reduced" with all four processors busy,  
> and that was no surprise.  What was a surprise was that when I had  
> four rpict jobs going in parallel, there was a big difference between

> the temperatures using the "Highest" versus "Automatic" settings.   
> Apple documentation states that the performance penalty for using  
> "Automatic" should be very small, so I figured the temperature change

> would also be small.  That's when I decided to measure actual  
> performance.
>
> What a difference!  Between the "Highest" and "Automatic" settings, I

> noticed a performance difference of over 60%, where I expected to see

> little or none.  What I did expect was a performance hit moving to  
> the "Reduced" setting, which indeed there was, but it was only  
> another 13% worse than "Automatic."  This really seemed wrong to me.

> That's when I decided to start playing around with the "nice" level  
> of rpict.
>
> The "nice" setting on a process is a way to tell Unix that a job is  
> not a top priority, and interactive processes should be given more of

> the CPU if there are any running.  However, in the past, it hasn't  
> much affected the performance of a process if there are no other jobs

> to contend with.  I put nice() calls in Radiance way back when multi- 
> user Unix's were the rule, and we had to peacefully coexist with a  
> lot of other people who might get annoyed if I hogged all the system  
> resources, as Radiance is wont to do.
>
> In short, I found out that removing the nice() system call from rpict

> achieved the "Highest" performance figure even when the Energy Saver  
> processor speed was set to "Automatic."  (The "Reduced" performance  
> was not affected.)  Apparently, Mac OS X 10.4 (at least) uses the  
> process "nice" setting to decide whether or not to kick the CPU speed

> up a notch.  This might be a new feature of the OS, as I don't have  
> access to a maching running Jaguar or Panther to try it there.
>
> The bottom line in all this is that if you own a Mac and you're  
> running Radiance on it, be sure to use the "Highest" setting in the  
> Energy Saver control panel, because if you don't, your rendering  
> might just be running 60% slower than you would like it to.  Option B

> is to remove the -DNICE= arguments from the build lines in src/rt/ 
> Rmakefile and remove the affected object files (rpmain.o and  
> rtmain.o) then rerun "rmake install" in the rt directory.  Or,  
> download Saturday's HEAD release and build that.  (I think I'm too  
> late for tomorrow.)  Then, you can leave the processor performance on

> "Automatic," which is the default for normal operation.
>
> I wish I had made this discovery a couple of years ago....
>
> -Greg
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general
____________________________________________________________
Electronic mail messages entering and leaving Arup  business
systems are scanned for acceptability of content and viruses

From rpg at rumblestrip.org  Fri Dec 16 16:25:30 2005
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Fri Dec 16 16:27:06 2005
Subject: [Radiance-general] No more Mr. Nice Guy
In-Reply-To: <CC0B19F4C6132F4D9FDDEBF194200FB5925FB5@ldcexc02.global.arup.com>
References: <CC0B19F4C6132F4D9FDDEBF194200FB5925FB5@ldcexc02.global.arup.com>
Message-ID: <43A2DC6A.60309@rumblestrip.org>

Giulio Antonutto wrote:

>welcome to the mac community :-)
>MacosX is really great because you can have the best of the open source
>+ commercial world... you can both use photoshop or finalcut and
>radiance on the same machine...
>and cinema4d as well :-)
>  
>
Yeah, welcome.  OSX rocks.

>Anyway to answer your question, developer tool GUI, gcc, make and all is
>required to compile your c/c++/java... project should be included with
>the machine on a separate DVD.
>The material is called MACOSX DEVELOPER TOOLS.
>  
>

And if for some reason you didn't get that CD, you can download the 
stuff you need right here:

http://developer.apple.com/tools/

I think at this point all you need is Xcode. 

- Rob

From tbleicher at arcor.de  Fri Dec 16 19:12:25 2005
From: tbleicher at arcor.de (Thomas Bleicher)
Date: Fri Dec 16 19:14:04 2005
Subject: [Radiance-general] No more Mr. Nice Guy
In-Reply-To: <43A24F28.1020806@rumblestrip.org>
References: <8E7D2A23-F0E5-4B93-9AB6-F0681311AD00@gmail.com>
	<43A24F28.1020806@rumblestrip.org>
Message-ID: <52976FAB-1765-454D-8B90-51D7FE1E3D27@arcor.de>


On 16.12.2005, at 06:22, Rob Guglielmetti wrote:

> I'm still on Panther here, and I should mention that my Energy  
> Saver panel does not have a specific setting for Processor  
> Performance, just times for spinning down the HDD and dimming the  
> display.

Do you have an "Options" button next to the "Sleep" button at the
of the top of the panel?

You may also try "TinkerTool". As far as I know not all settings
of the OS are available in the GUI.

Thomas


From rob.fitzsimmons at Summit.Fiserv.com  Fri Dec 16 19:15:16 2005
From: rob.fitzsimmons at Summit.Fiserv.com (Fitzsimmons, Rob)
Date: Fri Dec 16 19:16:50 2005
Subject: [Radiance-general] No more Mr. Nice Guy
Message-ID: <B8DD8375FCE2C94B9F170D9277C1FA2B8C5C90@corvallis>

I'm on a G4 with Tiger 10.4.3 
- But I dont have any Processor Performance options in my Energy Saver

guess that only for G5s?

Rob F

Shoot Greg, I've had this PB for almost four years and I've always felt 
it was sluggish compared to equivalent horsepower wintel boxes.  I will 
most certainly try out the new source on Saturday and report back.  I'm 
still on Panther here, and I should mention that my Energy Saver panel 
does not have a specific setting for Processor Performance, just times 
for spinning down the HDD and dimming the display.  So I'll try the new 
source when it's available and see what happens.

Thanks for the report!  And rub it in about the quad G5, why don't 
you...  =8-)

- Rob Guglielmetti

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general

From webmaster at audice.com  Fri Dec 16 20:18:10 2005
From: webmaster at audice.com (webmaster@audice.com)
Date: Fri Dec 16 20:19:40 2005
Subject: [Radiance-general] Getting numerical errors while using secondary
	light sources...
In-Reply-To: <mailman.0.1134740265.18818.radiance-general@radiance-online.org>
References: <mailman.0.1134740265.18818.radiance-general@radiance-online.org>
Message-ID: <1266074679.20051216221810@audice.com>

Dear friends,

I'm trying to make use of advantages of the "secondary" light sources
to speed up the indoor irradiance calculations.

In the test below we have compared a daylight factors in a room,
calculated along the central depth axis of the floor.

The room parameters are:
3.2 meters - width,
5.6 meters - depth,
2.5 meters - height.

The window is 1.92 meters width and 1.5 meters height 0.8 meters
altitude (above the floor).
The room is located in the building having external obstruction
(another building) on the opposite side of the street.

The uniform sky model was used.

I run Radiance (3.7.2 and 3.7.3) with different parameters and here
are the most valuable of them:
http://www.audice.com/radiance/Graphs_3.png

Where:

"Radiance Illum 1" and "Radiance Illum 2" - the scene was divided into
an outdoor and indoor parts. At the first pass the distribution of light
from the window was calculated in the outdoor scene. At the second
pass the daylight factors were calculated in the indoor scene.

For window material I used:

void illum window_mat
0
0
3                  0                  0                  0

I didn't use "glass" material, because I needed rather empty opening
than the glass.

"Radiance Illum 1"
Parameters I used for mkillum:
-ab 4 -aa .2 -ar 128 -ad 512 -as 256 -dp 256 -ds .15 -lr 8

Comment in scene .rad file:
#@mkillum i=window_mat d=64 s=24 m=wind_illum f=./dist/window c=n b=0

Parameters I used for rtrace:
-ab 8 -aa .1 -ar 128 -ad 512 -as 256 -dp 256 -ds .15 -lr 8

--
"Radiance Illum 2"
Parameters I used for mkillum:
-ab 8 -aa .1 -ar 128 -ad 512 -as 256 -dp 256 -ds .15 -lr 8

Comment in scene .rad file:
#@mkillum i=window_mat d=256 s=128 m=wind_illum f=./dist/window c=n b=0

Parameters I used for rtrace:
-ab 8 -aa .1 -ar 128 -ad 512 -as 256 -dp 256 -ds .15 -lr 8

--
"Radiance Standard" - no illum surfaces were used. The model was not
divided into indoor / outdoor parts so the interreflection calculation
was used to compute the contribution from the window.

rtrace parameters used:
-ab 8 -aa .032 -ar 512 -ad 2048 -as 1024 -dt .05 -dr 8 -dp 2048 -ds .1
-dc .6 -lr 8

--
What causes more than 6% error for "Radiance Illum 1" and "Radiance
Illum 2" in the "pink" zone? Is there any way to get more accurate
results using secondary light sources?

-- 
Best Regards,
Ilya A. Zimnovich
mailto:webmaster@audice.com


From gregoryjward at gmail.com  Fri Dec 16 20:46:41 2005
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Fri Dec 16 20:47:38 2005
Subject: [Radiance-general] Getting numerical errors while using secondary
	light sources...
In-Reply-To: <1266074679.20051216221810@audice.com>
References: <mailman.0.1134740265.18818.radiance-general@radiance-online.org>
	<1266074679.20051216221810@audice.com>
Message-ID: <ADCE957C-27B7-4D55-BD1D-F180D413EE4A@gmail.com>

Hi Ilya,

My guess is that you are seeing sampling areas associated with your  
exterior obstruction, which will be translated into the window's  
output distribution by mkillum as a fairly sharp cut-off since it is  
on the other side of the street.  Basically, I recommend reducing  
your -ds setting even further (to 0.1 or 0.08) in your final rtrace,  
in hopes of reducing the parallax error of the window sampling.  Even  
better would be to set -dj 0.9 and give the same point to rtrace many  
times, then average the result in a post-process.  This will  
eliminate any direct sampling errors, which I suspect are the problem  
in your particular case.

-Greg

P.S.  Very nice analysis and presentation of your results, by the way.

> From: webmaster@audice.com
> Date: December 16, 2005 11:18:10 AM PST
>
> Dear friends,
>
> I'm trying to make use of advantages of the "secondary" light sources
> to speed up the indoor irradiance calculations.
>
> In the test below we have compared a daylight factors in a room,
> calculated along the central depth axis of the floor.
>
> The room parameters are:
> 3.2 meters - width,
> 5.6 meters - depth,
> 2.5 meters - height.
>
> ...

From gregoryjward at gmail.com  Fri Dec 16 22:10:03 2005
From: gregoryjward at gmail.com (Greg Ward)
Date: Fri Dec 16 22:11:40 2005
Subject: [Radiance-general] No more Mr. Nice Guy
In-Reply-To: <43A2DC6A.60309@rumblestrip.org>
References: <CC0B19F4C6132F4D9FDDEBF194200FB5925FB5@ldcexc02.global.arup.com>
	<43A2DC6A.60309@rumblestrip.org>
Message-ID: <0A9DFDEF-0283-445D-A80D-047F8E376EA9@gmail.com>

I completed my tests on my G4 PowerBook, and the difference is even  
greater than with the G5 desktop.  These are the results:

Radiance Speed Comparisons			
	Highest	Automatic	Reduced
G5, nice=0	90.9	91.1	182.2
G5, nice=+6	90.9	166.1	182.4
G4, nice=0	182.8	184.6	366.7
G4, nice=+6	184.3	365.6	367.7

I've plotted this in Excel, spreadsheet attached.  (Write to me at  
<gward@lmi.net> if you want the 268K gif plot.)

The net difference is even more pronounced on the PowerBook -- a full  
factor of two between "nice" and "not nice" in "Automatic" mode.   
Basically, having "nice" and "Automatic" together is the same as  
setting the processor mode to "Reduced" on both platforms.

-Greg

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Benchmarks.xls
Type: application/octet-stream
Size: 17920 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20051216/37e02060/Benchmarks.obj
From tbleicher at arcor.de  Sun Dec 18 16:39:15 2005
From: tbleicher at arcor.de (Thomas Bleicher)
Date: Sun Dec 18 16:40:53 2005
Subject: [Radiance-general] OS X G5 performace [was: No more Mr. Nice Guy]
In-Reply-To: <0A9DFDEF-0283-445D-A80D-047F8E376EA9@gmail.com>
References: <CC0B19F4C6132F4D9FDDEBF194200FB5925FB5@ldcexc02.global.arup.com>
	<43A2DC6A.60309@rumblestrip.org>
	<0A9DFDEF-0283-445D-A80D-047F8E376EA9@gmail.com>
Message-ID: <7587DF9E-F9EE-47FE-B31E-3BF43F929679@arcor.de>


This is a correction for my own whining about poor Radiance
perfomance on my iMac G5 according to the bench4 test at

     http://mark.technolope.org/pages/rad_bench.html


On 16.12.2005, at 22:10, Greg Ward wrote:

> I completed my tests on my G4 PowerBook, and the difference is even  
> greater
> than with the G5 desktop.  These are the results:
>
> Radiance Speed Comparisons			
> 	Highest	Automatic	Reduced
> G5, nice=0	90.9	91.1	182.2
> G5, nice=+6	90.9	166.1	182.4
> G4, nice=0	182.8	184.6	366.7
> G4, nice=+6	184.3	365.6	367.7


I've recompiled my binaries with the new source code and heavy  
optimizing
of compiler options. With processor performace at "Highest" I get the
following result for Mark's benchmark test (details for Mark and other
compiler switch freaks out there):

rpict time:	6403.98 user
processor:	G5
num procs:	1
clock speed:	2 GHz
cache:		512 kB
OS:		OS X Tiger 10.4.3
Radiance vers:	3.8a Patch 2 (?)
compiler:	GCC 4.0.0 20041026 (build 4061)
rays:		693777405
options:	-O3 -fgcse-sm -funroll-loops -fstrict-aliasing
                 -fsched-interblock
                 -falign-loops=16 -falign-jumps=16 -falign-functions=16
                 -falign-jumps-max-skip=15 -falign-loops-max-skip=15
                 -ffast-math -freorder-blocks -freorder-blocks-and- 
partition
                 -finline-floor -mdynamic-no-pic -mpowerpc-gpopt
                 -force_cpusubtype_ALL -mtune=G5 -mcpu=G5 -mpowerpc64

Note: These options are equal to the "-fast" optimization switch of  
the gcc
       for G5 except for one missing "-malign-natural" option which  
breaks
       rpict and probably a lot of other programs.

Finally this iMac is up to the Athlon XP on Mark's page and acceptable
for a real "desktop" machine where fan noise is much more important than
render speed.


Happy holiday season and i hope everyone gets a PowerMac G5 Quad under
their christmas tree,

Thomas	


From gregoryjward at gmail.com  Mon Dec 19 00:06:44 2005
From: gregoryjward at gmail.com (Greg Ward)
Date: Mon Dec 19 00:08:18 2005
Subject: [Radiance-general] OS X G5 performace [was: No more Mr. Nice Guy]
In-Reply-To: <7587DF9E-F9EE-47FE-B31E-3BF43F929679@arcor.de>
References: <CC0B19F4C6132F4D9FDDEBF194200FB5925FB5@ldcexc02.global.arup.com>
	<43A2DC6A.60309@rumblestrip.org>
	<0A9DFDEF-0283-445D-A80D-047F8E376EA9@gmail.com>
	<7587DF9E-F9EE-47FE-B31E-3BF43F929679@arcor.de>
Message-ID: <9AC2FD60-A560-4238-94D5-BEF8E557684B@gmail.com>

Hi Thomas,

Thanks for the hint as to what options to set on the G5!  I had  
played around with these some time ago -- using gcc 3.3, I think --  
and never found a combination that both sped up the process and  
avoided problems.  I'm sure I tried removing one at a time, but not  
with the latest compiler.  Indeed, this combo seems to be a winner,  
at least for the G5 -- about 20% faster than -O3 by itself.

Running Mark Stock's bench4 on the HEAD release on my 2.5GHz G5, I  
get a user time total of 4956.56 seconds, which is maybe a few  
percent better than what one might expect just from the clock speed  
difference.

I also ran the new smp test, and got about 95% linearity (a 3.8  
times) speedup using all four processors.  This was good news to me,  
as I had some concern that the dual core processors would have a  
bottleneck with memory access.  Apparently, the enlarged caches deal  
with this pretty gracefully, and the fact that rpiece shares memory  
can't hurt.  It's too bad Apple is going with Intel instead of AMD --  
I might have waiting if that had been the case.  As it is, I don't  
think they'll better the G5 quad for some time.

-Greg

> From: Thomas Bleicher <tbleicher@arcor.de>
> Date: December 18, 2005 7:39:15 AM PST
> ...
> I've recompiled my binaries with the new source code and heavy  
> optimizing
> of compiler options. With processor performace at "Highest" I get the
> following result for Mark's benchmark test (details for Mark and other
> compiler switch freaks out there):
>
> rpict time:	6403.98 user
> processor:	G5
> num procs:	1
> clock speed:	2 GHz
> cache:		512 kB
> OS:		OS X Tiger 10.4.3
> Radiance vers:	3.8a Patch 2 (?)
> compiler:	GCC 4.0.0 20041026 (build 4061)
> rays:		693777405
> options:	-O3 -fgcse-sm -funroll-loops -fstrict-aliasing
>                 -fsched-interblock
>                 -falign-loops=16 -falign-jumps=16 -falign-functions=16
>                 -falign-jumps-max-skip=15 -falign-loops-max-skip=15
>                 -ffast-math -freorder-blocks -freorder-blocks-and- 
> partition
>                 -finline-floor -mdynamic-no-pic -mpowerpc-gpopt
>                 -force_cpusubtype_ALL -mtune=G5 -mcpu=G5 -mpowerpc64
>
> Note: These options are equal to the "-fast" optimization switch of  
> the gcc
>       for G5 except for one missing "-malign-natural" option which  
> breaks
>       rpict and probably a lot of other programs.
>
> Finally this iMac is up to the Athlon XP on Mark's page and acceptable
> for a real "desktop" machine where fan noise is much more important  
> than
> render speed.
>
> Happy holiday season and i hope everyone gets a PowerMac G5 Quad under
> their christmas tree,
>
> Thomas	

From Christoph.Reinhart at nrc-cnrc.gc.ca  Mon Dec 19 14:34:08 2005
From: Christoph.Reinhart at nrc-cnrc.gc.ca (Reinhart, Christoph)
Date: Mon Dec 19 14:35:39 2005
Subject: [Radiance-general] No more Mr. Nice Guy
Message-ID: <5910A0754536EA4AAD411AE8221C3962F482AC@nrccenexb1.nrc.ca>

Dear all,

Greg's email is not only relevant for Mac users but also for the
friendly but frequently overlooked WINDOWS crowd:)

For the Daysim Windows version, I am compiling a number of Radiance
programs. Specifically, I am calling rtrace via a C-Program called
gen_dc to calculate a whole set of daylight coefficients. In case rtrace
has been compiled with NICE=, it runs with a "low" priority whereas
without the NICE=, it runs with "normal" priority. In the latter case,
the simulation times can become substantial as just about any other job
under Windows runs with "normal" priority. In case you are using
Radiance under Windows (cygwin etc.), this might be worthwhile looking
into as well. One of my students reported that the Lightstudio Radiance
binaries run significantly faster than Desktop Radiance (but this may be
the case for numerous other reasons as well).

Christoph

-----Original Message-----
From: radiance-general-bounces@radiance-online.org
[mailto:radiance-general-bounces@radiance-online.org] On Behalf Of Greg
Ward
Sent: Thursday, December 15, 2005 11:51 PM
To: Radiance general discussion
Subject: [Radiance-general] No more Mr. Nice Guy

Hi All,

This message is most relevant to Mac users, but introduces a change that
may affect rpict and rtrace performance in future releases on all
platforms.  Specifically, I have taken out the NICE= macro settings from
the Rmakefile in src/rt, so future builds will run all Radiance programs
at the standard user priority.

I made a fortuitous discovery whilst playing around with the very cool
(no pun intended) TemperatureMonitor freeware <http://
www.bresink.com/osx/TemperatureMonitor.html> on my new PowerMac G5 quad.
It's lots of fun to watch the processor temps go up and down with load.
The funny thing I noticed was that changing the Energy Savings settings
had an unexpected effect on temperatures, which are in turn related to
power consumption and (presumably) processor performance.

The Energy Saver options lists three processor performance settings,
"Highest," "Automatic," and "Reduced."  With the machine idle, there
were only slight differences between the three; I had expected to see
more, especially on the "Highest" setting...  The biggest difference was
between "Highest" and "Reduced" with all four processors busy, and that
was no surprise.  What was a surprise was that when I had four rpict
jobs going in parallel, there was a big difference between  
the temperatures using the "Highest" versus "Automatic" settings.   
Apple documentation states that the performance penalty for using
"Automatic" should be very small, so I figured the temperature change
would also be small.  That's when I decided to measure actual
performance.

What a difference!  Between the "Highest" and "Automatic" settings, I
noticed a performance difference of over 60%, where I expected to see
little or none.  What I did expect was a performance hit moving to the
"Reduced" setting, which indeed there was, but it was only  
another 13% worse than "Automatic."  This really seemed wrong to me.   
That's when I decided to start playing around with the "nice" level of
rpict.

The "nice" setting on a process is a way to tell Unix that a job is not
a top priority, and interactive processes should be given more of the
CPU if there are any running.  However, in the past, it hasn't much
affected the performance of a process if there are no other jobs to
contend with.  I put nice() calls in Radiance way back when multi- user
Unix's were the rule, and we had to peacefully coexist with a lot of
other people who might get annoyed if I hogged all the system resources,
as Radiance is wont to do.

In short, I found out that removing the nice() system call from rpict
achieved the "Highest" performance figure even when the Energy Saver
processor speed was set to "Automatic."  (The "Reduced" performance was
not affected.)  Apparently, Mac OS X 10.4 (at least) uses the process
"nice" setting to decide whether or not to kick the CPU speed up a
notch.  This might be a new feature of the OS, as I don't have access to
a maching running Jaguar or Panther to try it there.

The bottom line in all this is that if you own a Mac and you're running
Radiance on it, be sure to use the "Highest" setting in the Energy Saver
control panel, because if you don't, your rendering might just be
running 60% slower than you would like it to.  Option B is to remove the
-DNICE= arguments from the build lines in src/rt/ Rmakefile and remove
the affected object files (rpmain.o and
rtmain.o) then rerun "rmake install" in the rt directory.  Or, download
Saturday's HEAD release and build that.  (I think I'm too late for
tomorrow.)  Then, you can leave the processor performance on
"Automatic," which is the default for normal operation.

I wish I had made this discovery a couple of years ago....

-Greg


_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general

From Christoph.Reinhart at nrc-cnrc.gc.ca  Mon Dec 19 16:14:26 2005
From: Christoph.Reinhart at nrc-cnrc.gc.ca (Reinhart, Christoph)
Date: Mon Dec 19 16:15:54 2005
Subject: [Radiance-general] Radiance plug-in for 3DS
Message-ID: <5910A0754536EA4AAD411AE8221C3962F482C8@nrccenexb1.nrc.ca>

Dear all,
 
Is there any Radiance plug-in to 3D Studio out there that any of you can
recommend?
 
Christoph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20051219/f32f8e81/attachment.html
From jedev at visarc.com  Mon Dec 19 16:21:58 2005
From: jedev at visarc.com (Jack de Valpine)
Date: Mon Dec 19 16:25:21 2005
Subject: [Radiance-general] Radiance plug-in for 3DS
In-Reply-To: <5910A0754536EA4AAD411AE8221C3962F482C8@nrccenexb1.nrc.ca>
References: <5910A0754536EA4AAD411AE8221C3962F482C8@nrccenexb1.nrc.ca>
Message-ID: <43A6D016.4050808@visarc.com>

Hi Christoph,

I have heard of the following but have no working experience with it:

http://www.lichtplaner.com/

-Jack de Valpine

Reinhart, Christoph wrote:

> Dear all,
>  
> Is there any Radiance plug-in to 3D Studio out there that any of you 
> can recommend?
>  
> Christoph
>
>------------------------------------------------------------------------
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general@radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general
>  
>


From jm at dmu.ac.uk  Mon Dec 19 18:44:32 2005
From: jm at dmu.ac.uk (John Mardaljevic)
Date: Mon Dec 19 18:46:06 2005
Subject: [Radiance-general] Radiance plug-in for 3DS
Message-ID: <6FB689D4-35F3-4D59-BA5B-F9D1C6BEF405@dmu.ac.uk>

Christoph,

SketchUp (Win/Mac) now imports and exports 3DS.

http://www.sketchup.com/

No Radiance plugin, but you could probably get some useful work done  
within the 8hr demo if you're stuck.  You'll have to manually edit  
the materials file.  I've limited experience of 3D modellers, but  
SketchUp feels just right for the occasional user who needs to work  
up some geometry for Radiance.  And of course, on the Mac it's a  
single platform/OS workflow.

mit freundlichem gru?,

-John

-----------------------------------------------
Dr. John Mardaljevic
Senior Research Fellow
Institute of Energy and Sustainable Development
De Montfort University
The Gateway
Leicester
LE1 9BH, UK
+44 (0) 116 257 7972
+44 (0) 116 257 7981 (fax)

jm@dmu.ac.uk
http://www.iesd.dmu.ac.uk/~jm



From rob.fitzsimmons at Summit.Fiserv.com  Mon Dec 19 19:44:35 2005
From: rob.fitzsimmons at Summit.Fiserv.com (Fitzsimmons, Rob)
Date: Mon Dec 19 19:46:18 2005
Subject: [Radiance-general] Radiance plug-in for 3DS
Message-ID: <B8DD8375FCE2C94B9F170D9277C1FA2B8C5C9B@corvallis>

 I've played with the demo - its a great program for doing rough mockups,
but you can also get very specific by keying dimensions
http://www.sketchup.com/forum/read.php?f=3&i=17351&t=16675
Used Sketchup and 3ds2rad

Rob F

-----Original Message-----
From: John Mardaljevic
To: radiance-general@radiance-online.org
Sent: 12/19/2005 9:44 AM
Subject: [Radiance-general] Radiance plug-in for 3DS

Christoph,

SketchUp (Win/Mac) now imports and exports 3DS.

http://www.sketchup.com/

No Radiance plugin, but you could probably get some useful work done  
within the 8hr demo if you're stuck.  You'll have to manually edit  
the materials file.  I've limited experience of 3D modellers, but  
SketchUp feels just right for the occasional user who needs to work  
up some geometry for Radiance.  And of course, on the Mac it's a  
single platform/OS workflow.

mit freundlichem gru?,

-John

-----------------------------------------------
Dr. John Mardaljevic
Senior Research Fellow
Institute of Energy and Sustainable Development
De Montfort University
The Gateway
Leicester
LE1 9BH, UK
+44 (0) 116 257 7972
+44 (0) 116 257 7981 (fax)

jm@dmu.ac.uk
http://www.iesd.dmu.ac.uk/~jm



_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general

From toast at becausewecan.org  Mon Dec 19 20:01:01 2005
From: toast at becausewecan.org (Jeffrey McGrew)
Date: Mon Dec 19 20:02:06 2005
Subject: [Radiance-general] Radiance plug-in for 3DS
In-Reply-To: <B8DD8375FCE2C94B9F170D9277C1FA2B8C5C9B@corvallis>
References: <B8DD8375FCE2C94B9F170D9277C1FA2B8C5C9B@corvallis>
Message-ID: <43A7036D.3030105@becausewecan.org>

Fitzsimmons, Rob wrote:

>Used Sketchup and 3ds2rad
>  
>
Hey, anyone know where I can get that 3ds2rad script? I know it's posted 
somewhere, but I can't seem to find it anywhere.

Also, I'm assuming this script uses the 3ds2mgf -> mgf2rad thing, right? Just wondering because I've had some trouble with getting some of my 3ds files into RADs this way.

Thanks!

Jeffrey McGrew

Because We Can, LLC
(415) 505-4689
www.becausewecan.org


From jedev at visarc.com  Mon Dec 19 20:08:37 2005
From: jedev at visarc.com (Jack de Valpine)
Date: Mon Dec 19 20:11:56 2005
Subject: [Radiance-general] Radiance plug-in for 3DS
In-Reply-To: <43A7036D.3030105@becausewecan.org>
References: <B8DD8375FCE2C94B9F170D9277C1FA2B8C5C9B@corvallis>
	<43A7036D.3030105@becausewecan.org>
Message-ID: <43A70535.2060801@visarc.com>

Here is a simple version that was originally posted by John Mardaljevic in response to similar queries ([Radiance-general] ConRAD / 3ds2rad converter - ArchiCAD -> Radiance)

=======================3ds2rad========================
#!/bin/csh -f

set tds = $1

set nam = $tds:r

3ds2mgf $tds

mgfilt '#,c,cct,cmix,cspec,cxy,cyl,ed,f,ies,ir,m,o,p,prism,rd,rs,sides,sph,td,ts,v,xf,fh' $nam.mgf | 
mgf2rad -m mat$nam.rad >! $nam.rad

rm $nam.mgf $nam.inc
======================================================

What problems have you had?

-Jack

Jeffrey McGrew wrote:

> Fitzsimmons, Rob wrote:
>
>> Used Sketchup and 3ds2rad
>>  
>>
> Hey, anyone know where I can get that 3ds2rad script? I know it's 
> posted somewhere, but I can't seem to find it anywhere.
>
> Also, I'm assuming this script uses the 3ds2mgf -> mgf2rad thing, 
> right? Just wondering because I've had some trouble with getting some 
> of my 3ds files into RADs this way.
>
> Thanks!
>
> Jeffrey McGrew
>
> Because We Can, LLC
> (415) 505-4689
> www.becausewecan.org
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>



From toast at becausewecan.org  Tue Dec 20 22:47:10 2005
From: toast at becausewecan.org (Jeffrey McGrew)
Date: Tue Dec 20 22:48:41 2005
Subject: [Radiance-general] Radiance plug-in for 3DS
In-Reply-To: <43A70535.2060801@visarc.com>
References: <B8DD8375FCE2C94B9F170D9277C1FA2B8C5C9B@corvallis>	<43A7036D.3030105@becausewecan.org>
	<43A70535.2060801@visarc.com>
Message-ID: <43A87BDE.6080207@becausewecan.org>

The trouble is that I have no easy and fast way to bring something from 
Revit into Radiance. It's a pain. I'd love to hear a solution.

I'm using Autodesk Revit (heavily). I model my Building. I export out to 
DWG, and then bring that into 3D Studio, which is smart enough to bring 
along the materials I'm using in Revit into it. I then export out a nice 
3DS file from 3D Studio, and run the 3DS2MGF -> MGF2RAD style of 
conversion, and it gets most of the way through the conversion but then 
hits a 'Unexpected EOF'. If I then render the RAD file things are 
missing, for it didn't finish the conversion. It happens with this 
script as well.

The only other ways I can figure to bring Revit models into Radiance is 
to export them out as a DXF, and do a DXF2RAD, which also crashes and 
doesn't work. Or I can export them out to a DWG, open them in AutoCAD, 
and then export them out as a RAD using TORAD, but this is now broken 
for it hasn't been updated for the newer versions of AutoCAD, which are 
all I've got.

The DXF's out of Revit seem to crash Blender too, sadly. Now, I've been 
told (by Autodesk) that in Revit 9 there will be a fix to make the DXF's 
'better' but I have no idea if it's going to help my troubles, and 
without pulling the Revit models into 3D Studio first you'd have to 
remap all the materials anyways, which will eat up too much time.

So I'm left with two options: Buy the Radiance plug-in for 3D Studio, or 
try to write an Radiance exporter using Revit's API directly (or wait 
until someone else does). Since Radiance isn't my core business, just a 
rendering engine that I enjoy using and would like to use more of, I 
really wish I had an easier way of getting from Revit into Radiance, for 
today it's a totally pain in the rear.

I had hoped that maybe this script would filter out whatever is causing 
that EOF, but it doesn't seem too. Oh, I'm running Radiance on Cygwin, 
maybe I should give this a go on the G4 when I get home and see if I get 
the same result...

Thanks for the script, and sorry for the long story.

Jeffrey McGrew


Jack de Valpine wrote:

> Here is a simple version that was originally posted by John 
> Mardaljevic in response to similar queries ([Radiance-general] ConRAD 
> / 3ds2rad converter - ArchiCAD -> Radiance)
>
> =======================3ds2rad========================
> #!/bin/csh -f
>
> set tds = $1
>
> set nam = $tds:r
>
> 3ds2mgf $tds
>
> mgfilt 
> '#,c,cct,cmix,cspec,cxy,cyl,ed,f,ies,ir,m,o,p,prism,rd,rs,sides,sph,td,ts,v,xf,fh' 
> $nam.mgf | mgf2rad -m mat$nam.rad >! $nam.rad
>
> rm $nam.mgf $nam.inc
> ======================================================
>
> What problems have you had?
>
> -Jack
>
> Jeffrey McGrew wrote:
>
>> Fitzsimmons, Rob wrote:
>>
>>> Used Sketchup and 3ds2rad
>>>  
>>>
>> Hey, anyone know where I can get that 3ds2rad script? I know it's 
>> posted somewhere, but I can't seem to find it anywhere.
>>
>> Also, I'm assuming this script uses the 3ds2mgf -> mgf2rad thing, 
>> right? Just wondering because I've had some trouble with getting some 
>> of my 3ds files into RADs this way.
>>
>> Thanks!
>>
>> Jeffrey McGrew
>>
>> Because We Can, LLC
>> (415) 505-4689
>> www.becausewecan.org
>>
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general@radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>


-- 

Jeffrey McGrew

Because We Can, LLC
(415) 505-4689
www.becausewecan.org


From grobe at gmx.net  Wed Dec 21 08:36:11 2005
From: grobe at gmx.net (Lars Grobe)
Date: Wed Dec 21 08:37:37 2005
Subject: [Radiance-general] Radiance plug-in for 3DS
References: <43A87BDE.6080207@becausewecan.org>
Message-ID: <10878.1135150571@www16.gmx.net>

Hi,

can't you find a way to export to obj? The support for this format has been
extended during the last years, you will even have uv-mapping and surface
normals working, plus a more efficient way to store large models.

CU Lars.

From jm at dmu.ac.uk  Wed Dec 21 10:33:31 2005
From: jm at dmu.ac.uk (John Mardaljevic)
Date: Wed Dec 21 10:35:03 2005
Subject: [Radiance-general] Radiance plug-in for 3DS
Message-ID: <33B40178-C019-45BF-8FDE-DFCF7A3006E5@dmu.ac.uk>

> I then export out a nice
> 3DS file from 3D Studio, and run the 3DS2MGF -> MGF2RAD style of
> conversion, and it gets most of the way through the conversion but  
> then
> hits a 'Unexpected EOF'. If I then render the RAD file things are
> missing, for it didn't finish the conversion. It happens with this
> script as well.

Jeffrey,

In my experience, the 'Unexpected EOF' report occurs with every  
successful execution of 3ds2mgf.  In which case, the report may have  
nothing to do with the missing geometry.

Sorry I can't be of more help, but I thought it worth pointing out  
that this seems to be normal behaviour for 3ds2mgf.

-John

-----------------------------------------------
Dr. John Mardaljevic
Senior Research Fellow
Institute of Energy and Sustainable Development
De Montfort University
The Gateway
Leicester
LE1 9BH, UK
+44 (0) 116 257 7972
+44 (0) 116 257 7981 (fax)

jm@dmu.ac.uk
http://www.iesd.dmu.ac.uk/~jm



From iain at esru.strath.ac.uk  Wed Dec 21 10:46:44 2005
From: iain at esru.strath.ac.uk (Iain Macdonald)
Date: Wed Dec 21 10:53:47 2005
Subject: [Radiance-general] Radiance plug-in for 3DS
In-Reply-To: <33B40178-C019-45BF-8FDE-DFCF7A3006E5@dmu.ac.uk>
References: <33B40178-C019-45BF-8FDE-DFCF7A3006E5@dmu.ac.uk>
Message-ID: <43A92484.4090608@esru.strath.ac.uk>

Jeffrey,

I also get the same behaviour as John reports.  In my experience going 
from dxf -> 3ds -> mgf -> rad (works better than dxf -> rad directly) 
missing surfaces are due to errors in the original cad model or small 
errors in curved surfaces being triangulated.  I would recommend 
checking the original model.

Apart from that could there be any 3ds primitives that are not 
translated by 3ds2mgf?

Iain

John Mardaljevic wrote:

>> I then export out a nice
>> 3DS file from 3D Studio, and run the 3DS2MGF -> MGF2RAD style of
>> conversion, and it gets most of the way through the conversion but  then
>> hits a 'Unexpected EOF'. If I then render the RAD file things are
>> missing, for it didn't finish the conversion. It happens with this
>> script as well.
>
>
> Jeffrey,
>
> In my experience, the 'Unexpected EOF' report occurs with every  
> successful execution of 3ds2mgf.  In which case, the report may have  
> nothing to do with the missing geometry.
>
> Sorry I can't be of more help, but I thought it worth pointing out  
> that this seems to be normal behaviour for 3ds2mgf.
>
> -John
>
> -----------------------------------------------
> Dr. John Mardaljevic
> Senior Research Fellow
> Institute of Energy and Sustainable Development
> De Montfort University
> The Gateway
> Leicester
> LE1 9BH, UK
> +44 (0) 116 257 7972
> +44 (0) 116 257 7981 (fax)
>
> jm@dmu.ac.uk
> http://www.iesd.dmu.ac.uk/~jm
>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>

-- 
****************************
Dr Iain A Macdonald
Energy Systems Research Unit
University of Strathclyde
Glasgow, UK
+44 141 548 3747
http://www.esru.strath.ac.uk
****************************




From jedev at visarc.com  Wed Dec 21 17:51:54 2005
From: jedev at visarc.com (Jack de Valpine)
Date: Wed Dec 21 18:29:24 2005
Subject: [Radiance-general] Radiance plug-in for 3DS
In-Reply-To: <43A92484.4090608@esru.strath.ac.uk>
References: <33B40178-C019-45BF-8FDE-DFCF7A3006E5@dmu.ac.uk>
	<43A92484.4090608@esru.strath.ac.uk>
Message-ID: <43A9882A.3040706@visarc.com>

Hi All,

Here are a few more thought to add.

    * 3ds - this format has some limitations in data size/allocation. I
      have noticed on big models that have a lot of geometry, 3dsout
      from Autocad will stop on large entities. One thing to consider
      would be writing a script (autolisp) and using 3dsout on a per
      layer or per color basis, though this still may not work on large
      entities.
    * Max and objects converted to 3ds - there are lots of objects out
      in the 3D marketplace that are sold in multiple formats, some of
      these are actually modeled in Max and then converted to other
      formats. One problem that I have noticed with models created in
      Max is that because of the way Max deals with coordinate systems
      on a per object basis, models exported to other formats such as
      3ds do not always have things transformed correctly. I think that
      this must be a problem with the way Max deals with exporting to
      other formats. For example, I bought some nice 3D car models in
      3ds format, in a few of them the wheels where not in the right
      location when I viewed the model.  PLEASE NOTE - I am not a Max
      user, but I have worked with customers who use Max, and it is a
      huge @#%$%^#$% pain in the @#%$$#$% to get things converted into
      something useful.
    * Polytrans - my latest effort at find a decent 3D conversion tool
      finally lead me to purchase Polytrans from Okino
      (http://www.okino.com/conv/conv.htm) along with the cad-pak
      module. I have used this for a few different things (though there
      are some minor problems with the native autocad dwg as they use
      opendwg vs native dwg). The nice things is that I now have a
      reliable way to export directly to obj!
    * 3Dwin4 and Accutrans3d - I have used the former with some success
      and heard of the latter. You will have to do a search on where to
      find them. These are shareware
    * Revit - As far as this is concerned, I have always thought that
      this must be a pretty great tool. However, I have never used it
      for production for the very reason that it seemed extremely
      difficult to get geometry out. This being said though, I have
      heard from relatively reliable sources that they are working on
      this, on the other hand though I think that in the bigger picture
      they are trying to determine the best way to fit Revit into their
      overall product mix.
    * Outsource Development of custom exporter - Depending on need and
      how much you use Revit it might be worth it to consider
      outsourcing the development of a native exporter. I have no idea
      what the Revit api is like though so not really sure what would be
      involved. You might check out: www.4d-technologies.com,
      www.fpsols.com, www.sycode.com

Regards,

-Jack


Iain Macdonald wrote:

> Jeffrey,
>
> I also get the same behaviour as John reports.  In my experience going 
> from dxf -> 3ds -> mgf -> rad (works better than dxf -> rad directly) 
> missing surfaces are due to errors in the original cad model or small 
> errors in curved surfaces being triangulated.  I would recommend 
> checking the original model.
>
> Apart from that could there be any 3ds primitives that are not 
> translated by 3ds2mgf?
>
> Iain
>
> John Mardaljevic wrote:
>
>>> I then export out a nice
>>> 3DS file from 3D Studio, and run the 3DS2MGF -> MGF2RAD style of
>>> conversion, and it gets most of the way through the conversion but  
>>> then
>>> hits a 'Unexpected EOF'. If I then render the RAD file things are
>>> missing, for it didn't finish the conversion. It happens with this
>>> script as well.
>>
>>
>>
>> Jeffrey,
>>
>> In my experience, the 'Unexpected EOF' report occurs with every  
>> successful execution of 3ds2mgf.  In which case, the report may have  
>> nothing to do with the missing geometry.
>>
>> Sorry I can't be of more help, but I thought it worth pointing out  
>> that this seems to be normal behaviour for 3ds2mgf.
>>
>> -John
>>
>> -----------------------------------------------
>> Dr. John Mardaljevic
>> Senior Research Fellow
>> Institute of Energy and Sustainable Development
>> De Montfort University
>> The Gateway
>> Leicester
>> LE1 9BH, UK
>> +44 (0) 116 257 7972
>> +44 (0) 116 257 7981 (fax)
>>
>> jm@dmu.ac.uk
>> http://www.iesd.dmu.ac.uk/~jm
>>
>>
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general@radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>

-- 
# Jack de Valpine
# president
#
# visarc incorporated
# http://www.visarc.com
#
# channeling technology for superior design and construction



From toast at becausewecan.org  Wed Dec 21 18:34:36 2005
From: toast at becausewecan.org (Jeffrey McGrew)
Date: Wed Dec 21 18:37:09 2005
Subject: [Radiance-general] Radiance plug-in for 3DS
In-Reply-To: <33B40178-C019-45BF-8FDE-DFCF7A3006E5@dmu.ac.uk>
References: <33B40178-C019-45BF-8FDE-DFCF7A3006E5@dmu.ac.uk>
Message-ID: <43A9922C.8010000@becausewecan.org>

John Mardaljevic wrote:

> Jeffrey,
>
> In my experience, the 'Unexpected EOF' report occurs with every  
> successful execution of 3ds2mgf.  In which case, the report may have  
> nothing to do with the missing geometry.

That's very good to know! Well then now that shifts my focus to something else, instead of thinking something with the 3ds2mgf is wrong (or the data I'm feeding it is causing the EOF message).

Jeffrey McGrew

Because We Can, LLC
(415) 505-4689
www.becausewecan.org


From toast at becausewecan.org  Wed Dec 21 18:45:16 2005
From: toast at becausewecan.org (Jeffrey McGrew)
Date: Wed Dec 21 18:46:39 2005
Subject: [Radiance-general] Radiance plug-in for 3DS
In-Reply-To: <43A92484.4090608@esru.strath.ac.uk>
References: <33B40178-C019-45BF-8FDE-DFCF7A3006E5@dmu.ac.uk>
	<43A92484.4090608@esru.strath.ac.uk>
Message-ID: <43A994AC.70308@becausewecan.org>

Iain Macdonald wrote:

> Jeffrey,
>
> I also get the same behaviour as John reports.  In my experience going 
> from dxf -> 3ds -> mgf -> rad (works better than dxf -> rad directly) 
> missing surfaces are due to errors in the original cad model or small 
> errors in curved surfaces being triangulated.  I would recommend 
> checking the original model.

Well, I know that the model is complete. Revit makes very complete, well 
detailed, and tight models. And I made the model I'm trying to use as an 
example, there aren't curvy bits in it, and when it's brought into 3D 
Studio it's complete, and it's normals are all ok, ect. ect. So I think 
the model is complete when I start, it's that stuff is getting lost out 
of 3D Studio upon export. But now that I know how 3ds2mgf behaves, I'm 
going to focus on getting my models out of 3D Studio intact first, see 
if that's the issue. If 3D Studio isn't exporting whole models that 
originated within Revit, that's a large issue that will mess up any 
format I try to use to get to Radiance.

> Apart from that could there be any 3ds primitives that are not 
> translated by 3ds2mgf?

When you export out a 3D model from Revit, you can export as solids or a polyface mesh. The second option is better, and is what I'm using. Those meshes wind up as meshes in 3D Studio, I don't know what they wind up as in a 3DS file.

Jeffrey McGrew

Because We Can, LLC
(415) 505-4689
www.becausewecan.org


From toast at becausewecan.org  Wed Dec 21 19:06:15 2005
From: toast at becausewecan.org (Jeffrey McGrew)
Date: Wed Dec 21 19:07:42 2005
Subject: [Radiance-general] Radiance plug-in for 3DS
In-Reply-To: <43A9882A.3040706@visarc.com>
References: <33B40178-C019-45BF-8FDE-DFCF7A3006E5@dmu.ac.uk>	<43A92484.4090608@esru.strath.ac.uk>
	<43A9882A.3040706@visarc.com>
Message-ID: <43A99997.3010601@becausewecan.org>

Jack de Valpine wrote:

> Hi All,
>
> Here are a few more thought to add.
>
>    * 3ds - this format has some limitations in data size/allocation. I
>      have noticed on big models that have a lot of geometry, 3dsout
>      from Autocad will stop on large entities. One thing to consider
>      would be writing a script (autolisp) and using 3dsout on a per
>      layer or per color basis, though this still may not work on large
>      entities.

Revit tends to make models with lots and lots of surfaces and 
information. So this could very well be the limitation I'm hitting.

>    * Max and objects converted to 3ds - there are lots of objects out
>      in the 3D marketplace that are sold in multiple formats, some of
>      these are actually modeled in Max and then converted to other
>      formats. One problem that I have noticed with models created in
>      Max is that because of the way Max deals with coordinate systems
>      on a per object basis, models exported to other formats such as
>      3ds do not always have things transformed correctly. I think that
>      this must be a problem with the way Max deals with exporting to
>      other formats. For example, I bought some nice 3D car models in
>      3ds format, in a few of them the wheels where not in the right
>      location when I viewed the model.  PLEASE NOTE - I am not a Max
>      user, but I have worked with customers who use Max, and it is a
>      huge @#%$%^#$% pain in the @#%$$#$% to get things converted into
>      something useful.

Huh, that's not good to hear. The only reason Max is even in the mix for 
me is as a overblown file converter, really. I'd much rather prefer 
going to Blender, but Blender's DXF import functions seem not-so-good 
and aren't being done via it's Python API, but instead has been written 
into it's code,

>    * Polytrans - my latest effort at find a decent 3D conversion tool
>      finally lead me to purchase Polytrans from Okino
>      (http://www.okino.com/conv/conv.htm) along with the cad-pak
>      module. I have used this for a few different things (though there
>      are some minor problems with the native autocad dwg as they use
>      opendwg vs native dwg). The nice things is that I now have a
>      reliable way to export directly to obj!

I wish this was viable option. See, Revit has materials in it already, 
and it's very handy to assign materials therein because then they relate 
parametrically to what materials show up in your Deliverables (for 
example, drywall looks like drywall in section and elevation), and they 
can participate in Structural Analysis. It's only that the rendering 
abilities of Revit are grossly limited via Accurender (it's built-in 
rendering engine) that I'm looking to use other tools with it. Now, 
Revit's exporting to DWG/DXF is really intended for sending 2D and 3D 
models out to consultants. Revit places things into layers based upon 
what they are, not by what material they are, but it does include the 
material information as X-data. 3D Studio knows how to read this data, 
so that when you bring in a model from Revit the materials are intact. 
Most other programs don't read this data, and so you wind up with a nice 
model, but one without materials already mapped, meaning you have to 
duplicate work and waste a lot of time. Theoretically you could write 
your own DXF2RAD converter that understood the x-data as well, that 
could produce a RAD file, materials intact. But no one has yet, and I 
don't have the time right now to learn how to take something like the 
Python DWG/DXF routines that are available and edit them for this sort 
of use.

>    * 3Dwin4 and Accutrans3d - I have used the former with some success
>      and heard of the latter. You will have to do a search on where to
>      find them. These are shareware

I will give them a try, but again, I'd like a model with materials if I 
can get it.

>    * Revit - As far as this is concerned, I have always thought that
>      this must be a pretty great tool. However, I have never used it
>      for production for the very reason that it seemed extremely
>      difficult to get geometry out. This being said though, I have
>      heard from relatively reliable sources that they are working on
>      this, on the other hand though I think that in the bigger picture
>      they are trying to determine the best way to fit Revit into their
>      overall product mix.

It's a fantastic tool for Production, if the majority of what you do is 
typical Document sets, like Schematics, CD's, that sort of thing. If the 
end result is a PDF or printed paper, Revit is really, really keen. 
However, it only exports to DWG, DXF, and SAT. And only the DWG/DXF 
option retains materials (it's a long story) and so you're dead on in 
assuming that it's not the best tool for creating 3D models in whatever 
format you might want. The pain here is that it does create very nice 
and detailed models very quickly. It's just a pain to get them out into 
some other format. Now with 3D Studio's new ability to talk to Revit 
(somewhat indirectly, but still) there are a lot more options available, 
and I'm hoping that it might lead to an easy and fast Revit -> Radiance 
bridge of some kind.

I got into Radiance a while ago, but because of this difficulty of using 
Revit models with it I haven't gotten the chance to do too much 'real 
work' with it. I'm just a designer looking for a better rendering 
engine, really, not a lighting or analysis person.

>    * Outsource Development of custom exporter - Depending on need and
>      how much you use Revit it might be worth it to consider
>      outsourcing the development of a native exporter. I have no idea
>      what the Revit api is like though so not really sure what would be
>      involved. You might check out: www.4d-technologies.com,
>      www.fpsols.com, www.sycode.com

I use Revit a lot, however I'm currently just one guy doing his own 
projects and helping others out with Revit stuff. I might take a job 
with a huge firm tho, to help them with their transition to Revit, and 
as such might have a lot more resources available to me. The Revit API 
is all .NET based, so any .NET language would work (sadly :P). I've had 
enough time to find out the the API allows for something like a Radiance 
exporter to be made (I think) but not enough time to actually learn how 
to make one (again, just a designer, not a programmer, sadly).

Thanks for all the great info, I've got some research to do! If I figure 
out a quick way to go from Revit to Radiance I'll definitely post it here.

Jeffrey McGrew

Because We Can, LLC
(415) 505-4689
www.becausewecan.org


From jedev at visarc.com  Wed Dec 21 19:21:30 2005
From: jedev at visarc.com (Jack de Valpine)
Date: Wed Dec 21 19:24:54 2005
Subject: [Radiance-general] Radiance plug-in for 3DS
In-Reply-To: <43A99997.3010601@becausewecan.org>
References: <33B40178-C019-45BF-8FDE-DFCF7A3006E5@dmu.ac.uk>	<43A92484.4090608@esru.strath.ac.uk>	<43A9882A.3040706@visarc.com>
	<43A99997.3010601@becausewecan.org>
Message-ID: <43A99D2A.2020508@visarc.com>

Hi Jeff,

When you say 3D Studio do you mean Max or Viz? There is an okino 
polytrans plug-in for Max for geometry conversion in/out. Though I do 
understand that the main issue is getting the material assignments from 
Revit as well.

Also here is something that I grabbed off of the following list: 
http://www.formz.com/forum/forum_archive/forumC/general/186.html

There are a number of limitations and features of 3DS format that we
must keep in mind. First and most important limitation is the 65535
triangle limit on any single object. The 3DS file also has an object
limit of 65535 objects.

-Jack


Jeffrey McGrew wrote:

> Jack de Valpine wrote:
>
>> Hi All,
>>
>> Here are a few more thought to add.
>>
>>    * 3ds - this format has some limitations in data size/allocation. I
>>      have noticed on big models that have a lot of geometry, 3dsout
>>      from Autocad will stop on large entities. One thing to consider
>>      would be writing a script (autolisp) and using 3dsout on a per
>>      layer or per color basis, though this still may not work on large
>>      entities.
>
>
> Revit tends to make models with lots and lots of surfaces and 
> information. So this could very well be the limitation I'm hitting.
>
>>    * Max and objects converted to 3ds - there are lots of objects out
>>      in the 3D marketplace that are sold in multiple formats, some of
>>      these are actually modeled in Max and then converted to other
>>      formats. One problem that I have noticed with models created in
>>      Max is that because of the way Max deals with coordinate systems
>>      on a per object basis, models exported to other formats such as
>>      3ds do not always have things transformed correctly. I think that
>>      this must be a problem with the way Max deals with exporting to
>>      other formats. For example, I bought some nice 3D car models in
>>      3ds format, in a few of them the wheels where not in the right
>>      location when I viewed the model.  PLEASE NOTE - I am not a Max
>>      user, but I have worked with customers who use Max, and it is a
>>      huge @#%$%^#$% pain in the @#%$$#$% to get things converted into
>>      something useful.
>
>
> Huh, that's not good to hear. The only reason Max is even in the mix 
> for me is as a overblown file converter, really. I'd much rather 
> prefer going to Blender, but Blender's DXF import functions seem 
> not-so-good and aren't being done via it's Python API, but instead has 
> been written into it's code,
>
>>    * Polytrans - my latest effort at find a decent 3D conversion tool
>>      finally lead me to purchase Polytrans from Okino
>>      (http://www.okino.com/conv/conv.htm) along with the cad-pak
>>      module. I have used this for a few different things (though there
>>      are some minor problems with the native autocad dwg as they use
>>      opendwg vs native dwg). The nice things is that I now have a
>>      reliable way to export directly to obj!
>
>
> I wish this was viable option. See, Revit has materials in it already, 
> and it's very handy to assign materials therein because then they 
> relate parametrically to what materials show up in your Deliverables 
> (for example, drywall looks like drywall in section and elevation), 
> and they can participate in Structural Analysis. It's only that the 
> rendering abilities of Revit are grossly limited via Accurender (it's 
> built-in rendering engine) that I'm looking to use other tools with 
> it. Now, Revit's exporting to DWG/DXF is really intended for sending 
> 2D and 3D models out to consultants. Revit places things into layers 
> based upon what they are, not by what material they are, but it does 
> include the material information as X-data. 3D Studio knows how to 
> read this data, so that when you bring in a model from Revit the 
> materials are intact. Most other programs don't read this data, and so 
> you wind up with a nice model, but one without materials already 
> mapped, meaning you have to duplicate work and waste a lot of time. 
> Theoretically you could write your own DXF2RAD converter that 
> understood the x-data as well, that could produce a RAD file, 
> materials intact. But no one has yet, and I don't have the time right 
> now to learn how to take something like the Python DWG/DXF routines 
> that are available and edit them for this sort of use.
>
>>    * 3Dwin4 and Accutrans3d - I have used the former with some success
>>      and heard of the latter. You will have to do a search on where to
>>      find them. These are shareware
>
>
> I will give them a try, but again, I'd like a model with materials if 
> I can get it.
>
>>    * Revit - As far as this is concerned, I have always thought that
>>      this must be a pretty great tool. However, I have never used it
>>      for production for the very reason that it seemed extremely
>>      difficult to get geometry out. This being said though, I have
>>      heard from relatively reliable sources that they are working on
>>      this, on the other hand though I think that in the bigger picture
>>      they are trying to determine the best way to fit Revit into their
>>      overall product mix.
>
>
> It's a fantastic tool for Production, if the majority of what you do 
> is typical Document sets, like Schematics, CD's, that sort of thing. 
> If the end result is a PDF or printed paper, Revit is really, really 
> keen. However, it only exports to DWG, DXF, and SAT. And only the 
> DWG/DXF option retains materials (it's a long story) and so you're 
> dead on in assuming that it's not the best tool for creating 3D models 
> in whatever format you might want. The pain here is that it does 
> create very nice and detailed models very quickly. It's just a pain to 
> get them out into some other format. Now with 3D Studio's new ability 
> to talk to Revit (somewhat indirectly, but still) there are a lot more 
> options available, and I'm hoping that it might lead to an easy and 
> fast Revit -> Radiance bridge of some kind.
>
> I got into Radiance a while ago, but because of this difficulty of 
> using Revit models with it I haven't gotten the chance to do too much 
> 'real work' with it. I'm just a designer looking for a better 
> rendering engine, really, not a lighting or analysis person.
>
>>    * Outsource Development of custom exporter - Depending on need and
>>      how much you use Revit it might be worth it to consider
>>      outsourcing the development of a native exporter. I have no idea
>>      what the Revit api is like though so not really sure what would be
>>      involved. You might check out: www.4d-technologies.com,
>>      www.fpsols.com, www.sycode.com
>
>
> I use Revit a lot, however I'm currently just one guy doing his own 
> projects and helping others out with Revit stuff. I might take a job 
> with a huge firm tho, to help them with their transition to Revit, and 
> as such might have a lot more resources available to me. The Revit API 
> is all .NET based, so any .NET language would work (sadly :P). I've 
> had enough time to find out the the API allows for something like a 
> Radiance exporter to be made (I think) but not enough time to actually 
> learn how to make one (again, just a designer, not a programmer, sadly).
>
> Thanks for all the great info, I've got some research to do! If I 
> figure out a quick way to go from Revit to Radiance I'll definitely 
> post it here.
>
> Jeffrey McGrew
>
> Because We Can, LLC
> (415) 505-4689
> www.becausewecan.org
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>

-- 
# Jack de Valpine
# president
#
# visarc incorporated
# http://www.visarc.com
#
# channeling technology for superior design and construction



From toast at becausewecan.org  Wed Dec 21 19:35:49 2005
From: toast at becausewecan.org (Jeffrey McGrew)
Date: Wed Dec 21 19:37:14 2005
Subject: [Radiance-general] Radiance plug-in for 3DS
In-Reply-To: <43A99D2A.2020508@visarc.com>
References: <33B40178-C019-45BF-8FDE-DFCF7A3006E5@dmu.ac.uk>	<43A92484.4090608@esru.strath.ac.uk>	<43A9882A.3040706@visarc.com>	<43A99997.3010601@becausewecan.org>
	<43A99D2A.2020508@visarc.com>
Message-ID: <43A9A085.3020602@becausewecan.org>

Jack de Valpine wrote:

> Hi Jeff,
>
> When you say 3D Studio do you mean Max or Viz? There is an okino 
> polytrans plug-in for Max for geometry conversion in/out. Though I do 
> understand that the main issue is getting the material assignments 
> from Revit as well.

Once you link in a Revit model into Max or Viz, the material assignments 
are there, so I'm assuming if you bound the linked model that any export 
would include the material assignments, for it's just a mesh in 3D 
Studio now. While I've got access to Viz right now, I could get access 
to Max instead, so I'll check out that plug-in.

> Also here is something that I grabbed off of the following list: 
> http://www.formz.com/forum/forum_archive/forumC/general/186.html
>
> There are a number of limitations and features of 3DS format that we
> must keep in mind. First and most important limitation is the 65535
> triangle limit on any single object. The 3DS file also has an object
> limit of 65535 objects.

Oh man, I'm sure I'm blowing past that limit. I'll look up the number of 
faces in the model when it's brought into 3D Studio, but this is a big 
ol' problem with Revit in general: that it allows you to make huge, 
highly detailed models of buildings that work very well in Revit but can 
choke other 3D software that's not meant to take models with so many 
surfaces...

Thanks again,

Jeffrey McGrew

Because We Can, LLC
(415) 505-4689
www.becausewecan.org


From jedev at visarc.com  Wed Dec 21 19:54:19 2005
From: jedev at visarc.com (Jack de Valpine)
Date: Wed Dec 21 19:57:38 2005
Subject: [Radiance-general] Radiance plug-in for 3DS
In-Reply-To: <43A9A085.3020602@becausewecan.org>
References: <33B40178-C019-45BF-8FDE-DFCF7A3006E5@dmu.ac.uk>	<43A92484.4090608@esru.strath.ac.uk>	<43A9882A.3040706@visarc.com>	<43A99997.3010601@becausewecan.org>	<43A99D2A.2020508@visarc.com>
	<43A9A085.3020602@becausewecan.org>
Message-ID: <43A9A4DB.2080603@visarc.com>

Jeffrey McGrew wrote:

> Jack de Valpine wrote:
>
>> Hi Jeff,
>>
>> When you say 3D Studio do you mean Max or Viz? There is an okino 
>> polytrans plug-in for Max for geometry conversion in/out. Though I do 
>> understand that the main issue is getting the material assignments 
>> from Revit as well.
>
>
> Once you link in a Revit model into Max or Viz, the material 
> assignments are there, so I'm assuming if you bound the linked model 
> that any export would include the material assignments, for it's just 
> a mesh in 3D Studio now. While I've got access to Viz right now, I 
> could get access to Max instead, so I'll check out that plug-in.
>
Yes, but I would imagine the most seamless link would be Revit to Viz?

>> Also here is something that I grabbed off of the following list: 
>> http://www.formz.com/forum/forum_archive/forumC/general/186.html
>>
>> There are a number of limitations and features of 3DS format that we
>> must keep in mind. First and most important limitation is the 65535
>> triangle limit on any single object. The 3DS file also has an object
>> limit of 65535 objects.
>
>
> Oh man, I'm sure I'm blowing past that limit. I'll look up the number 
> of faces in the model when it's brought into 3D Studio, but this is a 
> big ol' problem with Revit in general: that it allows you to make 
> huge, highly detailed models of buildings that work very well in Revit 
> but can choke other 3D software that's not meant to take models with 
> so many surfaces...
>
Yes, but the thing to remember is that the 3ds format is really really 
ancient. It is probably around for convenience more than anything else 
and probably works well on models of objects. So this is really an issue 
with the format not revit, max, viz or whatever else.

-Jack

-- 
# Jack de Valpine
# president
#
# visarc incorporated
# http://www.visarc.com
#
# channeling technology for superior design and construction



From toast at becausewecan.org  Wed Dec 21 20:05:28 2005
From: toast at becausewecan.org (Jeffrey McGrew)
Date: Wed Dec 21 20:06:56 2005
Subject: [Radiance-general] Radiance plug-in for 3DS
In-Reply-To: <43A9A4DB.2080603@visarc.com>
References: <33B40178-C019-45BF-8FDE-DFCF7A3006E5@dmu.ac.uk>	<43A92484.4090608@esru.strath.ac.uk>	<43A9882A.3040706@visarc.com>	<43A99997.3010601@becausewecan.org>	<43A99D2A.2020508@visarc.com>	<43A9A085.3020602@becausewecan.org>
	<43A9A4DB.2080603@visarc.com>
Message-ID: <43A9A778.5080004@becausewecan.org>

Jack de Valpine wrote:

> Yes, but I would imagine the most seamless link would be Revit to Viz?

No, it's the same these days. Max 8 and Viz 2006 both deal with Revit 
models the same, there's no difference. In the past, Viz understood 
Revit models, and Max didn't, but with the latest releases of both they 
now are on the same page.

> Yes, but the thing to remember is that the 3ds format is really really 
> ancient. It is probably around for convenience more than anything else 
> and probably works well on models of objects. So this is really an 
> issue with the format not revit, max, viz or whatever else.

Oh, totally.  Just saying that I'm not surprised about hitting a limit 
re: number of faces, for it's something that happens in other contexts 
when dealing with exported Revit models. That's all.

Jeffrey McGrew

Because We Can, LLC
(415) 505-4689
www.becausewecan.org


From rpg at rumblestrip.org  Thu Dec 22 00:14:25 2005
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Thu Dec 22 00:16:02 2005
Subject: [Radiance-general] sharing the ambient cache
Message-ID: <43A9E1D1.4050905@rumblestrip.org>

Hi folks,

I should know the answer to this, but I don't.  Let's say I have a 
script that performs some numeric analysis of a scene (rtrace) and then 
does some renderings as well.  I typically crank up the settings quite a 
bit for rtrace, but relax them a bit for images (usually).  My question 
is, can the rpict process(es) safely use the existing ambient cache left 
over from the high-accuracy rtrace run?  Could running the rtrace at 
lower accuracy settings degrade any of the previously cached values?  
Just curious.

- Rob

From gregoryjward at gmail.com  Thu Dec 22 06:48:23 2005
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu Dec 22 06:50:01 2005
Subject: [Radiance-general] sharing the ambient cache
In-Reply-To: <43A9E1D1.4050905@rumblestrip.org>
References: <43A9E1D1.4050905@rumblestrip.org>
Message-ID: <63D88395-B9D6-4EBF-9D2B-D92A8EC7C007@gmail.com>

Hi Rob,

Jack de Valpine or John Mardaljevic may know more about this than I  
do, as they have experience using different ambient settings in  
different runs, whereas I tend to stick with the same settings I  
start with.  In general, it's safe to run with reduced ambient  
settings in subsequent renderings when you share an ambient file.   
Specifically, it's OK to relax the -ad and -as settings, and -aa and - 
ar as well.  You can reduce -ab (though -ab 0 won't use the ambient  
file values at all), but I wouldn't recommend changing -av or -aw.   
(There is no speed advantage to doing so, anyway.)

-Greg

> From: Rob Guglielmetti <rpg@rumblestrip.org>
> Date: December 21, 2005 3:14:25 PM PST
>
> Hi folks,
>
> I should know the answer to this, but I don't.  Let's say I have a  
> script that performs some numeric analysis of a scene (rtrace) and  
> then does some renderings as well.  I typically crank up the  
> settings quite a bit for rtrace, but relax them a bit for images  
> (usually).  My question is, can the rpict process(es) safely use  
> the existing ambient cache left over from the high-accuracy rtrace  
> run?  Could running the rtrace at lower accuracy settings degrade  
> any of the previously cached values?  Just curious.
>
> - Rob
>

From rpg at rumblestrip.org  Thu Dec 22 17:04:33 2005
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Thu Dec 22 17:05:58 2005
Subject: [Radiance-general] sharing the ambient cache
In-Reply-To: <63D88395-B9D6-4EBF-9D2B-D92A8EC7C007@gmail.com>
References: <43A9E1D1.4050905@rumblestrip.org>
	<63D88395-B9D6-4EBF-9D2B-D92A8EC7C007@gmail.com>
Message-ID: <43AACE91.4030703@rumblestrip.org>

Greg Ward wrote:

> Hi Rob,
>
> Jack de Valpine or John Mardaljevic may know more about this than I  
> do, as they have experience using different ambient settings in  
> different runs, whereas I tend to stick with the same settings I  
> start with.  In general, it's safe to run with reduced ambient  
> settings in subsequent renderings when you share an ambient file.   
> Specifically, it's OK to relax the -ad and -as settings, and -aa and - 
> ar as well.  You can reduce -ab (though -ab 0 won't use the ambient  
> file values at all), but I wouldn't recommend changing -av or -aw.   
> (There is no speed advantage to doing so, anyway.)

Well, I'd certainly love to hear Jack and John chime in, but you have 
given me what I was looking for to proceed with confidence.  Thanks!

- Rob

From jedev at visarc.com  Thu Dec 22 17:20:14 2005
From: jedev at visarc.com (Jack de Valpine)
Date: Thu Dec 22 17:23:36 2005
Subject: [Radiance-general] sharing the ambient cache
In-Reply-To: <63D88395-B9D6-4EBF-9D2B-D92A8EC7C007@gmail.com>
References: <43A9E1D1.4050905@rumblestrip.org>
	<63D88395-B9D6-4EBF-9D2B-D92A8EC7C007@gmail.com>
Message-ID: <43AAD23E.7090303@visarc.com>

Hi Greg and Rob,

The strategy that we have always used is based on John's recomendations 
in RwR. For example:

parameter
	first pass (overture at 64 or 128 pixels)
	second pass (whatever your next resolution is)
-ad
	1024
	512 (1/2 of first pass)
-as
	512
	256 (1/2 of first pass)
-aa
	.15
	.25


In RwR, John does not recommend changing the other ambient parameters. 
However, I am intrigued to hear that Greg indicates that it would be ok 
to reduce -ar as well as -ab. It would be interesting to run some test 
and determine what good reduction parameters would be.

Now, we use the parameter reductions mainly for "pictures." I am 
interested to consider what kind of parameter reductions would work when 
moving from a tight grained high -ab quantitative simulation to 
something that could still use the ambient cache for producing 
"pictures," which is more clearly what Rob is thinking about.

-Jack

Greg Ward wrote:

> Hi Rob,
>
> Jack de Valpine or John Mardaljevic may know more about this than I  
> do, as they have experience using different ambient settings in  
> different runs, whereas I tend to stick with the same settings I  
> start with.  In general, it's safe to run with reduced ambient  
> settings in subsequent renderings when you share an ambient file.   
> Specifically, it's OK to relax the -ad and -as settings, and -aa and - 
> ar as well.  You can reduce -ab (though -ab 0 won't use the ambient  
> file values at all), but I wouldn't recommend changing -av or -aw.   
> (There is no speed advantage to doing so, anyway.)
>
> -Greg
>
>> From: Rob Guglielmetti <rpg@rumblestrip.org>
>> Date: December 21, 2005 3:14:25 PM PST
>>
>> Hi folks,
>>
>> I should know the answer to this, but I don't.  Let's say I have a  
>> script that performs some numeric analysis of a scene (rtrace) and  
>> then does some renderings as well.  I typically crank up the  
>> settings quite a bit for rtrace, but relax them a bit for images  
>> (usually).  My question is, can the rpict process(es) safely use  the 
>> existing ambient cache left over from the high-accuracy rtrace  run?  
>> Could running the rtrace at lower accuracy settings degrade  any of 
>> the previously cached values?  Just curious.
>>
>> - Rob
>>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>

-- 
# Jack de Valpine
# president
#
# visarc incorporated
# http://www.visarc.com
#
# channeling technology for superior design and construction



From gregoryjward at gmail.com  Thu Dec 22 18:31:09 2005
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu Dec 22 18:32:45 2005
Subject: [Radiance-general] sharing the ambient cache
In-Reply-To: <43AAD23E.7090303@visarc.com>
References: <43A9E1D1.4050905@rumblestrip.org>
	<63D88395-B9D6-4EBF-9D2B-D92A8EC7C007@gmail.com>
	<43AAD23E.7090303@visarc.com>
Message-ID: <1436CC26-C29C-439E-9255-8CBE78281EFC@gmail.com>

Well, I should have made a caveat about reducing the -ab parameter.   
If your -av setting is not well-chosen, or if the lighting varies  
drastically over your scene, reducing -ab in subsequent runs could  
result in splotch artifacts.  You would have to try it, but that's  
what I would expect.

-Greg

> From: Jack de Valpine <jedev@visarc.com>
> Date: December 22, 2005 8:20:14 AM PST
>
> Hi Greg and Rob,
>
> The strategy that we have always used is based on John's  
> recomendations in RwR. For example:
>
> parameter
> 	first pass (overture at 64 or 128 pixels)
> 	second pass (whatever your next resolution is)
> -ad
> 	1024
> 	512 (1/2 of first pass)
> -as
> 	512
> 	256 (1/2 of first pass)
> -aa
> 	.15
> 	.25
>
> In RwR, John does not recommend changing the other ambient  
> parameters. However, I am intrigued to hear that Greg indicates  
> that it would be ok to reduce -ar as well as -ab. It would be  
> interesting to run some test and determine what good reduction  
> parameters would be.
>
> Now, we use the parameter reductions mainly for "pictures." I am  
> interested to consider what kind of parameter reductions would work  
> when moving from a tight grained high -ab quantitative simulation  
> to something that could still use the ambient cache for producing  
> "pictures," which is more clearly what Rob is thinking about.
>
> -Jack

From jm at dmu.ac.uk  Thu Dec 22 20:18:29 2005
From: jm at dmu.ac.uk (John Mardaljevic)
Date: Thu Dec 22 20:20:06 2005
Subject: [Radiance-general] sharing the ambient cache
Message-ID: <1A03B39D-DD92-4373-8009-123548D56A23@dmu.ac.uk>

> Jack de Valpine or John Mardaljevic may know more about this than I  
> do...

Actually, I can't really expand much on what is in the book (p387):

Having created the ambient file with the ?overture? calculation, you  
can, with
caution, relax some of the ambient parameters for the larger  
renderings. The
parameter revisions could be one or both of the following:
? Reduce -ad and -as by about 50%
? Slightly increase -aa (i.e., by 0.05 or 0.10)
The other ambient parameter settings should not be changed. If you do  
decide
to change any of the -ad, -as, or -aa settings after the ?overture?  
calculation, you
should be aware that the modifications will not be reflected in the  
header of the
ambient file. Thus, you need to track both the picture and the  
ambient file headers
to obtain a complete record of the parameter settings for an image.

I seem to recall that Greg reckoned it was not a good idea to reduce  
the ambient resolution (ar) parameter when reusing the ambient  
cache.  But I can't quite remember the reason why.  I was going to  
end my contribution at this point.  But then I did some tests.  Load up:

http://www.iesd.dmu.ac.uk/~jm/pdfs/relax.pdf

What we have here is a test scene: a ridged box by a window and  
illuminated by a diffuse (i.e. glow) sky.  The ar parameter limits  
the extent to which ambient sampling can convincingly shade the  
grooves.  I populated the ambient file artest.af in creating the  
image at the top which only sees half the box.  I then reused the  
ambient file with lower resolution settings to create wide views of  
the box -- I thought that seeing the "boundary" between the already  
populated hi-res ambient settings and the low-res might be  
interesting.  It was.  Note that for each of the three low ambient  
resolution images I reused the *original* artest.af (i.e. I kept a  
copy).

In the left and bottom images I relaxed the aa and ad parameters  
respectively.  The results are what most of us would probably  
expect.  For the image on the right I relaxed the ar parameter.  Now,  
for this image, the "new" part on the left-hand-side is what would be  
expected from a fresh run without any pre-existing ambient file -- ar  
64 doesn't allow close-enough sampling and the grooves get some  
"flat" ambient shading [1].  The interesting effect is of course on  
the right -- the pre-existing ambient samples on this side have  
somehow produced this lovely frog-spawn pattern.  Why? [2]

-John

PS. Dontcha just love this "I'll never quite master it" side to  
Radiance?

[1] When av is zero, as it was here, how is the ar-limited shading  
value arrived at?

[2] I have this vague feeling that I sort of might know the reason  
why.  But it is all too hazy for me to attempt to put it into words.

-----------------------------------------------
Dr. John Mardaljevic
Senior Research Fellow
Institute of Energy and Sustainable Development
De Montfort University
The Gateway
Leicester
LE1 9BH, UK
+44 (0) 116 257 7972
+44 (0) 116 257 7981 (fax)

jm@dmu.ac.uk
http://www.iesd.dmu.ac.uk/~jm


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20051222/1418bcd7/attachment.htm
From gregoryjward at gmail.com  Thu Dec 22 21:01:57 2005
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu Dec 22 21:03:31 2005
Subject: [Radiance-general] sharing the ambient cache
In-Reply-To: <1A03B39D-DD92-4373-8009-123548D56A23@dmu.ac.uk>
References: <1A03B39D-DD92-4373-8009-123548D56A23@dmu.ac.uk>
Message-ID: <2D1F0C48-A5D9-44DD-9C78-D91EC839F447@gmail.com>

Hi John,

Just goes to show, when it comes to the older algorithms, it's best  
to follow my old advice rather than my new advice...  Clearly, I  
thought about this more carefully before, and there are good reasons  
for not changing the -ar parameter in subsequent runs.  I think the  
artifacts you're seeing are due to the mix of new values and older  
ones, both of which get included in the interpolation step.  The new  
values cover a wider area than the old ones (and wider than they  
should).  The splotchy look is due to the way the interpolation  
algorithm works, and is even worse than I'd expect from reducing the - 
ab value.

-Greg

> From: John Mardaljevic <jm@dmu.ac.uk>
> Date: December 22, 2005 11:18:29 AM PST
>
>> Jack de Valpine or John Mardaljevic may know more about this than  
>> I do...
>
> Actually, I can't really expand much on what is in the book (p387):
>
> Having created the ambient file with the ?overture? calculation,  
> you can, with
> caution, relax some of the ambient parameters for the larger  
> renderings. The
> parameter revisions could be one or both of the following:
> ? Reduce -ad and -as by about 50%
> ? Slightly increase -aa (i.e., by 0.05 or 0.10)
> The other ambient parameter settings should not be changed. If you  
> do decide
> to change any of the -ad, -as, or -aa settings after the ?overture?  
> calculation, you
> should be aware that the modifications will not be reflected in the  
> header of the
> ambient file. Thus, you need to track both the picture and the  
> ambient file headers
> to obtain a complete record of the parameter settings for an image.
>
> I seem to recall that Greg reckoned it was not a good idea to  
> reduce the ambient resolution (ar) parameter when reusing the  
> ambient cache.  But I can't quite remember the reason why.  I was  
> going to end my contribution at this point.  But then I did some  
> tests.  Load up:
>
> http://www.iesd.dmu.ac.uk/~jm/pdfs/relax.pdf
>
> What we have here is a test scene: a ridged box by a window and  
> illuminated by a diffuse (i.e. glow) sky.  The ar parameter limits  
> the extent to which ambient sampling can convincingly shade the  
> grooves.  I populated the ambient file artest.af in creating the  
> image at the top which only sees half the box.  I then reused the  
> ambient file with lower resolution settings to create wide views of  
> the box -- I thought that seeing the "boundary" between the already  
> populated hi-res ambient settings and the low-res might be  
> interesting.  It was.  Note that for each of the three low ambient  
> resolution images I reused the *original* artest.af (i.e. I kept a  
> copy).
>
> In the left and bottom images I relaxed the aa and ad parameters  
> respectively.  The results are what most of us would probably  
> expect.  For the image on the right I relaxed the ar parameter.   
> Now, for this image, the "new" part on the left-hand-side is what  
> would be expected from a fresh run without any pre-existing ambient  
> file -- ar 64 doesn't allow close-enough sampling and the grooves  
> get some "flat" ambient shading [1].  The interesting effect is of  
> course on the right -- the pre-existing ambient samples on this  
> side have somehow produced this lovely frog-spawn pattern.  Why? [2]
>
> -John
>
> PS. Dontcha just love this "I'll never quite master it" side to  
> Radiance?
>
> [1] When av is zero, as it was here, how is the ar-limited shading  
> value arrived at?
>
> [2] I have this vague feeling that I sort of might know the reason  
> why.  But it is all too hazy for me to attempt to put it into words.
>
> -----------------------------------------------
> Dr. John Mardaljevic
>

From rpg at rumblestrip.org  Fri Dec 23 00:39:00 2005
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Fri Dec 23 00:40:38 2005
Subject: [Radiance-general] sharing the ambient cache
In-Reply-To: <2D1F0C48-A5D9-44DD-9C78-D91EC839F447@gmail.com>
References: <1A03B39D-DD92-4373-8009-123548D56A23@dmu.ac.uk>
	<2D1F0C48-A5D9-44DD-9C78-D91EC839F447@gmail.com>
Message-ID: <43AB3914.2000103@rumblestrip.org>

Greg Ward wrote:

> Hi John,
>
> Just goes to show, when it comes to the older algorithms, it's best  
> to follow my old advice rather than my new advice...  Clearly, I  
> thought about this more carefully before, and there are good reasons  
> for not changing the -ar parameter in subsequent runs.  I think the  
> artifacts you're seeing are due to the mix of new values and older  
> ones, both of which get included in the interpolation step.  The new  
> values cover a wider area than the old ones (and wider than they  
> should).  The splotchy look is due to the way the interpolation  
> algorithm works, and is even worse than I'd expect from reducing the - 
> ab value.

Hi gang,

Thanks to everyone who got involved in this thread.  John, your analysis 
proves what I had been fearful of.  Very interesting!

Radiance: You'll never quite master it (but you'll have fun along the way).

- Rob Guglielmetti

From MMoeck at engr.psu.edu  Fri Dec 23 18:15:31 2005
From: MMoeck at engr.psu.edu (Martin Moeck)
Date: Fri Dec 23 18:19:57 2005
Subject: [Radiance-general] Maxwell-Radiance
References: <B8DD8375FCE2C94B9F170D9277C1FA2B8C5C9B@corvallis><43A7036D.3030105@becausewecan.org>
	<43A70535.2060801@visarc.com>
Message-ID: <84F05BA9118BBD4A8FC6409808CE266C234997@ENGRMAIL2.engr.psu.edu>

A student of mine found this renderer - is anyone familiar with it? It looks like it uses some Radiance algorithms.
 
Martin Moeck, Penn State
 
__________________________________________
 
After more and more research of render engine, I have finally got my hands on a new breed of rendering engine which should worth your time to look at. Maxwell Render - brought the us by the world famous NextLimit Corporation (the maker of RealFlow3, a real physical simulation software for Computational Fluid Dynamics). t is the first physical based rendering engine with a GUI. The approach is almost identical to Radiance, except I am not sure if it produces hard number calculations. One thing for sure, it does produce False-Color images. Please take a look at this, 

http://www.wahn.demon.co.uk/Maxwell/PhysicalSky/index.html

http://www.maxwellrender.com/forum/viewtopic.php?t=1121&highlight=

for further description of the renderer, please see the following link.

http://www.maxwellrender.com/product.htm

-------------------------------

Ming Norman Tsui
5th-Year Architectural Engineering
The Pennsylvania State University
601 Vairo Blvd, Apt. 113
State College, PA 16803
201. 233.7871

mxt906@psu.edu
ming.n.tsui@gmail.com

 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 6125 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20051223/f9717dc9/attachment.bin
From rpg at rumblestrip.org  Fri Dec 23 18:45:57 2005
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Fri Dec 23 18:47:20 2005
Subject: [Radiance-general] Maxwell-Radiance
In-Reply-To: <84F05BA9118BBD4A8FC6409808CE266C234997@ENGRMAIL2.engr.psu.edu>
References: <B8DD8375FCE2C94B9F170D9277C1FA2B8C5C9B@corvallis><43A7036D.3030105@becausewecan.org>	<43A70535.2060801@visarc.com>
	<84F05BA9118BBD4A8FC6409808CE266C234997@ENGRMAIL2.engr.psu.edu>
Message-ID: <43AC37D5.7070800@rumblestrip.org>

Martin Moeck wrote:

>A student of mine found this renderer - is anyone familiar with it? It looks like it uses some Radiance algorithms.
>  
>
Hi Martin,

I have been following the development of Maxwell for a little while.  I 
inquired with the President of the company a while back, about the 
ability of Maxwell to both work with actual photometric files and to 
supply real illuminance & luminance results. I received vague replies 
about this.  It's the same old story, us lighting people don't get any 
respect; we're the Rodney Dangerfields of the computer graphics world.  
A friend of mine who runs a CG news website has been asking similar 
questions of them and getting similar runaround.  A similar fate 
affected another well-known physically-based rendering tool 
(Lightscape).  Maxwell does look very nice, but so far the promise of 
being able to use it for lighting analysis remains a promise, a 
potetially broken one, and I'm an excellent skeptic, even during this 
holiday time. =8-)  That said, I have not looked at their website in a 
while or made any inquiries.

That website link you sent was interesting; the Maxwell engine does 
definitely look like it uses similar algorithms as Radiance -- noise and 
all.  Have a look here:

http://www.wahn.demon.co.uk/Maxwell/Images/

He's done a bunch of renderings of the tutorial scenes from RwR.  Very 
interesting!

- Rob Guglielmetti

From marcdevon at hotmail.com  Fri Dec 23 19:25:01 2005
From: marcdevon at hotmail.com (Marcus Jacobs)
Date: Fri Dec 23 19:26:43 2005
Subject: [Radiance-general] What's causing these artifacts???
In-Reply-To: <MC7-F4SlSVwJ5Pm0y3K003f509e@mc7-f4.hotmail.com>
Message-ID: <BAY102-F262A8A795DB30D6E5CFE18A4330@phx.gbl>

Dear Group

Thanks for all of the suggestions regarding my rendering problems. I know 
its taken me a while to reply back about this issue to the group. I have 
spent some time investigating these issues that I am having. This way, I at 
least try to solve my problems myself before bringing to this group.

First, the dark splotches:

http://i35.photobucket.com/albums/d178/marcdevon/AFrame2_Camera6_final.jpg
http://i35.photobucket.com/albums/d178/marcdevon/AFrame2_Camera03_final.jpg

I think I have some idea as to what is causing this issue. Generally when I 
render, I perform a small overture calculation at a 100 x 100 pixel 
resolution. The ambient settings are generally at -aa 0.1 and -ar 0. The 
next step is to take a medium resolution overture usually at 500 x 500 
pixels. The settings are generally set at -aa (.15 - .2) -ar = maximum scene 
size as determined by getinfo -d in inches (basically a 1 inch grid).  The 
final render is performed at -aa (.25 - .3) and -ar = maximum scene size as 
determined by getinfo -d in inches/(2 to 10) (basically a 2 - 10 inch grid) 
depending on the illumination contrast. The -ad and -as settings are 
generally set based on the illumination contrast in the scene. For these 
renderings, I set -ar very low since I had already rendered it at the same 
resolution with higher -ar settings. Essentially, I wanted to force it to 
interpolate using the existing ambient data. The splotches usually come in 
as the -ar parameter degrades. The number of splotches depends on how low 
this parameter has been set. The reason why I ask is because this seems to 
me to have started occuring recently even though I have used the 
aforementioned technique for some time now.

For the bright splotches here:

http://photobucket.com/albums/d178/marcdevon/th_room2a_view2_render1.jpg

it looks like mkillum saves the day again. I tried Greg's suggestion of 
setting an illum at skylight openings at the surface level of the ceiling. 
This seems to have done the trick. It's funny but I ran dozens upon dozens 
of renderings and for some reason I thought these artifact were due to the 
bright spots on the floor rather than the skylight openings. Here are the 
results:

http://i35.photobucket.com/albums/d178/marcdevon/room2_view3.jpg
http://i35.photobucket.com/albums/d178/marcdevon/room2_view2.jpg

May I ask, why is the brightness of the skylight openings more prone to 
causing these artifacts rather than a bright spot on the floor or wall?

When initially attempting to find a solution to this problem, I tried to go 
back to issues that Rob Guglielmetti  was experiencing a couple of years 
back with a museum that he was modeling. At one time he documented his 
progression on his blog but the page has since been deleted. I did remember 
a couple of threads from July/2004 which discussed whether to place illums 
inside or outside the scene:

http://www.radiance-online.org/pipermail/radiance-general/2004-July/001871.html
http://www.radiance-online.org/pipermail/radiance-general/2004-July/001953.html

The reason why I have been hesitant to using illums inside is because I 
thought that mkillum could only simulate illumination that's a smooth 
function with no discontinuities. I thought that this may be an issue when 
windows have lites. I did a little experiment with another old scene of 
mine. It is a window that I knew would receive direct illumination from the 
sun. I wanted to place the illums on the inside to see if mkillum would pick 
up the lites. Here is the result:

http://i35.photobucket.com/albums/d178/marcdevon/room2_camera1_tm.jpg

I am impressed that mkillum has able to detect the presence of lites in the 
windows as you can see their occluding effect by the direct sunlight that is 
on the floor.  By placing the illums on the inside of this room, I was also 
able to eliminate some bright splotches (although less conspicuous than the 
previous scene) from this room.

In my investigation of course there are more questions/issues that has 
arisen.  From another test room, I wanted to see how much the smoothness the 
indirect calculation would improve by placing an illum inside its skylight. 
This is what's happened:


http://i35.photobucket.com/albums/d178/marcdevon/room1_12_amb_view4.jpg
http://i35.photobucket.com/albums/d178/marcdevon/room1_12_amb_view5.jpg
http://i35.photobucket.com/albums/d178/marcdevon/room1_12_amb_view6.jpg
http://i35.photobucket.com/albums/d178/marcdevon/room1_12_amb_view8.jpg

The indirect illumination in the corner I do not believe is correct. I know 
that this problem isn't due the presence of the illum in the skylight at the 
surface level of the vaulted ceiling. This seems to occur sort of 
haphazardly. Here is the same room with the same day/time settings, albeit 
with different materials, and this problem didn't occur:

http://i35.photobucket.com/albums/d178/marcdevon/room1_b_view4_render2.jpg
http://i35.photobucket.com/albums/d178/marcdevon/room1_b_view5_2.jpg
http://i35.photobucket.com/albums/d178/marcdevon/room1_b_view6.jpg

This problem that I am receiving looks similar to issues that I am having 
with this rendering (right side near the corner):

http://i35.photobucket.com/albums/d178/marcdevon/KountryKitchen_view2_render3_3.jpg

Also, for the previous rendering and the next, I do not know what's causing 
the gray artifacts on the floor nearby the dishwasher and lower cabinets:

http://i35.photobucket.com/albums/d178/marcdevon/KountryKitchen_view1_render3_99.jpg


Generally, what I wish to be able to acquire is achieving a higher level of 
predictability so that I may take a scientific approach to rendering rather 
than constantly tinkering. Sometimes when I think I got it, I later realize 
that I don't. That's pretty much it in a nutshell.


Thanks everyone for all of your help.


Marcus



From marcdevon at hotmail.com  Fri Dec 23 19:44:09 2005
From: marcdevon at hotmail.com (Marcus Jacobs)
Date: Fri Dec 23 19:45:39 2005
Subject: [Radiance-general] Macbethcal Reflectances
Message-ID: <BAY102-F413760CE0849144B0FD3BCA4330@phx.gbl>

Greg,

I decided to go back and try to set up another calibration file. I used the 
same steps that I used before. The software associated with the flatbed 
scanner has no direct exposure controls, however there is an option (which I 
select) to do no color correction. This, I believe, prevents the enactment 
of the auto exposure feature. Here are the results (debug.pic) from my 
latest scan Macbeth color chart scan:

http://i35.photobucket.com/albums/d178/marcdevon/MacbethColorChart_12212005002_templ.jpg

As you can see, many colors were out of gamut however the white and neutrals 
were able to be calibrated.  After running pcomb with my color swatch, the 
reflectances were still high (0.80 < x < 0.95 on a scale from 0 - 1). Here 
is the paint color swatch before calibration:

http://i35.photobucket.com/albums/d178/marcdevon/Behr_White_before.jpg

and after calibration

http://i35.photobucket.com/albums/d178/marcdevon/Behr_White_after.jpg


I usually take the sample and the center of each. Do you believe that the 
overall reflectances are valid or out of range?


Thanks

Marcus



From gregoryjward at gmail.com  Sat Dec 24 03:39:53 2005
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Sat Dec 24 03:41:34 2005
Subject: [Radiance-general] Macbethcal Reflectances
In-Reply-To: <BAY102-F413760CE0849144B0FD3BCA4330@phx.gbl>
References: <BAY102-F413760CE0849144B0FD3BCA4330@phx.gbl>
Message-ID: <EBA10665-004D-496C-9AE1-358F64AF4AE7@gmail.com>

Hi Marcus,

Without seeing your swatches or having a reflectance measurement to  
compare to, it's difficult for me to guess whether the calibration is  
working or not.  Certainly, the debug output from Macbethcal  
indicates that it was able to do a reasonable job of inverting your  
scanner's response.  However, it's still possible that some kind of  
auto-exposure is changing the results from one scan to the next, so  
it may be that your absolute levels are off.

-Greg

> From: "Marcus Jacobs" <marcdevon@hotmail.com>
> Date: December 23, 2005 10:44:09 AM PST
>
> Greg,
>
> I decided to go back and try to set up another calibration file. I  
> used the same steps that I used before. The software associated  
> with the flatbed scanner has no direct exposure controls, however  
> there is an option (which I select) to do no color correction.  
> This, I believe, prevents the enactment of the auto exposure  
> feature. Here are the results (debug.pic) from my latest scan  
> Macbeth color chart scan:
>
> http://i35.photobucket.com/albums/d178/marcdevon/ 
> MacbethColorChart_12212005002_templ.jpg
>
> As you can see, many colors were out of gamut however the white and  
> neutrals were able to be calibrated.  After running pcomb with my  
> color swatch, the reflectances were still high (0.80 < x < 0.95 on  
> a scale from 0 - 1). Here is the paint color swatch before  
> calibration:
>
> http://i35.photobucket.com/albums/d178/marcdevon/Behr_White_before.jpg
>
> and after calibration
>
> http://i35.photobucket.com/albums/d178/marcdevon/Behr_White_after.jpg
>
> I usually take the sample and the center of each. Do you believe  
> that the overall reflectances are valid or out of range?
>
> Thanks
>
> Marcus
>

From rpg at rumblestrip.org  Sat Dec 24 07:20:32 2005
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Sat Dec 24 07:22:20 2005
Subject: [Radiance-general] What's causing these artifacts???
In-Reply-To: <BAY102-F262A8A795DB30D6E5CFE18A4330@phx.gbl>
References: <BAY102-F262A8A795DB30D6E5CFE18A4330@phx.gbl>
Message-ID: <43ACE8B0.1080002@rumblestrip.org>

Marcus Jacobs wrote:

> When initially attempting to find a solution to this problem, I tried 
> to go back to issues that Rob Guglielmetti  was experiencing a couple 
> of years back with a museum that he was modeling. At one time he 
> documented his progression on his blog but the page has since been 
> deleted.

Hi Marcus,

Thanks for reminding me that I have yet to fully restore all the stuff 
from my old site.   I wish I could answer some of your interesting 
questions, but in lieu of that,  I at least restored the page you were 
looking for, albeit to a different (and temporary) location:

http://www.rumblestrip.org/static/rad-mkillum/rad_01.html

It's basically a long-winded journey toward mkillum enlightenment.  One 
of these days, I'll get totally organized, but let's just say I'm not 
making it a new year's resolution.  ;)

Now's a good time to also wish the entire list a happy end-of-the-year.  
May you all have holidays filled with light (and if the light source is 
small relative to the scene, use mkillum to render it). 

- Rob

 

From gregoryjward at gmail.com  Sat Dec 24 18:22:12 2005
From: gregoryjward at gmail.com (Greg Ward)
Date: Sat Dec 24 18:23:52 2005
Subject: [Radiance-general] What's causing these artifacts???
In-Reply-To: <BAY102-F262A8A795DB30D6E5CFE18A4330@phx.gbl>
References: <BAY102-F262A8A795DB30D6E5CFE18A4330@phx.gbl>
Message-ID: <DC1C3DBA-017C-4A9A-A1B2-FCA65BDE7E22@gmail.com>

Hi Marcus,

There's rather a lot to respond to here, but I'll give it a go...

> From: "Marcus Jacobs" <marcdevon@hotmail.com>
> Date: December 23, 2005 10:25:01 AM PST
>
> Dear Group
>
> Thanks for all of the suggestions regarding my rendering problems.  
> I know its taken me a while to reply back about this issue to the  
> group. I have spent some time investigating these issues that I am  
> having. This way, I at least try to solve my problems myself before  
> bringing to this group.
>
> First, the dark splotches:
>
> http://i35.photobucket.com/albums/d178/marcdevon/ 
> AFrame2_Camera6_final.jpg
> http://i35.photobucket.com/albums/d178/marcdevon/ 
> AFrame2_Camera03_final.jpg
>
> I think I have some idea as to what is causing this issue.  
> Generally when I render, I perform a small overture calculation at  
> a 100 x 100 pixel resolution. The ambient settings are generally at  
> -aa 0.1 and -ar 0. The next step is to take a medium resolution  
> overture usually at 500 x 500 pixels. The settings are generally  
> set at -aa (.15 - .2) -ar = maximum scene size as determined by  
> getinfo -d in inches (basically a 1 inch grid).  The final render  
> is performed at -aa (.25 - .3) and -ar = maximum scene size as  
> determined by getinfo -d in inches/(2 to 10) (basically a 2 - 10  
> inch grid) depending on the illumination contrast. The -ad and -as  
> settings are generally set based on the illumination contrast in  
> the scene. For these renderings, I set -ar very low since I had  
> already rendered it at the same resolution with higher -ar  
> settings. Essentially, I wanted to force it to interpolate using  
> the existing ambient data. The splotches usually come in as the -ar  
> parameter degrades. The number of splotches depends on how low this  
> parameter has been set. The reason why I ask is because this seems  
> to me to have started occuring recently even though I have used the  
> aforementioned technique for some time now.

Your analysis makes sense.  As noted in discussions earlier this  
week, it is probably a bad idea to change the -ar setting between  
runs.  This is most likely the source of your problems.

> For the bright splotches here:
>
> http://photobucket.com/albums/d178/marcdevon/ 
> th_room2a_view2_render1.jpg
>
> it looks like mkillum saves the day again. I tried Greg's  
> suggestion of setting an illum at skylight openings at the surface  
> level of the ceiling. This seems to have done the trick. It's funny  
> but I ran dozens upon dozens of renderings and for some reason I  
> thought these artifact were due to the bright spots on the floor  
> rather than the skylight openings. Here are the results:
>
> http://i35.photobucket.com/albums/d178/marcdevon/room2_view3.jpg
> http://i35.photobucket.com/albums/d178/marcdevon/room2_view2.jpg
>
> May I ask, why is the brightness of the skylight openings more  
> prone to causing these artifacts rather than a bright spot on the  
> floor or wall?

It's difficult to say for certain, but it probably has to do with the  
solid angles visible from the problem areas.  Also, if the wall  
surface on the coves of your skylight are smooth and specular, this  
could greatly amplify their indirect contribution.  I believe  
specularities are at play in some of the artifacts you mention below.

> When initially attempting to find a solution to this problem, I  
> tried to go back to issues that Rob Guglielmetti  was experiencing  
> a couple of years back with a museum that he was modeling. At one  
> time he documented his progression on his blog but the page has  
> since been deleted. I did remember a couple of threads from July/ 
> 2004 which discussed whether to place illums inside or outside the  
> scene:
>
> http://www.radiance-online.org/pipermail/radiance-general/2004-July/ 
> 001871.html
> http://www.radiance-online.org/pipermail/radiance-general/2004-July/ 
> 001953.html
>
> The reason why I have been hesitant to using illums inside is  
> because I thought that mkillum could only simulate illumination  
> that's a smooth function with no discontinuities. I thought that  
> this may be an issue when windows have lites. I did a little  
> experiment with another old scene of mine. It is a window that I  
> knew would receive direct illumination from the sun. I wanted to  
> place the illums on the inside to see if mkillum would pick up the  
> lites. Here is the result:
>
> http://i35.photobucket.com/albums/d178/marcdevon/room2_camera1_tm.jpg
>
> I am impressed that mkillum has able to detect the presence of  
> lites in the windows as you can see their occluding effect by the  
> direct sunlight that is on the floor.  By placing the illums on the  
> inside of this room, I was also able to eliminate some bright  
> splotches (although less conspicuous than the previous scene) from  
> this room.

I am a little confused by the term "lite," which my dictionary  
defines as "beer with relatively few calories."  I assume you mean  
the mullions.  Bear in mind that mkillum does not attempt to model  
light sources already in the scene, such as the sun, and this light  
passes without intervention.  Mkillum only takes over for ambient  
contributions and glow's, such as the sky.

> In my investigation of course there are more questions/issues that  
> has arisen.  From another test room, I wanted to see how much the  
> smoothness the indirect calculation would improve by placing an  
> illum inside its skylight. This is what's happened:
>
> http://i35.photobucket.com/albums/d178/marcdevon/ 
> room1_12_amb_view4.jpg
> http://i35.photobucket.com/albums/d178/marcdevon/ 
> room1_12_amb_view5.jpg
> http://i35.photobucket.com/albums/d178/marcdevon/ 
> room1_12_amb_view6.jpg
> http://i35.photobucket.com/albums/d178/marcdevon/ 
> room1_12_amb_view8.jpg
>
> The indirect illumination in the corner I do not believe is  
> correct. I know that this problem isn't due the presence of the  
> illum in the skylight at the surface level of the vaulted ceiling.  
> This seems to occur sort of haphazardly. Here is the same room with  
> the same day/time settings, albeit with different materials, and  
> this problem didn't occur:
>
> http://i35.photobucket.com/albums/d178/marcdevon/ 
> room1_b_view4_render2.jpg
> http://i35.photobucket.com/albums/d178/marcdevon/room1_b_view5_2.jpg
> http://i35.photobucket.com/albums/d178/marcdevon/room1_b_view6.jpg

What are the specularities and roughness values of your floor  
surfaces?  And which version of Radiance are you running?  This looks  
like it could be a bug, or it could just be mirror-like specular  
reflections off your floor.  I suspect you have a low roughness value  
-- do you?

> This problem that I am receiving looks similar to issues that I am  
> having with this rendering (right side near the corner):
>
> http://i35.photobucket.com/albums/d178/marcdevon/ 
> KountryKitchen_view2_render3_3.jpg

This looks like mirror reflections off your counter top, which could  
be real but are poorly rendered by the indirect calculation.  (You  
could use the "mirror" type to correct this, though I'm not sure it's  
worth it.)

> Also, for the previous rendering and the next, I do not know what's  
> causing the gray artifacts on the floor nearby the dishwasher and  
> lower cabinets:
>
> http://i35.photobucket.com/albums/d178/marcdevon/ 
> KountryKitchen_view1_render3_99.jpg

These artifacts are more worrisome.  I'm not sure what's causing  
them, unless it's more of the low-angle specular reflections off your  
skylight cove.  Are these surfaces purely diffuse, or do they have a  
small specular component that might get blown out of proportion at  
low angles?  (This is a problem that was discussed earlier this month  
under the heading "How to increase the rendering speed?" and fixed in  
the latest HEAD release.)

> Generally, what I wish to be able to acquire is achieving a higher  
> level of predictability so that I may take a scientific approach to  
> rendering rather than constantly tinkering. Sometimes when I think  
> I got it, I later realize that I don't. That's pretty much it in a  
> nutshell.

A worthy goal.  I think we can all benefit from what we learn in this  
exploration, and I appreciate your sharing your results.

Happy Holidays!
-Greg

From MMoeck at engr.psu.edu  Thu Dec 29 22:14:20 2005
From: MMoeck at engr.psu.edu (Martin Moeck)
Date: Thu Dec 29 22:20:54 2005
Subject: [Radiance-general] gendaylit and Perez sky question
References: <B8DD8375FCE2C94B9F170D9277C1FA2B8C5C9B@corvallis><43A7036D.3030105@becausewecan.org>
	<43A70535.2060801@visarc.com>
Message-ID: <84F05BA9118BBD4A8FC6409808CE266C2349BF@ENGRMAIL2.engr.psu.edu>

gendaylit ... -W  direct  diffuse ... :
 
direct = direct normal irradiance in W/m2 due to the sun over total spectrum = beam radiation = solar radiation form the direction of the sun, and NOT on a horizontal surface - correct?
 
Thanks
 
Martin Moeck
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 3341 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20051229/b34dab97/attachment.bin
From jan.wienold at ise.fraunhofer.de  Fri Dec 30 10:07:33 2005
From: jan.wienold at ise.fraunhofer.de (Jan Wienold)
Date: Fri Dec 30 10:09:02 2005
Subject: [Radiance-general] gendaylit and Perez sky question
In-Reply-To: <84F05BA9118BBD4A8FC6409808CE266C2349BF@ENGRMAIL2.engr.psu.edu>
References: <B8DD8375FCE2C94B9F170D9277C1FA2B8C5C9B@corvallis><43A7036D.3030105@becausewecan.org>	<43A70535.2060801@visarc.com>
	<84F05BA9118BBD4A8FC6409808CE266C2349BF@ENGRMAIL2.engr.psu.edu>
Message-ID: <43B4F8D5.2060608@ise.fraunhofer.de>

Hi Martin,

yes, that's correct. But the diffuse irradiance (also full spectrum) is 
used on an horizontal plane.

Regards,

Jan




Martin Moeck wrote:

>gendaylit ... -W  direct  diffuse ... :
> 
>direct = direct normal irradiance in W/m2 due to the sun over total spectrum = beam radiation = solar radiation form the direction of the sun, and NOT on a horizontal surface - correct?
> 
>Thanks
> 
>Martin Moeck
>  
>
>------------------------------------------------------------------------
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general@radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general
>  
>

-- 
Dipl.-Ing. Jan Wienold
Project Manager
Fraunhofer-Institut f?r Solare Energiesysteme
Thermal Systems and Buildings, Lighting and Daylighting
Heidenhofstr. 2, 79110 Freiburg, Germany
Phone: +49(0)761 4588 5133 Fax:+49(0)761 4588 9133
jan.wienold@ise.fraunhofer.de
http://www.ise.fraunhofer.de

In office: 
Mo,Tue: 9:00-18:00
We-Fr:  8:30-14:00

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20051230/9d1212c6/attachment.html
