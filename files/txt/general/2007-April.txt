From info at iebele.nl  Mon Apr  2 18:08:03 2007
From: info at iebele.nl (iebele)
Date: Mon Apr  2 18:05:18 2007
Subject: [Radiance-general] Ambient exclude transfomed material in instances
In-Reply-To: <CC0B19F4C6132F4D9FDDEBF194200FB502CDEDC9@ldcexc02.global.arup.com>
References: <CC0B19F4C6132F4D9FDDEBF194200FB502CDEDC9@ldcexc02.global.arup.com>
Message-ID: <46112A63.60802@iebele.nl>

Hi,

I have a complex scene in which I use instances which I want to exclude 
from ambient calculation.

The problem is that I use !xform  ..... with file A that include 
materials to create another file B  that is later used as an instance.
I need the materials in file A excluded from ambient calculation.
The exclusion does not seem to work in my case, which makes the 
rendering times enormous ( lightyear - 0.01 % progress per hour in the 
picturel, very very much rays )

Any help is most  welcome.

-Iebele




This is how I build up the scene:


*File 
/disk12/Bilbliotheek/Xfrog/AL05_Aesculus_hippocastanum_Horse_Chestnut/blad.rad 
contains:*


## A single leaf
#
# images must be included in this file, needs transform too (in xform)
#

# IMAGE
void  colorpict AL05lef_color.pic.0.map
19 red green blue
/disk12/Bilbliotheek/Xfrog/AL05_Aesculus_hippocastanum_Horse_Chestnut/AL05lef_color.pic
/disk12/materials/picture.cal
tile_u tile_v
-s 1.0 -rx  0 -ry  0 -rz 0 -t  -0.5 0 0
0 1 1.13149171

# MATERIAL
AL05lef_color.pic.0.map plastic  AL05lef_color.pic.0.col
0 0 5
2 2 2
0.0 0

# Mixture
void mixpict AL05lef_color.pic.0.trans
19 AL05lef_color.pic.0.col  void green
/disk12/Bilbliotheek/Xfrog/AL05_Aesculus_hippocastanum_Horse_Chestnut/AL05lef_alpha.pic
/disk12/materials/picture.cal
pic_u pic_v
-s 1 -rx  0 -ry  0 -rz 0 -t -0.5 0 0
0 1 1.13149171

# The leaf
AL05lef_color.pic.0.trans polygon AL05lef_color.pic.0.polygon
0 0 12
-0.5  0 0
0.5 0 0
0.5 0 1.13149171
-0.5  0 1.13149171


*file AL05m.raw (leaves of a tree) contains many  lines like:*

!xform -rx 60.095138 -ry 47.844579 -rz 7.070462 -s 0.200000 -t -0.322761 
0.124242 14.044600 
/disk12/Bilbliotheek/Xfrog/AL05_Aesculus_hippocastanum_Horse_Chestnut/blad.rad




*The octree of the tree (AL05m.raw) and the leaves **is build like:*

oconv -w- -f  
/disk12/Bilbliotheek/Xfrog/AL05_Aesculus_hippocastanum_Horse_Chestnut/blad.rad     
/disk12/Bilbliotheek/Xfrog/AL05_Aesculus_hippocastanum_Horse_Chestnut/AL05m.mat 
/disk12/Bilbliotheek/Xfrog/AL05_Aesculus_hippocastanum_Horse_Chestnut/AL05m.raw 
 > AL05m.oct

*
File bomen.rad contains lines like:

*# boom plein_gevel
void instance boom_plein_gevel
9
/disk12/Bilbliotheek/Xfrog/AL05_Aesculus_hippocastanum_Horse_Chestnut/AL05m.oct
-s .9
-rz 56.018930
-t -6.509 93.251  -2.6
0
0
*
The scene is compiled like:*

oconv -w-  sky.rad   otherstuff.raw bomen.raw   > model.oct


*File 
/disk12/Bilbliotheek/Xfrog/AL05_Aesculus_hippocastanum_Horse_Chestnut/AL05m.ae 
contains the line:*

 -ae AL05m.dxf_Default -ae  AL05m.dxf_bark_col -ae  
AL05m.dxf_bark_col_leaf_a -ae AL05m.dxf_bark_col_roots1 -ae 
AL05m.dxf_leaf_col_leaf2 -ae AL05m.dxf_leaf_col -ae  
AL05lef_color.pic.0.col -ae AL05lef_color.pic.0.trans

*The scene is rendered like:

*rpict -x 16000 -y 16000  -lr 4  -t 300 -ab 4 -st 0.01 -ar 128  -dp 512 
-dr 3 -dc .5 -dt .05 -ds .15 -aa .15 -ar 128 -ad 512 -as 256 -av 3 3 3  
-vf hermitage17.vp  
@/disk12/Bilbliotheek/Xfrog/AL05_Aesculus_hippocastanum_Horse_Chestnut/AL05m.ae 
model.oct   | pfilt -1 -x 4000 -y 4000  > hermitage17.pic*
*









From gregoryjward at gmail.com  Mon Apr  2 19:38:28 2007
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Mon Apr  2 19:38:37 2007
Subject: [Radiance-general] Ambient exclude transfomed material in
	instances
In-Reply-To: <46112A63.60802@iebele.nl>
References: <CC0B19F4C6132F4D9FDDEBF194200FB502CDEDC9@ldcexc02.global.arup.com>
	<46112A63.60802@iebele.nl>
Message-ID: <0A962F3E-9A34-47BF-9B37-5CCC55F55805@gmail.com>

Hello Iebele,

Since you have too many materials in your "ambient exclude" list,  
you're best hope is to switch to an "ambient include" list, instead.   
Create a file listing all of the materials, hopefully not xform'ed  
and duplicated like your leaves, that you would like to include in  
the interreflection calculation.  These can be put in a file and  
incorporated with a single -aI option.

The other alternative is to switch off the irradiance cache using -aa  
0 and assign other parameters to make the problem tractable over all  
surfaces.

-Greg

> From: iebele <info@iebele.nl>
> Date: April 2, 2007 9:08:03 AM PDT
>
> Hi,
>
> I have a complex scene in which I use instances which I want to  
> exclude from ambient calculation.
>
> The problem is that I use !xform  ..... with file A that include  
> materials to create another file B  that is later used as an instance.
> I need the materials in file A excluded from ambient calculation.
> The exclusion does not seem to work in my case, which makes the  
> rendering times enormous ( lightyear - 0.01 % progress per hour in  
> the picturel, very very much rays )
>
> Any help is most  welcome.
>
> -Iebele

From jedev at visarc.com  Mon Apr  2 23:00:36 2007
From: jedev at visarc.com (Jack de Valpine)
Date: Mon Apr  2 23:01:16 2007
Subject: [Radiance-general] Ambient exclude transfomed material
	in	instances
In-Reply-To: <0A962F3E-9A34-47BF-9B37-5CCC55F55805@gmail.com>
References: <CC0B19F4C6132F4D9FDDEBF194200FB502CDEDC9@ldcexc02.global.arup.com>	<46112A63.60802@iebele.nl>
	<0A962F3E-9A34-47BF-9B37-5CCC55F55805@gmail.com>
Message-ID: <46116EF4.9060604@visarc.com>

Hi Greg and Iebele,

I have a comment and a question on this.

First, Iebele, I have also just gotten a 3D xfrog tree. FYI, it is 
possible to generate an obj, convert to a radiance mesh and use Local 
u,v coordinate mapping to get the leaf and bark materials to apply. I 
have a tree right now that basically has a few materials defined for it:

   1. bark with colorpict modifier
   2. leaf with colorpict modifier
   3. leaf-mix mixpict - this uses an alpha version of the leaf to mix
      between void (ie where the alpha is black) and the leaf material (2)

The question for Greg is this, to exclude the leaves from the ambient 
calculation what needs to be listed in the exclude file the "leaf" 
material and/or the "leaf-mix" material?

Iebele, the one thing to note is that the obj file that comes out of 
xfrog does not play well with obj2mesh or obj2rad. Thus I have to bring 
it into PolyTrans and re-export as an obj to get a file that radiance is 
happy with.

Best,

-Jack

Gregory J. Ward wrote:
> Hello Iebele,
>
> Since you have too many materials in your "ambient exclude" list, 
> you're best hope is to switch to an "ambient include" list, instead.  
> Create a file listing all of the materials, hopefully not xform'ed and 
> duplicated like your leaves, that you would like to include in the 
> interreflection calculation.  These can be put in a file and 
> incorporated with a single -aI option.
>
> The other alternative is to switch off the irradiance cache using -aa 
> 0 and assign other parameters to make the problem tractable over all 
> surfaces.
>
> -Greg
>
>> From: iebele <info@iebele.nl>
>> Date: April 2, 2007 9:08:03 AM PDT
>>
>> Hi,
>>
>> I have a complex scene in which I use instances which I want to 
>> exclude from ambient calculation.
>>
>> The problem is that I use !xform  ..... with file A that include 
>> materials to create another file B  that is later used as an instance.
>> I need the materials in file A excluded from ambient calculation.
>> The exclusion does not seem to work in my case, which makes the 
>> rendering times enormous ( lightyear - 0.01 % progress per hour in 
>> the picturel, very very much rays )
>>
>> Any help is most  welcome.
>>
>> -Iebele
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>

-- 
# Jack de Valpine
# president
#
# visarc incorporated
# http://www.visarc.com
#
# channeling technology for superior design and construction

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20070402/2651551b/attachment.htm
From gregoryjward at gmail.com  Tue Apr  3 01:27:14 2007
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Tue Apr  3 01:27:20 2007
Subject: [Radiance-general] Ambient exclude transfomed material
	in	instances
In-Reply-To: <46116EF4.9060604@visarc.com>
References: <CC0B19F4C6132F4D9FDDEBF194200FB502CDEDC9@ldcexc02.global.arup.com>	<46112A63.60802@iebele.nl>
	<0A962F3E-9A34-47BF-9B37-5CCC55F55805@gmail.com>
	<46116EF4.9060604@visarc.com>
Message-ID: <F40C7973-8C21-4DA8-B328-27D75E227CA7@gmail.com>

Hi Jack,

Thanks for the idea of using obj2mesh.

As to your question, the final modifier is the one that must be  
excluded (or included) using the -a[eEiI] option.  I Iebele's file,  
this means the mixpict modifier.

Do you know what error comes out of obj2mesh using the xfrog .OBJ file?

-Greg

> From: Jack de Valpine <jedev@visarc.com>
> Date: April 2, 2007 2:00:36 PM PDT
>
> Hi Greg and Iebele,
>
> I have a comment and a question on this.
>
> First, Iebele, I have also just gotten a 3D xfrog tree. FYI, it is  
> possible to generate an obj, convert to a radiance mesh and use  
> Local u,v coordinate mapping to get the leaf and bark materials to  
> apply. I have a tree right now that basically has a few materials  
> defined for it:
> bark with colorpict modifier
> leaf with colorpict modifier
> leaf-mix mixpict - this uses an alpha version of the leaf to mix  
> between void (ie where the alpha is black) and the leaf material (2)
> The question for Greg is this, to exclude the leaves from the  
> ambient calculation what needs to be listed in the exclude file the  
> "leaf" material and/or the "leaf-mix" material?
>
> Iebele, the one thing to note is that the obj file that comes out  
> of xfrog does not play well with obj2mesh or obj2rad. Thus I have  
> to bring it into PolyTrans and re-export as an obj to get a file  
> that radiance is happy with.
>
> Best,
>
> -Jack

From jedev at visarc.com  Tue Apr  3 03:02:55 2007
From: jedev at visarc.com (Jack de Valpine)
Date: Tue Apr  3 03:03:39 2007
Subject: [Radiance-general] Ambient exclude transfomed
	material	in	instances
In-Reply-To: <F40C7973-8C21-4DA8-B328-27D75E227CA7@gmail.com>
References: <CC0B19F4C6132F4D9FDDEBF194200FB502CDEDC9@ldcexc02.global.arup.com>	<46112A63.60802@iebele.nl>	<0A962F3E-9A34-47BF-9B37-5CCC55F55805@gmail.com>	<46116EF4.9060604@visarc.com>
	<F40C7973-8C21-4DA8-B328-27D75E227CA7@gmail.com>
Message-ID: <4611A7BF.8070905@visarc.com>

Hi Greg,

Well my experience is this. I obtained a trial/demo version of xfrog 
which comes with some sample trees. In order to test the geometry in 
radiance I exported a sample tree as obj. When I tried obj2rad, I got a: 
Waverfront syntax error near line <...>: Zero normal. However, if I take 
the xfrog obj into PolyTrans and re-export it, I get an obj file that 
works fine.

-Jack

Gregory J. Ward wrote:
> Hi Jack,
>
> Thanks for the idea of using obj2mesh.
>
> As to your question, the final modifier is the one that must be 
> excluded (or included) using the -a[eEiI] option.  I Iebele's file, 
> this means the mixpict modifier.
>
> Do you know what error comes out of obj2mesh using the xfrog .OBJ file?
>
> -Greg
>
>> From: Jack de Valpine <jedev@visarc.com>
>> Date: April 2, 2007 2:00:36 PM PDT
>>
>> Hi Greg and Iebele,
>>
>> I have a comment and a question on this.
>>
>> First, Iebele, I have also just gotten a 3D xfrog tree. FYI, it is 
>> possible to generate an obj, convert to a radiance mesh and use Local 
>> u,v coordinate mapping to get the leaf and bark materials to apply. I 
>> have a tree right now that basically has a few materials defined for it:
>> bark with colorpict modifier
>> leaf with colorpict modifier
>> leaf-mix mixpict - this uses an alpha version of the leaf to mix 
>> between void (ie where the alpha is black) and the leaf material (2)
>> The question for Greg is this, to exclude the leaves from the ambient 
>> calculation what needs to be listed in the exclude file the "leaf" 
>> material and/or the "leaf-mix" material?
>>
>> Iebele, the one thing to note is that the obj file that comes out of 
>> xfrog does not play well with obj2mesh or obj2rad. Thus I have to 
>> bring it into PolyTrans and re-export as an obj to get a file that 
>> radiance is happy with.
>>
>> Best,
>>
>> -Jack
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>

-- 
# Jack de Valpine
# president
#
# visarc incorporated
# http://www.visarc.com
#
# channeling technology for superior design and construction



From grobe at gmx.net  Tue Apr  3 12:40:12 2007
From: grobe at gmx.net (Lars O. Grobe)
Date: Tue Apr  3 12:40:25 2007
Subject: [Radiance-general] Ambient exclude
	transfomed	material	in	instances
In-Reply-To: <4611A7BF.8070905@visarc.com>
References: <CC0B19F4C6132F4D9FDDEBF194200FB502CDEDC9@ldcexc02.global.arup.com>	<46112A63.60802@iebele.nl>	<0A962F3E-9A34-47BF-9B37-5CCC55F55805@gmail.com>	<46116EF4.9060604@visarc.com>	<F40C7973-8C21-4DA8-B328-27D75E227CA7@gmail.com>
	<4611A7BF.8070905@visarc.com>
Message-ID: <46122F0C.5050702@gmx.net>

>  However, if I take the xfrog obj into PolyTrans and re-export it, I
>  get an obj file that works fine.

Hi, I would like to recommend meshlab ( http://meshlab.sourceforge.net/ 
) which is a help in both finding and fixing such problems in meshes.

CU Lars.


From info at iebele.nl  Tue Apr  3 17:39:12 2007
From: info at iebele.nl (iebele)
Date: Tue Apr  3 17:36:21 2007
Subject: [Radiance-general] Ambient exclude transfomed material in
	instances
In-Reply-To: <46116EF4.9060604@visarc.com>
References: <CC0B19F4C6132F4D9FDDEBF194200FB502CDEDC9@ldcexc02.global.arup.com>	<46112A63.60802@iebele.nl>	<0A962F3E-9A34-47BF-9B37-5CCC55F55805@gmail.com>
	<46116EF4.9060604@visarc.com>
Message-ID: <46127520.7090302@iebele.nl>

Thanks Greg an Jack for your excellent and very  helpfull suggestions.

I now have succesfully converted the .obj file to rad, using obj2rad ( 
polytrans did indeed work with Xfrog obj-files, but meshlab did not 
accept these files Lars ).

However I can't get the mapping right. I've tried a lot, but with no 
succes. Would you please share with me an example of the materials you 
use for the bark and the leaves?

I just don't really understand when and how to use Lu and Lv  or 
frac(Lu) and frac(Lv) in the colorpict modifier and how these can ever 
be placed  in a reasonable way on each triangle in the output of 
obj2rad, which in my case is like :

leaf_col_leaf2 polygon leaf22836.60976
0
0
9
         -0.250204           0.195593             13.838
          -1.00383          -0.956752            13.8816
          -1.21881           -0.19178            13.5622

I never really understood the meaning of texture-coordinates, but at 
this time I feel that is what  is  missing here.

Is there a difference in using obj2rad and obj2mesh for this purpose ? I 
tried both but with the some odd results concerning the coordinate mapping.

-Iebele

Jack de Valpine wrote:

> Hi Greg and Iebele,
>
> I have a comment and a question on this.
>
> First, Iebele, I have also just gotten a 3D xfrog tree. FYI, it is 
> possible to generate an obj, convert to a radiance mesh and use Local 
> u,v coordinate mapping to get the leaf and bark materials to apply. I 
> have a tree right now that basically has a few materials defined for it:
>
>    1. bark with colorpict modifier
>    2. leaf with colorpict modifier
>    3. leaf-mix mixpict - this uses an alpha version of the leaf to mix
>       between void (ie where the alpha is black) and the leaf material (2)
>
> The question for Greg is this, to exclude the leaves from the ambient 
> calculation what needs to be listed in the exclude file the "leaf" 
> material and/or the "leaf-mix" material?
>
> Iebele, the one thing to note is that the obj file that comes out of 
> xfrog does not play well with obj2mesh or obj2rad. Thus I have to 
> bring it into PolyTrans and re-export as an obj to get a file that 
> radiance is happy with.
>
> Best,
>
> -Jack
>



From gregoryjward at gmail.com  Tue Apr  3 17:48:30 2007
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Tue Apr  3 17:48:34 2007
Subject: [Radiance-general] Ambient exclude transfomed material in
	instances
In-Reply-To: <46127520.7090302@iebele.nl>
References: <CC0B19F4C6132F4D9FDDEBF194200FB502CDEDC9@ldcexc02.global.arup.com>	<46112A63.60802@iebele.nl>	<0A962F3E-9A34-47BF-9B37-5CCC55F55805@gmail.com>
	<46116EF4.9060604@visarc.com> <46127520.7090302@iebele.nl>
Message-ID: <3A5269C9-5FB1-4650-AB2E-B053E73C6830@gmail.com>

Hi Iebele,

I can't be much help on this, as I'm not familiar with the model, but  
the general idea with local coordinates is that you don't have to do  
the mapping yourself.  It's supposedly handled by the mesh generation  
software, and isn't affected by transformations as a global  
coordinate mapping would be.

I hope this is a helpful clue, as it's about all I have to offer.
-Greg

> From: iebele <info@iebele.nl>
> Date: April 3, 2007 8:39:12 AM PDT
>
> Thanks Greg an Jack for your excellent and very  helpfull suggestions.
>
> I now have succesfully converted the .obj file to rad, using  
> obj2rad ( polytrans did indeed work with Xfrog obj-files, but  
> meshlab did not accept these files Lars ).
>
> However I can't get the mapping right. I've tried a lot, but with  
> no succes. Would you please share with me an example of the  
> materials you use for the bark and the leaves?
>
> I just don't really understand when and how to use Lu and Lv  or  
> frac(Lu) and frac(Lv) in the colorpict modifier and how these can  
> ever be placed  in a reasonable way on each triangle in the output  
> of obj2rad, which in my case is like :
>
> leaf_col_leaf2 polygon leaf22836.60976
> 0
> 0
> 9
>         -0.250204           0.195593             13.838
>          -1.00383          -0.956752            13.8816
>          -1.21881           -0.19178            13.5622
>
> I never really understood the meaning of texture-coordinates, but  
> at this time I feel that is what  is  missing here.
>
> Is there a difference in using obj2rad and obj2mesh for this  
> purpose ? I tried both but with the some odd results concerning the  
> coordinate mapping.
>
> -Iebele

From jedev at visarc.com  Tue Apr  3 19:10:18 2007
From: jedev at visarc.com (Jack de Valpine)
Date: Tue Apr  3 19:10:57 2007
Subject: [Radiance-general] Ambient exclude transfomed material
	in	instances
In-Reply-To: <3A5269C9-5FB1-4650-AB2E-B053E73C6830@gmail.com>
References: <CC0B19F4C6132F4D9FDDEBF194200FB502CDEDC9@ldcexc02.global.arup.com>	<46112A63.60802@iebele.nl>	<0A962F3E-9A34-47BF-9B37-5CCC55F55805@gmail.com>	<46116EF4.9060604@visarc.com>
	<46127520.7090302@iebele.nl>
	<3A5269C9-5FB1-4650-AB2E-B053E73C6830@gmail.com>
Message-ID: <46128A7A.20305@visarc.com>

Hi Iebele,

To use local u,v coordinate mapping (Lu,Lv) you need to use obj2mesh 
rather than obj2rad.

Here is the process for making a mesh element:

    Define mats.tree.rad using simple materials first as an example. The
    names of the materials must correspond to the names of the materials
    indicated for the .obj geometry (take a look in the .mtl file to get
    the names).

        mats.tree.rad:

            void plastic Bark
            0
            0
            5 1 1 1 0 0

            void plastic Leaf
            0
            0
            5 1 1 1 0 0

    Generate tree.rtm as follows:

        obj2mesh -a mats.tree.rad tree.obj > tree.rtm

    Creat tree.mesh.rad as follows:

        tree.mesh.rad:

            void mesh tree
            1 tree.rtm
            0
            0

    Test you mesh:

        objview tree.mesh.rad

Now lets apply more complex materials using local u,v coordinate 
mapping. To do this you need the following image data:

       1. bark.pic
       2. aspect ratio for bark.pic (y/x), lets call it <arB>
       3. leaf.pic
       4. aspect ration for leaf.pic (y/x), lets call it <arL>
       5. leaf.matte.pic - this is the alpha/matte channel for the leaf.
          The correct way to setup the matte is  for white to represent
          the leaf and black to represent what is not the leaf. This
          means that you may have to invert the matte the comes from xfrog.

    Now lets create the complex materials in mats.tree.rad

        mats.tree.rad:

            #BARK definition
            void colorpict bark.tile
            7 red green blue Bark.pic . frac(Lu) frac(Lv)*<arB>
            0
            0

            bark.tile plastic Bark
            0
            0
            5 1 1 1 0 0

            #LEAF definition
            void colorpict leaf.tile
            7 red green blue Bark.pic . frac(Lu) frac(Lv)*<arL>
            0
            0

            leaf.tile plastic leaf.map
            0
            0
            5 1 1 1 0 0

            leaf mixpict Leaf
            7 leaf.map void green leaf.matte.pic . frac(Lu) frac(Lv)*<arL>
            0
            0

    Now recompile your mesh:

        obj2mesh -a mats.tree.rad tree.obj > tree.rtm

    Now view it:

        objview tree.mesh.rad

You should add Bark and Leaf to your ambient exclude file/list if you do 
not want them in the ambient calculation. You can use tree.mesh.rad 
along with replmarks, xform or some other method to deploy the tree 
object in the scene.

This should work fine. Let me know if you have any questions.

-Jack

Gregory J. Ward wrote:
> Hi Iebele,
>
> I can't be much help on this, as I'm not familiar with the model, but 
> the general idea with local coordinates is that you don't have to do 
> the mapping yourself.  It's supposedly handled by the mesh generation 
> software, and isn't affected by transformations as a global coordinate 
> mapping would be.
>
> I hope this is a helpful clue, as it's about all I have to offer.
> -Greg
>
>> From: iebele <info@iebele.nl>
>> Date: April 3, 2007 8:39:12 AM PDT
>>
>> Thanks Greg an Jack for your excellent and very  helpfull suggestions.
>>
>> I now have succesfully converted the .obj file to rad, using obj2rad 
>> ( polytrans did indeed work with Xfrog obj-files, but meshlab did not 
>> accept these files Lars ).
>>
>> However I can't get the mapping right. I've tried a lot, but with no 
>> succes. Would you please share with me an example of the materials 
>> you use for the bark and the leaves?
>>
>> I just don't really understand when and how to use Lu and Lv  or 
>> frac(Lu) and frac(Lv) in the colorpict modifier and how these can 
>> ever be placed  in a reasonable way on each triangle in the output of 
>> obj2rad, which in my case is like :
>>
>> leaf_col_leaf2 polygon leaf22836.60976
>> 0
>> 0
>> 9
>>         -0.250204           0.195593             13.838
>>          -1.00383          -0.956752            13.8816
>>          -1.21881           -0.19178            13.5622
>>
>> I never really understood the meaning of texture-coordinates, but at 
>> this time I feel that is what  is  missing here.
>>
>> Is there a difference in using obj2rad and obj2mesh for this purpose 
>> ? I tried both but with the some odd results concerning the 
>> coordinate mapping.
>>
>> -Iebele
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>

-- 
# Jack de Valpine
# president
#
# visarc incorporated
# http://www.visarc.com
#
# channeling technology for superior design and construction

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20070403/f60f4f6e/attachment.html
From Giulio.Antonutto at arup.com  Tue Apr  3 19:15:49 2007
From: Giulio.Antonutto at arup.com (Giulio Antonutto)
Date: Tue Apr  3 19:15:59 2007
Subject: [Radiance-general] Ambient exclude transfomed materialin	instances
Message-ID: <CC0B19F4C6132F4D9FDDEBF194200FB502E8843D@ldcexc02.global.arup.com>

some UV stuff here and hopefully not too many mistakes...

 

http://web.mac.com/geotrupes/iWeb/Main%20site/RadBlog/3690C181-7F9F-43AD
-B5B2-A5D239AD503E.html

 

G.

 

 

________________________________

From: radiance-general-bounces@radiance-online.org
[mailto:radiance-general-bounces@radiance-online.org] On Behalf Of Jack
de Valpine
Sent: 03 April 2007 18:10
To: Radiance general discussion
Subject: Re: [Radiance-general] Ambient exclude transfomed materialin
instances

 

Hi Iebele,

To use local u,v coordinate mapping (Lu,Lv) you need to use obj2mesh
rather than obj2rad.

Here is the process for making a mesh element:

Define mats.tree.rad using simple materials first as an example. The
names of the materials must correspond to the names of the materials
indicated for the .obj geometry (take a look in the .mtl file to get the
names).

mats.tree.rad:

void plastic Bark
0
0
5 1 1 1 0 0

void plastic Leaf
0
0
5 1 1 1 0 0

Generate tree.rtm as follows:

obj2mesh -a mats.tree.rad tree.obj > tree.rtm

Creat tree.mesh.rad as follows:

tree.mesh.rad:

void mesh tree
1 tree.rtm
0
0

Test you mesh:

objview tree.mesh.rad

Now lets apply more complex materials using local u,v coordinate
mapping. To do this you need the following image data:

1.	bark.pic
2.	aspect ratio for bark.pic (y/x), lets call it <arB>
3.	leaf.pic
4.	aspect ration for leaf.pic (y/x), lets call it <arL>
5.	leaf.matte.pic - this is the alpha/matte channel for the leaf.
The correct way to setup the matte is  for white to represent the leaf
and black to represent what is not the leaf. This means that you may
have to invert the matte the comes from xfrog.

	Now lets create the complex materials in mats.tree.rad

	mats.tree.rad:

	#BARK definition
	void colorpict bark.tile
	7 red green blue Bark.pic . frac(Lu) frac(Lv)*<arB>
	0
	0
	
	bark.tile plastic Bark
	0
	0
	5 1 1 1 0 0
	
	#LEAF definition
	void colorpict leaf.tile
	7 red green blue Bark.pic . frac(Lu) frac(Lv)*<arL>
	0
	0
	
	leaf.tile plastic leaf.map
	0
	0
	5 1 1 1 0 0
	
	leaf mixpict Leaf
	7 leaf.map void green leaf.matte.pic . frac(Lu) frac(Lv)*<arL>
	0
	0

	Now recompile your mesh:

	obj2mesh -a mats.tree.rad tree.obj > tree.rtm

	Now view it:

	objview tree.mesh.rad

You should add Bark and Leaf to your ambient exclude file/list if you do
not want them in the ambient calculation. You can use tree.mesh.rad
along with replmarks, xform or some other method to deploy the tree
object in the scene.

This should work fine. Let me know if you have any questions.

-Jack

Gregory J. Ward wrote: 

Hi Iebele, 

I can't be much help on this, as I'm not familiar with the model, but
the general idea with local coordinates is that you don't have to do the
mapping yourself.  It's supposedly handled by the mesh generation
software, and isn't affected by transformations as a global coordinate
mapping would be. 

I hope this is a helpful clue, as it's about all I have to offer. 
-Greg 




From: iebele <info@iebele.nl> <mailto:info@iebele.nl>  
Date: April 3, 2007 8:39:12 AM PDT 

Thanks Greg an Jack for your excellent and very  helpfull suggestions. 

I now have succesfully converted the .obj file to rad, using obj2rad (
polytrans did indeed work with Xfrog obj-files, but meshlab did not
accept these files Lars ). 

However I can't get the mapping right. I've tried a lot, but with no
succes. Would you please share with me an example of the materials you
use for the bark and the leaves? 

I just don't really understand when and how to use Lu and Lv  or
frac(Lu) and frac(Lv) in the colorpict modifier and how these can ever
be placed  in a reasonable way on each triangle in the output of
obj2rad, which in my case is like : 

leaf_col_leaf2 polygon leaf22836.60976 
0 
0 
9 
        -0.250204           0.195593             13.838 
         -1.00383          -0.956752            13.8816 
         -1.21881           -0.19178            13.5622 

I never really understood the meaning of texture-coordinates, but at
this time I feel that is what  is  missing here. 

Is there a difference in using obj2rad and obj2mesh for this purpose ? I
tried both but with the some odd results concerning the coordinate
mapping. 

-Iebele 


_______________________________________________ 
Radiance-general mailing list 
Radiance-general@radiance-online.org 
http://www.radiance-online.org/mailman/listinfo/radiance-general 







-- 
# Jack de Valpine
# president
#
# visarc incorporated
# http://www.visarc.com
#
# channeling technology for superior design and construction
____________________________________________________________
Electronic mail messages entering and leaving Arup  business
systems are scanned for acceptability of content and viruses
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20070403/73d1104c/attachment.htm
From jedev at visarc.com  Tue Apr  3 19:40:21 2007
From: jedev at visarc.com (Jack de Valpine)
Date: Tue Apr  3 19:40:59 2007
Subject: [Radiance-general] Ambient exclude transfomed materialin	instances
In-Reply-To: <CC0B19F4C6132F4D9FDDEBF194200FB502E8843D@ldcexc02.global.arup.com>
References: <CC0B19F4C6132F4D9FDDEBF194200FB502E8843D@ldcexc02.global.arup.com>
Message-ID: <46129185.2080205@visarc.com>

Hi Giulio,

I just checked out your RadBlog. There are some nice tips, tricks and 
hints here.

Best,

-Jack

Giulio Antonutto wrote:
>
> some UV stuff here and hopefully not too many mistakes...
>
>  
>
> http://web.mac.com/geotrupes/iWeb/Main%20site/RadBlog/3690C181-7F9F-43AD-B5B2-A5D239AD503E.html
>
>  
>
> G.
>
>  
>
>  
>
> ------------------------------------------------------------------------
>
> *From:* radiance-general-bounces@radiance-online.org 
> [mailto:radiance-general-bounces@radiance-online.org] *On Behalf Of 
> *Jack de Valpine
> *Sent:* 03 April 2007 18:10
> *To:* Radiance general discussion
> *Subject:* Re: [Radiance-general] Ambient exclude transfomed 
> materialin instances
>
>  
>
> Hi Iebele,
>
> To use local u,v coordinate mapping (Lu,Lv) you need to use obj2mesh 
> rather than obj2rad.
>
> Here is the process for making a mesh element:
>
> Define mats.tree.rad using simple materials first as an example. The 
> names of the materials must correspond to the names of the materials 
> indicated for the .obj geometry (take a look in the .mtl file to get 
> the names).
>
> mats.tree.rad:
>
> void plastic Bark
> 0
> 0
> 5 1 1 1 0 0
>
> void plastic Leaf
> 0
> 0
> 5 1 1 1 0 0
>
> Generate tree.rtm as follows:
>
> obj2mesh -a mats.tree.rad tree.obj > tree.rtm
>
> Creat tree.mesh.rad as follows:
>
> tree.mesh.rad:
>
> void mesh tree
> 1 tree.rtm
> 0
> 0
>
> Test you mesh:
>
> objview tree.mesh.rad
>
> Now lets apply more complex materials using local u,v coordinate 
> mapping. To do this you need the following image data:
>
>    1. bark.pic
>    2. aspect ratio for bark.pic (y/x), lets call it <arB>
>    3. leaf.pic
>    4. aspect ration for leaf.pic (y/x), lets call it <arL>
>    5. leaf.matte.pic - this is the alpha/matte channel for the leaf.
>       The correct way to setup the matte is  for white to represent
>       the leaf and black to represent what is not the leaf. This means
>       that you may have to invert the matte the comes from xfrog.
>
>     Now lets create the complex materials in mats.tree.rad
>
>     mats.tree.rad:
>
>     #BARK definition
>     void colorpict bark.tile
>     7 red green blue Bark.pic . frac(Lu) frac(Lv)*<arB>
>     0
>     0
>
>     bark.tile plastic Bark
>     0
>     0
>     5 1 1 1 0 0
>
>     #LEAF definition
>     void colorpict leaf.tile
>     7 red green blue Bark.pic . frac(Lu) frac(Lv)*<arL>
>     0
>     0
>
>     leaf.tile plastic leaf.map
>     0
>     0
>     5 1 1 1 0 0
>
>     leaf mixpict Leaf
>     7 leaf.map void green leaf.matte.pic . frac(Lu) frac(Lv)*<arL>
>     0
>     0
>
>     Now recompile your mesh:
>
>     obj2mesh -a mats.tree.rad tree.obj > tree.rtm
>
>     Now view it:
>
>     objview tree.mesh.rad
>
> You should add Bark and Leaf to your ambient exclude file/list if you 
> do not want them in the ambient calculation. You can use tree.mesh.rad 
> along with replmarks, xform or some other method to deploy the tree 
> object in the scene.
>
> This should work fine. Let me know if you have any questions.
>
> -Jack
>
> Gregory J. Ward wrote:
>
> Hi Iebele,
>
> I can't be much help on this, as I'm not familiar with the model, but 
> the general idea with local coordinates is that you don't have to do 
> the mapping yourself.  It's supposedly handled by the mesh generation 
> software, and isn't affected by transformations as a global coordinate 
> mapping would be.
>
> I hope this is a helpful clue, as it's about all I have to offer.
> -Greg
>
>
> From: iebele <info@iebele.nl> <mailto:info@iebele.nl>
> Date: April 3, 2007 8:39:12 AM PDT
>
> Thanks Greg an Jack for your excellent and very  helpfull suggestions.
>
> I now have succesfully converted the .obj file to rad, using obj2rad ( 
> polytrans did indeed work with Xfrog obj-files, but meshlab did not 
> accept these files Lars ).
>
> However I can't get the mapping right. I've tried a lot, but with no 
> succes. Would you please share with me an example of the materials you 
> use for the bark and the leaves?
>
> I just don't really understand when and how to use Lu and Lv  or 
> frac(Lu) and frac(Lv) in the colorpict modifier and how these can ever 
> be placed  in a reasonable way on each triangle in the output of 
> obj2rad, which in my case is like :
>
> leaf_col_leaf2 polygon leaf22836.60976
> 0
> 0
> 9
>         -0.250204           0.195593             13.838
>          -1.00383          -0.956752            13.8816
>          -1.21881           -0.19178            13.5622
>
> I never really understood the meaning of texture-coordinates, but at 
> this time I feel that is what  is  missing here.
>
> Is there a difference in using obj2rad and obj2mesh for this purpose ? 
> I tried both but with the some odd results concerning the coordinate 
> mapping.
>
> -Iebele
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org 
> <mailto:Radiance-general@radiance-online.org>
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
>
> -- 
> # Jack de Valpine
> # president
> #
> # visarc incorporated
> # http://www.visarc.com
> #
> # channeling technology for superior design and construction
> ____________________________________________________________
> Electronic mail messages entering and leaving Arup  business
> systems are scanned for acceptability of content and viruses
>   
> ------------------------------------------------------------------------
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>   

-- 
# Jack de Valpine
# president
#
# visarc incorporated
# http://www.visarc.com
#
# channeling technology for superior design and construction

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20070403/d560dcca/attachment.html
From jiangtao.du at yahoo.co.uk  Tue Apr  3 22:20:13 2007
From: jiangtao.du at yahoo.co.uk (Jiangtao Du)
Date: Tue Apr  3 22:20:18 2007
Subject: [Radiance-general] Re: Radiance tool and Atrium daylight simulation
Message-ID: <20070403202013.7615.qmail@web28109.mail.ukl.yahoo.com>

Hi,
  Thank you for the help from Lars, Nick, Giulio, Rob , Evangelos, Martin, etc. I will try to use the Linux or Mac OS to run the Radiance.
   
  Jiangtao 
   
  Mphi/phd student in School of Arch in Sheffield Univ


 		
---------------------------------
 All New Yahoo! Mail ? Tired of unwanted email come-ons? Let our SpamGuard protect you.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20070403/953b15b3/attachment.htm
From info at iebele.nl  Wed Apr  4 09:27:07 2007
From: info at iebele.nl (iebele)
Date: Wed Apr  4 09:24:17 2007
Subject: [Radiance-general] Ambient exclude transfomed material in
	instances
In-Reply-To: <46128A7A.20305@visarc.com>
References: <CC0B19F4C6132F4D9FDDEBF194200FB502CDEDC9@ldcexc02.global.arup.com>	<46112A63.60802@iebele.nl>	<0A962F3E-9A34-47BF-9B37-5CCC55F55805@gmail.com>	<46116EF4.9060604@visarc.com>	<46127520.7090302@iebele.nl>	<3A5269C9-5FB1-4650-AB2E-B053E73C6830@gmail.com>
	<46128A7A.20305@visarc.com>
Message-ID: <4613534B.1070105@iebele.nl>

Hi Jack,

Wow, that is a nice tutorial you wrote! Thank you so much, it has been 
of great help, I now have the trees rendered exactly as they appear in 
xfrog.

The obj to obj conversion using Polytrans to prepare the files for 
feeding them to obj2mesh does not work for all the trees in the Xfrog 
libraries. The example files that are shipped with the demo version of 
Xfrog go well. But some (at least those I happen to work with) of the 
library files do not happily convert to a Radiance mesh using the obj to 
obj conversion in Polytrans. The coordinate mapping is lost somewhere 
during this proces - some warnings of both Polytrans and obj2mesh 
probably relate to that.

Exporting to 3DS in Xfrog, and convert that file to OBJ using Polytrans 
works fine for obj2mesh, apart from the fact that the whole model is 
rotated, which is solved by adding a transform:

        void mesh tree
        7 tree.rtm   -rx 90 -ry 0 -rz 0
        0
        0

-Iebele





> Hi Iebele,
>
> To use local u,v coordinate mapping (Lu,Lv) you need to use obj2mesh 
> rather than obj2rad.
>
> Here is the process for making a mesh element:
>
>     Define mats.tree.rad using simple materials first as an example.
>     The names of the materials must correspond to the names of the
>     materials indicated for the .obj geometry (take a look in the .mtl
>     file to get the names).
>
>         mats.tree.rad:
>
>             void plastic Bark
>             0
>             0
>             5 1 1 1 0 0
>
>             void plastic Leaf
>             0
>             0
>             5 1 1 1 0 0
>
>     Generate tree.rtm as follows:
>
>         obj2mesh -a mats.tree.rad tree.obj > tree.rtm
>
>     Creat tree.mesh.rad as follows:
>
>         tree.mesh.rad:
>
>             void mesh tree
>             1 tree.rtm
>             0
>             0
>
>     Test you mesh:
>
>         objview tree.mesh.rad
>
> Now lets apply more complex materials using local u,v coordinate 
> mapping. To do this you need the following image data:
>
>        1. bark.pic
>        2. aspect ratio for bark.pic (y/x), lets call it <arB>
>        3. leaf.pic
>        4. aspect ration for leaf.pic (y/x), lets call it <arL>
>        5. leaf.matte.pic - this is the alpha/matte channel for the
>           leaf. The correct way to setup the matte is  for white to
>           represent the leaf and black to represent what is not the
>           leaf. This means that you may have to invert the matte the
>           comes from xfrog.
>
>     Now lets create the complex materials in mats.tree.rad
>
>         mats.tree.rad:
>
>             #BARK definition
>             void colorpict bark.tile
>             7 red green blue Bark.pic . frac(Lu) frac(Lv)*<arB>
>             0
>             0
>
>             bark.tile plastic Bark
>             0
>             0
>             5 1 1 1 0 0
>
>             #LEAF definition
>             void colorpict leaf.tile
>             7 red green blue Bark.pic . frac(Lu) frac(Lv)*<arL>
>             0
>             0
>
>             leaf.tile plastic leaf.map
>             0
>             0
>             5 1 1 1 0 0
>
>             leaf mixpict Leaf
>             7 leaf.map void green leaf.matte.pic . frac(Lu) frac(Lv)*<arL>
>             0
>             0
>
>     Now recompile your mesh:
>
>         obj2mesh -a mats.tree.rad tree.obj > tree.rtm
>
>     Now view it:
>
>         objview tree.mesh.rad
>
> You should add Bark and Leaf to your ambient exclude file/list if you 
> do not want them in the ambient calculation. You can use tree.mesh.rad 
> along with replmarks, xform or some other method to deploy the tree 
> object in the scene.
>
> This should work fine. Let me know if you have any questions.
>
> -Jack
>
> Gregory J. Ward wrote:
>
>> Hi Iebele,
>>
>> I can't be much help on this, as I'm not familiar with the model, but 
>> the general idea with local coordinates is that you don't have to do 
>> the mapping yourself.  It's supposedly handled by the mesh generation 
>> software, and isn't affected by transformations as a global 
>> coordinate mapping would be.
>>
>> I hope this is a helpful clue, as it's about all I have to offer.
>> -Greg
>>
>>> From: iebele <info@iebele.nl>
>>> Date: April 3, 2007 8:39:12 AM PDT
>>>
>>> Thanks Greg an Jack for your excellent and very  helpfull suggestions.
>>>
>>> I now have succesfully converted the .obj file to rad, using obj2rad 
>>> ( polytrans did indeed work with Xfrog obj-files, but meshlab did 
>>> not accept these files Lars ).
>>>
>>> However I can't get the mapping right. I've tried a lot, but with no 
>>> succes. Would you please share with me an example of the materials 
>>> you use for the bark and the leaves?
>>>
>>> I just don't really understand when and how to use Lu and Lv  or 
>>> frac(Lu) and frac(Lv) in the colorpict modifier and how these can 
>>> ever be placed  in a reasonable way on each triangle in the output 
>>> of obj2rad, which in my case is like :
>>>
>>> leaf_col_leaf2 polygon leaf22836.60976
>>> 0
>>> 0
>>> 9
>>>         -0.250204           0.195593             13.838
>>>          -1.00383          -0.956752            13.8816
>>>          -1.21881           -0.19178            13.5622
>>>
>>> I never really understood the meaning of texture-coordinates, but at 
>>> this time I feel that is what  is  missing here.
>>>
>>> Is there a difference in using obj2rad and obj2mesh for this purpose 
>>> ? I tried both but with the some odd results concerning the 
>>> coordinate mapping.
>>>
>>> -Iebele
>>
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general@radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
>
>-- 
># Jack de Valpine
># president
>#
># visarc incorporated
># http://www.visarc.com
>#
># channeling technology for superior design and construction
>  
>
>------------------------------------------------------------------------
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general@radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general
>  
>



From jedev at visarc.com  Wed Apr  4 15:32:08 2007
From: jedev at visarc.com (Jack de Valpine)
Date: Wed Apr  4 15:32:51 2007
Subject: [Radiance-general] Ambient exclude transfomed material
	in	instances
In-Reply-To: <4613534B.1070105@iebele.nl>
References: <CC0B19F4C6132F4D9FDDEBF194200FB502CDEDC9@ldcexc02.global.arup.com>	<46112A63.60802@iebele.nl>	<0A962F3E-9A34-47BF-9B37-5CCC55F55805@gmail.com>	<46116EF4.9060604@visarc.com>	<46127520.7090302@iebele.nl>	<3A5269C9-5FB1-4650-AB2E-B053E73C6830@gmail.com>	<46128A7A.20305@visarc.com>
	<4613534B.1070105@iebele.nl>
Message-ID: <4613A8D8.4050805@visarc.com>

Hi Iebele,

Your welcome. It is fortunate that I have also been starting to work 
with xfrog trees, so this is pretty fresh in my mind.

My experience with different trees in xfrog is pretty limited. I have 
experimented with one of the example ones, which is what I used to base 
the polytrans intermediate translation method on. The other one is from 
an xfrog tree that came with a pre-exported obj that I purchased on 
TurboSquid.

I am not sure how familiar you are with Polytrans. It does have some 
tools for (re)calculating uv tangent vectors. I wonder if this would be 
worth trying on one of the trees that causes problems.

-Jack

iebele wrote:
> Hi Jack,
>
> Wow, that is a nice tutorial you wrote! Thank you so much, it has been 
> of great help, I now have the trees rendered exactly as they appear in 
> xfrog.
>
> The obj to obj conversion using Polytrans to prepare the files for 
> feeding them to obj2mesh does not work for all the trees in the Xfrog 
> libraries. The example files that are shipped with the demo version of 
> Xfrog go well. But some (at least those I happen to work with) of the 
> library files do not happily convert to a Radiance mesh using the obj 
> to obj conversion in Polytrans. The coordinate mapping is lost 
> somewhere during this proces - some warnings of both Polytrans and 
> obj2mesh probably relate to that.
>
> Exporting to 3DS in Xfrog, and convert that file to OBJ using 
> Polytrans works fine for obj2mesh, apart from the fact that the whole 
> model is rotated, which is solved by adding a transform:
>
>        void mesh tree
>        7 tree.rtm   -rx 90 -ry 0 -rz 0
>        0
>        0
>
> -Iebele
>
>
>
>
>
>> Hi Iebele,
>>
>> To use local u,v coordinate mapping (Lu,Lv) you need to use obj2mesh 
>> rather than obj2rad.
>>
>> Here is the process for making a mesh element:
>>
>>     Define mats.tree.rad using simple materials first as an example.
>>     The names of the materials must correspond to the names of the
>>     materials indicated for the .obj geometry (take a look in the .mtl
>>     file to get the names).
>>
>>         mats.tree.rad:
>>
>>             void plastic Bark
>>             0
>>             0
>>             5 1 1 1 0 0
>>
>>             void plastic Leaf
>>             0
>>             0
>>             5 1 1 1 0 0
>>
>>     Generate tree.rtm as follows:
>>
>>         obj2mesh -a mats.tree.rad tree.obj > tree.rtm
>>
>>     Creat tree.mesh.rad as follows:
>>
>>         tree.mesh.rad:
>>
>>             void mesh tree
>>             1 tree.rtm
>>             0
>>             0
>>
>>     Test you mesh:
>>
>>         objview tree.mesh.rad
>>
>> Now lets apply more complex materials using local u,v coordinate 
>> mapping. To do this you need the following image data:
>>
>>        1. bark.pic
>>        2. aspect ratio for bark.pic (y/x), lets call it <arB>
>>        3. leaf.pic
>>        4. aspect ration for leaf.pic (y/x), lets call it <arL>
>>        5. leaf.matte.pic - this is the alpha/matte channel for the
>>           leaf. The correct way to setup the matte is  for white to
>>           represent the leaf and black to represent what is not the
>>           leaf. This means that you may have to invert the matte the
>>           comes from xfrog.
>>
>>     Now lets create the complex materials in mats.tree.rad
>>
>>         mats.tree.rad:
>>
>>             #BARK definition
>>             void colorpict bark.tile
>>             7 red green blue Bark.pic . frac(Lu) frac(Lv)*<arB>
>>             0
>>             0
>>
>>             bark.tile plastic Bark
>>             0
>>             0
>>             5 1 1 1 0 0
>>
>>             #LEAF definition
>>             void colorpict leaf.tile
>>             7 red green blue Bark.pic . frac(Lu) frac(Lv)*<arL>
>>             0
>>             0
>>
>>             leaf.tile plastic leaf.map
>>             0
>>             0
>>             5 1 1 1 0 0
>>
>>             leaf mixpict Leaf
>>             7 leaf.map void green leaf.matte.pic . frac(Lu) 
>> frac(Lv)*<arL>
>>             0
>>             0
>>
>>     Now recompile your mesh:
>>
>>         obj2mesh -a mats.tree.rad tree.obj > tree.rtm
>>
>>     Now view it:
>>
>>         objview tree.mesh.rad
>>
>> You should add Bark and Leaf to your ambient exclude file/list if you 
>> do not want them in the ambient calculation. You can use 
>> tree.mesh.rad along with replmarks, xform or some other method to 
>> deploy the tree object in the scene.
>>
>> This should work fine. Let me know if you have any questions.
>>
>> -Jack
>>
>> Gregory J. Ward wrote:
>>
>>> Hi Iebele,
>>>
>>> I can't be much help on this, as I'm not familiar with the model, 
>>> but the general idea with local coordinates is that you don't have 
>>> to do the mapping yourself.  It's supposedly handled by the mesh 
>>> generation software, and isn't affected by transformations as a 
>>> global coordinate mapping would be.
>>>
>>> I hope this is a helpful clue, as it's about all I have to offer.
>>> -Greg
>>>
>>>> From: iebele <info@iebele.nl>
>>>> Date: April 3, 2007 8:39:12 AM PDT
>>>>
>>>> Thanks Greg an Jack for your excellent and very  helpfull suggestions.
>>>>
>>>> I now have succesfully converted the .obj file to rad, using 
>>>> obj2rad ( polytrans did indeed work with Xfrog obj-files, but 
>>>> meshlab did not accept these files Lars ).
>>>>
>>>> However I can't get the mapping right. I've tried a lot, but with 
>>>> no succes. Would you please share with me an example of the 
>>>> materials you use for the bark and the leaves?
>>>>
>>>> I just don't really understand when and how to use Lu and Lv  or 
>>>> frac(Lu) and frac(Lv) in the colorpict modifier and how these can 
>>>> ever be placed  in a reasonable way on each triangle in the output 
>>>> of obj2rad, which in my case is like :
>>>>
>>>> leaf_col_leaf2 polygon leaf22836.60976
>>>> 0
>>>> 0
>>>> 9
>>>>         -0.250204           0.195593             13.838
>>>>          -1.00383          -0.956752            13.8816
>>>>          -1.21881           -0.19178            13.5622
>>>>
>>>> I never really understood the meaning of texture-coordinates, but 
>>>> at this time I feel that is what  is  missing here.
>>>>
>>>> Is there a difference in using obj2rad and obj2mesh for this 
>>>> purpose ? I tried both but with the some odd results concerning the 
>>>> coordinate mapping.
>>>>
>>>> -Iebele
>>>
>>>
>>> _______________________________________________
>>> Radiance-general mailing list
>>> Radiance-general@radiance-online.org
>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>>
>>>
>>
>> -- 
>> # Jack de Valpine
>> # president
>> #
>> # visarc incorporated
>> # http://www.visarc.com
>> #
>> # channeling technology for superior design and construction
>>  
>>
>> ------------------------------------------------------------------------
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general@radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>  
>>
>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>

-- 
# Jack de Valpine
# president
#
# visarc incorporated
# http://www.visarc.com
#
# channeling technology for superior design and construction



From smichel_designer at hotmail.com  Thu Apr  5 01:33:42 2007
From: smichel_designer at hotmail.com (steve michel)
Date: Thu Apr  5 01:33:48 2007
Subject: [Radiance-general] Help:Setting up a radiance system
Message-ID: <BAY143-F26B03506AD60E2B51BBA34E0660@phx.gbl>

I am a new comer to radiance simulations. I have installed radiance on a 
linux OS in tandem with a modeler(blender3d) to prepare my models. Testing 
the setup gave me the following console output:


<<$ rad test.rif
        oconv test.rad > test.oct
        rm -f test.amb
        rpict -vf test.vf -x 1280 -y 960 -ps 8 -pt .16 -dp 128 -ar 8 -ds .4 
-dt .2 -dc .25 -dr 0 -sj 0 -st .5 -af test.amb -aa .4 -ad 64 -as 0 -av 10 10 
10 -lr 3 -lw .02 -ps 2 -x 1280 -y 960 -ab 0 -aa 0.20000000298 -ar 32 -ad 32 
-as 32 -av 0.5 0.5 0.5 test.oct > testraw_vw1.unf
rpict: fatal - cannot find function file "rayinit.cal"
rpict: 270616 rays, 67.52% after 0.001u 0.000s 0.002r hours on ubuntu
rad: error rendering view vw1>>

I verified that radiance files are present in /usr/lib/share/radiance and 
rayinit.cal is present. I did edit my .bashrc file with: export 
PATH=.:/usr/lib/radiance/bin:${PATH}

any help on this matter would be appreciated.

_________________________________________________________________
http://local.live.com/?mkt=en-ca/?v=2&cid=A6D6BDB4586E357F!420


From rpg at rumblestrip.org  Thu Apr  5 05:54:05 2007
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Thu Apr  5 05:55:41 2007
Subject: [Radiance-general] Help:Setting up a radiance system
In-Reply-To: <BAY143-F26B03506AD60E2B51BBA34E0660@phx.gbl>
References: <BAY143-F26B03506AD60E2B51BBA34E0660@phx.gbl>
Message-ID: <897888F2-3625-4435-AA66-F3047C0298B3@rumblestrip.org>


On Apr 4, 2007, at 5:33 PM, steve michel wrote:
>
> I verified that radiance files are present in /usr/lib/share/ 
> radiance and rayinit.cal is present. I did edit my .bashrc file  
> with: export PATH=.:/usr/lib/radiance/bin:${PATH}

Hi Steve,

Welcome to the world of Radiance!  You're almost there.  You need to  
also add a RAYPATH environment variable to your setup, just like you  
have a PATH variable.  I put these lines in my .bash_profile:

RAYPATH=.:/usr/local/lib/ray
export RAYPATH

THis will allow Radiance to find rayinit.cal (and anything in your  
current directory that may be of interest to Radiance).  Good luck!

- Rob


From jelle.feringa at ezct.net  Thu Apr  5 12:08:23 2007
From: jelle.feringa at ezct.net (Jelle Feringa / EZCT Architecture & Design Research)
Date: Thu Apr  5 12:07:02 2007
Subject: [Radiance-general] RAYPATH
Message-ID: <029b01c7776a$58abeed0$c000a8c0@JELLE>


Steve, this might help you out:

export PATH=/opt/radiance/bin:$PATH

export RAYPATH=/opt/radiance/lib:$RAYPATH

# copy paste from Lars' site:
# http://www.larsgrobe.de/projects/radiance/radiance_binaries/index.html


From smichel_designer at hotmail.com  Thu Apr  5 13:24:16 2007
From: smichel_designer at hotmail.com (steve michel)
Date: Thu Apr  5 13:24:25 2007
Subject: [Radiance-general] Help:Setting up a radiance system
In-Reply-To: <897888F2-3625-4435-AA66-F3047C0298B3@rumblestrip.org>
Message-ID: <BAY143-F930B9DE6F0525A4CD9364E0650@phx.gbl>


Thanks for the solution. I checked the location of the radiance system 
files:
the *.cal procedurals were in /usr/share/radiance/lib

the rad executable was in /usr/lib/radiance/bin

therefore editing my .bashrc script with
export PATH=.:/usr/lib/radiance/bin:${PATH}
export PATH=.:/usr/share/radiance/lib:${PATH}
RAYPATH=.:/usr/share/radiance/lib/
export RAYPATH

solved it. (I think one of the lines might be redundant)

thanks again

>From: Rob Guglielmetti <rpg@rumblestrip.org>
>Reply-To: Radiance general discussion 
><radiance-general@radiance-online.org>
>To: Radiance general discussion <radiance-general@radiance-online.org>
>Subject: Re: [Radiance-general] Help:Setting up a radiance system
>Date: Wed, 4 Apr 2007 21:54:05 -0600
>
>
>On Apr 4, 2007, at 5:33 PM, steve michel wrote:
>>
>>I verified that radiance files are present in /usr/lib/share/ radiance and 
>>rayinit.cal is present. I did edit my .bashrc file  with: export 
>>PATH=.:/usr/lib/radiance/bin:${PATH}
>
>Hi Steve,
>
>Welcome to the world of Radiance!  You're almost there.  You need to  also 
>add a RAYPATH environment variable to your setup, just like you  have a 
>PATH variable.  I put these lines in my .bash_profile:
>
>RAYPATH=.:/usr/local/lib/ray
>export RAYPATH
>
>THis will allow Radiance to find rayinit.cal (and anything in your  current 
>directory that may be of interest to Radiance).  Good luck!
>
>- Rob
>
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general@radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general

_________________________________________________________________
Check Out Our List Of Trendy Restaurants. You'll Eat It Up! 
http://local.live.com/?mkt=en-ca/?v=2&cid=A6D6BDB4586E357F!378


From rpg at rumblestrip.org  Thu Apr  5 14:53:15 2007
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Thu Apr  5 14:54:50 2007
Subject: [Radiance-general] Help:Setting up a radiance system
In-Reply-To: <BAY143-F930B9DE6F0525A4CD9364E0650@phx.gbl>
References: <BAY143-F930B9DE6F0525A4CD9364E0650@phx.gbl>
Message-ID: <8C961876-65C6-4FA0-BD2E-FF4EC696051D@rumblestrip.org>


On Apr 5, 2007, at 5:24 AM, steve michel wrote:
>
> therefore editing my .bashrc script with
> export PATH=.:/usr/lib/radiance/bin:${PATH}
> export PATH=.:/usr/share/radiance/lib:${PATH}
> RAYPATH=.:/usr/share/radiance/lib/
> export RAYPATH
>
> solved it. (I think one of the lines might be redundant)

Yep, my email listed the default location for the cal files; glad yu  
sorted i out with the alternate location you have there.  The third  
line above is not only redundant, but also is including your enire  
search path in the RAYPATH variable.  THis is not necessarily bad,  
but bear in mind that Radiance will be searching a lot of additional  
locations for cal files, which may not be what you want.  SInce the  
CWD and then the main lib directory come first on the RAYPATH the way  
you have it set up, you should be ok, but II just thought I'd point  
it out.

- Rob 

From grobe at gmx.net  Thu Apr  5 15:14:45 2007
From: grobe at gmx.net (Lars O. Grobe)
Date: Thu Apr  5 15:15:03 2007
Subject: [Radiance-general] Help:Setting up a radiance system
In-Reply-To: <BAY143-F930B9DE6F0525A4CD9364E0650@phx.gbl>
References: <BAY143-F930B9DE6F0525A4CD9364E0650@phx.gbl>
Message-ID: <4614F645.40908@gmx.net>

Hi...

 > the *.cal procedurals were in /usr/share/radiance/lib
leads to:
export RAYPATH=.:/usr/lib/radiance/lib:$RAYPATH

 > the rad executable was in /usr/lib/radiance/bin
 leads to:
export PATH=/usr/lib/radiance/bin:$PATH

Use these for your .bashrc! I always append the existing RAYPATH when 
setting a new one, just not to break anything I might have done before. 
If there is nothing that has been defined before in this variable, there 
will be no negative impact as the existing (appended) RAYPATH will just 
be empty.

Now some comments on your settings:
 > export PATH=.:/usr/lib/radiance/bin:${PATH}
Possible, but not recommended. Including '.' into your path is dangerous 
as it opens the possibility of executing programs that you do not want. 
E.g. someone might have somehow managed to put a executeable named "ls" 
into a directory of yours, containing some malicious code and a call to 
ls. If you happen to type "ls" in that directory, not the system tool 
you expected, but the malicious code would run (with your user rights), 
and as there was a call to the original "ls" in it, you get the output 
you expect and will not even realize what happened. So I never have '.' 
in my PATH. And it is never necessary!

 > export PATH=.:/usr/share/radiance/lib:${PATH}
There are no executeable in /usr/share/radiance/lib, this is not reasonable.

 > RAYPATH=.:/usr/share/radiance/lib/
 > export RAYPATH

Ok, but before you used tanother convention for the variable, so use the 
same here. Just one line, not two.

Ah, and thanks to Jelle I just found that I forgot the '.' in the 
RAYPATH setting that I describe on my webpage ;-)

CU Lars.


From smichel_designer at hotmail.com  Fri Apr  6 15:06:21 2007
From: smichel_designer at hotmail.com (steve michel)
Date: Fri Apr  6 15:06:30 2007
Subject: [Radiance-general] Help:Setting up a radiance system
In-Reply-To: <4614F645.40908@gmx.net>
Message-ID: <BAY143-F30460B9940EDC9485ED22AE0640@phx.gbl>

Lars

I installed radiance through synaptic package manager. However if you are 
implying that a user defined configs could allow root access, that's an 
exploit I've never heard of. I will revise my .bashrc to side with caution.

In the meantime searching the installed radiance files I noticed what may be 
examples I would like to test to make sure everything works as expected. One 
such is 'office' and 'cabin' located in the "/usr/share/radiance/obj" 
folder. Before all that is feasible,  some clarifications to files types are 
needed. Ideally, I would like to locate the example files into a user 
project directory rather than system folders. And make sure any 
procedurales, lighting, and materials files are in the share folder.

The http://radsite.lbl.gov/radiance/refer/ray.html#Auxiliary flowchart 
doesn't show the file types in use.

*.lum
*.vf
*.norm
*.vp etc..

any link to a consise descriptions of these files would be of help because 
running the *.rif I found in the lib folder generate errors from missing 
files or includes.









>From: "Lars O. Grobe" <grobe@gmx.net>
>Reply-To: Radiance general discussion 
><radiance-general@radiance-online.org>
>To: Radiance general discussion <radiance-general@radiance-online.org>
>Subject: Re: [Radiance-general] Help:Setting up a radiance system
>Date: Thu, 05 Apr 2007 16:14:45 +0300
>
>Hi...
>
> > the *.cal procedurals were in /usr/share/radiance/lib
>leads to:
>export RAYPATH=.:/usr/lib/radiance/lib:$RAYPATH
>
> > the rad executable was in /usr/lib/radiance/bin
>leads to:
>export PATH=/usr/lib/radiance/bin:$PATH
>
>Use these for your .bashrc! I always append the existing RAYPATH when 
>setting a new one, just not to break anything I might have done before. If 
>there is nothing that has been defined before in this variable, there will 
>be no negative impact as the existing (appended) RAYPATH will just be 
>empty.
>
>Now some comments on your settings:
> > export PATH=.:/usr/lib/radiance/bin:${PATH}
>Possible, but not recommended. Including '.' into your path is dangerous as 
>it opens the possibility of executing programs that you do not want. E.g. 
>someone might have somehow managed to put a executeable named "ls" into a 
>directory of yours, containing some malicious code and a call to ls. If you 
>happen to type "ls" in that directory, not the system tool you expected, 
>but the malicious code would run (with your user rights), and as there was 
>a call to the original "ls" in it, you get the output you expect and will 
>not even realize what happened. So I never have '.' in my PATH. And it is 
>never necessary!
>
> > export PATH=.:/usr/share/radiance/lib:${PATH}
>There are no executeable in /usr/share/radiance/lib, this is not 
>reasonable.
>
> > RAYPATH=.:/usr/share/radiance/lib/
> > export RAYPATH
>
>Ok, but before you used tanother convention for the variable, so use the 
>same here. Just one line, not two.
>
>Ah, and thanks to Jelle I just found that I forgot the '.' in the RAYPATH 
>setting that I describe on my webpage ;-)
>
>CU Lars.
>
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general@radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general

_________________________________________________________________
http://local.live.com/?mkt=en-ca/?v=2&cid=A6D6BDB4586E357F!399


From grobe at gmx.net  Fri Apr  6 16:58:21 2007
From: grobe at gmx.net (Lars O. Grobe)
Date: Fri Apr  6 16:58:36 2007
Subject: [Radiance-general] Help:Setting up a radiance system
In-Reply-To: <BAY143-F30460B9940EDC9485ED22AE0640@phx.gbl>
References: <BAY143-F30460B9940EDC9485ED22AE0640@phx.gbl>
Message-ID: <4616600D.7020206@gmx.net>

Hi!

>  I installed radiance through synaptic package manager. However if you
>  are implying that a user defined configs could allow root access,
>  that's an exploit I've never heard of. I will revise my .bashrc to
>  side with caution.

No, it is not about root access. I tried to describe how such a 
configuration can be used to get code executed with your user rights. 
This can still cause trouble. And as it is not necessary at all to have 
./ in a PATH, I added this comment to you posted setting.

>  *.lum *.vf *.norm *.vp etc..

I have to guess as I do not have te possibility to check this right now. 
lum should be luminaires (in in whatever format, open with a text 
editor, might be IES pr radiance), vf is a viewfile, norm is something I 
do not know now, and vp should be viewpoints, most probably for an 
animation.

>  any link to a consise descriptions of these files would be of help
>  because running the *.rif I found in the lib folder generate errors
>  from missing files or includes.

This sound much more like you are still having a problem with the 
environment variables. Can you post te errors you get?

Good luck ;-) Lars.


From smichel_designer at hotmail.com  Fri Apr  6 21:20:29 2007
From: smichel_designer at hotmail.com (steve michel)
Date: Fri Apr  6 21:20:39 2007
Subject: [Radiance-general] Help:Setting up a radiance system
In-Reply-To: <4616600D.7020206@gmx.net>
Message-ID: <BAY143-F35102BF7DF121D549344E0E0640@phx.gbl>

I'm getting  renders from radiance now. The issues are with the way my 
modeller (blender+brad) handles the radiance export and lighting: basicaly 
the output rad files don't include  photometric lights. I want to know how 
to substitute lamp data.

thus far the lamp data is

void spotlight Lamp
0
0
7 1000.0 1000.0 1000.0 45.0 0.867412388325 0.497589915991 4.37113882867e-08
Lamp ring spotlamp
0
0
8 -3.01123523712 -4.18423938751 3.92846775055 0.867412388325 0.497589915991 
4.37113882867e-08 0 0.125

I want to edit that with a native radiance lamp but need to know the 
radiance lighting syntax.


>From: "Lars O. Grobe" <grobe@gmx.net>
>Reply-To: Radiance general discussion 
><radiance-general@radiance-online.org>
>To: Radiance general discussion <radiance-general@radiance-online.org>
>Subject: Re: [Radiance-general] Help:Setting up a radiance system
>Date: Fri, 06 Apr 2007 17:58:21 +0300
>
>Hi!
>
>>  I installed radiance through synaptic package manager. However if you
>>  are implying that a user defined configs could allow root access,
>>  that's an exploit I've never heard of. I will revise my .bashrc to
>>  side with caution.
>
>No, it is not about root access. I tried to describe how such a 
>configuration can be used to get code executed with your user rights. This 
>can still cause trouble. And as it is not necessary at all to have ./ in a 
>PATH, I added this comment to you posted setting.
>
>>  *.lum *.vf *.norm *.vp etc..
>
>I have to guess as I do not have te possibility to check this right now. 
>lum should be luminaires (in in whatever format, open with a text editor, 
>might be IES pr radiance), vf is a viewfile, norm is something I do not 
>know now, and vp should be viewpoints, most probably for an animation.
>
>>  any link to a consise descriptions of these files would be of help
>>  because running the *.rif I found in the lib folder generate errors
>>  from missing files or includes.
>
>This sound much more like you are still having a problem with the 
>environment variables. Can you post te errors you get?
>
>Good luck ;-) Lars.
>
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general@radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general

_________________________________________________________________
Your Space. Your Friends. Your Stories. Share your world with Windows Live 
Spaces. http://spaces.live.com/?mkt=en-ca


From grobe at gmx.net  Fri Apr  6 23:07:17 2007
From: grobe at gmx.net (Lars O. Grobe)
Date: Fri Apr  6 23:07:21 2007
Subject: [Radiance-general] Help:Setting up a radiance system
In-Reply-To: <BAY143-F35102BF7DF121D549344E0E0640@phx.gbl>
References: <BAY143-F35102BF7DF121D549344E0E0640@phx.gbl>
Message-ID: <4616B685.1080700@gmx.net>

Hi Steve,

congratulations, you passed the gate into the wonderful world of our
favourite time- and cpu-cycle consuming application...

The spotlight is a native light, but I guess you want to use a
photometric representation of a real-world light source.

1) Choose a source, and get the distribution from the manufacturer. You
should get a IES-formatted file.

2) Generate a radiance description from that file using ies2rad:

http://radsite.lbl.gov/radiance/man_html/ies2rad.1.html

3) Include that description instead of the spotlights (keep orientation
and position, and use !xform to include the source.

The procedure is described in detail in the tutorial that came with your
Radiance installation. And a great help are the tutorial from
http://luminance.londonmet.ac.uk/learnix/docs.shtml !

Good luck, CU Lars.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3617 bytes
Desc: S/MIME Cryptographic Signature
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20070407/09091e64/smime.bin
From pisuke at blueyonder.co.uk  Sat Apr  7 19:44:52 2007
From: pisuke at blueyonder.co.uk (Francesco Anselmo)
Date: Sat Apr  7 19:45:01 2007
Subject: [Radiance-general] Help:Setting up a radiance system
In-Reply-To: <BAY143-F35102BF7DF121D549344E0E0640@phx.gbl>
References: <BAY143-F35102BF7DF121D549344E0E0640@phx.gbl>
Message-ID: <1175967892.7245.10.camel@leviathan>

Hi Steve

> I'm getting  renders from radiance now. The issues are with the way my 
> modeller (blender+brad) handles the radiance export and lighting: basicaly 
> the output rad files don't include  photometric lights. I want to know how 
> to substitute lamp data.

If you're using blender+brad, you can attach photometries to spotlights
in blender following this procedure:

1) go to the brad/radiance/lum folder
2) create a new directory for your ies file with the same name 
   of your ies file (for instance myies, if your file is named 
   myies.ies)
3) create your radiance photometric description of the ies file:
   ies2rad -t default -m .8 -o myies myies.ies
4) start blender and brad again; this time in the libraries/luminaires
   menu you should find a myies entry
5) hit the "+" button to add the lamp datablock to your blender file
6) add a spotlight, and change its datablock to myies

When you will export your model, you'll notice that a .lum file will
be exported. It will contain a list of !xform commands with the 
locations of luminaires.

You can post your next questions relating to brad to the
brad mailing list:

http://lists.nongnu.org/mailman/listinfo/brad

http://www.bozzograo.net/radiance/modules.php?op=modload&name=News&file=article&sid=2&mode=thread&order=0&thold=0

Ciao,

Francesco





From Martin.Moeck at asu.edu  Wed Apr 11 22:43:38 2007
From: Martin.Moeck at asu.edu (Martin Moeck)
Date: Wed Apr 11 22:47:59 2007
Subject: [Radiance-general] RE: ambient exclude list -ae
References: <BAY143-F35102BF7DF121D549344E0E0640@phx.gbl>
	<1175967892.7245.10.camel@leviathan>
Message-ID: <A4C91D7F128DEB4B954509D5D26FC3C202ED68BA@EX03.asurite.ad.asu.edu>

Hello,

I'd like to exclude a red sky from the indirect calculations, but the -ae switch fails. The scene is listed below. The scene is rendered as follows:

rview ... -ab 1 -ae red (or redsky) octree 

The object sc.oct turns red. This should be avoided. What is the issue here - the material glow?

Thanks

Martin

_______________________________________

void instance sc
1 sc.oct
0 0

void glow red
0 0 4
2 0 0 0

red source redsky
0 0 4
0 0 1 360

void light bright
0 0 3
1000 1000 1000

bright source light1
0 0 4
1 1 1 1


-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 2745 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20070411/e70411dd/attachment.bin
From tbleicher at arcor.de  Thu Apr 12 00:29:38 2007
From: tbleicher at arcor.de (Thomas Bleicher)
Date: Thu Apr 12 00:31:53 2007
Subject: [Radiance-general] RE: ambient exclude list -ae
In-Reply-To: <A4C91D7F128DEB4B954509D5D26FC3C202ED68BA@EX03.asurite.ad.asu.edu>
References: <BAY143-F35102BF7DF121D549344E0E0640@phx.gbl>
	<1175967892.7245.10.camel@leviathan>
	<A4C91D7F128DEB4B954509D5D26FC3C202ED68BA@EX03.asurite.ad.asu.edu>
Message-ID: <411835BE-9B45-428B-8653-00A520D6481A@arcor.de>


On 11 Apr 2007, at 21:43, Martin Moeck wrote:

> Hello,
>
> I'd like to exclude a red sky from the indirect calculations, but  
> the -ae switch fails.

The 'ambient exclude' switch only works on materials that do
participate in the ambient (indirect) calculation. A small
part of my memory says glow materials are never considered
in indirect calculations. So your '-ae' will have no effect
on the glow material.


> The scene is listed below. The scene is rendered as follows:
>
> rview ... -ab 1 -ae red (or redsky) octree
>
> The object sc.oct turns red. This should be avoided. What is the  
> issue here - the material glow?

I'd say so. You have defined a red sky (and ground, btw) and
some sort of directional light. If you render it with only one
bounce all faces that are not in direct view of the light source
_only_ get light from the sky. That's what you can see.

You can try to add a limiting radius to your glow definition
(forth argument). I think a value of 0 means that the glow
has an infinite range (or none at all? - the old doc I have is unclear
about that). If you set it to something small like 0.1 it might
limit its effect. But I don't know how this works when the glow
is applied to a source which has no measurable distance to the scene.

I assume all you want is to render the object on top of a red
background, right? In that case you could try to render the
object _without_ sky which gives you a black background (use
'-av' to avoid black faces on the object). Then use pcomb to
colour all pixels with a value of 0 red. See the 'stencil' thread
of a few weeks ago for an idea how this might work.


Report any success!

Thomas




From Martin.Moeck at asu.edu  Thu Apr 12 01:51:11 2007
From: Martin.Moeck at asu.edu (Martin Moeck)
Date: Thu Apr 12 01:51:39 2007
Subject: [Radiance-general] RE: ambient exclude list -ae
References: <BAY143-F35102BF7DF121D549344E0E0640@phx.gbl><1175967892.7245.10.camel@leviathan><A4C91D7F128DEB4B954509D5D26FC3C202ED68BA@EX03.asurite.ad.asu.edu>
	<411835BE-9B45-428B-8653-00A520D6481A@arcor.de>
Message-ID: <A4C91D7F128DEB4B954509D5D26FC3C202ED68BD@EX03.asurite.ad.asu.edu>


The stencil is a good idea.

Thanks

Martin

-----Original Message-----
From: radiance-general-bounces@radiance-online.org on behalf of Thomas Bleicher
Sent: Wed 4/11/2007 3:29 PM
To: Radiance general discussion
Subject: Re: [Radiance-general] RE: ambient exclude list -ae
 

On 11 Apr 2007, at 21:43, Martin Moeck wrote:

> Hello,
>
> I'd like to exclude a red sky from the indirect calculations, but  
> the -ae switch fails.

The 'ambient exclude' switch only works on materials that do
participate in the ambient (indirect) calculation. A small
part of my memory says glow materials are never considered
in indirect calculations. So your '-ae' will have no effect
on the glow material.


> The scene is listed below. The scene is rendered as follows:
>
> rview ... -ab 1 -ae red (or redsky) octree
>
> The object sc.oct turns red. This should be avoided. What is the  
> issue here - the material glow?

I'd say so. You have defined a red sky (and ground, btw) and
some sort of directional light. If you render it with only one
bounce all faces that are not in direct view of the light source
_only_ get light from the sky. That's what you can see.

You can try to add a limiting radius to your glow definition
(forth argument). I think a value of 0 means that the glow
has an infinite range (or none at all? - the old doc I have is unclear
about that). If you set it to something small like 0.1 it might
limit its effect. But I don't know how this works when the glow
is applied to a source which has no measurable distance to the scene.

I assume all you want is to render the object on top of a red
background, right? In that case you could try to render the
object _without_ sky which gives you a black background (use
'-av' to avoid black faces on the object). Then use pcomb to
colour all pixels with a value of 0 red. See the 'stencil' thread
of a few weeks ago for an idea how this might work.


Report any success!

Thomas




_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 3996 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20070411/cad2ea2c/attachment.bin
From info at iebele.nl  Thu Apr 12 09:08:40 2007
From: info at iebele.nl (iebele)
Date: Thu Apr 12 09:05:49 2007
Subject: [Radiance-general] Ambient exclude transfomed material in
	instances
In-Reply-To: <4613A8D8.4050805@visarc.com>
References: <CC0B19F4C6132F4D9FDDEBF194200FB502CDEDC9@ldcexc02.global.arup.com>	<46112A63.60802@iebele.nl>	<0A962F3E-9A34-47BF-9B37-5CCC55F55805@gmail.com>	<46116EF4.9060604@visarc.com>	<46127520.7090302@iebele.nl>	<3A5269C9-5FB1-4650-AB2E-B053E73C6830@gmail.com>	<46128A7A.20305@visarc.com>	<4613534B.1070105@iebele.nl>
	<4613A8D8.4050805@visarc.com>
Message-ID: <461DDAF8.9000002@iebele.nl>

Hi Jack,

My previous message about the loss of mapping coordinates - sometimes - 
using  Xfrog's obj export was wrong. The reason I jumped into that 
conclusion is related to different (and probably modified) Radiance 
installations on different renderingmachines. As far as I can judge now, 
both obj and 3ds work fine. So there is no need to re-calculate tangent 
vectors, as you suggested.

-Iebele


Jack de Valpine wrote:

> Hi Iebele,
>
> Your welcome. It is fortunate that I have also been starting to work 
> with xfrog trees, so this is pretty fresh in my mind.
>
> My experience with different trees in xfrog is pretty limited. I have 
> experimented with one of the example ones, which is what I used to 
> base the polytrans intermediate translation method on. The other one 
> is from an xfrog tree that came with a pre-exported obj that I 
> purchased on TurboSquid.
>
> I am not sure how familiar you are with Polytrans. It does have some 
> tools for (re)calculating uv tangent vectors. I wonder if this would 
> be worth trying on one of the trees that causes problems.
>
> -Jack
>
> iebele wrote:
>
>> Hi Jack,
>>
>> Wow, that is a nice tutorial you wrote! Thank you so much, it has 
>> been of great help, I now have the trees rendered exactly as they 
>> appear in xfrog.
>>
>> The obj to obj conversion using Polytrans to prepare the files for 
>> feeding them to obj2mesh does not work for all the trees in the Xfrog 
>> libraries. The example files that are shipped with the demo version 
>> of Xfrog go well. But some (at least those I happen to work with) of 
>> the library files do not happily convert to a Radiance mesh using the 
>> obj to obj conversion in Polytrans. The coordinate mapping is lost 
>> somewhere during this proces - some warnings of both Polytrans and 
>> obj2mesh probably relate to that.
>>
>> Exporting to 3DS in Xfrog, and convert that file to OBJ using 
>> Polytrans works fine for obj2mesh, apart from the fact that the whole 
>> model is rotated, which is solved by adding a transform:
>>
>>        void mesh tree
>>        7 tree.rtm   -rx 90 -ry 0 -rz 0
>>        0
>>        0
>>
>> -Iebele
>>
>>
>>
>>
>>
>>> Hi Iebele,
>>>
>>> To use local u,v coordinate mapping (Lu,Lv) you need to use obj2mesh 
>>> rather than obj2rad.
>>>
>>> Here is the process for making a mesh element:
>>>
>>>     Define mats.tree.rad using simple materials first as an example.
>>>     The names of the materials must correspond to the names of the
>>>     materials indicated for the .obj geometry (take a look in the .mtl
>>>     file to get the names).
>>>
>>>         mats.tree.rad:
>>>
>>>             void plastic Bark
>>>             0
>>>             0
>>>             5 1 1 1 0 0
>>>
>>>             void plastic Leaf
>>>             0
>>>             0
>>>             5 1 1 1 0 0
>>>
>>>     Generate tree.rtm as follows:
>>>
>>>         obj2mesh -a mats.tree.rad tree.obj > tree.rtm
>>>
>>>     Creat tree.mesh.rad as follows:
>>>
>>>         tree.mesh.rad:
>>>
>>>             void mesh tree
>>>             1 tree.rtm
>>>             0
>>>             0
>>>
>>>     Test you mesh:
>>>
>>>         objview tree.mesh.rad
>>>
>>> Now lets apply more complex materials using local u,v coordinate 
>>> mapping. To do this you need the following image data:
>>>
>>>        1. bark.pic
>>>        2. aspect ratio for bark.pic (y/x), lets call it <arB>
>>>        3. leaf.pic
>>>        4. aspect ration for leaf.pic (y/x), lets call it <arL>
>>>        5. leaf.matte.pic - this is the alpha/matte channel for the
>>>           leaf. The correct way to setup the matte is  for white to
>>>           represent the leaf and black to represent what is not the
>>>           leaf. This means that you may have to invert the matte the
>>>           comes from xfrog.
>>>
>>>     Now lets create the complex materials in mats.tree.rad
>>>
>>>         mats.tree.rad:
>>>
>>>             #BARK definition
>>>             void colorpict bark.tile
>>>             7 red green blue Bark.pic . frac(Lu) frac(Lv)*<arB>
>>>             0
>>>             0
>>>
>>>             bark.tile plastic Bark
>>>             0
>>>             0
>>>             5 1 1 1 0 0
>>>
>>>             #LEAF definition
>>>             void colorpict leaf.tile
>>>             7 red green blue Bark.pic . frac(Lu) frac(Lv)*<arL>
>>>             0
>>>             0
>>>
>>>             leaf.tile plastic leaf.map
>>>             0
>>>             0
>>>             5 1 1 1 0 0
>>>
>>>             leaf mixpict Leaf
>>>             7 leaf.map void green leaf.matte.pic . frac(Lu) 
>>> frac(Lv)*<arL>
>>>             0
>>>             0
>>>
>>>     Now recompile your mesh:
>>>
>>>         obj2mesh -a mats.tree.rad tree.obj > tree.rtm
>>>
>>>     Now view it:
>>>
>>>         objview tree.mesh.rad
>>>
>>> You should add Bark and Leaf to your ambient exclude file/list if 
>>> you do not want them in the ambient calculation. You can use 
>>> tree.mesh.rad along with replmarks, xform or some other method to 
>>> deploy the tree object in the scene.
>>>
>>> This should work fine. Let me know if you have any questions.
>>>
>>> -Jack
>>>
>>> Gregory J. Ward wrote:
>>>
>>>> Hi Iebele,
>>>>
>>>> I can't be much help on this, as I'm not familiar with the model, 
>>>> but the general idea with local coordinates is that you don't have 
>>>> to do the mapping yourself.  It's supposedly handled by the mesh 
>>>> generation software, and isn't affected by transformations as a 
>>>> global coordinate mapping would be.
>>>>
>>>> I hope this is a helpful clue, as it's about all I have to offer.
>>>> -Greg
>>>>
>>>>> From: iebele <info@iebele.nl>
>>>>> Date: April 3, 2007 8:39:12 AM PDT
>>>>>
>>>>> Thanks Greg an Jack for your excellent and very  helpfull 
>>>>> suggestions.
>>>>>
>>>>> I now have succesfully converted the .obj file to rad, using 
>>>>> obj2rad ( polytrans did indeed work with Xfrog obj-files, but 
>>>>> meshlab did not accept these files Lars ).
>>>>>
>>>>> However I can't get the mapping right. I've tried a lot, but with 
>>>>> no succes. Would you please share with me an example of the 
>>>>> materials you use for the bark and the leaves?
>>>>>
>>>>> I just don't really understand when and how to use Lu and Lv  or 
>>>>> frac(Lu) and frac(Lv) in the colorpict modifier and how these can 
>>>>> ever be placed  in a reasonable way on each triangle in the output 
>>>>> of obj2rad, which in my case is like :
>>>>>
>>>>> leaf_col_leaf2 polygon leaf22836.60976
>>>>> 0
>>>>> 0
>>>>> 9
>>>>>         -0.250204           0.195593             13.838
>>>>>          -1.00383          -0.956752            13.8816
>>>>>          -1.21881           -0.19178            13.5622
>>>>>
>>>>> I never really understood the meaning of texture-coordinates, but 
>>>>> at this time I feel that is what  is  missing here.
>>>>>
>>>>> Is there a difference in using obj2rad and obj2mesh for this 
>>>>> purpose ? I tried both but with the some odd results concerning 
>>>>> the coordinate mapping.
>>>>>
>>>>> -Iebele
>>>>
>>>>
>>>>
>>>> _______________________________________________
>>>> Radiance-general mailing list
>>>> Radiance-general@radiance-online.org
>>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>>>
>>>>
>>>
>>> -- 
>>> # Jack de Valpine
>>> # president
>>> #
>>> # visarc incorporated
>>> # http://www.visarc.com
>>> #
>>> # channeling technology for superior design and construction
>>>  
>>>
>>> ------------------------------------------------------------------------ 
>>>
>>>
>>> _______________________________________________
>>> Radiance-general mailing list
>>> Radiance-general@radiance-online.org
>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>>  
>>>
>>
>>
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general@radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
>



From ap.huangwx at archi.kyoto-u.ac.jp  Fri Apr 13 08:54:38 2007
From: ap.huangwx at archi.kyoto-u.ac.jp (Huangwx@Kyoto Univ.)
Date: Fri Apr 13 08:54:37 2007
Subject: [Radiance-general] About mimic human visual response 
Message-ID: <001e01c77d98$9a8a89e0$1f7af90a@hwx>

Dear friends,

I am new to radiance. I have a some question about mimicking human visual response.

I have read part of the book "Rendering with Radiance", and it said that the mechamism of human eye to 
adapt outside world has not been very well understood. So I wonder if anyone can give me some information 
on the recent development in this area, to what extent it has been understood nowadays? Are there any websites or books I can refer to?

I noticed that now the digital cameras can perform auto white balance, and auto exposure, do they also 
mimic the human eye response? I mean do they compress the dynamic range?

One more question is that I tried to use pcond program, I found that the option of -h and -e could not work together, I mean I can not mimic the human eye response and also adjust the exposure, did I made some mistakes?

Best wishes.

Yours,
Huang





-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20070413/91962616/attachment.htm
From gregoryjward at gmail.com  Fri Apr 13 19:02:47 2007
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Fri Apr 13 19:02:48 2007
Subject: [Radiance-general] About mimic human visual response 
In-Reply-To: <001e01c77d98$9a8a89e0$1f7af90a@hwx>
References: <001e01c77d98$9a8a89e0$1f7af90a@hwx>
Message-ID: <034EAE7A-2B07-4EC8-8B76-FDF55FF01AFB@gmail.com>

Hello Huang,

> From: "Huangwx@Kyoto Univ." <ap.huangwx@archi.kyoto-u.ac.jp>
> Date: April 12, 2007 11:54:38 PM PDT
>
> Dear friends,
>
> I am new to radiance. I have a some question about mimicking human  
> visual response.
>
> I have read part of the book "Rendering with Radiance", and it said  
> that the mechamism of human eye to
> adapt outside world has not been very well understood. So I wonder  
> if anyone can give me some information
> on the recent development in this area, to what extent it has been  
> understood nowadays? Are there any websites or books I can refer to?

There are a number of good papers, and some books as well.  Do a  
search on "color appearance models" and the work of Marc Fairchild at  
RIT, James Ferwerda at Cornell Univ., and Sumanta Pattanaik at UCF.   
Some of this work has appeared at SIGGRAPH, and Pattanaik et al. from  
1998 has a nice introduction to the many considerations of modeling  
human vision.

The pcond algorithm was described in a 1997 paper in IEEE TVCG:

	http://radsite.lbl.gov/radiance/papers/lbnl39882/tonemap.pdf

> I noticed that now the digital cameras can perform auto white  
> balance, and auto exposure, do they also
> mimic the human eye response? I mean do they compress the dynamic  
> range?

No, in fact most cameras increase contrast and color saturation in  
order to give images more "punch."  This is the opposite of dynamic  
range compression.

>  One more question is that I tried to use pcond program, I found  
> that the option of -h and -e could not work together, I mean I can  
> not mimic the human eye response and also adjust the exposure, did  
> I made some mistakes?

The -e option uses a linear exposure setting, which doesn't allow for  
dynamic range compression.  That is why it doesn't work together with  
the -h option.

Hope this helps.
-Greg

From doers003 at umn.edu  Thu Apr 19 21:43:24 2007
From: doers003 at umn.edu (Katja Doerschner)
Date: Thu Apr 19 21:43:31 2007
Subject: [Radiance-general] remove light probe image from background
Message-ID: <34C5022C-61DE-4621-A5FE-FA950DB577A8@umn.edu>

Hello,

(I apologize if this email went out twice ... I forgot to update my  
subscription to my current email...)


I am illuminating a scene with a light probe.
In the resulting rendered image I do not want to have the probe image  
in the background.

Does anyone know if there is a setting in Radiance that would make  
this possible?

Thanks for your help!

Kind Regards,

katja

Katja Doerschner
University of Minnesota
Psychology Department
218 Elliott Hall
75 East River Road
Minneapolis, MN 55455-0344
Phone:+1 612 626-8551



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20070419/824cb055/attachment.htm
From tbleicher at arcor.de  Thu Apr 19 21:49:33 2007
From: tbleicher at arcor.de (Thomas Bleicher)
Date: Thu Apr 19 21:51:57 2007
Subject: [Radiance-general] remove light probe image from background
In-Reply-To: <34C5022C-61DE-4621-A5FE-FA950DB577A8@umn.edu>
References: <34C5022C-61DE-4621-A5FE-FA950DB577A8@umn.edu>
Message-ID: <9BC806BB-42A8-4BFC-A9A6-3BACA3D23709@arcor.de>


On 19 Apr 2007, at 20:43, Katja Doerschner wrote:

> I am illuminating a scene with a light probe.
> In the resulting rendered image I do not want to have the probe  
> image in the background.
>
> Does anyone know if there is a setting in Radiance that would make  
> this possible?

Quick ideas:

You could use the clipping parameters of the view definition
('-va' in particular)  or the recently reported stencil method.


Thomas

From rob.fitzsimmons at Summit.Fiserv.com  Thu Apr 19 21:58:30 2007
From: rob.fitzsimmons at Summit.Fiserv.com (Fitzsimmons, Rob)
Date: Thu Apr 19 21:58:44 2007
Subject: [Radiance-general] remove light probe image from background
Message-ID: <B8DD8375FCE2C94B9F170D9277C1FA2B0C23A0A4@corvallis>

I've done it by creating a duplicate scene (your rif file) and subsititute a
overcast gensky (just something that will make the sky white, change all
your materials to black with no specular. Then render with -ab 0 - to get a
black and white "mask" Render will not take long with no bounces.
I've then converted the mask pic to a standard ldr tiff - use it in
photoshop as a masking layer.
You could also do it with the original hdrs through pcomb - you'd have to
check the manual on that.
 
Rob F

  _____  

From: Katja Doerschner [mailto:doers003@umn.edu] 
Sent: Thursday, April 19, 2007 12:43 PM
To: radiance-general@radiance-online.org
Subject: [Radiance-general] remove light probe image from background


Hello,

(I apologize if this email went out twice ... I forgot to update my
subscription to my current email...)


I am illuminating a scene with a light probe. 
In the resulting rendered image I do not want to have the probe image in the
background. 

Does anyone know if there is a setting in Radiance that would make this
possible?  

Thanks for your help!

Kind Regards,

 

katja

Katja Doerschner
University of Minnesota
Psychology Department
218 Elliott Hall
75 East River Road
Minneapolis, MN 55455-0344
Phone:+1 612 626-8551




-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20070419/a302e74b/attachment.html
From doers003 at umn.edu  Thu Apr 19 22:06:08 2007
From: doers003 at umn.edu (Katja Doerschner)
Date: Thu Apr 19 22:06:15 2007
Subject: [Radiance-general] remove light probe image from background
In-Reply-To: <9BC806BB-42A8-4BFC-A9A6-3BACA3D23709@arcor.de>
References: <34C5022C-61DE-4621-A5FE-FA950DB577A8@umn.edu>
	<9BC806BB-42A8-4BFC-A9A6-3BACA3D23709@arcor.de>
Message-ID: <499A6FFB-376F-4756-9C4F-97A1943CE256@umn.edu>

Thanks Thomas!
- va does the trick.
katja

On Apr 19, 2007, at 2:49 PM, Thomas Bleicher wrote:

>
> You could use the clipping parameters of the view definition
> ('-va' in particular)  or the recently reported stencil method.

Katja Doerschner
University of Minnesota
Psychology Department
218 Elliott Hall
75 East River Road
Minneapolis, MN 55455-0344
Phone:+1 612 626-8551
http://vision.psych.umn.edu/~doerschner


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20070419/0e8fd2b2/attachment-0001.htm
From doers003 at umn.edu  Thu Apr 19 22:14:14 2007
From: doers003 at umn.edu (Katja Doerschner)
Date: Thu Apr 19 22:14:19 2007
Subject: [Radiance-general] remove light probe image from background
In-Reply-To: <B8DD8375FCE2C94B9F170D9277C1FA2B0C23A0A4@corvallis>
References: <B8DD8375FCE2C94B9F170D9277C1FA2B0C23A0A4@corvallis>
Message-ID: <2E27E12E-7B67-42F5-B766-7683535240AA@umn.edu>

Hi Rob,
Thank you for your suggestion.
I tried something like that before, and encountered an interesting  
artifact (well maybe not so interesting).
I have a perfectly specular object illuminated by a light probe. In a  
second image I used the same shape but made the object glow  
(material) and the environment black - This created something like a  
mask. Then I wrote a small program which picks all the non-black  
pixels in the mask and replaces them with the content from the first  
(specular) image.
To my surprise these shapes never matched up perfectly, the mask  
created with the non-specular material was always a few pixels bigger  
than the specular shape, as a result there were always a few  
background pixels selected. I tried other materials in combination  
with different lights(ambient etc) - always encountering the same  
problem.

katja

On Apr 19, 2007, at 2:58 PM, Fitzsimmons, Rob wrote:

> I've done it by creating a duplicate scene (your rif file) and  
> subsititute a overcast gensky (just something that will make the  
> sky white, change all your materials to black with no specular.  
> Then render with -ab 0 - to get a black and white "mask" Render  
> will not take long with no bounces.
> I've then converted the mask pic to a standard ldr tiff - use it in  
> photoshop as a masking layer.
> You could also do it with the original hdrs through pcomb - you'd  
> have to check the manual on that.
>
> Rob F
>
> From: Katja Doerschner [mailto:doers003@umn.edu]
> Sent: Thursday, April 19, 2007 12:43 PM
> To: radiance-general@radiance-online.org
> Subject: [Radiance-general] remove light probe image from background
>
> Hello,
>
> (I apologize if this email went out twice ... I forgot to update my  
> subscription to my current email...)
>
>
> I am illuminating a scene with a light probe.
> In the resulting rendered image I do not want to have the probe  
> image in the background.
>
> Does anyone know if there is a setting in Radiance that would make  
> this possible?
>
> Thanks for your help!
>
> Kind Regards,
>
> katja
>
> Katja Doerschner
> University of Minnesota
> Psychology Department
> 218 Elliott Hall
> 75 East River Road
> Minneapolis, MN 55455-0344
> Phone:+1 612 626-8551
>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general

Katja Doerschner
University of Minnesota
Psychology Department
218 Elliott Hall
75 East River Road
Minneapolis, MN 55455-0344
Phone:+1 612 626-8551
http://vision.psych.umn.edu/~doerschner


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20070419/937c95f8/attachment.html
From roland.fleming at tuebingen.mpg.de  Fri Apr 20 09:37:27 2007
From: roland.fleming at tuebingen.mpg.de (Roland William Fleming)
Date: Fri Apr 20 09:26:50 2007
Subject: [Radiance-general] remove light probe image from background
In-Reply-To: <2E27E12E-7B67-42F5-B766-7683535240AA@umn.edu>
References: <B8DD8375FCE2C94B9F170D9277C1FA2B0C23A0A4@corvallis>
	<2E27E12E-7B67-42F5-B766-7683535240AA@umn.edu>
Message-ID: <0e92d5fb4642ea13d95bcc3e244a34b3@tuebingen.mpg.de>


Hi Katja ---

This is very strange.  I have done exactly what you describe countless 
times and never seen artifacts.  How many pixels error do you see?  Do 
you oversample the alpha mask to get anti-aliased edges?  I use the 
small rim of fractional values in the  downsampled alpha matte to 
crossfade between the rendering image and the mask, which always gives 
pixel-perfect cropping....

-- Roland




On Apr 19, 2007, at 10:14 PM, Katja Doerschner wrote:

> Hi Rob,
> Thank you for your suggestion.
> I tried something like that before, and encountered an interesting 
> artifact (well maybe not so interesting).
> I have a perfectly specular object illuminated by a light probe. In a 
> second image I used the same shape but made the object glow (material) 
> and the environment black - This created something like a mask. Then I 
> wrote a small program which picks all the non-black pixels in the mask 
> and replaces them with the content from the first (specular) image.
> To my surprise these shapes never matched up perfectly, the mask 
> created with the non-specular material was always a few pixels bigger 
> than the specular shape, as a result there were always a few 
> background pixels selected. I tried other materials in combination 
> with different lights(ambient etc) - always encountering the same 
> problem.?
>
> katja
>
> On Apr 19, 2007, at 2:58 PM, Fitzsimmons, Rob wrote:
>
>> I've done it by creating a duplicate scene (your rif file) and 
>> subsititute a overcast gensky (just something that will make the sky 
>> white, change all your materials to black with no specular. Then 
>> render with -ab 0 - to get a black and white "mask" Render will not 
>> take long with no bounces.
>> I've then converted the mask pic to a standard ldr tiff - use it in 
>> photoshop as a masking layer.
>> You could also do it with the original hdrs through pcomb - you'd 
>> have to check the manual on that.
>> ?
>> Rob F
>>
>> From: Katja Doerschner [mailto:doers003@umn.edu]
>> Sent: Thursday, April 19, 2007 12:43 PM
>> To: radiance-general@radiance-online.org
>> Subject: [Radiance-general] remove light probe image from background
>>
>> Hello,
>>
>> (I apologize if this email went out twice ... I forgot to update my 
>> subscription to my current email...)
>>
>>
>> I am illuminating a scene with a light probe.
>> In the resulting rendered image I do not want to have the probe image 
>> in the background.
>>
>> Does anyone know if there is a setting in Radiance that would make 
>> this possible?
>>
>> Thanks for your help!
>>
>> Kind Regards,
>> ?
>> katja
>>
>>
>> Katja Doerschner
>> University of Minnesota
>> Psychology Department
>> 218 Elliott Hall
>> 75 East River Road
>> Minneapolis, MN 55455-0344
>> Phone:+1 612 626-8551
>>
>>
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general@radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
> Katja Doerschner
> University of Minnesota
> Psychology Department
> 218 Elliott Hall
> 75 East River Road
> Minneapolis, MN?55455-0344
> Phone:+1 612 626-8551
> http://vision.psych.umn.edu/~doerschner
>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: text/enriched
Size: 5359 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20070420/f262738e/attachment-0001.bin
From doers003 at umn.edu  Fri Apr 20 14:39:29 2007
From: doers003 at umn.edu (Katja Doerschner)
Date: Fri Apr 20 14:41:08 2007
Subject: [Radiance-general] remove light probe image from background
In-Reply-To: <0e92d5fb4642ea13d95bcc3e244a34b3@tuebingen.mpg.de>
References: <B8DD8375FCE2C94B9F170D9277C1FA2B0C23A0A4@corvallis>
	<2E27E12E-7B67-42F5-B766-7683535240AA@umn.edu>
	<0e92d5fb4642ea13d95bcc3e244a34b3@tuebingen.mpg.de>
Message-ID: <4628B481.7030808@umn.edu>

Hi Roland,
Thanks for your response!
The error is about 2-3 pixels (maybe less) all around the object. I do 
oversample, but I first combine the oversampled images (since I assumed 
the shapes would be more or less identical) and then downsample the 
result - this is the opposite order of  your approach. Just to check, I  
shall  try it  your way + crossfading.

I am quite sure I didn't  make a mistake somewhere along the image+masks 
generation & combination pipeline, but given that you never encountered 
this  artifact before makes me doubt that now ...

Viele Gruesse,
katja

Roland William Fleming wrote:
>
>
> Hi Katja ---
>
> This is very strange. I have done exactly what you describe countless 
> times and never seen artifacts. How many pixels error do you see? Do 
> you oversample the alpha mask to get anti-aliased edges? I use the 
> small rim of fractional values in the downsampled alpha matte to 
> crossfade between the rendering image and the mask, which always gives 
> pixel-perfect cropping....
>
> -- Roland
>
>
>
>
> On Apr 19, 2007, at 10:14 PM, Katja Doerschner wrote:
>
>     Hi Rob,
>     Thank you for your suggestion.
>     I tried something like that before, and encountered an interesting
>     artifact (well maybe not so interesting).
>     I have a perfectly specular object illuminated by a light probe.
>     In a second image I used the same shape but made the object glow
>     (material) and the environment black - This created something like
>     a mask. Then I wrote a small program which picks all the non-black
>     pixels in the mask and replaces them with the content from the
>     first (specular) image.
>     To my surprise these shapes never matched up perfectly, the mask
>     created with the non-specular material was always a few pixels
>     bigger than the specular shape, as a result there were always a
>     few background pixels selected. I tried other materials in
>     combination with different lights(ambient etc) - always
>     encountering the same problem. 
>
>     katja
>
>     On Apr 19, 2007, at 2:58 PM, Fitzsimmons, Rob wrote:
>
>         I've done it by creating a duplicate scene (your rif file) and
>         subsititute a overcast gensky (just something that will make
>         the sky white, change all your materials to black with no
>         specular. Then render with -ab 0 - to get a black and white
>         "mask" Render will not take long with no bounces.
>         I've then converted the mask pic to a standard ldr tiff - use
>         it in photoshop as a masking layer.
>         You could also do it with the original hdrs through pcomb -
>         you'd have to check the manual on that.
>          
>         Rob F
>
>         *From:* Katja Doerschner [mailto:doers003@umn.edu]
>         *Sent:* Thursday, April 19, 2007 12:43 PM
>         *To:* radiance-general@radiance-online.org
>         *Subject:* [Radiance-general] remove light probe image from
>         background
>
>         Hello,
>
>         (I apologize if this email went out twice ... I forgot to
>         update my subscription to my current email...)
>
>
>         I am illuminating a scene with a light probe.
>         In the resulting rendered image I do not want to have the
>         probe image in the background.
>
>         Does anyone know if there is a setting in Radiance that would
>         make this possible?
>
>         Thanks for your help!
>
>         Kind Regards,
>          
>         katja
>
>
>         Katja Doerschner
>         University of Minnesota
>         Psychology Department
>         218 Elliott Hall
>         75 East River Road
>         Minneapolis, MN 55455-0344
>         Phone:+1 612 626-8551
>
>
>
>         _______________________________________________
>         Radiance-general mailing list
>         Radiance-general@radiance-online.org
>         http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
>     Katja Doerschner
>     University of Minnesota
>     Psychology Department
>     218 Elliott Hall
>     75 East River Road
>     Minneapolis, MN 55455-0344
>     Phone:+1 612 626-8551
>     http://vision.psych.umn.edu/~doerschner
>
>
>
>     _______________________________________________
>     Radiance-general mailing list
>     Radiance-general@radiance-online.org
>     http://www.radiance-online.org/mailman/listinfo/radiance-general
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>   


From roland.fleming at tuebingen.mpg.de  Fri Apr 20 16:10:50 2007
From: roland.fleming at tuebingen.mpg.de (Roland William Fleming)
Date: Fri Apr 20 16:00:06 2007
Subject: [Radiance-general] remove light probe image from background
In-Reply-To: <4628B481.7030808@umn.edu>
References: <B8DD8375FCE2C94B9F170D9277C1FA2B0C23A0A4@corvallis>
	<2E27E12E-7B67-42F5-B766-7683535240AA@umn.edu>
	<0e92d5fb4642ea13d95bcc3e244a34b3@tuebingen.mpg.de>
	<4628B481.7030808@umn.edu>
Message-ID: <31713e789f9034dac071501328ee8852@tuebingen.mpg.de>


Well, for most purposes setting the clipping volume is a fine  
alternative, so it probably isn't worth worrying about this too much  
more.  But I still don't understand how it could be happening.  Do you  
manually specify the rays yourself and render the image with rtrace?

weird ...

-- Roland


On Apr 20, 2007, at 2:39 PM, Katja Doerschner wrote:

> Hi Roland,
> Thanks for your response!
> The error is about 2-3 pixels (maybe less) all around the object. I do  
> oversample, but I first combine the oversampled images (since I  
> assumed the shapes would be more or less identical) and then  
> downsample the result - this is the opposite order of  your approach.  
> Just to check, I  shall  try it  your way + crossfading.
>
> I am quite sure I didn't  make a mistake somewhere along the  
> image+masks generation & combination pipeline, but given that you  
> never encountered this  artifact before makes me doubt that now ...
>
> Viele Gruesse,
> katja
>
> Roland William Fleming wrote:
>>
>>
>> Hi Katja ---
>>
>> This is very strange. I have done exactly what you describe countless  
>> times and never seen artifacts. How many pixels error do you see? Do  
>> you oversample the alpha mask to get anti-aliased edges? I use the  
>> small rim of fractional values in the downsampled alpha matte to  
>> crossfade between the rendering image and the mask, which always  
>> gives pixel-perfect cropping....
>>
>> -- Roland
>>
>>
>>
>>
>> On Apr 19, 2007, at 10:14 PM, Katja Doerschner wrote:
>>
>>     Hi Rob,
>>     Thank you for your suggestion.
>>     I tried something like that before, and encountered an interesting
>>     artifact (well maybe not so interesting).
>>     I have a perfectly specular object illuminated by a light probe.
>>     In a second image I used the same shape but made the object glow
>>     (material) and the environment black - This created something like
>>     a mask. Then I wrote a small program which picks all the non-black
>>     pixels in the mask and replaces them with the content from the
>>     first (specular) image.
>>     To my surprise these shapes never matched up perfectly, the mask
>>     created with the non-specular material was always a few pixels
>>     bigger than the specular shape, as a result there were always a
>>     few background pixels selected. I tried other materials in
>>     combination with different lights(ambient etc) - always
>>     encountering the same problem.
>>     katja
>>
>>     On Apr 19, 2007, at 2:58 PM, Fitzsimmons, Rob wrote:
>>
>>         I've done it by creating a duplicate scene (your rif file) and
>>         subsititute a overcast gensky (just something that will make
>>         the sky white, change all your materials to black with no
>>         specular. Then render with -ab 0 - to get a black and white
>>         "mask" Render will not take long with no bounces.
>>         I've then converted the mask pic to a standard ldr tiff - use
>>         it in photoshop as a masking layer.
>>         You could also do it with the original hdrs through pcomb -
>>         you'd have to check the manual on that.
>>                  Rob F
>>
>>         *From:* Katja Doerschner [mailto:doers003@umn.edu]
>>         *Sent:* Thursday, April 19, 2007 12:43 PM
>>         *To:* radiance-general@radiance-online.org
>>         *Subject:* [Radiance-general] remove light probe image from
>>         background
>>
>>         Hello,
>>
>>         (I apologize if this email went out twice ... I forgot to
>>         update my subscription to my current email...)
>>
>>
>>         I am illuminating a scene with a light probe.
>>         In the resulting rendered image I do not want to have the
>>         probe image in the background.
>>
>>         Does anyone know if there is a setting in Radiance that would
>>         make this possible?
>>
>>         Thanks for your help!
>>
>>         Kind Regards,
>>                  katja
>>
>>
>>         Katja Doerschner
>>         University of Minnesota
>>         Psychology Department
>>         218 Elliott Hall
>>         75 East River Road
>>         Minneapolis, MN 55455-0344
>>         Phone:+1 612 626-8551
>>
>>
>>
>>         _______________________________________________
>>         Radiance-general mailing list
>>         Radiance-general@radiance-online.org
>>          
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
>>     Katja Doerschner
>>     University of Minnesota
>>     Psychology Department
>>     218 Elliott Hall
>>     75 East River Road
>>     Minneapolis, MN 55455-0344
>>     Phone:+1 612 626-8551
>>     http://vision.psych.umn.edu/~doerschner
>>
>>
>>
>>     _______________________________________________
>>     Radiance-general mailing list
>>     Radiance-general@radiance-online.org
>>     http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>> ---------------------------------------------------------------------- 
>> --
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general@radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>


From istvan43 at hotmail.com  Fri Apr 20 20:14:38 2007
From: istvan43 at hotmail.com (FrankBob Holly)
Date: Fri Apr 20 20:14:43 2007
Subject: [Radiance-general] Specifying surface properties from BTDF data
Message-ID: <BAY108-F3795B59FBCAC07552A4109DF560@phx.gbl>

I'm pretty new to Radiance, so please bear with me ;)

I have a commercial forward ray tracing program that I use to model complex 
window glazings. I can output the transmitted flux vs outgoing direction for 
light incident at different angles.

How would I create a surface in Radiance which would behave in the same way 
as observed using the forward ray tracer. BRTDfunc? Can I specify arbitrary 
output distributions for a comprehensive sampling of all incoming 
directions? Is there a "BRTDdata" surface type?

Any ideas? Other things I should be aware of?

Thanks

Frank

_________________________________________________________________
Check Out Our List Of Trendy Restaurants. You'll Eat It Up! 
http://local.live.com/?mkt=en-ca/?v=2&cid=A6D6BDB4586E357F!378


From gregoryjward at gmail.com  Fri Apr 20 23:57:53 2007
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Fri Apr 20 23:58:00 2007
Subject: [Radiance-general] Specifying surface properties from BTDF data
In-Reply-To: <BAY108-F3795B59FBCAC07552A4109DF560@phx.gbl>
References: <BAY108-F3795B59FBCAC07552A4109DF560@phx.gbl>
Message-ID: <88A47465-8669-4508-B8E6-CBFC9F8B6768@gmail.com>

Hi Frank,

The transdata function will allow you to specify an arbitrary BRDF on  
a surface, but it won't necessarily do what you want unless you use  
the photon-mapping add-on by Roland Schregle.  I plan to work on a  
module that will create "window sources" similar to mkillum given  
measured BTDF data, but this won't be ready for some months.

I realize this isn't much help, but I'm afraid the options are  
currently somewhat limited.

-Greg

> From: "FrankBob Holly" <istvan43@hotmail.com>
> Date: April 20, 2007 11:14:38 AM PDT
>
> I'm pretty new to Radiance, so please bear with me ;)
>
> I have a commercial forward ray tracing program that I use to model  
> complex window glazings. I can output the transmitted flux vs  
> outgoing direction for light incident at different angles.
>
> How would I create a surface in Radiance which would behave in the  
> same way as observed using the forward ray tracer. BRTDfunc? Can I  
> specify arbitrary output distributions for a comprehensive sampling  
> of all incoming directions? Is there a "BRTDdata" surface type?
>
> Any ideas? Other things I should be aware of?
>
> Thanks
>
> Frank

From istvan43 at hotmail.com  Wed Apr 25 15:05:07 2007
From: istvan43 at hotmail.com (Frank Holly)
Date: Wed Apr 25 15:05:17 2007
Subject: [Radiance-general] Specifying surface properties from BTDF data
In-Reply-To: <88A47465-8669-4508-B8E6-CBFC9F8B6768@gmail.com>
Message-ID: <BAY108-F16CCFD60CA073A8E759446DF490@phx.gbl>


Hi Greg, Thanks for the reply.

I found the Photon Map Manual here http://www.cb-d.de/rz/pmap.pdf and it 
says on page 5 that transdata is not a supported type of material "due to 
the high sampling overhead in conjunction with the photon map. A wavelet 
representation is being developed for these. (But don't hold your 
breath...)"

Is there any other possible solution?

Frank

>From: "Gregory J. Ward" <gregoryjward@gmail.com>
>Reply-To: Radiance general discussion 
><radiance-general@radiance-online.org>
>To: Radiance general discussion <radiance-general@radiance-online.org>
>Subject: Re: [Radiance-general] Specifying surface properties from BTDF 
>data
>Date: Fri, 20 Apr 2007 14:57:53 -0700
>
>Hi Frank,
>
>The transdata function will allow you to specify an arbitrary BRDF on  a 
>surface, but it won't necessarily do what you want unless you use  the 
>photon-mapping add-on by Roland Schregle.  I plan to work on a  module that 
>will create "window sources" similar to mkillum given  measured BTDF data, 
>but this won't be ready for some months.
>
>I realize this isn't much help, but I'm afraid the options are  currently 
>somewhat limited.
>
>-Greg
>
>>From: "FrankBob Holly" <istvan43@hotmail.com>
>>Date: April 20, 2007 11:14:38 AM PDT
>>
>>I'm pretty new to Radiance, so please bear with me ;)
>>
>>I have a commercial forward ray tracing program that I use to model  
>>complex window glazings. I can output the transmitted flux vs  outgoing 
>>direction for light incident at different angles.
>>
>>How would I create a surface in Radiance which would behave in the  same 
>>way as observed using the forward ray tracer. BRTDfunc? Can I  specify 
>>arbitrary output distributions for a comprehensive sampling  of all 
>>incoming directions? Is there a "BRTDdata" surface type?
>>
>>Any ideas? Other things I should be aware of?
>>
>>Thanks
>>
>>Frank
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general@radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general

_________________________________________________________________
Add the Windows Live Messenger NHL Stats Agent to your buddy list and get 
your stats fix instantly http://sports.sympatico.msn.ca/NHL/NHL_Stats_Agent


From smichel_designer at hotmail.com  Wed Apr 25 19:49:17 2007
From: smichel_designer at hotmail.com (steve michel)
Date: Wed Apr 25 19:49:28 2007
Subject: [Radiance-general]ies photometry+geometry?
In-Reply-To: <BAY108-F16CCFD60CA073A8E759446DF490@phx.gbl>
Message-ID: <BAY143-F14062B70C315C4E202F298E0490@phx.gbl>

An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20070425/73eb4fda/attachment.html
From rpg at rumblestrip.org  Wed Apr 25 21:03:30 2007
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Wed Apr 25 21:04:32 2007
Subject: [Radiance-general]ies photometry+geometry?
In-Reply-To: <BAY143-F14062B70C315C4E202F298E0490@phx.gbl>
References: <BAY143-F14062B70C315C4E202F298E0490@phx.gbl>
Message-ID: <462FA602.8030703@rumblestrip.org>

steve michel wrote:
> I am trying to include in a scene file, lamp fixture photometry with a 
> object geometry (dxf model supplied by the manufacturer for that same 
> fixture. Is there a straighforward way  of combining both such that 
> the fixture model doesn't compromise the photometry??
>  
You need to use a procedure where you wrap your geometry with an illum 
sphere or box and you apply the luminous distribution to that illum 
enclosure. Then you also have to generally create some glow polygons 
within the fixture geometry to make the geometry appear correct (the 
glow will not be evaluated beyond the illum boundary so you won't affect 
the distribution of the fixture on the scene).  I would say it's not 
straightforward, but the procedure is outlined in Charles Ehrlich's 
chapter of Rendering with Radiance. The process is very much streamlined 
when you use Georg Mischler's Rayfront interface.  Personally, I am 
usually interested in the calculation result from electric light 
sources, so I tend to just use the simple geometry that ies2rad creates 
for me.  But the visual result of going the distance and actually 
setting up the whole illum enclosure can be fantastic.  I have very 
limited experience with this, but I hope others will chime in here with 
some tips.

- Rob Guglielmetti

From MdelaFuente at wmtao.com  Thu Apr 26 15:28:52 2007
From: MdelaFuente at wmtao.com (Mark de la Fuente)
Date: Thu Apr 26 15:31:11 2007
Subject: [Radiance-general] Re: Radiance-general Digest, Vol 38, Issue 14
In-Reply-To: <65230364.210@wmtao.com>
References: <65230364.210@wmtao.com>
Message-ID: <463062C3.B450.0049.0@wmtao.com>

Steve,
 
Rob is pointing you in the right direction.  But be careful when you wrap the fixture in an illum box as the light output may be quite right.  It's been a while since I've had to do this, but I recall having issues with "flatcorr" and "lboxcorr" in my brightdata definitions (created by IES2RAD).  I'm not sure where these are documented, but I'm sure other functions are used for spheres and rings.  I believe the sphere option is the easiest to work out, but only works if you can wrap your fixture in the illum sphere and the sphere does not bisect geometry.  In my case I've had to work out linear fluorescent pendants which have required a box.
 
Mark
 
------------------------------

Message: 3
Date: Wed, 25 Apr 2007 13:03:30 -0600
From: Rob Guglielmetti <rpg@rumblestrip.org>
Subject: Re: [Radiance-general]ies photometry+geometry?
To: Radiance general discussion <radiance-general@radiance-online.org>
Message-ID: <462FA602.8030703@rumblestrip.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

steve michel wrote:
> I am trying to include in a scene file, lamp fixture photometry with a 
> object geometry (dxf model supplied by the manufacturer for that same 
> fixture. Is there a straighforward way  of combining both such that 
> the fixture model doesn't compromise the photometry??
>  
You need to use a procedure where you wrap your geometry with an illum 
sphere or box and you apply the luminous distribution to that illum 
enclosure. Then you also have to generally create some glow polygons 
within the fixture geometry to make the geometry appear correct (the 
glow will not be evaluated beyond the illum boundary so you won't affect 
the distribution of the fixture on the scene).  I would say it's not 
straightforward, but the procedure is outlined in Charles Ehrlich's 
chapter of Rendering with Radiance. The process is very much streamlined 
when you use Georg Mischler's Rayfront interface.  Personally, I am 
usually interested in the calculation result from electric light 
sources, so I tend to just use the simple geometry that ies2rad creates 
for me.  But the visual result of going the distance and actually 
setting up the whole illum enclosure can be fantastic.  I have very 
limited experience with this, but I hope others will chime in here with 
some tips.

- Rob Guglielmetti




-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20070426/c876ab96/attachment.htm
From rpg at rumblestrip.org  Thu Apr 26 17:31:02 2007
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Thu Apr 26 17:32:29 2007
Subject: [Radiance-general] Re: Radiance-general Digest, Vol 38, Issue 14
In-Reply-To: <463062C3.B450.0049.0@wmtao.com>
References: <65230364.210@wmtao.com> <463062C3.B450.0049.0@wmtao.com>
Message-ID: <4630C5B6.1010408@rumblestrip.org>

Mark de la Fuente wrote:
> Steve,
>  
> Rob is pointing you in the right direction.  But be careful when you 
> wrap the fixture in an illum box as the light output may be quite 
> right.  It's been a while since I've had to do this, but I recall 
> having issues with "flatcorr" and "lboxcorr" in my brightdata 
> definitions (created by IES2RAD).  I'm not sure where these are 
> documented, but I'm sure other functions are used for spheres and 
> rings.  I believe the sphere option is the easiest to work out, but 
> only works if you can wrap your fixture in the illum sphere and the 
> sphere does not bisect geometry.  In my case I've had to work out 
> linear fluorescent pendants which have required a box.
Yeah, like I said, it's far from straightforward.  =8-)  Mark is right, 
the sphere is easiest, but since the illum enclosure must completely 
contain the luminaire geometry, it's not the best choice for a long 
skinny thing like a fluorescent strip.  The sphere ends up so big you 
introduce inaccuracies.  So those cal files lboxcorr and flatcorr take 
the ies2rad .dat output -- which is essentially a point distribution -- 
and wraps it around more apporpriate geometry: a box in the case of 
lboxcorr, (for a linear pendant fixture) and a flat rectangular polygon 
in the case of flatcorr (for say a recessed fixture where the luminous 
aperture is a single plane).

- Rob Guglielmetti

From smichel_designer at hotmail.com  Fri Apr 27 01:46:11 2007
From: smichel_designer at hotmail.com (steve michel)
Date: Fri Apr 27 01:46:23 2007
Subject: [Radiance-general] Re: Radiance-general Digest, Vol 38, Issue 14
In-Reply-To: <4630C5B6.1010408@rumblestrip.org>
Message-ID: <BAY143-F37E8C747DE218EDB2CB059E0480@phx.gbl>


A linear fixture is exactly what I had in mind. For a while I even searched 
for 'bare bulb' photometry files from big lamp manufacturers (GE or Philips) 
but none exist for fluor tubes (only par and mr16 spots). But is the illum 
distribution method another one or a subset of using flatcorr and lboxcorr 
techniques you describe??

>From: Rob Guglielmetti <rpg@rumblestrip.org>
>Reply-To: rpg@rumblestrip.org,Radiance general discussion 
><radiance-general@radiance-online.org>
>To: Radiance general discussion <radiance-general@radiance-online.org>
>Subject: Re: [Radiance-general] Re: Radiance-general Digest, Vol 38, Issue 
>14
>Date: Thu, 26 Apr 2007 09:31:02 -0600
>
>Mark de la Fuente wrote:
>>Steve,
>>  Rob is pointing you in the right direction.  But be careful when you 
>>wrap the fixture in an illum box as the light output may be quite right.  
>>It's been a while since I've had to do this, but I recall having issues 
>>with "flatcorr" and "lboxcorr" in my brightdata definitions (created by 
>>IES2RAD).  I'm not sure where these are documented, but I'm sure other 
>>functions are used for spheres and rings.  I believe the sphere option is 
>>the easiest to work out, but only works if you can wrap your fixture in 
>>the illum sphere and the sphere does not bisect geometry.  In my case I've 
>>had to work out linear fluorescent pendants which have required a box.
>Yeah, like I said, it's far from straightforward.  =8-)  Mark is right, the 
>sphere is easiest, but since the illum enclosure must completely contain 
>the luminaire geometry, it's not the best choice for a long skinny thing 
>like a fluorescent strip.  The sphere ends up so big you introduce 
>inaccuracies.  So those cal files lboxcorr and flatcorr take the ies2rad 
>.dat output -- which is essentially a point distribution -- and wraps it 
>around more apporpriate geometry: a box in the case of lboxcorr, (for a 
>linear pendant fixture) and a flat rectangular polygon in the case of 
>flatcorr (for say a recessed fixture where the luminous aperture is a 
>single plane).
>
>- Rob Guglielmetti
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general@radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general

_________________________________________________________________
Dont waste time standing in linetry shopping online. Visit Sympatico / MSN 
Shopping today! http://shopping.sympatico.msn.ca


From rpg at rumblestrip.org  Fri Apr 27 02:21:11 2007
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Fri Apr 27 02:22:47 2007
Subject: [Radiance-general] Re: Radiance-general Digest, Vol 38, Issue 14
In-Reply-To: <BAY143-F37E8C747DE218EDB2CB059E0480@phx.gbl>
References: <BAY143-F37E8C747DE218EDB2CB059E0480@phx.gbl>
Message-ID: <463141F7.7090406@rumblestrip.org>

steve michel wrote:
> A linear fixture is exactly what I had in mind. For a while I even 
> searched for 'bare bulb' photometry files from big lamp manufacturers 
> (GE or Philips) but none exist for fluor tubes (only par and mr16 
> spots). But is the illum distribution method another one or a subset 
> of using flatcorr and lboxcorr techniques you describe??

No photometric files exist for bare fluorescent tubes probably because 
you can't really test that condition, nor would anyone want to spend the 
money to do so.  A fluorescent tube will always be in a fixture, even if 
it's a simple striplight -- a simple ballast housing and two 
lampholders.  And that striplight housing will block part of the lamp, 
thereby altering the distribution, and THAT is what you would want to 
photometer.  There are photometric files for simple fluorescent 
striplights, I believe people like H.E. Williams have them.  The reason 
there are photometric files for PARs -- a seemingly plain bare lamp 
similar to the fluorescent lamp example -- is that those lamps have a 
reflector and that reflector's effect IS worth evaluating.  PARs are in 
essence a "fixture", since they contain a light emitting filament as 
well as an optical device to take that light and do something with it.  
Photometric files are all about describing what a fixture does with 
those lumens the lamp starts out with.

Anyway, the flatcorr and lboxcorr techniques are really enhancements to 
the "illum distribution method" we've been discussing, and all of this 
is a more complex but elegant way of describing the luminous output of a 
given photometric file.  Think of a photometric file as a description of 
the fixture performance at a single point, because that's what it is.  
This works great for a 5" round aperture recessed downlight; stick that 
description on a disc-shaped piece of geometry, slap it on your ceiling 
and render away.  But when your photometric file is describing the 
luminous performance of a linear fixture, you need to spread this out 
along the lamp length. This is what the -ds option to rpict does, as we 
discussed earlier.  Yes, it's a hack, yes, it's less than perfect, and 
yes, many smart people have offered alternate ways to photometer 
fixtures to improve on this, but implementation and adoption of a 
standard for that is not on the horizon, as far as I know. 

So, we take our point "distribution description" and array it along a 
polygon, at a frequency determined by the -ds option.  This works, until 
you have a three dimensional fixture model, or even a large flat fixture 
that is close to other geometry.  Then you must stretch and pull that 
point description into a box shape, and apply it to an illum material.  
Illum is a magical material (I know Greg is cringing hearing anything in 
Radiance described as 'magic'; trust me, it's still physically-based!) 
that can emit light but becomes invisible when you look directly at it.  
So the idea is to create this "imposter geometry" that acts as the 
light-emitting boundary and origin for the fixture.  Within the box you 
have 3D geometry that represents the physical appearance of the fixture, 
but the impostor box is doing all the lighting.  So flatcorr and 
lboxcorr are just little helper files that take that point "distribution 
description" and do all the stretching and pulling.  If the ies file was 
for a table lamp, you might be able to use a simple sphere to do the 
same thing (you'd describe a sphere whose radius is larger than the 
lampshade, which in this case is the thing doing the emitting, in the 
physical world). 

Are we having fun yet?  Well, that's the general idea of what these do.  
This is not an alternate description of the distribution!  It's a way of 
taking the distribution (again, described as a point) and mapping it to 
a 3D form.  For raw quantitative analysis, it's unnecessary.  But if you 
want 3D fixtures in your renderings, it's a process you'll need to 
understand.  The juicy bits of the technique start on page 320 in 
Rendering with Radiance.

- Rob Guglielmetti



From gregoryjward at gmail.com  Fri Apr 27 02:29:27 2007
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Fri Apr 27 03:12:59 2007
Subject: [Radiance-general] Specifying surface properties from BTDF data
In-Reply-To: <BAY108-F16CCFD60CA073A8E759446DF490@phx.gbl>
References: <BAY108-F16CCFD60CA073A8E759446DF490@phx.gbl>
Message-ID: <D6E86E34-AD74-4A78-9E09-1C6C16B5E0F3@gmail.com>

Hi Frank,

I'm out of ideas for other workarounds.  You may just have to wait  
until I get this new facility working.  I wouldn't be developing it  
if there was something else that could work.  Since they recently  
added BRTF/BRDF data exporting to LBNL's Window 3, they're hiring me  
to support it in Radiance.

Best not to count on this before Fall, though I'd like to get it done  
sooner than that -- Summer if I can manage it.

-Greg

> From: "Frank Holly" <istvan43@hotmail.com>
> Date: April 25, 2007 6:05:07 AM PDT
>
> Hi Greg, Thanks for the reply.
>
> I found the Photon Map Manual here http://www.cb-d.de/rz/pmap.pdf  
> and it says on page 5 that transdata is not a supported type of  
> material "due to the high sampling overhead in conjunction with the  
> photon map. A wavelet representation is being developed for these.  
> (But don't hold your breath...)"
>
> Is there any other possible solution?
>
> Frank

From tbleicher at arcor.de  Sat Apr 28 12:39:43 2007
From: tbleicher at arcor.de (Thomas Bleicher)
Date: Sat Apr 28 18:27:19 2007
Subject: [Radiance-general] Re: ies photometry+geometry
In-Reply-To: <463141F7.7090406@rumblestrip.org>
References: <BAY143-F37E8C747DE218EDB2CB059E0480@phx.gbl>
	<463141F7.7090406@rumblestrip.org>
Message-ID: <F1FD9106-5772-41E9-85AE-655E7A709D59@arcor.de>


Great post, Rob!

Just one small addition:

On 27 Apr 2007, at 01:21, Rob Guglielmetti wrote:

> steve michel wrote:
>> A linear fixture is exactly what I had in mind. For a while I even  
>> searched for 'bare bulb' photometry files from big lamp  
>> manufacturers (GE or Philips) but none exist for fluor tubes (only  
>> par and mr16 spots). But is the illum distribution method another  
>> one or a subset of using flatcorr and lboxcorr techniques you  
>> describe??
>
> No photometric files exist for bare fluorescent tubes probably  
> because you can't really test that condition, nor would anyone want  
> to spend the money to do so.  A fluorescent tube will always be in  
> a fixture, even if it's a simple striplight -- a simple ballast  
> housing and two lampholders.

If all you need is a T5 tube without complex reflector geometry  
behind it
you can create a cylinder with the right brightness to match the output
lumens of your lamp. The 'lampcolor' script calculates the right RGB  
values
for you. Here is a sample session for a T5 35W lamp:

ble@zwielicht:~ $lampcolor
Program to compute lamp radiance.  Enter '?' for help.
Enter lamp type [WHITE]:
Enter length unit [meter]:
Enter lamp geometry [polygon]: cylinder
Cylinder length [1]: 1.449
Cylinder radius [0.1]: 0.008
Enter total lamp lumens [0]: 3300
Lamp color (RGB) = 80.569890 80.569895 80.569895
Enter lamp type [WHITE]: ble@zwielicht:~ $

The RGB values of 80.57 now go in a definition for the light material
which in turn is used by the cylinder definition:

## light material for 35W T5 lamp
void light light_35W_T5
0
0
3 80.57 80.57 80.57

## light applied to cylinder centred at (0,0,0) and aligned with x-axis
light_35W_T5 cylinder lamp_T5
0
0
7 -0.7245 0 0   0.7245 0 0   0.008


These four lines will create a bare T5 lamp that can be used as light
source in Radiance scenes. The output distribution of a real lamp might
be a tiny bit different (at the end caps for example) but I'd say it's
close enough for lighting calculations.

You should not stick this lamp in complex reflector geometry and let
Radiance do the calculations of the resulting distribution for you.
The algorithms in Radiance are not suited for this kind of calculation.

Regards,
Thomas



From gregoryjward at gmail.com  Sun Apr 29 05:56:47 2007
From: gregoryjward at gmail.com (Greg Ward)
Date: Sun Apr 29 06:45:15 2007
Subject: [Radiance-general] Radiance Workshop Proposal
Message-ID: <65A8C87B-F9E8-4954-8900-BB89E9CBDC3E@anyhere.com>

Hello All,

Way back in November, I announced that the 2007 Radiance Workshop  
would be held in Tempe, Arizona.  Due to unforseen circumstances  
beyond our control, ASU is no longer a possibility.  Therefore, we  
made a small call for volunteers, and had an offer from Katja  
Doerschner at the University of Minnesota in Minneapolis.  The  
current dates proposed are the 1-2 October, barring any conflicts.   
If you know of major conferences being held at that time, please let  
us know either by responding to this message, or sending e-mail to me  
and Katja directly.  We could probably push it a little later, but no  
earlier due to our own personal schedule conflicts.

Thanks,
-Greg

From smichel_designer at hotmail.com  Sun Apr 29 12:03:03 2007
From: smichel_designer at hotmail.com (steve michel)
Date: Sun Apr 29 12:03:14 2007
Subject: [Radiance-general] Re: ies photometry+geometry
In-Reply-To: <F1FD9106-5772-41E9-85AE-655E7A709D59@arcor.de>
Message-ID: <BAY143-F27283DDAB898B62C9F850EE04D0@phx.gbl>

Thomas,

Thanks for the tip.  Using bare lamp photometry can be useful in 
architectural  lighting geometry (eg. cove lighing, cornices etc..) that 
don't require complex fixtures other than a lamp holder and wiring.


Steve


>From: Thomas Bleicher <tbleicher@arcor.de>
>Reply-To: Radiance general discussion 
><radiance-general@radiance-online.org>
>To: rpg@rumblestrip.org,Radiance general discussion 
><radiance-general@radiance-online.org>
>Subject: [Radiance-general] Re: ies photometry+geometry
>Date: Sat, 28 Apr 2007 11:39:43 +0100
>
>
>Great post, Rob!
>
>Just one small addition:
>
>On 27 Apr 2007, at 01:21, Rob Guglielmetti wrote:
>
>>steve michel wrote:
>>>A linear fixture is exactly what I had in mind. For a while I even  
>>>searched for 'bare bulb' photometry files from big lamp  manufacturers 
>>>(GE or Philips) but none exist for fluor tubes (only  par and mr16 
>>>spots). But is the illum distribution method another  one or a subset of 
>>>using flatcorr and lboxcorr techniques you  describe??
>>
>>No photometric files exist for bare fluorescent tubes probably  because 
>>you can't really test that condition, nor would anyone want  to spend the 
>>money to do so.  A fluorescent tube will always be in  a fixture, even if 
>>it's a simple striplight -- a simple ballast  housing and two lampholders.
>
>If all you need is a T5 tube without complex reflector geometry  behind it
>you can create a cylinder with the right brightness to match the output
>lumens of your lamp. The 'lampcolor' script calculates the right RGB  
>values
>for you. Here is a sample session for a T5 35W lamp:
>
>ble@zwielicht:~ $lampcolor
>Program to compute lamp radiance.  Enter '?' for help.
>Enter lamp type [WHITE]:
>Enter length unit [meter]:
>Enter lamp geometry [polygon]: cylinder
>Cylinder length [1]: 1.449
>Cylinder radius [0.1]: 0.008
>Enter total lamp lumens [0]: 3300
>Lamp color (RGB) = 80.569890 80.569895 80.569895
>Enter lamp type [WHITE]: ble@zwielicht:~ $
>
>The RGB values of 80.57 now go in a definition for the light material
>which in turn is used by the cylinder definition:
>
>## light material for 35W T5 lamp
>void light light_35W_T5
>0
>0
>3 80.57 80.57 80.57
>
>## light applied to cylinder centred at (0,0,0) and aligned with x-axis
>light_35W_T5 cylinder lamp_T5
>0
>0
>7 -0.7245 0 0   0.7245 0 0   0.008
>
>
>These four lines will create a bare T5 lamp that can be used as light
>source in Radiance scenes. The output distribution of a real lamp might
>be a tiny bit different (at the end caps for example) but I'd say it's
>close enough for lighting calculations.
>
>You should not stick this lamp in complex reflector geometry and let
>Radiance do the calculations of the resulting distribution for you.
>The algorithms in Radiance are not suited for this kind of calculation.
>
>Regards,
>Thomas
>
>
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general@radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general

_________________________________________________________________
Dont waste time standing in linetry shopping online. Visit Sympatico / MSN 
Shopping today! http://shopping.sympatico.msn.ca


From csjoshi at asu.edu  Sun Apr 29 21:54:32 2007
From: csjoshi at asu.edu (Charudatta Joshi (CJ))
Date: Sun Apr 29 21:54:40 2007
Subject: [Radiance-general] prism2 problem
Message-ID: <db3016a0704291254o50f0b4b6k28e411cea959ef48@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: prism.rad
Type: application/octet-stream
Size: 559 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20070429/47e52402/prism.obj
From tbleicher at arcor.de  Sun Apr 29 23:56:01 2007
From: tbleicher at arcor.de (Thomas Bleicher)
Date: Sun Apr 29 23:58:38 2007
Subject: [Radiance-general] prism2 problem
In-Reply-To: <db3016a0704291254o50f0b4b6k28e411cea959ef48@mail.gmail.com>
References: <db3016a0704291254o50f0b4b6k28e411cea959ef48@mail.gmail.com>
Message-ID: <6FD3EE5A-2FDE-4BC5-8A44-489EB2EE9DF4@arcor.de>


On 29 Apr 2007, at 20:54, Charudatta Joshi (CJ) wrote:

> Here's how I have been doing after editing the .rad files:
> oconv phxsky.rad > phxsky.oct
> mkillum -ab 1 -ad 256 -av 20.7 20.7 20.7 phxsky.oct < mout.rad >  
> iout.rad
> oconv flr.rad clg.rad wall.rad sill.rad glass.rad prism.rad  
> phxsky.rad iout.rad > octree1
> rview -vp .1 3 1.7 -vd 7.35 0 0 -vv 78 -vh 90 -ps 1 -ds .05 -ab 1 - 
> ad 256 -av .001 .001 .001 -as 256 -ar 256 -dj .05 octree1

Sorry, I have no experience with prism material definitions.

But for a start you should increase the '-ab' value in the rview  
command.
I assume that the prism material 'consumes' one bounce which means that
you won't see any light reflected off an interior surface. Try '-ab 3'
or more and see if you get a better result.

I hope someone else can help with the prism definition.

Regards,
Thomas

From gregoryjward at gmail.com  Mon Apr 30 02:54:22 2007
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Mon Apr 30 03:19:49 2007
Subject: [Radiance-general] prism2 problem
In-Reply-To: <db3016a0704291254o50f0b4b6k28e411cea959ef48@mail.gmail.com>
References: <db3016a0704291254o50f0b4b6k28e411cea959ef48@mail.gmail.com>
Message-ID: <043A98CC-6D20-4798-82F3-7242AD0EB4E0@gmail.com>

Hi Charudatta,

I'm afraid I can't be of much help, either.  I didn't write the  
fprism routine and I haven't even tested them recently -- can anyone  
on the list confirm that they are still working in the latest  
release?  I hope so.

Just glancing at your file, the length values seem suspiciously  
small.  Also, your angle of acceptance for source aiming (pi radians)  
is larger than it should be -- perhaps you put this in there for  
testing?  What is your reference for which lengths correspond to the  
first four parameters (A1 to A4)?  Also, which face is "beta" and  
which is "gamma?"  I'm not certain.

Any help is appreciated.  (Rapha?l?)

-Greg

> From: "Charudatta Joshi (CJ)" <csjoshi@asu.edu>
> Date: April 29, 2007 12:54:32 PM PDT
>
> Hello,
>
> I am working on a school assignment. I am having problems with  
> "prism2" while trying to render an interior scene with a prism as a  
> skylight.
>
> I have a room 7.85m x 5.85m, 3.0m in height with a rectangular  
> skylight 2.8m x 2.9m in the centre of the ceiling (I have attached  
> with this email the .rad file of the prism I made). I am trying to  
> study impact of prism as skylight on this interior environment,  
> which is meant to be an artist's studio. Please tell me the correct  
> procedure of using prism2 correctly.
>
> The opaque face of the prism faces South while transparent face is  
> on North. My rendered image with the prism comes out as dark  
> without any diffused light from North. Why is it so?
> To get values of A1, A2, A3, A4, I created the geometry in AutoCAD  
> and measured these values there. Is this a good way of doing this?  
> Or do you suggest some other way?
> If I do it correctly, would I be able to see the prism in the  
> rendered image?
> Can you send me any sample prism.rad file to understand better?  
> Please mention the orientation of the prism and its geometry angles.
> Here's how I have been doing after editing the .rad files:
> oconv phxsky.rad > phxsky.oct
> mkillum -ab 1 -ad 256 -av 20.7 20.7 20.7 phxsky.oct < mout.rad >  
> iout.rad
> oconv flr.rad clg.rad wall.rad sill.rad glass.rad prism.rad  
> phxsky.rad iout.rad > octree1
> rview -vp .1 3 1.7 -vd 7.35 0 0 -vv 78 -vh 90 -ps 1 -ds .05 -ab 1 - 
> ad 256 -av .001 .001 .001 -as 256 -ar 256 -dj .05 octree1
> I sincerely appreciate your timely help.
>
>
> Warm regards,
>
> Charudatta Joshi (CJ)
> Student, MS-Building Design, ASU
>

From Raphael.Compagnon at hefr.ch  Mon Apr 30 09:59:08 2007
From: Raphael.Compagnon at hefr.ch (=?iso-8859-1?Q?Compagnon_Rapha=EBl?=)
Date: Mon Apr 30 09:59:23 2007
Subject: [Radiance-general] prism2 problem
In-Reply-To: <db3016a0704291254o50f0b4b6k28e411cea959ef48@mail.gmail.com>
References: <db3016a0704291254o50f0b4b6k28e411cea959ef48@mail.gmail.com>
Message-ID: <DBC2B9515B55B44A848FDF20E4047B7601229E83@hefrmsg02.sofr.hefr.lan>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: fprism_model.jpg
Type: image/jpeg
Size: 27072 bytes
Desc: fprism_model.jpg
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20070430/519589ce/fprism_model-0001.jpg
From Raphael.Compagnon at hefr.ch  Mon Apr 30 10:06:45 2007
From: Raphael.Compagnon at hefr.ch (=?iso-8859-1?Q?Compagnon_Rapha=EBl?=)
Date: Mon Apr 30 10:06:48 2007
Subject: [Radiance-general] prism2 problem
In-Reply-To: <DBC2B9515B55B44A848FDF20E4047B7601229E83@hefrmsg02.sofr.hefr.lan>
References: <db3016a0704291254o50f0b4b6k28e411cea959ef48@mail.gmail.com>
	<DBC2B9515B55B44A848FDF20E4047B7601229E83@hefrmsg02.sofr.hefr.lan>
Message-ID: <DBC2B9515B55B44A848FDF20E4047B7601229E88@hefrmsg02.sofr.hefr.lan>

Sorry my last sentence should have been :

 

And be sure to perform your calculations with parameter -dr set to 1 or more !

 

 

________________________________

De : radiance-general-bounces@radiance-online.org [mailto:radiance-general-bounces@radiance-online.org] De la part de Compagnon Rapha?l
Envoy? : lundi, 30. avril 2007 09:59
? : Radiance general discussion
Objet : RE: [Radiance-general] prism2 problem

 

Hello,

 

I enclose hereafter a JPEG picture which illustrates the dimensions of the prism model you have to define as A1 to A4 parameters (see comments in the fprism.cal file). The picture also shows the naming scheme used for the prism faces (alpha, beta and gamma).

In your scene file, you should decrease parameter A10 to 0.002 (this is the value I always used). And be sure to perform your calculations with parameter -ab set to 1 or more !

 

Raphael

________________________________

De : radiance-general-bounces@radiance-online.org [mailto:radiance-general-bounces@radiance-online.org] De la part de Charudatta Joshi (CJ)
Envoy? : dimanche, 29. avril 2007 21:55
? : radiance-general@radiance-online.org
Objet : [Radiance-general] prism2 problem

 

Hello,

 

I am working on a school assignment. I am having problems with "prism2" while trying to render an interior scene with a prism as a skylight.

 

I have a room 7.85m x 5.85m, 3.0m in height with a rectangular skylight 2.8m x 2.9m in the centre of the ceiling (I have attached with this email the .rad file of the prism I made). I am trying to study impact of prism as skylight on this interior environment, which is meant to be an artist's studio. Please tell me the correct procedure of using prism2 correctly. 

 

1.	The opaque face of the prism faces South while transparent face is on North. My rendered image with the prism comes out as dark without any diffused light from North. Why is it so? 
2.	To get values of A1, A2, A3, A4, I created the geometry in AutoCAD and measured these values there. Is this a good way of doing this? Or do you suggest some other way? 
3.	If I do it correctly, would I be able to see the prism in the rendered image?
4.	Can you send me any sample prism.rad file to understand better? Please mention the orientation of the prism and its geometry angles.

Here's how I have been doing after editing the .rad files:

*	oconv phxsky.rad > phxsky.oct 
*	mkillum -ab 1 -ad 256 -av 20.7 20.7 20.7 phxsky.oct < mout.rad > iout.rad 
*	oconv flr.rad clg.rad wall.rad sill.rad glass.rad prism.rad phxsky.rad iout.rad > octree1 
*	rview -vp .1 3 1.7 -vd 7.35 0 0 -vv 78 -vh 90 -ps 1 -ds .05 -ab 1 -ad 256 -av .001 .001 .001 -as 256 -ar 256 -dj .05 octree1

I sincerely appreciate your timely help.


Warm regards,

Charudatta Joshi (CJ)
Student, MS-Building Design, ASU

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20070430/fa552c29/attachment.html
