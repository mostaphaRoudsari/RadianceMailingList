From thdyoung at mac.com  Thu May  1 01:33:18 2008
From: thdyoung at mac.com (Tom Young)
Date: Thu May  1 01:33:32 2008
Subject: [Radiance-general] non-technical
Message-ID: <5C0C38B7-91BC-4BCB-8165-89666AF26997@mac.com>

hi

I have enjoyed fiddling w Radiance, playing w models successfully  
exported from SketchUp.

I will go on doing this because it's enjoyable. It is time consuming  
but I recognise, from past experience, that sometimes you have to  
accept that time properly spent on work, should, in fact, be spent  
playing.

 From this, good things will come.

I am completely non-technical. I approach Radiance in the hope of  
making images that tell me something useful about the fall of light  
in rooms.

To tell whether or not an image does that is both technical and non- 
technical. Certainly, one can tell from experience if an image has  
any plausibility.

Plus, changing settings such as the gensky settings informs one about  
difference, even if inexactly.

Exactitude may be a red-herring. Difference is what matters in the  
rough and ready world of a practising small-scale architect.

One possibility is setting up a model of light and ground source  
settings, with a basic materials file, to review light in spaces one  
is working on.

Let's see: materials aren't that variable in the ordinary world of  
the domestic architect. Glass - yes. Decorated plaster - yes. Gloss  
painted timber trim and structural elements - yes. Marble, various  
stones primarily Yorkstone, Limestone - yes. Concrete - yes. A range  
of timbers - larch, walnut, oak, western red cedar. Brick of course -  
new and old, red thru yellow to blue.

The impression is that Radiance is used by consultants who have the  
skill to create the palettes of material which they need from scratch  
based on a technical grasp of reflectance, specularity, perturbation  
etc. A practising architect is unlikely to share this facility.

So a materials file such as the one alluded to would be very helpful.

I am aware that I am bleating somewhat, and pleading for something  
that takes years of skill to produce, but the lighting and rendering  
consultants out there are never going experience competition from the  
likes of me. So why not release a set of sky files for London and a  
materials file which are credible.

I have scoured the Net for Radiance materials and I haven't found  
anything which deals with the world that I inhabit. The stuff out  
there is useful for basic self-tutoring only.

None of the Radiance generated imagery wh I have seen relates to the  
kind of projects which I am talking about as the meat-n-drink of the  
ordinary London architect.



tom




From jm at dmu.ac.uk  Thu May  1 04:24:11 2008
From: jm at dmu.ac.uk (John Mardaljevic)
Date: Thu May  1 04:24:21 2008
Subject: [Radiance-general] Upcoming Radiance 3.9 release
Message-ID: <FAE7F4DC-2EF0-492D-BD4F-8B5BD0340571@dmu.ac.uk>

Ready availability of 'tons' of storage space notwithstanding, I'll  
cast a 'no' vote. Very neat, but also very niche.

-John (the disk curmudgeon)

-----------------------------------------------
Dr. John Mardaljevic
Senior Research Fellow
Institute of Energy and Sustainable Development
De Montfort University
The Gateway
Leicester
LE1 9BH, UK
+44 (0) 116 257 7972
+44 (0) 116 257 7981 (fax)

jm@dmu.ac.uk
http://www.iesd.dmu.ac.uk/~jm



From gregoryjward at gmail.com  Thu May  1 08:37:42 2008
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu May  1 08:37:51 2008
Subject: [Radiance-general] non-technical
In-Reply-To: <5C0C38B7-91BC-4BCB-8165-89666AF26997@mac.com>
References: <5C0C38B7-91BC-4BCB-8165-89666AF26997@mac.com>
Message-ID: <02EF7A66-B894-4443-B6BA-8B5D712391DF@lmi.net>

Hi Tom,

Thank for taking the time to write a thoughtful and thought-provoking  
letter to the group.  Indeed, material models are hard to come by in  
Radiance, and most users end up spending a significant amount of time  
creating the materials they need for a convincing and accurate result.

Sadly, there are so many architectural materials out there, that  
creating a library that is comprehensive or even representative is a  
daunting challenge, and it has proven difficult to get public funding  
agencies behind such an effort.  The best hope is for a consortium,  
similar to the one set up by Mike Rubin & company at LBNL with the  
glazing manufacturers to establish a protocol for characterizing  
their products in a consistent and unbiased way.  Getting the kind of  
cohesion and groundswell needed for such a consortium of the many  
companies involved in producing masonry, floor coverings, paints,  
wallpaper, etc., etc...  Well, let's just say it would take a big  
push from somewhere.

So, I don't really have a satisfying answer to your request, but  
maybe there are others on the list who can volunteer their  
experiences with material modeling.  Perhaps someone can even suggest  
a route for gathering a reasonable library together.  Certainly, it  
would get some use.

Best,
-Greg

From gregoryjward at gmail.com  Thu May  1 11:41:41 2008
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu May  1 11:41:50 2008
Subject: [Radiance-general] Official Radiance 3.9 Release
Message-ID: <D9EDCE72-1A3B-41C1-A23A-279140BA2052@lmi.net>

Dear Radiance Users:

I have just put together a long overdue release of Radiance, vers.  
3.9.  I only heard one "nay" vote about including the CSAIL library  
objects, but all the same I made a smaller distribution available for  
like-minded disk curmudgeons.  The download from the original LBNL site:

	http://radsite.lbl.gov/radiance/download.html

by default is missing the CSAIL objects.  These can easily be added  
via the "objects" link lower on the same page.  On the other site,  
radiance-online includes the CSAIL objects in its distribution files:

	http://www.radiance-online.org/software/

Both sites link to compiled binaries for Linux, Mac OS X, Solaris,  
and MINGW (thanks to Francesco Anselmo and James Lee).  I need to  
work with Peter Apian-Bennewitz to update the scripts so the patches  
being provided are relative to the new release, since he's the  
mastermind for those.

Please inform me of any broken links, compile problems, or masspillings.

Cheers,
-Greg

From rfritz at u.washington.edu  Thu May  1 14:17:13 2008
From: rfritz at u.washington.edu (R Fritz)
Date: Thu May  1 14:17:34 2008
Subject: [Radiance-general] Materials Library
Message-ID: <BA18D81B-792A-4257-95CC-1752447A0744@u.washington.edu>

Greg, how do you judge the difficulties of using the CUReT data to  
start a materials library? Is this a plausible project, or is it  
likely to run into serious problems?

Randolph

Ref: <http://www1.cs.columbia.edu/CAVE/software/curet/index.php>


From gregoryjward at gmail.com  Thu May  1 14:53:25 2008
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu May  1 14:53:36 2008
Subject: [Radiance-general] Re: Official Radiance 3.9 Release
In-Reply-To: <D9EDCE72-1A3B-41C1-A23A-279140BA2052@lmi.net>
References: <D9EDCE72-1A3B-41C1-A23A-279140BA2052@lmi.net>
Message-ID: <EEF2DD64-9C9D-45AC-94B3-DF284BF218D2@lmi.net>

I neglected to mention in my announcement the significant changes  
since the last 3.8 release (Oct. 2004):

Added -spec option to falsecolor to restore original spectral color  
scale.
Also added "-s auto" option to automatically set the maximum value.

Re-fixed bug in octree code that caused it to allocate 8 times as
much memory as it actually used(!) -- this was pointed out way back
in 1999 by Erik Reinhard and Erik Jansen, but the fix they gave me
got lost in the slightly broken release process at the time.  This
should make a big difference in memory usage, especially for the
new mesh primitive.  (I measured 30% less memory usage.)

Fixed bug in shadow cache where it was adding surfaces with antimatter
holes cut in them to the obstructor list.  Thanks to John Mardaljevic
for discovering and reporting the problem.

Adding ability in mkillum to incorporate BSDF data in calculation.
Internal interface (raypcalls) now used in place of rtrace process(es).

Added -c option to rtcontrib to facilitate cumulative calculations.

****** COMPATIBILITY CHANGE ********
Fixed long-standing bug in source.cal, which caused it to produce
reversed anisotropic photometric distributions due to the
misorientation of the y-axis.  Thanks to Zack Rogers for discovering
and helping debug this problem.

Added rsensor program to compute sensor signal for daylighting controls.
Funding for this component was provided by the Architectural Energy
Corporation in Boulder, CO, and directed by Zack Rogers.

Added "planisphere" (stereographic) fisheye view type for traditional
daylighting analysis.  Feature requested & explained by Axel Jacobs.

--------------------

Of these, the addition of the rsensor program for SPOT and the new  
BSDF input for mkillum are probably the most important.  Thanks is  
due to AEC and LBL for sponsoring these developments.

The complete list of changes for all releases is available at:

	http://radsite.lbl.gov/radiance/refer/Notes/ReleaseNotes.html

Cheers,
-Greg

P.S.  With help from Peter A-B, I've finished updating radiance- 
online so the HEAD patches are relative to the new 3.9 release.


From shakespe at indiana.edu  Thu May  1 16:02:14 2008
From: shakespe at indiana.edu (Shakespeare, Robert A.)
Date: Thu May  1 16:02:27 2008
Subject: [Radiance-general] Official Radiance 3.9 Release
In-Reply-To: <D9EDCE72-1A3B-41C1-A23A-279140BA2052@lmi.net>
Message-ID: <C43FC436.4290%shakespe@indiana.edu>

   On behalf of all friends of Radiance, I want to really thank you Greg, not only for shaping another robust and responsive release*, but particularly for your commitment to each one of us as we continue to engage, explore,  stumble(!), and possibly push this brilliant resource.
    I just realized that Radiance must be a  few decades old.. I am not sure of its first shared release date, but I recall exploring it's potential, with a gaping smile, in either 1989 0r 1990. Have we missed its 21st birthday?

-Rob Shakespeare

* assumed, based on past releases!


From gregoryjward at gmail.com  Thu May  1 16:41:51 2008
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu May  1 16:42:33 2008
Subject: [Radiance-general] Materials Library
In-Reply-To: <BA18D81B-792A-4257-95CC-1752447A0744@u.washington.edu>
References: <BA18D81B-792A-4257-95CC-1752447A0744@u.washington.edu>
Message-ID: <12149874-93AD-4000-B0C5-1B76049E1804@lmi.net>

Hi Randolph,

The CURET database is an impressive resource, with about 60 measured  
materials.  This was the original bidirectional texture function  
measurement work undertaken by Kristin Dana during her Ph.D.  
studies.  I believe she plans a follow-up to this, but I don't know  
the schedule.  Another good resource is the Bonn BTF database, which  
though it only offers a few surfaces (10 by my count), they are  
captured at more angles, and the data are pre-aligned, making their  
application much simpler:

	http://btf.cs.uni-bonn.de/

However, adapting BTF data to a Radiance model is something I've  
never tried, and my guess is that the memory requirements would kill  
you.  Most researchers try for some kind of PCA (principal component  
analysis) or tensor representation to reduce the memory footprint.   
For example, see:

	http://btf.cs.uni-bonn.de/documentation.html
and
	http://mrl.nyu.edu/~alex/research_index.html

How you would incorporate a general Monte Carlo sampling algorithm is  
a big question.  Bottom line, if all you want is a set of materials  
to use in Radiance, I don't think a BTF representation is the  
shortest path.

Cheers,
-Greg

> From: R Fritz <rfritz@u.washington.edu>
> Date: May 1, 2008 2:17:13 PM PDT
>
> Greg, how do you judge the difficulties of using the CUReT data to  
> start a materials library? Is this a plausible project, or is it  
> likely to run into serious problems?
>
> Randolph
>
> Ref: <http://www1.cs.columbia.edu/CAVE/software/curet/index.php>

From gregoryjward at gmail.com  Thu May  1 16:46:22 2008
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu May  1 16:46:30 2008
Subject: [Radiance-general] Official Radiance 3.9 Release
In-Reply-To: <C43FC436.4290%shakespe@indiana.edu>
References: <C43FC436.4290%shakespe@indiana.edu>
Message-ID: <67A66340-9E05-4E99-81A4-8B0037B6A56A@lmi.net>

Hi Rob,

I guess we are right around the 21st birthday, since Radiance saw  
it's first release sometime in 1987.  It was distributed by tape back  
in those days, as you'll surely recall.  Yup -- it predates the web  
by a comfortable margin.

Someone should take 3.9 out for a drink!

-Greg

> From: "Shakespeare, Robert A." <shakespe@indiana.edu>
> Date: May 1, 2008 4:02:14 PM PDT
>
>    On behalf of all friends of Radiance, I want to really thank you  
> Greg, not only for shaping another robust and responsive release*,  
> but particularly for your commitment to each one of us as we  
> continue to engage, explore,  stumble(!), and possibly push this  
> brilliant resource.
>     I just realized that Radiance must be a  few decades old.. I am  
> not sure of its first shared release date, but I recall exploring  
> it's potential, with a gaping smile, in either 1989 0r 1990. Have  
> we missed its 21st birthday?
>
> -Rob Shakespeare
>
> * assumed, based on past releases!

From gregoryjward at gmail.com  Thu May  1 17:01:25 2008
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu May  1 17:01:34 2008
Subject: [Radiance-general] Materials Library
In-Reply-To: <BA18D81B-792A-4257-95CC-1752447A0744@u.washington.edu>
References: <BA18D81B-792A-4257-95CC-1752447A0744@u.washington.edu>
Message-ID: <E5C22A26-F462-41A9-843C-B9F7D6F71E73@lmi.net>

Oh, and while we're on the topic, I should mention that I did some  
work recently with Mashhuda Glencross and others at the University of  
Manchester developing a technique for gathering combined height field  
and texture data using an ordinary digital camera:

	http://aig.cs.man.ac.uk/research/daedalus/hallucination.php

I plan to improve upon the software (nasty C-shell scripts) to make  
the whole process simpler, but it would be interesting to see if this  
method could be used with the Radiance mesh primitive to tile a  
convincing surface.

-Greg

From rpg at rumblestrip.org  Thu May  1 19:13:27 2008
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Thu May  1 19:14:32 2008
Subject: [Radiance-general] Official Radiance 3.9 Release
In-Reply-To: <67A66340-9E05-4E99-81A4-8B0037B6A56A@lmi.net>
References: <C43FC436.4290%shakespe@indiana.edu>
	<67A66340-9E05-4E99-81A4-8B0037B6A56A@lmi.net>
Message-ID: <6EEA9110-29EA-41A7-8D07-AFD03298B893@rumblestrip.org>


On May 1, 2008, at 5:46 PM, Greg Ward wrote:

> I guess we are right around the 21st birthday, since Radiance saw  
> it's first release sometime in 1987.  It was distributed by tape  
> back in those days, as you'll surely recall.  Yup -- it predates  
> the web by a comfortable margin.

I still remember talking to you on the phone Greg, circa 1993, a  
neophyte lighting designer looking for a copy of Radiance, and had no  
idea what the hell an Exabyte cartridge was.  We've all come a long way.

Speaking of which, just to slot me in to the age continuum of  
Radiance users, I graduated from high school a year before the first  
Radiance release (and started mucking around with Radiance about ten  
years later).


> Someone should take 3.9 out for a drink!

Right on, Greg; your baby deserves a little more than root beer.  ;-)

_ Rob Guglielmetti

P.S.
I hope like hell to make the Workshop this year in Fribourg.  Sort-of  
a closing of the loop that started there in 2002...

P.P.S.
Damn, I'm like, old and shit. 
  

From smichel_designer at hotmail.com  Thu May  1 20:15:33 2008
From: smichel_designer at hotmail.com (steve michel)
Date: Thu May  1 20:15:39 2008
Subject: [Radiance-general] Upcoming Radiance 3.9 release
In-Reply-To: <FAE7F4DC-2EF0-492D-BD4F-8B5BD0340571@dmu.ac.uk>
References: <FAE7F4DC-2EF0-492D-BD4F-8B5BD0340571@dmu.ac.uk>
Message-ID: <BAY143-W4550EFA900C03FD8C42331E0DA0@phx.gbl>


I agree with John on that one. I think a readme text file on converting these files simply (tensor textures too-why not?) into a form usable in radiance would take less space but open a world of possibilities.


----------------------------------------
> From: jm@dmu.ac.uk
> To: radiance-general@radiance-online.org
> Subject: [Radiance-general] Upcoming Radiance 3.9 release
> Date: Thu, 1 May 2008 12:24:11 +0100
> 
> Ready availability of 'tons' of storage space notwithstanding, I'll  
> cast a 'no' vote. Very neat, but also very niche.
> 
> -John (the disk curmudgeon)
> 
> -----------------------------------------------
> Dr. John Mardaljevic
> Senior Research Fellow
> Institute of Energy and Sustainable Development
> De Montfort University
> The Gateway
> Leicester
> LE1 9BH, UK
> +44 (0) 116 257 7972
> +44 (0) 116 257 7981 (fax)
> 
> jm@dmu.ac.uk
> http://www.iesd.dmu.ac.uk/~jm
> 
> 
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general

_________________________________________________________________
Find hidden words, unscramble celebrity names, or try the ultimate crossword puzzle with Live Search Games. Play now!
http://g.msn.ca/ca55/212
From mstock at umich.edu  Thu May  1 20:36:48 2008
From: mstock at umich.edu (Mark Stock)
Date: Thu May  1 20:37:09 2008
Subject: [Radiance-general] Re: Official Radiance 3.9 Release
In-Reply-To: <EEF2DD64-9C9D-45AC-94B3-DF284BF218D2@lmi.net>
References: <D9EDCE72-1A3B-41C1-A23A-279140BA2052@lmi.net>
	<EEF2DD64-9C9D-45AC-94B3-DF284BF218D2@lmi.net>
Message-ID: <Pine.LNX.4.64.0805012317270.12995@rygar.gpcc.itd.umich.edu>

Again, Thank you to the developers, and especially to Greg, for 
continuing to care enough about Radiance and the Radiance 
community, and for putting forth the effort to keep this 
beautiful thing going. You are giants to me.

more...

On Thu, 1 May 2008, Greg Ward wrote:
> ...
> Re-fixed bug in octree code that caused it to allocate 8 times as
> much memory as it actually used(!) -- this was pointed out way back
> in 1999 by Erik Reinhard and Erik Jansen, but the fix they gave me
> got lost in the slightly broken release process at the time.  This
> should make a big difference in memory usage, especially for the
> new mesh primitive.  (I measured 30% less memory usage.)

Octree memory requirements have been the primary limiter of the 
complexity of the models that I use in my art. So much so that I 
wrote a special program to take my 25-million-triangle meshes and 
break them up smoothly into 1-million-tri chunks before feeding 
them to obj2mesh! I'm going to need to go back and try some 
things anew.

As a side note, I was just notified today that one of my video 
works (rendered by Radiance) was accepted to SIGGRAPH this year:

Low quality, bad aspect ratio, on Youtube:
http://www.youtube.com/v/YEyND_MPRwo

Higher-quality, 175 MB, but might not play everywhere:
http://mark.technolope.org/transfer/out8_169.m2v

Mark

From gregoryjward at gmail.com  Thu May  1 20:52:35 2008
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu May  1 20:52:45 2008
Subject: [Radiance-general] Upcoming Radiance 3.9 release
In-Reply-To: <BAY143-W4550EFA900C03FD8C42331E0DA0@phx.gbl>
References: <FAE7F4DC-2EF0-492D-BD4F-8B5BD0340571@dmu.ac.uk>
	<BAY143-W4550EFA900C03FD8C42331E0DA0@phx.gbl>
Message-ID: <7ABC5DE9-9E76-4803-B999-1F82D59FDF09@lmi.net>

Hi Steve,

Thanks for your input.  As I mentioned, I split the decision and made  
them available on one site and not the other.  Directions for  
converting additional models are below.  Thankfully, I had them in an  
e-mail, because I sure don't remember doing this.

Best,
-Greg

++++++++++++++++++++

Instructions for converting additional models
=============================================

1) Download and unpack .OBJ and .PPM files from:
         http://people.csail.mit.edu/tmertens/textransfer/data

2) Rename atlas.ppm to something more specific.

3) Convert the .OBJ file to a Radiance triangle mesh using the command:
         obj2mesh object.obj > object.rtm

4) Convert the .PPM file to a Radiance picture:
         ra_ppm -r object.ppm > object.pic

5) Average the non-zero color values in the texture atlas to arrive  
at a background color:
         pvalue -h -H -df object.pic \
         | rcalc -if3 -e 'cond=$1+$2+$3-.01' -of -e '$1=$1;$2=$2;$3= 
$3' \
         | total -if3 -m

6) Use the above three values (red_val, green_val, blue_val) in a  
Radiance input file that looks like so:

void colorpict object_pat
7 lim_r lim_g lim_b object.pic climit.cal Lu Lv
0
3 (red_val) (green_val) (blue_val)

object_pat plastic object_mat
0
0
5 1 1 1 0 0

object_mat mesh object
1 object.rtm
0
0
-----------

If you want a specular component, change the arguments of  
"object_mat" to "1 1 1 0.04 0.07" -- feel free to alter the roughness  
(final) parameter to suit, but unless the object is metallic, the  
specular value should not be greater than 0.04.

The file "climit.cal" is used to avoid black areas on the object  
where it isn't covered by the texture atlas:

{ Avoid zero pixel values }
lim_r(r,g,b) = if(grey(r,g,b)-.01, min(r,1), A1);
lim_g(r,g,b) = if(grey(r,g,b)-.01, min(g,1), A2);
lim_b(r,g,b) = if(grey(r,g,b)-.01, min(b,1), A3);
-----------

> From: steve michel <smichel_designer@hotmail.com>
> Date: May 1, 2008 8:15:33 PM PDT
>
> I agree with John on that one. I think a readme text file on  
> converting these files simply (tensor textures too-why not?) into a  
> form usable in radiance would take less space but open a world of  
> possibilities.
>
>
> ----------------------------------------
>> From: jm@dmu.ac.uk
>> To: radiance-general@radiance-online.org
>>
>> Ready availability of 'tons' of storage space notwithstanding, I'll
>> cast a 'no' vote. Very neat, but also very niche.
>>
>> -John (the disk curmudgeon)
>>
>> -----------------------------------------------
>> Dr. John Mardaljevic

From thdyoung at mac.com  Fri May  2 05:22:30 2008
From: thdyoung at mac.com (Tom Young)
Date: Fri May  2 05:22:40 2008
Subject: [Radiance-general] applied material to all faces of a genbox
Message-ID: <CF359B62-7E8D-4668-BC72-FD54B12DDFFB@mac.com>

hi

playing w colorpict, I've had some luck using some concrete .pic files

the end result, tho' entirely for learning purposes, was much better  
than anything else I've encountered using Vectorworks

question: the top of the !genbox rendered sweetly - it really looks  
great

however, the box sides look like extrusions of the render...

is this unavoidable ?

or not ?

tom


From jm at dmu.ac.uk  Fri May  2 07:45:06 2008
From: jm at dmu.ac.uk (John Mardaljevic)
Date: Fri May  2 07:45:14 2008
Subject: [Radiance-general] applied material to all faces of a genbox
Message-ID: <4E3F877C-A26D-4F65-A89A-9D629E76C873@dmu.ac.uk>

Tom,

The image gets 'draped' onto the surface depending on the orientation  
of the surface and the orientation applied in the mapping of the image  
-- usually you arrange for them to be the same.  So, what you see is  
normal.  You need to set up materials to match the orientations of the  
surfaces, say three if all surfaces are rectilinear.  See the example  
in file 'pattmats' which is found in the directory 'obj/cabin'.   
There's a way for cylinders too, but it's been ages since I last used  
colorpict and I've forgotten how it went.

-John

-----------------------------------------------
Dr. John Mardaljevic
Senior Research Fellow
Institute of Energy and Sustainable Development
De Montfort University
The Gateway
Leicester
LE1 9BH, UK
+44 (0) 116 257 7972
+44 (0) 116 257 7981 (fax)

jm@dmu.ac.uk
http://www.iesd.dmu.ac.uk/~jm



From jm at dmu.ac.uk  Fri May  2 07:50:10 2008
From: jm at dmu.ac.uk (John Mardaljevic)
Date: Fri May  2 07:50:20 2008
Subject: [Radiance-general] applied material to all faces of a genbox
Message-ID: <1278D924-C205-45F6-9B4D-F9FE551D08EF@dmu.ac.uk>

'rectilinear'?  Duh.  I mean orthogonal!

-John (now of an age when multi-tasking should be left entirely to the  
computer)


From rob.fitzsimmons at Summit.Fiserv.com  Fri May  2 12:06:49 2008
From: rob.fitzsimmons at Summit.Fiserv.com (Fitzsimmons, Rob)
Date: Fri May  2 12:10:05 2008
Subject: [Radiance-general] applied material to all faces of a genbox
In-Reply-To: <CF359B62-7E8D-4668-BC72-FD54B12DDFFB@mac.com>
References: <CF359B62-7E8D-4668-BC72-FD54B12DDFFB@mac.com>
Message-ID: <9BF49DEBB772944B980C84379E22CB5B028ECBCA@MKEXCHVS2.Mail.Fiserv.net>

I sometimes use a cheap hack to avoid the texture smearing along 1 axis:
 - smearing it on a less noticeable axis.

Assuming you are texturing a wall pattern
 squish the texture about 50% horizontally (not keeping aspect ratio)
Rotate it so it projects at 45 degrees. -rx 90 -rz 45  This works for
most walls - those that are 0, 90, 180, 270 orientations.
Tho at 45 135 etc, they don't work so well.

Rob F

-----Original Message-----
From: radiance-general-bounces@radiance-online.org
[mailto:radiance-general-bounces@radiance-online.org] On Behalf Of Tom
Young
Sent: Friday, May 02, 2008 5:23 AM
To: Radiance general discussion
Subject: [Radiance-general] applied material to all faces of a genbox

hi

playing w colorpict, I've had some luck using some concrete .pic files

the end result, tho' entirely for learning purposes, was much better
than anything else I've encountered using Vectorworks

question: the top of the !genbox rendered sweetly - it really looks
great

however, the box sides look like extrusions of the render...

is this unavoidable ?

or not ?

tom


_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general

From jacobs.axel at gmail.com  Fri May  2 14:46:22 2008
From: jacobs.axel at gmail.com (Axel Jacobs)
Date: Fri May  2 14:46:25 2008
Subject: [Radiance-general] applied material to all faces of a genbox
Message-ID: <100441490805021446hf63b5f9i9c3a0153dd258665@mail.gmail.com>

Hi Tom,

there is a really well-written document on the Radiance FTP site by
Matiu Carr titled 'Image Mapping'. It is in some obscure compression
and format (uuencoded Word 2.0 for Mac). You may pick up a PDF from
here:

http://luminance.londonmet.ac.uk/pickup/image_mapping1.pdf

Cheers

Axel

From gregoryjward at gmail.com  Fri May  2 15:04:34 2008
From: gregoryjward at gmail.com (Greg Ward)
Date: Fri May  2 15:04:46 2008
Subject: [Radiance-general] applied material to all faces of a genbox
In-Reply-To: <100441490805021446hf63b5f9i9c3a0153dd258665@mail.gmail.com>
References: <100441490805021446hf63b5f9i9c3a0153dd258665@mail.gmail.com>
Message-ID: <4DD30733-562D-4CCD-9663-714F1441B263@lmi.net>

Hi Axel,

I'm a little suspicious about the date, but this is great -- where  
did you find it, exactly?  I should link it into radsite (as a PDF  
this time).

-Greg

> From: "Axel Jacobs" <jacobs.axel@gmail.com>
> Date: May 2, 2008 2:46:22 PM PDT
>
> Hi Tom,
>
> there is a really well-written document on the Radiance FTP site by
> Matiu Carr titled 'Image Mapping'. It is in some obscure compression
> and format (uuencoded Word 2.0 for Mac). You may pick up a PDF from
> here:
>
> http://luminance.londonmet.ac.uk/pickup/image_mapping1.pdf
>
> Cheers
>
> Axel

From jacobs.axel at gmail.com  Fri May  2 16:05:43 2008
From: jacobs.axel at gmail.com (Axel Jacobs)
Date: Fri May  2 16:05:46 2008
Subject: [Radiance-general] applied material to all faces of a genbox
Message-ID: <100441490805021605k5c867565t9bd3be73ad2bd22e@mail.gmail.com>

Hi Greg,

> I'm a little suspicious about the date, but this is great
> -- where did you find it, exactly?  I should link it into radsite
> (as a PDF this time).

Well, the date is today's date, as you have correctly worked out. I
was just re-running the PDF output, and it puts the date in without
asking you. There is probably some way of turning this off, though...

I remember that it took me a good few hours on the old Enigma engine
to decrypt the thing. That was at least three or four years ago. I'm
not at all sure, but this might well be the original:

http://radsite.lbl.gov/radiance/pub/doc/mapping.hqx

I re-did all the vector drawings, and got a nicer image of beautiful
Daphne off the Internet, but tried not to alter the text. I was
initially hoping to put this up on the next-generation Radiance
community web site (Wiki or whatever), but since this never
materialised, I've kept it to myself ever since. Back then, I also
tried to get hold of MC, but to no avail. Hope he's gonna sue me over
this... ;-)

Please note that the pickup directory on luminance.londonmet.ac.uk is
only there for temp stuff, so you might want to grab it by its
extension and pull it over to the big servah.

Cheerioh

Axel

From jacobs.axel at gmail.com  Fri May  2 16:11:23 2008
From: jacobs.axel at gmail.com (Axel Jacobs)
Date: Fri May  2 16:11:27 2008
Subject: [Radiance-general] applied material to all faces of a genbox
Message-ID: <100441490805021611k45ea8f9cp6bb001b8a67a7a12@mail.gmail.com>

Oops

> Hope he's gonna sue me over this... ;-)

NOT!!!

Axel

From gregoryjward at gmail.com  Fri May  2 18:04:38 2008
From: gregoryjward at gmail.com (Greg Ward)
Date: Fri May  2 18:04:49 2008
Subject: [Radiance-general] applied material to all faces of a genbox
In-Reply-To: <100441490805021611k45ea8f9cp6bb001b8a67a7a12@mail.gmail.com>
References: <100441490805021611k45ea8f9cp6bb001b8a67a7a12@mail.gmail.com>
Message-ID: <DE6274B3-C5FF-4810-929F-CA3279B919A8@lmi.net>

In hopes of not getting sued as well, I added a link to the Notes  
section of the radsite references.  Not very prominent, but at least  
it's somewhere (and in a form) people can access.

Thanks, Axel!

-Greg

> From: "Axel Jacobs" <jacobs.axel@gmail.com>
> Date: May 2, 2008 4:11:23 PM PDT
>
> Oops
>
>> Hope he's gonna sue me over this... ;-)
>
> NOT!!!
>
> Axel

From thdyoung at mac.com  Sat May  3 01:51:14 2008
From: thdyoung at mac.com (Tom Young)
Date: Sat May  3 01:51:21 2008
Subject: [Radiance-general] applied material to all faces of a genbox
In-Reply-To: <100441490805021446hf63b5f9i9c3a0153dd258665@mail.gmail.com>
References: <100441490805021446hf63b5f9i9c3a0153dd258665@mail.gmail.com>
Message-ID: <07CC9FF7-3E04-4DE8-9FC2-122D43ABFEA5@mac.com>

hi Axel

i've printed the pdf out and am now going to log-out and read it over  
a cup of coffee in good ol' Kentish Town Road.

Many thanks.

regards

tom

On 2 May 2008, at 22:46, Axel Jacobs wrote:

> Hi Tom,
>
> there is a really well-written document on the Radiance FTP site by
> Matiu Carr titled 'Image Mapping'. It is in some obscure compression
> and format (uuencoded Word 2.0 for Mac). You may pick up a PDF from
> here:
>
> http://luminance.londonmet.ac.uk/pickup/image_mapping1.pdf
>
> Cheers
>
> Axel
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general

Tom Young Architects
19 Bassett Street
London
NW5 4PG
tel 020 7482 6150
mob 07765 378 502
fax 020 7691 7946
thdyoung@mac.com
http://homepage.mac.com/thdyoung/FileSharing1.html
http://localstinker.blogspot.com/
http://www.localstink.com/rktat/index.html







From ZRogers at archenergy.com  Mon May  5 14:28:13 2008
From: ZRogers at archenergy.com (Zack Rogers)
Date: Mon May  5 14:28:35 2008
Subject: [Radiance-general] Daylighting Designer/Engineer Wanted
Message-ID: <481F278D.375D.00CB.0@archenergy.com>


Dear Colleagues,
Architectural Energy Corporation is looking to add another daylighting designer / engineer to our staff.  Understanding of lighting engineering and Radiance knowledge/experience are key skills, hence the post here.  See the ad below.
 
Daylighting Engineer / Designer
Architectural Energy Corporation, a national building energy research and consulting firm, seeks full-time engineer in the Daylighting Analysis Group.
 
Required: solid understanding of lighting engineering concepts; lighting analysis software expertise (preferably Radiance); good communication and writing skills.
 
Preferred: Architectural engineering degree (or similar degree / background); programming, daylighting, sustainable design and Radiance experience.
 
For more information see www.archenergy.com ( http://www.archenergy.com/ ).
 
Resume / salary requirements to: zrogers@archenergy.comor fax to Zack / 303-444-4304
 
The position is available in the Boulder, Colorado office (less experienced applicants) or the San Francisco, California office (more experienced applicants).  
 
 Zack Rogers, P.E., IESNA, LEED AP
Daylighting Analysis Group Leader
Architectural Energy Corporation
2540 Frontier Avenue, Suite 201
Boulder, CO 80301 USA
 
tel (303)444-4149 ext. 435
fax (303)444-4304
http://www.archenergy.com 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20080505/32f262a4/attachment.htm
From maricanis at gmail.com  Wed May  7 03:32:56 2008
From: maricanis at gmail.com (Marija Velickovic)
Date: Wed May  7 03:33:03 2008
Subject: [Radiance-general] applied material to all faces of a genbox
In-Reply-To: <07CC9FF7-3E04-4DE8-9FC2-122D43ABFEA5@mac.com>
References: <100441490805021446hf63b5f9i9c3a0153dd258665@mail.gmail.com>
	<07CC9FF7-3E04-4DE8-9FC2-122D43ABFEA5@mac.com>
Message-ID: <124b40400805070332y5417083brea5f0819c740309c@mail.gmail.com>

Hi,

I have related question.
If I define some complex material (with patterns, textures or even
material mixture), and I want to apply it on various surfaces, how can
I adjust material orientation to fit the final surface.

For example my complex material is defined in ZX plane, and my surface
is in some other plane.
I calculated needed rotation and translation parameters for the
material but how can I apply them to material and then to an object.

#simple plastic materials mat1, mat2 and mat3 are defined previously

#Vertical bands
#bands.cal is my functional file
#-s mat1 + mat2 in meters
# A1 = mat1/(mat1+mat2)
#30cm mat1|60cm mat2
void mixfunc vert_bands
6   mat1 mat2 band_x ./bands.cal -s 0.9
0
1      0.33

#one additional mat3 band each 3 mat1 and mat2 bands
#300cm vert_bands|60cm mat3
void mixfunc bands3
6   vert_bands mat3  band_x ./bands.cal -s 3.6
0
1      0.8333

Now I want to apply bands3 material to some surface like this:
mat1 polygon cloisons_4D1C.0.1
0
0
18	4445.9871	2212.8005	1035
	4421.9526	2166.5971	1035
	4434.1345	2160.294	1035
	4431.804	2155.7899	1035
	4415.0455	2164.5516	1035
	4441.6689	2215.0555	1035

I calculated rotation and translation parameters:
 -rx 0.000000 -ry -0.000000 -rz -117.482955 -t 4421.952600 2166.597100
1035.000000

So I need to use this transformation values on material to adjust
material orientation to the created surface.
*I can use transformations both on vert_band and bands3 material, but
then I would change my basic material and for all other surfaces I
have to redefine the material completely with new transformation
parameters.

*If I add transformations only to bands3 material, then bands made of
mat3 are rotated, but bands made of mat1 and mat2 stay in the same
orientation as before.

*My idea is to define complete complex material in ZX plane, and then
just adjust final material as needed for each surface.
I tried something like this:
void mixfunc mat1
14 bands3 void 1 .   -rx 0.000000 -ry -0.000000 -rz -117.482955 -t
4421.952600 2166.597100 1035.000000
0
0
but it didn't work. Final material look the same as original bands3 material.

I'm not sure if I was clear enough, but if someone understands my
question and have an answer that would be great.

Marija





On Sat, May 3, 2008 at 10:51 AM, Tom Young <thdyoung@mac.com> wrote:
> hi Axel
>
>  i've printed the pdf out and am now going to log-out and read it over a cup
> of coffee in good ol' Kentish Town Road.
>
>  Many thanks.
>
>  regards
>
>  tom
>
>
>
>  On 2 May 2008, at 22:46, Axel Jacobs wrote:
>
>
> > Hi Tom,
> >
> > there is a really well-written document on the Radiance FTP site by
> > Matiu Carr titled 'Image Mapping'. It is in some obscure compression
> > and format (uuencoded Word 2.0 for Mac). You may pick up a PDF from
> > here:
> >
> > http://luminance.londonmet.ac.uk/pickup/image_mapping1.pdf
> >
> > Cheers
> >
> > Axel
> >
> > _______________________________________________
> > Radiance-general mailing list
> > Radiance-general@radiance-online.org
> > http://www.radiance-online.org/mailman/listinfo/radiance-general
> >
>
>  Tom Young Architects
>  19 Bassett Street
>  London
>  NW5 4PG
>  tel 020 7482 6150
>  mob 07765 378 502
>  fax 020 7691 7946
>  thdyoung@mac.com
>  http://homepage.mac.com/thdyoung/FileSharing1.html
>  http://localstinker.blogspot.com/
>  http://www.localstink.com/rktat/index.html
>
>
>
>
>
>
>
>
>
>  _______________________________________________
>  Radiance-general mailing list
>  Radiance-general@radiance-online.org
>  http://www.radiance-online.org/mailman/listinfo/radiance-general
>

From gregoryjward at gmail.com  Wed May  7 08:42:52 2008
From: gregoryjward at gmail.com (Greg Ward)
Date: Wed May  7 08:43:27 2008
Subject: [Radiance-general] applied material to all faces of a genbox
In-Reply-To: <124b40400805070332y5417083brea5f0819c740309c@mail.gmail.com>
References: <100441490805021446hf63b5f9i9c3a0153dd258665@mail.gmail.com>
	<07CC9FF7-3E04-4DE8-9FC2-122D43ABFEA5@mac.com>
	<124b40400805070332y5417083brea5f0819c740309c@mail.gmail.com>
Message-ID: <D95037EF-1A12-4077-A365-BCCC858D5D76@lmi.net>

Hello Marija,

Without address your problem specifically, let me suggest three  
approaches to handling material orientations:

1) If your material definition cares only about orientation, and not  
position, and your surfaces tend to take on only a few principal  
orientations (such as the three coordinate planes), then create one  
material definition for each principal orientation.  This method is  
used for the "woodpat.cal" file, for example.

2) If you have many orientations and/or your material definition  
depends also on position, then include your material in a file with  
your canonical surface, then transform the two together using xform.   
The surface will be moved, and the transformation added appropriately  
to your material definition.  E.g:

	!xform [xf args] mat+obj.rad

3) If the above technique does not work because you are applying your  
material to different objects each time, then you can put the  
material definition in a file by itself and include it with your  
transform, along with the object file.  E.g:

	!xform [xf args] matdef.mat objdef.rad

There is no need to worry about the material name being the same but  
meaning something different each time, as the most recent definition  
in a stream is always the one used.

Does this help at all, or am I missing your point?

-Greg

> From: "Marija Velickovic" <maricanis@gmail.com>
> Date: May 7, 2008 3:32:56 AM PDT
>
> Hi,
>
> I have related question.
> If I define some complex material (with patterns, textures or even
> material mixture), and I want to apply it on various surfaces, how can
> I adjust material orientation to fit the final surface.
>
> For example my complex material is defined in ZX plane, and my surface
> is in some other plane.
> I calculated needed rotation and translation parameters for the
> material but how can I apply them to material and then to an object.
>
> #simple plastic materials mat1, mat2 and mat3 are defined previously
>
> #Vertical bands
> #bands.cal is my functional file
> #-s mat1 + mat2 in meters
> # A1 = mat1/(mat1+mat2)
> #30cm mat1|60cm mat2
> void mixfunc vert_bands
> 6   mat1 mat2 band_x ./bands.cal -s 0.9
> 0
> 1      0.33
>
> #one additional mat3 band each 3 mat1 and mat2 bands
> #300cm vert_bands|60cm mat3
> void mixfunc bands3
> 6   vert_bands mat3  band_x ./bands.cal -s 3.6
> 0
> 1      0.8333
>
> Now I want to apply bands3 material to some surface like this:
> mat1 polygon cloisons_4D1C.0.1
> 0
> 0
> 18	4445.9871	2212.8005	1035
> 	4421.9526	2166.5971	1035
> 	4434.1345	2160.294	1035
> 	4431.804	2155.7899	1035
> 	4415.0455	2164.5516	1035
> 	4441.6689	2215.0555	1035
>
> I calculated rotation and translation parameters:
>  -rx 0.000000 -ry -0.000000 -rz -117.482955 -t 4421.952600 2166.597100
> 1035.000000
>
> So I need to use this transformation values on material to adjust
> material orientation to the created surface.
> *I can use transformations both on vert_band and bands3 material, but
> then I would change my basic material and for all other surfaces I
> have to redefine the material completely with new transformation
> parameters.
>
> *If I add transformations only to bands3 material, then bands made of
> mat3 are rotated, but bands made of mat1 and mat2 stay in the same
> orientation as before.
>
> *My idea is to define complete complex material in ZX plane, and then
> just adjust final material as needed for each surface.
> I tried something like this:
> void mixfunc mat1
> 14 bands3 void 1 .   -rx 0.000000 -ry -0.000000 -rz -117.482955 -t
> 4421.952600 2166.597100 1035.000000
> 0
> 0
> but it didn't work. Final material look the same as original bands3  
> material.
>
> I'm not sure if I was clear enough, but if someone understands my
> question and have an answer that would be great.
>
> Marija
>

From maricanis at gmail.com  Thu May  8 04:25:23 2008
From: maricanis at gmail.com (Marija Velickovic)
Date: Thu May  8 04:25:29 2008
Subject: [Radiance-general] applied material to all faces of a genbox
In-Reply-To: <D95037EF-1A12-4077-A365-BCCC858D5D76@lmi.net>
References: <100441490805021446hf63b5f9i9c3a0153dd258665@mail.gmail.com>
	<07CC9FF7-3E04-4DE8-9FC2-122D43ABFEA5@mac.com>
	<124b40400805070332y5417083brea5f0819c740309c@mail.gmail.com>
	<D95037EF-1A12-4077-A365-BCCC858D5D76@lmi.net>
Message-ID: <124b40400805080425i8b1dec3o938ff98811bbee3c@mail.gmail.com>

Thanks Greg,

Your explanation solves my problem, and now I have another related
question, of course :)

If my material is defined in some plane, for example ZX, and I have a
surface in some other plane, how can I calculate needed
transformations (rotations), to place the material correctly.

I wrote the script and used the code from replmarks.c but it seems I'm
missing something important. Calculated rotations give good results
for some surfaces and bad for others.

So question is how should I calculate 3 rotation angles for -rx -ry
and -rz, if I have:
* starting right-oriented coordinate system defined with vectors
x0,y0,z0  (plane where material is defined) and
* surface coordinate system defined with vectors x1,y1,z1 (calculated
from tree points on surface plane and normal)

Thanks again,
Marija.



On Wed, May 7, 2008 at 5:42 PM, Greg Ward <gregoryjward@gmail.com> wrote:
> Hello Marija,
>
>  Without address your problem specifically, let me suggest three approaches
> to handling material orientations:
>
>  1) If your material definition cares only about orientation, and not
> position, and your surfaces tend to take on only a few principal
> orientations (such as the three coordinate planes), then create one material
> definition for each principal orientation.  This method is used for the
> "woodpat.cal" file, for example.
>
>  2) If you have many orientations and/or your material definition depends
> also on position, then include your material in a file with your canonical
> surface, then transform the two together using xform.  The surface will be
> moved, and the transformation added appropriately to your material
> definition.  E.g:
>
>         !xform [xf args] mat+obj.rad
>
>  3) If the above technique does not work because you are applying your
> material to different objects each time, then you can put the material
> definition in a file by itself and include it with your transform, along
> with the object file.  E.g:
>
>         !xform [xf args] matdef.mat objdef.rad
>
>  There is no need to worry about the material name being the same but
> meaning something different each time, as the most recent definition in a
> stream is always the one used.
>
>  Does this help at all, or am I missing your point?
>
>  -Greg
>

From gregoryjward at gmail.com  Thu May  8 09:12:53 2008
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu May  8 09:14:17 2008
Subject: [Radiance-general] applied material to all faces of a genbox
In-Reply-To: <124b40400805080425i8b1dec3o938ff98811bbee3c@mail.gmail.com>
References: <100441490805021446hf63b5f9i9c3a0153dd258665@mail.gmail.com>
	<07CC9FF7-3E04-4DE8-9FC2-122D43ABFEA5@mac.com>
	<124b40400805070332y5417083brea5f0819c740309c@mail.gmail.com>
	<D95037EF-1A12-4077-A365-BCCC858D5D76@lmi.net>
	<124b40400805080425i8b1dec3o938ff98811bbee3c@mail.gmail.com>
Message-ID: <919904FD-BA73-497E-875B-AE68387DB93B@lmi.net>

Hi Marija,

Which version of replmarks.c are you using?  There was a bug pointed  
out by Zack Rogers and fixed in late January of this year in this  
part of the code, so you should be sure you have the latest copy  
(vers. 2.15, reported at the top of the file).  Specifically, it spat  
out incorrect rotations when the new X' axis was aligned with the  
world Z axis.

-Greg

> From: "Marija Velickovic" <maricanis@gmail.com>
> Date: May 8, 2008 4:25:23 AM PDT
>
> Thanks Greg,
>
> Your explanation solves my problem, and now I have another related
> question, of course :)
>
> If my material is defined in some plane, for example ZX, and I have a
> surface in some other plane, how can I calculate needed
> transformations (rotations), to place the material correctly.
>
> I wrote the script and used the code from replmarks.c but it seems I'm
> missing something important. Calculated rotations give good results
> for some surfaces and bad for others.
>
> So question is how should I calculate 3 rotation angles for -rx -ry
> and -rz, if I have:
> * starting right-oriented coordinate system defined with vectors
> x0,y0,z0  (plane where material is defined) and
> * surface coordinate system defined with vectors x1,y1,z1 (calculated
> from tree points on surface plane and normal)
>
> Thanks again,
> Marija.

From maricanis at gmail.com  Fri May  9 03:10:02 2008
From: maricanis at gmail.com (Marija Velickovic)
Date: Fri May  9 03:10:08 2008
Subject: [Radiance-general] applied material to all faces of a genbox
In-Reply-To: <919904FD-BA73-497E-875B-AE68387DB93B@lmi.net>
References: <100441490805021446hf63b5f9i9c3a0153dd258665@mail.gmail.com>
	<07CC9FF7-3E04-4DE8-9FC2-122D43ABFEA5@mac.com>
	<124b40400805070332y5417083brea5f0819c740309c@mail.gmail.com>
	<D95037EF-1A12-4077-A365-BCCC858D5D76@lmi.net>
	<124b40400805080425i8b1dec3o938ff98811bbee3c@mail.gmail.com>
	<919904FD-BA73-497E-875B-AE68387DB93B@lmi.net>
Message-ID: <124b40400805090310i4e8d6f21n817ec9e13c1ed5ef@mail.gmail.com>

Hi Greg,

I didn't know about new version of replmarks code, so I downloaded and
used it now. It partially solves my problem.
I use the formulas from the replmarks but think my vector values for
calculation (in the code xp,yp and zp vectors) are wrong.

1.right-oriented coordinate system where pattern is defined is defined
with vectors x0,y0,z0  (plane where material is defined and its
normal) and
2. surface coordinate system defined with vectors x1,y1,z1 (calculated
from tree points on surface plane and normal)

How do I calculate xp,yp, ans zp vectors?
I tried to use xp=x1-x0, yp=y1-y0 and zp=z1-z0, but it seems my
calculation results aren't correct.

Marija.

On Thu, May 8, 2008 at 6:12 PM, Greg Ward <gregoryjward@gmail.com> wrote:
> Hi Marija,
>
> Which version of replmarks.c are you using?  There was a bug pointed out by
> Zack Rogers and fixed in late January of this year in this part of the code,
> so you should be sure you have the latest copy (vers. 2.15, reported at the
> top of the file).  Specifically, it spat out incorrect rotations when the
> new X' axis was aligned with the world Z axis.
>
> -Greg
>
>> From: "Marija Velickovic" <maricanis@gmail.com>
>> Date: May 8, 2008 4:25:23 AM PDT
>>
>> Thanks Greg,
>>
>> Your explanation solves my problem, and now I have another related
>> question, of course :)
>>
>> If my material is defined in some plane, for example ZX, and I have a
>> surface in some other plane, how can I calculate needed
>> transformations (rotations), to place the material correctly.
>>
>> I wrote the script and used the code from replmarks.c but it seems I'm
>> missing something important. Calculated rotations give good results
>> for some surfaces and bad for others.
>>
>> So question is how should I calculate 3 rotation angles for -rx -ry
>> and -rz, if I have:
>> * starting right-oriented coordinate system defined with vectors
>> x0,y0,z0  (plane where material is defined) and
>> * surface coordinate system defined with vectors x1,y1,z1 (calculated
>> from tree points on surface plane and normal)
>>
>> Thanks again,
>> Marija.

From tbleicher at arcor.de  Fri May  9 09:52:48 2008
From: tbleicher at arcor.de (Thomas Bleicher)
Date: Fri May  9 10:03:46 2008
Subject: [Radiance-general] applied material to all faces of a genbox
In-Reply-To: <124b40400805090310i4e8d6f21n817ec9e13c1ed5ef@mail.gmail.com>
References: <100441490805021446hf63b5f9i9c3a0153dd258665@mail.gmail.com>
	<07CC9FF7-3E04-4DE8-9FC2-122D43ABFEA5@mac.com>
	<124b40400805070332y5417083brea5f0819c740309c@mail.gmail.com>
	<D95037EF-1A12-4077-A365-BCCC858D5D76@lmi.net>
	<124b40400805080425i8b1dec3o938ff98811bbee3c@mail.gmail.com>
	<919904FD-BA73-497E-875B-AE68387DB93B@lmi.net>
	<124b40400805090310i4e8d6f21n817ec9e13c1ed5ef@mail.gmail.com>
Message-ID: <28C0A8A0-6E03-4AF9-9EC9-15E1E4E8644A@arcor.de>


On 9 May 2008, at 11:10, Marija Velickovic wrote:

> How do I calculate xp,yp, ans zp vectors?
> I tried to use xp=x1-x0, yp=y1-y0 and zp=z1-z0, but it seems my
> calculation results aren't correct.

Hi Marija.

I tried to rewrite the replmarks routines for object rotations
for a while. I finally gave up and now I'm using the output of
a !replmarks command directly in my scene descriptions to place
an object with translation and rotation into a global coordinate
system.

The !replmarks command will create an "!xform -rx ..." line. You
could use these rotations to transform a matrix. The final matrix
will provide the vectors your after.

Regards,
Thomas

From gregoryjward at gmail.com  Fri May  9 11:38:23 2008
From: gregoryjward at gmail.com (Greg Ward)
Date: Fri May  9 11:38:54 2008
Subject: [Radiance-general] applied material to all faces of a genbox
In-Reply-To: <124b40400805090310i4e8d6f21n817ec9e13c1ed5ef@mail.gmail.com>
References: <100441490805021446hf63b5f9i9c3a0153dd258665@mail.gmail.com>
	<07CC9FF7-3E04-4DE8-9FC2-122D43ABFEA5@mac.com>
	<124b40400805070332y5417083brea5f0819c740309c@mail.gmail.com>
	<D95037EF-1A12-4077-A365-BCCC858D5D76@lmi.net>
	<124b40400805080425i8b1dec3o938ff98811bbee3c@mail.gmail.com>
	<919904FD-BA73-497E-875B-AE68387DB93B@lmi.net>
	<124b40400805090310i4e8d6f21n817ec9e13c1ed5ef@mail.gmail.com>
Message-ID: <A958634C-B4BB-495B-B77B-4E3F949A6CB6@lmi.net>

Hi Marija,

Thomas' suggestion of using replmarks as is may be a good one, and  
you can feed it your vectors via rcalc if you like.

On the other hand, it should be possible to get the code to do what  
you want.  Here are a few caveats:

1) The three vectors you give to the addrot() routine must be  
normalized (length 1) and orthogonal to each other.

2) The vectors specify the new axes orientations, so you give it the  
destination position for each original X, Y, and Z axis.

3) The axes must compose a right-hand coordinate system.

I assume from what you've said, that it's probably #1 that is the  
problem.

-Greg

> From: "Marija Velickovic" <maricanis@gmail.com>
> Date: May 9, 2008 3:10:02 AM PDT
>
> Hi Greg,
>
> I didn't know about new version of replmarks code, so I downloaded and
> used it now. It partially solves my problem.
> I use the formulas from the replmarks but think my vector values for
> calculation (in the code xp,yp and zp vectors) are wrong.
>
> 1.right-oriented coordinate system where pattern is defined is defined
> with vectors x0,y0,z0  (plane where material is defined and its
> normal) and
> 2. surface coordinate system defined with vectors x1,y1,z1 (calculated
> from tree points on surface plane and normal)
>
> How do I calculate xp,yp, ans zp vectors?
> I tried to use xp=x1-x0, yp=y1-y0 and zp=z1-z0, but it seems my
> calculation results aren't correct.
>
> Marija.

From jdlenard at deluminaelab.com  Mon May 12 11:51:54 2008
From: jdlenard at deluminaelab.com (jeando)
Date: Mon May 12 11:53:18 2008
Subject: [Radiance-general] Raddisplay
In-Reply-To: <A958634C-B4BB-495B-B77B-4E3F949A6CB6@lmi.net>
References: <100441490805021446hf63b5f9i9c3a0153dd258665@mail.gmail.com>	<07CC9FF7-3E04-4DE8-9FC2-122D43ABFEA5@mac.com>	<124b40400805070332y5417083brea5f0819c740309c@mail.gmail.com>	<D95037EF-1A12-4077-A365-BCCC858D5D76@lmi.net>	<124b40400805080425i8b1dec3o938ff98811bbee3c@mail.gmail.com>	<919904FD-BA73-497E-875B-AE68387DB93B@lmi.net>	<124b40400805090310i4e8d6f21n817ec9e13c1ed5ef@mail.gmail.com>
	<A958634C-B4BB-495B-B77B-4E3F949A6CB6@lmi.net>
Message-ID: <482891CA.8090803@deluminaelab.com>

Hello all,

We have developed the first version of a tool we called RadDisplay. It 
is a simple tool to visualize Radiance images on Windows and Linux. It 
allows to view images, luminance and illuminance values, correct 
exposition, etc.

It also allows to make false color images and to adjust the color scale 
rather easily.

It is mainly written in Python. It uses a few Radiance programs from 
Greg's original distribution on Linux and Francesco's binaries on Windows.

It is released under GPL license so feel free to use it. We'd like very 
much to have your feedback at raddisplay@deluminaelab.com

It is available at http://www.deluminaelab.com/en/tools.html

We hope you'll like it.

JeanDo

From Francesco.Anselmo at arup.com  Tue May 13 04:11:11 2008
From: Francesco.Anselmo at arup.com (Francesco Anselmo)
Date: Tue May 13 04:11:19 2008
Subject: [Radiance-general] Raddisplay
In-Reply-To: <482891CA.8090803@deluminaelab.com>
References: <100441490805021446hf63b5f9i9c3a0153dd258665@mail.gmail.com>	<07CC9FF7-3E04-4DE8-9FC2-122D43ABFEA5@mac.com>	<124b40400805070332y5417083brea5f0819c740309c@mail.gmail.com>	<D95037EF-1A12-4077-A365-BCCC858D5D76@lmi.net>	<124b40400805080425i8b1dec3o938ff98811bbee3c@mail.gmail.com>	<919904FD-BA73-497E-875B-AE68387DB93B@lmi.net>	<124b40400805090310i4e8d6f21n817ec9e13c1ed5ef@mail.gmail.com><A958634C-B4BB-495B-B77B-4E3F949A6CB6@lmi.net>
	<482891CA.8090803@deluminaelab.com>
Message-ID: <1A9189D598C7F046BA8A65FD8567B18C391058@eurxmb05.global.arup.com>

Hi JeanDo,

Yes, we liked it! This is such a nice addition to the Radiance tools
available :)

Thanks a lot for your efforts!

I even managed to use it on an Intel Mac, so I might be able
to package it into a Mac application if you're interested.

Ciao,

Francesco
____________________________________________________________
Electronic mail messages entering and leaving Arup  business
systems are scanned for acceptability of content and viruses


From jdlenard at deluminaelab.com  Tue May 13 04:24:35 2008
From: jdlenard at deluminaelab.com (jeando)
Date: Tue May 13 04:25:18 2008
Subject: [Radiance-general] Raddisplay
In-Reply-To: <1A9189D598C7F046BA8A65FD8567B18C391058@eurxmb05.global.arup.com>
References: <100441490805021446hf63b5f9i9c3a0153dd258665@mail.gmail.com>	<07CC9FF7-3E04-4DE8-9FC2-122D43ABFEA5@mac.com>	<124b40400805070332y5417083brea5f0819c740309c@mail.gmail.com>	<D95037EF-1A12-4077-A365-BCCC858D5D76@lmi.net>	<124b40400805080425i8b1dec3o938ff98811bbee3c@mail.gmail.com>	<919904FD-BA73-497E-875B-AE68387DB93B@lmi.net>	<124b40400805090310i4e8d6f21n817ec9e13c1ed5ef@mail.gmail.com><A958634C-B4BB-495B-B77B-4E3F949A6CB6@lmi.net>	<482891CA.8090803@deluminaelab.com>
	<1A9189D598C7F046BA8A65FD8567B18C391058@eurxmb05.global.arup.com>
Message-ID: <48297A73.70606@deluminaelab.com>

Hi Francesco,

Yes, a Mac package would be great.  I have already been told that it is 
not so easy to install on OSXas numpy has problems.

JeanDo

Francesco Anselmo a ?crit :
> Hi JeanDo,
>
> Yes, we liked it! This is such a nice addition to the Radiance tools
> available :)
>
> Thanks a lot for your efforts!
>
> I even managed to use it on an Intel Mac, so I might be able
> to package it into a Mac application if you're interested.
>
> Ciao,
>
> Francesco
> ____________________________________________________________
> Electronic mail messages entering and leaving Arup  business
> systems are scanned for acceptability of content and viruses
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
>   

From Francesco.Anselmo at arup.com  Tue May 13 04:28:37 2008
From: Francesco.Anselmo at arup.com (Francesco Anselmo)
Date: Tue May 13 04:28:56 2008
Subject: [Radiance-general] Raddisplay
In-Reply-To: <48297A73.70606@deluminaelab.com>
References: <100441490805021446hf63b5f9i9c3a0153dd258665@mail.gmail.com>	<07CC9FF7-3E04-4DE8-9FC2-122D43ABFEA5@mac.com>	<124b40400805070332y5417083brea5f0819c740309c@mail.gmail.com>	<D95037EF-1A12-4077-A365-BCCC858D5D76@lmi.net>	<124b40400805080425i8b1dec3o938ff98811bbee3c@mail.gmail.com>	<919904FD-BA73-497E-875B-AE68387DB93B@lmi.net>	<124b40400805090310i4e8d6f21n817ec9e13c1ed5ef@mail.gmail.com><A958634C-B4BB-495B-B77B-4E3F949A6CB6@lmi.net>	<482891CA.8090803@deluminaelab.com><1A9189D598C7F046BA8A65FD8567B18C391058@eurxmb05.global.arup.com>
	<48297A73.70606@deluminaelab.com>
Message-ID: <1A9189D598C7F046BA8A65FD8567B18C391097@eurxmb05.global.arup.com>

Yep, numpy and scipy are a bit tricky to compile, 
but I think I found the right "recipe".
I'll keep you posted ...

F. 

____________________________________________________________
Electronic mail messages entering and leaving Arup  business
systems are scanned for acceptability of content and viruses


From perhaugaard at yahoo.dk  Tue May 13 05:51:59 2008
From: perhaugaard at yahoo.dk (Per Haugaard)
Date: Tue May 13 05:52:05 2008
Subject: [Radiance-general] Lux-values for points in a plane
Message-ID: <781305.21912.qm@web26606.mail.ukl.yahoo.com>

Dear user group,

Yet another hurtle in my adventure through Radiance :)

I am trying to determine the LT-value (LightTransmission-value) for a pane with external shading. The first step is to calculate the LT-value correctly without external shading. I failed on that :)

I followed the steps described in the "Basic Radiance Tutorial" by Axel Jakobs. Here is the data i used.

Coordinates in IllumKoordinater.pts

6.216 0.00 1.8 0 -1 0 (window)
6.216 0.05 1.8 0 -1 0 (black wall located 0.05 m behind the window - in fact all walls are black)

The Window (LT=0,72):
void glass window_glass
0
0
3 .78 .78 .78

cat IllumKoordinater.pts | rtrace -I -ab 4 -h -w -oov kontor.oct | rcalc -e '$1=$2;$2=179*(.265*$4+.670*$5+.065*$6)' > lux.dat

Output
-1       4883.69
-0.95  3049.70

Two things worth noticing here. The output coordinates are not listed correctly which gives me the suspicion that lux-values are is not calculated for the correct coordinates. Furthermore the ratio between the output are not according to the entered LT-value for the window (0,62 vs. 0,72)

Does anyone have an idea of what can be wrong here?


Best regards

Per Hauagaard

 

______________________

Per Haugaard,
Griffenfeldsgade 33, 2.tv
2200 K?benhavn N
Denmark

mobil:  +45 26 39 06 40
E-mail: perhaugaard@yahoo.dk
       
---------------------------------

 Tr?nger du til at se det store billede? Kelkoo giver dig gode tilbud p? LCD TV! 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20080513/02b7a9ef/attachment.html
From C.Esmeijer at mook.peutz.nl  Tue May 13 05:54:37 2008
From: C.Esmeijer at mook.peutz.nl (Casper Esmeijer)
Date: Tue May 13 05:54:39 2008
Subject: [Radiance-general] out of memory in avstore
Message-ID: <LAEELIFELGJCEOKFMDAAMEHPCEAA.C.Esmeijer@mook.peutz.nl>

Hello radiance users,

I am performing calculations on illumiance values inside a 22 x 13 x 6 m
geometry that is exclusively lit by a sort of rectangular light pipes.
There's no direct contribution on the spot where I want to know the
irradiance values so I've put some emphasis on the ambient parameters. I've
done measurements on a scale model so I already have a clue on what the
outcome should look like. I use rtrace and it goes like this:

rtrace -I+ -h -ab 7 -aa 0.05 -as 512 -ad 1024 -ar 10000 -av 0.1 0.1 0.1 -aw
1 -af ambfiles/trace.amb -dp 512 -ds .2 -dt .05 -dc .75 -dr 3 -dj .7 -sj
1 -st .01 -lr 8 -lw .001 -e errorfile octrees/room.oct < input > result

(Transformation from irradiance to illuminance happens elsewhere.) The
problem I'm faced with is that the process runs out of memory (on a 2 Gb
memory system). Depending on the platform the process is either terminated
(mingw) or starts swapping to HD (osx). The error message goes: rtrace:
system - out of memory in avstore. I've tried several alternative settings,
e.g. leaving out the -av and -aw parameters (that is setting them to -av 0 0
0 -aw 0) but it won't help. Thuogh reducing the ab setting to 3 solves the
problem, I need more bounces to get anywhere near the final result. I also
wonder if the continuously expanding ambfile behaves normally (it reaches up
to 1.5 Gb when the process terminates). It seems as if new values are added
rather that substituted in the ambfile. Or do I have to use some sort of
cut-off criteria?

I am not at all new to radiance, but obviously not familiar enough with the
code to sort out this problem. Can anyone help?

Kind regards,
Casper Esmeijer

P.S. The model is pretty straightforward. For the light pipes I created a
separate (frozen) octree and I used the instance surface type and xform to
put them in place.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20080513/009dde8c/attachment.htm
From Christopher.Rush at arup.com  Tue May 13 08:19:28 2008
From: Christopher.Rush at arup.com (Christopher Rush)
Date: Tue May 13 08:19:39 2008
Subject: [Radiance-general] out of memory in avstore
In-Reply-To: <LAEELIFELGJCEOKFMDAAMEHPCEAA.C.Esmeijer@mook.peutz.nl>
References: <LAEELIFELGJCEOKFMDAAMEHPCEAA.C.Esmeijer@mook.peutz.nl>
Message-ID: <EB124710ADB8554C930FADF760BB2BE7025DCE80@n-yexc01.global.arup.com>

rtrace -I+ -h -ab 7 -aa 0.05 -as 512 -ad 1024 -ar 10000 -av 0.1 0.1 0.1
-aw 1 -af ambfiles/trace.amb -dp 512 -ds .2 -dt .05 -dc .75 -dr 3 -dj .7
-sj 1 -st .01 -lr 8 -lw .001 -e errorfile octrees/room.oct < input >
result
 
 
I don't know if it will help your memory issue, but it seems your -ar
value of 10000 is much higher than should be required. I find that
extreme values for 'ar' are only required when the total scene size is
much larger than the zone you're interested in. An example would be a
daylighting model for a single small room in a building that also
includes large external geometry many times larger than the room itself.
 
Try -ar 200 and -ar 600. You may be surprised that high values don't
impact your results that much, but would have a strong impact on the
quality of rendered images.
 
-Chris
 
 
 
____________________________________________________________
Electronic mail messages entering and leaving Arup  business
systems are scanned for acceptability of content and viruses
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20080513/7ed3eaa0/attachment.html
From jedev at visarc.com  Tue May 13 08:35:51 2008
From: jedev at visarc.com (Jack de Valpine)
Date: Tue May 13 08:36:33 2008
Subject: [Radiance-general] out of memory in avstore
In-Reply-To: <LAEELIFELGJCEOKFMDAAMEHPCEAA.C.Esmeijer@mook.peutz.nl>
References: <LAEELIFELGJCEOKFMDAAMEHPCEAA.C.Esmeijer@mook.peutz.nl>
Message-ID: <4829B557.3050107@visarc.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: jedev.vcf
Type: text/x-vcard
Size: 251 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20080513/8a6293e3/jedev.vcf
From rpg at rumblestrip.org  Tue May 13 08:52:38 2008
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Tue May 13 08:53:02 2008
Subject: [Radiance-general] out of memory in avstore
In-Reply-To: <4829B557.3050107@visarc.com>
References: <LAEELIFELGJCEOKFMDAAMEHPCEAA.C.Esmeijer@mook.peutz.nl>
	<4829B557.3050107@visarc.com>
Message-ID: <4829B946.70000@rumblestrip.org>

Jack de Valpine wrote:
> .... Perhaps to optimize things further you could then place polygons 
> to close the bottom end of the pipes and again run mkillum on these 
> resulting in light distribution that is effectively at the bottom of 
> the pipe. I am not sure how valid this is so perhaps others can chime in.

Oooh, I hadn't thought of that before, but of course you're right.  A 
very complex skylight/laylight system with multiple "nasty" layers could 
be sorted out, via mkillum, one at a time with progressive mkillum runs 
starting from the outside and working your way in.  Then for the final 
calcs/renders, you would simply use the last set of illums.  Why 
wouldn't this be valid?  As long as you only use the last set of illums 
so there isn't any double- or triple counting of contributions, this 
seems totally valid to me.  Greg? 

- Rob

From gregoryjward at gmail.com  Tue May 13 11:21:55 2008
From: gregoryjward at gmail.com (Greg Ward)
Date: Tue May 13 11:22:09 2008
Subject: [Radiance-general] out of memory in avstore
In-Reply-To: <4829B946.70000@rumblestrip.org>
References: <LAEELIFELGJCEOKFMDAAMEHPCEAA.C.Esmeijer@mook.peutz.nl>
	<4829B557.3050107@visarc.com> <4829B946.70000@rumblestrip.org>
Message-ID: <10ABEB0B-AED2-4596-827F-E644DF8ACB17@lmi.net>

Hi Casper et al.,

I need a little more information about the material on the inside of  
the light pipes.  Is it diffuse?  If not, then you probably don't  
need all the ambient bounces.  Even if it is, Jack's idea for using  
mkillum is a good one.  I'd try putting the illum surface on the  
interior portal first, and set mkillum -aa 0 so there's no ambient  
storage, decreasing other parameters to mkillum accordingly, e.g.:

	mkillum -ab 0 -ad 256 -as 0 -ab 4

This will perform a pure Monte Carlo calculation in mkillum, which  
will avoid the storage problem and still give you reasonable results.

As Jack points out, light pipes are not really Radiance's forte, and  
down the line there will be better options, like using rtcontrib in a  
more general ray-tracing precalculation.  Right now, you're sort of  
stuck with mkillum.  If your interior surfaces are mirror-like, then  
you may also avail yourself of the "mirror" type to handle redirected  
sunlight, but only if you expect that.

Best,
-Greg

> From: Rob Guglielmetti <rpg@rumblestrip.org>
> Date: May 13, 2008 8:52:38 AM PDT
>
> Jack de Valpine wrote:
>> .... Perhaps to optimize things further you could then place  
>> polygons to close the bottom end of the pipes and again run  
>> mkillum on these resulting in light distribution that is  
>> effectively at the bottom of the pipe. I am not sure how valid  
>> this is so perhaps others can chime in.
>
> Oooh, I hadn't thought of that before, but of course you're right.   
> A very complex skylight/laylight system with multiple "nasty"  
> layers could be sorted out, via mkillum, one at a time with  
> progressive mkillum runs starting from the outside and working your  
> way in.  Then for the final calcs/renders, you would simply use the  
> last set of illums.  Why wouldn't this be valid?  As long as you  
> only use the last set of illums so there isn't any double- or  
> triple counting of contributions, this seems totally valid to me.   
> Greg?
> - Rob

From tbleicher at arcor.de  Tue May 13 12:31:46 2008
From: tbleicher at arcor.de (Thomas Bleicher)
Date: Tue May 13 12:34:14 2008
Subject: [Radiance-general] Lux-values for points in a plane
In-Reply-To: <781305.21912.qm@web26606.mail.ukl.yahoo.com>
References: <781305.21912.qm@web26606.mail.ukl.yahoo.com>
Message-ID: <3234E55A-88CD-4B68-BA4C-ED602EFB8B76@arcor.de>


On 13 May 2008, at 13:51, Per Haugaard wrote:

> 6.216 0.00 1.8 0 -1 0 (window)
> 6.216 0.05 1.8 0 -1 0 (black wall located 0.05 m behind the window  
> - in fact all walls are black)
>
> The Window (LT=0,72):
> void glass window_glass
> 0
> 0
> 3 .78 .78 .78
>
> cat IllumKoordinater.pts | rtrace -I -ab 4 -h -w -oov kontor.oct |  
> rcalc -e '$1=$2;$2=179*(.265*$4+.670*$5+.065*$6)' > lux.dat
>
> Output
> -1       4883.69
> -0.95  3049.70

If I understand the above correctly you are calculating two points:
one in front of the window, one behind it. The black walls are used
to swallow all light reflections on the inside so you will only have the
transmitted light left.

Two improvements:

1) Move the wall further back or place your second point at ie. 0.04. If
the calculation point coincides with the wall everything is possible.

2) Don't use a box at all. At the perimeter there is a dark horizon  
(black
walls) which is taken in into the calculation. You could create a sphere
of the material around your calculation point instead.

> Two things worth noticing here. The output coordinates are not  
> listed correctly which gives me the suspicion that lux-values are  
> is not calculated for the correct coordinates. Furthermore the  
> ratio between the output are not according to the entered LT-value  
> for the window (0,62 vs. 0,72)

The first is the result of rtrace's interpretation of the '-I' switch  
(uppercase 'I'!)
rtrace creates a 'virtual surface' at the calculation point and  
starts the calculation
from the point of the view vector. In your case these are (6.216+0, 0 
+-1, 1.8+0)
and (6.216+0, 0.05+-1, 1.8+0). Your rcalc command prints only the y- 
coordinate.

The second problem I can't explane but depending on the size of your
box the 'dark horizon' might have some influence here.

Regards,
Thomas

From C.Esmeijer at mook.peutz.nl  Tue May 13 13:09:33 2008
From: C.Esmeijer at mook.peutz.nl (Casper Esmeijer)
Date: Tue May 13 13:09:41 2008
Subject: [Radiance-general] out of memory in avstore
In-Reply-To: <10ABEB0B-AED2-4596-827F-E644DF8ACB17@lmi.net>
References: <LAEELIFELGJCEOKFMDAAMEHPCEAA.C.Esmeijer@mook.peutz.nl>
	<4829B557.3050107@visarc.com> <4829B946.70000@rumblestrip.org>
	<10ABEB0B-AED2-4596-827F-E644DF8ACB17@lmi.net>
Message-ID: <WorldClient-F200805132209.AA09330003@mook.peutz.nl>

Greg, Rob, Jack, Christopher,

Thanks for your response. The light pipes are lined with a diffuse material. So are all other 
surfaces. I hadn't thought of using mkillum. Probably the result of how a design process works. 
You start out with a plan, then it is slightly changed, some modifications are made and before 
you know it you are stuck with something completely different than you started with. 

Even though I realise a backward raytracer is not at it's best in these circumstances I'll give the 
illums a go and keep you posted. 

Casper

-----Original Message-----
From: Greg Ward <gregoryjward@gmail.com>
To: Radiance general discussion <radiance-general@radiance-online.org>
Date: Tue, 13 May 2008 11:21:55 -0700
Subject: Re: [Radiance-general] out of memory in avstore

> Hi Casper et al.,
> 
> I need a little more information about the material on the inside of  
> the light pipes.  Is it diffuse?  If not, then you probably don't  
> need all the ambient bounces.  Even if it is, Jack's idea for using  
> mkillum is a good one.  I'd try putting the illum surface on the  
> interior portal first, and set mkillum -aa 0 so there's no ambient  
> storage, decreasing other parameters to mkillum accordingly, e.g.:
> 
> 	mkillum -ab 0 -ad 256 -as 0 -ab 4
> 
> This will perform a pure Monte Carlo calculation in mkillum, which  
> will avoid the storage problem and still give you reasonable results.
> 
> As Jack points out, light pipes are not really Radiance's forte, and  
> down the line there will be better options, like using rtcontrib in a  
> more general ray-tracing precalculation.  Right now, you're sort of  
> stuck with mkillum.  If your interior surfaces are mirror-like, then  
> you may also avail yourself of the "mirror" type to handle redirected  
> sunlight, but only if you expect that.
> 
> Best,
> -Greg




From perhaugaard at yahoo.dk  Wed May 14 00:54:37 2008
From: perhaugaard at yahoo.dk (Per Haugaard)
Date: Wed May 14 00:54:44 2008
Subject: SV: Re: [Radiance-general] Lux-values for points in a plane
In-Reply-To: <3234E55A-88CD-4B68-BA4C-ED602EFB8B76@arcor.de>
Message-ID: <467886.95117.qm@web26605.mail.ukl.yahoo.com>




     Normal   0         21         false   false   false      DA   X-NONE   X-NONE                                                     MicrosoftInternetExplorer4                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        /* Style Definitions */  table.MsoNormalTable  {mso-style-name:"Tabel - Normal";  mso-tstyle-rowband-size:0;  mso-tstyle-colband-size:0;  mso-style-noshow:yes;  mso-style-priority:99;  mso-style-qformat:yes;  mso-style-parent:"";  mso-padding-alt:0cm 5.4pt 0cm 5.4pt;  mso-para-margin-top:0cm;  mso-para-margin-right:0cm;  mso-para-margin-bottom:10.0pt; 
 mso-para-margin-left:0cm;  line-height:115%;  mso-pagination:widow-orphan;  font-size:11.0pt;  font-family:"Calibri","sans-serif";  mso-ascii-font-family:Calibri;  mso-ascii-theme-font:minor-latin;  mso-fareast-font-family:"Times New Roman";  mso-fareast-theme-font:minor-fareast;  mso-hansi-font-family:Calibri;  mso-hansi-theme-font:minor-latin;}    Dear Thomas and user group,
 
 Thank you very much for your reply: I really appreciate your help. But it still troubles me why I cannot get the correct ratio between the output and the entered LT-value for the window. Please refer to the below.
   
  > 6.216 0.00 1.8 0 -1 0 (window)
  > 6.216 0.05 1.8 0 -1 0 (black wall located 0.05 m behind the window  
  > - in fact all walls are black)
  > 
  > The Window (LT=0.72):
  > void glass window_glass
  > 0
  > 0
  > 3 .78 .78 .78
  > 
  > cat IllumKoordinater.pts | rtrace -I -ab 4 -h -w -oov kontor.oct |  
  > rcalc -e '$1=$2;$2=179*(.265*$4+.670*$5+.065*$6)' > lux.dat
  > 
  > Output
  > -1       4883.69
  > -0.95  3049.70
   
  > If I understand the above correctly you are calculating two points:
 > one in front of the window, one behind it. The black walls are used
 > to swallow all light reflections on the inside so you will only have the
 > transmitted light left.
 
 
  Yes I only want to evaluate on the transmitted light through the window. I am interested in, later on, to calculate the transmitted light through the window with external shading based on a CIE-standard overcast sky.
  
 > Two improvements:
 
 > 1) Move the wall further back or place your second point at ie. 0.04. If
 > the calculation point coincides with the wall everything is possible.
 
 
  When I calculate the transmitted light at any other point in the room e.g. 0.04 (away from the black wall) the calculation coincides with the window (LT=1). 
  
 > 2) Don't use a box at all. At the perimeter there is a dark horizon 
 > (black walls) which is taken in into the calculation. You could 
 > create a sphere of the material around your calculation point instead.
 
 I?m not sure what you mean here.
 
 
  > Two things worth noticing here. The output coordinates are not  
  > listed correctly which gives me the suspicion that lux-values are  
  > is not calculated for the correct coordinates. Furthermore the  
  > ratio between the output are not according to the entered LT-value  
  > for the window (0,62 vs. 0,72)
  
 > The first is the result of rtrace's interpretation of the '-I' switch 
 > (uppercase 'I'!) rtrace creates a 'virtual surface' at the calculation 
  > point and starts the calculation from the point of the view vector. 
  > In your case these are (6.216+0, 0+-1, 1.8+0) and 
  > (6.216+0, 0.05+-1, 1.8+0). Your rcalc command prints only the y- 
 > coordinate.
   
  Okay, so the calculation is carried out for the correct input coordinates.
   
  > The second problem I can't explane but depending on the size of your
  > box the 'dark horizon' might have some influence here.
   
  My reference point in the room should coincide with the center of the window. I appreciate any help on solving why the ratio between the output and the entered LT-value for the window (0,62 vs. 0,72) differ.




Best regards


Per Haugaard





  

______________________

Per Haugaard,
Griffenfeldsgade 33, 2.tv
2200 K?benhavn N
Denmark

mobil:  +45 26 39 06 40
E-mail: perhaugaard@yahoo.dk
       
---------------------------------

 Tr?nger du til at se det store billede? Kelkoo giver dig gode tilbud p? LCD TV! 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20080514/08adff10/attachment.htm
From tbleicher at arcor.de  Wed May 14 12:23:27 2008
From: tbleicher at arcor.de (Thomas Bleicher)
Date: Wed May 14 12:26:13 2008
Subject: SV: Re: [Radiance-general] Lux-values for points in a plane
In-Reply-To: <467886.95117.qm@web26605.mail.ukl.yahoo.com>
References: <467886.95117.qm@web26605.mail.ukl.yahoo.com>
Message-ID: <E87FDE1B-60EC-4250-9128-EC2B0219D528@arcor.de>


On 14 May 2008, at 08:54, Per Haugaard wrote:
>
> > 2) Don't use a box at all. At the perimeter there is a dark horizon
> > (black walls) which is taken in into the calculation. You could
> > create a sphere of the material around your calculation point  
> instead.
>
> I?m not sure what you mean here.
I would suggest to split your verification of glazing material and  
shading system
into two separate steps to identify possible problems more easily.  
For the material
part I would create a simple scene like this:

#### simple test scene ####

## overcast sky with 10000 lux horizontal diffuse
!gensky 3 21 12:00GMT -c -o 0 -a 51 -m 0 -B 55.866

skyfunc glow skyglow 0 0 4 1 1 1 0
skyglow source sky 0 0 4 0 0 1 180

## material for glass sphere
void glass window_glass
0
0
3 .78 .78 .78

## glass sphere around origin
window_glass sphere glass_sphere
0
0
4 0 0 0 1

#### end of test scene ####

Then use two points (0,0,0) and (0,0,2) to calculate the lux values
inside and outside of the sphere. The direction has to be (0,0,1)
because the scene does not include a ground glow.

If you get around 10000 lux outside of fhe sphere and with the
above material around 7200 lux inside the scene setup is correct
and you can now start modifying the values for the glass material.
The ratio of ouside/inside will give you the transmittance of the
glazing (which is not equal to the values of the glass material!).

When you have verified your glass material do the next step and
use it in a scene. You can now be sure that the material is correct
and any unexpected values are the result of the scene geometry.

>
> > The second problem I can't explane but depending on the size of your
> > box the 'dark horizon' might have some influence here.
>
> My reference point in the room should coincide with the center of  
> the window. I appreciate any help on solving why the ratio between  
> the output and the entered LT-value for the window (0,62 vs. 0,72)  
> differ.

Your reference point might be in the centre of the window but
rtrace samples the whole hemisphere around this point. So if you
have (black) reveals this will influence the calculations even if
you move your calculation point only by 0.05 units.

Without knowing more about your scene it's hard to tell what
exactly causes your values. As a quick help calculate the scene
without glazing and with different glazing values but always
from the same point inside of the room. If these values are correct
it's your geometry that's creating the problems.


Thomas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20080514/98c57b86/attachment.html
From dervishi_sokol at yahoo.com  Sat May 17 07:41:34 2008
From: dervishi_sokol at yahoo.com (sokol dervishi)
Date: Sat May 17 07:41:42 2008
Subject: [Radiance-general] Luminance predictions in a plane
In-Reply-To: <3234E55A-88CD-4B68-BA4C-ED602EFB8B76@arcor.de>
Message-ID: <324403.51772.qm@web56910.mail.re3.yahoo.com>

Dear all, 

I have a question regarding the luminance prediction (cd/m2) on the plane for certain points. and any help would really be appreciated.

I have measured  certain points with an luminance meter. I have used also image-based for the same points to extract the luminance and I have very similar results. I need to use also simulation-based luminance values for the same points and compare the results with the measured and image based ones. 

Before,  I have simulated only Illuminances. How can I measure the Luminances?

Here is the code I use to predict the illuminance:

# commands to run
commands = ["rm -f /tmp/bpi.amb",
            "oconv env.rad lab_surfaces_corrected_moved.rad lab_windows_and_doors.rad strato_sokol2.rad> lab.oct", 

"echo '4.52    0.85 0.74 0 0 1 " +
        "3.74    1.13 0.74 0 0 1 " +    
        "4.52    1.13 0.74 0 0 1 " +          
        "5.30    1.13 0.74 0 0 1 " +
        "3.74    2.13 0.74 0 0 1 " +    
        "4.52    2.13 0.74 0 0 1 " +    
        "5.30    2.13 0.74 0 0 1 " +    
        "3.74    3.13 0.74 0 0 1 " +    
        "4.52    3.13 0.74 0 0 1 " +    
        "5.30    3.13 0.74 0 0 1 " +    
        

            "' | rtrace -w -af /tmp/bpi.amb -as 512 -ar 64 -aa 0.15 -ab 2 -I+ -h lab.oct | rcalc -e '$1=($1*0.265+$2*0.670+$3*0.065)* 179'",

   
            ]


Any help would be really appreciated, 

Thank you very much

Best regards, 

Sokol Dervishi 

       
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20080517/13e8d7d3/attachment.htm
From info at iebele.nl  Sat May 17 15:29:44 2008
From: info at iebele.nl (iebele)
Date: Sat May 17 15:29:55 2008
Subject: [Radiance-general] Texture mapping, openGL.
In-Reply-To: <324403.51772.qm@web56910.mail.re3.yahoo.com>
References: <324403.51772.qm@web56910.mail.re3.yahoo.com>
Message-ID: <482F5C58.6050309@iebele.nl>

Dear all,

I have a project running fine with textures in openGL which I like to 
export to radiance.
For the texture mapping in openGL texture coordinates are drawn for 
every point of a polygon point like this:

    glTexCoord2f ( tx, ty );
    glNormal3f ( nx, ny, nz );
    glVertex3f ( px, py, pz );

I am puzzled how to translate this  into a radiance scene description, 
/whithout/ the use of obj2mesh. Does any of you have an example 
available of  a picture mapped on a polygon using texture coordinates?

-Iebele



From gregoryjward at gmail.com  Sat May 17 18:09:09 2008
From: gregoryjward at gmail.com (Greg Ward)
Date: Sat May 17 18:09:21 2008
Subject: [Radiance-general] Re: Texture mapping, openGL.
In-Reply-To: <482F5C58.6050309@iebele.nl>
References: <324403.51772.qm@web56910.mail.re3.yahoo.com>
	<482F5C58.6050309@iebele.nl>
Message-ID: <9725482F-0630-4417-88E0-80E6675B28A1@lmi.net>

Hi Iebele,

Did you try tmesh2rad?

-Greg

> From: iebele <info@iebele.nl>
> Date: May 17, 2008 3:29:44 PM PDT
>
> Dear all,
>
> I have a project running fine with textures in openGL which I like  
> to export to radiance.
> For the texture mapping in openGL texture coordinates are drawn for  
> every point of a polygon point like this:
>
>    glTexCoord2f ( tx, ty );
>    glNormal3f ( nx, ny, nz );
>    glVertex3f ( px, py, pz );
>
> I am puzzled how to translate this  into a radiance scene  
> description, /whithout/ the use of obj2mesh. Does any of you have  
> an example available of  a picture mapped on a polygon using  
> texture coordinates?
>
> -Iebele

From gregoryjward at gmail.com  Sat May 17 18:09:09 2008
From: gregoryjward at gmail.com (Greg Ward)
Date: Sat May 17 18:10:09 2008
Subject: [Radiance-general] Re: Texture mapping, openGL.
In-Reply-To: <482F5C58.6050309@iebele.nl>
References: <324403.51772.qm@web56910.mail.re3.yahoo.com>
	<482F5C58.6050309@iebele.nl>
Message-ID: <9725482F-0630-4417-88E0-80E6675B28A1@lmi.net>

Hi Iebele,

Did you try tmesh2rad?

-Greg

> From: iebele <info@iebele.nl>
> Date: May 17, 2008 3:29:44 PM PDT
>
> Dear all,
>
> I have a project running fine with textures in openGL which I like  
> to export to radiance.
> For the texture mapping in openGL texture coordinates are drawn for  
> every point of a polygon point like this:
>
>    glTexCoord2f ( tx, ty );
>    glNormal3f ( nx, ny, nz );
>    glVertex3f ( px, py, pz );
>
> I am puzzled how to translate this  into a radiance scene  
> description, /whithout/ the use of obj2mesh. Does any of you have  
> an example available of  a picture mapped on a polygon using  
> texture coordinates?
>
> -Iebele

From info at iebele.nl  Sun May 18 06:18:56 2008
From: info at iebele.nl (iebele)
Date: Sun May 18 06:19:29 2008
Subject: [Radiance-general] Re: Texture mapping, openGL.
In-Reply-To: <9725482F-0630-4417-88E0-80E6675B28A1@lmi.net>
References: <324403.51772.qm@web56910.mail.re3.yahoo.com>	<482F5C58.6050309@iebele.nl>
	<9725482F-0630-4417-88E0-80E6675B28A1@lmi.net>
Message-ID: <48302CC0.70701@iebele.nl>

Hi Greg,

My model uses transparent textures, which is not supported by tmesh2rad.
Added some extras line in the output of tmesh2rad for the tranparent 
texture, which works fine:

void mixpict T-Pat
7 TCOLOR void green
./test_alpha.pic
tmesh.cal u v
0 7
2
0.1  0.0  0.0
0.0  0.1  0.0

It would be nice if I had a better understanding of  the A1-A7 
variables. I like to calcultate these whitin my program, so I can export 
the scene to radiance including the mixpict.

Could you explain to me how to calculate the A1-A7 variables for 
tmesh.cal, given a set of vertexcoordinates and  texturecoordinates?

-Iebele


> Hi Iebele,
>
> Did you try tmesh2rad?
>
> -Greg
>
>> From: iebele <info@iebele.nl>
>> Date: May 17, 2008 3:29:44 PM PDT
>>
>> Dear all,
>>
>> I have a project running fine with textures in openGL which I like to 
>> export to radiance.
>> For the texture mapping in openGL texture coordinates are drawn for 
>> every point of a polygon point like this:
>>
>>    glTexCoord2f ( tx, ty );
>>    glNormal3f ( nx, ny, nz );
>>    glVertex3f ( px, py, pz );
>>
>> I am puzzled how to translate this  into a radiance scene 
>> description, /whithout/ the use of obj2mesh. Does any of you have an 
>> example available of  a picture mapped on a polygon using texture 
>> coordinates?
>>
>> -Iebele
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>



From gregoryjward at gmail.com  Sun May 18 08:00:02 2008
From: gregoryjward at gmail.com (Greg Ward)
Date: Sun May 18 08:00:22 2008
Subject: [Radiance-general] Re: Texture mapping, openGL.
In-Reply-To: <48302CC0.70701@iebele.nl>
References: <324403.51772.qm@web56910.mail.re3.yahoo.com>	<482F5C58.6050309@iebele.nl>
	<9725482F-0630-4417-88E0-80E6675B28A1@lmi.net>
	<48302CC0.70701@iebele.nl>
Message-ID: <A9404A64-610A-4E7B-9C62-C15AAA5D4D6B@lmi.net>

Hi Iebele,

In order to explain the calculation of barycentric coordinates, I'd  
have to read and understand my code again, when it's easier just to  
use it.  This is one of the benefits of source code, after all -- you  
don't have to figure everything out all over each time you need it.   
The routines you want are in tmesh.{h,c} in src/common, and there is  
a nice routine comp_baryc() that makes it pretty easy.  In fact, the  
simplest thing to do is modify tmesh2rad to output what you want.   
Line 252 in src/cv/tmesh.c is just begging for a hack.

If C programming is a hurdle, you could probably construct a set of  
rcalc formats or macro replacements (m4) to substitute your mixpict's  
for the colorpict's that tmesh2rad produces.

Best of luck,
-Greg

> From: iebele <info@iebele.nl>
> Date: May 18, 2008 6:18:56 AM PDT
>
> Hi Greg,
>
> My model uses transparent textures, which is not supported by  
> tmesh2rad.
> Added some extras line in the output of tmesh2rad for the  
> tranparent texture, which works fine:
>
> void mixpict T-Pat
> 7 TCOLOR void green
> ./test_alpha.pic
> tmesh.cal u v
> 0 7
> 2
> 0.1  0.0  0.0
> 0.0  0.1  0.0
>
> It would be nice if I had a better understanding of  the A1-A7  
> variables. I like to calcultate these whitin my program, so I can  
> export the scene to radiance including the mixpict.
>
> Could you explain to me how to calculate the A1-A7 variables for  
> tmesh.cal, given a set of vertexcoordinates and  texturecoordinates?
>
> -Iebele
>
>
>> Hi Iebele,
>>
>> Did you try tmesh2rad?
>>
>> -Greg
>>
>>> From: iebele <info@iebele.nl>
>>> Date: May 17, 2008 3:29:44 PM PDT
>>>
>>> Dear all,
>>>
>>> I have a project running fine with textures in openGL which I  
>>> like to export to radiance.
>>> For the texture mapping in openGL texture coordinates are drawn  
>>> for every point of a polygon point like this:
>>>
>>>    glTexCoord2f ( tx, ty );
>>>    glNormal3f ( nx, ny, nz );
>>>    glVertex3f ( px, py, pz );
>>>
>>> I am puzzled how to translate this  into a radiance scene  
>>> description, /whithout/ the use of obj2mesh. Does any of you have  
>>> an example available of  a picture mapped on a polygon using  
>>> texture coordinates?
>>>
>>> -Iebele
>>

From marcin.gawronski at poczta.fm  Mon May 19 00:39:42 2008
From: marcin.gawronski at poczta.fm (=?ISO-8859-2?Q?Marcin_Gawro=F1ski?=)
Date: Mon May 19 00:39:42 2008
Subject: [Radiance-general] Re: rtrace: -ospec options
In-Reply-To: <F3B71CED-3E2C-4B82-AD8D-8EB16989FC6F@lmi.net>
References: <47F0C242.8000709@poczta.fm>	<A1406DFC-B4FB-45AB-BF6C-8321010A3094@lmi.net>	<48106DDB.8000200@poczta.fm>
	<F3B71CED-3E2C-4B82-AD8D-8EB16989FC6F@lmi.net>
Message-ID: <48312EBE.4040303@poczta.fm>

Hi Greg!

Thank you very much for help. Changes in rayparticipate function was 
useful to me indeed. I had a little problems with compiling, but now 
everything is ok.
Best regards
Marcin


Greg Ward pisze:
> Hello Marcin,
> 
> I am struggling a little bit with the language barrier, but I'm going to 
> assume you don't wish to continue the previous discussion, and are 
> instead focused on modifying rayparticipate to model the formula you 
> give below.  I won't ask why you want it, but here are the changes to 
> get you there:
> 
> Hope this is useful.
> -Greg
> 



----------------------------------------------------------------------
Wyslij video i wygraj aparat!
Kliknij >>> http://link.interia.pl/f1df4


From dervishi_sokol at yahoo.com  Mon May 19 07:31:27 2008
From: dervishi_sokol at yahoo.com (sokol dervishi)
Date: Mon May 19 07:31:46 2008
Subject: [Radiance-general] Luminance predictions in a plane
In-Reply-To: <324403.51772.qm@web56910.mail.re3.yahoo.com>
Message-ID: <313313.50177.qm@web56907.mail.re3.yahoo.com>


Dear all, 

I have a question regarding the luminance prediction (cd/m2) on the plane for certain points. and any help would really be appreciated.

I have measured  certain points with an luminance meter. I have used also image-based for the same points to extract the luminance and I have very similar results. I need to use also simulation-based luminance values for the same points and compare the results with the measured and image based ones. 

Before,  I have simulated only Illuminances. How can I measure the Luminances?

Here is the code I use to predict the illuminance:

# commands to run
commands = ["rm -f /tmp/bpi.amb",
            "oconv env.rad lab_surfaces_corrected_moved.rad lab_windows_and_doors.rad strato_sokol2.rad> lab.oct", 

"echo '4.52    0.85 0.74 0 0 1 " +
        "3.74    1.13 0.74 0 0 1 " +    
        "4.52    1.13 0.74 0 0 1 " +          
        "5.30    1.13 0.74 0 0 1 " +
        "3.74    2.13 0.74 0 0 1 " +    
        "4.52    2.13 0.74 0 0 1 " +    
        "5.30    2.13 0.74 0 0 1 " +    
        "3.74    3.13 0.74 0 0 1 " +    
        "4.52    3.13 0.74 0 0 1 " +    
        "5.30    3.13 0.74 0 0 1 " +    
        

            "' | rtrace -w -af /tmp/bpi.amb -as 512 -ar 64 -aa 0.15 -ab 2 -I+ -h lab.oct | rcalc -e '$1=($1*0.265+$2*0.670+$3*0.065)* 179'",

   
            ]


Any help would be really appreciated, 

Thank you very much

Best regards, 

Sokol Dervishi 

       
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20080519/b187d3f7/attachment.html
From maricanis at gmail.com  Mon May 19 08:15:54 2008
From: maricanis at gmail.com (Marija Velickovic)
Date: Mon May 19 08:16:24 2008
Subject: [Radiance-general] Luminance predictions in a plane
In-Reply-To: <313313.50177.qm@web56907.mail.re3.yahoo.com>
References: <324403.51772.qm@web56910.mail.re3.yahoo.com>
	<313313.50177.qm@web56907.mail.re3.yahoo.com>
Message-ID: <124b40400805190815m2e07824al6a6ccf388e35f910@mail.gmail.com>

Hi,

To calculate Luminance instead of Illuminance just remove "-I+" flag
from your rtace command:

rtrace -w -af /tmp/bpi.amb -as 512 -ar 64 -aa 0.15 -ab 2 -h lab.oct |
rcalc -e '$1=($1*0.265+$2*0.670+$3*0.065)* 179'

I also propose you to set higher ambient parameters ( for example -as
1024 -ar 200 -aa 0.1 -ab 5), since you only have calculation in few
points.

Hope this helps,
Marija.


2008/5/19 sokol dervishi <dervishi_sokol@yahoo.com>:
>
> Dear all,
>
> I have a question regarding the luminance prediction (cd/m2) on the plane
> for certain points. and any help would really be appreciated.
>
> I have measured  certain points with an luminance meter. I have used also
> image-based for the same points to extract the luminance and I have very
> similar results. I need to use also simulation-based luminance values for
> the same points and compare the results with the measured and image based
> ones.
>
> Before,  I have simulated only Illuminances. How can I measure the
> Luminances?
>
> Here is the code I use to predict the illuminance:
>
> # commands to run
> commands = ["rm -f /tmp/bpi.amb",
>             "oconv env.rad lab_surfaces_corrected_moved.rad
> lab_windows_and_doors.rad strato_sokol2.rad> lab.oct",
>
> "echo '4.52    0.85 0.74 0 0 1 " +
>         "3.74    1.13 0.74 0 0 1 " +
>         "4.52    1.13 0.74 0 0 1 " +
>         "5.30    1.13 0.74 0 0 1 " +
>         "3.74    2.13 0.74 0 0 1 " +
>         "4.52    2.13 0.74 0 0 1 " +
>         "5.30    2.13 0.74 0 0 1 " +
>         "3.74    3.13 0.74 0 0 1 " +
>         "4.52    3.13 0.74 0 0 1 " +
>         "5.30    3.13 0.74 0 0 1 " +
>
>
>             "' | rtrace -w -af /tmp/bpi.amb -as 512 -ar 64 -aa 0.15 -ab 2
> -I+ -h lab.oct | rcalc -e '$1=($1*0.265+$2*0.670+$3*0.065)* 179'",
>
>
>             ]
>
>
> Any help would be really appreciated,
>
> Thank you very much
>
> Best regards,
>
> Sokol Dervishi
>

From gregoryjward at gmail.com  Mon May 19 08:22:17 2008
From: gregoryjward at gmail.com (Greg Ward)
Date: Mon May 19 08:22:26 2008
Subject: [Radiance-general] Luminance predictions in a plane
In-Reply-To: <313313.50177.qm@web56907.mail.re3.yahoo.com>
References: <313313.50177.qm@web56907.mail.re3.yahoo.com>
Message-ID: <88740F9D-3D85-40A6-8E44-F600D12B1338@lmi.net>

This seems to be a repeat posting of something sent out on Saturday.   
There is no need to post things twice -- we did get it the first  
time.  If you are unsure if a posting has made it to the list, you  
can always go online to check:

	http://www.radiance-online.org/pipermail/radiance-general/

I did not reply to this right away, since it is really a basic  
question, and I figured any number of people could handle it.  In any  
case, a careful reading of the rtrace man page should give the  
answer.  Quoting from the first paragraph of:

	http://radsite.lbl.gov/radiance/man_html/rtrace.1.html

"Input for each ray is:

             xorg yorg zorg xdir ydir zdir
"

You simply start the ray an arbitrary distance from your surface and  
give it a vector corresponding to the desired luminance measurement.   
The returned values (when you run rtrace without the -I+ option) will  
be in SI radiance units (watts/sr/meter^2),which may be converted to  
luminance (in candelas/meter^2) using the formula specified under the  
"Examples" section:

	rtrace  -h  scene.oct  <lum_meas.pts |  rcalc  -e '$1=47.4*$1+120*$2 
+11.6*$3'

I hope this helps.
-Greg

> From: sokol dervishi <dervishi_sokol@yahoo.com>
> Date: May 19, 2008 7:31:27 AM PDT
>
> Dear all,
>
> I have a question regarding the luminance prediction (cd/m2) on the  
> plane for certain points. and any help would really be appreciated.
>
> I have measured  certain points with an luminance meter. I have  
> used also image-based for the same points to extract the luminance  
> and I have very similar results. I need to use also simulation- 
> based luminance values for the same points and compare the results  
> with the measured and image based ones.
>
> Before,  I have simulated only Illuminances. How can I measure the  
> Luminances?
>
> Here is the code I use to predict the illuminance:
>
> # commands to run
> commands = ["rm -f /tmp/bpi.amb",
>             "oconv env.rad lab_surfaces_corrected_moved.rad  
> lab_windows_and_doors.rad strato_sokol2.rad> lab.oct",
>
> "echo '4.52    0.85 0.74 0 0 1 " +
>         "3.74    1.13 0.74 0 0 1 " +
>         "4.52    1.13 0.74 0 0 1 " +
>         "5.30    1.13 0.74 0 0 1 " +
>         "3.74    2.13 0.74 0 0 1 " +
>         "4.52    2.13 0.74 0 0 1 " +
>         "5.30    2.13 0.74 0 0 1 " +
>         "3.74    3.13 0.74 0 0 1 " +
>         "4.52    3.13 0.74 0 0 1 " +
>         "5.30    3.13 0.74 0 0 1 " +
>
>
>             "' | rtrace -w -af /tmp/bpi.amb -as 512 -ar 64 -aa 0.15  
> -ab 2 -I+ -h lab.oct | rcalc -e '$1=($1*0.265+$2*0.670+$3*0.065)*  
> 179'",
>
>
>             ]
>
>
> Any help would be really appreciated,
>
> Thank you very much
>
> Best regards,
>
> Sokol Dervishi

From dervishi_sokol at yahoo.com  Mon May 19 13:40:55 2008
From: dervishi_sokol at yahoo.com (sokol dervishi)
Date: Mon May 19 13:41:03 2008
Subject: [Radiance-general] Luminance predictions in a plane
In-Reply-To: <88740F9D-3D85-40A6-8E44-F600D12B1338@lmi.net>
Message-ID: <618002.15251.qm@web56905.mail.re3.yahoo.com>


Thank you very much  for your replies. Actually I thought my e_mail was not sent and I apologize for sending  it twice. 

Best Regards, 

Sokol 



       
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20080519/1aa5cf1f/attachment.htm
From nac342 at drexel.edu  Wed May 21 00:05:45 2008
From: nac342 at drexel.edu (Nick Calcagni)
Date: Wed May 21 00:05:50 2008
Subject: [Radiance-general] Desktop Radiance and IES
Message-ID: <d5d7d3120805210005r3f1e3af0g161b0288ed663ea5@mail.gmail.com>

Hello,

Does the IES standard file format have any kind of paradigm in Desktop
Radiance or Radiance? Like say, the ability to take that IES file and use it
directly without having to re-type any parameters from the IES file into
Radiance? A converter? Or a copy and paste job?

Thanks,
Nick Calcagni
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20080521/04fdd4d6/attachment.html
From jm at dmu.ac.uk  Wed May 21 06:20:18 2008
From: jm at dmu.ac.uk (John Mardaljevic)
Date: Wed May 21 06:20:28 2008
Subject: [Radiance-general] Desktop Radiance and IES
Message-ID: <951558AF-2DD5-47CB-A08F-6CABB6F3158A@dmu.ac.uk>

Nick,

The easiest way is to grab the Radiance format files that IES creates  
when it converts the 3D model from its native format for use by  
Radiance.  Can't recall where they reside in the file system, you'll  
need to do a little searching.  The Radiance format files should be  
mostly standard.  There is however one exception that we found: the  
'xform2' command.  This is not part of the standard release and the  
octree conversion will fail if it encounters this command in a rad  
file.  Similar to xform, IES uses xform2 to create rectangles of  
arbitrary dimension for, it seems, use as workplanes.  It does this by  
applying arbitrary scaling in the x and y dimensions (independently)  
on a unit square polygon (z = 0.8) and translating the output to the  
desired location in the scene.  I would have thought that simply  
creating a polygon in the right place would be a neater method,  
whatever.  Since the xform2 commands are embedded in the scene rad  
files, you'll have to strip them out.

-John

-----------------------------------------------
Dr. John Mardaljevic
Senior Research Fellow
Institute of Energy and Sustainable Development
De Montfort University
The Gateway
Leicester
LE1 9BH, UK
+44 (0) 116 257 7972
+44 (0) 116 257 7981 (fax)

jm@dmu.ac.uk
http://www.iesd.dmu.ac.uk/~jm



From gregoryjward at gmail.com  Wed May 21 08:17:50 2008
From: gregoryjward at gmail.com (Greg Ward)
Date: Wed May 21 08:18:16 2008
Subject: [Radiance-general] Desktop Radiance and IES
In-Reply-To: <951558AF-2DD5-47CB-A08F-6CABB6F3158A@dmu.ac.uk>
References: <951558AF-2DD5-47CB-A08F-6CABB6F3158A@dmu.ac.uk>
Message-ID: <BC81DB0A-6C8E-48D9-82DB-501C9AADE1AF@lmi.net>

Sorry guys -- this conversation has me a little confused.  Normally  
when we talk about "IES files," we're referring to those produced by  
lighting manufacturers.  You must be referring to another program --  
this perhaps?

	http://www.iesve.com/content/

In which case, you should be more specific so we'll know what you're  
talking about...  If Nick was actually asking about IES luminaire  
files, then ies2rad is what he's looking for.  TMA (too many acronyms).

Cheers,
-Greg

> From: John Mardaljevic <jm@dmu.ac.uk>
> Date: May 21, 2008 6:20:18 AM PDT
>
> Nick,
>
> The easiest way is to grab the Radiance format files that IES  
> creates when it converts the 3D model from its native format for  
> use by Radiance.  Can't recall where they reside in the file  
> system, you'll need to do a little searching.  The Radiance format  
> files should be mostly standard.  There is however one exception  
> that we found: the 'xform2' command.  This is not part of the  
> standard release and the octree conversion will fail if it  
> encounters this command in a rad file.  Similar to xform, IES uses  
> xform2 to create rectangles of arbitrary dimension for, it seems,  
> use as workplanes.  It does this by applying arbitrary scaling in  
> the x and y dimensions (independently) on a unit square polygon (z  
> = 0.8) and translating the output to the desired location in the  
> scene.  I would have thought that simply creating a polygon in the  
> right place would be a neater method, whatever.  Since the xform2  
> commands are embedded in the scene rad files, you'll have to strip  
> them out.
>
> -John

---------------
> From: "Nick Calcagni" <nac342@drexel.edu>
> Date: May 21, 2008 12:05:45 AM PDT
>
> Hello,
>
> Does the IES standard file format have any kind of paradigm in  
> Desktop Radiance or Radiance? Like say, the ability to take that  
> IES file and use it directly without having to re-type any  
> parameters from the IES file into Radiance? A converter? Or a copy  
> and paste job?
>
> Thanks,
> Nick Calcagni

From jm at dmu.ac.uk  Wed May 21 11:11:56 2008
From: jm at dmu.ac.uk (John Mardaljevic)
Date: Wed May 21 11:12:03 2008
Subject: [Radiance-general] Desktop Radiance and IES
Message-ID: <0C7AF152-B9B4-415A-A3E7-C498D940E751@dmu.ac.uk>

Greg,

Indeed, I didn't even think about the confusion that might ensue.   
Shows how often I model luminaires.  Anyway, perhaps we should agree  
to refer to the suite of simulation software as IESVE rather than IES.

-John

-----------------------------------------------
Dr. John Mardaljevic
Senior Research Fellow
Institute of Energy and Sustainable Development
De Montfort University
The Gateway
Leicester
LE1 9BH, UK
+44 (0) 116 257 7972
+44 (0) 116 257 7981 (fax)

jm@dmu.ac.uk
http://www.iesd.dmu.ac.uk/~jm



From rpg at rumblestrip.org  Wed May 21 12:24:40 2008
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Wed May 21 12:26:02 2008
Subject: [Radiance-general] Desktop Radiance and IES
In-Reply-To: <0C7AF152-B9B4-415A-A3E7-C498D940E751@dmu.ac.uk>
References: <0C7AF152-B9B4-415A-A3E7-C498D940E751@dmu.ac.uk>
Message-ID: <CC92A084-7462-4A48-BE04-E621FA1FD94B@rumblestrip.org>


On May 21, 2008, at 12:11 PM, John Mardaljevic wrote:

> Greg,
>
> Indeed, I didn't even think about the confusion that might ensue.   
> Shows how often I model luminaires.  Anyway, perhaps we should  
> agree to refer to the suite of simulation software as IESVE rather  
> than IES.
>

Yeah, I admit I initially thought he was speaking of photometric  
files, not building models from IESVE.  Confusion reigns.  John's  
suggestion is a good one, IMHO (he said, TiC (LOL) (YMMV))).

- Rob "Can I get an acronym?!" G.

From jm at dmu.ac.uk  Wed May 21 15:12:36 2008
From: jm at dmu.ac.uk (John Mardaljevic)
Date: Wed May 21 15:13:00 2008
Subject: [Radiance-general] Desktop Radiance and IES
Message-ID: <C31955C5-3801-4562-A6FD-EDA56F43E5D9@dmu.ac.uk>

Pausing to think (which I should have done before), I guess Nick *did*  
mean the photometric file format rather than the IESVE format.  I'd  
had a few queries recently about how to get Radiance geometry out of  
IESVE, and the (unhelpful in this instance) explanation might be er...  
helpful if you need to do the same.

-John

-----------------------------------------------
Dr. John Mardaljevic
Senior Research Fellow
Institute of Energy and Sustainable Development
De Montfort University
The Gateway
Leicester
LE1 9BH, UK
+44 (0) 116 257 7972
+44 (0) 116 257 7981 (fax)

jm@dmu.ac.uk
http://www.iesd.dmu.ac.uk/~jm



From Pavlina.Akritas at arup.com  Thu May 22 02:26:03 2008
From: Pavlina.Akritas at arup.com (Pavlina Akritas)
Date: Thu May 22 02:36:05 2008
Subject: [Radiance-general] a bug with rtcontrib?
In-Reply-To: <BC81DB0A-6C8E-48D9-82DB-501C9AADE1AF@lmi.net>
References: <951558AF-2DD5-47CB-A08F-6CABB6F3158A@dmu.ac.uk>
	<BC81DB0A-6C8E-48D9-82DB-501C9AADE1AF@lmi.net>
Message-ID: <8E1CEF9DE6C5D647A9B8DF311CCCEF254DDEAD@eurxmb06.global.arup.com>

Hello everyone,

I am trying to run 'rtcontrib' with the latest Radiance version to
compute the illuminance contributions according to a Tregenza sky. 

The code that I am using looks like this:

rtcontrib -w- -h- -I+ -ad 1000 -as 500 -ab 1 -V -b tbin -o
results/sky/%s$i.data -m skyglow -b 0 -o results/ground/%s$i.data -m
groundglow -f tregenza.cal model.oct < grid/grid.grd

The code works fine when the grid used points up (+z). However, I would
like to find the illuminance on a wall grid, thus the grid points must
point in either +y, -y, +x or -x. When I run 'rtcontrib' in this case
the number of columns varies between 438 and 435 (since rtcontrib
outputs r g b values). Thus, 'rtcontrib' seems to be skipping a patch
every now and then. I have tried also to increasing the settings but the
same problem occured.  

Is it possible to resolve this problem somehow so that the number of
columns is consistent all the time (i.e. 438 including the ground)? If
yes, how?

Thank you,

Pavlina Akritas



____________________________________________________________
Electronic mail messages entering and leaving Arup  business
systems are scanned for acceptability of content and viruses


From gregoryjward at gmail.com  Thu May 22 08:14:58 2008
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu May 22 08:15:07 2008
Subject: [Radiance-general] a bug with rtcontrib?
In-Reply-To: <8E1CEF9DE6C5D647A9B8DF311CCCEF254DDEAD@eurxmb06.global.arup.com>
References: <951558AF-2DD5-47CB-A08F-6CABB6F3158A@dmu.ac.uk>
	<BC81DB0A-6C8E-48D9-82DB-501C9AADE1AF@lmi.net>
	<8E1CEF9DE6C5D647A9B8DF311CCCEF254DDEAD@eurxmb06.global.arup.com>
Message-ID: <2E52C5C0-0910-42A6-85CB-03E3AECE076A@lmi.net>

Hi Pavlina,

You should set -bn 146 on your rtcontrib line, so that even if  
nothing comes back in certain bins, the number of output values is  
held constant.

Also note that the -as parameter gets overridden to 0 because it is  
incompatible with the MC technique used by rtcontrib.  Indirect  
calculation settings in general should be different from what you  
would use for rtrace.  Large values for -ad do not necessarily help  
you that much in rtcontrib, but I haven't explored the parameter  
space enough myself to really offer sound advice.

Best,
-Greg

> From: "Pavlina Akritas" <Pavlina.Akritas@arup.com>
> Date: May 22, 2008 2:26:03 AM PDT
>
> Hello everyone,
>
> I am trying to run 'rtcontrib' with the latest Radiance version to
> compute the illuminance contributions according to a Tregenza sky.
>
> The code that I am using looks like this:
>
> rtcontrib -w- -h- -I+ -ad 1000 -as 500 -ab 1 -V -b tbin -o
> results/sky/%s$i.data -m skyglow -b 0 -o results/ground/%s$i.data -m
> groundglow -f tregenza.cal model.oct < grid/grid.grd
>
> The code works fine when the grid used points up (+z). However, I  
> would
> like to find the illuminance on a wall grid, thus the grid points must
> point in either +y, -y, +x or -x. When I run 'rtcontrib' in this case
> the number of columns varies between 438 and 435 (since rtcontrib
> outputs r g b values). Thus, 'rtcontrib' seems to be skipping a patch
> every now and then. I have tried also to increasing the settings  
> but the
> same problem occured.
>
> Is it possible to resolve this problem somehow so that the number of
> columns is consistent all the time (i.e. 438 including the ground)? If
> yes, how?
>
> Thank you,
>
> Pavlina Akritas

From nac342 at drexel.edu  Thu May 22 11:38:57 2008
From: nac342 at drexel.edu (Nick Calcagni)
Date: Thu May 22 11:39:51 2008
Subject: [Radiance-general] Re: Desktop Radiance and IES plus new question
	on RGB
Message-ID: <d5d7d3120805221138i78805534n72952a14563d8765@mail.gmail.com>

Thank you, both of you. But I was referring to the IES files from lighting
manufacturers as Greg said. Sorry for not being clear... ies2rad seems to be
exactly what I'm looking for.

Should the following be a new topic?

For something like the following (which is part of a converted IES file, I
think). But regardless, "glow" requires you to specify "red" "green" and
"blue" values. In the following they are equal: 9477... for each.

lamp_glow glow lamp
0
0
4 9477.696528 9477.697093 9477.697093    0
So what units are these values in? This ratio of R to G to B shows up in
other parameters too (light, illum). Is there a max value to these RGB
values or for their total? That's one basic thing I've always been confused
about.
Thank you,
Nick
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20080522/94a4953d/attachment.htm
From dongnhatnguyen at gmail.com  Fri May 23 06:33:13 2008
From: dongnhatnguyen at gmail.com (Nguyen Dong Nhat)
Date: Fri May 23 06:33:18 2008
Subject: [Radiance-general] Re: Desktop Radiance and IES plus new question
	on RGB
In-Reply-To: <d5d7d3120805221138i78805534n72952a14563d8765@mail.gmail.com>
References: <d5d7d3120805221138i78805534n72952a14563d8765@mail.gmail.com>
Message-ID: <5ef15ce80805230633k257b25d1x120b83ef9f1233a7@mail.gmail.com>

hi
have you crack of IES <Virtual Environment> v5.85 for revit architecture?
could send it to me?
thank
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20080523/bc4e50e1/attachment.html
From jacobs.axel at gmail.com  Fri May 23 12:24:18 2008
From: jacobs.axel at gmail.com (Axel Jacobs)
Date: Fri May 23 12:24:45 2008
Subject: [Radiance-general] Re: Radiance-general Digest, Vol 51, Issue 20
In-Reply-To: <483714d9.16078e0a.2446.402dSMTPIN_ADDED@mx.google.com>
References: <483714d9.16078e0a.2446.402dSMTPIN_ADDED@mx.google.com>
Message-ID: <100441490805231224y4a8447e4idcc409d161949d3a@mail.gmail.com>

Hi Nguyen,


>   1. Re: Re: Desktop Radiance and IES plus new question        on RGB
>      (Nguyen Dong Nhat)

I didn't quite catch what the RGB question is, but forget about IES
<VE>: it's rubbish, and it produces incorrect results.
Anyhow, you shouldn't be asking about illegal software on this list,
but go to your local Internet Cafe instead. We don't want to know.

Axel

From jacobs.axel at gmail.com  Fri May 23 12:27:13 2008
From: jacobs.axel at gmail.com (Axel Jacobs)
Date: Fri May 23 12:27:20 2008
Subject: [Radiance-general] Re: Radiance-general Digest, Vol 51, Issue 20
In-Reply-To: <483714d9.16078e0a.2446.402dSMTPIN_ADDED@mx.google.com>
References: <483714d9.16078e0a.2446.402dSMTPIN_ADDED@mx.google.com>
Message-ID: <100441490805231227n604d0a75w686e17cd2dfd2912@mail.gmail.com>

Hi Nguyen,

I didn't quite get what your question about RGB was, but if I was you
I'd not use IES <VE>. It doesn't produce correct results. Anyhow, you
shouldn't be asking this list about dodgy software, but go to your
local Internet Cafe instead. We don't want to know.

Axel

From jacobs.axel at gmail.com  Fri May 23 12:30:30 2008
From: jacobs.axel at gmail.com (Axel Jacobs)
Date: Fri May 23 12:30:36 2008
Subject: [Radiance-general] Desktop Radiance and IES plus new question on RGB
Message-ID: <100441490805231230w40c25a66r6fa4eadde77087cd@mail.gmail.com>

Sorry 'about this double posting, and about not changing the subject.
I somehow got carried away.

Axel

From info at iebele.nl  Fri May 23 14:52:33 2008
From: info at iebele.nl (iebele)
Date: Fri May 23 14:52:42 2008
Subject: [Radiance-general] converting unfinished renderings
In-Reply-To: <100441490805231230w40c25a66r6fa4eadde77087cd@mail.gmail.com>
References: <100441490805231230w40c25a66r6fa4eadde77087cd@mail.gmail.com>
Message-ID: <48373CA1.5040107@iebele.nl>

Hi All,
I have acces to a rendering computer via putty - no X11, so I can not 
see the status of renderings  using ximage. When I try to convert the 
rendering I get the obvious "errror reading Radiance picture" error. 
Does anybody has a workaround for this situation? In other words, is 
there any way to convert an unfinished rendering?
-Iebele


From mstock at umich.edu  Fri May 23 14:57:54 2008
From: mstock at umich.edu (Mark Stock)
Date: Fri May 23 14:58:03 2008
Subject: [Radiance-general] converting unfinished renderings
In-Reply-To: <48373CA1.5040107@iebele.nl>
References: <100441490805231230w40c25a66r6fa4eadde77087cd@mail.gmail.com>
	<48373CA1.5040107@iebele.nl>
Message-ID: <Pine.LNX.4.64.0805231754420.24799@rygar.gpcc.itd.umich.edu>

I've found that "ra_ppm file.pic > file.pnm" gives me an image 
with black in the unfinished portions. Trying to add pnmtopng as 
a pipe just returns a 0-length file, but using a two-step method 
with ppm as an intermediary works.

Mark

On Fri, 23 May 2008, iebele wrote:

> Hi All,
> I have acces to a rendering computer via putty - no X11, so I can not see the 
> status of renderings  using ximage. When I try to convert the rendering I get 
> the obvious "errror reading Radiance picture" error. Does anybody has a 
> workaround for this situation? In other words, is there any way to convert an 
> unfinished rendering?
> -Iebele
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
>

From Christopher.Rush at arup.com  Fri May 23 15:14:31 2008
From: Christopher.Rush at arup.com (Christopher Rush)
Date: Fri May 23 15:14:37 2008
Subject: [Radiance-general] converting unfinished renderings
In-Reply-To: <Pine.LNX.4.64.0805231754420.24799@rygar.gpcc.itd.umich.edu>
References: <100441490805231230w40c25a66r6fa4eadde77087cd@mail.gmail.com><48373CA1.5040107@iebele.nl>
	<Pine.LNX.4.64.0805231754420.24799@rygar.gpcc.itd.umich.edu>
Message-ID: <EB124710ADB8554C930FADF760BB2BE7025DCEA8@n-yexc01.global.arup.com>

I believe pfilt can also take in a partial image. 

-----Original Message-----
From: radiance-general-bounces@radiance-online.org
[mailto:radiance-general-bounces@radiance-online.org] On Behalf Of Mark
Stock
Sent: Friday, 23 May, 2008 5:58 PM
To: info@iebele.nl; Radiance general discussion
Subject: Re: [Radiance-general] converting unfinished renderings

I've found that "ra_ppm file.pic > file.pnm" gives me an image 
with black in the unfinished portions. Trying to add pnmtopng as 
a pipe just returns a 0-length file, but using a two-step method 
with ppm as an intermediary works.

Mark

On Fri, 23 May 2008, iebele wrote:

> Hi All,
> I have acces to a rendering computer via putty - no X11, so I can not
see the 
> status of renderings  using ximage. When I try to convert the
rendering I get 
> the obvious "errror reading Radiance picture" error. Does anybody has
a 
> workaround for this situation? In other words, is there any way to
convert an 
> unfinished rendering?
> -Iebele
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
>

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general
____________________________________________________________
Electronic mail messages entering and leaving Arup  business
systems are scanned for acceptability of content and viruses


From gregoryjward at gmail.com  Fri May 23 17:21:07 2008
From: gregoryjward at gmail.com (Greg Ward)
Date: Fri May 23 17:21:13 2008
Subject: [Radiance-general] Re: Desktop Radiance and IES plus new question
	on RGB
In-Reply-To: <5ef15ce80805230633k257b25d1x120b83ef9f1233a7@mail.gmail.com>
References: <d5d7d3120805221138i78805534n72952a14563d8765@mail.gmail.com>
	<5ef15ce80805230633k257b25d1x120b83ef9f1233a7@mail.gmail.com>
Message-ID: <0505A8F0-FEB7-49E4-AA42-15C43A6740F3@lmi.net>

Please refrain from making any illegal requests or exchanges through  
our mailer, or we will bar you from future communications.

Thanks,
-Greg

> From: "Nguyen Dong Nhat" <dongnhatnguyen@gmail.com>
> Date: May 23, 2008 6:33:13 AM PDT
>
> hi
> have you crack of IES <Virtual Environment> v5.85 for revit  
> architecture?
> could send it to me?
> thank

From gregoryjward at gmail.com  Fri May 23 17:34:52 2008
From: gregoryjward at gmail.com (Greg Ward)
Date: Fri May 23 17:34:58 2008
Subject: [Radiance-general] Re: Desktop Radiance and IES plus new question
	on RGB
In-Reply-To: <d5d7d3120805221138i78805534n72952a14563d8765@mail.gmail.com>
References: <d5d7d3120805221138i78805534n72952a14563d8765@mail.gmail.com>
Message-ID: <BC13F1FE-5CE2-485D-AB29-7B4B54A1262D@lmi.net>

Hi Nick,

The glow values (multiplied by whatever pattern is applied) are in  
units of watts/steradian/sq.meter, or SI radiance.  There is no  
maximum, and values below zero are even permitted in cases where you  
are outside the standard RGB gamut.  You can compute luminance (in cd/ 
m^2) from these values by applying the formula:

	Lumiance = 179*(0.2651*Red + 0.6701*Green + 0.0648*Blue)

I hope this helps.
-Greg

> From: "Nick Calcagni" <nac342@drexel.edu>
> Date: May 22, 2008 11:38:57 AM PDT
>
> Thank you, both of you. But I was referring to the IES files from  
> lighting manufacturers as Greg said. Sorry for not being clear...  
> ies2rad seems to be exactly what I'm looking for.
>
> Should the following be a new topic?
>
> For something like the following (which is part of a converted IES  
> file, I think). But regardless, "glow" requires you to specify  
> "red" "green" and "blue" values. In the following they are equal:  
> 9477... for each.
>
> lamp_glow glow lamp
> 0
> 0
> 4 9477.696528 9477.697093 9477.697093    0
> So what units are these values in? This ratio of R to G to B shows  
> up in other parameters too (light, illum). Is there a max value to  
> these RGB values or for their total? That's one basic thing I've  
> always been confused about.
> Thank you,
> Nick

From smichel_designer at hotmail.com  Sat May 24 04:04:25 2008
From: smichel_designer at hotmail.com (steve michel)
Date: Sat May 24 04:04:57 2008
Subject: [Radiance-general] applied material to all faces of a genbox
In-Reply-To: <07CC9FF7-3E04-4DE8-9FC2-122D43ABFEA5@mac.com>
References: <100441490805021446hf63b5f9i9c3a0153dd258665@mail.gmail.com>
	<07CC9FF7-3E04-4DE8-9FC2-122D43ABFEA5@mac.com>
Message-ID: <BAY143-W428DA13550C2E6002DD371E0C00@phx.gbl>


For any interested , I too found that documentation useful to 'unblock' my initial difficulty with image mapping.

BTW Matiu Carr's Image mapping has a snippet of the picture.cal function code. This documentation is helpful but I found out the latest picture.cal packaged with radiance3.8 file has commented lines in picture.cal describing what each item does in the function.

Now Im wondering if there is a valid way of mapping a panaromic pic for a view through those wonderful daylight views we love so much.
The doc shows mapping on a tube with cyl.cal as way of doing just that. But that might interfere with skyglow and ruin the lux readings? Would a HDR mage mapped to the sky itself with sky luminance values 'indexed' to the bitmap's rgb values achieve a more accurate result?? 

Steve



----------------------------------------
> From: thdyoung@mac.com
> Subject: Re: [Radiance-general] applied material to all faces of a genbox
> Date: Sat, 3 May 2008 09:51:14 +0100
> To: radiance-general@radiance-online.org
> 
> hi Axel
> 
> i've printed the pdf out and am now going to log-out and read it over  
> a cup of coffee in good ol' Kentish Town Road.
> 
> Many thanks.
> 
> regards
> 
> tom
> 
> On 2 May 2008, at 22:46, Axel Jacobs wrote:
> 
>> Hi Tom,
>>
>> there is a really well-written document on the Radiance FTP site by
>> Matiu Carr titled 'Image Mapping'. It is in some obscure compression
>> and format (uuencoded Word 2.0 for Mac). You may pick up a PDF from
>> here:
>>
>> http://luminance.londonmet.ac.uk/pickup/image_mapping1.pdf
>>
>> Cheers
>>
>> Axel
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general@radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
> 
> Tom Young Architects
> 19 Bassett Street
> London
> NW5 4PG
> tel 020 7482 6150
> mob 07765 378 502
> fax 020 7691 7946
> thdyoung@mac.com
> http://homepage.mac.com/thdyoung/FileSharing1.html
> http://localstinker.blogspot.com/
> http://www.localstink.com/rktat/index.html
> 
> 
> 
> 
> 
> 
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general

_________________________________________________________________
Find hidden words, unscramble celebrity names, or try the ultimate crossword puzzle with Live Search Games. Play now!
http://g.msn.ca/ca55/212
From tbleicher at arcor.de  Sat May 24 09:05:40 2008
From: tbleicher at arcor.de (Thomas Bleicher)
Date: Sat May 24 09:08:13 2008
Subject: [Radiance-general] applied material to all faces of a genbox
In-Reply-To: <BAY143-W428DA13550C2E6002DD371E0C00@phx.gbl>
References: <100441490805021446hf63b5f9i9c3a0153dd258665@mail.gmail.com>
	<07CC9FF7-3E04-4DE8-9FC2-122D43ABFEA5@mac.com>
	<BAY143-W428DA13550C2E6002DD371E0C00@phx.gbl>
Message-ID: <D3926527-204A-4E8F-A802-19E963C28421@arcor.de>


On 24 May 2008, at 12:04, steve michel wrote:

> BTW Matiu Carr's Image mapping has a snippet of the picture.cal  
> function code. This documentation is helpful but I found out the  
> latest picture.cal packaged with radiance3.8 file has commented  
> lines in picture.cal describing what each item does in the function.
>
> Now Im wondering if there is a valid way of mapping a panaromic pic  
> for a view through those wonderful daylight views we love so much.

Simon Crone wrote 'skymap.cal' to map panoramic sky images to the
sky hemisphere. You can download examples (and the .cal file) here:

http://radsite.lbl.gov/radiance/pub/libraries/

> The doc shows mapping on a tube with cyl.cal as way of doing just  
> that. But that might interfere with skyglow and ruin the lux  
> readings? Would a HDR mage mapped to the sky itself with sky  
> luminance values 'indexed' to the bitmap's rgb values achieve a  
> more accurate result??

See Paul Debevec's work on HDR lighting:

http://www.debevec.org/probes/


Regards,
Thomas


From gregoryjward at gmail.com  Sat May 24 09:10:41 2008
From: gregoryjward at gmail.com (Greg Ward)
Date: Sat May 24 09:11:17 2008
Subject: [Radiance-general] applied material to all faces of a genbox
In-Reply-To: <BAY143-W428DA13550C2E6002DD371E0C00@phx.gbl>
References: <100441490805021446hf63b5f9i9c3a0153dd258665@mail.gmail.com>
	<07CC9FF7-3E04-4DE8-9FC2-122D43ABFEA5@mac.com>
	<BAY143-W428DA13550C2E6002DD371E0C00@phx.gbl>
Message-ID: <E1DF2A00-1D54-4C26-AD46-7F43B21D9603@lmi.net>

Hi Steve,

For a sky view, folks usually apply the fisheye.cal mapping using a  
fisheye capture as input.  Mapping appropriate sky distribution  
values is a challenge, although not one you have to worry about if  
you've managed to actually capture a good HDR sky.  (This is a tricky  
proposition -- see <http://gl.ict.usc.edu/skyprobes/> for examples.)

I remember discussing with the Visarc folks ways to use the output of  
gensky or gendaylit to "correct" a sky image that was inserted for  
purely artistic reasons.  Simply using the color from an image and  
the luminance from gensky doesn't work that well, since it would make  
eliminate important luminance changes at cloud boundaries and the  
like, I would think.  However, you should be able to combine the  
highest luminance frequencies from your sky photo along with the  
color to get a reasonable impression.

I took the following image:

	http://www.camerantics.org.uk/wallpapers/clouds.jpg

and ran the following:

	djpeg clouds.jpg | ra_ppm -r > clouds.pic
	pgblur -r 40 clouds.pic | pcomb -e 'hfs=1/li(1);ro=hfs*ri 
(2);go=hfs*gi(2);bo=hfs*bi(2)' - clouds.pic > hfclouds.pic

This should give you a picture that contains all the color and the  
high frequency luminance changes of the original, normalized to an  
average of 1.0.  Multiplying this against a sky distribution will  
give you the appearance of clouds while maintaining the overall  
luminance distribution.  Of course, there are caveats, as the high  
frequencies (and even the color) may affect your rendering due to  
their local influence on the output of gensky or gendaylit.

(Note: the djpeg program is not included with Radiance -- you may  
need to use Photosphere or Photoshop to convert a JPEG image to HDR  
format.)

I hope this helps.
-Greg

> From: steve michel <smichel_designer@hotmail.com>
> Date: May 24, 2008 4:04:25 AM PDT
>
> For any interested , I too found that documentation useful to  
> 'unblock' my initial difficulty with image mapping.
>
> BTW Matiu Carr's Image mapping has a snippet of the picture.cal  
> function code. This documentation is helpful but I found out the  
> latest picture.cal packaged with radiance3.8 file has commented  
> lines in picture.cal describing what each item does in the function.
>
> Now Im wondering if there is a valid way of mapping a panaromic pic  
> for a view through those wonderful daylight views we love so much.
> The doc shows mapping on a tube with cyl.cal as way of doing just  
> that. But that might interfere with skyglow and ruin the lux  
> readings? Would a HDR mage mapped to the sky itself with sky  
> luminance values 'indexed' to the bitmap's rgb values achieve a  
> more accurate result??
>
> Steve
>

From info at iebele.nl  Sat May 24 11:10:41 2008
From: info at iebele.nl (iebele)
Date: Sat May 24 11:11:15 2008
Subject: [Radiance-general] converting unfinished renderings
In-Reply-To: <EB124710ADB8554C930FADF760BB2BE7025DCEA8@n-yexc01.global.arup.com>
References: <100441490805231230w40c25a66r6fa4eadde77087cd@mail.gmail.com><48373CA1.5040107@iebele.nl>	<Pine.LNX.4.64.0805231754420.24799@rygar.gpcc.itd.umich.edu>
	<EB124710ADB8554C930FADF760BB2BE7025DCEA8@n-yexc01.global.arup.com>
Message-ID: <48385A21.3080903@iebele.nl>

Hi Mark, Christopher,

Using pfilt and adding ximage to the pipe works fine, if I had X on my 
system...
Ra_ppm and even ra_t16 converted unifinished renderings with succes in 
earlier days. These days I get an error.
Did you use "ra_ppm file.pic > file.pnm" on a recent distribution?

Iebele

> I believe pfilt can also take in a partial image. 
>
> -----Original Message-----
> From: radiance-general-bounces@radiance-online.org
> [mailto:radiance-general-bounces@radiance-online.org] On Behalf Of Mark
> Stock
> Sent: Friday, 23 May, 2008 5:58 PM
> To: info@iebele.nl; Radiance general discussion
> Subject: Re: [Radiance-general] converting unfinished renderings
>
> I've found that "ra_ppm file.pic > file.pnm" gives me an image 
> with black in the unfinished portions. Trying to add pnmtopng as 
> a pipe just returns a 0-length file, but using a two-step method 
> with ppm as an intermediary works.
>
> Mark
>
> On Fri, 23 May 2008, iebele wrote:
>
>   
>> Hi All,
>> I have acces to a rendering computer via putty - no X11, so I can not
>>     
> see the 
>   
>> status of renderings  using ximage. When I try to convert the
>>     
> rendering I get 
>   
>> the obvious "errror reading Radiance picture" error. Does anybody has
>>     
> a 
>   
>> workaround for this situation? In other words, is there any way to
>>     
> convert an 
>   
>> unfinished rendering?
>> -Iebele
>>
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general@radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
>>
>>     
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
> ____________________________________________________________
> Electronic mail messages entering and leaving Arup  business
> systems are scanned for acceptability of content and viruses
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
>   



From gregoryjward at gmail.com  Sat May 24 11:21:55 2008
From: gregoryjward at gmail.com (Greg Ward)
Date: Sat May 24 11:22:00 2008
Subject: [Radiance-general] converting unfinished renderings
In-Reply-To: <48385A21.3080903@iebele.nl>
References: <100441490805231230w40c25a66r6fa4eadde77087cd@mail.gmail.com><48373CA1.5040107@iebele.nl>	<Pine.LNX.4.64.0805231754420.24799@rygar.gpcc.itd.umich.edu>
	<EB124710ADB8554C930FADF760BB2BE7025DCEA8@n-yexc01.global.arup.com>
	<48385A21.3080903@iebele.nl>
Message-ID: <9B97B850-14CE-4D8B-8094-C6BE9F185F33@lmi.net>

Hi Iebele,

Just pipe pfilt -2 into ra_whatever and do it that way.  Pfilt is the  
only program officially designed to accept incomplete Radiance  
renderings.  Everything else will generate an error.

-Greg

> From: iebele <info@iebele.nl>
> Date: May 24, 2008 11:10:41 AM PDT
>
> Hi Mark, Christopher,
>
> Using pfilt and adding ximage to the pipe works fine, if I had X on  
> my system...
> Ra_ppm and even ra_t16 converted unifinished renderings with succes  
> in earlier days. These days I get an error.
> Did you use "ra_ppm file.pic > file.pnm" on a recent distribution?
>
> Iebele

From mstock at umich.edu  Sat May 24 17:21:15 2008
From: mstock at umich.edu (Mark Stock)
Date: Sat May 24 18:04:30 2008
Subject: [Radiance-general] converting unfinished renderings
In-Reply-To: <9B97B850-14CE-4D8B-8094-C6BE9F185F33@lmi.net>
References: <100441490805231230w40c25a66r6fa4eadde77087cd@mail.gmail.com><48373CA1.5040107@iebele.nl>
	<Pine.LNX.4.64.0805231754420.24799@rygar.gpcc.itd.umich.edu>
	<EB124710ADB8554C930FADF760BB2BE7025DCEA8@n-yexc01.global.arup.com>
	<48385A21.3080903@iebele.nl>
	<9B97B850-14CE-4D8B-8094-C6BE9F185F33@lmi.net>
Message-ID: <Pine.LNX.4.64.0805242019150.7057@rygar.gpcc.itd.umich.edu>

ra_ppm returns an error, but I still get a full-resolution, 
albeit partially black, image using ra_ppm from "rpict 
-version" -> "RADIANCE 4.0a".

Mark

On Sat, 24 May 2008, Greg Ward wrote:

> Hi Iebele,
>
> Just pipe pfilt -2 into ra_whatever and do it that way.  Pfilt is the only 
> program officially designed to accept incomplete Radiance renderings. 
> Everything else will generate an error.
>
> -Greg
>
>> From: iebele <info@iebele.nl>
>> Date: May 24, 2008 11:10:41 AM PDT
>> 
>> Hi Mark, Christopher,
>> 
>> Using pfilt and adding ximage to the pipe works fine, if I had X on my 
>> system...
>> Ra_ppm and even ra_t16 converted unifinished renderings with succes in 
>> earlier days. These days I get an error.
>> Did you use "ra_ppm file.pic > file.pnm" on a recent distribution?
>> 
>> Iebele
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>

From smichel_designer at hotmail.com  Sun May 25 18:43:30 2008
From: smichel_designer at hotmail.com (steve michel)
Date: Sun May 25 18:43:35 2008
Subject: [Radiance-general] applied material to all faces of a genbox
In-Reply-To: <D3926527-204A-4E8F-A802-19E963C28421@arcor.de>
References: <100441490805021446hf63b5f9i9c3a0153dd258665@mail.gmail.com>
	<07CC9FF7-3E04-4DE8-9FC2-122D43ABFEA5@mac.com>
	<BAY143-W428DA13550C2E6002DD371E0C00@phx.gbl> 
	<D3926527-204A-4E8F-A802-19E963C28421@arcor.de>
Message-ID: <BAY143-W7E5B48BE92060F0499A9FE0C20@phx.gbl>


I was thinking of horizon views instead of variable skies. After all a perfect blue or evenly gray sky is entirely plausible but a flat landscape without vegetation and neighboring buildings is rare for most architectural projects . Actual window views of landscape and setting is an instrinstic part of architecture. I've used simple tree models for near field modulation of window shading. But the horizon beyond is seldom a simple line (of course basic adjacent building blocks are required for accuracy) But instead could one method be photographing the 'view' and map it perhaps directly to the window with a  mkillum type function and transparency??   Ideally the sky model distribution would be filtered through by a visible bitmap of the 'view'. HDR luminance might serve since logically near and midfield horizon objects could 'mask' or alter the sky distribution with more accuracy with added bonus of an actual view.
sky dist--->windowmap filter (near field obstructions)--->windowglass--->room

Maybe Im re-inventing the wheel- So my question: what function could i use to do what I described (and is my reasoning sensible?)


steve

----------------------------------------
> From: tbleicher@arcor.de
> Subject: Re: [Radiance-general] applied material to all faces of a genbox
> Date: Sat, 24 May 2008 17:05:40 +0100
> To: radiance-general@radiance-online.org
> 
> 
> On 24 May 2008, at 12:04, steve michel wrote:
> 
>> BTW Matiu Carr's Image mapping has a snippet of the picture.cal  
>> function code. This documentation is helpful but I found out the  
>> latest picture.cal packaged with radiance3.8 file has commented  
>> lines in picture.cal describing what each item does in the function.
>>
>> Now Im wondering if there is a valid way of mapping a panaromic pic  
>> for a view through those wonderful daylight views we love so much.
> 
> Simon Crone wrote 'skymap.cal' to map panoramic sky images to the
> sky hemisphere. You can download examples (and the .cal file) here:
> 
> http://radsite.lbl.gov/radiance/pub/libraries/
> 
>> The doc shows mapping on a tube with cyl.cal as way of doing just  
>> that. But that might interfere with skyglow and ruin the lux  
>> readings? Would a HDR mage mapped to the sky itself with sky  
>> luminance values 'indexed' to the bitmap's rgb values achieve a  
>> more accurate result??
> 
> See Paul Debevec's work on HDR lighting:
> 
> http://www.debevec.org/probes/
> 
> 
> Regards,
> Thomas
> 
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general

_________________________________________________________________
If you like crossword puzzles, then you'll love Flexicon, a game which combines four overlapping crossword puzzles into one!
http://g.msn.ca/ca55/208
From tbleicher at arcor.de  Mon May 26 02:49:56 2008
From: tbleicher at arcor.de (Thomas Bleicher)
Date: Mon May 26 02:52:36 2008
Subject: [Radiance-general] applied material to all faces of a genbox
In-Reply-To: <BAY143-W7E5B48BE92060F0499A9FE0C20@phx.gbl>
References: <100441490805021446hf63b5f9i9c3a0153dd258665@mail.gmail.com>
	<07CC9FF7-3E04-4DE8-9FC2-122D43ABFEA5@mac.com>
	<BAY143-W428DA13550C2E6002DD371E0C00@phx.gbl>
	<D3926527-204A-4E8F-A802-19E963C28421@arcor.de>
	<BAY143-W7E5B48BE92060F0499A9FE0C20@phx.gbl>
Message-ID: <DF9605B7-5C84-4A27-9F64-020DEA76FECD@arcor.de>


On 26 May 2008, at 02:43, steve michel wrote:

> I was thinking of horizon views instead of variable skies.

[...]

> sky dist--->windowmap filter (near field obstructions)--- 
> >windowglass--->room
>
> Maybe Im re-inventing the wheel- So my question: what function  
> could i use to do what I described (and is my reasoning sensible?)

As long as you are inside of a building the 'illum' material should
do what you want:

1) Use 'mkillum' to create the 'illum' distribution for the window.
2) Create an image texture material for the window.
3) Change the 'illum' material created by 'mkillum' to use the texture
    as alternate material.
4) Render picture

If you have a photo of the outside scene that matches your viewpoint
you might eventually get convincing results. You will still have a
problem with adjusting the exposure or brightness of the outside view
to the appropriate exposure for the inside. In reality you wouldn't
be able to see outside and inside at the same time.

You could also use a post process to blend the image of the interior
with a view of the skydome/panoramic sky. Use the brightness of the
windows or a specially created mask to switch between foreground and
background image.

And then there's always Photoshop ...

Regards,
Thomas


From loscotec at libero.it  Mon May 26 03:51:03 2008
From: loscotec at libero.it (loscotec@libero.it)
Date: Mon May 26 03:51:30 2008
Subject: [Radiance-general] Specular instead of lambertian for indirect
Message-ID: <K1H253$A4824B574161CF4732646C7EE63E394D@libero.it>

Hy everybody!

I'm Lucio, finally graduated with a thesis about tunnel lighting. 

Now I'm keeping on it. And my present task is to try to obtain the best representation possible of asphalts. 

Until now I used r-tables converted in Radiance's BRDF definitions the Antonutto's way (with a slightly modified calculation file), for direct contribution and using lambertian material (as requested by BRDF's definitions) for indirect light. 

Now I'm going to measure asphalt photometry, with the hope of being able to individuate a Radiance specular material very close to asphalt behaviour. If it will be possible, I would then like to combine BRDF from r-table with specular materials instead of lambertian ones. 

I know that I could run two simulations and then combine the results, but it would be much cleaner to be able to use a new kind of primitive able to use BRDF for direct light and a specular material for indirect light. Is it possible to develop such primitive? I'm not very skilled about programming , but I can always learn and help in developing such primitive, if you like. I guess that such kind of primitives could be handy even for other applications. What do you think about it?

Lucio




.. Caminante no hay
camino, solo se hace
camino al andar .. 

                   
          ---   o
meglio   --- 

.. Caminante el
destino no es al
final de el viaje,
pero en todo el
andar ..


From smichel_designer at hotmail.com  Mon May 26 11:11:53 2008
From: smichel_designer at hotmail.com (steve michel)
Date: Mon May 26 11:11:56 2008
Subject: [Radiance-general] applied material to all faces of a genbox
In-Reply-To: <DF9605B7-5C84-4A27-9F64-020DEA76FECD@arcor.de>
References: <100441490805021446hf63b5f9i9c3a0153dd258665@mail.gmail.com>
	<07CC9FF7-3E04-4DE8-9FC2-122D43ABFEA5@mac.com>
	<BAY143-W428DA13550C2E6002DD371E0C00@phx.gbl>
	<D3926527-204A-4E8F-A802-19E963C28421@arcor.de>
	<BAY143-W7E5B48BE92060F0499A9FE0C20@phx.gbl> 
	<DF9605B7-5C84-4A27-9F64-020DEA76FECD@arcor.de>
Message-ID: <BAY143-W533BCD17156D1C1A5E0F7AE0C20@phx.gbl>


 
It occured to me that since cyl.cal already exist, could mkillum the sky/ground light distribution be applied to the cylinder of a panaromic view? That would eliminate having to match the viewpoint angle with the picture. As you no doubt see, I want to avoid 'forking' renders and get the accuracy and presentation in one render.
 
steve
 
 
 
 
 
 
> From: tbleicher@arcor.de> Subject: Re: [Radiance-general] applied material to all faces of a genbox> Date: Mon, 26 May 2008 10:49:56 +0100> To: radiance-general@radiance-online.org> > > On 26 May 2008, at 02:43, steve michel wrote:> > > I was thinking of horizon views instead of variable skies.> > [...]> > > sky dist--->windowmap filter (near field obstructions)--- > > >windowglass--->room> >> > Maybe Im re-inventing the wheel- So my question: what function > > could i use to do what I described (and is my reasoning sensible?)> > As long as you are inside of a building the 'illum' material should> do what you want:> > 1) Use 'mkillum' to create the 'illum' distribution for the window.> 2) Create an image texture material for the window.> 3) Change the 'illum' material created by 'mkillum' to use the texture> as alternate material.> 4) Render picture> > If you have a photo of the outside scene that matches your viewpoint> you might eventually get convincing results. You will still have a> problem with adjusting the exposure or brightness of the outside view> to the appropriate exposure for the inside. In reality you wouldn't> be able to see outside and inside at the same time.> > You could also use a post process to blend the image of the interior> with a view of the skydome/panoramic sky. Use the brightness of the> windows or a specially created mask to switch between foreground and> background image.> > And then there's always Photoshop ...> > Regards,> Thomas> > > _______________________________________________> Radiance-general mailing list> Radiance-general@radiance-online.org> http://www.radiance-online.org/mailman/listinfo/radiance-general
_________________________________________________________________

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20080526/18f6d657/attachment.htm
From tbleicher at arcor.de  Tue May 27 13:48:40 2008
From: tbleicher at arcor.de (Thomas Bleicher)
Date: Tue May 27 13:51:35 2008
Subject: [Radiance-general] Re: panoramic images [was: applied material ...]
In-Reply-To: <BAY143-W533BCD17156D1C1A5E0F7AE0C20@phx.gbl>
References: <100441490805021446hf63b5f9i9c3a0153dd258665@mail.gmail.com>
	<07CC9FF7-3E04-4DE8-9FC2-122D43ABFEA5@mac.com>
	<BAY143-W428DA13550C2E6002DD371E0C00@phx.gbl>
	<D3926527-204A-4E8F-A802-19E963C28421@arcor.de>
	<BAY143-W7E5B48BE92060F0499A9FE0C20@phx.gbl>
	<DF9605B7-5C84-4A27-9F64-020DEA76FECD@arcor.de>
	<BAY143-W533BCD17156D1C1A5E0F7AE0C20@phx.gbl>
Message-ID: <AD2B8438-5445-43BA-A0BE-6D9D4509D372@arcor.de>


On 26 May 2008, at 19:11, steve michel wrote:

> It occured to me that since cyl.cal already exist, could mkillum  
> the sky/ground light distribution be applied to the cylinder of a  
> panaromic view? That would eliminate having to match the viewpoint  
> angle with the picture. As you no doubt see, I want to avoid  
> 'forking' renders and get the accuracy and presentation in one render.

According to the man page mkillum does not work for cylinders (it  
works for
spheres, though, but there is no point in creating a sphere to  
simulate the
sky).

Perhaps you could use Radzillas 'ghost' material. IIRC that was a  
material
that was visible but did not influence the lighting calculations. If  
this is true
you can create a cylinder around your scene without compromising the sky
distribution.

Regards,
Thomas


From gregoryjward at gmail.com  Tue May 27 20:12:23 2008
From: gregoryjward at gmail.com (Greg Ward)
Date: Tue May 27 20:12:29 2008
Subject: [Radiance-general] Re: panoramic images [was: applied material
	...]
In-Reply-To: <AD2B8438-5445-43BA-A0BE-6D9D4509D372@arcor.de>
References: <100441490805021446hf63b5f9i9c3a0153dd258665@mail.gmail.com>
	<07CC9FF7-3E04-4DE8-9FC2-122D43ABFEA5@mac.com>
	<BAY143-W428DA13550C2E6002DD371E0C00@phx.gbl>
	<D3926527-204A-4E8F-A802-19E963C28421@arcor.de>
	<BAY143-W7E5B48BE92060F0499A9FE0C20@phx.gbl>
	<DF9605B7-5C84-4A27-9F64-020DEA76FECD@arcor.de>
	<BAY143-W533BCD17156D1C1A5E0F7AE0C20@phx.gbl>
	<AD2B8438-5445-43BA-A0BE-6D9D4509D372@arcor.de>
Message-ID: <E4AEE691-A2DF-4C5C-B63F-B4958C94FC04@lmi.net>

I like Thomas' original suggestion of mapping an image to the window  
and using an illum with the appropriate sky distribution.  If you  
simply use the fisheye.cal mapping I recommended earlier and apply it  
to a fisheye capture out the window, all should be well for any  
perspective view.  However, you will need a fairly high resolution  
fisheye image to make this work.  The description goes something like  
this:

# Define sky
!gensky 5 27 12

# Define high frequency view out window
void colorpict west_view
9 red green blue outsideHF.pic fisheye.cal fish_u fish_v -rz 90
0
0

# Apply view to sky only for West elevation
skyfunc mixfunc full_sky_pat
4 west_view void "if(Dx,0,-Dx^.4)" .
0
0

# Apply this to the sky
full_sky_pat glow sky_glow
0
0
4 1 1 1 0

sky_glow source sky
0
0
4 0 0 1 360

# Define window glazing
void glass window_glass
0
0
3 .92 .92 .92

# Window angle affects transmittance, so use approximation to this
skyfunc brightfunc win_func
2 winxmit winxmit.cal
0
0

# Define the window as an illum minus the exterior pattern
win_func illum window_illum
1 window_glass
0
3 1 1 1

I tried it, and it seems to work OK.

-Greg

> From: Thomas Bleicher <tbleicher@arcor.de>
> Date: May 27, 2008 1:48:40 PM PDT
>
> On 26 May 2008, at 19:11, steve michel wrote:
>
>> It occured to me that since cyl.cal already exist, could mkillum  
>> the sky/ground light distribution be applied to the cylinder of a  
>> panaromic view? That would eliminate having to match the viewpoint  
>> angle with the picture. As you no doubt see, I want to avoid  
>> 'forking' renders and get the accuracy and presentation in one  
>> render.
>
> According to the man page mkillum does not work for cylinders (it  
> works for
> spheres, though, but there is no point in creating a sphere to  
> simulate the
> sky).
>
> Perhaps you could use Radzillas 'ghost' material. IIRC that was a  
> material
> that was visible but did not influence the lighting calculations.  
> If this is true
> you can create a cylinder around your scene without compromising  
> the sky
> distribution.
>
> Regards,
> Thomas

From gregoryjward at gmail.com  Tue May 27 22:23:10 2008
From: gregoryjward at gmail.com (Greg Ward)
Date: Tue May 27 22:23:20 2008
Subject: [Radiance-general] Specular instead of lambertian for indirect
In-Reply-To: <K1H253$A4824B574161CF4732646C7EE63E394D@libero.it>
References: <K1H253$A4824B574161CF4732646C7EE63E394D@libero.it>
Message-ID: <C291F5E8-D316-4476-90E8-4EB2ED8C88DA@lmi.net>

Hi Lucio,

> I know that I could run two simulations and then combine the  
> results, but it would be much cleaner to be able to use a new kind  
> of primitive able to use BRDF for direct light and a specular  
> material for indirect light. Is it possible to develop such  
> primitive? I'm not very skilled about programming , but I can  
> always learn and help in developing such primitive, if you like. I  
> guess that such kind of primitives could be handy even for other  
> applications. What do you think about it?

Do you want the specular part to be 'pure' -- that is, mirror-like?   
If so, this can be achieved easily enough by specifying a mixfunc  
with a fixed parameter, e.g.:

void metal specular_bit
0
0
5 0.1 0.1 0.1 1 0

void plasdata brdf_data
{your arguments here}

void mixfunc asphalt
4 specular_bit brdf_data 0.5 .
0
0

Since we are mixing half of each, you need to double each component  
(the specular_bit and the brdf_data), but otherwise this should work.

If, on the other hand, you want a specular component with a soft  
lobe, it gets a little trickier.  Essentially, you want to modify  
your BRDF data such that the Gaussian model you are using for the  
specular_bit is taken out.  The basic principle still applies, however.

I hope this makes sense.
-Greg

From smichel_designer at hotmail.com  Wed May 28 10:26:39 2008
From: smichel_designer at hotmail.com (steve michel)
Date: Wed May 28 10:26:51 2008
Subject: [Radiance-general] Re: panoramic images [was: applied material
	...]
In-Reply-To: <E4AEE691-A2DF-4C5C-B63F-B4958C94FC04@lmi.net>
References: <100441490805021446hf63b5f9i9c3a0153dd258665@mail.gmail.com>
	<07CC9FF7-3E04-4DE8-9FC2-122D43ABFEA5@mac.com>
	<BAY143-W428DA13550C2E6002DD371E0C00@phx.gbl>
	<D3926527-204A-4E8F-A802-19E963C28421@arcor.de>
	<BAY143-W7E5B48BE92060F0499A9FE0C20@phx.gbl>
	<DF9605B7-5C84-4A27-9F64-020DEA76FECD@arcor.de>
	<BAY143-W533BCD17156D1C1A5E0F7AE0C20@phx.gbl>
	<AD2B8438-5445-43BA-A0BE-6D9D4509D372@arcor.de> 
	<E4AEE691-A2DF-4C5C-B63F-B4958C94FC04@lmi.net>
Message-ID: <BAY143-W53833D58489363B88094D7E0BC0@phx.gbl>


Yes the parallax issue of having to match the camera angle with the render view:
The fisheye pic seems like an elegant solution.
Ill work with that.. I just wanted to find a good method 'on paper' first before committing.
 
Plenty of fisheye pics out there to try this out with..
 
thanks again Thomas, Greg
Steve
 
 
> Subject: Re: [Radiance-general] Re: panoramic images [was: applied material ...]> Date: Tue, 27 May 2008 20:12:23 -0700> To: radiance-general@radiance-online.org> From: gregoryjward@gmail.com> > I like Thomas' original suggestion of mapping an image to the window > and using an illum with the appropriate sky distribution. If you > simply use the fisheye.cal mapping I recommended earlier and apply it > to a fisheye capture out the window, all should be well for any > perspective view. However, you will need a fairly high resolution > fisheye image to make this work. The description goes something like > this:> > # Define sky> !gensky 5 27 12> > # Define high frequency view out window> void colorpict west_view> 9 red green blue outsideHF.pic fisheye.cal fish_u fish_v -rz 90> 0> 0> > # Apply view to sky only for West elevation> skyfunc mixfunc full_sky_pat> 4 west_view void "if(Dx,0,-Dx^.4)" .> 0> 0> > # Apply this to the sky> full_sky_pat glow sky_glow> 0> 0> 4 1 1 1 0> > sky_glow source sky> 0> 0> 4 0 0 1 360> > # Define window glazing> void glass window_glass> 0> 0> 3 .92 .92 .92> > # Window angle affects transmittance, so use approximation to this> skyfunc brightfunc win_func> 2 winxmit winxmit.cal> 0> 0> > # Define the window as an illum minus the exterior pattern> win_func illum window_illum> 1 window_glass> 0> 3 1 1 1> > I tried it, and it seems to work OK.> > -Greg> > > From: Thomas Bleicher <tbleicher@arcor.de>> > Date: May 27, 2008 1:48:40 PM PDT> >> > On 26 May 2008, at 19:11, steve michel wrote:> >> >> It occured to me that since cyl.cal already exist, could mkillum > >> the sky/ground light distribution be applied to the cylinder of a > >> panaromic view? That would eliminate having to match the viewpoint > >> angle with the picture. As you no doubt see, I want to avoid > >> 'forking' renders and get the accuracy and presentation in one > >> render.> >> > According to the man page mkillum does not work for cylinders (it > > works for> > spheres, though, but there is no point in creating a sphere to > > simulate the> > sky).> >> > Perhaps you could use Radzillas 'ghost' material. IIRC that was a > > material> > that was visible but did not influence the lighting calculations. > > If this is true> > you can create a cylinder around your scene without compromising > > the sky> > distribution.> >> > Regards,> > Thomas> > _______________________________________________> Radiance-general mailing list> Radiance-general@radiance-online.org> http://www.radiance-online.org/mailman/listinfo/radiance-general
_________________________________________________________________
Try Chicktionary, a game that tests how many words you can form from the letters given. Find this and more puzzles at Live Search Games!
http://g.msn.ca/ca55/207
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20080528/e33ff66e/attachment.html
From info at iebele.nl  Wed May 28 15:28:37 2008
From: info at iebele.nl (iebele)
Date: Wed May 28 15:28:41 2008
Subject: [Radiance-general] ICC profiles 
In-Reply-To: <C291F5E8-D316-4476-90E8-4EB2ED8C88DA@lmi.net>
References: <K1H253$A4824B574161CF4732646C7EE63E394D@libero.it>
	<C291F5E8-D316-4476-90E8-4EB2ED8C88DA@lmi.net>
Message-ID: <483DDC95.9040707@iebele.nl>

Dear group,

I have a tone-mapping problem with printing hdr files, which are 
converted to 8-bit Photoshop-RGB colorspace.
In the print some clipping occurs.  To solve the clipping I was thinking 
to use normtiff  or pcond in combination with a Photoshop ICC profile 
(.icm files), which I a received from the printer operator. Regretably I 
don't understand the meaning of the parameters of normtiff and pcond 
enough, not even enough to get started . Does anybody have an idea if 
and how the data from ICC profiles can be used by normtiff?
The lines below are copy/paste from an .icm file, and i wonder if these 
can be of any use in tonemapping. Are the the tabular organized XYZ_X   
XYZ_Y   XYZ_Z valuable for this kind of application?

Any hints are very much appreciated,

Iebele



CREATED    "1/12/2007"  # Time: 16:17
INSTRUMENTATION    "SpectroScan"
MEASUREMENT_SOURCE    "Illumination=D50    ObserverAngle=2?    
WhiteBase=Abs    Filter=Unknown"
KEYWORD    "SampleID"
KEYWORD    "SAMPLE_NAME"
NUMBER_OF_FIELDS    8
BEGIN_DATA_FORMAT
SampleID    SAMPLE_NAME    XYZ_X    XYZ_Y    XYZ_Z    LAB_L    LAB_A    
LAB_B
END_DATA_FORMAT
NUMBER_OF_SETS    918
BEGIN_DATA
1    A1    2.48    2.52    1.96    18.00    1.10    1.12
2    A2    3.04    3.14    2.53    20.61    0.15    0.53
3    A3    3.64    4.17    3.21    24.23    -5.73    1.61
4    A4    4.11    5.21    3.74    27.32    -12.11    3.35
5    A5    4.73    6.79    4.55    31.32    -20.99    5.45
6    A6    5.26    8.53    5.03    35.06    -30.46    9.31
etc...


From grobe at gmx.net  Thu May 29 05:24:12 2008
From: grobe at gmx.net (Lars O. Grobe)
Date: Thu May 29 05:24:23 2008
Subject: [Radiance-general] getting pixel value at x,y
Message-ID: <1212063852.14951.8.camel@Optiplex755>

Hi list,

I wonder if noone else came to this problem, or if I just do not see the
answer to a rather simple problem.

Radiance comes with pvalue to extract pixel values of images. This is
fine, as long as images are small - just redirect to a file, and the
values can be read according to the coordinates written at the beginning
of the lines.

Now, for large images, this becomes a pain. E.g. if I want to get the
values of 64pixels, with known coordinates, I cannot read out these with
pvalue, but first must transform the complete image to a pvalue
formatted text file. These files can become hundreds of MB in size with
higher resolutions.

Is there an easier and more efficient way to go? E.g. cropping the image
first to the pixels wanted? I guess the only way to do so is pcomb,
right?

Lars.


From loscotec at libero.it  Thu May 29 05:30:04 2008
From: loscotec at libero.it (loscotec@libero.it)
Date: Thu May 29 05:30:10 2008
Subject: [Radiance-general] getting pixel value at x,y
Message-ID: <K1MQQ4$6DC71BD4232A92E2B81E7D398A030EE8@libero.it>

I was interested about this as well.. !!

Lucio

.Hi list,
.
.I wonder if noone else came to this problem, or if I just do not see the
.answer to a rather simple problem.
.
.Radiance comes with pvalue to extract pixel values of images. This is
.fine, as long as images are small - just redirect to a file, and the
.values can be read according to the coordinates written at the beginning
.of the lines.
.
.Now, for large images, this becomes a pain. E.g. if I want to get the
.values of 64pixels, with known coordinates, I cannot read out these with
.pvalue, but first must transform the complete image to a pvalue
.formatted text file. These files can become hundreds of MB in size with
.higher resolutions.
.
.Is there an easier and more efficient way to go? E.g. cropping the image
.first to the pixels wanted? I guess the only way to do so is pcomb,
.right?
.
.Lars.
.
.
._______________________________________________
.Radiance-general mailing list
.Radiance-general@radiance-online.org
.http://www.radiance-online.org/mailman/listinfo/radiance-general
.

.. Caminante no hay
camino, solo se hace
camino al andar .. 

                   
          ---   o
meglio   --- 

.. Caminante el
destino no es al
final de el viaje,
pero en todo el
andar ..


From loscotec at libero.it  Thu May 29 05:46:42 2008
From: loscotec at libero.it (loscotec@libero.it)
Date: Thu May 29 05:46:49 2008
Subject: [Radiance-general] Specular instead of lambertian for indirect
Message-ID: <K1MRHU$86E2557D83E74F62842B432665C0C8D7@libero.it>

Thank you for your reply greg !

Actually I think mixfunc wouldn't fit my needs.

I try to explain what I would like to obtain from another perspective. 

I would like to use a specular material representing asphalt (not mirror-like specular material). This will be obtained by trial and errors with metal primitives, using the closer rapresentation, if possible. It will lead surely to a certain error in representation, then, to minimize it, as i will have photometrics values and then BRDF definitions, I would like to use BRDF too. 

If I am right, right now, BRDF can just be considered lambertian for the indirect calculation. I would like than to force Radiance to consider them specular (defining specular values by hand). 


Is it possible? Is it hard? ANy suggestion for a different approach?

As about using mixfunc, if understood it right, the problem would be that direct calculation would be performed on both brdf and specular, leading me to a quite correct result (due to brdf), but influenced form the specular_bit.

As about the indirect calculation it would be influenced by specular (which is ok) but also from lambertian (indirect calculation of brdf). 

Am I wrong? 

Lucio


.Hi Lucio,
.
.> I know that I could run two simulations and then combine the  
.> results, but it would be much cleaner to be able to use a new kind  
.> of primitive able to use BRDF for direct light and a specular  
.> material for indirect light. Is it possible to develop such  
.> primitive? I'm not very skilled about programming , but I can  
.> always learn and help in developing such primitive, if you like. I  
.> guess that such kind of primitives could be handy even for other  
.> applications. What do you think about it?
.
.Do you want the specular part to be 'pure' -- that is, mirror-like?   
.If so, this can be achieved easily enough by specifying a mixfunc  
.with a fixed parameter, e.g.:
.
.void metal specular_bit
.0
.0
.5 0.1 0.1 0.1 1 0
.
.void plasdata brdf_data
.{your arguments here}
.
.void mixfunc asphalt
.4 specular_bit brdf_data 0.5 .
.0
.0
.
.Since we are mixing half of each, you need to double each component  
.(the specular_bit and the brdf_data), but otherwise this should work.
.
.If, on the other hand, you want a specular component with a soft  
.lobe, it gets a little trickier.  Essentially, you want to modify  
.your BRDF data such that the Gaussian model you are using for the  
.specular_bit is taken out.  The basic principle still applies, however.
.
.I hope this makes sense.
.-Greg
.
._______________________________________________
.Radiance-general mailing list
.Radiance-general@radiance-online.org
.http://www.radiance-online.org/mailman/listinfo/radiance-general
.

.. Caminante no hay
camino, solo se hace
camino al andar .. 

                   
          ---   o
meglio   --- 

.. Caminante el
destino no es al
final de el viaje,
pero en todo el
andar ..


From jedev at visarc.com  Thu May 29 07:25:58 2008
From: jedev at visarc.com (Jack de Valpine)
Date: Thu May 29 07:26:34 2008
Subject: [Radiance-general] getting pixel value at x,y
In-Reply-To: <1212063852.14951.8.camel@Optiplex755>
References: <1212063852.14951.8.camel@Optiplex755>
Message-ID: <483EBCF6.2070207@visarc.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: jedev.vcf
Type: text/x-vcard
Size: 251 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20080529/fc1b427e/jedev.vcf
From gregoryjward at gmail.com  Thu May 29 07:49:04 2008
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu May 29 07:49:13 2008
Subject: [Radiance-general] getting pixel value at x,y
In-Reply-To: <483EBCF6.2070207@visarc.com>
References: <1212063852.14951.8.camel@Optiplex755>
	<483EBCF6.2070207@visarc.com>
Message-ID: <12800B97-EF9F-4022-AA0A-EEC79B6DF8F7@lmi.net>

Just adding my two cents to this...

The pfilt option (1) Jack suggests is a good one, and may be combined  
with the others as well.  The pcompos option (2) is a little more  
risky, as this program ignores/removes whatever exposure changes were  
made to the picture, so if it isn't straight out of rpict, you may  
get different values than you expect.  The scripting option (3) is  
very well-done, but I don't think you need to include the rayinit.cal  
file on the command line, as Jack has transcribed and modified the  
relevant functions into the -e arguments.

One other comment is if you only want a few pixels out of an image,  
vwrays connected to rtrace is much simpler and faster.  Rather than  
generating a whole picture, just use:

vwrays -i -vf view.vf -x ${xres} -y ${yres} | rtrace [options] octree

Then, on the input to vwrays, type (or redirect) the desired x and y  
pixel coordinates; vwrays will produce the corresponding ray sample,  
which rtrace will compute for you.

Finally, no one mentioned that ximage (and Photosphere and others)  
can query individual values interactively.  I don't know if this will  
work in your application.

Cheers,
-Greg

> From: Jack de Valpine <jedev@visarc.com>
> Date: May 29, 2008 7:25:58 AM PDT
>
> Hi Lars and Lucio,
>
> I can think of three possible ways to do this.
>
> 1) pfilt
> You can use pfilt to reduce the size of the image to something more  
> manageable. I am not sure (this means see what others weigh in on  
> this) but I think for some applications this may actually result in  
> better overall values in the image as surrounding pixels are being  
> averaged together by the reduction.
> 2) pcompos
> You can use pcompos to crop out an area of interest. You will have  
> to read the man page carefully to figure this out but it is  
> certainly doable.
> 3) script
> You can either write a script (perl for example) that will read the  
> stdout from pvalue and only write values within a given XY pixel  
> range or you can use radiance arcana as such:
> pvalue -h -H  +d <name_of_image.pic> | rcalc -f <path_to_lib/ 
> rayinit.cal> -e 'boundp(a, x, b) = if(a-x, 0, if(x-b, 0, 1));  
> xyboundp(xa, x, xb, ya, y, yb) = and(boundp(xa, x, xb), boundp(ya,  
> y, yb)); cond  = xyboundp( <xstart>, $1, <xend>, <ystart>, $2,  
> <yend>); $1 = $1; $2 = $2; $3 = $3; $4 = $4; $5 = $5;'
>
> This should work presuming I transcribed into my mail client  
> correctly....
>
> where you need to input:
> <name_of_image.pic>
> <path_to_lib/rayinit.cal>
> <xstart>
> <xend>
> <ystart>
> <yend>
> I hope this helps.
>
> Best,
>
> -Jack de Valpine
>
> Lars O. Grobe wrote:
>>
>> Hi list, I wonder if noone else came to this problem, or if I just  
>> do not see the answer to a rather simple problem. Radiance comes  
>> with pvalue to extract pixel values of images. This is fine, as  
>> long as images are small - just redirect to a file, and the values  
>> can be read according to the coordinates written at the beginning  
>> of the lines. Now, for large images, this becomes a pain. E.g. if  
>> I want to get the values of 64pixels, with known coordinates, I  
>> cannot read out these with pvalue, but first must transform the  
>> complete image to a pvalue formatted text file. These files can  
>> become hundreds of MB in size with higher resolutions. Is there an  
>> easier and more efficient way to go? E.g. cropping the image first  
>> to the pixels wanted? I guess the only way to do so is pcomb,  
>> right? Lars.

From loscotec at libero.it  Thu May 29 08:04:13 2008
From: loscotec at libero.it (loscotec@libero.it)
Date: Thu May 29 08:04:21 2008
Subject: [Radiance-general] getting pixel value at x,y
Message-ID: <K1MXV1$A8EF7FB1ED64552468FE8A6118DC0F07@libero.it>

I don't know what was Lars looking for, but what I was looking for was something like ximage do, but controlled by a script. I mean, as ximage is able to comunicate a value starting from mouse position and then by x,y coordinates, is it possible to do the same thing giving a numeric input instead of a mouse one (and getting a numeric output as well?


At the time I 'needed' it I skipped the problem with rtrace as suggested, but I am still curious to know if there was a simpler solution (as the one described above)

Thank you for interesting replies anyway.


Lucio


.Just adding my two cents to this...
.
.The pfilt option (1) Jack suggests is a good one, and may be combined  
.with the others as well.  The pcompos option (2) is a little more  
.risky, as this program ignores/removes whatever exposure changes were  
.made to the picture, so if it isn't straight out of rpict, you may  
.get different values than you expect.  The scripting option (3) is  
.very well-done, but I don't think you need to include the rayinit.cal  
.file on the command line, as Jack has transcribed and modified the  
.relevant functions into the -e arguments.
.
.One other comment is if you only want a few pixels out of an image,  
.vwrays connected to rtrace is much simpler and faster.  Rather than  
.generating a whole picture, just use:
.
.vwrays -i -vf view.vf -x ${xres} -y ${yres} | rtrace [options] octree
.
.Then, on the input to vwrays, type (or redirect) the desired x and y  
.pixel coordinates; vwrays will produce the corresponding ray sample,  
.which rtrace will compute for you.
.
.Finally, no one mentioned that ximage (and Photosphere and others)  
.can query individual values interactively.  I don't know if this will  
.work in your application.
.
.Cheers,
.-Greg
.
.> From: Jack de Valpine <jedev@visarc.com>
.> Date: May 29, 2008 7:25:58 AM PDT
.>
.> Hi Lars and Lucio,
.>
.> I can think of three possible ways to do this.
.>
.> 1) pfilt
.> You can use pfilt to reduce the size of the image to something more  
.> manageable. I am not sure (this means see what others weigh in on  
.> this) but I think for some applications this may actually result in  
.> better overall values in the image as surrounding pixels are being  
.> averaged together by the reduction.
.> 2) pcompos
.> You can use pcompos to crop out an area of interest. You will have  
.> to read the man page carefully to figure this out but it is  
.> certainly doable.
.> 3) script
.> You can either write a script (perl for example) that will read the  
.> stdout from pvalue and only write values within a given XY pixel  
.> range or you can use radiance arcana as such:
.> pvalue -h -H  +d <name_of_image.pic> | rcalc -f <path_to_lib/ 
.> rayinit.cal> -e 'boundp(a, x, b) = if(a-x, 0, if(x-b, 0, 1));  
.> xyboundp(xa, x, xb, ya, y, yb) = and(boundp(xa, x, xb), boundp(ya,  
.> y, yb)); cond  = xyboundp( <xstart>, $1, <xend>, <ystart>, $2,  
.> <yend>); $1 = $1; $2 = $2; $3 = $3; $4 = $4; $5 = $5;'
.>
.> This should work presuming I transcribed into my mail client  
.> correctly....
.>
.> where you need to input:
.> <name_of_image.pic>
.> <path_to_lib/rayinit.cal>
.> <xstart>
.> <xend>
.> <ystart>
.> <yend>
.> I hope this helps.
.>
.> Best,
.>
.> -Jack de Valpine
.>
.> Lars O. Grobe wrote:
.>>
.>> Hi list, I wonder if noone else came to this problem, or if I just  
.>> do not see the answer to a rather simple problem. Radiance comes  
.>> with pvalue to extract pixel values of images. This is fine, as  
.>> long as images are small - just redirect to a file, and the values  
.>> can be read according to the coordinates written at the beginning  
.>> of the lines. Now, for large images, this becomes a pain. E.g. if  
.>> I want to get the values of 64pixels, with known coordinates, I  
.>> cannot read out these with pvalue, but first must transform the  
.>> complete image to a pvalue formatted text file. These files can  
.>> become hundreds of MB in size with higher resolutions. Is there an  
.>> easier and more efficient way to go? E.g. cropping the image first  
.>> to the pixels wanted? I guess the only way to do so is pcomb,  
.>> right? Lars.
.
._______________________________________________
.Radiance-general mailing list
.Radiance-general@radiance-online.org
.http://www.radiance-online.org/mailman/listinfo/radiance-general
.

.. Caminante no hay
camino, solo se hace
camino al andar .. 

                   
          ---   o
meglio   --- 

.. Caminante el
destino no es al
final de el viaje,
pero en todo el
andar ..


From gregoryjward at gmail.com  Thu May 29 08:04:40 2008
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu May 29 08:04:48 2008
Subject: [Radiance-general] Specular instead of lambertian for indirect
In-Reply-To: <K1MRHU$86E2557D83E74F62842B432665C0C8D7@libero.it>
References: <K1MRHU$86E2557D83E74F62842B432665C0C8D7@libero.it>
Message-ID: <31778DE5-799A-43E4-9287-24D7126B4C48@lmi.net>

Hi Lucio,

> As about using mixfunc, if understood it right, the problem would  
> be that direct calculation would be performed on both brdf and  
> specular, leading me to a quite correct result (due to brdf), but  
> influenced form the specular_bit.

This is why you would have to subtract the specular lobe from your  
BRDF model.  In effect the BRDF would be a "correction" to the  
Gaussian lobe model, or at least the direct part.  The indirect would  
be as good as it's going to be without writing your own BRDF sampler,  
which would be both difficult and extremely costly in any rendering  
you might do.

> As about the indirect calculation it would be influenced by  
> specular (which is ok) but also from lambertian (indirect  
> calculation of brdf).

If the diffuse part of your reflectance model is zero, then there's  
no Lambertian calculation.

-Greg

From grobe at gmx.net  Thu May 29 08:52:51 2008
From: grobe at gmx.net (Lars O. Grobe)
Date: Thu May 29 08:52:59 2008
Subject: [Radiance-general] getting pixel value at x,y
In-Reply-To: <12800B97-EF9F-4022-AA0A-EEC79B6DF8F7@lmi.net>
References: <1212063852.14951.8.camel@Optiplex755>
	<483EBCF6.2070207@visarc.com>
	<12800B97-EF9F-4022-AA0A-EEC79B6DF8F7@lmi.net>
Message-ID: <1212076371.22675.6.camel@Optiplex755>

First thanks for the replies and suggestions. What I actually want to
do, is to sample pixel values over an area and get the average. This is
done for a HDR image assembled of photographs, so I cannot use vwrays.
Pfilt also does not work, as I need the samples to hit a light source in
a black (dark) surrounding. What I did now is writing a script in perl
which filters the output of pvalue, but still, as these files are large
and I am working on batches of such images, it is not that comfortable
to do so (it takes time). I am taking these values into my script
anyway, so writing this was not the problem, it is more about the
unnecessary lookups of all those pixels that are just not that interesting.

CU Lars.


From gregoryjward at gmail.com  Thu May 29 10:25:53 2008
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu May 29 10:26:38 2008
Subject: [Radiance-general] getting pixel value at x,y
In-Reply-To: <1212076371.22675.6.camel@Optiplex755>
References: <1212063852.14951.8.camel@Optiplex755>
	<483EBCF6.2070207@visarc.com>
	<12800B97-EF9F-4022-AA0A-EEC79B6DF8F7@lmi.net>
	<1212076371.22675.6.camel@Optiplex755>
Message-ID: <FBB816B8-DAA3-4FC5-9D8C-0857DBC4D786@lmi.net>

Hi Lars,

So, this is why being specific about your problem helps -- we avoid a  
lot of spurious suggestions that don't apply.

The best/fastest solution for rectangular areas is pcompos piped into  
pvalue and total, like so:

	pcomb -o captured.pic \
		| pcompos -x ${box_width} -y ${box_height} - -${left} -${lower} \
		| pvalue -h -H -df | total -if3 -m

The initial pcomb command is necessary to apply the exposure values  
correctly.  If you want luminance (rather than radiance) output, use:

	pcomb -s 179 -o captured.pic \
		| pcompos -x ${box_width} -y ${box_height} - -${left} -${lower} \
		| pvalue -h -H -b -df | total -if -m

Either of these commands will be very fast compared to any script you  
might concoct.

-Greg

> From: "Lars O. Grobe" <grobe@gmx.net>
> Date: May 29, 2008 8:52:51 AM PDT
>
> First thanks for the replies and suggestions. What I actually want to
> do, is to sample pixel values over an area and get the average.  
> This is
> done for a HDR image assembled of photographs, so I cannot use vwrays.
> Pfilt also does not work, as I need the samples to hit a light  
> source in
> a black (dark) surrounding. What I did now is writing a script in perl
> which filters the output of pvalue, but still, as these files are  
> large
> and I am working on batches of such images, it is not that comfortable
> to do so (it takes time). I am taking these values into my script
> anyway, so writing this was not the problem, it is more about the
> unnecessary lookups of all those pixels that are just not that  
> interesting.
>
> CU Lars.

From info at iebele.nl  Thu May 29 12:39:13 2008
From: info at iebele.nl (iebele)
Date: Thu May 29 12:39:21 2008
Subject: [Radiance-general] ICC profiles
In-Reply-To: <483DDC95.9040707@iebele.nl>
References: <K1H253$A4824B574161CF4732646C7EE63E394D@libero.it>	<C291F5E8-D316-4476-90E8-4EB2ED8C88DA@lmi.net>
	<483DDC95.9040707@iebele.nl>
Message-ID: <483F0661.9000609@iebele.nl>

Hi again,

I'm still thinking about the data provide by ICC files. Somehow I think 
it should be possible to calculate the top of the luminance range for 
the target output device (-u option of normtiff), given a set of 
photometric measurements which I believe an ICC profile provides. I 
tried to figure out _what_ precisely is measured in the "SpectroScan"  
section of the ICC file (attached), but even the support team of Epson 
could not answer that question. Maybe one of you does?

Also I wonder how to calculate the 'dynamic range for the target output 
device ' (-d option of normtiff) This is said to be 32 for CRT monitors 
in the manpage. I have no clue how to obatin this value for other output 
devices.

The only option I know for sure in normtiff is the gamma option, which 
it adjustable for Epson printers (1.5, 1.8, 2.0, 2.2 ).

Today I spent some time reading High Dynamic Range Imaging. Although 
most of the math is just magic for me, I understand the issue. I wonder 
however how much this issue is known by photo-labs and printing 
services. I wonder also how much of this knowledge is implemented in 
contemporary printing-technology. I don't know, if one of you does, 
please tell me. The funny thing is that operators say "O wow, 
32bit/channel images, great, no problem!" But in fact they convert the 
file to the printer's actual output, which  is 8 bit/channel. This is a 
kind of a communication problem, which I believe has to be solved at my 
side. I really like to be able to provide the photo-lab 'just' a 
standard  8bit/channel image. I understand such an image can not look as 
perfect in print as it does in RGB monitor color space. But can we come 
close to 'perfect' using proper calculations?

-Iebele

iebele schreef:
> Dear group,
>
> I have a tone-mapping problem with printing hdr files, which are 
> converted to 8-bit Photoshop-RGB colorspace.
> In the print some clipping occurs.  To solve the clipping I was 
> thinking to use normtiff  or pcond in combination with a Photoshop ICC 
> profile (.icm files), which I a received from the printer operator. 
> Regretably I don't understand the meaning of the parameters of 
> normtiff and pcond enough, not even enough to get started . Does 
> anybody have an idea if and how the data from ICC profiles can be used 
> by normtiff?
> The lines below are copy/paste from an .icm file, and i wonder if 
> these can be of any use in tonemapping. Are the the tabular organized 
> XYZ_X   XYZ_Y   XYZ_Z valuable for this kind of application?
>
> Any hints are very much appreciated,
>
> Iebele
>
>
>
> CREATED    "1/12/2007"  # Time: 16:17
> INSTRUMENTATION    "SpectroScan"
> MEASUREMENT_SOURCE    "Illumination=D50    ObserverAngle=2?    
> WhiteBase=Abs    Filter=Unknown"
> KEYWORD    "SampleID"
> KEYWORD    "SAMPLE_NAME"
> NUMBER_OF_FIELDS    8
> BEGIN_DATA_FORMAT
> SampleID    SAMPLE_NAME    XYZ_X    XYZ_Y    XYZ_Z    LAB_L    
> LAB_A    LAB_B
> END_DATA_FORMAT
> NUMBER_OF_SETS    918
> BEGIN_DATA
> 1    A1    2.48    2.52    1.96    18.00    1.10    1.12
> 2    A2    3.04    3.14    2.53    20.61    0.15    0.53
> 3    A3    3.64    4.17    3.21    24.23    -5.73    1.61
> 4    A4    4.11    5.21    3.74    27.32    -12.11    3.35
> 5    A5    4.73    6.79    4.55    31.32    -20.99    5.45
> 6    A6    5.26    8.53    5.03    35.06    -30.46    9.31
> etc...
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>



From grobe at gmx.net  Fri May 30 03:36:35 2008
From: grobe at gmx.net (Lars O. Grobe)
Date: Fri May 30 03:36:45 2008
Subject: [Radiance-general] getting pixel value at x,y
In-Reply-To: <FBB816B8-DAA3-4FC5-9D8C-0857DBC4D786@lmi.net>
References: <1212063852.14951.8.camel@Optiplex755>
	<483EBCF6.2070207@visarc.com>
	<12800B97-EF9F-4022-AA0A-EEC79B6DF8F7@lmi.net>
	<1212076371.22675.6.camel@Optiplex755>
	<FBB816B8-DAA3-4FC5-9D8C-0857DBC4D786@lmi.net>
Message-ID: <1212143795.6116.6.camel@Optiplex755>

> The best/fastest solution for rectangular areas is pcompos piped into  
> pvalue and total, like so:
> 
> 	pcomb -o captured.pic \
> 		| pcompos -x ${box_width} -y ${box_height} - -${left} -${lower} \
> 		| pvalue -h -H -df | total -if3 -m
> 

Hm, ok, sorry, maybe this was obvious, if I only had not taken the -x -y
values as the new dimensions after scaling. So they actually crop the
box, which is just what I needed - thank you!!!

And one more question now - is there also a simple way to write pixel
values into a file like this? I wanted to put frames around some objects
in the image, but as I could not find a way to say AND in the
cal-expression pcomb expects, I do not know e.g. how to cut away the
inner part of a box.

TIA&CU Lars.


From jedev at visarc.com  Fri May 30 07:20:53 2008
From: jedev at visarc.com (Jack de Valpine)
Date: Fri May 30 07:21:00 2008
Subject: [Radiance-general] getting pixel value at x,y
In-Reply-To: <1212143795.6116.6.camel@Optiplex755>
References: <1212063852.14951.8.camel@Optiplex755>	<483EBCF6.2070207@visarc.com>	<12800B97-EF9F-4022-AA0A-EEC79B6DF8F7@lmi.net>	<1212076371.22675.6.camel@Optiplex755>	<FBB816B8-DAA3-4FC5-9D8C-0857DBC4D786@lmi.net>
	<1212143795.6116.6.camel@Optiplex755>
Message-ID: <48400D45.2020109@visarc.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: jedev.vcf
Type: text/x-vcard
Size: 251 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20080530/81de7fd9/jedev.vcf
