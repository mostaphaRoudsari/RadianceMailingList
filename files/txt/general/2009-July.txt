From lars.grobe at nus.edu.sg  Wed Jul  1 02:07:29 2009
From: lars.grobe at nus.edu.sg (Lars O. Grobe)
Date: Wed Jul  1 02:07:32 2009
Subject: [Radiance-general] SSLD skies and zenith radiance
Message-ID: <4A4B2751.5080702@nus.edu.sg>

Hi,

I am looking into the ssld support that Phillip made available, and I 
found the following in the accompagnying documentation:

"4. Select an arbitrary zenith radiance, Z (eg. 100 W/m2/sr)."

What is the meaning of arbitrary here? The value is used later by the 
cal-file creating the distribution. I was hoping to create a 
distribution from the coefficients and the horizontal illuminance, but I 
do not know where to get data on zenith luminance.

Cheers, Lars.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lars_grobe.vcf
Type: text/x-vcard
Size: 299 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20090701/61e5733c/lars_grobe.vcf
From lars.grobe at nus.edu.sg  Wed Jul  1 04:23:26 2009
From: lars.grobe at nus.edu.sg (Lars O. Grobe)
Date: Wed Jul  1 04:23:27 2009
Subject: [Radiance-general] SSLD skies and zenith radiance
In-Reply-To: <4A4B2751.5080702@nus.edu.sg>
References: <4A4B2751.5080702@nus.edu.sg>
Message-ID: <4A4B472E.8080303@nus.edu.sg>

Hi,

a short update, for now I am dividing the task to set-up a sky into two 
steps:

1) Create a gensky-description. The zenith radiance as calculated by 
gensky can be found in the skyfunc definition (it is the third number on 
the last line of the output, so it can easily be extracted using awk). 
The horizontal illuminance that is to be found for the ground luminance 
can be either calculated from the sky model using rtrace, or, for skies 
WITHOUT sun, be derived by multiplying the "ground ambient level" by 
pi*179. The sun position can also be read from the comment lines.

2) Set-up the ssld-description using the values found in step 1).

Maybe it would be worth to create a script that can do all that (and 
also set the ssld-coefficients from a look-up table for a given sky type).

Cheers Lars.
> I am looking into the ssld support that Phillip made available, and I 
> found the following in the accompagnying documentation:
>
> "4. Select an arbitrary zenith radiance, Z (eg. 100 W/m2/sr)."
>
> What is the meaning of arbitrary here? The value is used later by the 
> cal-file creating the distribution. I was hoping to create a 
> distribution from the coefficients and the horizontal illuminance, but 
> I do not know where to get data on zenith luminance.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: lars_grobe.vcf
Type: text/x-vcard
Size: 299 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20090701/f6da6f5c/lars_grobe.vcf
From brajeshlal at yahoo.com  Wed Jul  1 06:54:45 2009
From: brajeshlal at yahoo.com (Brajesh Lal)
Date: Wed Jul  1 06:54:44 2009
Subject: [Radiance-general] Radiance
Message-ID: <546561.45038.qm@web51903.mail.re2.yahoo.com>

Hi All,

I have taken images of same scene from two different camera at same time and same day. How to find the radiance scale factor between the two cameras.

I will be grateful if somebody can explain me mathematical relation to compute the radiance of a  point in the scene.
if the pixel value of the point  and cameras ISO value, F-stop, Shutter Speed are known

 
Best Regards, 
Brajesh Lal



      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20090701/704ff649/attachment.htm
From Robert.Guglielmetti at nrel.gov  Wed Jul  1 08:11:18 2009
From: Robert.Guglielmetti at nrel.gov (Guglielmetti, Robert)
Date: Wed Jul  1 08:11:38 2009
Subject: [Radiance-general] Radiance
In-Reply-To: <546561.45038.qm@web51903.mail.re2.yahoo.com>
References: <546561.45038.qm@web51903.mail.re2.yahoo.com>
Message-ID: <DF4A9C5A0CC2DF438AC1834530C59EE001CB27C3F4@MAILBOX1.nrel.gov>

I'm not sure what you mean by the "radiance scale factor". Are you trying to compute the cameras' response curves? As for your second question, you won't be able to calculate radiance from a single exposure, even if all the details about that exposure are known. The process you are describing requires a high dynamic range (HDR) image, which is comprised of multiple exposures. The typical minimum is three exposures separated by 2 f-stops each, but ideally the longest exposure should have zero black pixels and the shortest have no white pixels. This ideal is only necessary to capture scenes of extreme dynamic range, however.

Radiance-online.org also hosts an hdr mailing list which is definitely worth subscribing to:

http://www.radiance-online.org/mailman/listinfo/hdri

Robert Guglielmetti  IES, LEED AP
Building Energy Efficiency Engineer
National Renewable Energy Laboratory (NREL)
1617 Cole Blvd, MS-5202
Golden, CO 80401
robert.guglielmetti@nrel.gov
303.275.4319

From: radiance-general-bounces@radiance-online.org [mailto:radiance-general-bounces@radiance-online.org] On Behalf Of Brajesh Lal
Sent: Wednesday, July 01, 2009 7:55 AM
To: radiance-general@radiance-online.org
Subject: [Radiance-general] Radiance

Hi All,

I have taken images of same scene from two different camera at same time and same day. How to find the radiance scale factor between the two cameras.

I will be grateful if somebody can explain me mathematical relation to compute the radiance of a  point in the scene.
if the pixel value of the point  and cameras ISO value, F-stop, Shutter Speed are known


Best Regards,
Brajesh Lal


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20090701/dae57007/attachment.html
From danf at eb7.co.uk  Wed Jul  1 08:51:45 2009
From: danf at eb7.co.uk (Dan Fitzpatrick)
Date: Wed Jul  1 08:52:24 2009
Subject: [Radiance-general] RE: The results of your email commands
In-Reply-To: <mailman.36.1246461235.359.radiance-general@radiance-online.org>
References: <mailman.36.1246461235.359.radiance-general@radiance-online.org>
Message-ID: <7E9191C753C6724DB772B5610559B2CF17CD347B@winxbeuk01.exchange.xchg>

Ahhh...Seems I have found the answer.  If anyone was interested the total program was my solution.

- Unprocessed:
    This sounds simpler than what I suspect the solution is.  I have run an rtr=
    ace analysis over a grid within a room.  I need to use rcalc or similar to =
    extract and print-to-file the minimum, average and maximum value. =20
    Any help or pointers will be much appreciated.
    Many Thanks
    Dan

- Done.


From gward at lmi.net  Wed Jul  1 10:13:42 2009
From: gward at lmi.net (Greg Ward)
Date: Wed Jul  1 10:13:41 2009
Subject: [Radiance-general] Radiance
In-Reply-To: <DF4A9C5A0CC2DF438AC1834530C59EE001CB27C3F4@MAILBOX1.nrel.gov>
References: <546561.45038.qm@web51903.mail.re2.yahoo.com>
	<DF4A9C5A0CC2DF438AC1834530C59EE001CB27C3F4@MAILBOX1.nrel.gov>
Message-ID: <4B0ED59E-5744-47A8-9EF2-27682F7AEA07@lmi.net>

Hello Brajesh,

I second Rob's motion that you check out the HDRI mailing list.   
Archives can be found at radiance-online.  I also recommend you  
download and try out Photosphere if you have a Mac available to you,  
as it does exactly what you want to do.

The following might also be of some use:

	http://radsite.lbl.gov/radiance/refer/Notes/filmspeed.html

Best,
-Greg

> From: "Guglielmetti, Robert" <Robert.Guglielmetti@nrel.gov>
> Date: July 1, 2009 8:11:18 AM PDT
> I?m not sure what you mean by the ?radiance scale factor?. Are you  
> trying to compute the cameras? response curves? As for your second  
> question, you won?t be able to calculate radiance from a single  
> exposure, even if all the details about that exposure are known.  
> The process you are describing requires a high dynamic range (HDR)  
> image, which is comprised of multiple exposures. The typical  
> minimum is three exposures separated by 2 f-stops each, but ideally  
> the longest exposure should have zero black pixels and the shortest  
> have no white pixels. This ideal is only necessary to capture  
> scenes of extreme dynamic range, however.
>
> Radiance-online.org also hosts an hdr mailing list which is  
> definitely worth subscribing to:
>
> http://www.radiance-online.org/mailman/listinfo/hdri
>
> Robert Guglielmetti  IES, LEED AP
>
>
>
> From: radiance-general-bounces@radiance-online.org [mailto:radiance- 
> general-bounces@radiance-online.org] On Behalf Of Brajesh Lal
> Sent: Wednesday, July 01, 2009 7:55 AM
>
> Hi All,
>
> I have taken images of same scene from two different camera at same  
> time and same day. How to find the radiance scale factor between  
> the two cameras.
>
> I will be grateful if somebody can explain me mathematical relation  
> to compute the radiance of a  point in the scene.
>
> if the pixel value of the point  and cameras ISO value, F-stop,  
> Shutter Speed are known
>
>
>
> Best Regards,
>
> Brajesh Lal
>
>

From Phillip.Greenup at arup.com  Wed Jul  1 15:57:58 2009
From: Phillip.Greenup at arup.com (Phillip Greenup)
Date: Wed Jul  1 15:58:01 2009
Subject: [Radiance-general] SSLD skies and zenith radiance
In-Reply-To: <4A4B472E.8080303@nus.edu.sg>
References: <4A4B2751.5080702@nus.edu.sg> <4A4B472E.8080303@nus.edu.sg>
Message-ID: <A386248F36A677429B35C46A6A057CA3010D1B477F98@AUEXC01.global.arup.com>

Hi Lars,

The SSLD creation process is a bit old and clunky.  It does require a few hand calcs and a little interaction with the text file.  It really could be scripted to create it automatically...  One day...

To start with, you need to know what type of sky you're trying to create, where the sun is, and the direct and diffuse horizontal illuminances.

For the diffuse sky distribution, step 4 of my old documentation says just put in any old number for the zenith radiance - it doesn't matter what it is at that stage.  That model is then tested and the zenith radiance is altered to create the correct diffuse horizontal illuminance in step 12.

The ground radiance is found in step 3, requiring knowledge of the global horizontal illuminance and the ground reflectance.

I'll have a search around here for a script that automates the process.  I vaguely remember someone has done this before...

Cheers,
Phil.


Dr Phillip Greenup
Senior Consultant - Lighting and Sustainability

Arup
Level 17
1 Nicholson St
Melbourne VIC 3000
Ph +61 3 9668 5669
www.arup.com/lighting



-----Original Message-----
From: radiance-general-bounces@radiance-online.org [mailto:radiance-general-bounces@radiance-online.org] On Behalf Of Lars O. Grobe
Sent: Wednesday, 1 July 2009 9:23 PM
To: Radiance general discussion
Subject: Re: [Radiance-general] SSLD skies and zenith radiance

Hi,

a short update, for now I am dividing the task to set-up a sky into two
steps:

1) Create a gensky-description. The zenith radiance as calculated by gensky can be found in the skyfunc definition (it is the third number on the last line of the output, so it can easily be extracted using awk). 
The horizontal illuminance that is to be found for the ground luminance can be either calculated from the sky model using rtrace, or, for skies WITHOUT sun, be derived by multiplying the "ground ambient level" by pi*179. The sun position can also be read from the comment lines.

2) Set-up the ssld-description using the values found in step 1).

Maybe it would be worth to create a script that can do all that (and also set the ssld-coefficients from a look-up table for a given sky type).

Cheers Lars.
> I am looking into the ssld support that Phillip made available, and I 
> found the following in the accompagnying documentation:
>
> "4. Select an arbitrary zenith radiance, Z (eg. 100 W/m2/sr)."
>
> What is the meaning of arbitrary here? The value is used later by the 
> cal-file creating the distribution. I was hoping to create a 
> distribution from the coefficients and the horizontal illuminance, but 
> I do not know where to get data on zenith luminance.

____________________________________________________________
Electronic mail messages entering and leaving Arup  business
systems are scanned for acceptability of content and viruses


From schwaj3 at rpi.edu  Wed Jul  8 08:44:05 2009
From: schwaj3 at rpi.edu (schwaj3@rpi.edu)
Date: Wed Jul  8 08:44:04 2009
Subject: [Radiance-general] Perfectly Diffuse Surface?
Message-ID: <200907081544.n68Fi5SK024844@smtp5.server.rpi.edu>

Hello, I'm an undergraduate student who is new to Radiance. I would like
to know how to set up a perfectly diffuse surface material. Plastic
seemed like it would be the right choice, but I learned that
" If the surface roughness (a5 ) is zero or the specularity (rs ) is
greater than the threshold (t s ) then a ray is traced in or near the
mirror direction. "

Could anyone show me an example material which is perfectly diffuse?





From roland.fleming at tuebingen.mpg.de  Thu Jul  9 00:56:15 2009
From: roland.fleming at tuebingen.mpg.de (Roland Fleming)
Date: Thu Jul  9 00:55:28 2009
Subject: [Radiance-general] Perfectly Diffuse Surface?
In-Reply-To: <200907081544.n68Fi5SK024844@smtp5.server.rpi.edu>
References: <200907081544.n68Fi5SK024844@smtp5.server.rpi.edu>
Message-ID: <867A1B46-688A-4885-8125-407A34642A53@tuebingen.mpg.de>


Use Plastic, just set the last two parameters to 0.  For example:

void plastic white_diffuse
0
0
5 1 1 1 0 0

is an ideal white Lambertian material.

-- Roland


On 8 Jul 2009, at 17:44, schwaj3@rpi.edu wrote:

> Hello, I'm an undergraduate student who is new to Radiance. I would  
> like
> to know how to set up a perfectly diffuse surface material. Plastic
> seemed like it would be the right choice, but I learned that
> " If the surface roughness (a5 ) is zero or the specularity (rs ) is
> greater than the threshold (t s ) then a ray is traced in or near the
> mirror direction. "
>
> Could anyone show me an example material which is perfectly diffuse?
>
>
>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general


From gary.ashford at gmail.com  Fri Jul 10 12:35:33 2009
From: gary.ashford at gmail.com (Gary Ashford)
Date: Fri Jul 10 12:35:31 2009
Subject: [Radiance-general] RWR
Message-ID: <b270a8d50907101235r39f62187k858efe71b4dba482@mail.gmail.com>

Is there a reprint of "Rendering with Radiance" available or in the works?
Dog-eared old copies?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20090710/b9f9b936/attachment.htm
From lvandriest at archenergy.com  Fri Jul 10 12:54:54 2009
From: lvandriest at archenergy.com (Laurel Van Driest)
Date: Fri Jul 10 12:54:56 2009
Subject: [Radiance-general] Daylighting Designer wanted
Message-ID: <4A57482E020000A50003C7F7@codex.archenergy.com>


Architectural Energy Corporation, a sustainable energy and engineering
consulting firm, is looking for a mid-level to senior person proficient
in sophisticated daylighting, lighting and solar control analysis
software such as Radiance, AGI32, Ecotect, TracePro, SPOT, etc.  A good
candidate will not only be technically proficient, but will also be able
to use these tools appropriately and efficiently to guide architects and
design teams to make informed design decisions on their projects; and
will be able to mentor AEC?s existing daylighting staff in the use of
these tools.  A good candidate must also have a strong interest in key
aspects of high-performance buildings such as building science and
environmental and integrated systems design.  Contact Laurel Van Driest,
lvandriest@archenergy.com or fax 303-459-7399.
 
Laurel Van Driest
Office Administrator
Architectural Energy Corporation
2540 Frontier Avenue, Suite 201
Boulder, Colorado  80301
Direct phone:  303-459-7418
Direct fax:  303-459-7399
Main phone:  303-444-4149 x418
Main fax:  303-444-4304
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20090710/55204f22/attachment.html
From defuller at lbl.gov  Sat Jul 11 05:16:10 2009
From: defuller at lbl.gov (defuller)
Date: Sat Jul 11 05:16:09 2009
Subject: [Radiance-general] radiance-online service interruption Sat
	11-July-2009
Message-ID: <866537AC-ED67-4A07-AF85-1F27BC917DEF@lbl.gov>

Hello everyone...

This list will be out of service Sat 11-July-2009 until approximately  
2:30 pm PST due to electrical work being performed in the building  
where the server is located.

Thank you for your patience...

Daniel Fuller
Berkeley Lab, defuller@lbl.gov


From DEFuller at lbl.gov  Sat Jul 11 05:52:18 2009
From: DEFuller at lbl.gov (Daniel E Fuller)
Date: Sat Jul 11 05:52:12 2009
Subject: [Radiance-general] radiance-online service interruption Sat
	11-July-2009 (re-sent)
Message-ID: <f102f6ea1abb.4a582892@lbl.gov>

Hello everyone...

This list will be out of service Sat 11-July-2009 until approximately  
2:30 pm PST due to electrical work being performed in the building  
where the server is located.

Thank you for your patience...

Daniel Fuller
Berkeley Lab, defuller at lbl.gov

From nalinswaroop at gmail.com  Sun Jul 12 00:33:12 2009
From: nalinswaroop at gmail.com (nalin swaroop)
Date: Sun Jul 12 00:33:19 2009
Subject: [Radiance-general] Basic daylighting and artificial lighting
	test(ambient value problem)
Message-ID: <736238ce0907120033m351596fdm7d58abfb31dc2b8c@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: RCP_1001_4cornew.jpg
Type: image/jpeg
Size: 6539 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20090712/9c007b30/RCP_1001_4cornew.jpg
From tbleicher at googlemail.com  Sun Jul 12 01:37:18 2009
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Sun Jul 12 01:37:25 2009
Subject: [Radiance-general] Basic daylighting and artificial lighting 
	test(ambient value problem)
In-Reply-To: <736238ce0907120033m351596fdm7d58abfb31dc2b8c@mail.gmail.com>
References: <736238ce0907120033m351596fdm7d58abfb31dc2b8c@mail.gmail.com>
Message-ID: <89355c0f0907120137x343c8870kfcdf08ee1ce62122@mail.gmail.com>

Hi Nalin.

Welcome to the wonderfully complex world of Radiance.

My answers are below ...

On Sun, Jul 12, 2009 at 8:33 AM, nalin swaroop<nalinswaroop@gmail.com> wrote:
> Hello all
>
> I am new to radiance and am trying to learn its various features
> I have modeled a room 16*6*3 in ESP-r and then exported the model to
> radiance now I am trying to simulate this for two times of a day one at 1200
> noon(clear sky) and other at 20:00(night)

I'm not very familiar with ESP-r and how it models scenes and converts
to Radiance. You should check that 20:00h is actually dark for the day
you selected. Depending on your location and time of the year the sun
can still be visible.

Also I assume that ESP-r models walls as abstract 'interfaces' with
certain properties. These get exported to Radiance as single polygons.
The light leaks you see in your image are effects of interpolation, where
Radiance incorrectly calculates the brighness of the wall based on the
outside illuminance. To avoid this you can switch interpolation off (big
impact on rendering time, option '-aa 0'). More efficient would be to
build the model with 'real' walls, so that your interior 'walls' are boxed
inside the exterior 'walls'. That needs to be supported by your exporter,
though.

> what I want to ask is what should be my basic rendering settings to get a
> decent enough output and what should I set the ambient value(-av) to for the
> night case should it be zero?

The ambient value is necessary to compensate for the loss of
illuminance that Radiance cuts off when it limits the number of bounces.
Basically every further bounce would still contribute to the illuminance
but if you stop following the ray after N bounces you neglect this
small amount. Setting the '-av' value to the average of the room will
then add this amount. You could say, with the right '-av' value you
get a more accurate result than without.

Finding the right '-av' value is an art in itself. For outside scenes
you get a value in the comments of the output of the gensky program.
Run gensky in a terminal ('command prompt') with your date and time
and look for the comment line '# Ground ambient level:'.

For indoor scene (without artificial light) you can use this value and
multiply it with a reasonable daylight factor for the room.

If you add aritificial light you can calculate an approximate '-av'
from your target horizontal illuminance (in Watts/m^2) divided
by Pi. Say you want 200lux (0.29W/m^2) then your -av would
be 0.29/3.14 = 0.092.

> I want to check the illuminance value for the
> room during the day and using artificial lights during the night set the
> illuminance level of the room to say 200 lux but the problem is if I give
> some value to the ambient value(-av) it adds up in the lumen value of only
> artificial light and gives higher output so for both daylighting and
> artificial lighting at every part in the room I am getting high lumen
> values, so, is this correct?should ambient value ever be used for realistic
> results? also for the daylight analysis what should be the ambient value and

I think I answerd all the above. I might have missed a point here
but that's due to your lack of interpunctuation. Capitalisation is power!

> also does the illumination value depend on the no. of bounces
> if yes then how would I know which no. of bounces to give for correct
> results.

That's another thing where you need experience and you have
to define how accurate you want your renderings to be. Your
scene (based on the image) is empty so most light hits the
floor and walls directly from the luminaires (assuming there is
no contribution from the outside). You have to make a guess
about the number of significant bounces. In this situation I'd
say you are reasonably accurate after 3 or 4 bounces.

To verify your estimate you can calculate a single point with rtrace
and increase the number of bounces until your results do not
vary significantly.

Also don't expect Radiance to be unrealistically accurate. I always
got frustrated by Lighting Designers who believe that Radiance can
give you the lux values or daylight factors to the second decimal place.
Even your average light meter has an error of 3%. They have to learn
how to deal with good estimates.


Cheers,
Thomas

From reinhart at gsd.harvard.edu  Sun Jul 12 19:57:57 2009
From: reinhart at gsd.harvard.edu (Reinhart, Christoph)
Date: Sun Jul 12 19:58:01 2009
Subject: [Radiance-general] 8th International RadianceWorkshop @ Harvard
Message-ID: <C5E1527F129BF545A250B5AD0B0C26EF044B5AC5@ENTWEXMB0000000.university.harvard.edu>

Dear colleagues,

 

As previously announced we will be hosting this year's International
Radiance Workshop on October 22/23 at the Harvard Graduate School of
Design (GSD). Workshop details and a call for presentations can now be
found under http://projects.gsd.harvard.edu/radiance2009/. The
International Radiance Workshops are annual, two-day gatherings of
Radiance developers and users. The workshops consist of a series of
presentations that in the past included case studies on the use of
Radiance in lighting and/or daylighting projects, recent advances in
modeling glare and energy savings from lighting controls as well as the
use of Radiance in Art and Design. Presentations from previous workshops
can be downloaded from http://www.radiance-online.org/.  We are planning
to split the workshop into an 'application day' (Thursday) and a
'technical day' (Friday). There will also be a full day pre-workshop
course on 'HDR Photography and Glare Analysis' given by Professor
Mehlika Inanici (University of Washington) and Dr. Jan Wienold
(Fraunhofer Institute for Solar Energy Systems) on Wednesday, October 21
, also at the GSD.

 

If you are interested in presenting at the workshop please send us a
working title and a brief abstract to reinhart@gsd.harvard.edu and
klagios@gsd.harvard.edu. Same as in the past we will be making all
presentations freely available after the workshop. 

 

We are looking forward to receiving your abstracts and welcoming you to
Cambridge.

 

Christoph Reinhart and Kera Lagios

Graduate School of Design - Harvard University

Gund Hall, 48 Quincy Street, Cambridge, MA 02138, USA

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20090712/8f14145c/attachment.htm
From chris at zed-uk.com  Tue Jul 14 03:38:24 2009
From: chris at zed-uk.com (Chris Yates)
Date: Tue Jul 14 03:39:09 2009
Subject: [Radiance-general] Basic daylighting and artificial lighting
	test(ambient value problem)
In-Reply-To: <89355c0f0907120137x343c8870kfcdf08ee1ce62122@mail.gmail.com>
References: <736238ce0907120033m351596fdm7d58abfb31dc2b8c@mail.gmail.com>
	<89355c0f0907120137x343c8870kfcdf08ee1ce62122@mail.gmail.com>
Message-ID: <4A8066505EDB43FBBF42A80ABC0C3D84@ZED.local>

Thomas wrote:
"Also I assume that ESP-r models walls as abstract 'interfaces' with certain
properties. These get exported to Radiance as single polygons.
The light leaks you see in your image are effects of interpolation, where
Radiance incorrectly calculates the brighness of the wall based on the
outside illuminance. To avoid this you can switch interpolation off (big
impact on rendering time, option '-aa 0'). More efficient would be to build
the model with 'real' walls, so that your interior 'walls' are boxed inside
the exterior 'walls'. That needs to be supported by your exporter, though."

Hi Thomas, what if a small diameter radiance "cylinder" could be drawn
around the edges with the light leaks? Like a kind of "silicone sealant"! As
you know, I'm no coder but I'm guessing it could be python scripted from
Sketchup. There'd be a small increase in rendering time. If the cylinder is
small enough it won't show. Or, if the appropriate size and colour are
selected you could achieve "cartoon edges"!

Cheers

Chris

-----Original Message-----
From: radiance-general-bounces@radiance-online.org
[mailto:radiance-general-bounces@radiance-online.org] On Behalf Of Thomas
Bleicher
Sent: 12 July 2009 09:37
To: Radiance general discussion
Subject: Re: [Radiance-general] Basic daylighting and artificial lighting
test(ambient value problem)

Hi Nalin.

Welcome to the wonderfully complex world of Radiance.

My answers are below ...

On Sun, Jul 12, 2009 at 8:33 AM, nalin swaroop<nalinswaroop@gmail.com>
wrote:
> Hello all
>
> I am new to radiance and am trying to learn its various features I 
> have modeled a room 16*6*3 in ESP-r and then exported the model to 
> radiance now I am trying to simulate this for two times of a day one 
> at 1200 noon(clear sky) and other at 20:00(night)

I'm not very familiar with ESP-r and how it models scenes and converts to
Radiance. You should check that 20:00h is actually dark for the day you
selected. Depending on your location and time of the year the sun can still
be visible.

Also I assume that ESP-r models walls as abstract 'interfaces' with certain
properties. These get exported to Radiance as single polygons.
The light leaks you see in your image are effects of interpolation, where
Radiance incorrectly calculates the brighness of the wall based on the
outside illuminance. To avoid this you can switch interpolation off (big
impact on rendering time, option '-aa 0'). More efficient would be to build
the model with 'real' walls, so that your interior 'walls' are boxed inside
the exterior 'walls'. That needs to be supported by your exporter, though.

> what I want to ask is what should be my basic rendering settings to 
> get a decent enough output and what should I set the ambient 
> value(-av) to for the night case should it be zero?

The ambient value is necessary to compensate for the loss of illuminance
that Radiance cuts off when it limits the number of bounces.
Basically every further bounce would still contribute to the illuminance but
if you stop following the ray after N bounces you neglect this small amount.
Setting the '-av' value to the average of the room will then add this
amount. You could say, with the right '-av' value you get a more accurate
result than without.

Finding the right '-av' value is an art in itself. For outside scenes you
get a value in the comments of the output of the gensky program.
Run gensky in a terminal ('command prompt') with your date and time and look
for the comment line '# Ground ambient level:'.

For indoor scene (without artificial light) you can use this value and
multiply it with a reasonable daylight factor for the room.

If you add aritificial light you can calculate an approximate '-av'
from your target horizontal illuminance (in Watts/m^2) divided by Pi. Say
you want 200lux (0.29W/m^2) then your -av would be 0.29/3.14 = 0.092.

> I want to check the illuminance value for the room during the day and 
> using artificial lights during the night set the illuminance level of 
> the room to say 200 lux but the problem is if I give some value to the 
> ambient value(-av) it adds up in the lumen value of only artificial 
> light and gives higher output so for both daylighting and artificial 
> lighting at every part in the room I am getting high lumen values, so, 
> is this correct?should ambient value ever be used for realistic 
> results? also for the daylight analysis what should be the ambient 
> value and

I think I answerd all the above. I might have missed a point here but that's
due to your lack of interpunctuation. Capitalisation is power!

> also does the illumination value depend on the no. of bounces if yes 
> then how would I know which no. of bounces to give for correct 
> results.

That's another thing where you need experience and you have to define how
accurate you want your renderings to be. Your scene (based on the image) is
empty so most light hits the floor and walls directly from the luminaires
(assuming there is no contribution from the outside). You have to make a
guess about the number of significant bounces. In this situation I'd say you
are reasonably accurate after 3 or 4 bounces.

To verify your estimate you can calculate a single point with rtrace and
increase the number of bounces until your results do not vary significantly.

Also don't expect Radiance to be unrealistically accurate. I always got
frustrated by Lighting Designers who believe that Radiance can give you the
lux values or daylight factors to the second decimal place.
Even your average light meter has an error of 3%. They have to learn how to
deal with good estimates.


Cheers,
Thomas

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general


From tbleicher at googlemail.com  Tue Jul 14 15:42:21 2009
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Tue Jul 14 15:42:26 2009
Subject: [Radiance-general] Basic daylighting and artificial lighting 
	test(ambient value problem)
In-Reply-To: <4A8066505EDB43FBBF42A80ABC0C3D84@ZED.local>
References: <736238ce0907120033m351596fdm7d58abfb31dc2b8c@mail.gmail.com>
	<89355c0f0907120137x343c8870kfcdf08ee1ce62122@mail.gmail.com>
	<4A8066505EDB43FBBF42A80ABC0C3D84@ZED.local>
Message-ID: <89355c0f0907141542v6477932ek9c9b68d0783ebcfc@mail.gmail.com>

On Tue, Jul 14, 2009 at 11:38 AM, Chris Yates<chris@zed-uk.com> wrote:

> Hi Thomas, what if a small diameter radiance "cylinder" could be drawn
> around the edges with the light leaks? Like a kind of "silicone sealant"!
> As you know, I'm no coder but I'm guessing it could be python scripted from
> Sketchup.

Interesting idea. I don't know if this would have the desired effect, though,
or just introduce more interpolation errors.

> There'd be a small increase in rendering time. If the cylinder is
> small enough it won't show. Or, if the appropriate size and colour are
> selected you could achieve "cartoon edges"!

As intended graphical effect this is a nice way to do it. But if you
export simple scenes from the likes of ESP-r it should also be
possible to work out a wall thickness from the attributes of the wall.
If only a single room is exported it should be quit easy to apply an
offset to the floor outline and create two layers of polygons. Usually
the geometries in energy simulation apps are quite basic which
simplifies the calculation of intersections and openings.

But for the moment those are still features for the next generation
of exporters.

Thomas

From jm at dmu.ac.uk  Wed Jul 15 01:33:40 2009
From: jm at dmu.ac.uk (John Mardaljevic)
Date: Wed Jul 15 01:33:55 2009
Subject: [Radiance-general] Basic daylighting and artificial lighting
	test(ambient value problem)
Message-ID: <12C3E8FF-564B-459B-9B0C-43C98CD7A89C@dmu.ac.uk>

>> Hi Thomas, what if a small diameter radiance "cylinder" could be  
>> drawn around the edges with the light leaks? Like a kind of  
>> "silicone sealant"! As you know, I'm no coder but I'm guessing it  
>> could be python scripted from Sketchup. Interesting idea.
> I don't know if this would have the desired effect, though, or just  
> introduce more interpolation errors.

It could certainly add an overhead to the ambient calculation if it  
attempts to predict indirect shading across the curved surfaces.  You  
could use the genampos script to see where the calculation is  
expending effort.  See the resources page on my site (link below) for  
a 'Technical Note' on the use of the genambpos script.  The script  
should get installed by default with the rest of the Radiance  
executables.

-John

-----------------------------------------------
Dr. John Mardaljevic
Reader in Daylight Modelling
Institute of Energy and Sustainable Development
De Montfort University
The Gateway
Leicester
LE1 9BH, UK
+44 (0) 116 257 7972
+44 (0) 116 257 7981 (fax)

jm@dmu.ac.uk
http://www.iesd.dmu.ac.uk/~jm




From lars.grobe at nus.edu.sg  Wed Jul 15 04:33:09 2009
From: lars.grobe at nus.edu.sg (Lars O. Grobe)
Date: Wed Jul 15 04:33:18 2009
Subject: [Radiance-general] pmap errors
Message-ID: <4A5DBE75.4080603@nus.edu.sg>

Hi,

yes I know that the 3.7p2-pmap extension and all that is rather old now, 
still it is the most recent release officially available. So I try to 
use it, and since today mkpmap drives me crazy with "consistency - 
unexpected object call for polygon ..."-messages.

I have a rather complex model here, and this may be some memory problem. 
I have tried commenting out the geometry given in the error message, but 
that led me only to the next error message with some other surface. If I 
reduce the number of photons to be distributed to a very low value (such 
as 10) I get along with it, but that renders the whole idea useless.

Are there any known memory problems or any kind of overflows in the pmap 
code?

Cheers, Lars.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lars_grobe.vcf
Type: text/x-vcard
Size: 299 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20090715/b2c78e6a/lars_grobe.vcf
From grobe at gmx.net  Thu Jul 16 00:31:03 2009
From: grobe at gmx.net (Lars O. Grobe)
Date: Thu Jul 16 00:31:17 2009
Subject: [Radiance-general] RWR
In-Reply-To: <b270a8d50907101235r39f62187k858efe71b4dba482@mail.gmail.com>
References: <b270a8d50907101235r39f62187k858efe71b4dba482@mail.gmail.com>
Message-ID: <4A5ED737.90406@gmx.net>

Gary Ashford wrote:
> Is there a reprint of "Rendering with Radiance" available or in the 
> works?  Dog-eared old copies?

As far as I am aware of it, this source of knowledge got lost. Either 
you are lucky and find a copy in a local library, or you have to stay 
with what is available online.

Cheers, Lars.

From grobe at gmx.net  Thu Jul 16 02:55:26 2009
From: grobe at gmx.net (Lars O. Grobe)
Date: Thu Jul 16 02:55:35 2009
Subject: [Radiance-general] pmap errors
In-Reply-To: <4A5DBE75.4080603@nus.edu.sg>
References: <4A5DBE75.4080603@nus.edu.sg>
Message-ID: <4A5EF90E.7030707@gmx.net>

Hi!
> yes I know that the 3.7p2-pmap extension and all that is rather old 
> now, still it is the most recent release officially available. So I 
> try to use it, and since today mkpmap drives me crazy with 
> "consistency - unexpected object call for polygon ..."-messages.
So I somehow managed to get rid of these by disabling a ring-geometry 
which had been used as a photon port. All this still looks strange to 
me, but it finally works... ;-)

Cheers, Lars.

From gary.ashford at gmail.com  Thu Jul 16 06:59:06 2009
From: gary.ashford at gmail.com (Gary Ashford)
Date: Thu Jul 16 06:59:23 2009
Subject: [Radiance-general] RWR
In-Reply-To: <4A5ED737.90406@gmx.net>
References: <b270a8d50907101235r39f62187k858efe71b4dba482@mail.gmail.com>
	<4A5ED737.90406@gmx.net>
Message-ID: <b270a8d50907160659l3af2286duef7639d32c88d24b@mail.gmail.com>

Lars,

Darn, that means I have to read sitting up.  Thanks for the reply.

Gary

On Thu, Jul 16, 2009 at 3:31 AM, Lars O. Grobe <grobe@gmx.net> wrote:

> Gary Ashford wrote:
>
>> Is there a reprint of "Rendering with Radiance" available or in the works?
>>  Dog-eared old copies?
>>
>
> As far as I am aware of it, this source of knowledge got lost. Either you
> are lucky and find a copy in a local library, or you have to stay with what
> is available online.
>
> Cheers, Lars.
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20090716/c65619ca/attachment.htm
From v.paupelin-huchard at elioth.fr  Thu Jul 16 09:17:55 2009
From: v.paupelin-huchard at elioth.fr (PAUPELIN-HUCHARD Valere)
Date: Thu Jul 16 09:18:08 2009
Subject: [Radiance-general] daylight factor and rtrace cmd
Message-ID: <7792B71B342F49C38BDBA8683FA0BDD7@micr817p>

Hello, 
 
I'm trying to do daylight factor calculation. I am observing a 1 meter
height offset between my workplan point file which is already at 0.85m above
the floor (*.fld) and the rtrace result (*.irr).
Someone would tell me why?
 
the command used is:
rtrace -ab 7 -ad 2048 -oodv -I
rcp.oct<numeric/plan_de_travail.fld>numeric/090715_BU_Rennes_07_vitrage_irra
diance.irr
 
four first lines sample of the files:
 
plan_de_travail.fld:
x          y         z         o
0.50     -0.25     1.84     0 0 1
0.50     0.00      1.84     0 0 1
0.50     0.25      1.84     0 0 1
0.50     0.50      1.84     0 0 1
 
090715_BU_Rennes_07_vitrage_irradiance.irr
x                        y                        z
o                                                                          r
g                         b
5.000000e-001    -2.500000e-001     2.840000e+000     0.000000e+000
0.000000e+000 -1.000000e+000     1.406147e-001     1.406147e-001
1.406147e-001 
5.000000e-001     0.000000e+000    2.840000e+000     0.000000e+000
0.000000e+000 -1.000000e+000     1.581891e-001     1.581891e-001
1.581891e-001 
5.000000e-001     2.500000e-001     2.840000e+000     0.000000e+000
0.000000e+000 -1.000000e+000     1.765201e-001     1.765201e-001
1.765201e-001 
5.000000e-001     5.000000e-001     2.840000e+000     0.000000e+000
0.000000e+000 -1.000000e+000     1.890535e-001     1.890535e-001
1.890535e-001 
 
I am afraid my daylight factor result are not valid at the height of 1.84m
but at 2.84m, am I wrong?
 
Thanks,
Valere.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20090716/8103970b/attachment.html
From Christopher.Rush at arup.com  Thu Jul 16 09:26:26 2009
From: Christopher.Rush at arup.com (Christopher Rush)
Date: Thu Jul 16 09:26:33 2009
Subject: [Radiance-general] daylight factor and rtrace cmd
In-Reply-To: <7792B71B342F49C38BDBA8683FA0BDD7@micr817p>
References: <7792B71B342F49C38BDBA8683FA0BDD7@micr817p>
Message-ID: <EB124710ADB8554C930FADF760BB2BE705A56A5B@n-yexc01.global.arup.com>

I believe the -I option to rtrace automatically takes the trace point
one unit in front of the point to avoid conflict with a surface (in case
your point is defined co-planar with a wall, floor, etc.). This would
probably be fine if you model was set up in inches or mm. Maybe you can
scale your model to millimeters using xform -s?
 
A question to the list, would the -i (lowercase) be appropriate to get
the value for the exact point as defined?
 
-Chris

________________________________

the command used is:
rtrace -ab 7 -ad 2048 -oodv -I
rcp.oct<numeric/plan_de_travail.fld>numeric/090715_BU_Rennes_07_vitrage_
irradiance.irr
____________________________________________________________
Electronic mail messages entering and leaving Arup  business
systems are scanned for acceptability of content and viruses
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20090716/0a35b511/attachment.htm
From tbleicher at googlemail.com  Thu Jul 16 09:45:58 2009
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Thu Jul 16 09:46:05 2009
Subject: [Radiance-general] daylight factor and rtrace cmd
In-Reply-To: <7792B71B342F49C38BDBA8683FA0BDD7@micr817p>
References: <7792B71B342F49C38BDBA8683FA0BDD7@micr817p>
Message-ID: <89355c0f0907160945p25ca271ud6b9af389c2a4b45@mail.gmail.com>

As Chris wrote, -I implies an observer point 1m above the 'point of interest'.
But it also turns around the view vector (your output shows -1.000000e+000).

Basically rtrace introduces a virtual plane of lambertian properties and looks
down onto this plane to calculate the irridance from the reflection (which is
identical).

The offset of 1m is only a problem if you want to use the output to anchor
your results in a model or if your workplane is close to an obstruction that's
lower than 1m above the plane. Then the rtrace rays would hit the back
of the obstruction and not the ideal reflector.

But then, perhaps Greg has anticipated this case and added some magic to
avoid it ...

Thomas


On Thu, Jul 16, 2009 at 5:17 PM, PAUPELIN-HUCHARD
Valere<v.paupelin-huchard@elioth.fr> wrote:
> Hello,
>
> I'm trying to do daylight factor calculation. I am observing a 1
> meter?height offset between my workplan point?file which is already at 0.85m
> above the floor (*.fld) and the rtrace result (*.irr).
> Someone would tell me why?
>
> the command used is:
> rtrace -ab 7 -ad 2048 -oodv -I
> rcp.oct<numeric/plan_de_travail.fld>numeric/090715_BU_Rennes_07_vitrage_irradiance.irr
>
> four first lines?sample of the files:
>
> plan_de_travail.fld:
> x??????????y?????????z???????? o
> 0.50???? -0.25???? 1.84???? 0 0 1
> 0.50???? 0.00??????1.84???? 0 0 1
> 0.50???? 0.25??????1.84???? 0 0 1
> 0.50???? 0.50??????1.84???? 0 0 1
>
> 090715_BU_Rennes_07_vitrage_irradiance.irr
> x??????????????????????? y??????????????????????? z
> o
> r???????????????????????? g???????????????????????? b
> 5.000000e-001????-2.500000e-001???? 2.840000e+000
> 0.000000e+000?0.000000e+000?-1.000000e+000???? 1.406147e-001
> 1.406147e-001???? 1.406147e-001
> 5.000000e-001???? 0.000000e+000????2.840000e+000
> 0.000000e+000?0.000000e+000?-1.000000e+000???? 1.581891e-001
> 1.581891e-001???? 1.581891e-001
> 5.000000e-001???? 2.500000e-001???? 2.840000e+000
> 0.000000e+000?0.000000e+000?-1.000000e+000???? 1.765201e-001
> 1.765201e-001???? 1.765201e-001
> 5.000000e-001???? 5.000000e-001???? 2.840000e+000
> 0.000000e+000?0.000000e+000?-1.000000e+000???? 1.890535e-001
> 1.890535e-001???? 1.890535e-001
>
> I am afraid my daylight factor result are not valid at the height of 1.84m
> but at 2.84m, am I wrong?
>
> Thanks,
> Valere.
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>

From dbs176 at gmail.com  Thu Jul 16 09:54:38 2009
From: dbs176 at gmail.com (David Smith)
Date: Thu Jul 16 09:54:50 2009
Subject: [Radiance-general] RWR
Message-ID: <694e132c0907160954h6a1d0a14ha9bf8eec3aa57a4a@mail.gmail.com>

For library information: http://www.worldcat.org/oclc/64188672
They're mostly university libraries.

--Dave


Lars,

Darn, that means I have to read sitting up.  Thanks for the reply.

Gary

On Thu, Jul 16, 2009 at 3:31 AM, Lars O. Grobe <grobe@gmx.net> wrote:

> Gary Ashford wrote:
>
>> Is there a reprint of "Rendering with Radiance" available or in the works?
>>  Dog-eared old copies?
>>
>
> As far as I am aware of it, this source of knowledge got lost. Either you
> are lucky and find a copy in a local library, or you have to stay with what
> is available online.
>
> Cheers, Lars.
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20090716/170709bf/attachment.html
From Robert.Guglielmetti at nrel.gov  Thu Jul 16 10:01:50 2009
From: Robert.Guglielmetti at nrel.gov (Guglielmetti, Robert)
Date: Thu Jul 16 10:01:55 2009
Subject: [Radiance-general] daylight factor and rtrace cmd
In-Reply-To: <89355c0f0907160945p25ca271ud6b9af389c2a4b45@mail.gmail.com>
References: <7792B71B342F49C38BDBA8683FA0BDD7@micr817p>
	<89355c0f0907160945p25ca271ud6b9af389c2a4b45@mail.gmail.com>
Message-ID: <DF4A9C5A0CC2DF438AC1834530C59EE001D66D2E11@MAILBOX1.nrel.gov>

Valere, as Chris and Thomas have mentioned, you want to use the -i option for that field.

Honestly, I've never noticed this -I option before. The man page doesn't mention the 1m offset, either. Frankly, I don't understand the point of this option. If I want irradiance, I usually want it on some surface or virtual plane (a uniform grid on the front of a library stack, for example), and I just make a field of points normal to that surface and use the -i option to compute irradiance at that point. If for some reason I wanted irradiance offset from some surface (dark sky / light pollution calc or something), I would just arrange the points offset from the surface, and oriented at the surface, and still use the -i. What are people generally using the -I option for? I'm curious.

Robert Guglielmetti  IES, LEED AP
Building Energy Efficiency Engineer 
National Renewable Energy Laboratory (NREL)
1617 Cole Blvd, MS-5202
Golden, CO 80401
robert.guglielmetti@nrel.gov
303.275.4319

-----Original Message-----
From: radiance-general-bounces@radiance-online.org [mailto:radiance-general-bounces@radiance-online.org] On Behalf Of Thomas Bleicher
Sent: Thursday, July 16, 2009 10:46 AM
To: Radiance general discussion
Subject: Re: [Radiance-general] daylight factor and rtrace cmd

As Chris wrote, -I implies an observer point 1m above the 'point of interest'.
But it also turns around the view vector (your output shows -1.000000e+000).

Basically rtrace introduces a virtual plane of lambertian properties and looks
down onto this plane to calculate the irridance from the reflection (which is
identical).

The offset of 1m is only a problem if you want to use the output to anchor
your results in a model or if your workplane is close to an obstruction that's
lower than 1m above the plane. Then the rtrace rays would hit the back
of the obstruction and not the ideal reflector.

But then, perhaps Greg has anticipated this case and added some magic to
avoid it ...

Thomas


On Thu, Jul 16, 2009 at 5:17 PM, PAUPELIN-HUCHARD
Valere<v.paupelin-huchard@elioth.fr> wrote:
> Hello,
>
> I'm trying to do daylight factor calculation. I am observing a 1
> meter?height offset between my workplan point?file which is already at 0.85m
> above the floor (*.fld) and the rtrace result (*.irr).
> Someone would tell me why?
>
> the command used is:
> rtrace -ab 7 -ad 2048 -oodv -I
> rcp.oct<numeric/plan_de_travail.fld>numeric/090715_BU_Rennes_07_vitrage_irradiance.irr
>
> four first lines?sample of the files:
>
> plan_de_travail.fld:
> x??????????y?????????z???????? o
> 0.50???? -0.25???? 1.84???? 0 0 1
> 0.50???? 0.00??????1.84???? 0 0 1
> 0.50???? 0.25??????1.84???? 0 0 1
> 0.50???? 0.50??????1.84???? 0 0 1
>
> 090715_BU_Rennes_07_vitrage_irradiance.irr
> x??????????????????????? y??????????????????????? z
> o
> r???????????????????????? g???????????????????????? b
> 5.000000e-001????-2.500000e-001???? 2.840000e+000
> 0.000000e+000?0.000000e+000?-1.000000e+000???? 1.406147e-001
> 1.406147e-001???? 1.406147e-001
> 5.000000e-001???? 0.000000e+000????2.840000e+000
> 0.000000e+000?0.000000e+000?-1.000000e+000???? 1.581891e-001
> 1.581891e-001???? 1.581891e-001
> 5.000000e-001???? 2.500000e-001???? 2.840000e+000
> 0.000000e+000?0.000000e+000?-1.000000e+000???? 1.765201e-001
> 1.765201e-001???? 1.765201e-001
> 5.000000e-001???? 5.000000e-001???? 2.840000e+000
> 0.000000e+000?0.000000e+000?-1.000000e+000???? 1.890535e-001
> 1.890535e-001???? 1.890535e-001
>
> I am afraid my daylight factor result are not valid at the height of 1.84m
> but at 2.84m, am I wrong?
>
> Thanks,
> Valere.
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general

From Raphael.Compagnon at hefr.ch  Thu Jul 16 10:30:28 2009
From: Raphael.Compagnon at hefr.ch (=?iso-8859-1?Q?Compagnon_Rapha=EBl?=)
Date: Thu Jul 16 10:30:34 2009
Subject: [Radiance-general] daylight factor and rtrace cmd
In-Reply-To: <7792B71B342F49C38BDBA8683FA0BDD7@micr817p>
References: <7792B71B342F49C38BDBA8683FA0BDD7@micr817p>
Message-ID: <70DD3A1408BDA8498790E8D553B7D25301D46D248C08@HEFRMAIL.sofr.hefr.lan>

Hello

In fact your calculation seems absolutely correct.
You ask rtrace with options -I and -oodv this means the following:
  - radiance will place a virtual lambertain reflector at each point of your input file
  - for each point of your input file a ray will be traced from a virtual point 1 meter above in the vertivcal down direction
  - this is excatly what appears in the rtrace output you are providing. The "od" in -oodv means you ask rtrace to output 
    the x,y,z origin
    the x,y,z direction which is traced (you get 0 0 -1 in your output file)
 - each of these rays will find the virtual lambertain reflector at its first intersection
 - then radiance will compute the irradiance at this intersection point
 - and rtrace returns the irradiance value (the "v" in -oodv )

The rtrace -i behaves differently: rtrace will trace a ray for each input point in the specified direction. Then it will compute the irradiance at the first instersection point found in the scene. In your case, with the same input file you would get the irradiance on the ceiling... which is probably not what you really need.
This explains why the most useful -I option exists!

Raphael Compagnon

________________________________________
De : radiance-general-bounces@radiance-online.org [radiance-general-bounces@radiance-online.org] de la part de PAUPELIN-HUCHARD Valere [v.paupelin-huchard@elioth.fr]
Date d'envoi : jeudi, 16. juillet 2009 18:17
? : radiance-general@radiance-online.org
Objet : [Radiance-general] daylight factor and rtrace cmd

Hello,

I'm trying to do daylight factor calculation. I am observing a 1 meter height offset between my workplan point file which is already at 0.85m above the floor (*.fld) and the rtrace result (*.irr).
Someone would tell me why?

the command used is:
rtrace -ab 7 -ad 2048 -oodv -I rcp.oct<numeric/plan_de_travail.fld>numeric/090715_BU_Rennes_07_vitrage_irradiance.irr

four first lines sample of the files:

plan_de_travail.fld:
x          y         z         o
0.50     -0.25     1.84     0 0 1
0.50     0.00      1.84     0 0 1
0.50     0.25      1.84     0 0 1
0.50     0.50      1.84     0 0 1

090715_BU_Rennes_07_vitrage_irradiance.irr
x                        y                        z                          o                                                                          r                         g                         b
5.000000e-001    -2.500000e-001     2.840000e+000     0.000000e+000 0.000000e+000 -1.000000e+000     1.406147e-001     1.406147e-001     1.406147e-001
5.000000e-001     0.000000e+000    2.840000e+000     0.000000e+000 0.000000e+000 -1.000000e+000     1.581891e-001     1.581891e-001     1.581891e-001
5.000000e-001     2.500000e-001     2.840000e+000     0.000000e+000 0.000000e+000 -1.000000e+000     1.765201e-001     1.765201e-001     1.765201e-001
5.000000e-001     5.000000e-001     2.840000e+000     0.000000e+000 0.000000e+000 -1.000000e+000     1.890535e-001     1.890535e-001     1.890535e-001

I am afraid my daylight factor result are not valid at the height of 1.84m but at 2.84m, am I wrong?

Thanks,
Valere.

From Robert.Guglielmetti at nrel.gov  Thu Jul 16 11:09:43 2009
From: Robert.Guglielmetti at nrel.gov (Guglielmetti, Robert)
Date: Thu Jul 16 11:09:46 2009
Subject: [Radiance-general] daylight factor and rtrace cmd
In-Reply-To: <70DD3A1408BDA8498790E8D553B7D25301D46D248C08@HEFRMAIL.sofr.hefr.lan>
References: <7792B71B342F49C38BDBA8683FA0BDD7@micr817p>
	<70DD3A1408BDA8498790E8D553B7D25301D46D248C08@HEFRMAIL.sofr.hefr.lan>
Message-ID: <DF4A9C5A0CC2DF438AC1834530C59EE001D66D2E2C@MAILBOX1.nrel.gov>

> -----Original Message-----
> From: radiance-general-bounces@radiance-online.org [mailto:radiance-
> general-bounces@radiance-online.org] On Behalf Of Compagnon Rapha?l
> Sent: Thursday, July 16, 2009 11:30 AM
> To: Radiance general discussion
> Subject: RE : [Radiance-general] daylight factor and rtrace cmd
>
> The rtrace -i behaves differently: rtrace will trace a ray for each input
> point in the specified direction. Then it will compute the irradiance at
> the first instersection point found in the scene. In your case, with the
> same input file you would get the irradiance on the ceiling... which is
> probably not what you really need.
> This explains why the most useful -I option exists!

Well now I've gone and confused everyone. You are right, -i (lowercase) is used for picking out illuminance at scene points, and so works as Raphael has described. -I (uppercase) is what I normally use for computing illuminance at a point. I simply use -I with -ov which gives me illuminance at that point. I have not used those other output fields and I'm still a little confused as to how this "1 meter offset" happens with -oodv.

Here's a thread-concluding post from a couple years ago that I have consulted in the past:

http://www.radiance-online.org/pipermail/radiance-general/2007-March/004213.html

- Rob

From Raphael.Compagnon at hefr.ch  Thu Jul 16 11:30:11 2009
From: Raphael.Compagnon at hefr.ch (=?iso-8859-1?Q?Compagnon_Rapha=EBl?=)
Date: Thu Jul 16 11:34:32 2009
Subject: [Radiance-general] daylight factor and rtrace cmd
In-Reply-To: <DF4A9C5A0CC2DF438AC1834530C59EE001D66D2E2C@MAILBOX1.nrel.gov>
References: <7792B71B342F49C38BDBA8683FA0BDD7@micr817p>
	<70DD3A1408BDA8498790E8D553B7D25301D46D248C08@HEFRMAIL.sofr.hefr.lan>,
	<DF4A9C5A0CC2DF438AC1834530C59EE001D66D2E2C@MAILBOX1.nrel.gov>
Message-ID: <70DD3A1408BDA8498790E8D553B7D25301D46D248C09@HEFRMAIL.sofr.hefr.lan>

rtrace -oodv has nothing to do with the "1 meter offset". In fact the "1 meter offsett" thing is just related to how the rtrace -I command computes irradiance at the points and in the directions specified at the input.

Raphael


________________________________________
De : radiance-general-bounces@radiance-online.org [radiance-general-bounces@radiance-online.org] de la part de Guglielmetti, Robert [Robert.Guglielmetti@nrel.gov]
Date d'envoi : jeudi, 16. juillet 2009 20:09
? : Radiance general discussion
Objet : RE: [Radiance-general] daylight factor and rtrace cmd

> -----Original Message-----
> From: radiance-general-bounces@radiance-online.org [mailto:radiance-
> general-bounces@radiance-online.org] On Behalf Of Compagnon Rapha?l
> Sent: Thursday, July 16, 2009 11:30 AM
> To: Radiance general discussion
> Subject: RE : [Radiance-general] daylight factor and rtrace cmd
>
> The rtrace -i behaves differently: rtrace will trace a ray for each input
> point in the specified direction. Then it will compute the irradiance at
> the first instersection point found in the scene. In your case, with the
> same input file you would get the irradiance on the ceiling... which is
> probably not what you really need.
> This explains why the most useful -I option exists!

Well now I've gone and confused everyone. You are right, -i (lowercase) is used for picking out illuminance at scene points, and so works as Raphael has described. -I (uppercase) is what I normally use for computing illuminance at a point. I simply use -I with -ov which gives me illuminance at that point. I have not used those other output fields and I'm still a little confused as to how this "1 meter offset" happens with -oodv.

Here's a thread-concluding post from a couple years ago that I have consulted in the past:

http://www.radiance-online.org/pipermail/radiance-general/2007-March/004213.html

- Rob

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general

From antonutto at yahoo.it  Thu Jul 16 12:10:22 2009
From: antonutto at yahoo.it (giulio antonutto)
Date: Thu Jul 16 12:10:30 2009
Subject: R: RE : [Radiance-general] daylight factor and rtrace cmd
In-Reply-To: <70DD3A1408BDA8498790E8D553B7D25301D46D248C09@HEFRMAIL.sofr.hefr.lan>
Message-ID: <596415.68111.qm@web23107.mail.ird.yahoo.com>

sorry, little time - may be not the answer you are looking for, but as Raphael says, nothing to do with it.
anyway if you want a point and the illuminance at that point in the output file, 
use that point in the grid, -I in rtrace and again?-opv.
this saves the point from the grid to the final output.
?
explanation, the point of the grid is the intersection point in the calcualtion as the observer is moved 1 unit from it and used to trace a luminance calculation converted in illuminance...
anyway 
-opv
?
ciao
G


--- Gio 16/7/09, Compagnon Rapha?l <Raphael.Compagnon@hefr.ch> ha scritto:


Da: Compagnon Rapha?l <Raphael.Compagnon@hefr.ch>
Oggetto: RE : [Radiance-general] daylight factor and rtrace cmd
A: "Radiance general discussion" <radiance-general@radiance-online.org>
Data: Gioved? 16 luglio 2009, 20:30


rtrace -oodv has nothing to do with the "1 meter offset". In fact the "1 meter offsett" thing is just related to how the rtrace -I command computes irradiance at the points and in the directions specified at the input.

Raphael


________________________________________
De : radiance-general-bounces@radiance-online.org [radiance-general-bounces@radiance-online.org] de la part de Guglielmetti, Robert [Robert.Guglielmetti@nrel.gov]
Date d'envoi : jeudi, 16. juillet 2009 20:09
? : Radiance general discussion
Objet : RE: [Radiance-general] daylight factor and rtrace cmd

> -----Original Message-----
> From: radiance-general-bounces@radiance-online.org [mailto:radiance-
> general-bounces@radiance-online.org] On Behalf Of Compagnon Rapha?l
> Sent: Thursday, July 16, 2009 11:30 AM
> To: Radiance general discussion
> Subject: RE : [Radiance-general] daylight factor and rtrace cmd
>
> The rtrace -i behaves differently: rtrace will trace a ray for each input
> point in the specified direction. Then it will compute the irradiance at
> the first instersection point found in the scene. In your case, with the
> same input file you would get the irradiance on the ceiling... which is
> probably not what you really need.
> This explains why the most useful -I option exists!

Well now I've gone and confused everyone. You are right, -i (lowercase) is used for picking out illuminance at scene points, and so works as Raphael has described. -I (uppercase) is what I normally use for computing illuminance at a point. I simply use -I with -ov which gives me illuminance at that point. I have not used those other output fields and I'm still a little confused as to how this "1 meter offset" happens with -oodv.

Here's a thread-concluding post from a couple years ago that I have consulted in the past:

http://www.radiance-online.org/pipermail/radiance-general/2007-March/004213..html

- Rob

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general



      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20090716/c5340cfc/attachment.htm
From gward at lmi.net  Thu Jul 16 19:45:08 2009
From: gward at lmi.net (Greg Ward)
Date: Thu Jul 16 19:45:03 2009
Subject: [Radiance-general] daylight factor and rtrace cmd
In-Reply-To: <89355c0f0907160945p25ca271ud6b9af389c2a4b45@mail.gmail.com>
References: <7792B71B342F49C38BDBA8683FA0BDD7@micr817p>
	<89355c0f0907160945p25ca271ud6b9af389c2a4b45@mail.gmail.com>
Message-ID: <C8B20BAD-0E22-493B-BC1C-4EF285A76330@lmi.net>

Yes, the -oo option combined with -I doesn't really work properly in  
rtrace, as it "fakes" an intersection with an ideal diffuse surface a  
tiny amount (about 1e-6) in front of the point you specified, while  
setting the ray origin arbitrarily one unit before it.  No actual  
intersection calculation is done, so no worries about intervening  
rays.  This is something I should fix, but since you give the origin  
on input, it hasn't come up very often where people want the same  
origin on output.

-Greg

> From: Thomas Bleicher <tbleicher@googlemail.com>
> Date: July 16, 2009 9:45:58 AM PDT
>
> As Chris wrote, -I implies an observer point 1m above the 'point of  
> interest'.
> But it also turns around the view vector (your output shows  
> -1.000000e+000).
>
> Basically rtrace introduces a virtual plane of lambertian  
> properties and looks
> down onto this plane to calculate the irridance from the reflection  
> (which is
> identical).
>
> The offset of 1m is only a problem if you want to use the output to  
> anchor
> your results in a model or if your workplane is close to an  
> obstruction that's
> lower than 1m above the plane. Then the rtrace rays would hit the back
> of the obstruction and not the ideal reflector.
>
> But then, perhaps Greg has anticipated this case and added some  
> magic to
> avoid it ...
>
> Thomas

From tbleicher at googlemail.com  Thu Jul 16 22:40:33 2009
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Thu Jul 16 22:40:37 2009
Subject: [Radiance-general] daylight factor and rtrace cmd
In-Reply-To: <C8B20BAD-0E22-493B-BC1C-4EF285A76330@lmi.net>
References: <7792B71B342F49C38BDBA8683FA0BDD7@micr817p>
	<89355c0f0907160945p25ca271ud6b9af389c2a4b45@mail.gmail.com>
	<C8B20BAD-0E22-493B-BC1C-4EF285A76330@lmi.net>
Message-ID: <89355c0f0907162240u432599e2o6b824d22a23828ac@mail.gmail.com>

On Fri, Jul 17, 2009 at 3:45 AM, Greg Ward<gward@lmi.net> wrote:
> Yes, the -oo option combined with -I doesn't really work properly in rtrace,
> as it "fakes" an intersection with an ideal diffuse surface a tiny amount
> (about 1e-6) in front of the point you specified, while setting the ray
> origin arbitrarily one unit before it. ?No actual intersection calculation
> is done, so no worries about intervening rays.

So the 1 unit offset is only a fake to make the output options happy
and does not interfere with the scene geometry. That's good.

> This is something I should
> fix, but since you give the origin on input, it hasn't come up very often
> where people want the same origin on output.

It's a bit inconsistent to throw a file at rtrace specifying what you want
and getting back from rtace what it actually did. Like ordering a door
and getting delivered some planks and a saw. (Should we call this
'IKEA rendering'?)

While we're at it, I think that this virtual intersection also swallows one
bounce out of your '-ab' specs. That only becomes obvious when you
try to eliminate indirect contributions ('-ab 0' and '-ab 1') but then it's
rather annoying when you don't remember it.

What's the community's opinion? Should rtrace raise the bounce count
for '-I' internally or should it just be well document? I'm not sure what's
more consistent with the way Radiance behaves now or if there are any
side effects.

Thomas

From gward at lmi.net  Thu Jul 16 23:02:06 2009
From: gward at lmi.net (Greg Ward)
Date: Thu Jul 16 23:02:01 2009
Subject: [Radiance-general] daylight factor and rtrace cmd
In-Reply-To: <89355c0f0907162240u432599e2o6b824d22a23828ac@mail.gmail.com>
References: <7792B71B342F49C38BDBA8683FA0BDD7@micr817p>
	<89355c0f0907160945p25ca271ud6b9af389c2a4b45@mail.gmail.com>
	<C8B20BAD-0E22-493B-BC1C-4EF285A76330@lmi.net>
	<89355c0f0907162240u432599e2o6b824d22a23828ac@mail.gmail.com>
Message-ID: <96E622F0-A37A-477A-8773-30CBABAD6DD1@lmi.net>

Hi Thomas,

I agree that the -oo output is odd behavior.  I'm a bit afraid to  
change it, though, because there might be someplace in the code where  
zero ray lengths are problematic, and the initial "false primary" ray  
is needed for consistency for rtrace's reporting routines.  I suppose  
I can try it and see if anything bad happens.

I'm not sure what you mean, though, about the -I option changing the  
effect of -ab.  I suppose it depends on how you think about it.  With  
-ab set to 0, only direct illumination arriving at that position is  
considered.  Setting -ab 1 sends out sample rays over the hemisphere  
to gather indirect contributions.  Is this other than what you would  
expect?

-Greg

> From: Thomas Bleicher <tbleicher@googlemail.com>
> Date: July 16, 2009 10:40:33 PM PDT
>
> On Fri, Jul 17, 2009 at 3:45 AM, Greg Ward<gward@lmi.net> wrote:
>> Yes, the -oo option combined with -I doesn't really work properly  
>> in rtrace,
>> as it "fakes" an intersection with an ideal diffuse surface a tiny  
>> amount
>> (about 1e-6) in front of the point you specified, while setting  
>> the ray
>> origin arbitrarily one unit before it.  No actual intersection  
>> calculation
>> is done, so no worries about intervening rays.
>
> So the 1 unit offset is only a fake to make the output options happy
> and does not interfere with the scene geometry. That's good.
>
>> This is something I should
>> fix, but since you give the origin on input, it hasn't come up  
>> very often
>> where people want the same origin on output.
>
> It's a bit inconsistent to throw a file at rtrace specifying what  
> you want
> and getting back from rtace what it actually did. Like ordering a door
> and getting delivered some planks and a saw. (Should we call this
> 'IKEA rendering'?)
>
> While we're at it, I think that this virtual intersection also  
> swallows one
> bounce out of your '-ab' specs. That only becomes obvious when you
> try to eliminate indirect contributions ('-ab 0' and '-ab 1') but  
> then it's
> rather annoying when you don't remember it.
>
> What's the community's opinion? Should rtrace raise the bounce count
> for '-I' internally or should it just be well document? I'm not  
> sure what's
> more consistent with the way Radiance behaves now or if there are any
> side effects.
>
> Thomas

From gward at lmi.net  Thu Jul 16 23:24:23 2009
From: gward at lmi.net (Greg Ward)
Date: Thu Jul 16 23:24:18 2009
Subject: [Radiance-general] daylight factor and rtrace cmd
In-Reply-To: <89355c0f0907162240u432599e2o6b824d22a23828ac@mail.gmail.com>
References: <7792B71B342F49C38BDBA8683FA0BDD7@micr817p>
	<89355c0f0907160945p25ca271ud6b9af389c2a4b45@mail.gmail.com>
	<C8B20BAD-0E22-493B-BC1C-4EF285A76330@lmi.net>
	<89355c0f0907162240u432599e2o6b824d22a23828ac@mail.gmail.com>
Message-ID: <E158AD9F-D934-4B89-8D21-DFE1D5FBB314@lmi.net>

I have modified the HEAD distribution with a version of rtrace that  
doesn't add 1.0 in the surface normal direction to the value reported  
by the -oo option.  I sure hope this doesn't break anything.  It  
still adds a small quantity (1.1e-4) so as to prevent any possible  
intersection with surfaces that are not quite where the user thinks  
they are, and this is as before.

I hope we are reaching the end of this thread...

-Greg

From tbleicher at googlemail.com  Fri Jul 17 00:05:19 2009
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Fri Jul 17 00:05:26 2009
Subject: [Radiance-general] daylight factor and rtrace cmd
In-Reply-To: <96E622F0-A37A-477A-8773-30CBABAD6DD1@lmi.net>
References: <7792B71B342F49C38BDBA8683FA0BDD7@micr817p>
	<89355c0f0907160945p25ca271ud6b9af389c2a4b45@mail.gmail.com>
	<C8B20BAD-0E22-493B-BC1C-4EF285A76330@lmi.net>
	<89355c0f0907162240u432599e2o6b824d22a23828ac@mail.gmail.com>
	<96E622F0-A37A-477A-8773-30CBABAD6DD1@lmi.net>
Message-ID: <89355c0f0907170005p2c446b89kc50dd75097525f79@mail.gmail.com>

Hi Greg. Still awake or are you traveling again?

On Fri, Jul 17, 2009 at 7:02 AM, Greg Ward<gward@lmi.net> wrote:

> I'm not sure what you mean, though, about the -I option changing the effect
> of -ab. ?I suppose it depends on how you think about it. ?With -ab set to 0,
> only direct illumination arriving at that position is considered. ?Setting
> -ab 1 sends out sample rays over the hemisphere to gather indirect
> contributions. ?Is this other than what you would expect?

Perhaps it's me being extremely blond about the meaning of "-i" vs "-I".

Consider a scene with a sky and a plane just below z=0.
I am now looking down from z=1 onto the plane and get:

$ echo "0 0 1 0 0 -1" | rtrace -h -i -ab 0 scene.oct
2.541776e+01    2.541776e+01    2.541776e+01

$ echo "0 0 1 0 0 -1" | rtrace -h -i -ab 1 scene.oct
7.457800e+01    7.457800e+01    7.457800e+01

$ echo "0 0 1 0 0 -1" | rtrace -h -I -ab 0 scene.oct
0.000000e+00    0.000000e+00    0.000000e+00

$ echo "0 0 1 0 0 -1" | rtrace -h -I -ab 1 scene.oct
2.033156e+01    2.033156e+01    2.033156e+01

Why do I get different values for "-i" for "-ab 0" and "-ab 1"?
There is nothing in the scene to bounce light off.

And why do I get "0 0 0" for "-ab 0" when i use "-I" but not
when I use "-i". For "-ab 0" I would have expected both of them
to be zero.


Thomas

From gward at lmi.net  Fri Jul 17 08:37:43 2009
From: gward at lmi.net (Greg Ward)
Date: Fri Jul 17 08:37:48 2009
Subject: [Radiance-general] daylight factor and rtrace cmd
In-Reply-To: <89355c0f0907170005p2c446b89kc50dd75097525f79@mail.gmail.com>
References: <7792B71B342F49C38BDBA8683FA0BDD7@micr817p>
	<89355c0f0907160945p25ca271ud6b9af389c2a4b45@mail.gmail.com>
	<C8B20BAD-0E22-493B-BC1C-4EF285A76330@lmi.net>
	<89355c0f0907162240u432599e2o6b824d22a23828ac@mail.gmail.com>
	<96E622F0-A37A-477A-8773-30CBABAD6DD1@lmi.net>
	<89355c0f0907170005p2c446b89kc50dd75097525f79@mail.gmail.com>
Message-ID: <3FDAB690-7C93-44BE-B74A-D46C2169AEAA@lmi.net>

Hi Thomas,

> From: Thomas Bleicher <tbleicher@googlemail.com>
> Date: July 17, 2009 12:05:19 AM PDT
>
> Hi Greg. Still awake or are you traveling again?

Slept, thanks.

> On Fri, Jul 17, 2009 at 7:02 AM, Greg Ward<gward@lmi.net> wrote:
>
>> I'm not sure what you mean, though, about the -I option changing  
>> the effect
>> of -ab.  I suppose it depends on how you think about it.  With -ab  
>> set to 0,
>> only direct illumination arriving at that position is considered.   
>> Setting
>> -ab 1 sends out sample rays over the hemisphere to gather indirect
>> contributions.  Is this other than what you would expect?
>
> Perhaps it's me being extremely blond about the meaning of "-i" vs  
> "-I".
>
> Consider a scene with a sky and a plane just below z=0.
> I am now looking down from z=1 onto the plane and get:
>
> $ echo "0 0 1 0 0 -1" | rtrace -h -i -ab 0 scene.oct
> 2.541776e+01    2.541776e+01    2.541776e+01
>
> $ echo "0 0 1 0 0 -1" | rtrace -h -i -ab 1 scene.oct
> 7.457800e+01    7.457800e+01    7.457800e+01
>
> $ echo "0 0 1 0 0 -1" | rtrace -h -I -ab 0 scene.oct
> 0.000000e+00    0.000000e+00    0.000000e+00
>
> $ echo "0 0 1 0 0 -1" | rtrace -h -I -ab 1 scene.oct
> 2.033156e+01    2.033156e+01    2.033156e+01
>
> Why do I get different values for "-i" for "-ab 0" and "-ab 1"?
> There is nothing in the scene to bounce light off.

The sky dome and the distant ground for a standard sky description  
are considered as part of the "indirect" calculation, so you only get  
those contributions with -ab 1 (or higher).

> And why do I get "0 0 0" for "-ab 0" when i use "-I" but not
> when I use "-i". For "-ab 0" I would have expected both of them
> to be zero.

I'm guessing this is because your sun is above the horizon and your - 
I usage has the normal facing the ground.  Using -i, a ray is sent  
that hits the ground then looks skyward, where it sees the sun  
again.  The sun doesn't need -ab 1 to contribute.

Does this make sense, yet?

-Greg

From sotos.enveng at gmail.com  Tue Jul 21 18:17:16 2009
From: sotos.enveng at gmail.com (Sotiris Papantoniou)
Date: Tue Jul 21 18:19:37 2009
Subject: [Radiance-general] Simulating light ray movement inside swimming
	pool water. Light sources not in the water
Message-ID: <4a6668a5.1c07d00a.09e3.2718@mx.google.com>

Dear list,

Hello my name is Sotiris Papantoniou MSc student of Welsh school of
architecture doing my dissertation in the field of lighting. I am trying to
identify if Radiance can simulate correctly the light ray movement within
the water. An actual swimming pool will be simulated and the data from
radiance will be compared to real time underwater light measurements. The
overall purpose is to identify if possible glare problems can be found with
the use of radiance before the actual construction of the swimming pool.


Reading all the previous mails about water I have found that dielectric
material is the most appropriate to use. 

Apart from that mist pseudo-material has been suggested as well. Since my
light sources are not in the water but 3 or more meters above it, would you
suggest to create 2 mist volumes as it is described in RwR or avoid using
mist?


Any other suggestions are accepted since I am actually lost within all these
information

Thank you for your time

Sotiris Papantoniou
MSc Environmental Engineering
Cardiff
Mob: +44(0)7724711345


From lars.grobe at nus.edu.sg  Tue Jul 21 19:15:33 2009
From: lars.grobe at nus.edu.sg (Lars O. Grobe)
Date: Tue Jul 21 19:15:41 2009
Subject: [Radiance-general] Simulating light ray movement inside swimming
	pool water. Light sources not in the water
In-Reply-To: <4a6668a5.1c07d00a.09e3.2718@mx.google.com>
References: <4a6668a5.1c07d00a.09e3.2718@mx.google.com>
Message-ID: <4A667645.7090605@nus.edu.sg>

Hi and welcome,

you have choosen a difficult topic, as there are many unknown variables 
in what you want to simulate.

But first of all, what glare are you refering to? Glare caused by 
reflections, which could be experienced by someone next to the pool?

Water could be modeled purely as a dielectric. Mist would show the 
effects of bubbles, small particles, anything that makes the clear water 
become somehow misty ;-) So you would have to know whether the water in 
your pool is perfectly clear (e.g. a diver in it would not see a light 
beam when you point a strong spot to it), or whether you would expect 
any kind of particles in there (which would make that light beam become 
visible due to scattering). You may also use mist if there is mist in 
the air over your water surface due to condensation in the (compared to 
the water) colder air.

Second, what is the surface of the water body looking like? On earth, 
due to gravity, you would expect it to be almost perfectly plane, but 
experience tells us that there are small waves and such due to air 
movement, swimmers and such. Unfortunately, the surface geometry of a 
dielectric material has a huge influence on how you perceive it. So you 
would need to know the shape of the water surface in order to simulate 
it. If you go into this, the photon mapping extension may be valuable, 
as it can show caustics as you would see them under a wavy water surface 
on the ground of the pool.

Cheers, Lars.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lars_grobe.vcf
Type: text/x-vcard
Size: 299 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20090722/8134bb3f/lars_grobe.vcf
From lars.grobe at nus.edu.sg  Wed Jul 22 01:05:06 2009
From: lars.grobe at nus.edu.sg (Lars O. Grobe)
Date: Wed Jul 22 01:05:14 2009
Subject: [Radiance-general] proposed feature: interpreting view names in rad
Message-ID: <4A66C832.7080809@nus.edu.sg>

Hi,

I am not sure whether this would break anything, but it would be a 
rather useful way of organizing renderings:

At the moment, I can pass a view name to rad using the -v parameter, and 
this will cause exactly one view to be rendered, which must have been 
named in the view= line in the rif file.

Now, this view= line can point to a view file, which may contain more 
then one view. I would have expected rad to render all the views in that 
file, but as -v is defined to render exactly one view, rad takes only 
one of the views defined in the view file and ignores the others.

I would propose to change this behaviour. If I call rad e.g. as

rad -v myview myoctree.oct

it would be very useful if rad would look whether it finds a view= line 
for myview. If it finds one defining one view, render that. If it finds 
one pointing to a view file, render all the views in that view file. If 
I call rad as

rad -v anotherview -v myview myoctree.oct

it should render all views defined in the view= lines for anotherview 
and myview, be it view files or view definitions inside the rif.

One reason this would be helpful is as such: I am currently working on a 
scene, which needs some view-dependent processing. So I have a script 
which does some work, cleans up, creates an octree, creates photon maps, 
and then calls rad. Now I would like to call the same rif-file for all 
of these, as it eventually contains the same information for all 
renderings except the views. And I cannot render all views at once, as I 
have to modify the octree before moving to the next "view group" (this 
translates to rooms in my example).

I am sure that there are other uses for this. What do you think? Is 
there any way people may have used the -v parameter that could imply the 
risk of breaking compatibility by introducing such a change?

Cheers Lars.

-- 
Lars O. Grobe (Mr) :: Research Fellow, Solar Energy Research Institute 
of Singapore SERIS :: National University of Singapore :: 7 Engineering 
Drive 1, Block #E3A-06-35, Singapore 117576 :: 65-6516 5816(Tel) :: 
65-6775 1943 (Fax) :: serlog@nus.edu.sg (E) :: www.seris.sg (W) :: 
Company Registration No: 200604346E

Important: This email is confidential and may be privileged. If you are 
not the intended recipient, please delete it and notify us immediately; 
you should not copy or use it for any purpose, nor disclose its contents 
to any other person. Thank you.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lars_grobe.vcf
Type: text/x-vcard
Size: 299 bytes
Desc: not available
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20090722/f6799abc/lars_grobe.vcf
From tbleicher at googlemail.com  Wed Jul 22 05:02:00 2009
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Wed Jul 22 05:02:07 2009
Subject: [Radiance-general] proposed feature: interpreting view names in 
	rad
In-Reply-To: <4A66C832.7080809@nus.edu.sg>
References: <4A66C832.7080809@nus.edu.sg>
Message-ID: <89355c0f0907220502m19f12a2p3ed66f8b867980f6@mail.gmail.com>

Have you considered using ranimate here?

Thomas

On Wed, Jul 22, 2009 at 9:05 AM, Lars O. Grobe<lars.grobe@nus.edu.sg> wrote:
> Hi,
>
> I am not sure whether this would break anything, but it would be a rather
> useful way of organizing renderings:
>
> At the moment, I can pass a view name to rad using the -v parameter, and
> this will cause exactly one view to be rendered, which must have been named
> in the view= line in the rif file.
>
> Now, this view= line can point to a view file, which may contain more then
> one view. I would have expected rad to render all the views in that file,
> but as -v is defined to render exactly one view, rad takes only one of the
> views defined in the view file and ignores the others.
>
> I would propose to change this behaviour. If I call rad e.g. as
>
> rad -v myview myoctree.oct
>
> it would be very useful if rad would look whether it finds a view= line for
> myview. If it finds one defining one view, render that. If it finds one
> pointing to a view file, render all the views in that view file. If I call
> rad as
>
> rad -v anotherview -v myview myoctree.oct
>
> it should render all views defined in the view= lines for anotherview and
> myview, be it view files or view definitions inside the rif.
>
> One reason this would be helpful is as such: I am currently working on a
> scene, which needs some view-dependent processing. So I have a script which
> does some work, cleans up, creates an octree, creates photon maps, and then
> calls rad. Now I would like to call the same rif-file for all of these, as
> it eventually contains the same information for all renderings except the
> views. And I cannot render all views at once, as I have to modify the octree
> before moving to the next "view group" (this translates to rooms in my
> example).
>
> I am sure that there are other uses for this. What do you think? Is there
> any way people may have used the -v parameter that could imply the risk of
> breaking compatibility by introducing such a change?
>
> Cheers Lars.
>
> --
> Lars O. Grobe (Mr) :: Research Fellow, Solar Energy Research Institute of
> Singapore SERIS :: National University of Singapore :: 7 Engineering Drive
> 1, Block #E3A-06-35, Singapore 117576 :: 65-6516 5816(Tel) :: 65-6775 1943
> (Fax) :: serlog@nus.edu.sg (E) :: www.seris.sg (W) :: Company Registration
> No: 200604346E
>
> Important: This email is confidential and may be privileged. If you are not
> the intended recipient, please delete it and notify us immediately; you
> should not copy or use it for any purpose, nor disclose its contents to any
> other person. Thank you.
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>

From jedev at visarc.com  Wed Jul 22 06:26:59 2009
From: jedev at visarc.com (Jack de Valpine)
Date: Wed Jul 22 06:27:19 2009
Subject: [Radiance-general] proposed feature: interpreting view names
	in rad
In-Reply-To: <89355c0f0907220502m19f12a2p3ed66f8b867980f6@mail.gmail.com>
References: <4A66C832.7080809@nus.edu.sg>
	<89355c0f0907220502m19f12a2p3ed66f8b867980f6@mail.gmail.com>
Message-ID: <4A6713A3.6010701@visarc.com>

A view file is supposed to represent one (1) view. The last line of the 
view file is considered to be the view spec.  Considering a view file to 
be a collection of multiple views is counter productive.

It seems to me that there are a few ways to do what you want:

   1. create multiple rif files with each one representing a "view
      group" and containing multiple "view=" lines, note this is really
      one of the things that rif file is for, that is to create coherent
      groupings of views with respect to a set of
      geometry/materials/lighting as defined in an octree....
   2. enhance your script to include a separate "view group" file, the
      script can parse the view group file and pass the relevant views
      to the rif file, in essence building a rif file on the fly....
   3. ranimate, as Thomas suggests, you could probably do something with
      the ANIMATE parameter for ranimate pointing to a script to produce
      the correctly modified octree and use a VIEWFILE with all your
      views in it.

-Jack

Thomas Bleicher wrote:
> Have you considered using ranimate here?
>
> Thomas
>
> On Wed, Jul 22, 2009 at 9:05 AM, Lars O. Grobe<lars.grobe@nus.edu.sg> wrote:
>   
>> Hi,
>>
>> I am not sure whether this would break anything, but it would be a rather
>> useful way of organizing renderings:
>>
>> At the moment, I can pass a view name to rad using the -v parameter, and
>> this will cause exactly one view to be rendered, which must have been named
>> in the view= line in the rif file.
>>
>> Now, this view= line can point to a view file, which may contain more then
>> one view. I would have expected rad to render all the views in that file,
>> but as -v is defined to render exactly one view, rad takes only one of the
>> views defined in the view file and ignores the others.
>>
>> I would propose to change this behaviour. If I call rad e.g. as
>>
>> rad -v myview myoctree.oct
>>
>> it would be very useful if rad would look whether it finds a view= line for
>> myview. If it finds one defining one view, render that. If it finds one
>> pointing to a view file, render all the views in that view file. If I call
>> rad as
>>
>> rad -v anotherview -v myview myoctree.oct
>>
>> it should render all views defined in the view= lines for anotherview and
>> myview, be it view files or view definitions inside the rif.
>>
>> One reason this would be helpful is as such: I am currently working on a
>> scene, which needs some view-dependent processing. So I have a script which
>> does some work, cleans up, creates an octree, creates photon maps, and then
>> calls rad. Now I would like to call the same rif-file for all of these, as
>> it eventually contains the same information for all renderings except the
>> views. And I cannot render all views at once, as I have to modify the octree
>> before moving to the next "view group" (this translates to rooms in my
>> example).
>>
>> I am sure that there are other uses for this. What do you think? Is there
>> any way people may have used the -v parameter that could imply the risk of
>> breaking compatibility by introducing such a change?
>>
>> Cheers Lars.
>>
>> --
>> Lars O. Grobe (Mr) :: Research Fellow, Solar Energy Research Institute of
>> Singapore SERIS :: National University of Singapore :: 7 Engineering Drive
>> 1, Block #E3A-06-35, Singapore 117576 :: 65-6516 5816(Tel) :: 65-6775 1943
>> (Fax) :: serlog@nus.edu.sg (E) :: www.seris.sg (W) :: Company Registration
>> No: 200604346E
>>
>> Important: This email is confidential and may be privileged. If you are not
>> the intended recipient, please delete it and notify us immediately; you
>> should not copy or use it for any purpose, nor disclose its contents to any
>> other person. Thank you.
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general@radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
>>     
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>   


-- 
# Jack de Valpine
# president
#
# visarc incorporated
# http://www.visarc.com
#
# channeling technology for superior design and construction

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20090722/41eeb274/attachment-0001.htm
From grobe at gmx.net  Wed Jul 22 06:35:15 2009
From: grobe at gmx.net (Lars O. Grobe)
Date: Wed Jul 22 06:35:40 2009
Subject: [Radiance-general] proposed feature: interpreting view names
	in rad
In-Reply-To: <89355c0f0907220502m19f12a2p3ed66f8b867980f6@mail.gmail.com>
References: <4A66C832.7080809@nus.edu.sg>
	<89355c0f0907220502m19f12a2p3ed66f8b867980f6@mail.gmail.com>
Message-ID: <4A671593.7070905@gmx.net>

Hi Thomas, hi Jack!

Thomas wrote:
> Have you considered using ranimate here?

Yes, I have used it for all kind of stuff before. But in my case, I
would have to add configuration files for ranimate additionally to the
rif. And all I want to do is rendering three groups of views. I know
that there are work-arounds, but I cannot imagine any case where one
would need the current behaviour of rad to render only the first view of
a viewfile, as in that case one would not have added other views to the
same file (or had commented them out.

Jack wrote:
> A view file is supposed to represent one (1) view. The last line of
> the view file is considered to be the view spec.  Considering a view
> file to be a collection of multiple views is counter productive.

Regarding the idea, that there should always be only one view per view
file, this is a contradiction to the behaviour of core radiance tools.
rvu e.g. appends views to an existing view file, and I can cat a view
file with hundreds of views into rpict, which will happily render one by
one. I cannot use these view-files only in rad, as (only) this tool
reads only the last line of a view file.

At the moment I am using a "<myview.vf" at the end of the render= line
in my rif file. This is a work-around, but not a nice one, as it
disables filtering and naming.

BTW, we should also change the default extension for filtered frames to
hdr in rad, now that there is a mime-type registred.

Cheers, Lars.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3740 bytes
Desc: S/MIME Cryptographic Signature
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20090722/58ed6996/smime.bin
From jedev at visarc.com  Wed Jul 22 06:44:24 2009
From: jedev at visarc.com (Jack de Valpine)
Date: Wed Jul 22 06:45:12 2009
Subject: [Radiance-general] Simulating light ray movement inside swimming
	pool water. Light sources not in the water
In-Reply-To: <4a6668a5.1c07d00a.09e3.2718@mx.google.com>
References: <4a6668a5.1c07d00a.09e3.2718@mx.google.com>
Message-ID: <4A6717B8.3050803@visarc.com>

Hi Sotiris,

You should search for the following:

    water - any news???

at www.radiance-online.org. This will result in a thread discussion on 
the topic in which Greg Ward provides some suggestions and a script for 
using the "rtcontrib" tool in Radiance for doing simulations including 
water.

Regards,

-Jack de Valpine

Sotiris Papantoniou wrote:
> Dear list,
>
> Hello my name is Sotiris Papantoniou MSc student of Welsh school of
> architecture doing my dissertation in the field of lighting. I am trying to
> identify if Radiance can simulate correctly the light ray movement within
> the water. An actual swimming pool will be simulated and the data from
> radiance will be compared to real time underwater light measurements. The
> overall purpose is to identify if possible glare problems can be found with
> the use of radiance before the actual construction of the swimming pool.
>
>
> Reading all the previous mails about water I have found that dielectric
> material is the most appropriate to use. 
>
> Apart from that mist pseudo-material has been suggested as well. Since my
> light sources are not in the water but 3 or more meters above it, would you
> suggest to create 2 mist volumes as it is described in RwR or avoid using
> mist?
>
>
> Any other suggestions are accepted since I am actually lost within all these
> information
>
> Thank you for your time
>
> Sotiris Papantoniou
> MSc Environmental Engineering
> Cardiff
> Mob: +44(0)7724711345
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>   


-- 
# Jack de Valpine
# president
#
# visarc incorporated
# http://www.visarc.com
#
# channeling technology for superior design and construction

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20090722/e520df68/attachment.htm
From jedev at visarc.com  Wed Jul 22 07:05:33 2009
From: jedev at visarc.com (Jack de Valpine)
Date: Wed Jul 22 07:05:43 2009
Subject: [Radiance-general] proposed feature: interpreting view names
	in rad
In-Reply-To: <4A671593.7070905@gmx.net>
References: <4A66C832.7080809@nus.edu.sg>	<89355c0f0907220502m19f12a2p3ed66f8b867980f6@mail.gmail.com>
	<4A671593.7070905@gmx.net>
Message-ID: <4A671CAD.9010406@visarc.com>

Hi Lars,

> Jack wrote:
>   
>> A view file is supposed to represent one (1) view. The last line of
>> the view file is considered to be the view spec.  Considering a view
>> file to be a collection of multiple views is counter productive.
>>     
>
> Regarding the idea, that there should always be only one view per view
> file, this is a contradiction to the behaviour of core radiance tools.
> rvu e.g. appends views to an existing view file, and I can cat a view
> file with hundreds of views into rpict, which will happily render one by
> one. I cannot use these view-files only in rad, as (only) this tool
> reads only the last line of a view file.
>   

I think that we have some disagreement here. Rpict reads a view file and 
takes the last line of the file and uses that as the view parameters to 
render. Rad is designed to pass named view parameters or view files to 
rpict, if you want rad to do multiple views you can input multiple 
"view=" lines in the rif file. By using "cat" you are using a unix tool 
(outside the Radiance toolbox) to output each line of the file to 
stdout, this is different than what rad does, and creates a different 
expectation for what a viewfile contains, eg mapping of one view file to 
one camera location vs mapping of one view file to many camera 
locations.... Effectively a rif file serves as a way to group multiple 
views to a particular octree definition, thus resulting in a mapping of 
one file (a rif file) to many views by means of the rad tool.

If you have only three groupings of views why not just create three 
separate rif files?

-Jack

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20090722/a3ddcc17/attachment.html
From sotos.enveng at gmail.com  Wed Jul 22 09:19:46 2009
From: sotos.enveng at gmail.com (Sotiris Papantoniou)
Date: Wed Jul 22 09:19:57 2009
Subject: [Radiance-general] Simulating light ray movement inside swimming
	pool water. Light sources not in the water
Message-ID: <4a673c26.1818d00a.7ebb.ffffbb30@mx.google.com>

Hello again,

 

At first thank you for the welcome and the immediate answers.

 

Lars, my concern in the dissertation is the glare effect created in the
swimming pool and do not allow a lifeguard to search the bottom of the pool.
According to the theory found till now, I am interesting in the amount of
light reflecting from the surface and the amount that is travelling through
the water till it hits the bottom and all the way up. The ratio of the
intensities will show me how much glare I have in the swimming pool. I have
already found in previous messages a formula in Radiance that calculates
correctly the reflection of light and for this reason I am working for the
amount of light that travels in the water. Thank you for the information
about the dielectric and I think that I will abandon the mist
pseudo-material. Since water is clean in the swimming pool. 

 

Jack de Velpine, I have found already the threads about "water any news ???
" but it seems like there are more mails than those I have found. I will
search them all and I'll try to understand the "rtcontrib" tool. I may come
back with any new questions.

 

Thank you all for your time

 

Sotiris

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20090722/cee93999/attachment-0001.htm
From danf at eb7.co.uk  Wed Jul 22 10:29:11 2009
From: danf at eb7.co.uk (Dan Fitzpatrick)
Date: Wed Jul 22 10:30:47 2009
Subject: [Radiance-general] Bash problems
In-Reply-To: <4a673c26.1818d00a.7ebb.ffffbb30@mx.google.com>
References: <4a673c26.1818d00a.7ebb.ffffbb30@mx.google.com>
Message-ID: <7E9191C753C6724DB772B5610559B2CF17E00EEF@winxbeuk01.exchange.xchg>

Dear Community

I am trying to determine a maximum illum value within a picture file then print the result if it is above a certain value.  Here is where I am at the moment:

maxim=$(pextrem -o 9.pic | rcalc -e '$1=($3*0.265+$4*0.670+$5*0.065)*179' | total -u)
echo $maxim
if [ "$maxim" -gt 15000 ] ; then
pextrem -o 9.pic | rcalc -e '$1=($3*0.265+$4*0.670+$5*0.065)*179' total -u > 9.dat
fi
done

The problem:  I keep getting the : integer expression expected warning.  As far as I can see, $maxim is an integer as shown from the echo expression.  Therefore I don't understand what I'm doing wrong here.  Any pointers will be greatly appreciated.

Dan

From grobe at gmx.net  Wed Jul 22 10:47:16 2009
From: grobe at gmx.net (Lars O. Grobe)
Date: Wed Jul 22 10:47:28 2009
Subject: [Radiance-general] Bash problems
In-Reply-To: <7E9191C753C6724DB772B5610559B2CF17E00EEF@winxbeuk01.exchange.xchg>
References: <4a673c26.1818d00a.7ebb.ffffbb30@mx.google.com>
	<7E9191C753C6724DB772B5610559B2CF17E00EEF@winxbeuk01.exchange.xchg>
Message-ID: <4A6750A4.4030205@gmx.net>

Hi Dan,

it is easier then that. You can use the special variable cond in rcalc
to decide whether any output is to be generated or not.

pextrem -o 9.pic | rcalc -e 'illummax=($3*0.265+$4*0.670+$5*0.065)*179'
-e 'cond=if(illummax-15000,1,-1)' -e '$1=illummax' | total -u > 9.dat

does the job (ok, you will get an empty file 9.dat if the illuminance
value is below 15000).

Cheers, Lars.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3740 bytes
Desc: S/MIME Cryptographic Signature
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20090723/ae38e4e8/smime.bin
From danf at eb7.co.uk  Wed Jul 22 11:00:50 2009
From: danf at eb7.co.uk (Dan Fitzpatrick)
Date: Wed Jul 22 11:01:01 2009
Subject: [Radiance-general] Bash problems
In-Reply-To: <4A6750A4.4030205@gmx.net>
References: <4a673c26.1818d00a.7ebb.ffffbb30@mx.google.com>
	<7E9191C753C6724DB772B5610559B2CF17E00EEF@winxbeuk01.exchange.xchg>
	<4A6750A4.4030205@gmx.net>
Message-ID: <7E9191C753C6724DB772B5610559B2CF17E00EF2@winxbeuk01.exchange.xchg>

Thanks for the speedy reply Lars.  That's a tidy way of doing it but I still need to figure where my original expression is wrong as I also need to run some further expressions to the file if the result is true.  Looking a bit more closely at the result it appears the expression creates a tab and extra line to the value...I wonder if this is why the script thinks the expression is not an integer?!



-----Original Message-----
From: radiance-general-bounces@radiance-online.org [mailto:radiance-general-bounces@radiance-online.org] On Behalf Of Lars O. Grobe
Sent: 22 July 2009 18:47
To: Radiance general discussion
Subject: Re: [Radiance-general] Bash problems

Hi Dan,

it is easier then that. You can use the special variable cond in rcalc to decide whether any output is to be generated or not.

pextrem -o 9.pic | rcalc -e 'illummax=($3*0.265+$4*0.670+$5*0.065)*179'
-e 'cond=if(illummax-15000,1,-1)' -e '$1=illummax' | total -u > 9.dat

does the job (ok, you will get an empty file 9.dat if the illuminance value is below 15000).

Cheers, Lars.

From jedev at visarc.com  Wed Jul 22 11:16:50 2009
From: jedev at visarc.com (Jack de Valpine)
Date: Wed Jul 22 11:17:04 2009
Subject: [Radiance-general] Bash problems
In-Reply-To: <7E9191C753C6724DB772B5610559B2CF17E00EEF@winxbeuk01.exchange.xchg>
References: <4a673c26.1818d00a.7ebb.ffffbb30@mx.google.com>
	<7E9191C753C6724DB772B5610559B2CF17E00EEF@winxbeuk01.exchange.xchg>
Message-ID: <4A675792.4010105@visarc.com>

Hi Dan,

It looks like you need a "|" in your second call to pextrem (before 
total). However since you have already calculated the value for maxim, 
why not just echo $maxim to 9.dat? Such as:

    maxim=$(pextrem -o 9.pic | rcalc -e '$1=($3*0.265+$4*0.670+$5*0.065)*179' | total -u)
    echo $maxim
    if [ "$maxim" -gt 15000 ] ; then
    echo $maxim > 9.dat
    fi
    done
      

-Jack

Dan Fitzpatrick wrote:
> Dear Community
>
> I am trying to determine a maximum illum value within a picture file then print the result if it is above a certain value.  Here is where I am at the moment:
>
> maxim=$(pextrem -o 9.pic | rcalc -e '$1=($3*0.265+$4*0.670+$5*0.065)*179' | total -u)
> echo $maxim
> if [ "$maxim" -gt 15000 ] ; then
> pextrem -o 9.pic | rcalc -e '$1=($3*0.265+$4*0.670+$5*0.065)*179' total -u > 9.dat
> fi
> done
>
> The problem:  I keep getting the : integer expression expected warning.  As far as I can see, $maxim is an integer as shown from the echo expression.  Therefore I don't understand what I'm doing wrong here.  Any pointers will be greatly appreciated.
>
> Dan
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>   


-- 
# Jack de Valpine
# president
#
# visarc incorporated
# http://www.visarc.com
#
# channeling technology for superior design and construction

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20090722/f79f8271/attachment.htm
From gward at lmi.net  Wed Jul 22 11:20:44 2009
From: gward at lmi.net (Greg Ward)
Date: Wed Jul 22 11:20:50 2009
Subject: [Radiance-general] Re: proposed feature: interpreting view names in
	rad
In-Reply-To: <4A671CAD.9010406@visarc.com>
References: <4A66C832.7080809@nus.edu.sg>	<89355c0f0907220502m19f12a2p3ed66f8b867980f6@mail.gmail.com>
	<4A671593.7070905@gmx.net> <4A671CAD.9010406@visarc.com>
Message-ID: <BBCEECEF-E6A5-484F-8FD1-8097138E2AA4@lmi.net>

Like so many other aspects of Radiance, the notion of view files has  
evolved to where it is, and changing things at this point would  
probably mean breaking a lot of scripts.

As Jack pointed out, rpict takes the LAST (not the first) view in a  
view file as the valid one.  Technically, it takes the accumulation  
of view settings, so if for some reason a person had in their file:

VIEW= -vta -vh 180 -vv 150 -vp 10 5 3 -vd .1 .9 -.1
VIEW= -vtv -vh 50 -vv 35

The actual view used would be "-vtv -vh 50 -vv 35 -vp 10 5 3 -vd .1 . 
9 -.1"

Since rvu appends to a view file a complete specification, the  
earlier views are generally irrelevant.  The reason rvu appends  
rather than overwrites this file is two-fold:

	1) It is often handy to edit the view file to get back to a previous  
view that you realize you liked better than the final view you wrote  
there.

	2) You can use the append feature and the fact that anything  
following the view file in the rvu "view" command is added at the end  
of the line makes for a convenient way to store key frames and time  
from the previous keyframe, which the spline.cal function can then  
use to interpolate animated paths -- see footnote at the end of this  
message.

Having rpict ignore all but the last view in a file was the most  
convenient way to get the behavior I wanted.  If your wish is to have  
rpict render all views in the file instead, you can simply run it as:

	rpict [options] -S 1 -o frame%02d.hdr octree < vlist.vf

Another nice thing about doing it this way is that you can start as  
many rpict processes as you have processors and you get to run your  
sequence in parallel.  This is what rad does in fact, using also the - 
PP option to share memory as well.

Getting back to your suggested modification to rad's behavior, I  
expect it would cause some confusion and consternation for users who  
create their view files with rvu and overwrite previous views if they  
got multiple renderings they weren't expecting of views they didn't  
want.  Also, I'd have to think up yet another naming scheme for the  
multiple output pictures, which I'm very reluctant to do.

-Greg

-Greg

Footnote:
=======
Using rvu to create key frame positions and interpolating these for a  
walk-through animation path:

		(in rvu): view key.vf -t 1.5
		(in rvu): [some view changes to get to the next key frame position]
		(in rvu): view key.vf -t 2.5
		etc.

The view file can then be converted to something usable with:

	rcalc -i key.fmt -e '$1=px;$2=py;$3=pz;$4=dx;$5=dy;$6=dz;$7=vh;$8=vv; 
$9=t' \
	| tabfunc Px Py Pz Dx Dy Dz Ah Av T > key.cal

Where "key.fmt" contains:
rvu -vtv -vp ${px} ${py} ${pz} -vd ${dx} ${dy} ${dz} -vu 0 0 1 -vh $ 
{vh} -vv ${vv} -vo 0 -va 0 -vs 0 -vl 0 -t ${t}

Interpolating a path of 1000 frames can be done with something like:

	cnt 1000 | rcalc -f key.cal -f spline.cal -o view.fmt -e 't=Ttot/999* 
$1' \
		-s vt=v -e 'vux=0;vuy=0;vuz=1;vo=0;va=0;vs=0;vl=0' \
		-e 'vpx=s(Px);vpy=s(Py);vpz=s(Pz);vh=s(Ah);vv=s(Av)' \
	> animpath.vf

Both "spline.cal" and "view.fmt" are provided in ray/src/cal/cal/.   
This path can then be handed to ranimate for a nice walk-through  
sequence.

This is mostly from memory, so I may have messed up on a detail or  
two...

From danf at eb7.co.uk  Wed Jul 22 11:25:15 2009
From: danf at eb7.co.uk (Dan Fitzpatrick)
Date: Wed Jul 22 11:25:26 2009
Subject: [Radiance-general] Bash problems
In-Reply-To: <4A675792.4010105@visarc.com>
References: <4a673c26.1818d00a.7ebb.ffffbb30@mx.google.com>
	<7E9191C753C6724DB772B5610559B2CF17E00EEF@winxbeuk01.exchange.xchg>
	<4A675792.4010105@visarc.com>
Message-ID: <7E9191C753C6724DB772B5610559B2CF17E00EF7@winxbeuk01.exchange.xchg>

Hi Jack,

Many tanks for the response.  You're right, I did miss the "pipe" before total in the second call.  However, the -gt element still thinks I need to express an integer when in fact it should be exactly that.

Dan

From: radiance-general-bounces@radiance-online.org [mailto:radiance-general-bounces@radiance-online.org] On Behalf Of Jack de Valpine
Sent: 22 July 2009 19:17
To: Radiance general discussion
Subject: Re: [Radiance-general] Bash problems

Hi Dan,

It looks like you need a "|" in your second call to pextrem (before total). However since you have already calculated the value for maxim, why not just echo $maxim to 9.dat? Such as:

maxim=$(pextrem -o 9.pic | rcalc -e '$1=($3*0.265+$4*0.670+$5*0.065)*179' | total -u)

echo $maxim

if [ "$maxim" -gt 15000 ] ; then

echo $maxim > 9.dat

fi

done


-Jack

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20090722/687af6fe/attachment-0001.html
From gward at lmi.net  Wed Jul 22 11:37:12 2009
From: gward at lmi.net (Greg Ward)
Date: Wed Jul 22 11:37:24 2009
Subject: [Radiance-general] Bash problems
In-Reply-To: <7E9191C753C6724DB772B5610559B2CF17E00EEF@winxbeuk01.exchange.xchg>
References: <4a673c26.1818d00a.7ebb.ffffbb30@mx.google.com>
	<7E9191C753C6724DB772B5610559B2CF17E00EEF@winxbeuk01.exchange.xchg>
Message-ID: <521B5F96-CB1E-4E3E-8E69-5A4196991422@lmi.net>

Hi Dan,

I haven't really been following this thread, but did you try the  
"floor()" function around your rcalc expression to guarantee you get  
an integer result?

-Greg

> From: Dan Fitzpatrick <danf@eb7.co.uk>
> Date: July 22, 2009 10:29:11 AM PDT
>
> Dear Community
>
> I am trying to determine a maximum illum value within a picture  
> file then print the result if it is above a certain value.  Here is  
> where I am at the moment:
>
> maxim=$(pextrem -o 9.pic | rcalc -e '$1=($3*0.265+$4*0.670+$5*0.065) 
> *179' | total -u)
> echo $maxim
> if [ "$maxim" -gt 15000 ] ; then
> pextrem -o 9.pic | rcalc -e '$1=($3*0.265+$4*0.670+$5*0.065)*179'  
> total -u > 9.dat
> fi
> done
>
> The problem:  I keep getting the : integer expression expected  
> warning.  As far as I can see, $maxim is an integer as shown from  
> the echo expression.  Therefore I don't understand what I'm doing  
> wrong here.  Any pointers will be greatly appreciated.
>
> Dan

From danf at eb7.co.uk  Wed Jul 22 12:01:42 2009
From: danf at eb7.co.uk (Dan Fitzpatrick)
Date: Wed Jul 22 12:01:55 2009
Subject: [Radiance-general] Bash problems
In-Reply-To: <521B5F96-CB1E-4E3E-8E69-5A4196991422@lmi.net>
References: <4a673c26.1818d00a.7ebb.ffffbb30@mx.google.com>
	<7E9191C753C6724DB772B5610559B2CF17E00EEF@winxbeuk01.exchange.xchg>
	<521B5F96-CB1E-4E3E-8E69-5A4196991422@lmi.net>
Message-ID: <7E9191C753C6724DB772B5610559B2CF17E00EFB@winxbeuk01.exchange.xchg>

Hi Greg, 

That seems to be it.  Thank you so much.

-Dan

-----Original Message-----
From: radiance-general-bounces@radiance-online.org [mailto:radiance-general-bounces@radiance-online.org] On Behalf Of Greg Ward
Sent: 22 July 2009 19:37
To: Radiance general discussion
Subject: Re: [Radiance-general] Bash problems

Hi Dan,

I haven't really been following this thread, but did you try the  
"floor()" function around your rcalc expression to guarantee you get  
an integer result?

-Greg

From grobe at gmx.net  Wed Jul 22 19:22:58 2009
From: grobe at gmx.net (Lars O. Grobe)
Date: Wed Jul 22 19:23:03 2009
Subject: [Radiance-general] Simulating light ray movement inside swimming
	pool water. Light sources not in the water
In-Reply-To: <4a673c26.1818d00a.7ebb.ffffbb30@mx.google.com>
References: <4a673c26.1818d00a.7ebb.ffffbb30@mx.google.com>
Message-ID: <4A67C982.5090409@gmx.net>

Hi!
>
> Lars, my concern in the dissertation is the glare effect created in 
> the swimming pool and do not allow a lifeguard to search the bottom of 
> the pool. According to the theory found till now, I am interesting in 
> the amount of light reflecting from the surface and the amount that is 
> travelling through the water till it hits the bottom and all the way 
> up. The ratio of the intensities will show me how much glare I have in 
> the swimming pool.
>
Wow, this sounds like a not so trivial problem... ;-) I think you need 
first to study on what surface shapes to expect. On a perfectly even 
surface, you could easily look through to the ground, as long as you do 
not hit the total reflection by very low angles. But as the lifeguard 
will usually be interested in the pool when there are occupants, the 
surface will not be a plane any more, but wavy. And now everything 
depends on the shape - having big, smooth waves will allow good view, 
but small wrinkly waves (ok, here I hit the limits of my English 
language skills) would cause a lot of reflections by total reflection, 
and at the same time caustics resulting in uneven illuminances on the 
ground. If you are able to model the water surface geometries which you 
need to consider, it will be possible to make some estimates on 
visibility of anything below the surface. There are two ways afaik, one 
being rtcontrib, the other one pmap. rtcontrib comes with recent 
distributions, but is not really documented. pmap comes with a nice 
documentation, but is currently supported only with radiance 3.7.

By the way, I think there are two effects to consider. One is glare. 
Even more important may be the total-reflection that simply does not 
permit you to look through a water-air interface (aka the water surface) 
under narrow angles, with or without glare. Glare alone might render the 
task of the lifeguard tiring, but non-visibility renders it impossible...

Cheers, Lars.

From grobe at gmx.net  Thu Jul 23 04:38:47 2009
From: grobe at gmx.net (Lars O. Grobe)
Date: Thu Jul 23 04:38:51 2009
Subject: [Radiance-general] pmap, mkillum and photon ports
Message-ID: <4A684BC7.8030705@gmx.net>

Hi all,

I just want to share my experiences with the pmap for radiance 3.7p2, 
the use of photonports and mkillum. Maybe it is interesting to someone 
here, and maybe I even get some comment on what I am doing ;-)

First, to introduce, the problem with the pmap is that, for large angle 
sources, it is only performing well when used with photon ports. The 
drawback of photonports is, that no interreflection calculation happens 
outside the port. That means that, when modeling a simple room with a 
window, only unobstructed parts of the visible environment contribute - 
buildings, ground planes etc. do not contribute any reflected illuminance.

To solve this, I played a bit with the combination of pmap and illum 
surfaces. Carsten did that before, but with a different scene, different 
set-up and different goals. To get the indirect component of light flux 
into my photon ports, I have to place my illums outside the ports, so 
that they become (unobstructed) light sources accounting for the light 
reflected from outside geometry.

I have set up a simple scene as follow: a room 10mx10mx5m, with its 
floor level at +5m. In the floor of that room, a hole of 5mx5m (pointing 
DOWN!). At -1m, a ground geometry (disk, diameter 50m). A photon port in 
the 5mx5m hole. And five mkillum-surfaces, again 10mx10mx5m, so the 
geometry of the room mirrored over the rooms floor. This means that the 
bottom mkillum surface is located at +-0m, just 1m above the the ground 
disk. This bottom surface is generated by gensurf, and is actually an 
array of 20x20=400 squares of .5mx.5m each.

I place a view at 0,0,5.1 (10cm above the photon-port), pointing 
upwards, using vth-fisheye view type with 180 degree vertical and 
horizontal. And now I render four images and sum up all pixel values for 
each image:

scene classic (no illum, no pmap, ab 10): 1180668
scene with pmap (no illums, but also no photonport): 1013533
scene with illums (no pmap): 1522379
scene with illums and pmap: 1695772

mkillum was started with default values and -ab 10. Rendering with 
photonport and without mkillum does not really work, as the port does 
not see a light source.

So for now, the result is that, as long as mkillum is involved, the 
results are pretty stable. I would not call the two results close, but 
at least they have similar scales ;-) Having the two pixel value sums 
for the runs without mkillum being that much lower, I got worried 
however. Would I have to set much higher ambient parameters, or is there 
something wrong in my set-up? Is the use of exterior mkillum-koffers 
allowed?

Cheers, Lars.

From sotos.enveng at gmail.com  Thu Jul 23 04:42:54 2009
From: sotos.enveng at gmail.com (Sotiris Papantoniou)
Date: Thu Jul 23 04:44:07 2009
Subject: [Radiance-general] Simulating light ray movement inside
	swimming	pool water. Light sources not in the water
In-Reply-To: <4A67C982.5090409@gmx.net>
References: <4a673c26.1818d00a.7ebb.ffffbb30@mx.google.com>
	<4A67C982.5090409@gmx.net>
Message-ID: <4a684d00.0508d00a.0738.ffffc785@mx.google.com>

Hello Lars,

It would be great to run the simulations with moving water surface but since
i want to compare the simulations with the measurements it would be
difficult to create similar conditions in the real pool. Your suggestions
were very useful though and i will start working immediately with a simple
model to understand how it works and eliminate possible problems that may
come up. 

Thanks again

Sotiris

-----Original Message-----
From: radiance-general-bounces@radiance-online.org
[mailto:radiance-general-bounces@radiance-online.org] On Behalf Of Lars O.
Grobe
Sent: 23 July 2009 03:23
To: Radiance general discussion
Subject: Re: [Radiance-general] Simulating light ray movement inside
swimming pool water. Light sources not in the water

Hi!
>
> Lars, my concern in the dissertation is the glare effect created in 
> the swimming pool and do not allow a lifeguard to search the bottom of 
> the pool. According to the theory found till now, I am interesting in 
> the amount of light reflecting from the surface and the amount that is 
> travelling through the water till it hits the bottom and all the way 
> up. The ratio of the intensities will show me how much glare I have in 
> the swimming pool.
>
Wow, this sounds like a not so trivial problem... ;-) I think you need 
first to study on what surface shapes to expect. On a perfectly even 
surface, you could easily look through to the ground, as long as you do 
not hit the total reflection by very low angles. But as the lifeguard 
will usually be interested in the pool when there are occupants, the 
surface will not be a plane any more, but wavy. And now everything 
depends on the shape - having big, smooth waves will allow good view, 
but small wrinkly waves (ok, here I hit the limits of my English 
language skills) would cause a lot of reflections by total reflection, 
and at the same time caustics resulting in uneven illuminances on the 
ground. If you are able to model the water surface geometries which you 
need to consider, it will be possible to make some estimates on 
visibility of anything below the surface. There are two ways afaik, one 
being rtcontrib, the other one pmap. rtcontrib comes with recent 
distributions, but is not really documented. pmap comes with a nice 
documentation, but is currently supported only with radiance 3.7.

By the way, I think there are two effects to consider. One is glare. 
Even more important may be the total-reflection that simply does not 
permit you to look through a water-air interface (aka the water surface) 
under narrow angles, with or without glare. Glare alone might render the 
task of the lifeguard tiring, but non-visibility renders it impossible...

Cheers, Lars.

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general


From grobe at gmx.net  Thu Jul 23 06:26:40 2009
From: grobe at gmx.net (Lars O. Grobe)
Date: Thu Jul 23 06:27:04 2009
Subject: [Radiance-general] Simulating light ray movement inside	swimming
	pool water. Light sources not in the water
In-Reply-To: <4a684d00.0508d00a.0738.ffffc785@mx.google.com>
References: <4a673c26.1818d00a.7ebb.ffffbb30@mx.google.com>	<4A67C982.5090409@gmx.net>
	<4a684d00.0508d00a.0738.ffffc785@mx.google.com>
Message-ID: <4A686510.9020102@gmx.net>

Hi!

> It would be great to run the simulations with moving water surface but since

I did not want to propose an animation. I was just wondering whether you
know the shape of the surface. I do not know how even how to describe
the wave patterns, it is about frequencies, amplitudes, interference and
all that over the surface of limited dimensions, which means including
edges reflecting back. So the geometrical description seams to be not
trivial, and I have no clue whether there are any standard models to use
when simulating certain "wavyness" conditions of a pool.

I think that this geometry topic is much more difficult then the
rendering stuff once the model is generated.

Cheers, Lars.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3740 bytes
Desc: S/MIME Cryptographic Signature
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20090723/052fe046/smime.bin
From sotos.enveng at gmail.com  Sat Jul 25 03:32:17 2009
From: sotos.enveng at gmail.com (=?ISO-8859-7?B?0/n03vHn8iDQ4fDh7fT57d/v9Q==?=)
Date: Sat Jul 25 03:32:23 2009
Subject: [Radiance-general] water any news ???
Message-ID: <92f99fb40907250332q627e7b40l4712f6ce481f20bd@mail.gmail.com>

Hello list again,

i have been trying to run the example for "rtcontrib" that Greg posted, but
i keep receiving the same error message. Can you give me any suggestion on
what went wrong. I am working on radiance 3.9 which i downloaded from
Synaptic package manager. I paste the order as i gave it with its result:

vwrays -vf pool_par.vf -x 1000 -y 1000 -ff |rtcontrib -V+ -ffc -f
pool_coords.cal -b floor_bin -bn 7500 -o '!total -if22500 -of | pvalue -r -h
+Y 150 +X 50 -df > floor_caustics.pic' -m floor pool.oct

total: too many input columns
pvalue: read error

Can you please help?

Sotiris
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20090725/66742477/attachment.htm
From grobe at gmx.net  Sat Jul 25 08:56:40 2009
From: grobe at gmx.net (Lars O. Grobe)
Date: Sat Jul 25 08:56:58 2009
Subject: [Radiance-general] Problems with Ubuntu's radiance distribution on
	amd64 platform
Message-ID: <4A6B2B38.3080007@gmx.net>

I do not know whether this says anything to anyone here, but I have
oconv crashing on my system:

*** buffer overflow detected ***: /usr/bin/oconv terminated
======= Backtrace: =========
/lib/libc.so.6(__fortify_fail+0x37)[0x2b33851cc2c7]
/lib/libc.so.6[0x2b33851ca170]
/lib/libc.so.6[0x2b33851c9519]
/lib/libc.so.6(_IO_default_xsputn+0x96)[0x2b3385143426]
/lib/libc.so.6(_IO_vfprintf+0x348d)[0x2b3385115e2d]
/lib/libc.so.6(__vsprintf_chk+0x99)[0x2b33851c95b9]
/lib/libc.so.6(__sprintf_chk+0x80)[0x2b33851c9500]
/usr/bin/oconv[0x40a616]
/usr/bin/oconv[0x407f08]
/usr/bin/oconv[0x40824c]
/usr/bin/oconv[0x4028af]
/lib/libc.so.6(__libc_start_main+0xe6)[0x2b33850eb5a6]
/usr/bin/oconv[0x401509]
======= Memory map: ========
00400000-0041f000 r-xp 00000000 08:01 176581
 /usr/bin/oconv
0061e000-0061f000 r--p 0001e000 08:01 176581
 /usr/bin/oconv
0061f000-00620000 rw-p 0001f000 08:01 176581
 /usr/bin/oconv
00620000-008e6000 rw-p 00620000 00:00 0
011c1000-01203000 rw-p 011c1000 00:00 0
 [heap]
2b3384c27000-2b3384c47000 r-xp 00000000 08:01 2534
 /lib/ld-2.9.so
2b3384c47000-2b3384c4c000 rw-p 2b3384c47000 00:00 0
2b3384e46000-2b3384e47000 r--p 0001f000 08:01 2534
 /lib/ld-2.9.so
2b3384e47000-2b3384e48000 rw-p 00020000 08:01 2534
 /lib/ld-2.9.so
2b3384e48000-2b3384ecc000 r-xp 00000000 08:01 2587
 /lib/libm-2.9.so
2b3384ecc000-2b33850cb000 ---p 00084000 08:01 2587
 /lib/libm-2.9.so
2b33850cb000-2b33850cc000 r--p 00083000 08:01 2587
 /lib/libm-2.9.so
2b33850cc000-2b33850cd000 rw-p 00084000 08:01 2587
 /lib/libm-2.9.so
2b33850cd000-2b3385235000 r-xp 00000000 08:01 2554
 /lib/libc-2.9.so
2b3385235000-2b3385435000 ---p 00168000 08:01 2554
 /lib/libc-2.9.so
2b3385435000-2b3385439000 r--p 00168000 08:01 2554
 /lib/libc-2.9.so
2b3385439000-2b338543a000 rw-p 0016c000 08:01 2554
 /lib/libc-2.9.so
2b338543a000-2b3385441000 rw-p 2b338543a000 00:00 0
2b3385441000-2b3385457000 r-xp 00000000 08:01 2576
 /lib/libgcc_s.so.1
2b3385457000-2b3385657000 ---p 00016000 08:01 2576
 /lib/libgcc_s.so.1
2b3385657000-2b3385658000 r--p 00016000 08:01 2576
 /lib/libgcc_s.so.1
2b3385658000-2b3385659000 rw-p 00017000 08:01 2576
 /lib/libgcc_s.so.1
7fff25e6e000-7fff25e83000 rw-p 7ffffffea000 00:00 0
 [stack]
7fff25fff000-7fff26000000 r-xp 7fff25fff000 00:00 0
 [vdso]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0
 [vsyscall]
Aborted
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3740 bytes
Desc: S/MIME Cryptographic Signature
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20090725/c52344da/smime.bin
From gward at lmi.net  Sat Jul 25 09:07:53 2009
From: gward at lmi.net (Greg Ward)
Date: Sat Jul 25 09:07:59 2009
Subject: [Radiance-general] Problems with Ubuntu's radiance distribution
	on amd64 platform
In-Reply-To: <4A6B2B38.3080007@gmx.net>
References: <4A6B2B38.3080007@gmx.net>
Message-ID: <ACF16862-34E0-4AFF-A330-AF72F8845357@lmi.net>

Hi Lars,

Your backtrace is missing symbolic information telling what call was  
last made in Radiance.  It seems to have crashed in a sprintf()  
statement, which means it could have bombed while trying to print an  
error message.  You should recompile with the -g option and crash it  
again.

Just as a guess, you wouldn't happen to have any strings longer than  
127 characters in your material descriptions, would you?

This probably belongs on the dev list, so I'll cross-post and we can  
follow up there.

-Greg

> From: "Lars O. Grobe" <grobe@gmx.net>
> Date: July 25, 2009 8:56:40 AM PDT
>
> I do not know whether this says anything to anyone here, but I have
> oconv crashing on my system:
>
> *** buffer overflow detected ***: /usr/bin/oconv terminated
> ======= Backtrace: =========
> /lib/libc.so.6(__fortify_fail+0x37)[0x2b33851cc2c7]
> /lib/libc.so.6[0x2b33851ca170]
> /lib/libc.so.6[0x2b33851c9519]
> /lib/libc.so.6(_IO_default_xsputn+0x96)[0x2b3385143426]
> /lib/libc.so.6(_IO_vfprintf+0x348d)[0x2b3385115e2d]
> /lib/libc.so.6(__vsprintf_chk+0x99)[0x2b33851c95b9]
> /lib/libc.so.6(__sprintf_chk+0x80)[0x2b33851c9500]
> /usr/bin/oconv[0x40a616]
> /usr/bin/oconv[0x407f08]
> /usr/bin/oconv[0x40824c]
> /usr/bin/oconv[0x4028af]
> /lib/libc.so.6(__libc_start_main+0xe6)[0x2b33850eb5a6]
> /usr/bin/oconv[0x401509]

From gward at lmi.net  Sat Jul 25 16:02:58 2009
From: gward at lmi.net (Greg Ward)
Date: Sat Jul 25 16:03:03 2009
Subject: [Radiance-general] water any news ???
In-Reply-To: <92f99fb40907250332q627e7b40l4712f6ce481f20bd@mail.gmail.com>
References: <92f99fb40907250332q627e7b40l4712f6ce481f20bd@mail.gmail.com>
Message-ID: <A07FC5F8-1204-4AD8-B362-954CA2DC8BE1@lmi.net>

Hi Sotiris,

This is not really your fault, as there is a limit of 2048 input  
columns to the "total" command I neglected to consider in the  
original post.  I did not try this command in advance, and made  
subsequent modifications to rtcontrib that make the calls to "total"  
superfluous.  If you look at my Nov 17, 2007 post on the same thread,  
you'll see a different version of the rtcontrib command that uses the  
new -c option in lieu of calling "total."  Use this method instead.

-Greg

> From: ??????? ??????????? <sotos.enveng@gmail.com>
> Date: July 25, 2009 3:32:17 AM PDT
>
> Hello list again,
>
> i have been trying to run the example for "rtcontrib" that Greg  
> posted, but i keep receiving the same error message. Can you give  
> me any suggestion on what went wrong. I am working on radiance 3.9  
> which i downloaded from Synaptic package manager. I paste the order  
> as i gave it with its result:
>
> vwrays -vf pool_par.vf -x 1000 -y 1000 -ff |rtcontrib -V+ -ffc -f  
> pool_coords.cal -b floor_bin -bn 7500 -o '!total -if22500 -of |  
> pvalue -r -h +Y 150 +X 50 -df > floor_caustics.pic' -m floor pool.oct
>
> total: too many input columns
> pvalue: read error
>
> Can you please help?
>
> Sotiris

From schwaj3 at rpi.edu  Mon Jul 27 15:41:40 2009
From: schwaj3 at rpi.edu (schwaj3@rpi.edu)
Date: Mon Jul 27 15:41:46 2009
Subject: [Radiance-general] Shadow above highlight?
Message-ID: <200907272241.n6RMfetM031093@smtp7.server.rpi.edu>

I am fairly stumped as to what is going on here. I have a box with a
square hole, 1/3 x 1/3 the width of the box, to allow sunlight into my room.

I am using the following gensky to attempt to only light the room using
sunlight.
!gensky 6 21 12:00EST -a 40.77 -o 73.967 -g 0.0 +s
skyfunc glow sky_glow
0
0
4 0 0 0 0

sky_glow source sky
0
0
4 0 0 1 180

This picture was rendered using -ab 1
http://i639.photobucket.com/albums/uu111/radiancebox/radiance.jpg
You'll note on this image, that there is a strange shadow on the ceiling. 
I am unable to figure out why.

If I instead place a light in the room, also 1/3x 1/3 the size of the
box, I do not have this problem. This picture is taken from the "back" of 
the box, with the light on the ceiling instead of the floor. There is no
gensky used on this picture.

http://i639.photobucket.com/albums/uu111/radiancebox/Light.jpgThis picture was rendered using -ab 0

Changing the camera angle doesn't effect the shadow seen in the first
picture. I have determined that the shape of the window is not causing
the shadow, instead the highlight on the floor causes the shadow on the
ceiling.

If anyone can help clear this up for me, I would appreciate it.

--John



From tbleicher at googlemail.com  Mon Jul 27 16:03:31 2009
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Mon Jul 27 16:03:56 2009
Subject: [Radiance-general] Shadow above highlight?
In-Reply-To: <200907272241.n6RMfetM031093@smtp7.server.rpi.edu>
References: <200907272241.n6RMfetM031093@smtp7.server.rpi.edu>
Message-ID: <89355c0f0907271603l32b338e5n3603fb78793d33cc@mail.gmail.com>

On Mon, Jul 27, 2009 at 11:41 PM, <schwaj3@rpi.edu> wrote:
> I am fairly stumped as to what is going on here. I have a box with a
> square hole, 1/3 x 1/3 the width of the box, to allow sunlight into my room.

[...]

> This picture was rendered using -ab 1
> http://i639.photobucket.com/albums/uu111/radiancebox/radiance.jpg
> You'll note on this image, that there is a strange shadow on the ceiling.
> I am unable to figure out why.

John. I can't really explain what's going on but have you tried to
increase your "-ab" value? This should provide you with a more
even light distribution.

You can probably also change other values like "-ad" or "-aa".
But you didn't comment on those so I can't say if there is potential.

Thomas

From jedev at visarc.com  Mon Jul 27 16:24:44 2009
From: jedev at visarc.com (Jack de Valpine)
Date: Mon Jul 27 16:24:54 2009
Subject: [Radiance-general] Shadow above highlight?
In-Reply-To: <89355c0f0907271603l32b338e5n3603fb78793d33cc@mail.gmail.com>
References: <200907272241.n6RMfetM031093@smtp7.server.rpi.edu>
	<89355c0f0907271603l32b338e5n3603fb78793d33cc@mail.gmail.com>
Message-ID: <4A6E373C.7010100@visarc.com>

Hi John,

As Thomas mentioned it might be helpful to post the parameters that you 
used to produce the image. Also to be clear, if you "only" want sunlight 
(no sky) then  you should only use the gensky line, removing:

skyfunc glow sky_glow
0
0
4 0 0 0 0

sky_glow source sky
0
0
4 0 0 1 180

These lines produce a sky description to go along with the sun (and 
skyfunc definition) produced by gensky.

-Jack


Thomas Bleicher wrote:
> On Mon, Jul 27, 2009 at 11:41 PM, <schwaj3@rpi.edu> wrote:
>   
>> I am fairly stumped as to what is going on here. I have a box with a
>> square hole, 1/3 x 1/3 the width of the box, to allow sunlight into my room.
>>     
>
> [...]
>
>   
>> This picture was rendered using -ab 1
>> http://i639.photobucket.com/albums/uu111/radiancebox/radiance.jpg
>> You'll note on this image, that there is a strange shadow on the ceiling.
>> I am unable to figure out why.
>>     
>
> John. I can't really explain what's going on but have you tried to
> increase your "-ab" value? This should provide you with a more
> even light distribution.
>
> You can probably also change other values like "-ad" or "-aa".
> But you didn't comment on those so I can't say if there is potential.
>
> Thomas
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>   


-- 
# Jack de Valpine
# president
#
# visarc incorporated
# http://www.visarc.com
#
# channeling technology for superior design and construction

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20090727/e91a2a2f/attachment.html
From gward at lmi.net  Mon Jul 27 17:28:33 2009
From: gward at lmi.net (Greg Ward)
Date: Mon Jul 27 17:28:35 2009
Subject: [Radiance-general] Shadow above highlight?
In-Reply-To: <200907272241.n6RMfetM031093@smtp7.server.rpi.edu>
References: <200907272241.n6RMfetM031093@smtp7.server.rpi.edu>
Message-ID: <90E16BB0-F46B-4648-96D7-92F19ABA500C@lmi.net>

Hi John,

Since Radiance uses an azimuth/altitude breakup of the hemisphere,  
odd things can happen at the zenith in the indirect calculation,  
which is why it's generally good to have a "direct" calculation as  
well.  You can eliminate this problem by changing your window to an  
illum via mkillum or even applying the sky distribution function to  
the window directly as demonstrated on page 32 of the introductory  
chapter of RwR:

	http://radsite.lbl.gov/radiance/book/ch1/ch1.pdf

You might also try setting -aa 0, which would avoid indirect  
interpolation and perhaps help matters by itself (though it will take  
longer).

Best,
-Greg

> From: schwaj3@rpi.edu
> Date: July 27, 2009 3:41:40 PM PDT
>
> I am fairly stumped as to what is going on here. I have a box with a
> square hole, 1/3 x 1/3 the width of the box, to allow sunlight into  
> my room.
>
> I am using the following gensky to attempt to only light the room  
> using
> sunlight.
> !gensky 6 21 12:00EST -a 40.77 -o 73.967 -g 0.0 +s
> skyfunc glow sky_glow
> 0
> 0
> 4 0 0 0 0
>
> sky_glow source sky
> 0
> 0
> 4 0 0 1 180
>
> This picture was rendered using -ab 1
> http://i639.photobucket.com/albums/uu111/radiancebox/radiance.jpg
> You'll note on this image, that there is a strange shadow on the  
> ceiling.
> I am unable to figure out why.
>
> If I instead place a light in the room, also 1/3x 1/3 the size of the
> box, I do not have this problem. This picture is taken from the  
> "back" of
> the box, with the light on the ceiling instead of the floor. There  
> is no
> gensky used on this picture.
>
> http://i639.photobucket.com/albums/uu111/radiancebox/Light.jpgThis  
> picture was rendered using -ab 0
>
> Changing the camera angle doesn't effect the shadow seen in the first
> picture. I have determined that the shape of the window is not causing
> the shadow, instead the highlight on the floor causes the shadow on  
> the
> ceiling.
>
> If anyone can help clear this up for me, I would appreciate it.
>
> --John

From jdlenard at deluminaelab.com  Wed Jul 29 05:32:48 2009
From: jdlenard at deluminaelab.com (jeando)
Date: Wed Jul 29 05:33:17 2009
Subject: [Radiance-general] New version of RadDisplay
Message-ID: <4A704170.2080604@deluminaelab.com>

An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20090729/8d624794/attachment.htm
From schwaj3 at rpi.edu  Wed Jul 29 14:13:25 2009
From: schwaj3 at rpi.edu (schwaj3@rpi.edu)
Date: Wed Jul 29 14:13:29 2009
Subject: [Radiance-general] Shadow above highlight?
Message-ID: <200907292113.n6TLDPmJ032451@smtp6.server.rpi.edu>

These images are done using variations on: 

rpict -bv- -ab 1 -dp 8192 -ar 256 -ms 0.033 -ds .07 -dt .05 -dc .75 -dr 3 
-sj 1 -vf 0.vf -st .01 -aa .01 -ad 4096 -as 1024 -lr 24 -lw .0002

The reason I am only using -ab 1 instead of a higher number, is that I
originally started with a higher number when I noticed the strange
behavior. I figured if I could fix it on 1 bounce, that would fix it for
all higher bounces (and is faster to test). This is probably higher
settings than necessary for a decent output, but this shouldn't cause the 
error to my knowledge.

==============Original message text===============
On Mon, 27 Jul 2009 19:03:31 EDT Thomas Bleicher wrote:

On Mon, Jul 27, 2009 at 11:41 PM, <schwaj3@rpi.edu> wrote:
> I am fairly stumped as to what is going on here. I have a box with a
> square hole, 1/3 x 1/3 the width of the box, to allow sunlight into my room.

[...]

> This picture was rendered using -ab 1
> http://i639.photobucket.com/albums/uu111/radiancebox/radiance.jpg> You'll note on this image, that there is a strange shadow on the ceiling.
> I am unable to figure out why.

John. I can't really explain what's going on but have you tried to
increase your "-ab" value? This should provide you with a more
even light distribution.

You can probably also change other values like "-ad" or "-aa".
But you didn't comment on those so I can't say if there is potential.

Thomas

===========End of original message text===========




