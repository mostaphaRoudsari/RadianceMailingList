From maricanis at gmail.com  Thu Jul  1 02:08:00 2010
From: maricanis at gmail.com (Marija Velickovic)
Date: Thu Jul  1 02:14:11 2010
Subject: [Radiance-general] new pmap version?
Message-ID: <AANLkTin1ZKzm3hPUia-BhTPiMzAdbVdg8adIpqOUm_m6@mail.gmail.com>

Hi,

While searching through the list for topics related to photon mapping, I've
found next mail from March 2010:

Jan Wienold wrote:

> "we are currently working on an update of photon mapping to the current
> Radiance version and fixing a bug with the -I option of the rtrace-version
> of photon-mapping.
> In addition to this we are implementing photon-mapping into daysim.
>
> I will announce it as soon when it is available (photon-mapping within the
> next 6 weeks, daysim-photon-mapping takes a little bit longer)."
>
>
Any news about new version of pmap or it will be presented on Workshop?

Marija
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100701/7eec014f/attachment.html
From gregoryjward at gmail.com  Thu Jul  1 09:43:22 2010
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu Jul  1 09:42:59 2010
Subject: [Radiance-general] gensky: what's the unit of the value specified
	for the "-b" option?
In-Reply-To: <AANLkTim1EgM-DFzcRRW2Nw00bput83-z3WcN3fApSUsL@mail.gmail.com>
References: <AANLkTim1EgM-DFzcRRW2Nw00bput83-z3WcN3fApSUsL@mail.gmail.com>
Message-ID: <03786877-3C55-43C5-8DD9-60AB9682D684@lmi.net>

Hi Ji,

Axel's tutorial is correct, but it is slightly simpler to use the  
gensky -B option (rather than "-b") if you are starting from the  
horizontal illuminance.  First, apply the 179 lumens/watt conversion  
factor:

	10,000 lumens/m^2 * 1 watt / 179 lumens => 55.87 watts/m^2

Using this in your gensky command:

	gensky 12 4 +12:00 -a 51 -o 0 -m 0 -c -B 55.87

You should get the output below.  (I'm not sure why the tutorial has  
"21" as the month for the first argument -- I'm assuming this is a  
typo.)

# gensky 12 4 +12:00 -a 51 -o 0 -m 0 -c -B 55.87
# Local solar time: 12.00
# Solar altitude and azimuth: 16.8 -0.0
# Ground ambient level: 17.8

void brightfunc skyfunc
2 skybr skybright.cal
0
3 2 2.29e+01 3.56e+00

The reported "Ground ambient level" is actually the diffuse horizontal  
illumination in disguise.  If you multiply 17.8 by pi and 179, you  
should get what you started with as your horizontal illuminance.  This  
is one way to check.  Another method is to run rtrace with just the  
sky and compute the horizontal irradiance using the -I option.

I hope this clears things up.

-Greg

> From: Ji Zhang <hope.zh@gmail.com>
> Date: June 30, 2010 10:22:08 PM PDT
>
> Dear Radiance experts,
>
> May I ask what is the unit for the value specified after the "-b"  
> option of the "gensky" command?
>
> According to Axel Jacob's "Radiance Tutorial" p. 24 and "Radiance  
> Cookbook" p.35, if we want to define an overcast sky with the  
> horizontal illumination level being 10,000 lx, we need to specify  
> the zenith brightness with an irradiance value of 22.86(W/m2) for  
> the "-b" option in gensky command.
>
> However, according to the gensky menu, what we need to specify for  
> the "-b" option is the zenith brightness as an "radiance" value of  
> which the unit should be watts/steradian/m2.
>
> I assume that the term "radiance" and "irradiance" should not be  
> used interchangeably as they are different concepts, am I right?
>
> So, which one is correct? Axel's tutorial or the gensky menu?
>
>
> Or more specifically, for "Formula 4" in Axel Jacob's "Radiance  
> Tutorial" p. 24 that specify the relationship between zenith  
> brightness and horizontal illuminance: R_zenith = (9/7)*(E_horiz/179/ 
> PI)
>
> What are the units for "R_zenith" and "E_horiz" exactly?
>
> If the unit for "R_zenith" is watts/steradian/m2, then it's a  
> "radiance" value.
>
> But if the unit for "R_zenith" is watts/m2, then it's a "irradiance"  
> value.
>
> Correct me if I'm wrong.
>
> Thanks!
>
> Ji

From hope.zh at gmail.com  Thu Jul  1 10:26:08 2010
From: hope.zh at gmail.com (Ji Zhang)
Date: Thu Jul  1 10:26:07 2010
Subject: [Radiance-general] gensky: what's the unit of the value specified
	for the "-b" option?
In-Reply-To: <03786877-3C55-43C5-8DD9-60AB9682D684@lmi.net>
References: <AANLkTim1EgM-DFzcRRW2Nw00bput83-z3WcN3fApSUsL@mail.gmail.com>
	<03786877-3C55-43C5-8DD9-60AB9682D684@lmi.net>
Message-ID: <AANLkTimu5XdfpG-JhyOpbEiluBGmsCFVqyZOosrTiukD@mail.gmail.com>

Ok, got it, Greg, thank you very much!

Ji



On Fri, Jul 2, 2010 at 12:43 AM, Greg Ward <gregoryjward@gmail.com> wrote:

> Hi Ji,
>
> Axel's tutorial is correct, but it is slightly simpler to use the gensky -B
> option (rather than "-b") if you are starting from the horizontal
> illuminance.  First, apply the 179 lumens/watt conversion factor:
>
>        10,000 lumens/m^2 * 1 watt / 179 lumens => 55.87 watts/m^2
>
> Using this in your gensky command:
>
>        gensky 12 4 +12:00 -a 51 -o 0 -m 0 -c -B 55.87
>
> You should get the output below.  (I'm not sure why the tutorial has "21"
> as the month for the first argument -- I'm assuming this is a typo.)
>
> # gensky 12 4 +12:00 -a 51 -o 0 -m 0 -c -B 55.87
> # Local solar time: 12.00
> # Solar altitude and azimuth: 16.8 -0.0
> # Ground ambient level: 17.8
>
> void brightfunc skyfunc
> 2 skybr skybright.cal
> 0
> 3 2 2.29e+01 3.56e+00
>
> The reported "Ground ambient level" is actually the diffuse horizontal
> illumination in disguise.  If you multiply 17.8 by pi and 179, you should
> get what you started with as your horizontal illuminance.  This is one way
> to check.  Another method is to run rtrace with just the sky and compute the
> horizontal irradiance using the -I option.
>
> I hope this clears things up.
>
> -Greg
>
>  From: Ji Zhang <hope.zh@gmail.com>
>> Date: June 30, 2010 10:22:08 PM PDT
>>
>>
>> Dear Radiance experts,
>>
>> May I ask what is the unit for the value specified after the "-b" option
>> of the "gensky" command?
>>
>> According to Axel Jacob's "Radiance Tutorial" p. 24 and "Radiance
>> Cookbook" p.35, if we want to define an overcast sky with the horizontal
>> illumination level being 10,000 lx, we need to specify the zenith brightness
>> with an irradiance value of 22.86(W/m2) for the "-b" option in gensky
>> command.
>>
>> However, according to the gensky menu, what we need to specify for the
>> "-b" option is the zenith brightness as an "radiance" value of which the
>> unit should be watts/steradian/m2.
>>
>> I assume that the term "radiance" and "irradiance" should not be used
>> interchangeably as they are different concepts, am I right?
>>
>> So, which one is correct? Axel's tutorial or the gensky menu?
>>
>>
>> Or more specifically, for "Formula 4" in Axel Jacob's "Radiance Tutorial"
>> p. 24 that specify the relationship between zenith brightness and horizontal
>> illuminance: R_zenith = (9/7)*(E_horiz/179/PI)
>>
>> What are the units for "R_zenith" and "E_horiz" exactly?
>>
>> If the unit for "R_zenith" is watts/steradian/m2, then it's a "radiance"
>> value.
>>
>> But if the unit for "R_zenith" is watts/m2, then it's a "irradiance"
>> value.
>>
>> Correct me if I'm wrong.
>>
>> Thanks!
>>
>> Ji
>>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>



-- 
ZHANG Ji ?? (PhD) :: Research Fellow :: Centre for Sustainable Asian Cities
:: School of Design and Environment :: National University of Singapore :: 4
Architecture Drive,  Singapore, 117566 :: Contact: 65-6516 5046 :: Email:
sdezj@nus.edu.sg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100702/54fb5edd/attachment.htm
From silkworth at transsolar.com  Fri Jul  2 12:48:40 2010
From: silkworth at transsolar.com (Cramer Silkworth)
Date: Fri Jul  2 12:48:48 2010
Subject: [Radiance-general] Re: rtrace and parallel processes
Message-ID: <4C2E4298.2040705@transsolar.com>

An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100702/e8a8db26/attachment.html
From gregoryjward at gmail.com  Fri Jul  2 13:02:53 2010
From: gregoryjward at gmail.com (Greg Ward)
Date: Fri Jul  2 13:02:54 2010
Subject: [Radiance-general] Re: rtrace and parallel processes
In-Reply-To: <4C2E4298.2040705@transsolar.com>
References: <4C2E4298.2040705@transsolar.com>
Message-ID: <33073741-55E2-4B05-9BBA-3681767C722A@lmi.net>

Hi Cramer,

You don't need to "pregenerate" the ambient file for rtrace purposes,  
but you can.  The disadvantage is that it will take about as long to  
pregenerate the file as it does to run rtrace, though the subsequent  
run should go very fast.

Sharing values via an ambient file with -aa non-zero allows parallel  
processing to actually work in Radiance.  It doesn't require a  
precalculation, though.  The only reason to do that is to get slight  
more accurate and/or smoother results.

Cheers,
-Greg

> From: Cramer Silkworth <silkworth@transsolar.com>
> Date: July 2, 2010 12:48:40 PM PDT
>
> Jack, Rob, et al,
>
> I read Rob's posting and have been playing with -aa, but I'm not  
> sure I know what I'm doing. Here's what I've got:
>
> this: rtrace -n 4 -I+ -h -ab 8 -ar 128 -aa 0.1 -ad 1024 -as 512 -e  
> grid.log cie10k.oct < grid.pkt > grid.out
> takes 23.5 minutes, for 3780 measurement points.
>
> this: rtrace -n 4 -I+ -h -ab 8 -ar 128 -aa 0 -ad 1024 -as 512 -e  
> grid.log cie10k.oct < grid.pkt > grid.out
> (-aa 0 is the only change) takes 13 seconds for the same measurement  
> points, but yields daylight factor results (calc'd with an rlam| 
> rcalc line following this rtrace call) 30% lower on average.
>
> Andy's email to Rob via this list (and posted as an update to Rob's  
> blog post) mentions an ambient file. Is there a way to "pre- 
> generate" this file before starting rtrace, such that each process  
> will use it? Or am I just totally confused here (=yes).
>
> Thanks,
> Cramer
> -- 
> Cramer Silkworth
> 212 219 2255 | silkworth@transsolar.com
> Transsolar Inc. | 134 Spring Street Suite 601 | New York, NY 10012
>
> Transsolar Climate Engineering
> Technical consulting for energy efficiency and environmental quality  
> in buildings.
> New York - Stuttgart - Munich

From Christopher.Rush at arup.com  Fri Jul  2 13:03:27 2010
From: Christopher.Rush at arup.com (Christopher Rush)
Date: Fri Jul  2 13:03:46 2010
Subject: [Radiance-general] Re: rtrace and parallel processes
In-Reply-To: <4C2E4298.2040705@transsolar.com>
References: <4C2E4298.2040705@transsolar.com>
Message-ID: <28285BAEA8C0814DBF1B199C876EC5B0478FDF2C54@AMXEXC01.global.arup.com>

What happens if you keep -aa set to 0.1 and add the option -af grid.amb ?
____________________________________________________________
Electronic mail messages entering and leaving Arup  business
systems are scanned for acceptability of content and viruses
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100702/e31412fb/attachment.htm
From info at aisarquitectura.com  Sat Jul  3 04:59:23 2010
From: info at aisarquitectura.com (Ignacio Munarriz)
Date: Sat Jul  3 04:59:31 2010
Subject: [Radiance-general] radiance  to 3dsmax export tool
In-Reply-To: <28285BAEA8C0814DBF1B199C876EC5B0478FDF2C54@AMXEXC01.global.arup.com>
References: <4C2E4298.2040705@transsolar.com>
	<28285BAEA8C0814DBF1B199C876EC5B0478FDF2C54@AMXEXC01.global.arup.com>
Message-ID: <4C2F261B.1030003@aisarquitectura.com>

Hi all,
I've uploaded a max to rad export plugin for max 2009 and 2010, it has 
been only tested in one machine with radiance modified so report any 
bugs. I've also removed NRV because it was a bit unstable, and uploaded 
wglrad that is similar.

www.aisarquitectura.com/software/research.htm

Regards,
Ignacio

From info at aisarquitectura.com  Sat Jul  3 09:18:54 2010
From: info at aisarquitectura.com (Ignacio Munarriz)
Date: Sat Jul  3 09:18:59 2010
Subject: [Radiance-general]3dsmax  to radiance export tool
In-Reply-To: <4C2F261B.1030003@aisarquitectura.com>
References: <4C2E4298.2040705@transsolar.com>	<28285BAEA8C0814DBF1B199C876EC5B0478FDF2C54@AMXEXC01.global.arup.com>
	<4C2F261B.1030003@aisarquitectura.com>
Message-ID: <4C2F62EE.1040302@aisarquitectura.com>

Actually it's from 3dsmax to radiance and not viceversa

El 03/07/2010 13:59, Ignacio Munarriz escribi?:
> Hi all,
> I've uploaded a max to rad export plugin for max 2009 and 2010, it has 
> been only tested in one machine with radiance modified so report any 
> bugs. I've also removed NRV because it was a bit unstable, and 
> uploaded wglrad that is similar.
>
> www.aisarquitectura.com/software/research.htm
>
> Regards,
> Ignacio
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>


From kodongh at iit.edu  Mon Jul  5 08:40:36 2010
From: kodongh at iit.edu (Dong-Hwan Ko)
Date: Mon Jul  5 08:40:32 2010
Subject: [Radiance-general] [ECOTECT Seminar @ IIT] July 23-24: For ECOTECT
	Beginner and BIM users
In-Reply-To: <fb0c82b618f6b.4c31fc3d@iit.edu>
References: <fb0c82b618f6b.4c31fc3d@iit.edu>
Message-ID: <fb239b53188a3.4c31fcf4@iit.edu>

 Dear All,
 
 Please take a look at IIT ECOTECT Seminar 7.
 
 I hope many people join and learn ECOTECT & how to use BIM file for analysis.
 
 Website
 
 http://www.iit.edu/arch/programs/graduate/phd/activities/building_energy_s7.shtml
 
 
 Building Energy Analysis Seminar 7 (BIM & Sustainability using  ECOTECT)
 One & Half Day Seminar
 July 22-23, 2010
 
 Location: 3410 Bldg, Computer Lab (Rm 110)
 Address: 3410 S. State Street, Chicago IL 60616
 
 
 In this seminar, you will learn:
 - How to evaluate your BIM model (REVIT, ArchiCAD) using Autodesk  ECOTECT- How
to use ECOTECT, REVIT and GBS programs that will help 
 you make better design decisions
 - The purpose and benefits of BIM, ECOTECT  modeling
 - When to use BIM, ECOTECT for improving green and sustainable design
 - How can we evaluate our BIM's Sustainability using ECOTECT?
 - What is the most simple file conversion method for BIM and Sustainability?-
Our new mandatory requirements (Job, Career) for  BIM, GREEN Building and LEED
 - How to interpret and report their results
 - To understand the techniques and design principles for low energy 
 buildings and the review of energy-efficient design strategies
 - To understand the interdependence of design, location, weather, 
 and scientific factors in developing energy-efficient buildings
 - To acquire the simulation skills to research weather and contexts 
 in the schematic design process and run simulation programs to analyze 
 building performance
 
 DONGHWAN KO


From hujia06 at gmail.com  Tue Jul  6 19:25:08 2010
From: hujia06 at gmail.com (Jia Hu)
Date: Tue Jul  6 19:25:07 2010
Subject: [Radiance-general] materials and texfunc
Message-ID: <AANLkTildptDIkXTVcKQk8JnZvHatsl6Ywmm5kNpoo2es@mail.gmail.com>

Hi all:

I have some questions.

(1) Besides measure, through which methods I can find the common values of
material property, such as RBG, reflectivity and roughness value? I know
two places: Colar picker at http://luxal.eu/resources/radiance/index.shtml
and Ecotect which provides some examples, but RBG values are not 0-1, should
I divide the RBG value by 255?

(2) When typing "man texfunc", I can not find the command. Is that my
installation problem?  I use ubuntu and Radiance version 4.0.

(3) Is that right I can add texture and pattern by using procedural
functions (e.g. wrinkle.cal) and bitmaps accoring to
http://www.artifice.com/radiance/rad_materials.html ?  If I have an image
with an .png extension, how can I add the image as the the pattern ?

Thank you.

Jia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100706/a17d0511/attachment.html
From rpg at rumblestrip.org  Tue Jul  6 21:46:17 2010
From: rpg at rumblestrip.org (Rob Guglielmetti)
Date: Tue Jul  6 21:46:17 2010
Subject: [Radiance-general] materials and texfunc
In-Reply-To: <AANLkTildptDIkXTVcKQk8JnZvHatsl6Ywmm5kNpoo2es@mail.gmail.com>
References: <AANLkTildptDIkXTVcKQk8JnZvHatsl6Ywmm5kNpoo2es@mail.gmail.com>
Message-ID: <AC962B6E-6D05-4B87-BFB2-DF8B120EDDD8@rumblestrip.org>

Hi Jia,

Some quick answers:

1. The Luxal resource is an excellent starting point for values, but yes measurement of your own samples is the best way. The macbethcal procedure that is documented in Rendering with Radiance is very useful, too. If Ecotect is giving RGB values in the 0-255 range, then yes you would divide the color channels by 255 to get a 0-1 value that Radiance expects. 

2. textfunc is a Radiance material primitive, not a program, so there is no manual page for it. Its use is documented in the Radiance reference manual and several other places. Linkage:

http://radsite.lbl.gov/radiance/refer/materials.pdf
http://radsite.lbl.gov/radiance/refer/refman.pdf

3. To use a .png as a pattern, you need to save it in .hdr format for Radiance to use it. if you first convert the .png to .tiff, you can then use ra_tiff to convert it to .hdr format thusly:

ra_tiff -r pattern_image.tif pattern_image.hdr

Axel Jacobs has some good stuff on using images as patterns in his tutorials.

Hope this helps...

- Rob

On Jul 6, 2010, at 8:25 PM, Jia Hu wrote:

> Hi all:
>  
> I have some questions.
>  
> (1) Besides measure, through which methods I can find the common values of material property, such as RBG, reflectivity and roughness value? I know two places: Colar picker at http://luxal.eu/resources/radiance/index.shtml  and Ecotect which provides some examples, but RBG values are not 0-1, should I divide the RBG value by 255?
>  
> (2) When typing "man texfunc", I can not find the command. Is that my installation problem?  I use ubuntu and Radiance version 4.0.
>  
> (3) Is that right I can add texture and pattern by using procedural functions (e.g. wrinkle.cal) and bitmaps accoring to http://www.artifice.com/radiance/rad_materials.html ?  If I have an image with an .png extension, how can I add the image as the the pattern ?
>  
> Thank you.
>  
> Jia
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100706/3d3a47be/attachment.htm
From hujia06 at gmail.com  Wed Jul  7 18:25:35 2010
From: hujia06 at gmail.com (Jia Hu)
Date: Wed Jul  7 18:25:53 2010
Subject: [Radiance-general] materials and texfunc
In-Reply-To: <AC962B6E-6D05-4B87-BFB2-DF8B120EDDD8@rumblestrip.org>
References: <AANLkTildptDIkXTVcKQk8JnZvHatsl6Ywmm5kNpoo2es@mail.gmail.com>
	<AC962B6E-6D05-4B87-BFB2-DF8B120EDDD8@rumblestrip.org>
Message-ID: <AANLkTiny4Im2vz1UILE6t1ddCf0j0LkLnWaDHtTy5Dw-@mail.gmail.com>

Thank you very much. I am learning the tutorial of Axel Jacobs. It is very
good.

In Ubuntu, I built materials,  rad, sky.mat, sky.rad and .vf. files, when I
use oconv to compile them, I have to input the command into the terminal
window of Ubuntu to execute the command. Can I just run a script which
contains multiple commands such as oconv and rvu?

Thanks,

Jia

On Wed, Jul 7, 2010 at 12:46 AM, Rob Guglielmetti <rpg@rumblestrip.org>wrote:

>  Hi Jia,
>
> Some quick answers:
>
> 1. The Luxal resource is an excellent starting point for values, but yes
> measurement of your own samples is the best way. The macbethcal procedure
> that is documented in Rendering with Radiance is very useful, too. If
> Ecotect is giving RGB values in the 0-255 range, then yes you would divide
> the color channels by 255 to get a 0-1 value that Radiance expects.
>
> 2. textfunc is a Radiance material primitive, not a program, so there is no
> manual page for it. Its use is documented in the Radiance reference manual
> and several other places. Linkage:
>
> http://radsite.lbl.gov/radiance/refer/materials.pdf
> http://radsite.lbl.gov/radiance/refer/refman.pdf
>
> 3. To use a .png as a pattern, you need to save it in .hdr format for
> Radiance to use it. if you first convert the .png to .tiff, you can then use
> ra_tiff to convert it to .hdr format thusly:
>
> ra_tiff -r pattern_image.tif pattern_image.hdr
>
> Axel Jacobs has some good stuff on using images as patterns in his
> tutorials.
>
> Hope this helps...
>
> - Rob
>
>   On Jul 6, 2010, at 8:25 PM, Jia Hu wrote:
>
>   Hi all:
>
> I have some questions.
>
> (1) Besides measure, through which methods I can find the common values of
> material property, such as RBG, reflectivity and roughness value? I know
> two places: Colar picker at http://luxal.eu/resources/radiance/index.shtml
> and Ecotect which provides some examples, but RBG values are not 0-1, should
> I divide the RBG value by 255?
>
> (2) When typing "man texfunc", I can not find the command. Is that my
> installation problem?  I use ubuntu and Radiance version 4.0.
>
> (3) Is that right I can add texture and pattern by using procedural
> functions (e.g. wrinkle.cal) and bitmaps accoring to
> http://www.artifice.com/radiance/rad_materials.html ?  If I have an image
> with an .png extension, how can I add the image as the the pattern ?
>
> Thank you.
>
> Jia
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100707/2b103dea/attachment.htm
From grobe at gmx.net  Thu Jul  8 00:28:13 2010
From: grobe at gmx.net (Lars O. Grobe)
Date: Thu Jul  8 00:29:02 2010
Subject: [Radiance-general] materials and texfunc
In-Reply-To: <AANLkTiny4Im2vz1UILE6t1ddCf0j0LkLnWaDHtTy5Dw-@mail.gmail.com>
References: <AANLkTildptDIkXTVcKQk8JnZvHatsl6Ywmm5kNpoo2es@mail.gmail.com>
	<AC962B6E-6D05-4B87-BFB2-DF8B120EDDD8@rumblestrip.org>
	<AANLkTiny4Im2vz1UILE6t1ddCf0j0LkLnWaDHtTy5Dw-@mail.gmail.com>
Message-ID: <8B1AE209-7D16-4018-851A-77F9DE601A69@gmx.net>

Hi,

the typical way to automize the steps required to get an image from  
yor scene is to write a rif-file and let rad (look at the manpage of  
rad) determine what has to be done. It is a bit like using make. I  
would recommend not to copy one of the complete and complex rif-files  
coming with the examples, but to start with a minimal one.

This again is very nicely doable following Axel's tutorial!

Good luck, cheers, Lars.

--
Dipl.-Ing. Architect Lars O. Grobe

On Jul 8, 2010, at 3:25, Jia Hu <hujia06@gmail.com> wrote:

> Thank you very much. I am learning the tutorial of Axel Jacobs. It  
> is very good.
>
> In Ubuntu, I built materials,  rad, sky.mat, sky.rad and .vf. files,  
> when I use oconv to compile them, I have to input the command into  
> the terminal window of Ubuntu to execute the command. Can I just run  
> a script which contains multiple commands such as oconv and rvu?
>
> Thanks,
>
> Jia
>
> On Wed, Jul 7, 2010 at 12:46 AM, Rob Guglielmetti  
> <rpg@rumblestrip.org> wrote:
> Hi Jia,
>
> Some quick answers:
>
> 1. The Luxal resource is an excellent starting point for values, but  
> yes measurement of your own samples is the best way. The macbethcal  
> procedure that is documented in Rendering with Radiance is very  
> useful, too. If Ecotect is giving RGB values in the 0-255 range,  
> then yes you would divide the color channels by 255 to get a 0-1  
> value that Radiance expects.
>
> 2. textfunc is a Radiance material primitive, not a program, so  
> there is no manual page for it. Its use is documented in the  
> Radiance reference manual and several other places. Linkage:
>
> http://radsite.lbl.gov/radiance/refer/materials.pdf
> http://radsite.lbl.gov/radiance/refer/refman.pdf
>
> 3. To use a .png as a pattern, you need to save it in .hdr format  
> for Radiance to use it. if you first convert the .png to .tiff, you  
> can then use ra_tiff to convert it to .hdr format thusly:
>
> ra_tiff -r pattern_image.tif pattern_image.hdr
>
> Axel Jacobs has some good stuff on using images as patterns in his  
> tutorials.
>
> Hope this helps...
>
> - Rob
>
> On Jul 6, 2010, at 8:25 PM, Jia Hu wrote:
>
>> Hi all:
>>
>> I have some questions.
>>
>> (1) Besides measure, through which methods I can find the common  
>> values of material property, such as RBG, reflectivity and  
>> roughness value? I know two places: Colar picker at http://luxal.eu/resources/radiance/index.shtml 
>>   and Ecotect which provides some examples, but RBG values are not  
>> 0-1, should I divide the RBG value by 255?
>>
>> (2) When typing "man texfunc", I can not find the command. Is that  
>> my installation problem?  I use ubuntu and Radiance version 4.0.
>>
>> (3) Is that right I can add texture and pattern by using procedural  
>> functions (e.g. wrinkle.cal) and bitmaps accoring to http://www.artifice.com/radiance/rad_materials.html 
>>  ?  If I have an image with an .png extension, how can I add the  
>> image as the the pattern ?
>>
>> Thank you.
>>
>> Jia
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general@radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100708/9337fcf9/attachment.html
From Robert.Guglielmetti at nrel.gov  Thu Jul  8 08:14:39 2010
From: Robert.Guglielmetti at nrel.gov (Guglielmetti, Robert)
Date: Thu Jul  8 08:14:36 2010
Subject: [Radiance-general] materials and texfunc
In-Reply-To: <8B1AE209-7D16-4018-851A-77F9DE601A69@gmx.net>
Message-ID: <C85B477F.5099%robert.guglielmetti@nrel.gov>

Jia,

Lars beat me to it; rad is the tool to use, and it also can be redirected to
rvu? with the "-o x11" option. You can, of course also do what you proposed,
and create a batch file or shell script to manage all the steps. The nice
thing about rad is it intelligently manages your scene files and also makes
smart choices about rendering parameters depending on what you are trying to
do. It's definitely useful to see how the various options all work
together...

- Rob


On 7/8/10 1:28 AM, "Lars O. Grobe" <grobe@gmx.net> wrote:

> Hi,
> 
> the typical way to automize the steps required to get an image from yor scene
> is to write a rif-file and let rad (look at the manpage of rad) determine what
> has to be done. It is a bit like using make. I would recommend not to copy one
> of the complete and complex rif-files coming with the examples, but to start
> with a minimal one.
> 
> This again is very nicely doable following Axel's tutorial!
> 
> Good luck, cheers, Lars.
> 
> --
> Dipl.-Ing. Architect Lars O. Grobe
> 
> On Jul 8, 2010, at 3:25, Jia Hu <hujia06@gmail.com> wrote:
> 
>> Thank you very much. I am learning the tutorial of Axel Jacobs. It is very
>> good.
>>  
>> In Ubuntu, I built materials,  rad, sky.mat, sky.rad and .vf. files, when I
>> use oconv to compile them, I have to input the command into the terminal
>> window of Ubuntu to execute the command. Can I just run a script which
>> contains multiple commands such as oconv and rvu?
>>  
>> Thanks,
>>  
>> Jia


From hujia06 at gmail.com  Thu Jul  8 11:23:26 2010
From: hujia06 at gmail.com (Jia Hu)
Date: Thu Jul  8 11:23:28 2010
Subject: [Radiance-general] materials and texfunc
In-Reply-To: <C85B477F.5099%robert.guglielmetti@nrel.gov>
References: <8B1AE209-7D16-4018-851A-77F9DE601A69@gmx.net>
	<C85B477F.5099%robert.guglielmetti@nrel.gov>
Message-ID: <AANLkTikBxC0_U_blPEPYdxV5rixW9rf-CVougqTs6ndx@mail.gmail.com>

I will try that. Thank you. In my case, I have a number of files that need
simulation. for example, different material property, different angles of
blinds. I heart to use shell script to automatize the simulation, e.g.,
selecting the different input files by using loop.

Cheers.
Jia

On Thu, Jul 8, 2010 at 11:14 AM, Guglielmetti, Robert <
Robert.Guglielmetti@nrel.gov> wrote:

> Jia,
>
> Lars beat me to it; rad is the tool to use, and it also can be redirected
> to
> rvu  with the "-o x11" option. You can, of course also do what you
> proposed,
> and create a batch file or shell script to manage all the steps. The nice
> thing about rad is it intelligently manages your scene files and also makes
> smart choices about rendering parameters depending on what you are trying
> to
> do. It's definitely useful to see how the various options all work
> together...
>
> - Rob
>
>
> On 7/8/10 1:28 AM, "Lars O. Grobe" <grobe@gmx.net> wrote:
>
> > Hi,
> >
> > the typical way to automize the steps required to get an image from yor
> scene
> > is to write a rif-file and let rad (look at the manpage of rad) determine
> what
> > has to be done. It is a bit like using make. I would recommend not to
> copy one
> > of the complete and complex rif-files coming with the examples, but to
> start
> > with a minimal one.
> >
> > This again is very nicely doable following Axel's tutorial!
> >
> > Good luck, cheers, Lars.
> >
> > --
> > Dipl.-Ing. Architect Lars O. Grobe
> >
> > On Jul 8, 2010, at 3:25, Jia Hu <hujia06@gmail.com> wrote:
> >
> >> Thank you very much. I am learning the tutorial of Axel Jacobs. It is
> very
> >> good.
> >>
> >> In Ubuntu, I built materials,  rad, sky.mat, sky.rad and .vf. files,
> when I
> >> use oconv to compile them, I have to input the command into the terminal
> >> window of Ubuntu to execute the command. Can I just run a script which
> >> contains multiple commands such as oconv and rvu?
> >>
> >> Thanks,
> >>
> >> Jia
>
>
>  _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100708/79d7a61b/attachment.htm
From Christopher.Rush at arup.com  Thu Jul  8 12:18:24 2010
From: Christopher.Rush at arup.com (Christopher Rush)
Date: Thu Jul  8 12:18:26 2010
Subject: [Radiance-general] materials and texfunc
In-Reply-To: <AANLkTikBxC0_U_blPEPYdxV5rixW9rf-CVougqTs6ndx@mail.gmail.com>
References: <8B1AE209-7D16-4018-851A-77F9DE601A69@gmx.net>
	<C85B477F.5099%robert.guglielmetti@nrel.gov>
	<AANLkTikBxC0_U_blPEPYdxV5rixW9rf-CVougqTs6ndx@mail.gmail.com>
Message-ID: <28285BAEA8C0814DBF1B199C876EC5B0478FF8EC79@AMXEXC01.global.arup.com>

You can even call rad from within a script.

Define only the common settings for rad within the rif file, and those that change after each rad command within the script (scene=___ PICTURE=___ ). Check the rad manual page for usage syntax.

A few of rad's variables assign naming of output files, including PICTURE, OCTREE, RAWFILE, and AMBFILE (others?). Be sure to assign these names differently for each option in the script, otherwise your output images will default to common rif file name, or you could accidentally share an ambient file between options.
____________________________________________________________
Electronic mail messages entering and leaving Arup  business
systems are scanned for acceptability of content and viruses
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100708/d69e4044/attachment.html
From hujia06 at gmail.com  Thu Jul  8 14:51:04 2010
From: hujia06 at gmail.com (Jia Hu)
Date: Thu Jul  8 14:51:36 2010
Subject: [Radiance-general] rad program
Message-ID: <AANLkTik5xdeAz2ooSS6xvDcrb5iaHFAwiFBzqL5EHK8t@mail.gmail.com>

Hello,

I checked the rad. It has a good feature. But I am a little confused with
several variable settings

*rad* [ *-s* ][ *-n|-N* *npr* ][ *-t* ][ *-e* ][ *-V* ][ *-w* ][ *-v* *view*][
*-o* *device* ]  *rfile* [ *VAR=value* *..*  ]

(1) is that right the option [-v view] and "view" variable in .rif have the
same function?

(2)  For three sets (1) "OCTREE", (2)"scene" (3) "object" and "materials" ,
if I change files in "object" and "material", will .oct be updated when I
run "rad -t sample.rif" ?  Similarly, if I change files indicated in
"scene", the oct. will be updated even if "OCTREE" is not changed?

Cheers,
Jia


On Thu, Jul 8, 2010 at 3:18 PM, Christopher Rush
<Christopher.Rush@arup.com>wrote:

>  You can even call rad from within a script.
>
>
>
> Define only the common settings for rad within the rif file, and those that
> change after each rad command within the script (scene=___ PICTURE=___ ).
> Check the rad manual page for usage syntax.
>
>
>
> A few of rad?s variables assign naming of output files, including PICTURE,
> OCTREE, RAWFILE, and AMBFILE (others?). Be sure to assign these names
> differently for each option in the script, otherwise your output images will
> default to common rif file name, or you could accidentally share an ambient
> file between options.
>
> ____________________________________________________________
> Electronic mail messages entering and leaving Arup  business
> systems are scanned for acceptability of content and viruses
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100708/02546c8c/attachment.htm
From Christopher.Rush at arup.com  Thu Jul  8 14:59:35 2010
From: Christopher.Rush at arup.com (Christopher Rush)
Date: Thu Jul  8 15:03:00 2010
Subject: [Radiance-general] rad program
In-Reply-To: <AANLkTik5xdeAz2ooSS6xvDcrb5iaHFAwiFBzqL5EHK8t@mail.gmail.com>
References: <AANLkTik5xdeAz2ooSS6xvDcrb5iaHFAwiFBzqL5EHK8t@mail.gmail.com>
Message-ID: <28285BAEA8C0814DBF1B199C876EC5B04790010AB5@AMXEXC01.global.arup.com>

> rad [ -s ][ -n|-N npr ][ -t ][ -e ][ -V ][ -w ][ -v view ][ -o device ]  rfile [ VAR=value ..  ]

> (1) is that right the option [-v view] and "view" variable in .rif have the same function?

If your rif file has a line that looks like "view= viewname [parameters]" then your -v command line option to rad would look like "-v viewname." Otherwise it will run all views listed in the rif file.

> (2)  For three sets (1) "OCTREE", (2)"scene" (3) "object" and "materials" , if I change files in "object" and "material", will .oct be updated when I run "rad -t sample.rif" ?  Similarly, if I change files indicated in "scene", the oct. will be updated even if "OCTREE" is not changed?

Correct. It should automatically check the input files every call of the rad command and update the .oct file if required, even without the -t option. The -t option is meant specially for a case that you want to update the .oct file, but not create any renderings from it.
____________________________________________________________
Electronic mail messages entering and leaving Arup  business
systems are scanned for acceptability of content and viruses
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100708/c33f2167/attachment.html
From hujia06 at gmail.com  Thu Jul  8 23:09:57 2010
From: hujia06 at gmail.com (Jia Hu)
Date: Thu Jul  8 23:09:57 2010
Subject: [Radiance-general] python
Message-ID: <AANLkTil23grfkwoia0OUheui7xAcp68LUPPbE5KRXXOX@mail.gmail.com>

Hello:

In Ubuntu, I do not have much knowledge of shell programming about bash.  Is
that a good choice to use python script to run Radiance (I did find some
posts about using python to run Radiance programs) if I hope to run other
numeric simulation at the same time?

Thank you,
Jia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100709/b259953e/attachment.htm
From maricanis at gmail.com  Fri Jul  9 00:10:56 2010
From: maricanis at gmail.com (Marija Velickovic)
Date: Fri Jul  9 00:11:16 2010
Subject: [Radiance-general] python
In-Reply-To: <AANLkTil23grfkwoia0OUheui7xAcp68LUPPbE5KRXXOX@mail.gmail.com>
References: <AANLkTil23grfkwoia0OUheui7xAcp68LUPPbE5KRXXOX@mail.gmail.com>
Message-ID: <AANLkTilrvtF_tWi_cmQG0_WyM8N1V34E8lxoupRzuL0C@mail.gmail.com>

Hi Jia,

You can use Python or any other script language to run Radiance programs.
For example if you need some complex numerical calculations, python is good
(you can use Numpy or similar), and then call radiance programs where
needed.
For radiance programs calling I use 'subprocess' python module.

Hope this helps,
Marija

On Fri, Jul 9, 2010 at 8:09 AM, Jia Hu <hujia06@gmail.com> wrote:

> Hello:
>
> In Ubuntu, I do not have much knowledge of shell programming about
> bash.  Is that a good choice to use python script to run Radiance (I did
> find some posts about using python to run Radiance programs) if I hope to
> run other numeric simulation at the same time?
>
> Thank you,
> Jia
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100709/1ac0208f/attachment.html
From tbleicher at googlemail.com  Fri Jul  9 01:34:08 2010
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Fri Jul  9 01:34:07 2010
Subject: [Radiance-general] python
In-Reply-To: <AANLkTil23grfkwoia0OUheui7xAcp68LUPPbE5KRXXOX@mail.gmail.com>
References: <AANLkTil23grfkwoia0OUheui7xAcp68LUPPbE5KRXXOX@mail.gmail.com>
Message-ID: <AANLkTimg8meHlpZjcRUUPQuKvMNqrdKte8tmaAr4n6Fs@mail.gmail.com>

On Fri, Jul 9, 2010 at 7:09 AM, Jia Hu <hujia06@gmail.com> wrote:
> Hello:
>
> In Ubuntu, I?do not have much knowledge of shell programming about bash.??Is
> that a good choice to use?python script?to run Radiance (I did find some
> posts about using python to run Radiance programs)?if I hope to run other
> numeric simulation at the same time?

If you only want to run multiple Radiance processes at the same time
or automate your calculation processes BASH may be a better choice
because it is your standard environment in Unix and so the commands
are identical on the command line and in a script. However, for anything
more complex (even as simple as floating point arithmetic) you will need
other Unix tools like bc, awk and sed which means you will have to
learn their command syntax, too.

If you plan on post-processing your results (calculate average, create plots
or summary reports) then I would recommend Python. It's a powerful
language but still easy to learn. Once you have worked out how to read
files or how to use the "subprocess" module to run Radiance commands
you can do everything you could do with BASH.

For both there are good learning resources available on the net and
they are a common choice to control Radiance simulations. So you
can't really go wrong here.


Regards,
Thomas

From jedev at visarc.com  Fri Jul  9 07:10:15 2010
From: jedev at visarc.com (Jack de Valpine)
Date: Fri Jul  9 07:11:14 2010
Subject: [Radiance-general] python
In-Reply-To: <AANLkTimg8meHlpZjcRUUPQuKvMNqrdKte8tmaAr4n6Fs@mail.gmail.com>
References: <AANLkTil23grfkwoia0OUheui7xAcp68LUPPbE5KRXXOX@mail.gmail.com>
	<AANLkTimg8meHlpZjcRUUPQuKvMNqrdKte8tmaAr4n6Fs@mail.gmail.com>
Message-ID: <4C372DC7.4080802@visarc.com>

Hi,

I think that for most types of Radiance automation/scripting, I would 
suggest the following:

    * make - for automating basic repetitive tasks including calls to
      rad or other radiance programs
    * perl or python - offer robust programming capabilities. Both are
      quiet industrial strength, although I have been a perl person for
      a long time, my impression is that coding in python is perhaps a
      bit cleaner (shocked gasps from those who know me...)

This being said, a few comments on the following:

    * bash/csh - if you end up needing to reference/modify any of the
      scripts that are included with the Radiance distribution then you
      will need to get some understanding of these scripting languages
    * bc/awk/sed - it has been a long time since I have had to deal with
      any of these, I would suggest that it would be easier to do in
      perl/python

Regards,

-Jack

-- 
# Jack de Valpine
# president
#
# visarc incorporated
# http://www.visarc.com
#
# channeling technology for superior design and construction



Thomas Bleicher wrote:
> On Fri, Jul 9, 2010 at 7:09 AM, Jia Hu <hujia06@gmail.com> wrote:
>   
>> Hello:
>>
>> In Ubuntu, I do not have much knowledge of shell programming about bash.  Is
>> that a good choice to use python script to run Radiance (I did find some
>> posts about using python to run Radiance programs) if I hope to run other
>> numeric simulation at the same time?
>>     
>
> If you only want to run multiple Radiance processes at the same time
> or automate your calculation processes BASH may be a better choice
> because it is your standard environment in Unix and so the commands
> are identical on the command line and in a script. However, for anything
> more complex (even as simple as floating point arithmetic) you will need
> other Unix tools like bc, awk and sed which means you will have to
> learn their command syntax, too.
>
> If you plan on post-processing your results (calculate average, create plots
> or summary reports) then I would recommend Python. It's a powerful
> language but still easy to learn. Once you have worked out how to read
> files or how to use the "subprocess" module to run Radiance commands
> you can do everything you could do with BASH.
>
> For both there are good learning resources available on the net and
> they are a common choice to control Radiance simulations. So you
> can't really go wrong here.
>
>
> Regards,
> Thomas
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>   

From jan.wienold at ise.fraunhofer.de  Fri Jul  9 07:16:44 2010
From: jan.wienold at ise.fraunhofer.de (Jan Wienold)
Date: Fri Jul  9 07:16:46 2010
Subject: [Radiance-general] 9th International Radiance Workshop - Web-Site
	online
Message-ID: <4C372F4C.9030809@ise.fraunhofer.de>

Dear colleagues,

the Web-site for the Radiance Workshop (20/21 Sept) is online now here:

http://www.ise.fraunhofer.de/radiance/workshop-2010

The registration page is unfortunately still under construction and will
be online from Wednesday, Jul 14th.

Please note, that we got the* hotel room contingent* only guaranteed 
until *Aug 1st* and  that there  are other conferences at the same
time.  Please  book your hotel room as soon as possible - details can be
found on the Web-site.

Please remember: If you are interested in presenting at the workshop
please send us a working title and a brief abstract to
jan.wienold@ise.fraunhofer.de and sandra.mende@ise.fraunhofer.de until
*July 31st.*

Hope to see you in Freiburg!

Jan and Sandra


-------- Original Message --------
Subject: 	[Radiance-general] 9th International Radiance Workshop @ ISE,
Germany
Resent-To: 	wienold@ise.fraunhofer.de
Date: 	Wed, 30 Jun 2010 14:45:17 +0200
From: 	Jan Wienold <jan.wienold@ise.fraunhofer.de>
Reply-To: 	Radiance general discussion
<radiance-general@radiance-online.org>
To: 	Radiance general discussion <radiance-general@radiance-online.org>



Dear colleagues,

As previously announced Fraunhofer ISE will be hosting this year?s
International Radiance Workshop on September 20/21(22) at our
institute in Freiburg, Germany.


The International Radiance Workshops are annual, two-day gatherings of
Radiance developers and users. The workshops consist of a series of
presentations that in the past included case studies on the use of
Radiance in lighting and/or daylighting projects, recent advances in
modeling glare and energy savings from lighting controls as well as the
use of Radiance in Art and Design. Presentations from previous workshops
can be downloaded from http://www.radiance-online.org/.


The workshop will be held on two days (Monday, Tuesday, 20-21st
September). On Wednesday 22nd we intend to hold a special course on
modeling advanced fenestration systems. Topics at this course will be
rtcontrib, photon mapping and material measurements/modeling.

The workshop web-site will be online in the next days and the link will
be announced in a separate email. On that site you can find more
informations + registration formula. We try to put the site online as
soon as possible, since the hotel bookings are unfortunately somewhat
difficult in that time and they cannot reserve a large contingent for a
longer time.

If you are interested in presenting at the workshop please send us a
working title and a brief abstract to jan.wienold@ise.fraunhofer.de
 and sandra.mende@ise.fraunhofer.de

We are looking forward to receiving your abstracts and welcoming you to
Freiburg!


Jan Wienold and Sandra Mende
Fraunhofer ISE,




_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general


-- 
Dipl.-Ing. Jan Wienold
Project Manager
Fraunhofer-Institut f?r Solare Energiesysteme
Thermal Systems and Buildings, Lighting and Daylighting
Heidenhofstr. 2, 79110 Freiburg, Germany
Phone: +49(0)761 4588 5133 Fax:+49(0)761 4588 9133
jan.wienold@ise.fraunhofer.de
http://www.ise.fraunhofer.de

In office: 
Mo,Tue: 8:30-18:00
We,Thu: 8:30-16:00
Fr:  8:30-15:30

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100709/5276c997/attachment.htm
From Robert.Guglielmetti at nrel.gov  Fri Jul  9 08:24:54 2010
From: Robert.Guglielmetti at nrel.gov (Guglielmetti, Robert)
Date: Fri Jul  9 08:24:54 2010
Subject: [Radiance-general] python
In-Reply-To: <4C372DC7.4080802@visarc.com>
Message-ID: <C85C9B66.50EF%robert.guglielmetti@nrel.gov>

Just to add to the mix, I've started playing with Ruby and like it a lot,
similar functionality to Python, though certainly a lot less add-ons
available than Python (such as SciPy and NumPY). But, SketchUp's API is in
Ruby, which is a nice way to link a 3D drawing program with Radiance, as
Thomas Bleicher has done with his su2rad plug-in...

On 7/9/10 8:10 AM, "Jack de Valpine" <jedev@visarc.com> wrote:

> Hi,
> 
> I think that for most types of Radiance automation/scripting, I would
> suggest the following:
> 
>     * make - for automating basic repetitive tasks including calls to
>       rad or other radiance programs
>     * perl or python - offer robust programming capabilities. Both are
>       quiet industrial strength, although I have been a perl person for
>       a long time, my impression is that coding in python is perhaps a
>       bit cleaner (shocked gasps from those who know me...)
> 
> This being said, a few comments on the following:
> 
>     * bash/csh - if you end up needing to reference/modify any of the
>       scripts that are included with the Radiance distribution then you
>       will need to get some understanding of these scripting languages
>     * bc/awk/sed - it has been a long time since I have had to deal with
>       any of these, I would suggest that it would be easier to do in
>       perl/python
> 
> Regards,
> 
> -Jack
> 
> --
> # Jack de Valpine
> # president
> #
> # visarc incorporated
> # http://www.visarc.com
> #
> # channeling technology for superior design and construction
> 
> 
> 
> Thomas Bleicher wrote:
>> On Fri, Jul 9, 2010 at 7:09 AM, Jia Hu <hujia06@gmail.com> wrote:
>>  
>>> Hello:
>>> 
>>> In Ubuntu, I do not have much knowledge of shell programming about bash.  Is
>>> that a good choice to use python script to run Radiance (I did find some
>>> posts about using python to run Radiance programs) if I hope to run other
>>> numeric simulation at the same time?
>>>    
>> 
>> If you only want to run multiple Radiance processes at the same time
>> or automate your calculation processes BASH may be a better choice
>> because it is your standard environment in Unix and so the commands
>> are identical on the command line and in a script. However, for anything
>> more complex (even as simple as floating point arithmetic) you will need
>> other Unix tools like bc, awk and sed which means you will have to
>> learn their command syntax, too.
>> 
>> If you plan on post-processing your results (calculate average, create plots
>> or summary reports) then I would recommend Python. It's a powerful
>> language but still easy to learn. Once you have worked out how to read
>> files or how to use the "subprocess" module to run Radiance commands
>> you can do everything you could do with BASH.
>> 
>> For both there are good learning resources available on the net and
>> they are a common choice to control Radiance simulations. So you
>> can't really go wrong here.
>> 
>> 
>> Regards,
>> Thomas
>> 
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general@radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>  
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general


From RFritz at lbl.gov  Fri Jul  9 14:08:58 2010
From: RFritz at lbl.gov (R Fritz)
Date: Fri Jul  9 14:09:12 2010
Subject: [Radiance-general] Re: python
References: <AANLkTil23grfkwoia0OUheui7xAcp68LUPPbE5KRXXOX@mail.gmail.com>
Message-ID: <i1835a$8e5$1@dough.gmane.org>

My experiences with Python as a control language are very positive. 
There's a similar case to be made for all the "concise" interpretive 
languages: Python, Ruby, Perl, Lua, and so on, which even includes such 
tools as LISP, which is the granddaddy of them all. I like Python 
because of the computer science attitudes which underly its design: it 
is readable (at least if one grew up with a European language), 
reliable, and *small*--the manual for the basic language can be read in 
an hour, though the libraries are extensive.

Rhino 5 is planned to use the .NET implementation of Python as its 
primary scripting language, though other .NET languages will be 
available.
-- 
Randolph Fritz ? RFritz@lbl.gov
Environmental Energy Technologies Division ? Lawrence Berkeley Labs



From RFritz at lbl.gov  Sun Jul 11 19:21:05 2010
From: RFritz at lbl.gov (R Fritz)
Date: Sun Jul 11 19:21:17 2010
Subject: [Radiance-general] Physically-based rendering using OpenGL?
Message-ID: <i1du6h$tj5$1@dough.gmane.org>

Has anyone tried this, or know anything about it? With the 32-bit (and 
now 64-bit) capabilities of OpenGL 3, it seems like some things might 
be possible, though I'm not sure how to get a GPU to do a global 
illumination calculation. Anyone know? Tried? Seen any papers?
-- 
Randolph Fritz ? RFritz@lbl.gov
Environmental Energy Technologies Division ? Lawrence Berkeley Labs



From info at aisarquitectura.com  Sun Jul 11 23:46:21 2010
From: info at aisarquitectura.com (Ignacio Munarriz)
Date: Sun Jul 11 23:47:22 2010
Subject: [Radiance-general] Physically-based rendering using OpenGL?
In-Reply-To: <i1du6h$tj5$1@dough.gmane.org>
References: <i1du6h$tj5$1@dough.gmane.org>
Message-ID: <4C3ABA3D.3040105@aisarquitectura.com>

There are several approaches to get global illumintation on gpus,
es.wikipedia.org/wiki/*OpenCL
*es.wikipedia.org/wiki/*CUDA*
*http://www.luxrender.net/wiki/index.php?title=Luxrender_and_OpenCL 
(Open Source)
http://www.mentalimages.com/products/iray.html (commercial)
http://www.youtube.com/watch?v=eRoSFNRQETg (commercial)

*
El 12/07/2010 4:21, R Fritz escribi?:
> Has anyone tried this, or know anything about it? With the 32-bit (and 
> now 64-bit) capabilities of OpenGL 3, it seems like some things might 
> be possible, though I'm not sure how to get a GPU to do a global 
> illumination calculation. Anyone know? Tried? Seen any papers?

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100712/9d8e7346/attachment.html
From RFritz at lbl.gov  Mon Jul 12 10:05:26 2010
From: RFritz at lbl.gov (R Fritz)
Date: Mon Jul 12 10:05:38 2010
Subject: [Radiance-general] Re: Physically-based rendering using OpenGL?
References: <i1du6h$tj5$1@dough.gmane.org>
	<4C3ABA3D.3040105@aisarquitectura.com>
Message-ID: <i1fi0m$ifl$1@dough.gmane.org>

Thank you. That makes it clear that something is possible. But what? As 
of version 3.5, Mental Ray (the base of iray) had some serious 
limitations in physically based rendering. In Labayrade and 
Fontoynont's 2009 CIE 171:2006 testing, it could not, for instance, 
simulate a clear sky. Iray is based on Mental Ray 3.8, and it is 
possible that some of those problems have been resolved since version 
3.5, but there does not seem to have been any testing published that 
says so. Mental Image's iray site doesn't mention CIE 171. The 
Luxrender site doesn't mention any testing at all. Are you aware of any 
testing that shows accuracy of either of these tools in the physical 
simulation of light?

Greg, have you looked at this at all?

Randolph

Ref: Labayrade, Raphael, and Marc Fontoynont. ?Use of CIE 171:2006 Test 
Cases to Assess the Scope of Lighting Simulation Programs.? CIE Light 
and Lighting 2009, n.d. (Seen in preprint.)




On 2010-07-11 23:46:21 -0700, Ignacio Munarriz said:

> There are several approaches to get global illumintation on gpus,
> es.wikipedia.org/wiki/OpenCL
> es.wikipedia.org/wiki/CUDA
> http://www.luxrender.net/wiki/index.php?title=Luxrender_and_OpenCL 
> (Open Source)
> http://www.mentalimages.com/products/iray.html (commercial)
> http://www.youtube.com/watch?v=eRoSFNRQETg (commercial)
> 
> 
> El 12/07/2010 4:21, R Fritz escribi?:
> Has anyone tried this, or know anything about it? With the 32-bit (and 
> now 64-bit) capabilities of OpenGL 3, it seems like some things might 
> be possible, though I'm not sure how to get a GPU to do a global 
> illumination calculation. Anyone know? Tried? Seen any papers?
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general


-- 
Randolph Fritz ? RFritz@lbl.gov
Environmental Energy Technologies Division ? Lawrence Berkeley Labs



From info at aisarquitectura.com  Mon Jul 12 11:05:27 2010
From: info at aisarquitectura.com (Ignacio Munarriz)
Date: Mon Jul 12 11:05:35 2010
Subject: [Radiance-general] Re: Physically-based rendering using OpenGL?
In-Reply-To: <i1fi0m$ifl$1@dough.gmane.org>
References: <i1du6h$tj5$1@dough.gmane.org>	<4C3ABA3D.3040105@aisarquitectura.com>
	<i1fi0m$ifl$1@dough.gmane.org>
Message-ID: <4C3B5967.2040809@aisarquitectura.com>

I'm not aware of any physical simulation of light software using gpu, 
but probably it would be interesting to externalize ray-geometry 
intersections in radiance. I think there is already gpu code(as 
libraries or open source) that makes that intersections. Radiance 
instances, meshes, memory management ... would be some issues to solve, 
maybe waiting a bit the ray-geometry intersections will be normalized in 
gpus and it will be easier to send rays and geometry from radiance to 
the cards

El 12/07/2010 19:05, R Fritz escribi?:
> Thank you. That makes it clear that something is possible. But what? 
> As of version 3.5, Mental Ray (the base of iray) had some serious 
> limitations in physically based rendering. In Labayrade and 
> Fontoynont's 2009 CIE 171:2006 testing, it could not, for instance, 
> simulate a clear sky. Iray is based on Mental Ray 3.8, and it is 
> possible that some of those problems have been resolved since version 
> 3.5, but there does not seem to have been any testing published that 
> says so. Mental Image's iray site doesn't mention CIE 171. The 
> Luxrender site doesn't mention any testing at all. Are you aware of 
> any testing that shows accuracy of either of these tools in the 
> physical simulation of light?
>
> Greg, have you looked at this at all?
>
> Randolph
>
> Ref: Labayrade, Raphael, and Marc Fontoynont. ?Use of CIE 171:2006 
> Test Cases to Assess the Scope of Lighting Simulation Programs.? CIE 
> Light and Lighting 2009, n.d. (Seen in preprint.)
>
>
>
>
> On 2010-07-11 23:46:21 -0700, Ignacio Munarriz said:
>
>> There are several approaches to get global illumintation on gpus,
>> es.wikipedia.org/wiki/OpenCL
>> es.wikipedia.org/wiki/CUDA
>> http://www.luxrender.net/wiki/index.php?title=Luxrender_and_OpenCL 
>> (Open Source)
>> http://www.mentalimages.com/products/iray.html (commercial)
>> http://www.youtube.com/watch?v=eRoSFNRQETg (commercial)
>>
>>
>> El 12/07/2010 4:21, R Fritz escribi?:
>> Has anyone tried this, or know anything about it? With the 32-bit 
>> (and now 64-bit) capabilities of OpenGL 3, it seems like some things 
>> might be possible, though I'm not sure how to get a GPU to do a 
>> global illumination calculation. Anyone know? Tried? Seen any papers?
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general@radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>


From hope.zh at gmail.com  Mon Jul 12 21:41:42 2010
From: hope.zh at gmail.com (Ji Zhang)
Date: Mon Jul 12 21:41:41 2010
Subject: [Radiance-general] rtrace result varies for each calculation
Message-ID: <AANLkTilkZG4CNUvnqdjLrTiNJcF5z7Wezfs08ZMtG0fn@mail.gmail.com>

Dear Radiance experts,

I found that the rtrace output may differ every time I execute this command,
even if the oct file and the sensor point file are the same.

The rtrace command I'm using is:

cat SENSORS.pts | rtrace -I -aa .2 -ab 8 -ad 1024 -as 512 -h -w -oov
scene.oct | rcalc -e '$1=$1;$2=$2;$3=$3;$4=179*(.265*$4+.670*$5+.065*$6)' >
RESUTLS_lx.dat


in which:
1) "SENSORS.pts" describes the sensors' xyz coordinates and xyz vector,
2) "scene.oct" describes the geometry, material, and environment and sky
conditions (overcast sky with zenith radiance value set at 22.86)
3) "RESULTS_lx.dat" is expected to contain the xyz coordinates and
illuminance value of each sensor point.

However, I found that the output values in the RESULTS_lx.dat file varies
each time I execute this rtrace command in the Terminal in Ubuntu 10.04.

Is it normal? or is there anything wrong with my rtrace command parameters?

Hope you can help me on this!

Thanks!

Ji
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100713/95d97f34/attachment.htm
From hujia06 at gmail.com  Mon Jul 12 22:37:58 2010
From: hujia06 at gmail.com (Jia Hu)
Date: Mon Jul 12 22:37:57 2010
Subject: [Radiance-general] Re: python
In-Reply-To: <i1835a$8e5$1@dough.gmane.org>
References: <AANLkTil23grfkwoia0OUheui7xAcp68LUPPbE5KRXXOX@mail.gmail.com>
	<i1835a$8e5$1@dough.gmane.org>
Message-ID: <AANLkTim5dJUT6cBShSTlls6M76rMlLgeLpP-gmcPkAZI@mail.gmail.com>

Hello:

I  made a simplified python code as bellow.

#!/usr/bin/python
import subprocess
fileHandle = open ('final.txt', 'w')
fileHandle.write ('%s %s %s \n' % (12,25,89))
fileHandle.close()

# valueIll = open ('final.txt', 'a')
creBlinds = subprocess.Popen("genblinds %s %s %d %d %d %d %d \
          | xform -rz -90 -t 2 2 2 >> final.txt " % ('white', 'VBlinds', \
          0.03, 2, 3, 15, 30), shell=True)
fileHandle .close()

fileHandle = open ('final.txt', 'a')
fileHandle.write ('%s %s %s \n' % (52,86,506))
fileHandle.close()

What I expect is the text generated by "Gneblinds" are located between '12
25 89" and "52 86 506". But I find the text in the second line is (52 86
506) and the following text is generated by "genblinds". Could someone give
me some advice  to fix this problem?

Thank you in advance.

Jia




On Fri, Jul 9, 2010 at 5:08 PM, R Fritz <RFritz@lbl.gov> wrote:

> My experiences with Python as a control language are very positive. There's
> a similar case to be made for all the "concise" interpretive languages:
> Python, Ruby, Perl, Lua, and so on, which even includes such tools as LISP,
> which is the granddaddy of them all. I like Python because of the computer
> science attitudes which underly its design: it is readable (at least if one
> grew up with a European language), reliable, and *small*--the manual for the
> basic language can be read in an hour, though the libraries are extensive.
>
> Rhino 5 is planned to use the .NET implementation of Python as its primary
> scripting language, though other .NET languages will be available.
> --
> Randolph Fritz ? RFritz@lbl.gov
> Environmental Energy Technologies Division ? Lawrence Berkeley Labs
>
>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100713/d4058ad0/attachment.html
From tbleicher at googlemail.com  Tue Jul 13 01:40:12 2010
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Tue Jul 13 01:40:22 2010
Subject: [Radiance-general] rtrace result varies for each calculation
In-Reply-To: <AANLkTilkZG4CNUvnqdjLrTiNJcF5z7Wezfs08ZMtG0fn@mail.gmail.com>
References: <AANLkTilkZG4CNUvnqdjLrTiNJcF5z7Wezfs08ZMtG0fn@mail.gmail.com>
Message-ID: <AANLkTikL0gflw2ixcGZtIlrelwS7pJbavW8LjGbwbcqN@mail.gmail.com>

Ji.

You can always expect some variations in Radiance calculations. The
trick is to modify your ambient parameters (in general options
starting with "-a") until you're satisfied that the error has no
relevant impact on the results. The "right" ambient parameters depend
on your scene complexity and and the rendering time you can afford to
spend.

A few further comments on your parameters are below:

On Tue, Jul 13, 2010 at 5:41 AM, Ji Zhang <hope.zh@gmail.com> wrote:
> The rtrace command I'm using is:
>
> cat SENSORS.pts | rtrace -I -aa .2 -ab 8 -ad 1024 -as 512 -h -w -oov
> scene.oct | rcalc -e '$1=$1;$2=$2;$3=$3;$4=179*(.265*$4+.670*$5+.065*$6)' >
> RESUTLS_lx.dat

-aa - (ambient accuracy) seems a bit high (although I don't know
anything about your scene). A value of 0.2 allows for 20% error in the
ambient calculation. If the sky in your scene is hardly visible this
will lead to significant errors. In general I prefer values of 0.05
and less. Reducing this value will increase your rendering time. If
you set it to 0 you will turn ambient interpolation (and the
associated errors) off but it will take much longer to calculate.

-ab - (ambient bounces) is generous. If you have a simple scene where
the sky is visible from most locations you can safely reduce this to 6
or even 5 which will reduce your rendering time to a quarter of the
previous run. Note that your average results will increase a bit with
each additional bounce. You should do a series of calculations with
increasing -ab values to estimate the effect of one bounce more or
less.

-ad - (ambient divisions) could be a bit higher. I use 4096 these
days. It doesn't have a big impact on rendering time.
In a simple room with one or two large windows and no external shading
1024 will do. If you have lots of small windows or external shading
devises use a larger number.

-oov - You will find that the origin (second "o") is reported
differently from your input file. This is an effect of the -I setting
of rtrace. Don't worry about it. If you want to convert it you have to
reduce the z-value by 1.


> However, I found that the output values in the RESULTS_lx.dat file varies
> each time I execute this rtrace command in the Terminal in Ubuntu 10.04.

As stated above, some variation is normal. For you can add "-u-" to
your rtrace command line which changes the random sampling algorithm
used to a "low-discrepancy sequence". That and setting "-aa" to 0
should give you the most reproducible results. However, that alone
does not guarantee that the results are correct.

Homework:

Reduce your set of sampling points to a line from the front (window)
of the room to the back. Then start with your command line above and
modify the parameters as discussed. Do more than one calculation with
the same set of parameters and plot and compare the results. Also keep
a record of the rendering times.

A good set of options generates a smooth DF curve from the front of
the window to the back of the room that does not change a lot between
separate calculation runs. If the curve is not smooth your error is
too high and you have to increase/decrease some values.


Regards,
Thomas

From tbleicher at googlemail.com  Tue Jul 13 01:58:19 2010
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Tue Jul 13 01:58:17 2010
Subject: [Radiance-general] Re: python
In-Reply-To: <AANLkTim5dJUT6cBShSTlls6M76rMlLgeLpP-gmcPkAZI@mail.gmail.com>
References: <AANLkTil23grfkwoia0OUheui7xAcp68LUPPbE5KRXXOX@mail.gmail.com>
	<i1835a$8e5$1@dough.gmane.org>
	<AANLkTim5dJUT6cBShSTlls6M76rMlLgeLpP-gmcPkAZI@mail.gmail.com>
Message-ID: <AANLkTikWJJdN2PAqM5vOAiWZJlECwa9lixO8Fho_SMly@mail.gmail.com>

Jia

Comments are below

On Tue, Jul 13, 2010 at 6:37 AM, Jia Hu <hujia06@gmail.com> wrote:
> Hello:
>
> I??made a simplified python code as?bellow.
>
> #!/usr/bin/python
> import subprocess
> fileHandle?= open ('final.txt', 'w')
> fileHandle.write ('%s %s %s \n' % (12,25,89))
> fileHandle.close()
> # valueIll = open ('final.txt', 'a')
> creBlinds = subprocess.Popen("genblinds %s %s %d %d %d %d %d \
> ????????? | xform -rz -90 -t 2 2 2 >> final.txt " % ('white', 'VBlinds', \
> ????????? 0.03, 2, 3, 15, 30), shell=True)
> fileHandle?.close()
> fileHandle = open ('final.txt', 'a')
> fileHandle.write ('%s %s %s \n' % (52,86,506))
> fileHandle.close()
>
> What I?expect is the text?generated by "Gneblinds" are located between '12
> 25 89" and "52 86 506". But I find the text in the second line is (52 86
> 506) and the following text is generated by "genblinds". Could someone give
> me some advice? to fix this problem?

You have two processes accessing the same file in a very short time.
Due to some caching that's controlled by the OS you can't guarantee
that the access happens in the right order. The best way to solve this
is to use Python to do all the writing:

#!/usr/bin/python
import subprocess
fileHandle?= open ('final.txt', 'w')
fileHandle.write ("%s %s %s \n" % (12,25,89))

## create gensky command
cmd = "genblinds %s %s %d %d %d %d %d | xform -rz -90 -t 2 2 2 " %
('white', 'VBlinds', 0.03, 2, 3, 15, 30)

## execute in subprocess and read output of gensky command
output = subprocess.Popen(cmd.split(), stdout=PIPE, shell=True).communicate()[0]

## now write to file
fileHandle.write(output + "\n")

fileHandle.write ('%s %s %s \n' % (52,86,506))
fileHandle.close()


This is untested. The pipe to xform might mess things up here but I
hope it works.

Regards,
Thomas

From Christopher.Rush at arup.com  Tue Jul 13 06:54:47 2010
From: Christopher.Rush at arup.com (Christopher Rush)
Date: Tue Jul 13 06:54:53 2010
Subject: [Radiance-general] rtrace result varies for each calculation
In-Reply-To: <AANLkTikL0gflw2ixcGZtIlrelwS7pJbavW8LjGbwbcqN@mail.gmail.com>
References: <AANLkTilkZG4CNUvnqdjLrTiNJcF5z7Wezfs08ZMtG0fn@mail.gmail.com>
	<AANLkTikL0gflw2ixcGZtIlrelwS7pJbavW8LjGbwbcqN@mail.gmail.com>
Message-ID: <28285BAEA8C0814DBF1B199C876EC5B04792E95529@AMXEXC01.global.arup.com>

-ar - (ambient resolution) This may also improve accuracy by setting the -ar parameter higher than the default. This would help mainly if you have a large scene with a small area of interest (eg a model of an entire large office tower but seeking high level of accuracy for points within one small private office).

-Chris

-----Original Message-----
From: radiance-general-bounces@radiance-online.org [mailto:radiance-general-bounces@radiance-online.org] On Behalf Of Thomas Bleicher
Sent: Tuesday, July 13, 2010 4:40 AM
To: Radiance general discussion
Subject: Re: [Radiance-general] rtrace result varies for each calculation

Ji.

You can always expect some variations in Radiance calculations. The trick is to modify your ambient parameters (in general options starting with "-a") until you're satisfied that the error has no relevant impact on the results. The "right" ambient parameters depend on your scene complexity and and the rendering time you can afford to spend.

A few further comments on your parameters are below:

On Tue, Jul 13, 2010 at 5:41 AM, Ji Zhang <hope.zh@gmail.com> wrote:
> The rtrace command I'm using is:
>
> cat SENSORS.pts | rtrace -I -aa .2 -ab 8 -ad 1024 -as 512 -h -w -oov 
> scene.oct | rcalc -e 
> '$1=$1;$2=$2;$3=$3;$4=179*(.265*$4+.670*$5+.065*$6)' > RESUTLS_lx.dat

-aa - (ambient accuracy) seems a bit high (although I don't know anything about your scene). A value of 0.2 allows for 20% error in the ambient calculation. If the sky in your scene is hardly visible this will lead to significant errors. In general I prefer values of 0.05 and less. Reducing this value will increase your rendering time. If you set it to 0 you will turn ambient interpolation (and the associated errors) off but it will take much longer to calculate.

-ab - (ambient bounces) is generous. If you have a simple scene where the sky is visible from most locations you can safely reduce this to 6 or even 5 which will reduce your rendering time to a quarter of the previous run. Note that your average results will increase a bit with each additional bounce. You should do a series of calculations with increasing -ab values to estimate the effect of one bounce more or less.

-ad - (ambient divisions) could be a bit higher. I use 4096 these days. It doesn't have a big impact on rendering time.
In a simple room with one or two large windows and no external shading
1024 will do. If you have lots of small windows or external shading devises use a larger number.

-oov - You will find that the origin (second "o") is reported differently from your input file. This is an effect of the -I setting of rtrace. Don't worry about it. If you want to convert it you have to reduce the z-value by 1.


> However, I found that the output values in the RESULTS_lx.dat file 
> varies each time I execute this rtrace command in the Terminal in Ubuntu 10.04.

As stated above, some variation is normal. For you can add "-u-" to your rtrace command line which changes the random sampling algorithm used to a "low-discrepancy sequence". That and setting "-aa" to 0 should give you the most reproducible results. However, that alone does not guarantee that the results are correct.

Homework:

Reduce your set of sampling points to a line from the front (window) of the room to the back. Then start with your command line above and modify the parameters as discussed. Do more than one calculation with the same set of parameters and plot and compare the results. Also keep a record of the rendering times.

A good set of options generates a smooth DF curve from the front of the window to the back of the room that does not change a lot between separate calculation runs. If the curve is not smooth your error is too high and you have to increase/decrease some values.


Regards,
Thomas

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general
____________________________________________________________
Electronic mail messages entering and leaving Arup  business
systems are scanned for acceptability of content and viruses


From hope.zh at gmail.com  Tue Jul 13 07:08:35 2010
From: hope.zh at gmail.com (Ji Zhang)
Date: Tue Jul 13 07:08:32 2010
Subject: [Radiance-general] rtrace result varies for each calculation
In-Reply-To: <AANLkTikL0gflw2ixcGZtIlrelwS7pJbavW8LjGbwbcqN@mail.gmail.com>
References: <AANLkTilkZG4CNUvnqdjLrTiNJcF5z7Wezfs08ZMtG0fn@mail.gmail.com>
	<AANLkTikL0gflw2ixcGZtIlrelwS7pJbavW8LjGbwbcqN@mail.gmail.com>
Message-ID: <AANLkTinnYqBrmggHvNRW36vFOFwuTOrfbf1LhChyowgR@mail.gmail.com>

Dear Thomas,

Thank you very much for your detailed explanation! We'll try out the
parameters according to your suggestions later.

May I also ask:
1) how are these parameters relates to model size?
2) The formula (6) in Axel's tutorial (p.33) is about the radius of the
"splotches". If the model is fairly large, e.g. 100m, then what would you
suggest for "aa" and "ar"?

Thank you again!

Ji


On Tue, Jul 13, 2010 at 4:40 PM, Thomas Bleicher
<tbleicher@googlemail.com>wrote:

> Ji.
>
> You can always expect some variations in Radiance calculations. The
> trick is to modify your ambient parameters (in general options
> starting with "-a") until you're satisfied that the error has no
> relevant impact on the results. The "right" ambient parameters depend
> on your scene complexity and and the rendering time you can afford to
> spend.
>
> A few further comments on your parameters are below:
>
> On Tue, Jul 13, 2010 at 5:41 AM, Ji Zhang <hope.zh@gmail.com> wrote:
> > The rtrace command I'm using is:
> >
> > cat SENSORS.pts | rtrace -I -aa .2 -ab 8 -ad 1024 -as 512 -h -w -oov
> > scene.oct | rcalc -e '$1=$1;$2=$2;$3=$3;$4=179*(.265*$4+.670*$5+.065*$6)'
> >
> > RESUTLS_lx.dat
>
> -aa - (ambient accuracy) seems a bit high (although I don't know
> anything about your scene). A value of 0.2 allows for 20% error in the
> ambient calculation. If the sky in your scene is hardly visible this
> will lead to significant errors. In general I prefer values of 0.05
> and less. Reducing this value will increase your rendering time. If
> you set it to 0 you will turn ambient interpolation (and the
> associated errors) off but it will take much longer to calculate.
>
> -ab - (ambient bounces) is generous. If you have a simple scene where
> the sky is visible from most locations you can safely reduce this to 6
> or even 5 which will reduce your rendering time to a quarter of the
> previous run. Note that your average results will increase a bit with
> each additional bounce. You should do a series of calculations with
> increasing -ab values to estimate the effect of one bounce more or
> less.
>
> -ad - (ambient divisions) could be a bit higher. I use 4096 these
> days. It doesn't have a big impact on rendering time.
> In a simple room with one or two large windows and no external shading
> 1024 will do. If you have lots of small windows or external shading
> devises use a larger number.
>
> -oov - You will find that the origin (second "o") is reported
> differently from your input file. This is an effect of the -I setting
> of rtrace. Don't worry about it. If you want to convert it you have to
> reduce the z-value by 1.
>
>
> > However, I found that the output values in the RESULTS_lx.dat file varies
> > each time I execute this rtrace command in the Terminal in Ubuntu 10.04.
>
> As stated above, some variation is normal. For you can add "-u-" to
> your rtrace command line which changes the random sampling algorithm
> used to a "low-discrepancy sequence". That and setting "-aa" to 0
> should give you the most reproducible results. However, that alone
> does not guarantee that the results are correct.
>
> Homework:
>
> Reduce your set of sampling points to a line from the front (window)
> of the room to the back. Then start with your command line above and
> modify the parameters as discussed. Do more than one calculation with
> the same set of parameters and plot and compare the results. Also keep
> a record of the rendering times.
>
> A good set of options generates a smooth DF curve from the front of
> the window to the back of the room that does not change a lot between
> separate calculation runs. If the curve is not smooth your error is
> too high and you have to increase/decrease some values.
>
>
> Regards,
> Thomas
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>



-- 
ZHANG Ji ?? (PhD) :: Research Fellow :: Centre for Sustainable Asian Cities
:: School of Design and Environment :: National University of Singapore :: 4
Architecture Drive,  Singapore, 117566 :: Contact: 65-6516 5046 :: Email:
sdezj@nus.edu.sg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100713/1c8acc3f/attachment.htm
From hope.zh at gmail.com  Tue Jul 13 07:09:32 2010
From: hope.zh at gmail.com (Ji Zhang)
Date: Tue Jul 13 07:09:33 2010
Subject: [Radiance-general] rtrace result varies for each calculation
In-Reply-To: <28285BAEA8C0814DBF1B199C876EC5B04792E95529@AMXEXC01.global.arup.com>
References: <AANLkTilkZG4CNUvnqdjLrTiNJcF5z7Wezfs08ZMtG0fn@mail.gmail.com>
	<AANLkTikL0gflw2ixcGZtIlrelwS7pJbavW8LjGbwbcqN@mail.gmail.com>
	<28285BAEA8C0814DBF1B199C876EC5B04792E95529@AMXEXC01.global.arup.com>
Message-ID: <AANLkTilofkfaMYjJPF2srGdg1TeDfEliNFMUZ_KWc_6E@mail.gmail.com>

Thank you very much, Chris!

Ji


On Tue, Jul 13, 2010 at 9:54 PM, Christopher Rush <Christopher.Rush@arup.com
> wrote:

> -ar - (ambient resolution) This may also improve accuracy by setting the
> -ar parameter higher than the default. This would help mainly if you have a
> large scene with a small area of interest (eg a model of an entire large
> office tower but seeking high level of accuracy for points within one small
> private office).
>
> -Chris
>
> -----Original Message-----
> From: radiance-general-bounces@radiance-online.org [mailto:
> radiance-general-bounces@radiance-online.org] On Behalf Of Thomas Bleicher
> Sent: Tuesday, July 13, 2010 4:40 AM
> To: Radiance general discussion
> Subject: Re: [Radiance-general] rtrace result varies for each calculation
>
> Ji.
>
> You can always expect some variations in Radiance calculations. The trick
> is to modify your ambient parameters (in general options starting with "-a")
> until you're satisfied that the error has no relevant impact on the results.
> The "right" ambient parameters depend on your scene complexity and and the
> rendering time you can afford to spend.
>
> A few further comments on your parameters are below:
>
> On Tue, Jul 13, 2010 at 5:41 AM, Ji Zhang <hope.zh@gmail.com> wrote:
> > The rtrace command I'm using is:
> >
> > cat SENSORS.pts | rtrace -I -aa .2 -ab 8 -ad 1024 -as 512 -h -w -oov
> > scene.oct | rcalc -e
> > '$1=$1;$2=$2;$3=$3;$4=179*(.265*$4+.670*$5+.065*$6)' > RESUTLS_lx.dat
>
> -aa - (ambient accuracy) seems a bit high (although I don't know anything
> about your scene). A value of 0.2 allows for 20% error in the ambient
> calculation. If the sky in your scene is hardly visible this will lead to
> significant errors. In general I prefer values of 0.05 and less. Reducing
> this value will increase your rendering time. If you set it to 0 you will
> turn ambient interpolation (and the associated errors) off but it will take
> much longer to calculate.
>
> -ab - (ambient bounces) is generous. If you have a simple scene where the
> sky is visible from most locations you can safely reduce this to 6 or even 5
> which will reduce your rendering time to a quarter of the previous run. Note
> that your average results will increase a bit with each additional bounce.
> You should do a series of calculations with increasing -ab values to
> estimate the effect of one bounce more or less.
>
> -ad - (ambient divisions) could be a bit higher. I use 4096 these days. It
> doesn't have a big impact on rendering time.
> In a simple room with one or two large windows and no external shading
> 1024 will do. If you have lots of small windows or external shading devises
> use a larger number.
>
> -oov - You will find that the origin (second "o") is reported differently
> from your input file. This is an effect of the -I setting of rtrace. Don't
> worry about it. If you want to convert it you have to reduce the z-value by
> 1.
>
>
> > However, I found that the output values in the RESULTS_lx.dat file
> > varies each time I execute this rtrace command in the Terminal in Ubuntu
> 10.04.
>
> As stated above, some variation is normal. For you can add "-u-" to your
> rtrace command line which changes the random sampling algorithm used to a
> "low-discrepancy sequence". That and setting "-aa" to 0 should give you the
> most reproducible results. However, that alone does not guarantee that the
> results are correct.
>
> Homework:
>
> Reduce your set of sampling points to a line from the front (window) of the
> room to the back. Then start with your command line above and modify the
> parameters as discussed. Do more than one calculation with the same set of
> parameters and plot and compare the results. Also keep a record of the
> rendering times.
>
> A good set of options generates a smooth DF curve from the front of the
> window to the back of the room that does not change a lot between separate
> calculation runs. If the curve is not smooth your error is too high and you
> have to increase/decrease some values.
>
>
> Regards,
> Thomas
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
> ____________________________________________________________
> Electronic mail messages entering and leaving Arup  business
> systems are scanned for acceptability of content and viruses
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>



-- 
ZHANG Ji ?? (PhD) :: Research Fellow :: Centre for Sustainable Asian Cities
:: School of Design and Environment :: National University of Singapore :: 4
Architecture Drive,  Singapore, 117566 :: Contact: 65-6516 5046 :: Email:
sdezj@nus.edu.sg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100713/d0bb1a01/attachment.html
From Christopher.Rush at arup.com  Tue Jul 13 07:38:48 2010
From: Christopher.Rush at arup.com (Christopher Rush)
Date: Tue Jul 13 07:38:54 2010
Subject: [Radiance-general] rtrace result varies for each calculation
In-Reply-To: <AANLkTinnYqBrmggHvNRW36vFOFwuTOrfbf1LhChyowgR@mail.gmail.com>
References: <AANLkTilkZG4CNUvnqdjLrTiNJcF5z7Wezfs08ZMtG0fn@mail.gmail.com>
	<AANLkTikL0gflw2ixcGZtIlrelwS7pJbavW8LjGbwbcqN@mail.gmail.com>
	<AANLkTinnYqBrmggHvNRW36vFOFwuTOrfbf1LhChyowgR@mail.gmail.com>
Message-ID: <28285BAEA8C0814DBF1B199C876EC5B04792E95674@AMXEXC01.global.arup.com>

From Rendering With Radiance there are a few tables describing how the rad command calculates the various ambient settings. The ?ar setting is determined by a formula a*d. The value of ?a? ranges from 8 for low accuracy to 64 for high accuracy. The value of ?d? is largest scene dimension divided by dimension of zone of interest.

So for example trying to get high accuracy for a model that?s 50x50x50m and looking for detailed results in a 5x5x5m room:

a * d = ar setting
64 * (50/5) = 640

That should give you a starting point, and if you still see too much variation between calculation you can try setting parameters even more rigorously.


From: radiance-general-bounces@radiance-online.org [mailto:radiance-general-bounces@radiance-online.org] On Behalf Of Ji Zhang
Sent: Tuesday, July 13, 2010 10:09 AM
To: Radiance general discussion
Subject: Re: [Radiance-general] rtrace result varies for each calculation

Dear Thomas,

Thank you very much for your detailed explanation! We'll try out the parameters according to your suggestions later.

May I also ask:
1) how are these parameters relates to model size?
2) The formula (6) in Axel's tutorial (p.33) is about the radius of the "splotches". If the model is fairly large, e.g. 100m, then what would you suggest for "aa" and "ar"?

Thank you again!

Ji

On Tue, Jul 13, 2010 at 4:40 PM, Thomas Bleicher <tbleicher@googlemail.com<mailto:tbleicher@googlemail.com>> wrote:
Ji.

You can always expect some variations in Radiance calculations. The
trick is to modify your ambient parameters (in general options
starting with "-a") until you're satisfied that the error has no
relevant impact on the results. The "right" ambient parameters depend
on your scene complexity and and the rendering time you can afford to
spend.

A few further comments on your parameters are below:

On Tue, Jul 13, 2010 at 5:41 AM, Ji Zhang <hope.zh@gmail.com<mailto:hope.zh@gmail.com>> wrote:
> The rtrace command I'm using is:
>
> cat SENSORS.pts | rtrace -I -aa .2 -ab 8 -ad 1024 -as 512 -h -w -oov
> scene.oct | rcalc -e '$1=$1;$2=$2;$3=$3;$4=179*(.265*$4+.670*$5+.065*$6)' >
> RESUTLS_lx.dat
-aa - (ambient accuracy) seems a bit high (although I don't know
anything about your scene). A value of 0.2 allows for 20% error in the
ambient calculation. If the sky in your scene is hardly visible this
will lead to significant errors. In general I prefer values of 0.05
and less. Reducing this value will increase your rendering time. If
you set it to 0 you will turn ambient interpolation (and the
associated errors) off but it will take much longer to calculate.

-ab - (ambient bounces) is generous. If you have a simple scene where
the sky is visible from most locations you can safely reduce this to 6
or even 5 which will reduce your rendering time to a quarter of the
previous run. Note that your average results will increase a bit with
each additional bounce. You should do a series of calculations with
increasing -ab values to estimate the effect of one bounce more or
less.

-ad - (ambient divisions) could be a bit higher. I use 4096 these
days. It doesn't have a big impact on rendering time.
In a simple room with one or two large windows and no external shading
1024 will do. If you have lots of small windows or external shading
devises use a larger number.

-oov - You will find that the origin (second "o") is reported
differently from your input file. This is an effect of the -I setting
of rtrace. Don't worry about it. If you want to convert it you have to
reduce the z-value by 1.


> However, I found that the output values in the RESULTS_lx.dat file varies
> each time I execute this rtrace command in the Terminal in Ubuntu 10.04.
As stated above, some variation is normal. For you can add "-u-" to
your rtrace command line which changes the random sampling algorithm
used to a "low-discrepancy sequence". That and setting "-aa" to 0
should give you the most reproducible results. However, that alone
does not guarantee that the results are correct.

Homework:

Reduce your set of sampling points to a line from the front (window)
of the room to the back. Then start with your command line above and
modify the parameters as discussed. Do more than one calculation with
the same set of parameters and plot and compare the results. Also keep
a record of the rendering times.

A good set of options generates a smooth DF curve from the front of
the window to the back of the room that does not change a lot between
separate calculation runs. If the curve is not smooth your error is
too high and you have to increase/decrease some values.


Regards,
Thomas

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org<mailto:Radiance-general@radiance-online.org>
http://www.radiance-online.org/mailman/listinfo/radiance-general



--
ZHANG Ji ?? (PhD) :: Research Fellow :: Centre for Sustainable Asian Cities :: School of Design and Environment :: National University of Singapore :: 4 Architecture Drive,  Singapore, 117566 :: Contact: 65-6516 5046 :: Email: sdezj@nus.edu.sg<mailto:sdezj@nus.edu.sg>
____________________________________________________________
Electronic mail messages entering and leaving Arup  business
systems are scanned for acceptability of content and viruses
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100713/64eb3b16/attachment-0001.htm
From hujia06 at gmail.com  Tue Jul 13 08:56:29 2010
From: hujia06 at gmail.com (Jia Hu)
Date: Tue Jul 13 08:56:27 2010
Subject: [Radiance-general] Re: python
In-Reply-To: <AANLkTikWJJdN2PAqM5vOAiWZJlECwa9lixO8Fho_SMly@mail.gmail.com>
References: <AANLkTil23grfkwoia0OUheui7xAcp68LUPPbE5KRXXOX@mail.gmail.com>
	<i1835a$8e5$1@dough.gmane.org>
	<AANLkTim5dJUT6cBShSTlls6M76rMlLgeLpP-gmcPkAZI@mail.gmail.com>
	<AANLkTikWJJdN2PAqM5vOAiWZJlECwa9lixO8Fho_SMly@mail.gmail.com>
Message-ID: <AANLkTiln5nzfuSUmupfiQDwUP3bpyKdI1qC6vdKlvTHr@mail.gmail.com>

Thank you very much. It works now.  A very small error in your code is that
using "cmd" instead of cmd.split(), and
using stdout = subprocess.PIPE.

Thank you,
Jia

On Tue, Jul 13, 2010 at 4:58 AM, Thomas Bleicher
<tbleicher@googlemail.com>wrote:

> Jia
>
> Comments are below
>
> On Tue, Jul 13, 2010 at 6:37 AM, Jia Hu <hujia06@gmail.com> wrote:
> > Hello:
> >
> > I  made a simplified python code as bellow.
> >
> > #!/usr/bin/python
> > import subprocess
> > fileHandle = open ('final.txt', 'w')
> > fileHandle.write ('%s %s %s \n' % (12,25,89))
> > fileHandle.close()
> > # valueIll = open ('final.txt', 'a')
> > creBlinds = subprocess.Popen("genblinds %s %s %d %d %d %d %d \
> >           | xform -rz -90 -t 2 2 2 >> final.txt " % ('white', 'VBlinds',
> \
> >           0.03, 2, 3, 15, 30), shell=True)
> > fileHandle .close()
> > fileHandle = open ('final.txt', 'a')
> > fileHandle.write ('%s %s %s \n' % (52,86,506))
> > fileHandle.close()
> >
> > What I expect is the text generated by "Gneblinds" are located between
> '12
> > 25 89" and "52 86 506". But I find the text in the second line is (52 86
> > 506) and the following text is generated by "genblinds". Could someone
> give
> > me some advice  to fix this problem?
>
> You have two processes accessing the same file in a very short time.
> Due to some caching that's controlled by the OS you can't guarantee
> that the access happens in the right order. The best way to solve this
> is to use Python to do all the writing:
>
> #!/usr/bin/python
> import subprocess
> fileHandle = open ('final.txt', 'w')
> fileHandle.write ("%s %s %s \n" % (12,25,89))
>
> ## create gensky command
> cmd = "genblinds %s %s %d %d %d %d %d | xform -rz -90 -t 2 2 2 " %
> ('white', 'VBlinds', 0.03, 2, 3, 15, 30)
>
> ## execute in subprocess and read output of gensky command
> output = subprocess.Popen(cmd.split(), stdout=PIPE,
> shell=True).communicate()[0]



>
> ## now write to file
> fileHandle.write(output + "\n")
>
> fileHandle.write ('%s %s %s \n' % (52,86,506))
> fileHandle.close()
>
>
> This is untested. The pipe to xform might mess things up here but I
> hope it works.
>
> Regards,
> Thomas
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100713/108dd509/attachment.html
From hujia06 at gmail.com  Tue Jul 13 19:28:11 2010
From: hujia06 at gmail.com (Jia Hu)
Date: Tue Jul 13 19:28:08 2010
Subject: [Radiance-general] rtrace
Message-ID: <AANLkTimTGpvDCx6VJE5peDHdvRSuNA6xLWQy-lg7XFJL@mail.gmail.com>

Dear Radiance experts:

I plan to calculate illuminance of an office model by using multiprocessing
(6 processors). I saw some posts discussing about this
problems (e.g.
http://www.rumblestrip.org/interests/light/rtrace-multiprocessing-option-initial-test-results/
).

(1) I have some questions about the usage of rtrace. There are two options
"i", "I" (one lower i and one upper i). I checked the manual page.
but I am still confused with their difference.

(2) What is the option "-h" (in rtrace) used for? I run several times but do
not see any header information.

(3) There are interior blinds installed. If I first use mkillum to make the
window as a secondary light source, and then run rtrace, in this case the
program runs twice to get the illuminance value. Does this way make running
faster than directly using rtrace (only once)?  I input the model from
Revit and thus the window object is connected in the .rad file and therefore
It is not easy to use mkillum (To use mkillum requires either (1) not
to import window from revit and to generate window in Radiance or (2) cut
and paste the window .rad to a separate .rad file?)

(4) For mutiprocessing, besides the option "-n",  is there any other
options I should pay attention to? I use Python script, and should I set
other
options related to Python itself?

As always, thank you for your help.

Jia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100713/a5f9834a/attachment.htm
From hujia06 at gmail.com  Tue Jul 13 19:33:04 2010
From: hujia06 at gmail.com (Jia Hu)
Date: Tue Jul 13 19:33:05 2010
Subject: [Radiance-general] Re: rtrace
In-Reply-To: <AANLkTimTGpvDCx6VJE5peDHdvRSuNA6xLWQy-lg7XFJL@mail.gmail.com>
References: <AANLkTimTGpvDCx6VJE5peDHdvRSuNA6xLWQy-lg7XFJL@mail.gmail.com>
Message-ID: <AANLkTinwJMwdp6HznI78giZsta-WT76PnFsYOYcuidfC@mail.gmail.com>

Sorry I just forgot one question.

In the post
http://www.rumblestrip.org/interests/light/rtrace-multiprocessing-option-initial-test-results/
and
the rtrace manual page, both mentioned "-x" and "-n", What is the
relationship between "-x" and "-n"?

Sorry for so many questions.

Thank you.

Jia

On Tue, Jul 13, 2010 at 10:28 PM, Jia Hu <hujia06@gmail.com> wrote:

> Dear Radiance experts:
>
> I plan to calculate illuminance of an office model by using multiprocessing
> (6 processors). I saw some posts discussing about this
> problems (e.g.
> http://www.rumblestrip.org/interests/light/rtrace-multiprocessing-option-initial-test-results/
> ).
>
> (1) I have some questions about the usage of rtrace. There are two options
> "i", "I" (one lower i and one upper i). I checked the manual page.
> but I am still confused with their difference.
>
> (2) What is the option "-h" (in rtrace) used for? I run several times but
> do not see any header information.
>
> (3) There are interior blinds installed. If I first use mkillum to make the
> window as a secondary light source, and then run rtrace, in this case the
> program runs twice to get the illuminance value. Does this way make running
> faster than directly using rtrace (only once)?  I input the model from
> Revit and thus the window object is connected in the .rad file and
> therefore It is not easy to use mkillum (To use mkillum requires either (1)
> not
> to import window from revit and to generate window in Radiance or (2) cut
> and paste the window .rad to a separate .rad file?)
>
> (4) For mutiprocessing, besides the option "-n",  is there any other
> options I should pay attention to? I use Python script, and should I set
> other
> options related to Python itself?
>
> As always, thank you for your help.
>
> Jia
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100713/ee8bb5f1/attachment.html
From maricanis at gmail.com  Wed Jul 14 01:47:20 2010
From: maricanis at gmail.com (Marija Velickovic)
Date: Wed Jul 14 01:47:39 2010
Subject: [Radiance-general] Prismatic glazings
In-Reply-To: <AANLkTimlBt-sih4IvjyCA4-au6QSqBmGaZ_PHHX8aoLL@mail.gmail.com>
References: <AANLkTimlBt-sih4IvjyCA4-au6QSqBmGaZ_PHHX8aoLL@mail.gmail.com>
Message-ID: <AANLkTinMNj3z6aRAY0-9sEV7BErG5kg5sOBOeNGJ6BpP@mail.gmail.com>

Hi,

I've searched list's archive to find out some data related to prismatic
glazing simulation in Radiance. Here are some related questions.


First question is where to find valid optical and geometrical data related
to prismatic glazings. On various manufacturers' sites, like Siteco or
Inglas, there is only some descriptive info ,without any data useful for
simulations. I've found that some measuremens have been taken by Martin
Moeck few years ago for Siteco glazings. Are results available somewhere?


My idea is to use these glazings in light pipe simulation, on top and/or
bottom of pipe for light redirection, so I would go with pmap approach.
Since prism material calculation is not implemented in pmap, I suppose some
geometrical definition of glazing would be necessary with usage of
dielectric or interface material and then simulation with pmap.
Does anyone has some experience with geometrical definition and how much
accurate it should be (beside examples in Ronald Schregle thesis)?


In Lars mail
http://www.radiance-online.org/pipermail/radiance-general/2009-February/005793.htmlhe
put some questions related to Fresnel diffusers simulation. Lars, have
you succeeded in these simulations? Can you share with us your experience?


Beside pmap, would be rtcontrib be able to calculate light distribution from
light pipes, with new 3-phases method. In that case how to calculate and
define BTDF for complete sun pipe system (collector + pipe + diffuser)?


Lots of questions, and don't know where to go next. So any info would be
useful.

Marija,
De Luminae
www.deluminaelab.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100714/a8bf2cfb/attachment.htm
From tbleicher at googlemail.com  Wed Jul 14 02:14:34 2010
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Wed Jul 14 02:14:43 2010
Subject: [Radiance-general] rtrace
In-Reply-To: <AANLkTimTGpvDCx6VJE5peDHdvRSuNA6xLWQy-lg7XFJL@mail.gmail.com>
References: <AANLkTimTGpvDCx6VJE5peDHdvRSuNA6xLWQy-lg7XFJL@mail.gmail.com>
Message-ID: <AANLkTiliuLc3Bh3WXG_-rSt59fmouF8d-8dufv3bqe6C@mail.gmail.com>

Morning Jia.

On Wed, Jul 14, 2010 at 3:28 AM, Jia Hu <hujia06@gmail.com> wrote:
> Dear Radiance experts:
>
> I plan to calculate illuminance of?an office model by using multiprocessing
> (6 processors). I saw some posts discussing about this
> problems (e.g.
> http://www.rumblestrip.org/interests/light/rtrace-multiprocessing-option-initial-test-results/).
>
> (1) I have some questions about the usage of rtrace.
> There are two options "i", "I" (one lower i and one upper?i).
> I checked the manual page but I am still confused with their difference.

First think about what rtrace really does: It calculates the
brightness of a point on a surface seen from the origin with a given
view direction (the six coords per line you feed into it). The result
is a separate value for the red, green and blue colour component. If
you do number of calculation each with a slightly different angle you
can compose an image out of these r,g,b values. This is what rpict
does.

The brightness of the spot depends obviously on the colour of the wall
and the amount of light that falls onto it. A dark wall will reflect
less of the incident light than a white wall. You can use rcalc to
convert these into to the photopic average ie. how "bright" this spot
appears to the human eye.

So far so good, but in daylight simulation we are traditionally less
interested in the brightness of a surface than in the light that falls
onto it. Therefore rpict and rtrace offer the "-i" (lower case) switch
which will ignore the surface colour on the last bounce and report the
amount of light that falls on a given spot instead of the light that
is reflected off it. An image calculated with this option can be
converted with falsecolor to a colour map or in a contour line image
which shows the Lux levels on any given surface.

What now if you want to calculate the incident light on a surface when
there is no physical surface that would show in an image (like a
theoretical workplane)? This is what the "-I" (upper case) option
accomplishes: In addition to reporting the irradiance/illuminance it
also adds a virtual plane at the point of your origin and flips around
the origin and direction.

Take for example an origin of (0,0,0.75) and a direction of (0,0,1)
for up which calculates the horizontal illuminance at 750mm. With "-i"
rtrace would look from (0,0,0.75)  straight up to the ceiling and
calculate the light falling onto the spot at (0,0) on the ceiling.
With "-I" rtrace creates a virtual surface at 750mm with a surface
normal of (0,0,1) (=horizontal). Then it places the origin at
(0,0,0.75+1) and looks down onto this surface (new view
direction=(0,0-1)). The result is the irradiance on a horizontal
surface calculated at (0,0,0.75). Just what we need for daylight
factors etc.

> (2) What is the option "-h" (in rtrace)?used for? I run several times but do
> not see any header information.

As I mentioned above you can created images pixel by pixel using
rtrace. However, a valid Radiance picture needs a header containing
the resolution and other information. By default rtrace prints this
header before it prints the results of the calculations. (I assume
there are historical reasons for that. I'd expect that most uses of
rtrace switch the header of with "-h".)

You probably have never seen the header because your output is piped
through rcalc which converts it into a bit of number garbage. Just try
the following commands on your bash prompt:

echo "0 0 1 0 0 1" | rtrace scene.oct
echo "0 0 1 0 0 1" | rtrace -h scene.oct
echo "0 0 1 0 0 1" | rtrace -h -w scene.oct

Substitute "scene.oct" with any octree you have around. The difference
between the first two should be obvious. The last command uses "-w" to
switch of the warning about "no light sources found", too. That will
only be printed if you have no sun in your scene, though.

> (3) There?are interior?blinds installed. If I first use mkillum to make the
> window as a secondary light source, and then run rtrace, in this case?the
> program?runs twice to get the illuminance value.?Does?this way?make running
> faster than directly using rtrace (only once)?? I input the model?from
> Revit and thus the window object is connected in the .rad file and therefore
> It is not easy to use mkillum (To use mkillum requires either (1) not
> to import window from revit and to generate window?in Radiance or (2) cut
> and paste the window .rad to a separate .rad file?)

mkillum can help you saving time by splitting the calculation in one
part for the exterior (until the light reaches the window) and one for
the interior. If your exterior is fairly simple there is little gain
from this extra step.

You will also find it difficult to extract the window glass geometry
from your *.rad file if it is produced by Revit. The normals might be
the wrong way around and you may have multiple surfaces instead of
only one as mkillum requires. I think you're better of not to use
mkillum at his point. If you have doubts about the accuracy of your
calculations increase "-ab" by 1 or 2.

> (4) For mutiprocessing, besides the option "-n",??is there any other
> options?I should pay attention?to??I use Python script, and should I set
> other options related to Python itself?

There are no options for Python that would affect Radiance. From Rob's
page you should know that you need to specify an ambient file ("-af"
option) to benefit of the "-n" parallel processing. If you have a
number of options for your geometry you can also just run one rtrace
process for each scene in a separate shell. Then you don't have to
worry about parallel processing options.

Cheers,
Thomas

From tbleicher at googlemail.com  Wed Jul 14 02:31:46 2010
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Wed Jul 14 02:58:20 2010
Subject: [Radiance-general] Re: rtrace
In-Reply-To: <AANLkTinwJMwdp6HznI78giZsta-WT76PnFsYOYcuidfC@mail.gmail.com>
References: <AANLkTimTGpvDCx6VJE5peDHdvRSuNA6xLWQy-lg7XFJL@mail.gmail.com>
	<AANLkTinwJMwdp6HznI78giZsta-WT76PnFsYOYcuidfC@mail.gmail.com>
Message-ID: <AANLkTimjHlVvMO7fywczMYWMxBsB3jZsrnLUZMMe9uUY@mail.gmail.com>

On Wed, Jul 14, 2010 at 3:33 AM, Jia Hu <hujia06@gmail.com> wrote:
> In the post
> http://www.rumblestrip.org/interests/light/rtrace-multiprocessing-option-initial-test-results/?and
> the rtrace manual page, both mentioned "-x" and "-n", What is the
> relationship between "-x" and "-n"?

"-n" simply defines how many processes are used for the calculation. I
think it starts a new process for each new input line. Therefore "-n"
should have no effect if you only have a single point to calculate.
Greg, please correct me if I'm wrong here.

"-x" harks back to the origins or Radiance and more or less defines
when rtrace should print out a batch of calculated results. Imagine
you have a grid of 1000 points and you set "-x" to 50 then your output
would be printed to the screen (or a file) in 20 chunks of 50 values.

I once set "-x" to 1 to have each new point printed and save to my
output file as soon as it was calculated (mostly to get feedback on
the calculation progress). However, that seemed to increase my
rendering time so I dumped that very quickly and reverted to feeding
smaller chucks of coordinates to rtrace instead.

I have to speculate about the connection between "-x" and "-n" here
but i think that if you allow more processes (-n) than points in a
scan line (-x) then rtrace simply can't start enough processes. This
would mean that each point creates it's own process. Greg?


Thomas

From jacobs.axel at gmail.com  Wed Jul 14 03:12:11 2010
From: jacobs.axel at gmail.com (Axel Jacobs)
Date: Wed Jul 14 03:06:51 2010
Subject: [Radiance-general] Re: Prismatic glazings
In-Reply-To: <4c3d8025.01a9640a.0408.51b7SMTPIN_ADDED@mx.google.com>
References: <4c3d8025.01a9640a.0408.51b7SMTPIN_ADDED@mx.google.com>
Message-ID: <4C3D8D7B.6040706@gmail.com>

Hi Marija,

> First question is where to find valid optical and geometrical data related
> to prismatic glazings. On various manufacturers' sites, like Siteco or
> Inglas, there is only some descriptive info ,without any data useful for
> simulations. I've found that some measuremens have been taken by Martin
> Moeck few years ago for Siteco glazings. Are results available somewhere?

I can't answer any of your technical questions, but I spoke to a Siteco
rep a few months ago. I ask her about Radiance cal files for their fancy
glazing. Her reply was that Siteco do have Radiance descriptions of 
their advances glazing products, but are 'very reluctant' to give them 
to anybody.

Her explanation to this was that in order to get that advanced glazing 
working correctly, the optimum orientation of the panels needs to be 
determined based on window orientation and slope. It is quite easy to 
get this wrong, in which case the product would actually reduce the 
daylight rather than improving it. Subsequently, Siteco's product would 
appear to be rubbish.

With this in mind, Siteco do free-of-charge calculations when you decide 
to go with one of their products, making sure that if someone gets it 
wrong, it'll be them.

Cheers

Axel


From grobe at gmx.net  Wed Jul 14 03:09:16 2010
From: grobe at gmx.net (Lars O. Grobe)
Date: Wed Jul 14 03:09:28 2010
Subject: [Radiance-general] Prismatic glazings
In-Reply-To: <AANLkTinMNj3z6aRAY0-9sEV7BErG5kg5sOBOeNGJ6BpP@mail.gmail.com>
References: <AANLkTimlBt-sih4IvjyCA4-au6QSqBmGaZ_PHHX8aoLL@mail.gmail.com>
	<AANLkTinMNj3z6aRAY0-9sEV7BErG5kg5sOBOeNGJ6BpP@mail.gmail.com>
Message-ID: <4C3D8CCC.1010400@gmx.net>

Hi Marija!

> First question is where to find valid optical and geometrical data
> related to prismatic glazings. On various manufacturers' sites, like
> Siteco or Inglas, there is only some descriptive info ,without any data
> useful for simulations. I've found that some measuremens have been taken
> by Martin Moeck few years ago for Siteco glazings. Are results available
> somewhere?

I am not aware of publicly available measurement data. So probably one 
should start with getting some relieable data measured by one of the 
labs offering such service.

> My idea is to use these glazings in light pipe simulation, on top and/or
> bottom of pipe for light redirection, so I would go with pmap approach.
> Since prism material calculation is not implemented in pmap, I suppose
> some geometrical definition of glazing would be necessary with usage of
> dielectric or interface material and then simulation with pmap.
> Does anyone has some experience with geometrical definition and how much
> accurate it should be (beside examples in Ronald Schregle thesis)?

I have not done a validation in the meaning of comparing with analytical 
and measurement results. However this is one of the core use cases for 
the pmap extension. The pmap approach would be by doing an accurate 
geometrical description and have mkpmap do the forward tracing. As far 
as I understand you are interested in the angular-dependent reflectance 
of the prism sheet in you case, so maybe using a good fit to measurement 
data would also be an option (in that case with "classic" Radiance).

> he put some questions related to Fresnel diffusers simulation. Lars,
> have you succeeded in these simulations? Can you share with us your
> experience?

You can do all this, but be aware that using the pmap means quite a lot 
of fine-tuning. I have modeled light ducts with prism sheets, and got 
some result, but as I said I have not been able to validate it yet 
against measured data. In my opinion doing such comparisions is the 
critical task...

Cheers, Lars.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 3740 bytes
Desc: S/MIME Cryptographic Signature
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20100714/54e10314/smime.bin
From hujia06 at gmail.com  Wed Jul 14 10:19:34 2010
From: hujia06 at gmail.com (Jia Hu)
Date: Wed Jul 14 10:19:33 2010
Subject: [Radiance-general] rtrace
In-Reply-To: <AANLkTiliuLc3Bh3WXG_-rSt59fmouF8d-8dufv3bqe6C@mail.gmail.com>
References: <AANLkTimTGpvDCx6VJE5peDHdvRSuNA6xLWQy-lg7XFJL@mail.gmail.com>
	<AANLkTiliuLc3Bh3WXG_-rSt59fmouF8d-8dufv3bqe6C@mail.gmail.com>
Message-ID: <AANLkTimtS5hak6YUFoKd5RyRj3O96BMTlWcOXWWLVQjz@mail.gmail.com>

Thank you very much for your elaboration. The more I learn it, the more I am
attracted by its amazing power.

On Wed, Jul 14, 2010 at 5:14 AM, Thomas Bleicher
<tbleicher@googlemail.com>wrote:

>
> Take for example an origin of (0,0,0.75) and a direction of (0,0,1)
> for up which calculates the horizontal illuminance at 750mm. With "-i"
> rtrace would look from (0,0,0.75)  straight up to the ceiling and
> calculate the light falling onto the spot at (0,0) on the ceiling.
> With "-I" rtrace creates a virtual surface at 750mm with a surface
> normal of (0,0,1) (=horizontal). Then it places the origin at
> (0,0,0.75+1) and looks down onto this surface (new view
> direction=(0,0-1)). The result is the irradiance on a horizontal
> surface calculated at (0,0,0.75). Just what we need for daylight
> factors etc.
>
> You give me a very detailed explanation. Now, my understanding is that
for "-i", it actually measures the incident light of the intersection point
of a
physical surface and line along the view direction (in this example, "-i"
makes rtrace calculate the incident light at spot in the ceiling ,say,
(0 0 3.5).) while, "I" is used to calculate the incident light of the
origin.


> > (2) What is the option "-h" (in rtrace) used for? I run several times but
> do
> > not see any header information.
>
> As I mentioned above you can created images pixel by pixel using
> rtrace. However, a valid Radiance picture needs a header containing
> the resolution and other information. By default rtrace prints this
> header before it prints the results of the calculations. (I assume
> there are historical reasons for that. I'd expect that most uses of
> rtrace switch the header of with "-h".)
>
I see now, thanks,

>
> You probably have never seen the header because your output is piped
> through rcalc which converts it into a bit of number garbage. Just try
> the following commands on your bash prompt:
>
> echo "0 0 1 0 0 1" | rtrace scene.oct
> echo "0 0 1 0 0 1" | rtrace -h scene.oct
> echo "0 0 1 0 0 1" | rtrace -h -w scene.oct
>
> Substitute "scene.oct" with any octree you have around. The difference
> between the first two should be obvious. The last command uses "-w" to
> switch of the warning about "no light sources found", too. That will
> only be printed if you have no sun in your scene, though.
>
> > (3) There are interior blinds installed. If I first use mkillum to make
> the
> > window as a secondary light source, and then run rtrace, in this case the
> > program runs twice to get the illuminance value. Does this way make
> running
> > faster than directly using rtrace (only once)?  I input the model from
> > Revit and thus the window object is connected in the .rad file and
> therefore
> > It is not easy to use mkillum (To use mkillum requires either (1) not
> > to import window from revit and to generate window in Radiance or (2) cut
> > and paste the window .rad to a separate .rad file?)
>
> mkillum can help you saving time by splitting the calculation in one
> part for the exterior (until the light reaches the window) and one for
> the interior. If your exterior is fairly simple there is little gain
> from this extra step.
>
> You will also find it difficult to extract the window glass geometry
> from your *.rad file if it is produced by Revit. The normals might be
> the wrong way around and you may have multiple surfaces instead of
> only one as mkillum requires. I think you're better of not to use
> mkillum at his point. If you have doubts about the accuracy of your
> calculations increase "-ab" by 1 or 2.
>
Yes, it is difficult to extract the window geometry.

>
> > (4) For mutiprocessing, besides the option "-n",  is there any other
> > options I should pay attention to? I use Python script, and should I set
> > other options related to Python itself?
>
> There are no options for Python that would affect Radiance. From Rob's
> page you should know that you need to specify an ambient file ("-af"
> option) to benefit of the "-n" parallel processing. If you have a
> number of options for your geometry you can also just run one rtrace
> process for each scene in a separate shell. Then you don't have to
> worry about parallel processing options.
>
> For my understanding, ambient file is just like a shared ambient caching
to let all the processors access the file and make interpolation of indirect
calculation.
For the same scene with different sky conditions (diffuse and
direct irradation),
if I calculate illuminance at only one point under each sky condition,
the ambient file seems not to be necessary for parellel processing because
the caching values are different for each processor under different sky
condition,
It is no need to share the ambient caching, is that right? By the way,
should I
just specify a name of ambient file at the beginning ? The program will
create the
ambient with the specified name automatically ?




> Cheers,
> Thomas
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100714/77d1d90b/attachment.htm
From grobe at gmx.net  Wed Jul 14 10:38:47 2010
From: grobe at gmx.net (Lars O. Grobe)
Date: Wed Jul 14 10:38:48 2010
Subject: [Radiance-general] rtrace
In-Reply-To: <AANLkTimtS5hak6YUFoKd5RyRj3O96BMTlWcOXWWLVQjz@mail.gmail.com>
References: <AANLkTimTGpvDCx6VJE5peDHdvRSuNA6xLWQy-lg7XFJL@mail.gmail.com>	<AANLkTiliuLc3Bh3WXG_-rSt59fmouF8d-8dufv3bqe6C@mail.gmail.com>
	<AANLkTimtS5hak6YUFoKd5RyRj3O96BMTlWcOXWWLVQjz@mail.gmail.com>
Message-ID: <4C3DF627.6010002@gmx.net>

Hi!

> For the same scene with different sky conditions (diffuse and direct
> irradation), if I calculate illuminance at only one point under each
> sky condition, the ambient file seems not to be necessary for
> parellel processing because the caching values are different for each
> processor under different sky condition, It is no need to share the
> ambient caching, is that right? By the way, should I just specify a
> name of ambient file at the beginning ? The program will create the
> ambient with the specified name automatically ?

The amb-file will be created, but you must make sure to delete it if you 
change the scene or the settings used by rtrace so that the ambient 
calculation is started from scratch with valid data reflecting those 
changes.

If you calculate only one illuminance value per sky condition, the 
ambient file does not help at all. However according to what you wrote 
earlier I would rethink the idea to take only one reading. You mentioned 
having blinds. If the sensor is hit by the sun, it will give readings 
several magnitudes higher then a sensor just some centimeters aside, as 
blinds would typically cast very distinct shadows. You would not find 
this in you single reading. To detect such cases, it may be useful to 
have a grid of sensors instead and, beside the illuminance, monitor also 
the deviation of all the sensors at the same sky condition as an 
indicator of how representive you sensor reading is.

Cheers, Lars.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 3740 bytes
Desc: S/MIME Cryptographic Signature
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20100714/c227ae3d/smime.bin
From hujia06 at gmail.com  Wed Jul 14 11:45:16 2010
From: hujia06 at gmail.com (Jia Hu)
Date: Wed Jul 14 11:45:14 2010
Subject: [Radiance-general] rtrace
In-Reply-To: <4C3DF627.6010002@gmx.net>
References: <AANLkTimTGpvDCx6VJE5peDHdvRSuNA6xLWQy-lg7XFJL@mail.gmail.com>
	<AANLkTiliuLc3Bh3WXG_-rSt59fmouF8d-8dufv3bqe6C@mail.gmail.com>
	<AANLkTimtS5hak6YUFoKd5RyRj3O96BMTlWcOXWWLVQjz@mail.gmail.com>
	<4C3DF627.6010002@gmx.net>
Message-ID: <AANLkTime9JdFwTiidNBRwBRalw4VAIMxRrheZ3adAAIP@mail.gmail.com>

Thanks for reminding. As Thomas said, if parellel processing does not affect
the simulation time if only one point is considered, maybe I should run
separate
shell in this case.

On Wed, Jul 14, 2010 at 1:38 PM, Lars O. Grobe <grobe@gmx.net> wrote:

> Hi!
>
>
> For the same scene with different sky conditions (diffuse and direct
>> irradation), if I calculate illuminance at only one point under each
>> sky condition, the ambient file seems not to be necessary for
>> parellel processing because the caching values are different for each
>> processor under different sky condition, It is no need to share the
>> ambient caching, is that right? By the way, should I just specify a
>> name of ambient file at the beginning ? The program will create the
>> ambient with the specified name automatically ?
>>
>
> The amb-file will be created, but you must make sure to delete it if you
> change the scene or the settings used by rtrace so that the ambient
> calculation is started from scratch with valid data reflecting those
> changes.
>
> If you calculate only one illuminance value per sky condition, the ambient
> file does not help at all. However according to what you wrote earlier I
> would rethink the idea to take only one reading. You mentioned having
> blinds. If the sensor is hit by the sun, it will give readings several
> magnitudes higher then a sensor just some centimeters aside, as blinds would
> typically cast very distinct shadows. You would not find this in you single
> reading. To detect such cases, it may be useful to have a grid of sensors
> instead and, beside the illuminance, monitor also the deviation of all the
> sensors at the same sky condition as an indicator of how representive you
> sensor reading is.
>
> Cheers, Lars.
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100714/beab34b7/attachment.htm
From hujia06 at gmail.com  Wed Jul 14 12:12:09 2010
From: hujia06 at gmail.com (Jia Hu)
Date: Wed Jul 14 12:12:07 2010
Subject: [Radiance-general] rtrace
In-Reply-To: <4C3DF627.6010002@gmx.net>
References: <AANLkTimTGpvDCx6VJE5peDHdvRSuNA6xLWQy-lg7XFJL@mail.gmail.com>
	<AANLkTiliuLc3Bh3WXG_-rSt59fmouF8d-8dufv3bqe6C@mail.gmail.com>
	<AANLkTimtS5hak6YUFoKd5RyRj3O96BMTlWcOXWWLVQjz@mail.gmail.com>
	<4C3DF627.6010002@gmx.net>
Message-ID: <AANLkTinzeGjBZw5IqaCvyb4Sn_CjXe5UERa6QImg69e0@mail.gmail.com>

Thanks for reminding. As Parellel process does not work if only one point is
considered?

On Wed, Jul 14, 2010 at 1:38 PM, Lars O. Grobe <grobe@gmx.net> wrote:

> Hi!
>
>
> For the same scene with different sky conditions (diffuse and direct
>> irradation), if I calculate illuminance at only one point under each
>> sky condition, the ambient file seems not to be necessary for
>> parellel processing because the caching values are different for each
>> processor under different sky condition, It is no need to share the
>> ambient caching, is that right? By the way, should I just specify a
>> name of ambient file at the beginning ? The program will create the
>> ambient with the specified name automatically ?
>>
>
> The amb-file will be created, but you must make sure to delete it if you
> change the scene or the settings used by rtrace so that the ambient
> calculation is started from scratch with valid data reflecting those
> changes.
>
> If you calculate only one illuminance value per sky condition, the ambient
> file does not help at all. However according to what you wrote earlier I
> would rethink the idea to take only one reading. You mentioned having
> blinds. If the sensor is hit by the sun, it will give readings several
> magnitudes higher then a sensor just some centimeters aside, as blinds would
> typically cast very distinct shadows. You would not find this in you single
> reading. To detect such cases, it may be useful to have a grid of sensors
> instead and, beside the illuminance, monitor also the deviation of all the
> sensors at the same sky condition as an indicator of how representive you
> sensor reading is.
>
> Cheers, Lars.
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100714/a2a14ef5/attachment.html
From hujia06 at gmail.com  Wed Jul 14 12:13:18 2010
From: hujia06 at gmail.com (Jia Hu)
Date: Wed Jul 14 12:13:19 2010
Subject: [Radiance-general] rtrace
In-Reply-To: <AANLkTinzeGjBZw5IqaCvyb4Sn_CjXe5UERa6QImg69e0@mail.gmail.com>
References: <AANLkTimTGpvDCx6VJE5peDHdvRSuNA6xLWQy-lg7XFJL@mail.gmail.com>
	<AANLkTiliuLc3Bh3WXG_-rSt59fmouF8d-8dufv3bqe6C@mail.gmail.com>
	<AANLkTimtS5hak6YUFoKd5RyRj3O96BMTlWcOXWWLVQjz@mail.gmail.com>
	<4C3DF627.6010002@gmx.net>
	<AANLkTinzeGjBZw5IqaCvyb4Sn_CjXe5UERa6QImg69e0@mail.gmail.com>
Message-ID: <AANLkTil2kMp6fOZfUg3uQTEvXxUlno2mrvHxpGK4lySc@mail.gmail.com>

Please ignore my previous post. I click the wrong button.

On Wed, Jul 14, 2010 at 3:12 PM, Jia Hu <hujia06@gmail.com> wrote:

> Thanks for reminding. As Parellel process does not work if only one point
> is considered?
>
>  On Wed, Jul 14, 2010 at 1:38 PM, Lars O. Grobe <grobe@gmx.net> wrote:
>
>>  Hi!
>>
>>
>> For the same scene with different sky conditions (diffuse and direct
>>> irradation), if I calculate illuminance at only one point under each
>>> sky condition, the ambient file seems not to be necessary for
>>> parellel processing because the caching values are different for each
>>> processor under different sky condition, It is no need to share the
>>> ambient caching, is that right? By the way, should I just specify a
>>> name of ambient file at the beginning ? The program will create the
>>> ambient with the specified name automatically ?
>>>
>>
>> The amb-file will be created, but you must make sure to delete it if you
>> change the scene or the settings used by rtrace so that the ambient
>> calculation is started from scratch with valid data reflecting those
>> changes.
>>
>> If you calculate only one illuminance value per sky condition, the ambient
>> file does not help at all. However according to what you wrote earlier I
>> would rethink the idea to take only one reading. You mentioned having
>> blinds. If the sensor is hit by the sun, it will give readings several
>> magnitudes higher then a sensor just some centimeters aside, as blinds would
>> typically cast very distinct shadows. You would not find this in you single
>> reading. To detect such cases, it may be useful to have a grid of sensors
>> instead and, beside the illuminance, monitor also the deviation of all the
>> sensors at the same sky condition as an indicator of how representive you
>> sensor reading is.
>>
>> Cheers, Lars.
>>
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general@radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100714/08d6267d/attachment.htm
From RFritz at lbl.gov  Wed Jul 14 15:40:36 2010
From: RFritz at lbl.gov (R Fritz)
Date: Wed Jul 14 15:40:53 2010
Subject: [Radiance-general] The Perennial Radiance Public Materials Library
	Question
Message-ID: <i1led4$r7s$1@dough.gmane.org>

Last time we discussed this we didn't have one, right?

I've just reached the !!! stage. If someone else hasn't done it, I am 
going to look into starting a wiki.
-- 
Randolph Fritz ? RFritz@lbl.gov
Environmental Energy Technologies Division ? Lawrence Berkeley Labs



From RFritz at lbl.gov  Wed Jul 14 15:51:32 2010
From: RFritz at lbl.gov (R Fritz)
Date: Wed Jul 14 15:51:42 2010
Subject: [Radiance-general] Re: Radiance Geometry Export to Rhino
References: <humbjk$6c7$1@dough.gmane.org>
	<269E77D7-F0A2-4566-BEB9-A95331E385E9@lmi.net>
Message-ID: <i1lf1k$suq$1@dough.gmane.org>

[A very late note on this]

What I found worked best was:
> rad2mgf file.rad | mgf2inv -vrml >file.vrml

Quite complex geometry came in very satisfactorily and Rhino (Mac WIP, 
v5) imported the resulting VRML without difficulty, creating Rhino 
meshes.

The following note from Greg must also be kept in mind:
> MGF requires that identifiers begin with a letter, and they can't 
> contain spaces.  The rad2mgf program doesn't check to make sure 
> identifiers are legal in MGF, so this is the problem.  You need to 
> rename material and modifier names that don't begin with a letter, or I 
> need to update rad2mgf to fix identifiers.

Thank you, Greg.
-- 
Randolph Fritz ? RFritz@lbl.gov
Environmental Energy Technologies Division ? Lawrence Berkeley Labs



From hujia06 at gmail.com  Wed Jul 14 23:42:16 2010
From: hujia06 at gmail.com (Jia Hu)
Date: Wed Jul 14 23:42:13 2010
Subject: [Radiance-general] ambient parameters in rad program
Message-ID: <AANLkTim7f4jFn4GnOc_qlbhwAIF-hIdFxs7Puisgxtba@mail.gmail.com>

Hello Radiance experts:

I am using RAD program to help visulize and revise my model.  I can not
find out where to specify the -a* parameters in RAD.
In its "view" variable, I can define the view file generated by the "view"
option of rvu.  But for "AMBFILE" variable, it says "the name
of  the  file  where  "ambient" or diffuse interreflection  values  will
be  stored  by  *rpict*  or *rvu.".  *How can I
save those ambient parameters in rpict or rvu in order to be used in
AMBFILEof RAD program? or how can I
define -a* parameters in RAD program except the "view" variable?

As always, Thank you,

Jia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100715/d23a9287/attachment.html
From grobe at gmx.net  Wed Jul 14 23:57:34 2010
From: grobe at gmx.net (Lars O. Grobe)
Date: Wed Jul 14 23:58:09 2010
Subject: [Radiance-general] ambient parameters in rad program
In-Reply-To: <AANLkTim7f4jFn4GnOc_qlbhwAIF-hIdFxs7Puisgxtba@mail.gmail.com>
References: <AANLkTim7f4jFn4GnOc_qlbhwAIF-hIdFxs7Puisgxtba@mail.gmail.com>
Message-ID: <283D6E21-3B3E-4606-A656-BB669F23E74C@gmx.net>

Hi Jia,

rad understands some special variables named after the command they  
affect to pass such options. There used to be a render= setting in the  
rif-file, but now you should be able to pass all rpict options by a  
line such as rpict=-ab 2 -ad 512 -lw 0.002 and so on. Please check the  
manpage for rad again.

Cheers, Lars.

--
Dipl.-Ing. Architect Lars O. Grobe

From hujia06 at gmail.com  Thu Jul 15 00:18:38 2010
From: hujia06 at gmail.com (Jia Hu)
Date: Thu Jul 15 00:18:35 2010
Subject: [Radiance-general] ambient parameters in rad program
In-Reply-To: <283D6E21-3B3E-4606-A656-BB669F23E74C@gmx.net>
References: <AANLkTim7f4jFn4GnOc_qlbhwAIF-hIdFxs7Puisgxtba@mail.gmail.com>
	<283D6E21-3B3E-4606-A656-BB669F23E74C@gmx.net>
Message-ID: <AANLkTinNIJO-raxir4_ZKKykPe6wKUpgTUlVkte5Ajii@mail.gmail.com>

Thank you. I mixed up some variables of this program. AMBFILE is used for
calculation caching instead of storing ambient parameters.

Cheers,
Jia

On Thu, Jul 15, 2010 at 2:57 AM, Lars O. Grobe <grobe@gmx.net> wrote:

> Hi Jia,
>
> rad understands some special variables named after the command they affect
> to pass such options. There used to be a render= setting in the rif-file,
> but now you should be able to pass all rpict options by a line such as
> rpict=-ab 2 -ad 512 -lw 0.002 and so on. Please check the manpage for rad
> again.
>
> Cheers, Lars.
>
> --
> Dipl.-Ing. Architect Lars O. Grobe
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100715/7188ef72/attachment.htm
From mstock at umich.edu  Thu Jul 15 09:39:57 2010
From: mstock at umich.edu (Mark Stock)
Date: Thu Jul 15 09:39:56 2010
Subject: [Radiance-general] Fedora 12+gcc 4.4.4 performance
Message-ID: <Pine.LNX.4.64.1007151227080.748@joust.gpcc.itd.umich.edu>

Radiance folks,

I'd like to share a recent surprising result. Upgrading from gcc 
4.3.2 to 4.4.4 resulted in a ~7-15% performance boost for the 
Radiance benchmark test on my AMD Phenom system. If you have a 
similar software/hardware setup as me, and the ability to upgrade 
your compiler to gcc 4.4.4, I'd strongly suggest doing so. Also, 
if you have the time to run the benchmark, I'd like to add your 
results to the database:

http://markjstock.org/pages/rad_bench.html

My system:
AMD Phenom 9850 (4 core at 2.5 GHz)
Fedora 12, gcc 4.4.4
Radiance 4.0 (April) built with
-O2 -ffast-math -funroll-loops

Fun fact: the two benchmarks vary in difficulty by 26.6x, so we 
can calculate that an 8-core Xeon system from 2008 runs Radiance 
almost 1000x faster than the oldest computer that I've 
benchmarked: a 133MHz K-5 in 1999.

Mark

From hujia06 at gmail.com  Thu Jul 15 12:48:01 2010
From: hujia06 at gmail.com (Jia Hu)
Date: Thu Jul 15 12:47:58 2010
Subject: [Radiance-general] revising geometry
Message-ID: <AANLkTilwA0Btv5QF0O7_GjZQ_h5TkQfvWkh3XsKmA5cm@mail.gmail.com>

Hello:

If I intend to revise the model in Radiance, I need to know the coordinate
so that I can transform or generate new geometry.

My current methods of checking coordinates are
(1) using rvu option "trace" to see the coordinate of the image.
(2) export rad to other software to view the geometry (I saw a recent post
by
Randolph to discuss about "Radiance Geometry Export", but I have not tried)

Is there a better way to show the x, y z axis in the image of Radiance and
easily check the
coordinate? What is your practice of adding or revising geometry in
Radiance?

Thank you for sharing your experience,
Jia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100715/21ecfe2b/attachment.html
From jedev at visarc.com  Thu Jul 15 13:07:40 2010
From: jedev at visarc.com (Jack de Valpine)
Date: Thu Jul 15 13:08:22 2010
Subject: [Radiance-general] revising geometry
In-Reply-To: <AANLkTilwA0Btv5QF0O7_GjZQ_h5TkQfvWkh3XsKmA5cm@mail.gmail.com>
References: <AANLkTilwA0Btv5QF0O7_GjZQ_h5TkQfvWkh3XsKmA5cm@mail.gmail.com>
Message-ID: <4C3F6A8C.6000804@visarc.com>

Hi Jia,

How did you create your geometry? What kinds of changes are you trying 
to make? Depending on the extend of the changes, updates or 
modifications it probably makes much more sense to use a 3D modeling 
application to make these changes and then re-export the geometry to 
Radiance.

Regards,

-Jack de Valpine

-- 
# Jack de Valpine
# president
#
# visarc incorporated
# http://www.visarc.com
#
# channeling technology for superior design and construction



Jia Hu wrote:
> Hello:
>  
> If I intend to revise the model in Radiance, I need to know the 
> coordinate so that I can transform or generate new geometry.
>  
> My current methods of checking coordinates are
> (1) using rvu option "trace" to see the coordinate of the image.
> (2) export rad to other software to view the geometry (I saw a recent 
> post by
> Randolph to discuss about "Radiance Geometry Export", but I have not 
> tried)
>  
> Is there a better way to show the x, y z axis in the image of Radiance 
> and easily check the
> coordinate? What is your practice of adding or revising geometry in 
> Radiance?
>  
> Thank you for sharing your experience,
> Jia
> ------------------------------------------------------------------------
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>   

From hujia06 at gmail.com  Thu Jul 15 13:15:59 2010
From: hujia06 at gmail.com (Jia Hu)
Date: Thu Jul 15 13:15:56 2010
Subject: [Radiance-general] revising geometry
In-Reply-To: <4C3F6A8C.6000804@visarc.com>
References: <AANLkTilwA0Btv5QF0O7_GjZQ_h5TkQfvWkh3XsKmA5cm@mail.gmail.com>
	<4C3F6A8C.6000804@visarc.com>
Message-ID: <AANLkTimq8awsr48-gammiikQaLSjNHPVNVNTU3Xv8H1t@mail.gmail.com>

Hello Jack:

I create the majority part of the geometry in Revit and then export the
geometry to Radiance. In Radiance, I will add some other geometries (not
complicated), such as lighting, blinds , simple furniture and windows.
Another reason I want to know the coordinates is that when I adjust
some view parameters such as the view point I also need to know the
coordinate.

Thank you,

Jia

On Thu, Jul 15, 2010 at 4:07 PM, Jack de Valpine <jedev@visarc.com> wrote:

> Hi Jia,
>
> How did you create your geometry? What kinds of changes are you trying to
> make? Depending on the extend of the changes, updates or modifications it
> probably makes much more sense to use a 3D modeling application to make
> these changes and then re-export the geometry to Radiance.
>
> Regards,
>
> -Jack de Valpine
>
> --
> # Jack de Valpine
> # president
> #
> # visarc incorporated
> # http://www.visarc.com
> #
> # channeling technology for superior design and construction
>
>
>
> Jia Hu wrote:
>
>>  Hello:
>>  If I intend to revise the model in Radiance, I need to know the
>> coordinate so that I can transform or generate new geometry.
>>  My current methods of checking coordinates are
>> (1) using rvu option "trace" to see the coordinate of the image.
>> (2) export rad to other software to view the geometry (I saw a recent post
>> by
>> Randolph to discuss about "Radiance Geometry Export", but I have not
>> tried)
>>  Is there a better way to show the x, y z axis in the image of Radiance
>> and easily check the
>> coordinate? What is your practice of adding or revising geometry in
>> Radiance?
>>  Thank you for sharing your experience,
>> Jia
>> ------------------------------------------------------------------------
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general@radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100715/5ad19070/attachment.htm
From Christopher.Rush at arup.com  Thu Jul 15 13:49:46 2010
From: Christopher.Rush at arup.com (Christopher Rush)
Date: Thu Jul 15 13:54:02 2010
Subject: [Radiance-general] revising geometry
In-Reply-To: <AANLkTimq8awsr48-gammiikQaLSjNHPVNVNTU3Xv8H1t@mail.gmail.com>
References: <AANLkTilwA0Btv5QF0O7_GjZQ_h5TkQfvWkh3XsKmA5cm@mail.gmail.com>
	<4C3F6A8C.6000804@visarc.com>
	<AANLkTimq8awsr48-gammiikQaLSjNHPVNVNTU3Xv8H1t@mail.gmail.com>
Message-ID: <28285BAEA8C0814DBF1B199C876EC5B047930DF0ED@AMXEXC01.global.arup.com>

If you have a rad file of a piece of furniture, with the furniture origin at 0,0,0, but you want to array it within your model, try the following xform command. Check the manpage of xform and adjust parameters as needed. The rad file to define your individual item must be in the same directory. This example makes a 2x3 array with 40x70 unit spacing starting at x,y,z of 500,200,0. Scripting makes this an easy way to vary your furniture or lighting layout. Leave off the ! if you run xform yourself or directly from a script, or keep the initial ! for the following line within a rad file of its own to include with your scene. Use multiple xform commands with only the first "-t x y z" if your added geometry is not a neat and tidy array.

!xform -t 500 200 0 -a 2 -t 40 0 0 -a 3 -t 0 70 0 singlefurniture.rad



From: radiance-general-bounces@radiance-online.org [mailto:radiance-general-bounces@radiance-online.org] On Behalf Of Jia Hu
Sent: Thursday, July 15, 2010 4:16 PM
To: Radiance general discussion
Subject: Re: [Radiance-general] revising geometry

Hello Jack:

I create the majority part of the geometry in Revit and then export the geometry to Radiance. In Radiance, I will add some other geometries (not complicated), such as lighting, blinds , simple furniture and windows. Another reason I want to know the coordinates is that when I adjust some view parameters such as the view point I also need to know the coordinate.

Thank you,

Jia
On Thu, Jul 15, 2010 at 4:07 PM, Jack de Valpine <jedev@visarc.com<mailto:jedev@visarc.com>> wrote:
Hi Jia,

How did you create your geometry? What kinds of changes are you trying to make? Depending on the extend of the changes, updates or modifications it probably makes much more sense to use a 3D modeling application to make these changes and then re-export the geometry to Radiance.

Regards,

-Jack de Valpine

--
# Jack de Valpine
# president
#
# visarc incorporated
# http://www.visarc.com<http://www.visarc.com/>
#
# channeling technology for superior design and construction



Jia Hu wrote:
Hello:
 If I intend to revise the model in Radiance, I need to know the coordinate so that I can transform or generate new geometry.
 My current methods of checking coordinates are
(1) using rvu option "trace" to see the coordinate of the image.
(2) export rad to other software to view the geometry (I saw a recent post by
Randolph to discuss about "Radiance Geometry Export", but I have not tried)
 Is there a better way to show the x, y z axis in the image of Radiance and easily check the
coordinate? What is your practice of adding or revising geometry in Radiance?
 Thank you for sharing your experience,
Jia
------------------------------------------------------------------------

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org<mailto:Radiance-general@radiance-online.org>
http://www.radiance-online.org/mailman/listinfo/radiance-general


_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org<mailto:Radiance-general@radiance-online.org>
http://www.radiance-online.org/mailman/listinfo/radiance-general

____________________________________________________________
Electronic mail messages entering and leaving Arup  business
systems are scanned for acceptability of content and viruses
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100715/47d6a739/attachment-0001.html
From grobe at gmx.net  Thu Jul 15 13:57:12 2010
From: grobe at gmx.net (Lars O. Grobe)
Date: Thu Jul 15 13:57:11 2010
Subject: [Radiance-general] revising geometry
In-Reply-To: <AANLkTimq8awsr48-gammiikQaLSjNHPVNVNTU3Xv8H1t@mail.gmail.com>
References: <AANLkTilwA0Btv5QF0O7_GjZQ_h5TkQfvWkh3XsKmA5cm@mail.gmail.com>	<4C3F6A8C.6000804@visarc.com>
	<AANLkTimq8awsr48-gammiikQaLSjNHPVNVNTU3Xv8H1t@mail.gmail.com>
Message-ID: <4C3F7628.5010105@gmx.net>

Hi Jia,

I have never used Revit, but if it really does not show the model vertex 
coordinates or if it changes them during export, you should still find 
out by wrapping you scene into a cube that you can use as a reference 
coordinate system. Create a simple cube of e.g. 100m x 100m x 100m so 
that all you model is inside, and find the reference point of you model 
(usually you will have some reference point that is known and used for 
the plans). Get the coordinates of the reference point relative to the 
corners of the cube. Then import the scene into Radiance and get the 
bounding cube of the scene (getbbox yourmodel.rad). This should give you 
the coordinates of the cube after import into Radiance, at least unless 
Revit rotated or scaled the model during export. From these you can find 
the reference point's coordinates in the Radiance scene. Still, really 
strange if there is no simple way to keep the coordinates from Revit and 
read them out from the CAD...

Cheers, Lars.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 3740 bytes
Desc: S/MIME Cryptographic Signature
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20100715/10e7f59b/smime.bin
From jacobs.axel at gmail.com  Thu Jul 15 14:08:52 2010
From: jacobs.axel at gmail.com (Axel Jacobs)
Date: Thu Jul 15 14:03:19 2010
Subject: [Radiance-general] Re: revising geometry
In-Reply-To: <4c3f7588.04a8960a.12df.0e97SMTPIN_ADDED@mx.google.com>
References: <4c3f7588.04a8960a.12df.0e97SMTPIN_ADDED@mx.google.com>
Message-ID: <4C3F78E4.6060906@gmail.com>

Hi Jia Hu

> Is there a better way to show the x, y z axis in the image of Radiance and
> easily check the
> coordinate? What is your practice of adding or revising geometry in
> Radiance?

It seems that Radiance's replmarks is exactly what you need. Create your 
model in your favourite CAD package. For all objects that you wish to 
add later, create a triangle and export it, too. Then use replmarks to 
replace all triangle markers with your additional geometry, such as 
blinds. No need to know extract exact co-ordiantes with rvu.

Axel

From hujia06 at gmail.com  Thu Jul 15 14:25:35 2010
From: hujia06 at gmail.com (Jia Hu)
Date: Thu Jul 15 14:25:32 2010
Subject: [Radiance-general] Re: revising geometry
In-Reply-To: <4C3F78E4.6060906@gmail.com>
References: <4c3f7588.04a8960a.12df.0e97SMTPIN_ADDED@mx.google.com>
	<4C3F78E4.6060906@gmail.com>
Message-ID: <AANLkTikserZk3DhEhS6Z7oENlmo2uZThh_wvpH8a8CT4@mail.gmail.com>

Thank you all.   I will try and research all your suggestions.

Cheers,
Jia

On Thu, Jul 15, 2010 at 5:08 PM, Axel Jacobs <jacobs.axel@gmail.com> wrote:

> Hi Jia Hu
>
>
> Is there a better way to show the x, y z axis in the image of Radiance and
>> easily check the
>> coordinate? What is your practice of adding or revising geometry in
>> Radiance?
>>
>
> It seems that Radiance's replmarks is exactly what you need. Create your
> model in your favourite CAD package. For all objects that you wish to add
> later, create a triangle and export it, too. Then use replmarks to replace
> all triangle markers with your additional geometry, such as blinds. No need
> to know extract exact co-ordiantes with rvu.
>
> Axel
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100715/5ad100ed/attachment.html
From RFritz at lbl.gov  Fri Jul 16 15:20:59 2010
From: RFritz at lbl.gov (R Fritz)
Date: Fri Jul 16 15:21:12 2010
Subject: [Radiance-general] Watching the Skies (aka Sky Model Bewilderment)
Message-ID: <i1qm0b$ce2$1@dough.gmane.org>

I have a pile of data from an actual test room, with more coming, and a 
Radiance model under construction. Do people have an opinion as to 
which sky model might best reflect the actual skies of Berkeley, 
California? I've got some reading ahead of me, Perez and Shirley and 
perhaps some CIE documents, but I'm wondering if anyone has perhaps 
some thoughts or cites to share. The test room is, yes, in Berkeley, 
California.

BTW, I did find the discussion of sky modeling on the list in October 
of 2003. (If anyone hasn't seen it before, look for entries titled "Sky 
Definition" in 
<http://www.radiance-online.org/pipermail/radiance-general/2003-October/date.html>.)
-- 


Randolph Fritz ? RFritz@lbl.gov
Environmental Energy Technologies Division ? Lawrence Berkeley Labs



From hujia06 at gmail.com  Fri Jul 16 15:52:09 2010
From: hujia06 at gmail.com (Jia Hu)
Date: Fri Jul 16 15:52:08 2010
Subject: [Radiance-general] Watching the Skies (aka Sky Model 
	Bewilderment)
In-Reply-To: <i1qm0b$ce2$1@dough.gmane.org>
References: <i1qm0b$ce2$1@dough.gmane.org>
Message-ID: <AANLkTimUoyut7LXTW3rGZybvKKMad29mPS1OQLTMyXzz@mail.gmail.com>

Hi Randolph:

I do not know what data you have and your reseasrch aim and thus will talk
about what I know about this issue. I am sure others have better ideas.
Generally, if you have direct and diffuse irradiation data (you can get real
time data from your local weather station, check DOE EnergyPlus program),
you can try Perez model (gendaylit program in Radiance) which determines the
sky type according to the irradation value (see Perez's paper in 1990).

If you use gensky, you have to specify the sky type. On the other hand, you
can also try gensky to find a best sky model fitting your measured data.
When using gensky, it would be better to use measured illuminance values
rather than measure irradiation value. I remember someone mentioned that the
irradiation data required by gensky is only visible range (I saw a post
talking about this)?

Cheers,
Jia


On Fri, Jul 16, 2010 at 6:20 PM, R Fritz <RFritz@lbl.gov> wrote:

> I have a pile of data from an actual test room, with more coming, and a
> Radiance model under construction. Do people have an opinion as to which sky
> model might best reflect the actual skies of Berkeley, California? I've got
> some reading ahead of me, Perez and Shirley and perhaps some CIE documents,
> but I'm wondering if anyone has perhaps some thoughts or cites to share. The
> test room is, yes, in Berkeley, California.
>
> BTW, I did find the discussion of sky modeling on the list in October of
> 2003. (If anyone hasn't seen it before, look for entries titled "Sky
> Definition" in <
> http://www.radiance-online.org/pipermail/radiance-general/2003-October/date.html
> >.)
> --
>
>
> Randolph Fritz ? RFritz@lbl.gov
> Environmental Energy Technologies Division ? Lawrence Berkeley Labs
>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100716/0e4e411a/attachment.htm
From hujia06 at gmail.com  Fri Jul 16 17:25:27 2010
From: hujia06 at gmail.com (Jia Hu)
Date: Fri Jul 16 17:25:25 2010
Subject: [Radiance-general] Watching the Skies (aka Sky Model 
	Bewilderment)
In-Reply-To: <AANLkTimUoyut7LXTW3rGZybvKKMad29mPS1OQLTMyXzz@mail.gmail.com>
References: <i1qm0b$ce2$1@dough.gmane.org>
	<AANLkTimUoyut7LXTW3rGZybvKKMad29mPS1OQLTMyXzz@mail.gmail.com>
Message-ID: <AANLkTimMEwxwoslmNwRjJqiqN3g2dSzUcnYgsCazTzBm@mail.gmail.com>

Hello:

Just add two sources I mentioned:

http://www.radiance-online.org/pipermail/radiance-general/2002-June/000322.html
http://www.radiance-online.org/pipermail/radiance-general/2002-June/000318.html

I do not know the statement in the second one is right or not.

Cheers, Jia



On Fri, Jul 16, 2010 at 6:52 PM, Jia Hu <hujia06@gmail.com> wrote:

> Hi Randolph:
>
> I do not know what data you have and your reseasrch aim and thus will talk
> about what I know about this issue. I am sure others have better ideas.
> Generally, if you have direct and diffuse irradiation data (you can get real
> time data from your local weather station, check DOE EnergyPlus program),
> you can try Perez model (gendaylit program in Radiance) which determines the
> sky type according to the irradation value (see Perez's paper in 1990).
>
> If you use gensky, you have to specify the sky type. On the other hand, you
> can also try gensky to find a best sky model fitting your measured data.
> When using gensky, it would be better to use measured illuminance values
> rather than measure irradiation value. I remember someone mentioned that the
> irradiation data required by gensky is only visible range (I saw a post
> talking about this)?
>
> Cheers,
> Jia
>
>
> On Fri, Jul 16, 2010 at 6:20 PM, R Fritz <RFritz@lbl.gov> wrote:
>
>> I have a pile of data from an actual test room, with more coming, and a
>> Radiance model under construction. Do people have an opinion as to which sky
>> model might best reflect the actual skies of Berkeley, California? I've got
>> some reading ahead of me, Perez and Shirley and perhaps some CIE documents,
>> but I'm wondering if anyone has perhaps some thoughts or cites to share. The
>> test room is, yes, in Berkeley, California.
>>
>> BTW, I did find the discussion of sky modeling on the list in October of
>> 2003. (If anyone hasn't seen it before, look for entries titled "Sky
>> Definition" in <
>> http://www.radiance-online.org/pipermail/radiance-general/2003-October/date.html
>> >.)
>> --
>>
>>
>> Randolph Fritz ? RFritz@lbl.gov
>> Environmental Energy Technologies Division ? Lawrence Berkeley Labs
>>
>>
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general@radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100716/4f6ea2d6/attachment.html
From hujia06 at gmail.com  Fri Jul 16 20:17:48 2010
From: hujia06 at gmail.com (Jia Hu)
Date: Fri Jul 16 20:17:46 2010
Subject: [Radiance-general] ar and aa
Message-ID: <AANLkTikbPYYjhl4cIxUwZ-z7DfsXHAKg5pB65o0xtwrU@mail.gmail.com>

Hello experts:

Is that right doubling the value of "aa" has the same effect as
decreasing the value of "aa" by half?  The minimum distance between sampling
points is the same according to the formula: SceneSize * aa / ar.

Cheer,
Jia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100716/d31f9139/attachment.htm
From gregoryjward at gmail.com  Sun Jul 18 23:00:52 2010
From: gregoryjward at gmail.com (Greg Ward)
Date: Sun Jul 18 23:00:03 2010
Subject: [Radiance-general] revising geometry
In-Reply-To: <AANLkTilwA0Btv5QF0O7_GjZQ_h5TkQfvWkh3XsKmA5cm@mail.gmail.com>
References: <AANLkTilwA0Btv5QF0O7_GjZQ_h5TkQfvWkh3XsKmA5cm@mail.gmail.com>
Message-ID: <5D382F51-7462-4A3D-8D62-373BA7EB639E@lmi.net>

This is a file (coord) included in the ray/obj/lib0 directory of the  
standard distribution:

#
# Test coordinate system
#
# The idea is to include this with an
# object in order to see its orientation
# and size.
#
# Each coordinate axis is one unit long.
#
# The x-axis has a red tip, the y-axis
# has a green tip, and the z-axis has
# a blue tip.
#

void plastic black
0
0
5 .05 .05 .05 .05 .05

void plastic white
0
0
5 .8 .8 .8 .05 .05

void plastic red
0
0
5 .8 .05 .05 .05 .05

void plastic green
0
0
5 .05 .8 .05 .05 .05

void plastic blue
0
0
5 .05 .05 .8 .05 .05

white sphere origin
0
0
4 0 0 0 .15

black cylinder x-axis
0
0
7
         0       0       0
         .8      0       0
         .05

red cone x-arrow
0
0
8
         .75     0       0
         1       0       0
         .15     0

black cylinder y-axis
0
0
7
         0       0       0
         0       .8      0
         .05

green cone y-arrow
0
0
8
         0       .75     0
         0       1       0
         .15     0

black cylinder z-axis
0
0
7
         0       0       0
         0       0       .8
         .05

blue cone z-arrow
0
0
8
         0       0       .75
         0       0       1
         .15     0


---------
-Greg
> From: Jia Hu <hujia06@gmail.com>
> Date: July 15, 2010 12:48:01 PM PDT
>
> Hello:
>
> If I intend to revise the model in Radiance, I need to know the  
> coordinate so that I can transform or generate new geometry.
>
> My current methods of checking coordinates are
> (1) using rvu option "trace" to see the coordinate of the image.
> (2) export rad to other software to view the geometry (I saw a  
> recent post by
> Randolph to discuss about "Radiance Geometry Export", but I have not  
> tried)
>
> Is there a better way to show the x, y z axis in the image of  
> Radiance and easily check the
> coordinate? What is your practice of adding or revising geometry in  
> Radiance?
>
> Thank you for sharing your experience,
> Jia

From gregoryjward at gmail.com  Sun Jul 18 23:14:44 2010
From: gregoryjward at gmail.com (Greg Ward)
Date: Sun Jul 18 23:13:53 2010
Subject: [Radiance-general] Re: rtrace
In-Reply-To: <AANLkTimjHlVvMO7fywczMYWMxBsB3jZsrnLUZMMe9uUY@mail.gmail.com>
References: <AANLkTimTGpvDCx6VJE5peDHdvRSuNA6xLWQy-lg7XFJL@mail.gmail.com>
	<AANLkTinwJMwdp6HznI78giZsta-WT76PnFsYOYcuidfC@mail.gmail.com>
	<AANLkTimjHlVvMO7fywczMYWMxBsB3jZsrnLUZMMe9uUY@mail.gmail.com>
Message-ID: <EBC242AC-90F7-4E17-945E-01F3EFBECC57@lmi.net>

Just back from a week in the woods, and playing catch-up....

> From: Thomas Bleicher <tbleicher@googlemail.com>
> Date: July 14, 2010 2:31:46 AM PDT
>
> I have to speculate about the connection between "-x" and "-n" here
> but i think that if you allow more processes (-n) than points in a
> scan line (-x) then rtrace simply can't start enough processes. This
> would mean that each point creates it's own process. Greg?

This is more or less correct.  What actually happens is that rays are  
sent to multiple processes, but we need to preserve the first-in/first- 
out (FIFO) order of the rays sent to rtrace, which means buffering up  
results on the output side.  Logically, if you have set -x to 5, then  
we need to take 5 ordered input ray origins and directions and run in  
through N processes until we get all 5 results out so we can put them  
back in the same order.  In other words, throwing additional processes  
over the -x setting buys you nothing, because your queue is never  
deeper than this number.  The default of -x 0 (infinite) is the best,  
because it means rtrace can continue to slurp in new rays and buffer  
them indefinitely, outputting ordered results as they become available.

In any case, you aren't likely to see much benefit to the rtrace -n  
option if you are only computing a handful of rays.

Cheers,
-Greg

From gregoryjward at gmail.com  Sun Jul 18 23:21:56 2010
From: gregoryjward at gmail.com (Greg Ward)
Date: Sun Jul 18 23:21:05 2010
Subject: [Radiance-general] Re: Physically-based rendering using OpenGL?
In-Reply-To: <4C3B5967.2040809@aisarquitectura.com>
References: <i1du6h$tj5$1@dough.gmane.org>	<4C3ABA3D.3040105@aisarquitectura.com>
	<i1fi0m$ifl$1@dough.gmane.org>
	<4C3B5967.2040809@aisarquitectura.com>
Message-ID: <1C0BC1CB-3567-4D0F-9722-2C1756AA0AC6@lmi.net>

The basic problem is that you need to have the entire scene  
description available to every process, and GPU's don't work that  
way.  They are optimized for SIMD (single-instruction, multiple-data)  
processing, meaning that you run the same operation on many operands  
simultaneously.  This is great if you are multiplying huge matrices  
together, but not much use in a ray-tracing context.

Even if the GPU were optimized for this problem, much of what goes on  
in Radiance is ray tree evaluation.  It all sort of happens together  
-- you need to trace rays, figure out what to do at surfaces based on  
material properties, evaluate .cal files, share ambient data (reading  
and writing a shared cache) and all sorts of things that would have to  
be completely rethought for a GPU implementation.

-Greg

> From: Ignacio Munarriz <info@aisarquitectura.com>
> Date: July 12, 2010 11:05:27 AM PDT
>
> I'm not aware of any physical simulation of light software using  
> gpu, but probably it would be interesting to externalize ray- 
> geometry intersections in radiance. I think there is already gpu  
> code(as libraries or open source) that makes that intersections.  
> Radiance instances, meshes, memory management ... would be some  
> issues to solve, maybe waiting a bit the ray-geometry intersections  
> will be normalized in gpus and it will be easier to send rays and  
> geometry from radiance to the cards
>
> El 12/07/2010 19:05, R Fritz escribi?:
>> Thank you. That makes it clear that something is possible. But  
>> what? As of version 3.5, Mental Ray (the base of iray) had some  
>> serious limitations in physically based rendering. In Labayrade and  
>> Fontoynont's 2009 CIE 171:2006 testing, it could not, for instance,  
>> simulate a clear sky. Iray is based on Mental Ray 3.8, and it is  
>> possible that some of those problems have been resolved since  
>> version 3.5, but there does not seem to have been any testing  
>> published that says so. Mental Image's iray site doesn't mention  
>> CIE 171. The Luxrender site doesn't mention any testing at all. Are  
>> you aware of any testing that shows accuracy of either of these  
>> tools in the physical simulation of light?
>>
>> Greg, have you looked at this at all?
>>
>> Randolph
>>

From gregoryjward at gmail.com  Sun Jul 18 23:31:17 2010
From: gregoryjward at gmail.com (Greg Ward)
Date: Sun Jul 18 23:30:26 2010
Subject: [Radiance-general] ar and aa
In-Reply-To: <AANLkTikbPYYjhl4cIxUwZ-z7DfsXHAKg5pB65o0xtwrU@mail.gmail.com>
References: <AANLkTikbPYYjhl4cIxUwZ-z7DfsXHAKg5pB65o0xtwrU@mail.gmail.com>
Message-ID: <993B3947-4363-489B-A4E5-1BDE62B6FD95@lmi.net>

I assume you meant to compare "-aa" and "-ar" in your first sentence.   
These are not two variables that affect the same behavior -- not much  
point in that.  Rather, think of the -ar setting as determining a  
scene resolution below which the accuracy of the indirect calculation  
(as determined by the -aa parameter) will start to relax.  If you  
divide your global scene size (the fourth value reported by "getinfo - 
d octree") by the -ar setting, you will get the scene size below which  
the indirect calculation will begin to lose accuracy.

Best,
-Greg

> From: Jia Hu <hujia06@gmail.com>
> Date: July 16, 2010 8:17:48 PM PDT
>
> Hello experts:
>
> Is that right doubling the value of "aa" has the same effect as  
> decreasing the value of "aa" by half?  The minimum distance between  
> sampling points is the same according to the formula: SceneSize *  
> aa / ar.
>
> Cheer,
> Jia

From jm at dmu.ac.uk  Mon Jul 19 08:01:19 2010
From: jm at dmu.ac.uk (John Mardaljevic)
Date: Mon Jul 19 08:00:55 2010
Subject: [Radiance-general] Watching the Skies (aka Sky Model Bewilderment)
Message-ID: <5C445AC0-6932-4A2C-AB38-D4C344685098@dmu.ac.uk>

There are some detailed evaluations and comparisons of sky models in the thesis chapter on sky models here:

http://www.iesd.dmu.ac.uk/~jm/doku.php?id=resources:thesis

Best,

John Mardaljevic

 
From RFritz at lbl.gov  Mon Jul 19 09:04:28 2010
From: RFritz at lbl.gov (R Fritz)
Date: Mon Jul 19 09:04:44 2010
Subject: [Radiance-general] Re: Watching the Skies (aka Sky Model
	Bewilderment)
References: <5C445AC0-6932-4A2C-AB38-D4C344685098@dmu.ac.uk>
Message-ID: <i21t2d$dhl$1@dough.gmane.org>

On 2010-07-19 08:01:19 -0700, John Mardaljevic said:

> There are some detailed evaluations and comparisons of sky models in 
> thethesis chapter on sky models here:
> 
> http://www.iesd.dmu.ac.uk/~jm/doku.php?id=resources:thesis

D'oh! I've even seen them there. Thank you for reminding me.
-- 
Randolph Fritz ? RFritz@lbl.gov
Environmental Energy Technologies Division ? Lawrence Berkeley Labs



From RFritz at lbl.gov  Mon Jul 19 09:08:07 2010
From: RFritz at lbl.gov (R Fritz)
Date: Mon Jul 19 09:10:00 2010
Subject: [Radiance-general] Re: Watching the Skies (aka Sky Model
	Bewilderment)
References: <i1qm0b$ce2$1@dough.gmane.org>
	<AANLkTimUoyut7LXTW3rGZybvKKMad29mPS1OQLTMyXzz@mail.gmail.com>
	<AANLkTimMEwxwoslmNwRjJqiqN3g2dSzUcnYgsCazTzBm@mail.gmail.com>
Message-ID: <i21t96$ebv$1@dough.gmane.org>

Jia, thank you.  Especially thank you for reminding me of EnergyPlus, 
which I hadn't thought of.

Randolph



From hujia06 at gmail.com  Mon Jul 19 09:52:54 2010
From: hujia06 at gmail.com (Jia Hu)
Date: Mon Jul 19 09:52:54 2010
Subject: [Radiance-general] revising geometry
In-Reply-To: <5D382F51-7462-4A3D-8D62-373BA7EB639E@lmi.net>
References: <AANLkTilwA0Btv5QF0O7_GjZQ_h5TkQfvWkh3XsKmA5cm@mail.gmail.com>
	<5D382F51-7462-4A3D-8D62-373BA7EB639E@lmi.net>
Message-ID: <AANLkTilQqO7817MOk-HOrljTOZm3KYczqGVNyZq9fl9l@mail.gmail.com>

Thank you, Greg. It is very useful.

On Mon, Jul 19, 2010 at 2:00 AM, Greg Ward <gregoryjward@gmail.com> wrote:

> This is a file (coord) included in the ray/obj/lib0 directory of the
> standard distribution:
>
> #
> # Test coordinate system
> #
> # The idea is to include this with an
> # object in order to see its orientation
> # and size.
> #
> # Each coordinate axis is one unit long.
> #
> # The x-axis has a red tip, the y-axis
> # has a green tip, and the z-axis has
> # a blue tip.
> #
>
> void plastic black
> 0
> 0
> 5 .05 .05 .05 .05 .05
>
> void plastic white
> 0
> 0
> 5 .8 .8 .8 .05 .05
>
> void plastic red
> 0
> 0
> 5 .8 .05 .05 .05 .05
>
> void plastic green
> 0
> 0
> 5 .05 .8 .05 .05 .05
>
> void plastic blue
> 0
> 0
> 5 .05 .05 .8 .05 .05
>
> white sphere origin
> 0
> 0
> 4 0 0 0 .15
>
> black cylinder x-axis
> 0
> 0
> 7
>        0       0       0
>        .8      0       0
>        .05
>
> red cone x-arrow
> 0
> 0
> 8
>        .75     0       0
>        1       0       0
>        .15     0
>
> black cylinder y-axis
> 0
> 0
> 7
>        0       0       0
>        0       .8      0
>        .05
>
> green cone y-arrow
> 0
> 0
> 8
>        0       .75     0
>        0       1       0
>        .15     0
>
> black cylinder z-axis
> 0
> 0
> 7
>        0       0       0
>        0       0       .8
>        .05
>
> blue cone z-arrow
> 0
> 0
> 8
>        0       0       .75
>        0       0       1
>        .15     0
>
>
> ---------
> -Greg
>
>> From: Jia Hu <hujia06@gmail.com>
>> Date: July 15, 2010 12:48:01 PM PDT
>>
>>
>> Hello:
>>
>> If I intend to revise the model in Radiance, I need to know the coordinate
>> so that I can transform or generate new geometry.
>>
>> My current methods of checking coordinates are
>> (1) using rvu option "trace" to see the coordinate of the image.
>> (2) export rad to other software to view the geometry (I saw a recent post
>> by
>> Randolph to discuss about "Radiance Geometry Export", but I have not
>> tried)
>>
>> Is there a better way to show the x, y z axis in the image of Radiance and
>> easily check the
>> coordinate? What is your practice of adding or revising geometry in
>> Radiance?
>>
>> Thank you for sharing your experience,
>> Jia
>>
>
>  _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100719/3db2e384/attachment.html
From hujia06 at gmail.com  Mon Jul 19 10:47:57 2010
From: hujia06 at gmail.com (Jia Hu)
Date: Mon Jul 19 10:47:55 2010
Subject: [Radiance-general] ar and aa
In-Reply-To: <993B3947-4363-489B-A4E5-1BDE62B6FD95@lmi.net>
References: <AANLkTikbPYYjhl4cIxUwZ-z7DfsXHAKg5pB65o0xtwrU@mail.gmail.com>
	<993B3947-4363-489B-A4E5-1BDE62B6FD95@lmi.net>
Message-ID: <AANLkTilwabHRsAAdvNm5nFcPcEhrMkPrz13oWRC50HdX@mail.gmail.com>

Sorry for the typo, I meant to compare "-ar" and "-aa".   I can understand
your explanation as to -ar and -aa.

The book and some online materials also discussed about the meaning of -ar
and -aa. And they seem to explain it from a different perspective. For my
understanding of those statements, the interpolation will always happen when
the distance between two points is less than minimum spacing distance
(sceneSize * aa /ar). When the distance between two points is larger than
the minmum spacing distance, interpolation may happen if the point is within
the "radius of validity" of another point. In other words, the minimum
"radius of validity" is sceneSize *aa /ar?

According to Greg's explanation, when the point falls within SceneSize / ar,
the accuracy starts to relax. Can I say that when the error gets its
maximum, -aa, when the point falls within the minimum spacing distance
(SceneSize *aa /ar)?   I know there must be something wrong with my
understanding about this issue. But I can not find where the problem is.
The book Rendering with Radiance says "  -ar parameter acts as a limiting
device and If you are already running up against the -ar limit, increasing
the setting will result in a higher density of sampling. If the limit has
not been reached, then increasing -ar should have no effect." I also have
difficulty in understanding the term "limiting device".

Thank you for help.

Jia Hu
On Mon, Jul 19, 2010 at 2:31 AM, Greg Ward <gregoryjward@gmail.com> wrote:

> I assume you meant to compare "-aa" and "-ar" in your first sentence.
>  These are not two variables that affect the same behavior -- not much point
> in that.  Rather, think of the -ar setting as determining a scene resolution
> below which the accuracy of the indirect calculation (as determined by the
> -aa parameter) will start to relax.  If you divide your global scene size
> (the fourth value reported by "getinfo -d octree") by the -ar setting, you
> will get the scene size below which the indirect calculation will begin to
> lose accuracy.
>
> Best,
> -Greg
>
> From: Jia Hu <hujia06@gmail.com>
>> Date: July 16, 2010 8:17:48 PM PDT
>>
>>
>> Hello experts:
>>
>> Is that right doubling the value of "aa" has the same effect as decreasing
>> the value of "aa" by half?  The minimum distance between sampling points is
>> the same according to the formula: SceneSize * aa / ar.
>>
>> Cheer,
>> Jia
>>
>
>  _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100719/2fb79030/attachment.htm
From hujia06 at gmail.com  Mon Jul 19 11:14:20 2010
From: hujia06 at gmail.com (Jia Hu)
Date: Mon Jul 19 11:14:15 2010
Subject: [Radiance-general] Re: rtrace
In-Reply-To: <EBC242AC-90F7-4E17-945E-01F3EFBECC57@lmi.net>
References: <AANLkTimTGpvDCx6VJE5peDHdvRSuNA6xLWQy-lg7XFJL@mail.gmail.com>
	<AANLkTinwJMwdp6HznI78giZsta-WT76PnFsYOYcuidfC@mail.gmail.com>
	<AANLkTimjHlVvMO7fywczMYWMxBsB3jZsrnLUZMMe9uUY@mail.gmail.com>
	<EBC242AC-90F7-4E17-945E-01F3EFBECC57@lmi.net>
Message-ID: <AANLkTilxUH1nT0aUFanYVZkMTP6bCL9JUsuUhYmeDfRL@mail.gmail.com>

Hello:

If I set -x to 0, and -y to 1, does that mean the program will not exit
until it finishes all calculations for all points?
If I set -x to 5 and -y to 1, does that mean the program will exit after the
calculation for five points (only one line) is finished? In this case, I
have to run this program again to continue the calculation for the left
points?

Generally, if I set -x to 0 and want the program finishes all calculation at
one time, do I need to set -y?

Thanks,

On Mon, Jul 19, 2010 at 2:14 AM, Greg Ward <gregoryjward@gmail.com> wrote:

> Just back from a week in the woods, and playing catch-up....
>
> From: Thomas Bleicher <tbleicher@googlemail.com>
>> Date: July 14, 2010 2:31:46 AM PDT
>>
>>
>> I have to speculate about the connection between "-x" and "-n" here
>> but i think that if you allow more processes (-n) than points in a
>> scan line (-x) then rtrace simply can't start enough processes. This
>> would mean that each point creates it's own process. Greg?
>>
>
> This is more or less correct.  What actually happens is that rays are sent
> to multiple processes, but we need to preserve the first-in/first-out (FIFO)
> order of the rays sent to rtrace, which means buffering up results on the
> output side.  Logically, if you have set -x to 5, then we need to take 5
> ordered input ray origins and directions and run in through N processes
> until we get all 5 results out so we can put them back in the same order.
>  In other words, throwing additional processes over the -x setting buys you
> nothing, because your queue is never deeper than this number.  The default
> of -x 0 (infinite) is the best, because it means rtrace can continue to
> slurp in new rays and buffer them indefinitely, outputting ordered results
> as they become available.
>
> In any case, you aren't likely to see much benefit to the rtrace -n option
> if you are only computing a handful of rays.
>
> Cheers,
> -Greg
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100719/425c931e/attachment.html
From grobe at gmx.net  Tue Jul 20 02:07:18 2010
From: grobe at gmx.net (Lars O. Grobe)
Date: Tue Jul 20 02:07:20 2010
Subject: [Radiance-general] mkillum-generated distribution files
Message-ID: <4C456746.90600@gmx.net>

Hi,

I am trying to understand the output of mkillum. The dat-files are 
written in Radiance's standard format. So I should be able to understand 
the header. However I am not really sure whether I am doing the right 
thing here. Take an example:
--
2
1.041667 0.041667 13
0.000000 6.283185 39

  1.504918e+00 1.530097e+00 1.525389e+00 1.501599e+00 1.505246e+00
  1.461270e+00 1.463038e+00 1.489136e+00 1.481565e+00 1.451201e+00
  1.374334e+00 1.296027e+00 1.410817e+00 1.343876e+00 1.477319e+00
  1.365996e+00 1.366200e+00 1.397315e+00 1.407394e+00 1.484092e+00
  1.482776e+00 1.570183e+00 1.525340e+00 1.572320e+00 1.561935e+00
  1.576046e+00 1.486079e+00 1.629394e+00 1.528797e+00 1.621227e+00
[...]
--
My understanding:

1) I have a two-dimensional array (line 1) of 13 rows and 39 columns 
(lines 2, 3), right?

2) The rows are counted down from 1 to 0 (the 0.041667 probably is some 
error to avoid 0), thus in steps of 1/13=-0.0769 .

3) The columns are counted up from 0 to 2*pi in steps of 6.2832/39=0.1611 .

4) This means that the columns represent the "azimuth angle" (the angle 
in the plane of the illum surface) from 0 to 2*pi radians, the rows are 
related to.... what? If it were the elevation angle (the angle to the 
surface normal of the mkillum surface), why is it not counted beyond 1 
radians? Or what else is it?

In illum.cal which is referred to by the illum-modifier generated by 
mkillum, I find these comments:
--
For the hemispherical case, A1-A9 are the unit vectors for the
hemisphere's coordinate system:

il_alth         - Altitude (1 to 0) for hemispherical coordinates
il_azih         - Azimuth (0 to 2*PI) for hemisphere
--
It would be great if anyone could shed some light onto this...

Cheers, Lars.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 3740 bytes
Desc: S/MIME Cryptographic Signature
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20100720/03c46c95/smime.bin
From tbleicher at googlemail.com  Tue Jul 20 02:31:18 2010
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Tue Jul 20 02:31:23 2010
Subject: [Radiance-general] Re: rtrace
In-Reply-To: <AANLkTilxUH1nT0aUFanYVZkMTP6bCL9JUsuUhYmeDfRL@mail.gmail.com>
References: <AANLkTimTGpvDCx6VJE5peDHdvRSuNA6xLWQy-lg7XFJL@mail.gmail.com>
	<AANLkTinwJMwdp6HznI78giZsta-WT76PnFsYOYcuidfC@mail.gmail.com>
	<AANLkTimjHlVvMO7fywczMYWMxBsB3jZsrnLUZMMe9uUY@mail.gmail.com>
	<EBC242AC-90F7-4E17-945E-01F3EFBECC57@lmi.net>
	<AANLkTilxUH1nT0aUFanYVZkMTP6bCL9JUsuUhYmeDfRL@mail.gmail.com>
Message-ID: <AANLkTilmJpdwK3rs_zbT67fPH_-k7Kg_vP9bDt9FEp3V@mail.gmail.com>

> If I set -x?to 0, and -y to 1, does that mean the?program will not exit
> until it finishes all calculations for all points?

Just try it: use a small octree and a file with point and direction input and do

rtrace -w -ab 1 -x 0 -y 1 scene.oct < input.pts
rtrace -w -ab 1 -x 0 -y 1 scene.oct < input.pts
rtrace -w -ab 1 -x 5 -y 1 scene.oct < input.pts

The first line is the default for rtrace (-x an -y 0).

> If I set -x to 5 and -y to 1, does that mean the program will exit after the
> calculation?for five points (only one line)?is finished? In this case, I
> have to run this program?again to continue the calculation for the left
> points?

Yes but you have to remove the first 5 input lines from your points
file or rtrace will calculate the first 5 points again.

> Generally, if I set -x to 0 and want the program finishes all calculation at
> one time, do I need to set -y?

You don't have to set -x or -y to 0. The default for rtrace is to
calculate all the lines in the input file. But if you have a file with
1000 points you will not see the results before the last of these
points has been calculated. Therefore you may want to split your input
in smaller files of say 100 lines each or set "-x" to 100. Then rtrace
will write out the results for every group of 100 lines. Don't set
"-x" too low, however, or you will notice a slow down of the
calculation.

Thomas

From reinhart at gsd.harvard.edu  Tue Jul 20 06:05:50 2010
From: reinhart at gsd.harvard.edu (Reinhart, Christoph)
Date: Tue Jul 20 06:06:34 2010
Subject: [Radiance-general] ar and aa
In-Reply-To: <AANLkTilwabHRsAAdvNm5nFcPcEhrMkPrz13oWRC50HdX@mail.gmail.com>
References: <AANLkTikbPYYjhl4cIxUwZ-z7DfsXHAKg5pB65o0xtwrU@mail.gmail.com><993B3947-4363-489B-A4E5-1BDE62B6FD95@lmi.net>
	<AANLkTilwabHRsAAdvNm5nFcPcEhrMkPrz13oWRC50HdX@mail.gmail.com>
Message-ID: <C5E1527F129BF545A250B5AD0B0C26EF07654670@ENTWEXMB0000000.university.harvard.edu>

I share Jia's confusion. Greg, I remember that we had asked you the same
question during the Radiance workshop last year but I still do not get
it? Could you explain the relationship between aa and ar one more time?

 

Christoph

 

From: radiance-general-bounces@radiance-online.org
[mailto:radiance-general-bounces@radiance-online.org] On Behalf Of Jia
Hu
Sent: Monday, July 19, 2010 1:48 PM
To: Radiance general discussion
Subject: Re: [Radiance-general] ar and aa

 

Sorry for the typo, I meant to compare "-ar" and "-aa".   I can
understand your explanation as to -ar and -aa.

 

The book and some online materials also discussed about the meaning of
-ar and -aa. And they seem to explain it from a different perspective.
For my understanding of those statements, the interpolation will always
happen when the distance between two points is less than minimum spacing
distance (sceneSize * aa /ar). When the distance between two points is
larger than the minmum spacing distance, interpolation may happen if the
point is within the "radius of validity" of another point. In other
words, the minimum "radius of validity" is sceneSize *aa /ar? 

 

According to Greg's explanation, when the point falls within SceneSize /
ar, the accuracy starts to relax. Can I say that when the error gets its
maximum, -aa, when the point falls within the minimum spacing distance
(SceneSize *aa /ar)?   I know there must be something wrong with my
understanding about this issue. But I can not find where the problem is.


The book Rendering with Radiance says "  -ar parameter acts as a
limiting device and If you are already running up against the -ar limit,
increasing the setting will result in a higher density of sampling. If
the limit has not been reached, then increasing -ar should have no
effect." I also have difficulty in understanding the term "limiting
device".

 

Thank you for help.

 

Jia Hu

On Mon, Jul 19, 2010 at 2:31 AM, Greg Ward <gregoryjward@gmail.com>
wrote:

I assume you meant to compare "-aa" and "-ar" in your first sentence.
These are not two variables that affect the same behavior -- not much
point in that.  Rather, think of the -ar setting as determining a scene
resolution below which the accuracy of the indirect calculation (as
determined by the -aa parameter) will start to relax.  If you divide
your global scene size (the fourth value reported by "getinfo -d
octree") by the -ar setting, you will get the scene size below which the
indirect calculation will begin to lose accuracy.

Best,
-Greg

From: Jia Hu <hujia06@gmail.com>
Date: July 16, 2010 8:17:48 PM PDT 



Hello experts:

Is that right doubling the value of "aa" has the same effect as
decreasing the value of "aa" by half?  The minimum distance between
sampling points is the same according to the formula: SceneSize * aa /
ar.

Cheer,
Jia

 

_______________________________________________
Radiance-general mailing list
Radiance-general@radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100720/3698519d/attachment.html
From hujia06 at gmail.com  Tue Jul 20 09:28:35 2010
From: hujia06 at gmail.com (Jia Hu)
Date: Tue Jul 20 09:28:33 2010
Subject: [Radiance-general] Re: rtrace
In-Reply-To: <AANLkTilmJpdwK3rs_zbT67fPH_-k7Kg_vP9bDt9FEp3V@mail.gmail.com>
References: <AANLkTimTGpvDCx6VJE5peDHdvRSuNA6xLWQy-lg7XFJL@mail.gmail.com>
	<AANLkTinwJMwdp6HznI78giZsta-WT76PnFsYOYcuidfC@mail.gmail.com>
	<AANLkTimjHlVvMO7fywczMYWMxBsB3jZsrnLUZMMe9uUY@mail.gmail.com>
	<EBC242AC-90F7-4E17-945E-01F3EFBECC57@lmi.net>
	<AANLkTilxUH1nT0aUFanYVZkMTP6bCL9JUsuUhYmeDfRL@mail.gmail.com>
	<AANLkTilmJpdwK3rs_zbT67fPH_-k7Kg_vP9bDt9FEp3V@mail.gmail.com>
Message-ID: <AANLkTinHKf07lfKgMLKJq9Fee9QDZppqvkgtsnNFBvTI@mail.gmail.com>

I see, thanks, Thomas.

On Tue, Jul 20, 2010 at 5:31 AM, Thomas Bleicher
<tbleicher@googlemail.com>wrote:

> > If I set -x to 0, and -y to 1, does that mean the program will not exit
> > until it finishes all calculations for all points?
>
> Just try it: use a small octree and a file with point and direction input
> and do
>
> rtrace -w -ab 1 -x 0 -y 1 scene.oct < input.pts
> rtrace -w -ab 1 -x 0 -y 1 scene.oct < input.pts
> rtrace -w -ab 1 -x 5 -y 1 scene.oct < input.pts
>
> The first line is the default for rtrace (-x an -y 0).
>
> > If I set -x to 5 and -y to 1, does that mean the program will exit after
> the
> > calculation for five points (only one line) is finished? In this case, I
> > have to run this program again to continue the calculation for the left
> > points?
>
> Yes but you have to remove the first 5 input lines from your points
> file or rtrace will calculate the first 5 points again.
>
> > Generally, if I set -x to 0 and want the program finishes all calculation
> at
> > one time, do I need to set -y?
>
> You don't have to set -x or -y to 0. The default for rtrace is to
> calculate all the lines in the input file. But if you have a file with
> 1000 points you will not see the results before the last of these
> points has been calculated. Therefore you may want to split your input
> in smaller files of say 100 lines each or set "-x" to 100. Then rtrace
> will write out the results for every group of 100 lines. Don't set
> "-x" too low, however, or you will notice a slow down of the
> calculation.
>
> Thomas
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100720/f89653d4/attachment.htm
From hujia06 at gmail.com  Tue Jul 20 10:23:31 2010
From: hujia06 at gmail.com (Jia Hu)
Date: Tue Jul 20 10:23:28 2010
Subject: [Radiance-general] illum examples
Message-ID: <AANLkTinc79Tk-bSbQw0YR6kYmiM_xH4NPZ48AJSpi-cg@mail.gmail.com>

Hello experts:

 Even if mkillum is used for window, the shadow ray in a point will be still
sent to sun (just pass through the window) to calculate the contribution of
sun (direct calculation). The reason is "illum surface do not interfere with
the shadow testing of others, non illumn sources" (Page 572 in the book
Rendering with Radiance).

In Page 568-569 of the book, a decorative luminaries is illustrated to show
why to use illum. One reason of using illum is that the shadow ray in
a point may hit the fixture of the lamp and get a shadow which is incorrect
(it is incorrect because other parts of the lamp may illuminate the
point). Using illum will make the lamp a uniform radiator and therefore a
shadow ray hit the illum will return a nonzero value.

In the above first paragraph , as the book said, the shadow ray (that
hitting the sun) will not be interfered with by the illum (window, in this
example) . But for the decorative luminaries example (in the second
paragraph), My problem is that I do not know which of the following is right
as to the ways of treatment of Shadow ray test of this example.

(1)  In this way, we do not need to consider the shadow ray test of the
lamp. In orther words, we can think of the new illum enclosing the lamp as
a special light, and there is no light (lamp) inside the illum, and
therefore, only one shadow ray is sent to the illum and NO shadow ray is
sent to the lamp (inside illum)

(2) It is similar with the example (window illum) in the above first
paragraph,  In this case, one shadow ray is sent to hit the lamp and one
shadow ray is sent to hit the illum. Both of them will calculate the direct
part of light source. The illum just shows the luminance distribution of
lights reflected by the lamp fixture rather than lights directly from lamp.

Thank you,

Jia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100720/263c8680/attachment.html
From gregoryjward at gmail.com  Tue Jul 20 11:53:40 2010
From: gregoryjward at gmail.com (Greg Ward)
Date: Tue Jul 20 11:53:44 2010
Subject: [Radiance-general] ar and aa
In-Reply-To: <AANLkTilwabHRsAAdvNm5nFcPcEhrMkPrz13oWRC50HdX@mail.gmail.com>
References: <AANLkTikbPYYjhl4cIxUwZ-z7DfsXHAKg5pB65o0xtwrU@mail.gmail.com>
	<993B3947-4363-489B-A4E5-1BDE62B6FD95@lmi.net>
	<AANLkTilwabHRsAAdvNm5nFcPcEhrMkPrz13oWRC50HdX@mail.gmail.com>
Message-ID: <7C7D9DB2-94ED-41C7-BCD8-B7EA2A5112C8@lmi.net>

This is just getting so confused (and confusing).  By itself, the -aa  
parameter AFFECTS the distance between ambient values, but it does not  
dictate them.  The spacing actually depends on how close nearby  
geometry is.  If there is nothing nearby, then ambient values may be  
spaced very far apart.  You really need to go back to my original  
paper and understand what is going on with the interpolation:

	http://radsite.lbl.gov/radiance/papers/sg88/paper.html

The -ar setting gets used with -aa and the overall scene dimensions to  
determine a minimum spacing between values.  This avoids having  
infinite calculation density at inside corners and other places where  
objects are right next to and "see" each other.  If you set -ar 0,  
then it guarantees accuracy everywhere, but at a potentially large  
expense, as you end up computing a new hemispherical sampling at each  
pixel for certain parts of the image.  Combined with a -ab setting  
greater than 1, you can end up with a very long calculation, indeed.

Don't worry about what the exact spacing value is.  It doesn't  
matter.  All that matters is the scale over which you maintain the  
accuracy set by the -aa parameter.  Once your objects are closer to  
each other than the maximum scene dimension divided by the -ar  
setting, you will gradually lose accuracy.  There is nothing more to  
say on the topic.  Read the code in src/rt/ambient.c if you want to  
understand exactly what is happening.

Cheers,
-Greg

> From: Jia Hu <hujia06@gmail.com>
> Date: July 19, 2010 10:47:57 AM PDT
>
> Sorry for the typo, I meant to compare "-ar" and "-aa".   I can  
> understand your explanation as to -ar and -aa.
>
> The book and some online materials also discussed about the meaning  
> of -ar and -aa. And they seem to explain it from a different  
> perspective. For my understanding of those statements, the  
> interpolation will always happen when the distance between two  
> points is less than minimum spacing distance (sceneSize * aa /ar).  
> When the distance between two points is larger than the minmum  
> spacing distance, interpolation may happen if the point is within  
> the "radius of validity" of another point. In other words, the  
> minimum "radius of validity" is sceneSize *aa /ar?
>
> According to Greg's explanation, when the point falls within  
> SceneSize / ar, the accuracy starts to relax. Can I say that when  
> the error gets its maximum, -aa, when the point falls within the  
> minimum spacing distance (SceneSize *aa /ar)?   I know there must be  
> something wrong with my understanding about this issue. But I can  
> not find where the problem is.
> The book Rendering with Radiance says "  -ar parameter acts as a  
> limiting device and If you are already running up against the -ar  
> limit, increasing the setting will result in a higher density of  
> sampling. If the limit has not been reached, then increasing -ar  
> should have no effect." I also have difficulty in understanding the  
> term "limiting device".
>
> Thank you for help.
>
> Jia Hu

> On Mon, Jul 19, 2010 at 2:31 AM, Greg Ward <gregoryjward@gmail.com>  
> wrote:
>
>> I assume you meant to compare "-aa" and "-ar" in your first  
>> sentence.  These are not two variables that affect the same  
>> behavior -- not much point in that.  Rather, think of the -ar  
>> setting as determining a scene resolution below which the accuracy  
>> of the indirect calculation (as determined by the -aa parameter)  
>> will start to relax.  If you divide your global scene size (the  
>> fourth value reported by "getinfo -d octree") by the -ar setting,  
>> you will get the scene size below which the indirect calculation  
>> will begin to lose accuracy.
>>
>> Best,
>> -Greg

From gregoryjward at gmail.com  Tue Jul 20 11:58:49 2010
From: gregoryjward at gmail.com (Greg Ward)
Date: Tue Jul 20 11:59:06 2010
Subject: [Radiance-general] illum examples
In-Reply-To: <AANLkTinc79Tk-bSbQw0YR6kYmiM_xH4NPZ48AJSpi-cg@mail.gmail.com>
References: <AANLkTinc79Tk-bSbQw0YR6kYmiM_xH4NPZ48AJSpi-cg@mail.gmail.com>
Message-ID: <70529B31-5023-4647-A853-C5C9C65AC359@lmi.net>

There is a special case for "glow" sources to take care of this.   
Quoting from the Radiance reference manual <http://radsite.lbl.gov/radiance/refer/ray.html#Materials 
 >:

Glow
Glow is used for surfaces that are self-luminous, but limited in their  
effect. In addition to the radiance value, a maximum radius for shadow  
testing is given:
         mod glow id
         0
         0
         4 red green blue maxrad
If maxrad is zero, then the surface will never be tested for shadow,  
although it may participate in an interreflection calculation. If  
maxrad is negative, then the surface will never contribute to scene  
illumination. Glow sources will never illuminate objects on the other  
side of an illum surface. This provides a convenient way to illuminate  
local light fixture geometry without overlighting nearby objects.


> From: Jia Hu <hujia06@gmail.com>
> Date: July 20, 2010 10:23:31 AM PDT
>
> Hello experts:
>
>  Even if mkillum is used for window, the shadow ray in a point will  
> be still sent to sun (just pass through the window) to calculate the  
> contribution of sun (direct calculation). The reason is "illum  
> surface do not interfere with the shadow testing of others, non  
> illumn sources" (Page 572 in the book Rendering with Radiance).
>
> In Page 568-569 of the book, a decorative luminaries is illustrated  
> to show why to use illum. One reason of using illum is that the  
> shadow ray in a point may hit the fixture of the lamp and get a  
> shadow which is incorrect (it is incorrect because other parts of  
> the lamp may illuminate the point). Using illum will make the lamp a  
> uniform radiator and therefore a shadow ray hit the illum will  
> return a nonzero value.
>
> In the above first paragraph , as the book said, the shadow ray  
> (that hitting the sun) will not be interfered with by the illum  
> (window, in this example) . But for the decorative luminaries  
> example (in the second paragraph), My problem is that I do not know  
> which of the following is right as to the ways of treatment of  
> Shadow ray test of this example.
>
> (1)  In this way, we do not need to consider the shadow ray test of  
> the lamp. In orther words, we can think of the new illum enclosing  
> the lamp as a special light, and there is no light (lamp) inside the  
> illum, and therefore, only one shadow ray is sent to the illum and  
> NO shadow ray is sent to the lamp (inside illum)
>
> (2) It is similar with the example (window illum) in the above first  
> paragraph,  In this case, one shadow ray is sent to hit the lamp and  
> one shadow ray is sent to hit the illum. Both of them will calculate  
> the direct part of light source. The illum just shows the luminance  
> distribution of lights reflected by the lamp fixture rather than  
> lights directly from lamp.
>
> Thank you,
>
> Jia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100720/39151e48/attachment.htm
From hujia06 at gmail.com  Tue Jul 20 13:58:33 2010
From: hujia06 at gmail.com (Jia Hu)
Date: Tue Jul 20 13:58:37 2010
Subject: [Radiance-general] illum examples
In-Reply-To: <70529B31-5023-4647-A853-C5C9C65AC359@lmi.net>
References: <AANLkTinc79Tk-bSbQw0YR6kYmiM_xH4NPZ48AJSpi-cg@mail.gmail.com>
	<70529B31-5023-4647-A853-C5C9C65AC359@lmi.net>
Message-ID: <AANLkTilxaOtwfqSveg72FviGCeBx6EfOM_6Ear5v5TY7@mail.gmail.com>

Hello Greg:

Thank you. I also find a similar thread you replied:
http://www.radiance-online.org/pipermail/radiance-general/2003-September/000963.html

I shall change the luminaires material type to "glow" (with maxrad = 0). In
this case, the shadow rays will only be sent to illum rectangle and not be
sent to the luminaire (inside illum rectangle). This case is just similar
with the window (as sky is "glow" type).

Cheers,
Jia

On Tue, Jul 20, 2010 at 2:58 PM, Greg Ward <gregoryjward@gmail.com> wrote:

> There is a special case for "glow" sources to take care of this.  Quoting
> from the Radiance reference manual <
> http://radsite.lbl.gov/radiance/refer/ray.html#Materials>:
>
> *Glow*Glow is used for surfaces that are self-luminous, but limited in
> their effect. In addition to the radiance value, a maximum radius for shadow
> testing is given:
>
>         mod glow id
>         0
>         0
>         4 red green blue maxrad
>
> If maxrad is zero, then the surface will never be tested for shadow,
> although it may participate in an interreflection calculation. If maxrad is
> negative, then the surface will never contribute to scene illumination. Glow
> sources will never illuminate objects on the other side of an illum surface.
> This provides a convenient way to illuminate local light fixture geometry
> without overlighting nearby objects.
>
>
> From: Jia Hu <hujia06@gmail.com>
> Date: July 20, 2010 10:23:31 AM PDT
>
> Hello experts:
>
>  Even if mkillum is used for window, the shadow ray in a point will be
> still sent to sun (just pass through the window) to calculate the
> contribution of sun (direct calculation). The reason is "illum surface do
> not interfere with the shadow testing of others, non illumn sources" (Page
> 572 in the book Rendering with Radiance).
>
> In Page 568-569 of the book, a decorative luminaries is illustrated to show
> why to use illum. One reason of using illum is that the shadow ray in
> a point may hit the fixture of the lamp and get a shadow which is incorrect
> (it is incorrect because other parts of the lamp may illuminate the
> point). Using illum will make the lamp a uniform radiator and therefore a
> shadow ray hit the illum will return a nonzero value.
>
> In the above first paragraph , as the book said, the shadow ray (that
> hitting the sun) will not be interfered with by the illum (window, in this
> example) . But for the decorative luminaries example (in the second
> paragraph), My problem is that I do not know which of the following is right
> as to the ways of treatment of Shadow ray test of this example.
>
> (1)  In this way, we do not need to consider the shadow ray test of the
> lamp. In orther words, we can think of the new illum enclosing the lamp as
> a special light, and there is no light (lamp) inside the illum, and
> therefore, only one shadow ray is sent to the illum and NO shadow ray is
> sent to the lamp (inside illum)
>
> (2) It is similar with the example (window illum) in the above first
> paragraph,  In this case, one shadow ray is sent to hit the lamp and one
> shadow ray is sent to hit the illum. Both of them will calculate the direct
> part of light source. The illum just shows the luminance distribution of
> lights reflected by the lamp fixture rather than lights directly from lamp.
>
> Thank you,
>
> Jia
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100720/d821efe1/attachment.html
From hujia06 at gmail.com  Tue Jul 20 16:28:27 2010
From: hujia06 at gmail.com (Jia Hu)
Date: Tue Jul 20 16:28:30 2010
Subject: [Radiance-general] illum examples
In-Reply-To: <C86B717B.52FF%robert.guglielmetti@nrel.gov>
References: <AANLkTilxaOtwfqSveg72FviGCeBx6EfOM_6Ear5v5TY7@mail.gmail.com>
	<C86B717B.52FF%robert.guglielmetti@nrel.gov>
Message-ID: <AANLkTikAEAToMf_HlVceMBJo0uH9JVTmIGVrhlmKFTGn@mail.gmail.com>

Hello:

If I set maxrad in the "glow" type of luminaires to a positive value, say,
the diagonal of the luminaire dimension. The shadow testing will happen if
the distance between the luminaire and the point is less than maxrad, right?
If the illum rectangles encloses the luminaire, is  there shadow testing if
the distance of the point from luminaire is still less than maxrad (and the
point is outside of the illum rectangle) ?

Cheers,
Jia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100720/e419bba2/attachment.htm
From gregoryjward at gmail.com  Tue Jul 20 16:44:48 2010
From: gregoryjward at gmail.com (Greg Ward)
Date: Tue Jul 20 16:44:52 2010
Subject: [Radiance-general] illum examples
In-Reply-To: <AANLkTikAEAToMf_HlVceMBJo0uH9JVTmIGVrhlmKFTGn@mail.gmail.com>
References: <AANLkTilxaOtwfqSveg72FviGCeBx6EfOM_6Ear5v5TY7@mail.gmail.com>
	<C86B717B.52FF%robert.guglielmetti@nrel.gov>
	<AANLkTikAEAToMf_HlVceMBJo0uH9JVTmIGVrhlmKFTGn@mail.gmail.com>
Message-ID: <16A9B6F1-5031-4667-BE19-F8B7F4B38B2D@lmi.net>

Whatever the glow distance is set to, no shadow testing will happen to  
materials through an intervening illum.  This is what it says in the  
reference manual I quoted to you.

-Greg

> From: Jia Hu <hujia06@gmail.com>
> Date: July 20, 2010 4:28:27 PM PDT
>
> Hello:
>
> If I set maxrad in the "glow" type of luminaires to a positive  
> value, say, the diagonal of the luminaire dimension. The shadow  
> testing will happen if the distance between the luminaire and the  
> point is less than maxrad, right? If the illum rectangles encloses  
> the luminaire, is  there shadow testing if  the distance of the  
> point from luminaire is still less than maxrad (and the point is  
> outside of the illum rectangle) ?
>
> Cheers,
> Jia
>

From hujia06 at gmail.com  Tue Jul 20 16:49:53 2010
From: hujia06 at gmail.com (Jia Hu)
Date: Tue Jul 20 16:49:50 2010
Subject: [Radiance-general] illum examples
In-Reply-To: <16A9B6F1-5031-4667-BE19-F8B7F4B38B2D@lmi.net>
References: <AANLkTilxaOtwfqSveg72FviGCeBx6EfOM_6Ear5v5TY7@mail.gmail.com>
	<C86B717B.52FF%robert.guglielmetti@nrel.gov>
	<AANLkTikAEAToMf_HlVceMBJo0uH9JVTmIGVrhlmKFTGn@mail.gmail.com>
	<16A9B6F1-5031-4667-BE19-F8B7F4B38B2D@lmi.net>
Message-ID: <AANLkTilLTRHDcS1jLakbNcL-9uRHLZ0a4rmeP_oAroTQ@mail.gmail.com>

Thank you, master Greg!!

On Tue, Jul 20, 2010 at 7:44 PM, Greg Ward <gregoryjward@gmail.com> wrote:

> Whatever the glow distance is set to, no shadow testing will happen to
> materials through an intervening illum.  This is what it says in the
> reference manual I quoted to you.
>
> -Greg
>
> From: Jia Hu <hujia06@gmail.com>
>> Date: July 20, 2010 4:28:27 PM PDT
>>
>>
>> Hello:
>>
>> If I set maxrad in the "glow" type of luminaires to a positive value, say,
>> the diagonal of the luminaire dimension. The shadow testing will happen if
>> the distance between the luminaire and the point is less than maxrad, right?
>> If the illum rectangles encloses the luminaire, is  there shadow testing if
>>  the distance of the point from luminaire is still less than maxrad (and the
>> point is outside of the illum rectangle) ?
>>
>> Cheers,
>> Jia
>>
>>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100720/9dbd8687/attachment.html
From tbleicher at googlemail.com  Wed Jul 21 01:57:13 2010
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Wed Jul 21 01:57:12 2010
Subject: [Radiance-general] illum examples
In-Reply-To: <AANLkTilxaOtwfqSveg72FviGCeBx6EfOM_6Ear5v5TY7@mail.gmail.com>
References: <AANLkTinc79Tk-bSbQw0YR6kYmiM_xH4NPZ48AJSpi-cg@mail.gmail.com>
	<70529B31-5023-4647-A853-C5C9C65AC359@lmi.net>
	<AANLkTilxaOtwfqSveg72FviGCeBx6EfOM_6Ear5v5TY7@mail.gmail.com>
Message-ID: <AANLkTilSnwCSHPmnhMXO41vVN10WjLYkXuHv8zSXzHFQ@mail.gmail.com>

On Tue, Jul 20, 2010 at 9:58 PM, Jia Hu <hujia06@gmail.com> wrote:

> I shall change the luminaires material type to "glow" (with maxrad = 0). In
> this case, the shadow rays will only be sent to illum rectangle and not be
> sent to the luminaire (inside illum rectangle).

Jia, keep in mind that any glow inside of the illum box only has the
purpose of illustrating a light source (fluorescent tube) and the
shape and the material of the fitting. The light that is emitted from
the luminaire is already accounted for in the illum material
definition which is created from an IES file. Therefore you do not
want your glow to contribute to the illumination of the scene and
mkillum 'hides' it's light contribution.

Thomas

From hujia06 at gmail.com  Wed Jul 21 09:52:56 2010
From: hujia06 at gmail.com (Jia Hu)
Date: Wed Jul 21 09:52:57 2010
Subject: [Radiance-general] ar and aa
In-Reply-To: <7C7D9DB2-94ED-41C7-BCD8-B7EA2A5112C8@lmi.net>
References: <AANLkTikbPYYjhl4cIxUwZ-z7DfsXHAKg5pB65o0xtwrU@mail.gmail.com>
	<993B3947-4363-489B-A4E5-1BDE62B6FD95@lmi.net>
	<AANLkTilwabHRsAAdvNm5nFcPcEhrMkPrz13oWRC50HdX@mail.gmail.com>
	<7C7D9DB2-94ED-41C7-BCD8-B7EA2A5112C8@lmi.net>
Message-ID: <AANLkTimBzVmKc_xiHZ_kbsI8jN7L_jGY7IVXjN6nRGkS@mail.gmail.com>

Thanks, I am more or less understand what you said. I also made some
experiment and discover:

(1) the maximum "influence radius" is not equal to sceneSize/ar but
influenced by aa and ar.
(2) the minimum "influence radius" is equal to sceneSize * aa /ar and it
happens in the complex geometry, e.g, corner.
(3) If a sample ray falls within the "influence radius", it will get ambient
value by interpolation of cached ambient value.

By the way, I can not search such terms as "-ar" or "ar" in the mailing list
archives because the system warns it is not a valid word.

Thanks for patience.
Jia



On Tue, Jul 20, 2010 at 2:53 PM, Greg Ward <gregoryjward@gmail.com> wrote:

> This is just getting so confused (and confusing).  By itself, the -aa
> parameter AFFECTS the distance between ambient values, but it does not
> dictate them.  The spacing actually depends on how close nearby geometry is.
>  If there is nothing nearby, then ambient values may be spaced very far
> apart.  You really need to go back to my original paper and understand what
> is going on with the interpolation:
>
>        http://radsite.lbl.gov/radiance/papers/sg88/paper.html
>
> The -ar setting gets used with -aa and the overall scene dimensions to
> determine a minimum spacing between values.  This avoids having infinite
> calculation density at inside corners and other places where objects are
> right next to and "see" each other.  If you set -ar 0, then it guarantees
> accuracy everywhere, but at a potentially large expense, as you end up
> computing a new hemispherical sampling at each pixel for certain parts of
> the image.  Combined with a -ab setting greater than 1, you can end up with
> a very long calculation, indeed.
>
> Don't worry about what the exact spacing value is.  It doesn't matter.  All
> that matters is the scale over which you maintain the accuracy set by the
> -aa parameter.  Once your objects are closer to each other than the maximum
> scene dimension divided by the -ar setting, you will gradually lose
> accuracy.  There is nothing more to say on the topic.  Read the code in
> src/rt/ambient.c if you want to understand exactly what is happening.
>
> Cheers,
> -Greg
>
>  From: Jia Hu <hujia06@gmail.com>
>> Date: July 19, 2010 10:47:57 AM PDT
>>
>>
>> Sorry for the typo, I meant to compare "-ar" and "-aa".   I can understand
>> your explanation as to -ar and -aa.
>>
>> The book and some online materials also discussed about the meaning of -ar
>> and -aa. And they seem to explain it from a different perspective. For my
>> understanding of those statements, the interpolation will always happen when
>> the distance between two points is less than minimum spacing distance
>> (sceneSize * aa /ar). When the distance between two points is larger than
>> the minmum spacing distance, interpolation may happen if the point is within
>> the "radius of validity" of another point. In other words, the minimum
>> "radius of validity" is sceneSize *aa /ar?
>>
>> According to Greg's explanation, when the point falls within SceneSize /
>> ar, the accuracy starts to relax. Can I say that when the error gets its
>> maximum, -aa, when the point falls within the minimum spacing distance
>> (SceneSize *aa /ar)?   I know there must be something wrong with my
>> understanding about this issue. But I can not find where the problem is.
>> The book Rendering with Radiance says "  -ar parameter acts as a limiting
>> device and If you are already running up against the -ar limit, increasing
>> the setting will result in a higher density of sampling. If the limit has
>> not been reached, then increasing -ar should have no effect." I also have
>> difficulty in understanding the term "limiting device".
>>
>> Thank you for help.
>>
>> Jia Hu
>>
>
> On Mon, Jul 19, 2010 at 2:31 AM, Greg Ward <gregoryjward@gmail.com> wrote:
>>
>> I assume you meant to compare "-aa" and "-ar" in your first sentence.
>>>  These are not two variables that affect the same behavior -- not much point
>>> in that.  Rather, think of the -ar setting as determining a scene resolution
>>> below which the accuracy of the indirect calculation (as determined by the
>>> -aa parameter) will start to relax.  If you divide your global scene size
>>> (the fourth value reported by "getinfo -d octree") by the -ar setting, you
>>> will get the scene size below which the indirect calculation will begin to
>>> lose accuracy.
>>>
>>> Best,
>>> -Greg
>>>
>>
>  _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100721/6089f9c1/attachment.htm
From hujia06 at gmail.com  Wed Jul 21 09:53:59 2010
From: hujia06 at gmail.com (Jia Hu)
Date: Wed Jul 21 09:53:55 2010
Subject: [Radiance-general] illum examples
In-Reply-To: <AANLkTilSnwCSHPmnhMXO41vVN10WjLYkXuHv8zSXzHFQ@mail.gmail.com>
References: <AANLkTinc79Tk-bSbQw0YR6kYmiM_xH4NPZ48AJSpi-cg@mail.gmail.com>
	<70529B31-5023-4647-A853-C5C9C65AC359@lmi.net>
	<AANLkTilxaOtwfqSveg72FviGCeBx6EfOM_6Ear5v5TY7@mail.gmail.com>
	<AANLkTilSnwCSHPmnhMXO41vVN10WjLYkXuHv8zSXzHFQ@mail.gmail.com>
Message-ID: <AANLkTiloeuUY8fK-KyhDimzmBzouGHOLf0xTP7fg7ZRl@mail.gmail.com>

Yes, it did take me some time to understand this. Thanks.

On Wed, Jul 21, 2010 at 4:57 AM, Thomas Bleicher
<tbleicher@googlemail.com>wrote:

> On Tue, Jul 20, 2010 at 9:58 PM, Jia Hu <hujia06@gmail.com> wrote:
>
> > I shall change the luminaires material type to "glow" (with maxrad = 0).
> In
> > this case, the shadow rays will only be sent to illum rectangle and not
> be
> > sent to the luminaire (inside illum rectangle).
>
> Jia, keep in mind that any glow inside of the illum box only has the
> purpose of illustrating a light source (fluorescent tube) and the
> shape and the material of the fitting. The light that is emitted from
> the luminaire is already accounted for in the illum material
> definition which is created from an IES file. Therefore you do not
> want your glow to contribute to the illumination of the scene and
> mkillum 'hides' it's light contribution.
>
> Thomas
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100721/a4ded859/attachment.html
From gregoryjward at gmail.com  Wed Jul 21 11:27:12 2010
From: gregoryjward at gmail.com (Greg Ward)
Date: Wed Jul 21 11:27:07 2010
Subject: [Radiance-general] mkillum-generated distribution files
In-Reply-To: <4C456746.90600@gmx.net>
References: <4C456746.90600@gmx.net>
Message-ID: <6C4557F2-6299-4215-A7BA-10080CEBB6BB@lmi.net>

OK, I have a few moments to take a quick stab at this...  Responses  
inline:

> From: "Lars O. Grobe" <grobe@gmx.net>
> Date: July 20, 2010 2:07:18 AM PDT
>
> Hi,
>
> I am trying to understand the output of mkillum. The dat-files are  
> written in Radiance's standard format. So I should be able to  
> understand the header. However I am not really sure whether I am  
> doing the right thing here. Take an example:
> --
> 2
> 1.041667 0.041667 13
> 0.000000 6.283185 39
>
> 1.504918e+00 1.530097e+00 1.525389e+00 1.501599e+00 1.505246e+00
> 1.461270e+00 1.463038e+00 1.489136e+00 1.481565e+00 1.451201e+00
> 1.374334e+00 1.296027e+00 1.410817e+00 1.343876e+00 1.477319e+00
> 1.365996e+00 1.366200e+00 1.397315e+00 1.407394e+00 1.484092e+00
> 1.482776e+00 1.570183e+00 1.525340e+00 1.572320e+00 1.561935e+00
> 1.576046e+00 1.486079e+00 1.629394e+00 1.528797e+00 1.621227e+00
> [...]
> --
> My understanding:
>
> 1) I have a two-dimensional array (line 1) of 13 rows and 39 columns  
> (lines 2, 3), right?

Right.

> 2) The rows are counted down from 1 to 0 (the 0.041667 probably is  
> some error to avoid 0), thus in steps of 1/13=-0.0769 .

Centroids are counted down frmo 1.041667 to 0.041667.  The first value  
is greater than 1 to trick linear interpolation at the pole (theta=0)  
into making all azimuthal values equal there.  The data for the first  
column is synthesized so interpolation at theta=0 gets the average of  
all second column values.  The final value of 0.041667 is the centroid  
of the lowest angle (theta=1.529 radians).  It's not possible to  
measure anything at theta=pi/2.

> 3) The columns are counted up from 0 to 2*pi in steps of  
> 6.2832/39=0.1611 .

Correct.

> 4) This means that the columns represent the "azimuth angle" (the  
> angle in the plane of the illum surface) from 0 to 2*pi radians, the  
> rows are related to.... what? If it were the elevation angle (the  
> angle to the surface normal of the mkillum surface), why is it not  
> counted beyond 1 radians? Or what else is it?

As defined in illum.cal, the altitude is equal to cos(theta), which is  
conveniently the same as the dot product of an incoming ray with the  
surface normal.  This is used because an even subdivision of this  
parameter gives a equal-area projection of regions corresponding to  
even energy subdivision on a diffuse planar surface.

> In illum.cal which is referred to by the illum-modifier generated by  
> mkillum, I find these comments:
> --
> For the hemispherical case, A1-A9 are the unit vectors for the
> hemisphere's coordinate system:
>
> il_alth         - Altitude (1 to 0) for hemispherical coordinates
> il_azih         - Azimuth (0 to 2*PI) for hemisphere
> --
> It would be great if anyone could shed some light onto this...

I hope these hints are helpful.

-Greg

From grobe at gmx.net  Thu Jul 22 06:27:39 2010
From: grobe at gmx.net (Lars O. Grobe)
Date: Thu Jul 22 06:27:41 2010
Subject: [Radiance-general] mkillum-generated distribution files
In-Reply-To: <6C4557F2-6299-4215-A7BA-10080CEBB6BB@lmi.net>
References: <4C456746.90600@gmx.net>
	<6C4557F2-6299-4215-A7BA-10080CEBB6BB@lmi.net>
Message-ID: <4C48474B.3020709@gmx.net>

Hi!

> I hope these hints are helpful.

This was very helpful Greg, thank you!

Lars.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 3740 bytes
Desc: S/MIME Cryptographic Signature
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20100722/7d43790a/smime.bin
From RFritz at lbl.gov  Thu Jul 22 09:59:42 2010
From: RFritz at lbl.gov (R Fritz)
Date: Thu Jul 22 10:00:10 2010
Subject: [Radiance-general] Re: Physically-based rendering using OpenGL?
Message-ID: <i29tdu$8t8$1@dough.gmane.org>

> Even if the GPU were optimized for this problem, much of what goes on
> in Radiance is ray tree evaluation.  It all sort of happens together-- 
> you need to trace rays, figure out what to do at surfaces based on
> material properties, evaluate .cal files, share ambient data (reading
> and writing a shared cache) and all sorts of things that would have to
> be completely rethought for a GPU implementation.

Thanks, Greg. It sounds like a reimplementation of Radiance in some 
combination of GLSL and C, and that's a huge amount of work. On the 
other hand, it does sound possible, which is interesting. One more 
research project...

-- 
Randolph Fritz ? RFritz@lbl.gov
Environmental Energy Technologies Division ? Lawrence Berkeley Labs



From bernd at bzed.de  Sat Jul 24 16:40:58 2010
From: bernd at bzed.de (Bernd Zeimetz)
Date: Sat Jul 24 16:41:05 2010
Subject: [Radiance-general] "Rendering with Radiance" (non-)availability
In-Reply-To: <4C2DB899-FC49-4D6D-8706-59081E741C4C@lmi.net>
References: <4B9362C5.6050506@gmx.net>	<9A22B489-385E-4DD0-B051-29975BF3416B@rumblestrip.org>
	<4C2DB899-FC49-4D6D-8706-59081E741C4C@lmi.net>
Message-ID: <4C4B7A0A.2070504@bzed.de>

Hi,

are there any news on that? Would be great to have the book available again! If
issues with printers are a problem (issues != legal stuff) I'm willing to help.
There are various places which sell PDF documentation and printed books about
open source software and I'm sure they would be willing to help. Unfortunately I
know nothing about what to do with/against booksurge - as it seems they're owned
by amazon now: http://www.booksurge.com/ and you should be able to transition
your books over to amazon/createspace:
https://www.createspace.com/Special/L/TransitionGuide.jsp?ref=459373&utm_id=4985

Maybe that helps.

Cheers,

Bernd

On 03/07/2010 06:40 PM, Greg Ward wrote:
> This is one of those recurring conversations, and I know it must seem
> incredible that we haven't managed to sort this out in all the time
> we've had to spend on it.  The fact is, all of us have day jobs, and no
> one knows how publishing works (other than the publishers).  Creating a
> new printing of a book, even a reprinting, somehow requires small,
> meaningless (to us) changes in the ISBN and/or Library of Congress
> number, which we don't know how to do.  Rob Shakespeare has lined up a
> new printer, but they need to secure the rights from the old printer,
> and none of us are sure what's going on with that, either.
> 
> I'll use this as a reminder to get on it again, and if we can't resolve
> it by Summer, I think we'll just release the PDF to the world and solve
> it that way.  It's my least favorite solution, but at least it is a
> solution.
> 
> Best,
> -Greg
> 
>> From: Rob Guglielmetti <rpg@rumblestrip.org>
>> Date: March 7, 2010 7:04:37 AM PST
>>
>> Hi Lars,
>>
>> This has been a problem for a while, as you know. A grand for a used
>> copy on Amazon now, eh? WOW. Last time I checked, people were asking
>> ~$300 for a copy, but that was years ago. I feel old, because I bought
>> my copy of RwR by plucking a freshly-published copy off the shelf at
>> my local bookstore a few blocks from work, but this was in nineteen
>> ninety-(cough)! =8-)
>>
>> Seriously, the issue in the past is that Greg and Charles Ehrlich's
>> supreme efforts were thwarted by what seemed to be a lousy
>> print-on-demand publisher they secured a few years ago. I know they
>> were going to look into other publishers and I think that hard copy
>> was the way they wanted to work it. I do not know if they are close to
>> finding a new publisher.
>>
>> On Mar 7, 2010, at 1:24 AM, Lars O. Grobe wrote:
>>
>>> Hi,
>>>
>>> I just wanted to draw your attention to the fact that the main
>>> reference for Radiance is not available. The cheapest price for
>>> "Rendering with Radiance" at amazon.com as of today is 1000$ for a
>>> used copy. Booksurge gives 0 results on a search. I wonder whether
>>> making the book available as a paid pdf would not be better then not
>>> having it at all. This is a big problem for application of the
>>> software, as anyone using it gets pointed to this book as a
>>> reference, but no one could buy it. I have been trying to buy a copy
>>> for an institute here for one year without any success. Besides
>>> preventing potential users from starting with Radiance, this
>>> increases the amount of beginners questions, that had been answered
>>> in the book.
>>>
>>> Cheers
>>>
>>> Lars.
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general


-- 
 Bernd Zeimetz                            Debian GNU/Linux Developer
 http://bzed.de                                http://www.debian.org
 GPG Fingerprints: 06C8 C9A2 EAAD E37E 5B2C BE93 067A AD04 C93B FF79
                   ECA1 E3F2 8E11 2432 D485 DD95 EB36 171A 6FF9 435F

From hope.zh at gmail.com  Sun Jul 25 20:20:20 2010
From: hope.zh at gmail.com (Ji Zhang)
Date: Sun Jul 25 20:20:24 2010
Subject: [Radiance-general] how to split vertical illuminance level into
	light coming from sky and light reflected by surface?
Message-ID: <AANLkTinu4ARdHpmWnL3M1aPFqyyot3ntD42fDPuonGF7@mail.gmail.com>

Dear Radiance experts,

We're trying to explore the relationship between Vertical Daylight Factor
and Facade Sky View Factor.

By *Vertical Daylight Factor* we mean the ratio of *the illuminance level of
a point on vertical building facade* (i.e. the vector of the sensor of that
point is perpendicular to the facade surface) to *the illuminance level of a
point on horizontal plane under standard CIE overcast sky* (please correct
me if the definition is wrong).

Via Radiance, is there a way to split the illuminance level of a point on
vertical surface into 1) the light coming directly from the sky dome and 2)
the light reflected by surrounding building surfaces and ground plane?

Thank you!

Ji
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100726/44404f1e/attachment.html
From tbleicher at googlemail.com  Mon Jul 26 01:32:03 2010
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Mon Jul 26 01:32:00 2010
Subject: [Radiance-general] how to split vertical illuminance level into 
	light coming from sky and light reflected by surface?
In-Reply-To: <AANLkTinu4ARdHpmWnL3M1aPFqyyot3ntD42fDPuonGF7@mail.gmail.com>
References: <AANLkTinu4ARdHpmWnL3M1aPFqyyot3ntD42fDPuonGF7@mail.gmail.com>
Message-ID: <AANLkTinMgX2vNm9PRB3wq2MEdFA3LFPQp+VLgEgj2STk@mail.gmail.com>

Ji.

Interesting concept.

On Mon, Jul 26, 2010 at 4:20 AM, Ji Zhang <hope.zh@gmail.com> wrote:
> Dear Radiance experts,
>
> We're trying to explore the relationship between Vertical Daylight Factor
> and Facade Sky View Factor.

In the UK we have the "Vertical Sky Component" which quantifies the
_direct_ contribution of the sky to a point on a vertical plane (ie.
wall). Because it's only the direct component that matters here it is
related to the portion of sky visible from this point. It's also based
on the CIE overcast sky so it matters which part of the sky you can
see. Is that the same concept as your "Facade Sky View Factor"?

> By Vertical Daylight Factor we mean the ratio of the illuminance level of a
> point on vertical building facade (i.e. the vector of the sensor of that
> point is perpendicular to the facade surface) to the illuminance level of a
> point on horizontal plane under standard CIE overcast sky (please correct me
> if the definition is wrong).

Does that include the reflected part?

> Via Radiance, is there a way to split the illuminance level of a point on
> vertical surface into 1) the light coming directly from the sky dome and 2)
> the light reflected by surrounding building surfaces and ground plane?

For the direct part simply use "-I -ab 1" in your rtrace command (or
"-i -ab 1" if you want to calculate pictures):

echo "0 0 2 0 1 0" | rtrace -w -h -ab 1 -I scene.oct | rcalc -e
'$1=($1*0.265+$2*0.67+$3*0.065)*179' > facade_direct.lux

Then calculate the total of direct and reflected component by
increasing "-ab" to an appropriate value:

echo "0 0 2 0 1 0" | rtrace -w -h -ab 4 -I scene.oct | rcalc -e
'$1=($1*0.265+$2*0.67+$3*0.065)*179' > facade_total.lux

The reflected light is the difference between total and and direct
component. You can also render images and subtract the images from
each other. See the 'pcomb' command for details.


Regards,
Thomas

From hope.zh at gmail.com  Mon Jul 26 05:33:02 2010
From: hope.zh at gmail.com (Ji Zhang)
Date: Mon Jul 26 05:33:01 2010
Subject: [Radiance-general] how to split vertical illuminance level into 
	light coming from sky and light reflected by surface?
In-Reply-To: <AANLkTinMgX2vNm9PRB3wq2MEdFA3LFPQp+VLgEgj2STk@mail.gmail.com>
References: <AANLkTinu4ARdHpmWnL3M1aPFqyyot3ntD42fDPuonGF7@mail.gmail.com>
	<AANLkTinMgX2vNm9PRB3wq2MEdFA3LFPQp+VLgEgj2STk@mail.gmail.com>
Message-ID: <AANLkTimjebKnFJM7Ls_38kAaDyHGt9BYvdTGjWKMnFi4@mail.gmail.com>

Thanks, Thomas!


On Mon, Jul 26, 2010 at 4:20 AM, Ji Zhang <hope.zh@gmail.com> wrote:
> > Dear Radiance experts,
> >
> > We're trying to explore the relationship between Vertical Daylight Factor
> > and Facade Sky View Factor.
>
> In the UK we have the "Vertical Sky Component" which quantifies the
> _direct_ contribution of the sky to a point on a vertical plane (ie.
> wall). Because it's only the direct component that matters here it is
> related to the portion of sky visible from this point. It's also based
> on the CIE overcast sky so it matters which part of the sky you can
> see. Is that the same concept as your "Facade Sky View Factor"?
>

Ji: Yes, Thomas, the concept as explained by you is the same as the "Facade
Sky View Factor" mentioned by me.



>
> > By Vertical Daylight Factor we mean the ratio of the illuminance level of
> a
> > point on vertical building facade (i.e. the vector of the sensor of that
> > point is perpendicular to the facade surface) to the illuminance level of
> a
> > point on horizontal plane under standard CIE overcast sky (please correct
> me
> > if the definition is wrong).
>
> Does that include the reflected part?
>

Ji: Yes, Thomas, by our understanding Vertical Daylight Factor is calculated
based on the illuminance value of a point on vertical surface that is the
sum of the light coming directly from the CIE overcast sky and the light
reflected by surrounding surfaces and ground plane.



>
> > Via Radiance, is there a way to split the illuminance level of a point on
> > vertical surface into 1) the light coming directly from the sky dome and
> 2)
> > the light reflected by surrounding building surfaces and ground plane?
>
> For the direct part simply use "-I -ab 1" in your rtrace command (or
> "-i -ab 1" if you want to calculate pictures):
>
> echo "0 0 2 0 1 0" | rtrace -w -h -ab 1 -I scene.oct | rcalc -e
> '$1=($1*0.265+$2*0.67+$3*0.065)*179' > facade_direct.lux
>
> Then calculate the total of direct and reflected component by
> increasing "-ab" to an appropriate value:
>
> echo "0 0 2 0 1 0" | rtrace -w -h -ab 4 -I scene.oct | rcalc -e
> '$1=($1*0.265+$2*0.67+$3*0.065)*179' > facade_total.lux
>
> The reflected light is the difference between total and and direct
> component. You can also render images and subtract the images from
> each other. See the 'pcomb' command for details.
>

Thank you very much for your detailed suggestion! We'll try accordingly
later.

Ji
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100726/668039ca/attachment.htm
From Christopher.Rush at arup.com  Mon Jul 26 06:46:25 2010
From: Christopher.Rush at arup.com (Christopher Rush)
Date: Mon Jul 26 06:50:24 2010
Subject: [Radiance-general] how to split vertical illuminance level into
	light coming from sky and light reflected by surface?
In-Reply-To: <AANLkTinMgX2vNm9PRB3wq2MEdFA3LFPQp+VLgEgj2STk@mail.gmail.com>
References: <AANLkTinu4ARdHpmWnL3M1aPFqyyot3ntD42fDPuonGF7@mail.gmail.com>
	<AANLkTinMgX2vNm9PRB3wq2MEdFA3LFPQp+VLgEgj2STk@mail.gmail.com>
Message-ID: <28285BAEA8C0814DBF1B199C876EC5B048624E91CE@AMXEXC01.global.arup.com>

Note that setting -ab 1 may not count sky component diffusely transmitted through trans materials, as that's considered another bounce. Maybe this is fine, depending on interpretation of your intention - "direct contribution of the sky to a point on a vertical plane."

If you need to set -ab 2 or higher to count diffuse transmission in this first part, you could set all your non transmitting materials to zero reflectance, or the ambient include/exclude options may serve the purpose, see -ae, -ai, -aE, and -aI.



-----Original Message-----
From: radiance-general-bounces@radiance-online.org [mailto:radiance-general-bounces@radiance-online.org] On Behalf Of Thomas Bleicher
Sent: Monday, July 26, 2010 4:32 AM


For the direct part simply use "-I -ab 1" in your rtrace command (or "-i -ab 1" if you want to calculate pictures):

echo "0 0 2 0 1 0" | rtrace -w -h -ab 1 -I scene.oct | rcalc -e '$1=($1*0.265+$2*0.67+$3*0.065)*179' > facade_direct.lux

Then calculate the total of direct and reflected component by increasing "-ab" to an appropriate value:

echo "0 0 2 0 1 0" | rtrace -w -h -ab 4 -I scene.oct | rcalc -e '$1=($1*0.265+$2*0.67+$3*0.065)*179' > facade_total.lux

The reflected light is the difference between total and and direct component. You can also render images and subtract the images from each other. See the 'pcomb' command for details.


____________________________________________________________
Electronic mail messages entering and leaving Arup  business
systems are scanned for acceptability of content and viruses


From RFritz at lbl.gov  Mon Jul 26 12:59:59 2010
From: RFritz at lbl.gov (R Fritz)
Date: Mon Jul 26 13:00:08 2010
Subject: [Radiance-general] Spectrophotometer Data to Radiance Surface
	Descriptions
Message-ID: <i2kpfv$nu5$1@dough.gmane.org>

If I have diffuse and specular XYZ surface data from a 
spectrophotometer?six numbers?, how do I convert that into Radiance 
material descriptions? Can I calculate the "specularity" for types 
plastic and metal from that data? Or do I need to use a function or 
data-based material type?
-- 
Randolph Fritz ? RFritz@lbl.gov
Environmental Energy Technologies Division ? Lawrence Berkeley Labs



From gregoryjward at gmail.com  Mon Jul 26 13:40:50 2010
From: gregoryjward at gmail.com (Greg Ward)
Date: Mon Jul 26 13:40:51 2010
Subject: [Radiance-general] Spectrophotometer Data to Radiance Surface
	Descriptions
In-Reply-To: <i2kpfv$nu5$1@dough.gmane.org>
References: <i2kpfv$nu5$1@dough.gmane.org>
Message-ID: <A0072E3A-A5CA-4CC1-9BC5-8C82E07BF7A1@lmi.net>

Hi Randolph,

I believe I had a script or .cal file or something at one time to  
compute the specularity from separate "specular included" and  
"specular excluded" measurements, but I can't find it.  The  
calculation is pretty simple, though.  Just subtract the "excluded"  
from the "included" Y values and divide by the the "included" Y  
measurement to get the specular percentage for a metallic material  
with colored highlights.  For a plastic material, the specular  
fraction is the "included" minus the "excluded" Y over 100 (assuming a  
0-100% scale for Y).

The material color is the "included" Yxy converted to RGB for metal,  
and the "excluded" Yxy converted to RGB for plastic.  The conversions  
are given in ray/src/cal/cal/xyz_rgb.cal.  You can quickly spit out  
the matrix coefficients for this conversion using:

	rcalc -n -f xyz_rgb.cal -o cmat.fmt

Best,
-Greg

> From: R Fritz <RFritz@lbl.gov>
> Date: July 26, 2010 12:59:59 PM PDT
>
> If I have diffuse and specular XYZ surface data from a  
> spectrophotometer?six numbers?, how do I convert that into Radiance  
> material descriptions? Can I calculate the "specularity" for types  
> plastic and metal from that data? Or do I need to use a function or  
> data-based material type?

From hope.zh at gmail.com  Mon Jul 26 19:21:34 2010
From: hope.zh at gmail.com (Ji Zhang)
Date: Mon Jul 26 19:21:31 2010
Subject: [Radiance-general] how to split vertical illuminance level into 
	light coming from sky and light reflected by surface?
In-Reply-To: <28285BAEA8C0814DBF1B199C876EC5B048624E91CE@AMXEXC01.global.arup.com>
References: <AANLkTinu4ARdHpmWnL3M1aPFqyyot3ntD42fDPuonGF7@mail.gmail.com>
	<AANLkTinMgX2vNm9PRB3wq2MEdFA3LFPQp+VLgEgj2STk@mail.gmail.com>
	<28285BAEA8C0814DBF1B199C876EC5B048624E91CE@AMXEXC01.global.arup.com>
Message-ID: <AANLkTikCCfGrd8jaOp2AR5fQQUKGK2UdIJfyJWji7MSU@mail.gmail.com>

Thank you for your suggestions, Christopher!

Ji



On Mon, Jul 26, 2010 at 9:46 PM, Christopher Rush <Christopher.Rush@arup.com
> wrote:

> Note that setting -ab 1 may not count sky component diffusely transmitted
> through trans materials, as that's considered another bounce. Maybe this is
> fine, depending on interpretation of your intention - "direct contribution
> of the sky to a point on a vertical plane."
>
> If you need to set -ab 2 or higher to count diffuse transmission in this
> first part, you could set all your non transmitting materials to zero
> reflectance, or the ambient include/exclude options may serve the purpose,
> see -ae, -ai, -aE, and -aI.
>
>
>
> -----Original Message-----
> From: radiance-general-bounces@radiance-online.org [mailto:
> radiance-general-bounces@radiance-online.org] On Behalf Of Thomas Bleicher
> Sent: Monday, July 26, 2010 4:32 AM
>
>
> For the direct part simply use "-I -ab 1" in your rtrace command (or "-i
> -ab 1" if you want to calculate pictures):
>
> echo "0 0 2 0 1 0" | rtrace -w -h -ab 1 -I scene.oct | rcalc -e
> '$1=($1*0.265+$2*0.67+$3*0.065)*179' > facade_direct.lux
>
> Then calculate the total of direct and reflected component by increasing
> "-ab" to an appropriate value:
>
> echo "0 0 2 0 1 0" | rtrace -w -h -ab 4 -I scene.oct | rcalc -e
> '$1=($1*0.265+$2*0.67+$3*0.065)*179' > facade_total.lux
>
> The reflected light is the difference between total and and direct
> component. You can also render images and subtract the images from each
> other. See the 'pcomb' command for details.
>
>
> ____________________________________________________________
> Electronic mail messages entering and leaving Arup  business
> systems are scanned for acceptability of content and viruses
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>



-- 
ZHANG Ji ?? (PhD) :: Research Fellow :: Centre for Sustainable Asian Cities
:: School of Design and Environment :: National University of Singapore :: 4
Architecture Drive,  Singapore, 117566 :: Contact: 65-6516 5046 :: Email:
sdezj@nus.edu.sg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100727/f9034aeb/attachment.html
From hope.zh at gmail.com  Tue Jul 27 02:05:37 2010
From: hope.zh at gmail.com (Ji Zhang)
Date: Tue Jul 27 02:15:11 2010
Subject: [Radiance-general] translate UNIX command into Windows command
Message-ID: <AANLkTilgaLbE0jEZAcVwXRloGSs1rUBgRx7PwqSzt5-1@mail.gmail.com>

Dear Radiance experts,

May I ask how to translate the following Unix command line text into Windows
command line text?

cat sensor.pts | rtrace -I -ab 1 -h -w -oov -u- scene.oct | rcalc -e
'$1=$1;$2=$2;$3=$3;$4=179*(.265*$4+.670*$5+.065*$6)' > result.dat


I've tried the following in Windows, but it doesn't seem to work:

rtrace -I -ab 1 -h -w -oov -u- scene.oct < sensor.pts > rcalc -e
'$1=$1;$2=$2;$3=$3;$4=179*(.265*$4+.670*$5+.065*$6)' > result.dat


Thanks!

Ji
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100727/89603933/attachment.htm
From grobe at gmx.net  Tue Jul 27 04:49:45 2010
From: grobe at gmx.net (Lars O. Grobe)
Date: Tue Jul 27 04:49:47 2010
Subject: [Radiance-general] Spectrophotometer Data to Radiance Surface
	Descriptions
In-Reply-To: <A0072E3A-A5CA-4CC1-9BC5-8C82E07BF7A1@lmi.net>
References: <i2kpfv$nu5$1@dough.gmane.org>
	<A0072E3A-A5CA-4CC1-9BC5-8C82E07BF7A1@lmi.net>
Message-ID: <4C4EC7D9.2080009@gmx.net>

Hi!

> The material color is the "included" Yxy converted to RGB for metal, and
> the "excluded" Yxy converted to RGB for plastic. The conversions are
> given in ray/src/cal/cal/xyz_rgb.cal.

In cases where you have the spectrum as it comes from the spectrometer, 
you can also use mgfilt's ability to handle reflection spectra and 
convert to rgb...

Cheers, Lars.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 3740 bytes
Desc: S/MIME Cryptographic Signature
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20100727/a241ae5a/smime.bin
From tbleicher at googlemail.com  Tue Jul 27 04:50:48 2010
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Tue Jul 27 04:50:46 2010
Subject: [Radiance-general] translate UNIX command into Windows command
In-Reply-To: <AANLkTilgaLbE0jEZAcVwXRloGSs1rUBgRx7PwqSzt5-1@mail.gmail.com>
References: <AANLkTilgaLbE0jEZAcVwXRloGSs1rUBgRx7PwqSzt5-1@mail.gmail.com>
Message-ID: <AANLkTinQa5baiSQoyr2pJ6ns-7XE0T9UZbZ2ZRRwkS5e@mail.gmail.com>

Ji

On Tue, Jul 27, 2010 at 10:05 AM, Ji Zhang <hope.zh@gmail.com> wrote:
> I've tried the following in Windows, but it doesn't seem to work:
>
> rtrace -I -ab 1 -h -w -oov -u- scene.oct < sensor.pts > rcalc -e
> '$1=$1;$2=$2;$3=$3;$4=179*(.265*$4+.670*$5+.065*$6)' > result.dat

The Windows command prompt doesn't understand single quotes. Use
double quotes for the "rcalc -e" expression and it should work:

rtrace -I -ab 1 -h -w -oov -u- scene.oct < sensor.pts > rcalc -e
"$1=$1;$2=$2;$3=$3;$4=179*(.265*$4+.670*$5+.065*$6)" > result.dat


Thomas

From hope.zh at gmail.com  Tue Jul 27 04:52:34 2010
From: hope.zh at gmail.com (Ji Zhang)
Date: Tue Jul 27 04:52:30 2010
Subject: [Radiance-general] translate UNIX command into Windows command
In-Reply-To: <AANLkTinQa5baiSQoyr2pJ6ns-7XE0T9UZbZ2ZRRwkS5e@mail.gmail.com>
References: <AANLkTilgaLbE0jEZAcVwXRloGSs1rUBgRx7PwqSzt5-1@mail.gmail.com>
	<AANLkTinQa5baiSQoyr2pJ6ns-7XE0T9UZbZ2ZRRwkS5e@mail.gmail.com>
Message-ID: <AANLkTilRautmxiQAg4_Ithb-LIMowxt--I24Zw1byPFe@mail.gmail.com>

Thank you very much, Thomas!

Ji

On Tue, Jul 27, 2010 at 7:50 PM, Thomas Bleicher
<tbleicher@googlemail.com>wrote:

> Ji
>
> On Tue, Jul 27, 2010 at 10:05 AM, Ji Zhang <hope.zh@gmail.com> wrote:
> > I've tried the following in Windows, but it doesn't seem to work:
> >
> > rtrace -I -ab 1 -h -w -oov -u- scene.oct < sensor.pts > rcalc -e
> > '$1=$1;$2=$2;$3=$3;$4=179*(.265*$4+.670*$5+.065*$6)' > result.dat
>
> The Windows command prompt doesn't understand single quotes. Use
> double quotes for the "rcalc -e" expression and it should work:
>
> rtrace -I -ab 1 -h -w -oov -u- scene.oct < sensor.pts > rcalc -e
> "$1=$1;$2=$2;$3=$3;$4=179*(.265*$4+.670*$5+.065*$6)" > result.dat
>
>
> Thomas
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>



-- 
ZHANG Ji ?? (PhD) :: Research Fellow :: Centre for Sustainable Asian Cities
:: School of Design and Environment :: National University of Singapore :: 4
Architecture Drive,  Singapore, 117566 :: Contact: 65-6516 5046 :: Email:
sdezj@nus.edu.sg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100727/bf4588bd/attachment.htm
From hope.zh at gmail.com  Tue Jul 27 05:50:19 2010
From: hope.zh at gmail.com (Ji Zhang)
Date: Tue Jul 27 05:50:22 2010
Subject: [Radiance-general] translate UNIX command into Windows command
In-Reply-To: <AANLkTinQa5baiSQoyr2pJ6ns-7XE0T9UZbZ2ZRRwkS5e@mail.gmail.com>
References: <AANLkTilgaLbE0jEZAcVwXRloGSs1rUBgRx7PwqSzt5-1@mail.gmail.com>
	<AANLkTinQa5baiSQoyr2pJ6ns-7XE0T9UZbZ2ZRRwkS5e@mail.gmail.com>
Message-ID: <AANLkTinVVy9JKv2vz7h455l1nkr2s0eRhTbCoZh9qS-V@mail.gmail.com>

 Dear Thomas and Radiance experts, one more question:

If I want to execute this rtrace command in windows via python, should I use
the tri-quotation symbol?

Is the following python script correct?

##################################################################################
import os

rtrace_command = ''rtrace -I -ab 1 -h -w -oov -u- scene.oct < sensor.pts > "
+\
                               """rcalc -e
"$1=$1;$2=$2;$3=$3;$4=179*(.265*$4+.670*$5+.065*$6)" > result.dat"""

os.system(rtrace_command)
##################################################################################


Thanks!

Ji



On Tue, Jul 27, 2010 at 7:50 PM, Thomas Bleicher
<tbleicher@googlemail.com>wrote:

> Ji
>
> On Tue, Jul 27, 2010 at 10:05 AM, Ji Zhang <hope.zh@gmail.com> wrote:
> > I've tried the following in Windows, but it doesn't seem to work:
> >
> > rtrace -I -ab 1 -h -w -oov -u- scene.oct < sensor.pts > rcalc -e
> > '$1=$1;$2=$2;$3=$3;$4=179*(.265*$4+.670*$5+.065*$6)' > result.dat
>
> The Windows command prompt doesn't understand single quotes. Use
> double quotes for the "rcalc -e" expression and it should work:
>
> rtrace -I -ab 1 -h -w -oov -u- scene.oct < sensor.pts > rcalc -e
> "$1=$1;$2=$2;$3=$3;$4=179*(.265*$4+.670*$5+.065*$6)" > result.dat
>
>
> Thomas
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100727/71b3ef1f/attachment.html
From dbs176 at gmail.com  Tue Jul 27 06:25:13 2010
From: dbs176 at gmail.com (David Smith)
Date: Tue Jul 27 06:25:24 2010
Subject: [Radiance-general] translate UNIX command into Windows command
Message-ID: <AANLkTi=waruj+ZJK+q8ESVPWeK34H5sZT5JpKPryuLbp@mail.gmail.com>

Ji,

Python is quotes-agnostic, so long as you start and end with the same type,
it doesn't matter what's in between. In other words, you can use
double_quote='"' to store the " character, or single_quote="'" to store the
' character. To save the string "', you'd have to do something like
both_quotes='"'+"'". Triple quotes are for multiline strings (and comments).

Additionally, I think you'd need a pipe, which might not be Windows
friendly, or an intermediate file.

Your command would be:


#! /bin/python

import os

#with pipe
rtrace_command1 = 'rtrace -I -ab 1 -h -w -oov -u- scene.oct < sensor.pts | '
+\
                  'rcalc -e
"$1=$1;$2=$2;$3=$3;$4=179*(.265*$4+.670*$5+.065*$6)" > result.dat'

#with intermediate file
rtrace_command2a = 'rtrace -I -ab 1 -h -w -oov -u- scene.oct < sensor.pts >
tmp.file'
rtrace_command2b = 'rcalc -e
"$1=$1;$2=$2;$3=$3;$4=179*(.265*$4+.670*$5+.065*$6)" < tmp.file >
result.dat'


#should be equivalent:
os.system(rtrace_command1)

os.system(rtrace_command2a)
os.system(rtrace_command2b)



--Dave
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100727/6f01a0a4/attachment.htm
From RFritz at lbl.gov  Tue Jul 27 10:08:59 2010
From: RFritz at lbl.gov (R Fritz)
Date: Tue Jul 27 10:09:25 2010
Subject: [Radiance-general] Re: translate UNIX command into Windows command
References: <AANLkTilgaLbE0jEZAcVwXRloGSs1rUBgRx7PwqSzt5-1@mail.gmail.com>
	<AANLkTinQa5baiSQoyr2pJ6ns-7XE0T9UZbZ2ZRRwkS5e@mail.gmail.com>
	<AANLkTinVVy9JKv2vz7h455l1nkr2s0eRhTbCoZh9qS-V@mail.gmail.com>
Message-ID: <i2n3ra$sf4$1@dough.gmane.org>

You've got what are probably typos; the following will probably work:
> rtrace_command = 'rtrace -I -ab 1 -h -w -oov -u- scene.oct < sensor.pts | \
> rcalc -e "$1=$1;$2=$2;$3=$3;$4=179*(.265*$4+.670*$5+.065*$6)" \
> > result.dat'

However, I recommend the Python "subprocess" module as an alternative. 
Subprocess avoids many of the problems of quoting by converting Python 
lists to command argument lists. One way of doing what you want might 
be:

> # Untested code
> 
> from subprocess import Popen, communicate, PIPE
> 
> rtproc = Popen(
> 	"rtrace -I -ab 1 -h -w -oov -u- scene.oct".split(),
> 	stdin=PIPE, stdout=PIPE, universal_newlines=True)
> 
> rcproc = Popen(
> 	['rcalc', '-e', '$1=$1;$2=$2;$3=$3;$4=179*(.265*$4+.670*$5+.065*$6)'],
> 	stdin=rtproc.stdout, stdout=PIPE)
> 
> sensor_points = open('sensor.pts', 'U')
> (results,errors) = rcproc.communicate(sensor_points)
> sensor_points.close()
> if rtproc.returncode != 0 or rcproc.returncode != 0:
> 	# report errors here
> # if it worked, results will be in 'results'

-- 
Randolph Fritz ? RFritz@lbl.gov
Environmental Energy Technologies Division ? Lawrence Berkeley Labs


On 2010-07-27 05:50:19 -0700, Ji Zhang said:

> ?Dear Thomas and Radiance experts, one more question:
> 
> If I want to execute this rtrace command in windows via python, should 
> I use the tri-quotation symbol? 
> 
> Is the following python script correct?
> 
> ##################################################################################
import 
> 
> os
> 
> rtrace_command = ''rtrace -I -ab 1 -h -w -oov -u- scene.oct < sensor.pts > " +\
> ?????????????????????????????? """rcalc -e 
> "$1=$1;$2=$2;$3=$3;$4=179*(.265*$4+.670*$5+.065*$6)" > result.dat"""
> 
> os.system(rtrace_command)
> ##################################################################################


Thanks!

Ji



On 
> 
> Tue, Jul 27, 2010 at 7:50 PM, Thomas Bleicher 
> <tbleicher@googlemail.com> wrote:
> Ji
> 
> On Tue, Jul 27, 2010 at 10:05 AM, Ji Zhang 
> <hope.zh@gmail.com> wrote:
> > I've tried the following in Windows, but it doesn't seem to work:
> >
> > rtrace -I -ab 1 -h -w -oov -u- scene.oct < sensor.pts > rcalc -e
> > '$1=$1;$2=$2;$3=$3;$4=179*(.265*$4+.670*$5+.065*$6)' > result.dat
> 
> The Windows command prompt doesn't understand single quotes. Use
> double quotes for the "rcalc -e" expression and it should work:
> 
> rtrace -I -ab 1 -h -w -oov -u- scene.oct < sensor.pts > rcalc -e
> "$1=$1;$2=$2;$3=$3;$4=179*(.265*$4+.670*$5+.065*$6)" > result.dat
> 
> 
> Thomas
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general



From dbs176 at gmail.com  Tue Jul 27 12:08:38 2010
From: dbs176 at gmail.com (David Smith)
Date: Tue Jul 27 12:08:34 2010
Subject: [Radiance-general] Re: translate UNIX command into Windows command
Message-ID: <AANLkTikrNcp6U_zA0ZcNGcLjJ-c4Ks2uAWCTpumD_Xcs@mail.gmail.com>

> However, I recommend the Python "subprocess" module as an alternative.
> Subprocess avoids many of the problems of quoting by converting Python
> lists to command argument lists.


I agree that the subprocess module is the way to go.

Not to turn this into a Python discussion, but convenience functions are
very handy:




#! /bin/python

import subprocess

def execute(cmd):
    #print cmd
    p = subprocess.Popen(cmd, shell=True)
    s = os.waitpid(p.pid, 0)
    return s

def execute2(cmd):
    p = subprocess.Popen(cmd, shell=True, bufsize=1024,
stdin=subprocess.PIPE, stdout=subprocess.PIPE, close_fds=True)
    (child_stdin, child_stdout) = (p.stdin, p.stdout)
    return (child_stdin, child_stdout)

#test Radiance calls
rpict_command = "rpict model.oct > image.hdr"
gensky_command = "gensky 4 1 12 -c"

execute(rpict_command)
f_in,f_out = execute2(gensky_command)
gensky_output = f_out.read()





--Dave
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100727/8b76d67c/attachment.html
From RFritz at lbl.gov  Tue Jul 27 12:14:20 2010
From: RFritz at lbl.gov (R Fritz)
Date: Tue Jul 27 12:14:28 2010
Subject: [Radiance-general] Re: Spectrophotometer Data to Radiance Surface
	Descriptions
References: <i2kpfv$nu5$1@dough.gmane.org>
	<A0072E3A-A5CA-4CC1-9BC5-8C82E07BF7A1@lmi.net>
	<4C4EC7D9.2080009@gmx.net>
Message-ID: <i2nb6c$oe0$1@dough.gmane.org>

Thanks, Greg & Lars.

BTW, there are apparently no "mgfilt" (and mgf2inv) man pages. Did 
these get lost in the shuffle a while back?

-- 
Randolph Fritz ? RFritz@lbl.gov
Environmental Energy Technologies Division ? Lawrence Berkeley Labs


On 2010-07-27 04:49:45 -0700, Lars O. Grobe said:

> Hi!
> 
>> The material color is the "included" Yxy converted to RGB for metal, and
>> the "excluded" Yxy converted to RGB for plastic. The conversions are
>> given in ray/src/cal/cal/xyz_rgb.cal.
> 
> In cases where you have the spectrum as it comes from the spectrometer, 
> you can also use mgfilt's ability to handle reflection spectra and 
> convert to rgb...
> 
> Cheers, Lars.



From RFritz at lbl.gov  Tue Jul 27 12:16:33 2010
From: RFritz at lbl.gov (R Fritz)
Date: Tue Jul 27 12:20:00 2010
Subject: [Radiance-general] Spectrophotometry
Message-ID: <i2nbah$ov1$1@dough.gmane.org>

These are the CM-2002 spectrophotometer settings I think are 
appropriate. Does anyone see anything I omitted or specified 
incorrectly?

> Yxy, ABS (absolute rather than relative values), 2? observer, 
> illuminant A, auto-average three measurements. ?The meter's "feet" can 
> be removed for flat surfaces; probably best to reinstall them for the 
> curved blinds.

-- 
Randolph Fritz ? RFritz@lbl.gov
Environmental Energy Technologies Division ? Lawrence Berkeley Labs



From gregoryjward at gmail.com  Tue Jul 27 13:32:41 2010
From: gregoryjward at gmail.com (Greg Ward)
Date: Tue Jul 27 13:32:40 2010
Subject: [Radiance-general] Re: Spectrophotometer Data to Radiance Surface
	Descriptions
In-Reply-To: <i2nb6c$oe0$1@dough.gmane.org>
References: <i2kpfv$nu5$1@dough.gmane.org>
	<A0072E3A-A5CA-4CC1-9BC5-8C82E07BF7A1@lmi.net>
	<4C4EC7D9.2080009@gmx.net> <i2nb6c$oe0$1@dough.gmane.org>
Message-ID: <E2411DA3-6B68-49B6-99FD-BF273EACF00F@lmi.net>

MGF isn't technically part of Radiance, so only mgf2rad and rad2mgf  
man pages are included.  The others are at:

	http://radsite.lbl.gov/mgf/mgfhtml/mgftrans.html#begin

-Greg

> From: R Fritz <RFritz@lbl.gov>
> Date: July 27, 2010 12:14:20 PM PDT
>
> Thanks, Greg & Lars.
>
> BTW, there are apparently no "mgfilt" (and mgf2inv) man pages. Did  
> these get lost in the shuffle a while back?
>
> -- 
> Randolph Fritz ? RFritz@lbl.gov
> Environmental Energy Technologies Division ? Lawrence Berkeley Labs
>
>
> On 2010-07-27 04:49:45 -0700, Lars O. Grobe said:
>
>> Hi!
>>> The material color is the "included" Yxy converted to RGB for  
>>> metal, and
>>> the "excluded" Yxy converted to RGB for plastic. The conversions are
>>> given in ray/src/cal/cal/xyz_rgb.cal.
>> In cases where you have the spectrum as it comes from the  
>> spectrometer, you can also use mgfilt's ability to handle  
>> reflection spectra and convert to rgb...
>> Cheers, Lars.
>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general

From solomoncw76 at gmail.com  Wed Jul 28 15:28:19 2010
From: solomoncw76 at gmail.com (chang cw)
Date: Wed Jul 28 15:28:22 2010
Subject: [Radiance-general] Question of light sources vs glow material
Message-ID: <AANLkTinbUCoxzzgOyssg906VfEVtph+VAZSFPYcrxkhQ@mail.gmail.com>

Hi all,
Would there be any differences
 if i have a sky dome defined by a series of light sources ( with the
subtended FOV defined ) and one that is defined by a continuous glow
material ?

Of course the main task is for daylighting applications .

Cheers!

CW
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100729/d23f6018/attachment.htm
From RFritz at lbl.gov  Wed Jul 28 16:37:34 2010
From: RFritz at lbl.gov (Randolph M. Fritz)
Date: Wed Jul 28 16:37:49 2010
Subject: [Radiance-general] Radiance Sphere Views
Message-ID: <i2qevu$jij$1@dough.gmane.org>

I'd like to be able to calculate a full-sphere view of a Radiance 
model, and display it across three (or more) monitors. Has anyone done 
anything like this before?
-- 
Randolph M. Fritz ? RFritz@lbl.gov
Environmental Energy Technologies Division ? Lawrence Berkeley Labs



From grobe at gmx.net  Thu Jul 29 01:36:37 2010
From: grobe at gmx.net (Lars O. Grobe)
Date: Thu Jul 29 01:36:37 2010
Subject: [Radiance-general] Radiance Sphere Views
In-Reply-To: <i2qevu$jij$1@dough.gmane.org>
References: <i2qevu$jij$1@dough.gmane.org>
Message-ID: <4C513D95.5090507@gmx.net>

Hi,

first I would recommend Paul Bourke's website. He has documented a lot 
of his work on fisheye projections, though mostly on domes:

http://local.wasp.uwa.edu.au/~pbourke/miscellaneous/domefisheye/

If you want to work on flat surfaces, you would probably need some 
cubical mapping. However the basics of projection still apply.

Cheers, Lars.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 3740 bytes
Desc: S/MIME Cryptographic Signature
Url : http://radiance-online.org/pipermail/radiance-general/attachments/20100729/62136276/smime.bin
From RFritz at lbl.gov  Thu Jul 29 09:19:51 2010
From: RFritz at lbl.gov (Randolph M. Fritz)
Date: Thu Jul 29 09:20:08 2010
Subject: [Radiance-general] Re: Radiance Sphere Views
References: <i2qevu$jij$1@dough.gmane.org> <4C513D95.5090507@gmx.net>
Message-ID: <i2s9n6$4vc$1@dough.gmane.org>

Thanks!

-- 
Randolph M. Fritz ? RFritz@lbl.gov
Environmental Energy Technologies Division ? Lawrence Berkeley Labs


On 2010-07-29 01:36:37 -0700, Lars O. Grobe said:

> Hi,
> 
> first I would recommend Paul Bourke's website. He has documented a lot 
> of his work on fisheye projections, though mostly on domes:
> 
> http://local.wasp.uwa.edu.au/~pbourke/miscellaneous/domefisheye/
> 
> If you want to work on flat surfaces, you would probably need some 
> cubical mapping. However the basics of projection still apply.
> 
> Cheers, Lars.
> 
> 
> <image>_______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general



From hope.zh at gmail.com  Fri Jul 30 01:46:44 2010
From: hope.zh at gmail.com (Ji Zhang)
Date: Fri Jul 30 01:46:42 2010
Subject: [Radiance-general] translate UNIX command into Windows command
In-Reply-To: <AANLkTi=waruj+ZJK+q8ESVPWeK34H5sZT5JpKPryuLbp@mail.gmail.com>
References: <AANLkTi=waruj+ZJK+q8ESVPWeK34H5sZT5JpKPryuLbp@mail.gmail.com>
Message-ID: <AANLkTimzgyHQmtXJt+F+qm-CacUx-88e+FEndnpxugKN@mail.gmail.com>

Dear David and Radiance experts,

It seems the following will work better for our original purpose of
executing rtrace and rcalc command via python in windows system:

##############################################################################
import os

command_rtrace = 'rtrace -I  -ab 1 -h -w scene.oct < sensors.pts > temp.dat'
os.system(command_rtrace)

command_rcalc = 'rcalc -e "$1=$1;$2=$2;$3=$3;$4=.265*$4+.670*$5+.065*$6"
temp.dat > results_ir.dat'
os.system(command_rcalc)
##############################################################################

Regards,
Ji



On Tue, Jul 27, 2010 at 9:25 PM, David Smith <dbs176@gmail.com> wrote:

> Ji,
>
> Python is quotes-agnostic, so long as you start and end with the same type,
> it doesn't matter what's in between. In other words, you can use
> double_quote='"' to store the " character, or single_quote="'" to store the
> ' character. To save the string "', you'd have to do something like
> both_quotes='"'+"'". Triple quotes are for multiline strings (and comments).
>
> Additionally, I think you'd need a pipe, which might not be Windows
> friendly, or an intermediate file.
>
> Your command would be:
>
>
> #! /bin/python
>
> import os
>
> #with pipe
> rtrace_command1 = 'rtrace -I -ab 1 -h -w -oov -u- scene.oct < sensor.pts |
> ' +\
>                   'rcalc -e
> "$1=$1;$2=$2;$3=$3;$4=179*(.265*$4+.670*$5+.065*$6)" > result.dat'
>
> #with intermediate file
> rtrace_command2a = 'rtrace -I -ab 1 -h -w -oov -u- scene.oct < sensor.pts >
> tmp.file'
> rtrace_command2b = 'rcalc -e
> "$1=$1;$2=$2;$3=$3;$4=179*(.265*$4+.670*$5+.065*$6)" < tmp.file >
> result.dat'
>
>
> #should be equivalent:
> os.system(rtrace_command1)
>
> os.system(rtrace_command2a)
> os.system(rtrace_command2b)
>
>
>
> --Dave
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>


-- 
ZHANG Ji ?? (PhD) :: Research Fellow :: Centre for Sustainable Asian Cities
:: School of Design and Environment :: National University of Singapore :: 4
Architecture Drive,  Singapore, 117566 :: Contact: 65-6516 5046 :: Email:
sdezj@nus.edu.sg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://radiance-online.org/pipermail/radiance-general/attachments/20100730/80d8e7f0/attachment.htm
From grobe at gmx.net  Sat Jul 31 12:58:57 2010
From: grobe at gmx.net (Lars O. Grobe)
Date: Sat Jul 31 12:59:13 2010
Subject: [Radiance-general] Question of light sources vs glow material
In-Reply-To: <AANLkTinbUCoxzzgOyssg906VfEVtph+VAZSFPYcrxkhQ@mail.gmail.com>
References: <AANLkTinbUCoxzzgOyssg906VfEVtph+VAZSFPYcrxkhQ@mail.gmail.com>
Message-ID: <8F98214F-97D1-48D5-9C9C-2796209C0350@gmx.net>

Hi Chew Wei,

the difference is that there is no reasonable way to define the dome  
using light. Light is perfect for small intense sources. At every ray  
intersection, Radiance can efficiently test for light sources by  
sending a Ray to the source. This is more efficient then sending rays  
to random directions trying to find a source, which is the mechanism  
to treat a glow source. However, in the case of a sky dome, you would  
have to subdivide the source a lot or, if you have defined e.g.  
patches as light sources, you need to test a lot of these patches. For  
the typically rather smooth gradient of sky luminance this does not  
make sense in most cases compared to having a continous glow source  
with a gradient applied.

Cheers, Lars.

--
Dipl.-Ing. Architect Lars O. Grobe

On Jul 29, 2010, at 0:28, chang cw <solomoncw76@gmail.com> wrote:

> Hi all,
> Would there be any differences
>  if i have a sky dome defined by a series of light sources ( with  
> the subtended FOV defined ) and one that is defined by a continuous  
> glow material ?
>
> Of course the main task is for daylighting applications .
>
> Cheers!
>
> CW
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general@radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general

