From nicolas.roy at velux.com  Tue Feb  1 06:08:39 2011
From: nicolas.roy at velux.com (Nicolas Roy)
Date: Tue, 1 Feb 2011 15:08:39 +0100
Subject: [Radiance-general] VELUX 4th Daylight Symposium,
	4-5 May 2011 in Lausanne
Message-ID: <OF8ED2E76B.6E4F1EFC-ONC125782A.004698A7-C125782A.004DB296@velux.com>

VELUX 4th Daylight Symposium in Lausanne, 4-5 May 2011

Daylight in a human perspective

Dear all,

We are happy to announce the 4th VELUX Daylight Symposium to be held at 
the Rolex Learning Center at EPFL ? ?cole Polytechnique F?d?rale de 
Lausanne on 4 and 5 May 2011. The Rolex Center is designed by the Japanese 
practice SANAA, led by Kazuyo Sejima and Ryue Nishizawa. The building was 
inaugurated in May 2010 ? in the same month where SANAA was given the 
Pritzker Prize for 2010. 

The theme of the 4th symposium will be ?Daylight in a human perspective? 
and will specifically focus on the effects of daylight on building 
occupants; how are we affected by daylight, and what are the requirements 
to achieve good daylit environments? The programme will provide updates on 
the scientific progress in the field as well as experiences and viewpoints 
from architectural practices. 

For the first time, the symposium will introduce an international Academic 
Forum for PhD students. The forum will provide a platform for sharing 
experience and knowledge in the field of daylighting research. A specific 
session reserved for the students will take place prior to the symposium 
and make space for individual presentations as well as discussions with 
leading experts. All PhD students in the field of daylighting are invited 
to join the Academic Forum. Limit date for abstract submission to the 
Academic Forum is 15 February 2011.

http://www.thedaylightsite.com/academic_forum.asp?y=2011

The previous daylight symposiums - held in Budapest in 2005, in Bilbao in 
2007 and in Rotterdam 2009 - brought together participants from research, 
education and architectural practices as well as legislators and lighting 
designers from all over the world.

A preliminary programme will soon be made available, please visit the 
www.thedaylightsite.com for news, updates, as well as registration for the 
event. 

http://www.thedaylightsite.com/symposium.asp?tp=1034&y=2011

http://www.thedaylightsite.com/registration.asp?y=2011


Hope to see you in May 2011 in Lausanne.


Best regards,

Nicolas Roy
Daylight, Energy and Indoor Climate
VELUX A/S
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110201/ed5434cf/attachment.html>

From rfritz at lbl.gov  Tue Feb  1 20:21:20 2011
From: rfritz at lbl.gov (Randolph M. Fritz)
Date: Wed, 2 Feb 2011 04:21:20 +0000 (UTC)
Subject: [Radiance-general] HEAD version?
Message-ID: <loom.20110202T052016-127@post.gmane.org>

Are people mostly using the head version of Radiance for production? That's
rather my impression, but it would be nice to have some confirmation.

Randolph



From rob.guglielmetti at gmail.com  Tue Feb  1 20:44:35 2011
From: rob.guglielmetti at gmail.com (Rob Guglielmetti)
Date: Tue, 1 Feb 2011 21:44:35 -0700
Subject: [Radiance-general] HEAD version?
In-Reply-To: <loom.20110202T052016-127@post.gmane.org>
References: <loom.20110202T052016-127@post.gmane.org>
Message-ID: <AANLkTi=zBqEmkFtmvCRX-bDDsRtd6QdL==6ZTYcs-g-4@mail.gmail.com>

Yes. =)

On Tue, Feb 1, 2011 at 9:21 PM, Randolph M. Fritz <rfritz at lbl.gov> wrote:

> Are people mostly using the head version of Radiance for production? That's
> rather my impression, but it would be nice to have some confirmation.
>
> Randolph
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110201/a1d629ec/attachment.html>

From alstan at jakubiec.net  Tue Feb  1 20:55:56 2011
From: alstan at jakubiec.net (J. Alstan Jakubiec)
Date: Tue, 01 Feb 2011 23:55:56 -0500
Subject: [Radiance-general] HEAD version?
In-Reply-To: <loom.20110202T052016-127@post.gmane.org>
References: <loom.20110202T052016-127@post.gmane.org>
Message-ID: <op.vp9eni2bc8ew1p@pda-jakubiec.hsd1.ma.comcast.net>

Yes here as well, and DIVA-for-Rhino is currently shipping with a  
Windows-compiled head version.

Alstan

On Tue, 01 Feb 2011 23:21:20 -0500, Randolph M. Fritz <rfritz at lbl.gov>  
wrote:

> Are people mostly using the head version of Radiance for production?  
> That's
> rather my impression, but it would be nice to have some confirmation.
>
> Randolph
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general


From mstock at umich.edu  Wed Feb  2 06:55:08 2011
From: mstock at umich.edu (Mark Stock)
Date: Wed, 2 Feb 2011 09:55:08 -0500 (EST)
Subject: [Radiance-general] HEAD version?
In-Reply-To: <loom.20110202T052016-127@post.gmane.org>
References: <loom.20110202T052016-127@post.gmane.org>
Message-ID: <Pine.LNX.4.64.1102020954430.20247@joust.gpcc.itd.umich.edu>

Also yes, but I only update it once or twice a year.

Mark

On Wed, 2 Feb 2011, Randolph M. Fritz wrote:

> Are people mostly using the head version of Radiance for production? That's
> rather my impression, but it would be nice to have some confirmation.
>
> Randolph
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
>


From tbleicher at googlemail.com  Wed Feb  2 08:12:16 2011
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Wed, 2 Feb 2011 11:12:16 -0500
Subject: [Radiance-general] HEAD version?
In-Reply-To: <loom.20110202T052016-127@post.gmane.org>
References: <loom.20110202T052016-127@post.gmane.org>
Message-ID: <AANLkTim_27q-76Le3Dz8piKAY2acKYXwocE83O1Vk4iK@mail.gmail.com>

At my former workplace:

production system: no

my private play box: usually


Reasons for not running HEAD on the production system(s):

1) new features are not required (we are happy with 3.8 and other
outdated bits of software)

2) production machines are Windows and PPC and I have no interest in
(re-)compiling the binaries on those platforms

3) my colleagues are no gurus and if bugs were introduced in HEAD they
would be helpless


I'd say that it is not uncommon for typical daylight assessments to be
done on old or very old versions of Radiance. Think of all the
applications that bundled Desktop Radiance in their distribution.

Thomas


From Robert.Guglielmetti at nrel.gov  Wed Feb  2 13:53:57 2011
From: Robert.Guglielmetti at nrel.gov (Guglielmetti, Robert)
Date: Wed, 2 Feb 2011 14:53:57 -0700
Subject: [Radiance-general] HEAD version?
In-Reply-To: <AANLkTim_27q-76Le3Dz8piKAY2acKYXwocE83O1Vk4iK@mail.gmail.com>
Message-ID: <C96F187A.2183%robert.guglielmetti@nrel.gov>

I believe there was one bug that got squashed, definitely a few very
cool/useful tools added, since 3.8. But yes if you have non-guru Radiance
users (the fact that there *are* non-guru Radiance users says a lot about
the Radiance-based tools out there like su2rad, SPOT, DAYSIM, etc), I can
see the point of sticking with something stable.

In support of a project here at NREL, we are working on creating a build
system that will provide automated cross platform builds of the HEAD, with
a dashboard to monitor for build errors and possibly do unit tests. So on
the horizon we will be able to offer stable HEAD binaries for all
platforms. That's the goal, anyway...

- Rob

On 2/2/11 9:12 AM, "Thomas Bleicher" <tbleicher at googlemail.com> wrote:

>At my former workplace:
>
>production system: no
>
>my private play box: usually
>
>
>Reasons for not running HEAD on the production system(s):
>
>1) new features are not required (we are happy with 3.8 and other
>outdated bits of software)
>
>2) production machines are Windows and PPC and I have no interest in
>(re-)compiling the binaries on those platforms
>
>3) my colleagues are no gurus and if bugs were introduced in HEAD they
>would be helpless
>
>
>I'd say that it is not uncommon for typical daylight assessments to be
>done on old or very old versions of Radiance. Think of all the
>applications that bundled Desktop Radiance in their distribution.
>
>Thomas
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general at radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general



From grobe at gmx.net  Wed Feb  2 16:02:39 2011
From: grobe at gmx.net (Lars O. Grobe)
Date: Thu, 3 Feb 2011 01:02:39 +0100
Subject: [Radiance-general] HEAD version?
In-Reply-To: <Pine.LNX.4.64.1102020954430.20247@joust.gpcc.itd.umich.edu>
References: <loom.20110202T052016-127@post.gmane.org>
	<Pine.LNX.4.64.1102020954430.20247@joust.gpcc.itd.umich.edu>
Message-ID: <B1198ABD-B0A6-4043-A13F-8D173EE3209A@gmx.net>

Same for me, everytime I hear about any important improvement, I update head, typically 2,3 times a year. Plus keeping installed some old versions for specific needs. My /opt contains usually head, stable, pmap releases.

Besides guru or not:

1) Radiance ecosystem keeps users informed on bugfixes at almost real-time, making them want to update and not wait for releases.

2) There are no pure bugfixes for a release, so it is not possible to avoid version changes anyways. That makes it little attractive to follow conservative strategies such as keeping a stable release updated only with bugfixes and wait with feature updates - the bugfixes come with updates only. And then, why wait for a release tag...

3) Binaries on my 64bit ubuntu kept surprising me, and if I have to compile myself, I cannot keep away from fresh sources :-)

--
Dipl.-Ing. Architect Lars O. Grobe

On Feb 2, 2011, at 15:55, Mark Stock <mstock at umich.edu> wrote:

> Also yes, but I only update it once or twice a year.
> 
> Mark
> 
> On Wed, 2 Feb 2011, Randolph M. Fritz wrote:
> 
>> Are people mostly using the head version of Radiance for production? That's
>> rather my impression, but it would be nice to have some confirmation.
>> 
>> Randolph
>> 
>> 
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>> 
>> 
>> 
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general


From rfritz at lbl.gov  Wed Feb  2 21:29:55 2011
From: rfritz at lbl.gov (Randolph M. Fritz)
Date: Thu, 3 Feb 2011 05:29:55 +0000 (UTC)
Subject: [Radiance-general] Fun with multiple cores and rtrace
Message-ID: <loom.20110203T061841-658@post.gmane.org>

I finally managed to get Linux going on my modelling system, an eight-core
ThinkStation.  It was running Radiance very fast.  Then I started seeing ps
output like this:

 6589 ?        S      0:00 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
 6592 ?        R     29:32 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
 6593 ?        R     29:32 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
 6594 ?        R     29:32 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
 6595 ?        R     29:32 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
 6596 ?        R     29:32 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
 6597 ?        R     29:32 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
 6598 ?        S     41:03 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
 6599 ?        S     49:48 rtrace -n 8 -h -I @sensparm.opt ot-3.oct

And it slowed down by a factor of three. My impression is that there has been an
OS glitch and it is in fact only using one core.  Anyone else seen this?

Head Debian build of Radiance, Ubuntu 10.10, most current version.

Randolph




From gregoryjward at gmail.com  Wed Feb  2 22:14:52 2011
From: gregoryjward at gmail.com (Greg Ward)
Date: Wed, 2 Feb 2011 22:14:52 -0800
Subject: [Radiance-general] Fun with multiple cores and rtrace
In-Reply-To: <loom.20110203T061841-658@post.gmane.org>
References: <loom.20110203T061841-658@post.gmane.org>
Message-ID: <99643A19-A624-41F5-AC3B-5AC3DF0FBF63@lmi.net>

Hi Randolph,

What is unexpected about this process status?  You asked for -n 8, so you get 8 active processes and one that collects the results.  They are all duplicates of each other.  What are the exact circumstances of the slowdown?  What options are hidden in your sensparm.opt file?

-Greg

> From: "Randolph M. Fritz" <rfritz at lbl.gov>
> Date: February 2, 2011 9:29:55 PM PST
> 
> I finally managed to get Linux going on my modelling system, an eight-core
> ThinkStation.  It was running Radiance very fast.  Then I started seeing ps
> output like this:
> 
> 6589 ?        S      0:00 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
> 6592 ?        R     29:32 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
> 6593 ?        R     29:32 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
> 6594 ?        R     29:32 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
> 6595 ?        R     29:32 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
> 6596 ?        R     29:32 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
> 6597 ?        R     29:32 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
> 6598 ?        S     41:03 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
> 6599 ?        S     49:48 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
> 
> And it slowed down by a factor of three. My impression is that there has been an
> OS glitch and it is in fact only using one core.  Anyone else seen this?
> 
> Head Debian build of Radiance, Ubuntu 10.10, most current version.
> 
> Randolph


From RFritz at lbl.gov  Thu Feb  3 08:49:30 2011
From: RFritz at lbl.gov (Randolph M. Fritz)
Date: Thu, 3 Feb 2011 08:49:30 -0800
Subject: [Radiance-general] Fun with multiple cores and rtrace
References: <loom.20110203T061841-658@post.gmane.org>
	<99643A19-A624-41F5-AC3B-5AC3DF0FBF63@lmi.net>
Message-ID: <iiemap$nib$1@dough.gmane.org>

Sensparm.opt attached.  What's striking is the way some of the rtrace 
processes seem to "get ahead" of the others.  It was actually worse 
before I took that ps snapshot, with the last two processes having 
accumulated run times of 30 minutes or so, while the first six had only 
run about 10 minutes.  The same sensparm.opt file (modulo a change of a 
-sj) continues to work as expected on dino.  The main things I changed 
seems to have been installing os updates and bringing Radiance to its 
head version, but I am actually suspecting an os glitch.

Randolph

sensparm.opt:
-dp 2048
-ar 49
-ms 1.9
-ds .2
-dt .05
-dc .75
-dr 3
-sj 1
-st .01
-ab 5
-aa .075
-ad 4096
-as 2048
-av 0.01 0.01 0.01
-lr 12
-lw .0005


On 2011-02-02 22:14:52 -0800, Greg Ward said:

> Hi Randolph,
> 
> What is unexpected about this process status?  You asked for -n 8, so 
> you get 8 active processes and one that collects the results.  They are 
> all duplicates of each other.  What are the exact circumstances of the 
> slowdown?  What options are hidden in your sensparm.opt file?
> 
> -Greg
> 
>> From: "Randolph M. Fritz" <rfritz at lbl.gov>
>> Date: February 2, 2011 9:29:55 PM PST
>> 
>> I finally managed to get Linux going on my modelling system, an eight-core
>> ThinkStation.  It was running Radiance very fast.  Then I started seeing ps
>> output like this:
>> 
>> 6589 ?        S      0:00 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
>> 6592 ?        R     29:32 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
>> 6593 ?        R     29:32 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
>> 6594 ?        R     29:32 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
>> 6595 ?        R     29:32 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
>> 6596 ?        R     29:32 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
>> 6597 ?        R     29:32 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
>> 6598 ?        S     41:03 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
>> 6599 ?        S     49:48 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
>> 
>> And it slowed down by a factor of three. My impression is that there 
>> has been an
>> OS glitch and it is in fact only using one core.  Anyone else seen this?
>> 
>> Head Debian build of Radiance, Ubuntu 10.10, most current version.
>> 
>> Randolph


-- 
Randolph M. Fritz ? RFritz at lbl.gov
Environmental Energy Technologies Division ? Lawrence Berkeley Labs




From jedev at visarc.com  Thu Feb  3 09:02:49 2011
From: jedev at visarc.com (Jack de Valpine)
Date: Thu, 03 Feb 2011 12:02:49 -0500
Subject: [Radiance-general] Fun with multiple cores and rtrace
In-Reply-To: <iiemap$nib$1@dough.gmane.org>
References: <loom.20110203T061841-658@post.gmane.org>	<99643A19-A624-41F5-AC3B-5AC3DF0FBF63@lmi.net>
	<iiemap$nib$1@dough.gmane.org>
Message-ID: <4D4ADFB9.3060501@visarc.com>

Hi Randolph,

Not sure if this is related, but I recall that Rob Guglielmetti looked 
into rtrace performance in a parallel setting:

http://www.rumblestrip.org/interests/light/rtrace-multiprocessing-option-initial-test-results/

-Jack

-- 
# Jack de Valpine
# president
#
# visarc incorporated
# http://www.visarc.com
#
# channeling technology for superior design and construction


On 2/3/2011 11:49 AM, Randolph M. Fritz wrote:
> Sensparm.opt attached.  What's striking is the way some of the rtrace 
> processes seem to "get ahead" of the others.  It was actually worse 
> before I took that ps snapshot, with the last two processes having 
> accumulated run times of 30 minutes or so, while the first six had 
> only run about 10 minutes.  The same sensparm.opt file (modulo a 
> change of a -sj) continues to work as expected on dino.  The main 
> things I changed seems to have been installing os updates and bringing 
> Radiance to its head version, but I am actually suspecting an os glitch.
>
> Randolph
>
> sensparm.opt:
> -dp 2048
> -ar 49
> -ms 1.9
> -ds .2
> -dt .05
> -dc .75
> -dr 3
> -sj 1
> -st .01
> -ab 5
> -aa .075
> -ad 4096
> -as 2048
> -av 0.01 0.01 0.01
> -lr 12
> -lw .0005
>
>
> On 2011-02-02 22:14:52 -0800, Greg Ward said:
>
>> Hi Randolph,
>>
>> What is unexpected about this process status?  You asked for -n 8, so 
>> you get 8 active processes and one that collects the results.  They 
>> are all duplicates of each other.  What are the exact circumstances 
>> of the slowdown?  What options are hidden in your sensparm.opt file?
>>
>> -Greg
>>
>>> From: "Randolph M. Fritz" <rfritz at lbl.gov>
>>> Date: February 2, 2011 9:29:55 PM PST
>>>
>>> I finally managed to get Linux going on my modelling system, an 
>>> eight-core
>>> ThinkStation.  It was running Radiance very fast.  Then I started 
>>> seeing ps
>>> output like this:
>>>
>>> 6589 ?        S      0:00 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
>>> 6592 ?        R     29:32 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
>>> 6593 ?        R     29:32 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
>>> 6594 ?        R     29:32 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
>>> 6595 ?        R     29:32 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
>>> 6596 ?        R     29:32 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
>>> 6597 ?        R     29:32 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
>>> 6598 ?        S     41:03 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
>>> 6599 ?        S     49:48 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
>>>
>>> And it slowed down by a factor of three. My impression is that there 
>>> has been an
>>> OS glitch and it is in fact only using one core.  Anyone else seen 
>>> this?
>>>
>>> Head Debian build of Radiance, Ubuntu 10.10, most current version.
>>>
>>> Randolph
>
>


From gregoryjward at gmail.com  Thu Feb  3 09:18:30 2011
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu, 3 Feb 2011 09:18:30 -0800
Subject: [Radiance-general] Fun with multiple cores and rtrace
In-Reply-To: <iiemap$nib$1@dough.gmane.org>
References: <loom.20110203T061841-658@post.gmane.org>
	<99643A19-A624-41F5-AC3B-5AC3DF0FBF63@lmi.net>
	<iiemap$nib$1@dough.gmane.org>
Message-ID: <FC14808F-2614-40A5-BD25-AED423699882@lmi.net>

Hi Randolph,

We probably shouldn't jump to conclusions about CPU utilization based on how much time is attributed to each rtrace process.  Due to the way rays get assigned to processes as they finish what they've got, one rtrace process might end up using more time than another that had to wait a longer for its assignment.

One thing is certain:  you should be sharing an ambient file via the -af option if -aa is non-zero and -ab is positive.  Otherwise, your process are mostly wasting time computing values that other processes have already computed.  Rob found the same thing in the stats Jack pointed out.

Cheers,
-Greg

> From: "Randolph M. Fritz" <RFritz at lbl.gov>
> Date: February 3, 2011 8:49:30 AM PST
> 
> Sensparm.opt attached.  What's striking is the way some of the rtrace processes seem to "get ahead" of the others.  It was actually worse before I took that ps snapshot, with the last two processes having accumulated run times of 30 minutes or so, while the first six had only run about 10 minutes.  The same sensparm.opt file (modulo a change of a -sj) continues to work as expected on dino.  The main things I changed seems to have been installing os updates and bringing Radiance to its head version, but I am actually suspecting an os glitch.
> 
> Randolph
> 
> sensparm.opt:
> -dp 2048
> -ar 49
> -ms 1.9
> -ds .2
> -dt .05
> -dc .75
> -dr 3
> -sj 1
> -st .01
> -ab 5
> -aa .075
> -ad 4096
> -as 2048
> -av 0.01 0.01 0.01
> -lr 12
> -lw .0005
> 
> 
> On 2011-02-02 22:14:52 -0800, Greg Ward said:
> 
>> Hi Randolph,
>> What is unexpected about this process status?  You asked for -n 8, so you get 8 active processes and one that collects the results.  They are all duplicates of each other.  What are the exact circumstances of the slowdown?  What options are hidden in your sensparm.opt file?
>> -Greg
>>> From: "Randolph M. Fritz" <rfritz at lbl.gov>
>>> Date: February 2, 2011 9:29:55 PM PST
>>> I finally managed to get Linux going on my modelling system, an eight-core
>>> ThinkStation.  It was running Radiance very fast.  Then I started seeing ps
>>> output like this:
>>> 6589 ?        S      0:00 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
>>> 6592 ?        R     29:32 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
>>> 6593 ?        R     29:32 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
>>> 6594 ?        R     29:32 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
>>> 6595 ?        R     29:32 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
>>> 6596 ?        R     29:32 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
>>> 6597 ?        R     29:32 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
>>> 6598 ?        S     41:03 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
>>> 6599 ?        S     49:48 rtrace -n 8 -h -I @sensparm.opt ot-3.oct
>>> And it slowed down by a factor of three. My impression is that there has been an
>>> OS glitch and it is in fact only using one core.  Anyone else seen this?
>>> Head Debian build of Radiance, Ubuntu 10.10, most current version.
>>> Randolph


From RFritz at lbl.gov  Thu Feb  3 09:50:59 2011
From: RFritz at lbl.gov (Randolph M. Fritz)
Date: Thu, 3 Feb 2011 09:50:59 -0800
Subject: [Radiance-general] Fun with multiple cores and rtrace
References: <loom.20110203T061841-658@post.gmane.org>
	<99643A19-A624-41F5-AC3B-5AC3DF0FBF63@lmi.net>
	<iiemap$nib$1@dough.gmane.org>
	<FC14808F-2614-40A5-BD25-AED423699882@lmi.net>
Message-ID: <iiepu3$dut$1@dough.gmane.org>

On 2011-02-03 09:18:30 -0800, Greg Ward said:

> you should be sharing an ambient file via the -af option if -aa is 
> non-zero and -ab is positive.

D'oh!  I'll fix that.

Jack de Valpine:
> http://www.rumblestrip.org/interests/light/rtrace-multiprocessing-option-initial-test-results/

Yes, 
> 
I think that will be very useful.

Thank you all.
-- 
Randolph M. Fritz ? RFritz at lbl.gov
Environmental Energy Technologies Division ? Lawrence Berkeley Labs




From tmetcalfe at kalwall.com  Thu Feb  3 11:16:28 2011
From: tmetcalfe at kalwall.com (Tim Metcalfe)
Date: Thu, 3 Feb 2011 14:16:28 -0500
Subject: [Radiance-general] Radiance-general Digest, Vol 83, Issue 23
In-Reply-To: <mailman.1.1296504000.46250.radiance-general@radiance-online.org>
References: <mailman.1.1296504000.46250.radiance-general@radiance-online.org>
Message-ID: <31A1F95173EDC043A63B0B06D158CE074414B67B5F@NTEXCHAN.kellercomp.local>

I have the ies file for an electric lightsource how do I put it into ecotect to use it or convert it to rad file?
Any help would be great

Tim Metcalfe
Kalwall Corporation
Daylight Modeling Group
1111 Candia Road
Manchester, N.H. 03105
1(800)258-9777 X4483
?  Please consider your environmental responsibility before printing this e-mail

-----Original Message-----
From: radiance-general-request at radiance-online.org [mailto:radiance-general-request at radiance-online.org]
Sent: Monday, January 31, 2011 3:00 PM
To: radiance-general at radiance-online.org
Subject: Radiance-general Digest, Vol 83, Issue 23

Send Radiance-general mailing list submissions to
        radiance-general at radiance-online.org

To subscribe or unsubscribe via the World Wide Web, visit
        http://www.radiance-online.org/mailman/listinfo/radiance-general
or, via email, send a message with subject or body 'help' to
        radiance-general-request at radiance-online.org

You can reach the person managing the list at
        radiance-general-owner at radiance-online.org

When replying, please edit your Subject line so it is more specific
than "Re: Contents of Radiance-general digest..."


Today's Topics:

   1. trans material file (Tim Metcalfe)
   2.  stadium light (was: trans material file) (Lars O. Grobe)
   3. Stadium light [was: trans material file] (Thomas Bleicher)
   4. Re: Stadium light [was: trans material file]
      (Guglielmetti, Robert)


----------------------------------------------------------------------

Message: 1
Date: Mon, 31 Jan 2011 06:41:18 -0500
From: Tim Metcalfe <tmetcalfe at kalwall.com>
To: "radiance-general at radiance-online.org"
        <radiance-general at radiance-online.org>
Subject: [Radiance-general] trans material file
Message-ID:
        <31A1F95173EDC043A63B0B06D158CE074414B1CF7D at NTEXCHAN.kellercomp.local>
Content-Type: text/plain; charset="us-ascii"

Hello all,
I am looking to write a file to import in Ecotect for a 75 fc electric stadium light.
Since electric lights are not my usual I am at a loss. Any suggestions?

Tim Metcalfe
Kalwall Corporation
Daylight Modeling Group
1111 Candia Road
Manchester, N.H. 03105
1(800)258-9777 X4483
P  Please consider your environmental responsibility before printing this e-mail


________________________________
This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please notify the system manager. This message contains confidential information and is intended only for the individual named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail. Please notify the sender immediately by e-mail if you have received this e-mail by mistake and delete this e-mail from your system. If you are not the intended recipient you are notified that disclosing, copying, distributing or taking any action in reliance on the contents of this information is strictly prohibited.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110131/4a0bf66f/attachment-0001.html>

------------------------------

Message: 2
Date: Mon, 31 Jan 2011 13:01:10 +0100
From: "Lars O. Grobe" <grobe at gmx.net>
To: Radiance general discussion <radiance-general at radiance-online.org>
Subject: [Radiance-general]  stadium light (was: trans material file)
Message-ID: <1296475270.6067.20.camel at lars-laptop>
Content-Type: text/plain; charset="UTF-8"

Hi Tim!

> I am looking to write a file to import in Ecotect for a 75 fc electric
> stadium light.

What information on that stadium light do you have? Do you have a
candela distribution (either as a print-out or as an IES or Eulumdat
file)?

Cheers, Lars.

BTW I changed the subject line, I guess this thread is not about trans
material questions.




------------------------------

Message: 3
Date: Mon, 31 Jan 2011 08:31:30 -0500
From: Thomas Bleicher <tbleicher at googlemail.com>
To: Radiance general discussion <radiance-general at radiance-online.org>
Subject: [Radiance-general] Stadium light [was: trans material file]
Message-ID:
        <AANLkTinzABtdyfBCfxrobicBttxdrTxg7uDgQmvCYnRd at mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Mon, Jan 31, 2011 at 6:41 AM, Tim Metcalfe <tmetcalfe at kalwall.com> wrote:
> Hello all,
>
> I am looking to write a file to import in Ecotect for a 75 fc electric
> stadium light.
>
> Since electric lights are not my usual I am at a loss. Any suggestions?

Tim. I hope you are looking just for a way to import distribution data
into Ecotect.

In that case, IES is your friend. IIRC you define it as a type of
material in Ecotect. If you go through the materials you should find
some examples for "light materials" which should get you going.

If you want to roll your own IES file ...

Are you sure about this? If you have a fitting that's safety-tested
enough to go in a stadium you should be able to get an IES file. If
not I would still look for a distribution file of a similar fitting
before I start to hack together my own IES file.

If you really want to dive into it I recommend "Thinking
Photometrically (II)" by Ian Ashdown as first start:

http://www.dial.de/CMS/German/Articles/Licht/Service/Downloads/Thinking_Photometrically_II.pdf

Good luck,
Thomas



------------------------------

Message: 4
Date: Mon, 31 Jan 2011 09:53:26 -0700
From: "Guglielmetti, Robert" <Robert.Guglielmetti at nrel.gov>
To: Radiance general discussion <radiance-general at radiance-online.org>
Subject: Re: [Radiance-general] Stadium light [was: trans material
        file]
Message-ID: <C96C35E7.30AB%robert.guglielmetti at nrel.gov>
Content-Type: text/plain; charset="us-ascii"

I don't think it's all that difficult to create an IES file from scratch
(assuming one has a proper test report and either IES LM-63 or Ian's great
paper that Thomas cites below). Lighting Analysts has a nice piece of
software called "Photometric Toolbox" that guides you through the process
of generating your own IES file as well. But again, this assumes you have
a photometric test report with all the candela values in hand. If you
don't have that, Thomas' suggestion of trying to find a similar product
that has been tested is the way to go.

Rob Guglielmetti  IESNA, LEED AP
Commercial Buildings Research Group
National Renewable Energy Laboratory
1617 Cole Blvd MS:RSF202
Golden, CO 80401
T. 303.275.4319
F. 303.630.2055
E. robert.guglielmetti at nrel.gov





On 1/31/11 6:31 AM, "Thomas Bleicher" <tbleicher at googlemail.com> wrote:

>On Mon, Jan 31, 2011 at 6:41 AM, Tim Metcalfe <tmetcalfe at kalwall.com>
>wrote:
>> Hello all,
>>
>> I am looking to write a file to import in Ecotect for a 75 fc electric
>> stadium light.
>>
>> Since electric lights are not my usual I am at a loss. Any suggestions?
>
>Tim. I hope you are looking just for a way to import distribution data
>into Ecotect.
>
>In that case, IES is your friend. IIRC you define it as a type of
>material in Ecotect. If you go through the materials you should find
>some examples for "light materials" which should get you going.
>
>If you want to roll your own IES file ...
>
>Are you sure about this? If you have a fitting that's safety-tested
>enough to go in a stadium you should be able to get an IES file. If
>not I would still look for a distribution file of a similar fitting
>before I start to hack together my own IES file.
>
>If you really want to dive into it I recommend "Thinking
>Photometrically (II)" by Ian Ashdown as first start:
>
>http://www.dial.de/CMS/German/Articles/Licht/Service/Downloads/Thinking_Ph
>otometrically_II.pdf
>
>Good luck,
>Thomas
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general at radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general




------------------------------

_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general


End of Radiance-general Digest, Vol 83, Issue 23
************************************************

This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please notify the system manager. This message contains confidential information and is intended only for the individual named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail. Please notify the sender immediately by e-mail if you have received this e-mail by mistake and delete this e-mail from your system. If you are not the intended recipient you are notified that disclosing, copying, distributing or taking any action in reliance on the contents of this information is strictly prohibited.

From tbleicher at googlemail.com  Thu Feb  3 11:48:50 2011
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Thu, 3 Feb 2011 14:48:50 -0500
Subject: [Radiance-general] Radiance-general Digest, Vol 83, Issue 23
In-Reply-To: <31A1F95173EDC043A63B0B06D158CE074414B67B5F@NTEXCHAN.kellercomp.local>
References: <mailman.1.1296504000.46250.radiance-general@radiance-online.org>
	<31A1F95173EDC043A63B0B06D158CE074414B67B5F@NTEXCHAN.kellercomp.local>
Message-ID: <AANLkTinDAyHAJYYZsSk9_0oTM7MbQaZV955-DYtFwu_e@mail.gmail.com>

On Thu, Feb 3, 2011 at 2:16 PM, Tim Metcalfe <tmetcalfe at kalwall.com> wrote:
> I have the ies file for an electric lightsource how do I put
> it into ecotect to use it or convert it to rad file?

I'm not a big user of Ecotect so my preferred workflow is this:

1) in Ecotect place and direct light objects where you want the IES
fitting to be. Use the same type of light for one type of fitting.

2) When you export to Radiance you get the option to export lights as
markers. This creates triangles with the correct rotation which you
can use with "replmarks".

2b) I think the lights are always exported last so you can edit your
exported scene.rad file and split it into a geometry.rad and
markers.rad. Makes it easier to update the geometry when the fittings
stay in the same place.

3) convert the IES file to a Radiance file with ies2rad:

$ ies2rad -t WHITE -m 0.7 myfitting.ies

This will create a myfitting.rad and myfitting.dat file which describe
a light source with 70% output of the values in the IES file. The -m
option is the best way to apply depreciation factors.

4) now use replmarks to replace the triangles in the "markers.rad"
file with the light source description:

$ replmarks -x myfitting.rad Light.123.4 markers.rad > lights.rad

"Light.123.4" is the modifier that was assigned to the triangles by
Ecotect. This should have some resemblance to the light type you used
when you placed the lights.

5) do the usual Radiance stuff with the new scene files:

oconv geometry.rad lights.rad > scene.oct
rvu scene.oct # to check that there are lights in the scene
[rpict/rtrace as desired]


The benefit of this method is that you can control each step and
modify the output or type of the light fittings. If you define and
export the lights in Ecotect you have to replace the whole scene
whenever you make a change to the fitting.

Regards,
Thomas


From grobe at gmx.net  Thu Feb  3 11:52:47 2011
From: grobe at gmx.net (Lars O. Grobe)
Date: Thu, 03 Feb 2011 20:52:47 +0100
Subject: [Radiance-general] Stadium light
In-Reply-To: <31A1F95173EDC043A63B0B06D158CE074414B67B5F@NTEXCHAN.kellercomp.local>
References: <mailman.1.1296504000.46250.radiance-general@radiance-online.org>
	<31A1F95173EDC043A63B0B06D158CE074414B67B5F@NTEXCHAN.kellercomp.local>
Message-ID: <1296762767.2691.9.camel@lars-laptop>

Am Donnerstag, den 03.02.2011, 14:16 -0500 schrieb Tim Metcalfe:
> I have the ies file for an electric lightsource how do I put it into ecotect to use it or convert it to rad file?

You can convert IES files into Radiance using ies2rad. The output will
typically be a .rad-file, containing a light material, with its angular
distribution modified by a brightfunc modifier, plus a surface that this
light material will be applied to. The second file written by ies2rad
will have a .dat-extension, and it contains the candela distribution a
the input file.

It is somehow easy to introduce errors when working with ies files. Be
especially  careful about:

- units(!!)
- about wether your ies file contains absolute values or relative to a
given luminous flux of the source,
- in most cases you want to go with white sources, unless e.g. you
combine different lamps with different color temperatures,
- the coordinate systems in the ies specifications are not all that
obvious, and it is always a good idea to put the source into a simple
scene and look at the illuminance on a plane below and besides for
plausibility checks...

Cheers, Lars.



From Robert.Guglielmetti at nrel.gov  Thu Feb  3 12:58:29 2011
From: Robert.Guglielmetti at nrel.gov (Guglielmetti, Robert)
Date: Thu, 3 Feb 2011 13:58:29 -0700
Subject: [Radiance-general] Stadium light
In-Reply-To: <1296762767.2691.9.camel@lars-laptop>
Message-ID: <C97063EE.3348%robert.guglielmetti@nrel.gov>

I created ltview for the purpose of doing a quick sanity check that your
ies file got converted properly and is oriented as you expect. It's a hack
of objview, and just puts an open ended box around the light source so you
can observe the distribution.

It assumes feet is the unit of measurement; if you used meters add -bs .62
to scale the box around the luminaire so it's useful. Download here:

http://www.rumblestrip.org/2004/05/10/ltview-a-radiance-utility/
 
Rob Guglielmetti  IESNA, LEED AP
Commercial Buildings Research Group
National Renewable Energy Laboratory
1617 Cole Blvd MS:RSF202
Golden, CO 80401
T. 303.275.4319
F. 303.630.2055
E. robert.guglielmetti at nrel.gov





On 2/3/11 12:52 PM, "Lars O. Grobe" <grobe at gmx.net> wrote:

>Am Donnerstag, den 03.02.2011, 14:16 -0500 schrieb Tim Metcalfe:
>> I have the ies file for an electric lightsource how do I put it into
>>ecotect to use it or convert it to rad file?
>
>You can convert IES files into Radiance using ies2rad. The output will
>typically be a .rad-file, containing a light material, with its angular
>distribution modified by a brightfunc modifier, plus a surface that this
>light material will be applied to. The second file written by ies2rad
>will have a .dat-extension, and it contains the candela distribution a
>the input file.
>
>It is somehow easy to introduce errors when working with ies files. Be
>especially  careful about:
>
>- units(!!)
>- about wether your ies file contains absolute values or relative to a
>given luminous flux of the source,
>- in most cases you want to go with white sources, unless e.g. you
>combine different lamps with different color temperatures,
>- the coordinate systems in the ies specifications are not all that
>obvious, and it is always a good idea to put the source into a simple
>scene and look at the illuminance on a plane below and besides for
>plausibility checks...
>
>Cheers, Lars.
>
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general at radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general



From caria.roberto at tiscali.it  Fri Feb  4 13:18:48 2011
From: caria.roberto at tiscali.it (caria.roberto at tiscali.it)
Date: Fri, 4 Feb 2011 22:18:48 +0100 (CET)
Subject: [Radiance-general] Daysim/Gendaylit
Message-ID: <21124613.1243501296854328100.JavaMail.defaultUser@defaultHost>

Dear all,
I have a question about Daysim and Gendaylit.

I`m simulating a simple room to link the lighting performance to 
thermal ones and to do it i`m using Daysim and gendaylit.

I add into Daysim the Direct Normal Radiation and the Diffuse 
Horizontal Radiation from epw file (London).

Then I lunched the simulation in Daysim only with an external sensor 
point, first simulation with no bounces and then with ab= 4 and I got 
Direct and Global Horizontal hourly illuminance values (Lux) and 
Irradiance values (W/mq)

The parameters used to do it are:    

-ab 4 -ad 1024 -as 256 -ar 512 -aa 0.1 -lr 2 -st 0.015 -sj 1 -lw 
0.004 -dj 0.5 -ds 0.001 -dr 2 -dp 512

Check: there are little difference (1-2%) about Horizontal DIffuse 
and Direct Irradiance and during sunrise and sunset this difference is 
about 5% for Direect Irrradiance.

Then I created a sky by gendaylit (Radiance) for 3 hours (9:30, 12:
30, 15:30) and for three days (21 March, 21 June and 21 December), 
adding the hourly irradiance values from epw, to check the difference 
to illuminace provided by Gendaylit (Radiance) and Daysim by means of a 
external sensor point.
Data values are:

Time	  Dir Norm Rad           Diff Ho Rad	
Mar 09:30	     420.00	                182.00	
Mar 12:30	     422.00	                238.00	
Mar 15:30	     184.00	                167.00	
			
Jun 09:30	      425.00	                 292.00
Jun 12:30	      316.00	                 374.00
Jun 15:30	      505.00	                 222.00
			
Dec 09:30	      162.00	                   50.00
Dec 12:30	      513.00	                   69.00	
Dec 15:30	          0.00	                   10.00

gendaylit $months $days $hours -a 51.5 -o 0 -m 0 -W $direct $diffuse 
> skies/perez_sky_$months.$days.$hours.rad


Dome.mat

skyfunc glow skyglow
0
0
4 1 1 1 0             

skyglow source sky
0
0
4 0 0 1 180

oconv -w skies/perez_sky_$months.$days.$hours.rad dome.mat > 
oct/perez_sky_$months.$days.$hours.oct

rtrace -h- -w- $param -I -opv oct/perez_sky_$months.$days.$hours.oct 
< point.grd | rcalc -e '$1=$1; $2=$2; $3=$3; $4=($4*0.265+$5*0.670+$6*0.
065)*179' > result.illum.$months.$days.$hours.rs &

Parameters for rtrace are the same used to generate the sky by 
Daysim.

I have found these difference (illuminance):

Time	  Dir Norm Rad           Diff Ho Rad      Horiz_Direct Ill (lux) 
- Daysim     Horiz_Direct Ill (lux) - Gendaylit         
Mar 09:30	     420.00	                182.00	          
18000                                        
18213                                              
Mar 12:30	     422.00	                238.00	          
24302                                        24494   
Mar 15:30	     184.00	                167.00	           
6319                                          6294
			
Jun 09:30	      425.00	                 292.00                        
30854                                        31099
Jun 12:30	      316.00	                 374.00                        
26763                                        26899
Jun 15:30	      505.00	                 222.00                        
31907                                        31870
			
Dec 09:30	      162.00	                   
50.00                        
1133                                          1197
Dec 12:30	      513.00	                   69.00	          
10444                                        10519
Dec 15:30	          0.00	                   
10.00                               
0                                              0


Time	  Dir Norm Rad           Diff Ho Rad      Horiz_Glob Ill (lux) - 
Daysim     Horiz_Glob Ill (lux) - Gendaylit
Mar 09:30	     420.00	                182.00	          
41477                                        30154       
Mar 12:30	     422.00	                238.00	          
54439                                        39691   
Mar 15:30	     184.00	                167.00	          
25891                                        16146
			
Jun 09:30	      425.00	                 292.00                        
66633                                        49155
Jun 12:30	      316.00	                 374.00                        
70027                                        48607
Jun 15:30	      505.00	                 222.00                        
59991                                        46200
			
Dec 09:30	      162.00	                   
50.00                        
7539                                          4463
Dec 12:30	      513.00	                   69.00	          
20718                                        15751
Dec 15:30	          0.00	                   
10.00                         
1144                                           597


As you can look at there are important difference in the Horiz 
Diffuse Illuminace.

I don`t know if my way is right but I`d like to know something about 
it and what sky is better to use to get the horly internal illuminace 
values to link these ones to EnergyPlus or Trnsys.

Thanks a lot


Sorry for my personal english.


Roberto










    


Supera i limiti: raddoppia la velocit? da 10 a 20 Mega! Risparmia con Tutto Incluso: telefono + adsl 20 mega a soli 29,95 ? al mese per due anni!SCONTO DI 240 EURO!http://abbonati.tiscali.it/telefono-adsl/prodotti/tc/tuttoincluso/?WT.mc_id=01fw


From tbleicher at googlemail.com  Fri Feb  4 15:48:22 2011
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Fri, 4 Feb 2011 18:48:22 -0500
Subject: [Radiance-general] Daysim/Gendaylit
In-Reply-To: <21124613.1243501296854328100.JavaMail.defaultUser@defaultHost>
References: <21124613.1243501296854328100.JavaMail.defaultUser@defaultHost>
Message-ID: <AANLkTinSXT+C47vJfPfdEi3FEte0P_B1mRK++MfuXd_s@mail.gmail.com>

Ciao Roberto.

I'll start with the end of your e-mail:

> I don`t know if my way is right but I`d like to know
> something about?it and what sky is better to use
> to get the horly internal illuminace?values to link
> these ones to EnergyPlus or Trnsys.

So you really want to know internal illuminance values?for a given
scene for the whole year? (I hope you know?you can get the external
illuminance from the epw file.)

My summary of your problem:

Your idea is to use Daysim (or Radiance) with a climat data file to
calculate the internal illuminance values and plug these into E+ or
whatever. Your first step is to calculate external values in an empty
scene to "validate" your sky model. Doing this in Daysim and Radiance
(with gendaylit) you got two sets of results with significant
differences.

> The parameters used to do it are:
>
> -ab 4 -ad 1024 -as 256 -ar 512 -aa 0.1 -lr 2 -st 0.015 -sj 1 -lw
> 0.004 -dj 0.5 -ds 0.001 -dr 2 -dp 512

I hope you did have a -I option in there some where. You also only
need to increase your "-ab" to 1 to get the "diffuse" part.

Now the interesting bit:

If you look at your results or the global horizontal values you will
see that the Daysim values are roughly 25%-30% higher than those
calculated in Radiance. However, they are consistently higher (which
is good). I would expect that the difference is a result of the
approach the two applications have:

1) Daysim calculates a sky component and just maps the sky onto this
distribution to get a particular result.

2) Radiance used the sky directly in it's raytracing calculation.

Both sets of results are bound to be different from the actually
observed illuminance on the ground. You can extract the illuminance
values from the EPW file and compare them to the calculated results.
If you find that one of the sets is reasonably accurate go with that.

You can also use the measured values to 'calibrate' your calculations
and scale the internal results according to a reference calculation
outside. If your reference point value is different from the EPW
record you increase or decrease the calculated illuminance to
compensate for the overall difference.

You can do this either with the Daysim or Radiance results. I would
guess that a calculation for a whole year would be faster in Daysim.

Regards,
Thomas


From caria.roberto at tiscali.it  Mon Feb  7 04:50:46 2011
From: caria.roberto at tiscali.it (caria.roberto at tiscali.it)
Date: Mon, 7 Feb 2011 13:50:46 +0100 (CET)
Subject: [Radiance-general] R: Radiance-general Digest, Vol 84, Issue 6
Message-ID: <13283164.1134831297083046116.JavaMail.defaultUser@defaultHost>

Ciao Thomas,
thank you for your reply.

>So you really want to know internal illuminance values?for a given
>scene for the whole year? (I hope you know?you can get the external
>illuminance from the epw file.)

R: I know I can get the external illuminace from epw file but no all 
locations have these data values (if you open ITA_Cagliari Elmas you 
can see it is that)

I think if I consider the Illuminance values taken from epw file I 
can use gensky and insert them as -B and -R parameters (dividing them 
to 179, before) and add +s when I have both values and -c when I have 
only the diffuse Illuminance. (Can you confirm it?)

   

>My summary of your problem:

>Your idea is to use Daysim (or Radiance) with a climat data file to
>calculate the internal illuminance values and plug these into E+ or
>whatever. Your first step is to calculate external values in an 
empty
>scene to "validate" your sky model. Doing this in Daysim and 
Radiance
>(with gendaylit) you got two sets of results with significant
>differences.

I did it as you write.

>I hope you did have a -I option in there some where. You also only
need to increase your "-ab" to 1 to get the "diffuse" part.

I used -I option. 

>Now the interesting bit:
>
>If you look at your results or the global horizontal values you 
will
>see that the Daysim values are roughly 25%-30% higher than those
>calculated in Radiance. However, they are consistently higher 
(which
>is good). I would expect that the difference is a result of the
>approach the two applications have:

Why is good to get higher values? 


>1) Daysim calculates a sky component and just maps the sky onto 
this
>distribution to get a particular result.
>
>2) Radiance used the sky directly in it's raytracing calculation.
>
>Both sets of results are bound to be different from the actually
>observed illuminance on the ground. You can extract the illuminance
>values from the EPW file and compare them to the calculated 
results.
>If you find that one of the sets is reasonably accurate go with 
that.

I did it and there is a small difference between epw and daysim data 
illuminance (about 2-3%), so I suppose I can use illuminance values 
provided by Daysim.   

So, using the same input (Irradiance values comes from epw file) the 
sky created by Daysim works better than a sky generated by gendaylit? 
Iin which conditions can I use gendaylit?

So, if i want to show particular illuminance condition in radiance (i.
e. 12:00 on 21 March) by mean a falsecolor image with illuminace 
values, is better to use gensky with +s or -c 
depending on if there is direct and diffuse illuminance or only 
diffuse one, using the illuminance data values from daysim or epw (if I 
have it)?

If my weather file has not illuminance data values, I must use Daysim 
to generate the illuminace external values and use them in Radiance to 
make analysis (by means gensky); I can`t use gendaylit (starting from 
Irradiance value provided by the weather file) because it provides 
illuminance values are not correct compared to measured ones.

Can you confirm it?

>You can also use the measured values to 'calibrate' your 
calculations
>and scale the internal results according to a reference calculation
>outside. If your reference point value is different from the EPW
>record you increase or decrease the calculated illuminance to
>compensate for the overall difference.

Ok, I can do it if I have measured data. 


Sorry for many questions and thanks a lot in advance.

Ciao

Roberto




------------------------------

_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general


End of Radiance-general Digest, Vol 84, Issue 6
***********************************************





Supera i limiti: raddoppia la velocit? da 10 a 20 Mega! Risparmia con Tutto Incluso: telefono + adsl 20 mega a soli 29,95 ? al mese per due anni!SCONTO DI 240 EURO!http://abbonati.tiscali.it/telefono-adsl/prodotti/tc/tuttoincluso/?WT.mc_id=01fw


From tbleicher at googlemail.com  Mon Feb  7 07:24:08 2011
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Mon, 7 Feb 2011 10:24:08 -0500
Subject: [Radiance-general] R: Radiance-general Digest, Vol 84, Issue 6
In-Reply-To: <13283164.1134831297083046116.JavaMail.defaultUser@defaultHost>
References: <13283164.1134831297083046116.JavaMail.defaultUser@defaultHost>
Message-ID: <AANLkTi=D+V=wN8SFr3Jm7p_YB-TEkp3CC-QrWLV5owrv@mail.gmail.com>

Hello again.

On Mon, Feb 7, 2011 at 7:50 AM, caria.roberto at tiscali.it
<caria.roberto at tiscali.it> wrote:
> R: I know I can get the external illuminace from epw file but no all
> locations have these data values (if you open ITA_Cagliari Elmas
> you can see it is that)

Well, you mentioned London in your first email. The EPW
file for London contains illuminance data.

> I think if I consider the Illuminance values taken from epw file
> I can use gensky and insert them as -B and -R parameters
> (dividing them to 179, before) and add +s when I have both
> values and -c when I have only the diffuse Illuminance.
> (Can you confirm it?)

For Sicily +s might actually be appropriate :). If you have some
cloudiness you can also use +i and -i. Sometimes you also get
a "sky cover" index in the EPW file which you could use to pick
the right sky model.

>> Now the interesting bit:
>>
>> If you look at your results or the global horizontal values
>> you will see that the Daysim values are roughly 25%-30%
>> higher than those calculated in Radiance. However, they
>> are consistently higher (which is good).
>
> Why is good to get higher values?

Higher (or lower) values as such make no difference. But if
the difference is the same for various sky situations you can
assume that it does not depend on your input and is due to
the different algorithms the two applications use. Is says
nothing about the correctness of each program, though. You
have to work that out by comparing the calculated results
with real measurements.


> I did it and there is a small difference between epw and
> daysim data illuminance (about 2-3%), so I suppose I can
> use illuminance values provided by Daysim.
>
> So, using the same input (Irradiance values comes from
> epw file) the sky created by Daysim works better than a
> sky generated by gendaylit?

To my knowledge Daysim also uses gendaylit (Perez model).
They may adjust their values to match the recorded input in a
second step which you would have to do manually if you were
to do the same calculations in Radiance.

> Iin which conditions can I use gendaylit?

When you use Radiance and gendaylit you will find that in
early morning and evening hours the results from gendaylit
are way off. This is either a shortcoming in the algorithm or
just a problem of the implementation. If that happens you
can use gensky for this particular situation; it's better than
dropping the record completely from the evaluation.

Side note: I remember reading something about this being
a bug in gendaylit that was fixed with a patch. But that was
in the 90s and I don't know if this patch is included in the
commonly available gendaylit source code.

> So, if i want to show particular illuminance condition in
> radiance (i.e. 12:00 on 21 March) by mean a falsecolor
> image with illuminace values, is better to use gensky
> with +s or -c depending on if there is direct and diffuse
> illuminance or only diffuse one, using the illuminance data
> values from daysim or epw (if I have it)?

There are two topics here:

1) How do you get illuminance values if the EPW file
   doesn't have them.

2) Which sky model (and options) do you use to match
   a given set of irradiance/illuminance values?

First point:

The only reliable way to get illuminance is to measure it
on site under the real world conditions. Point. If you don't
have that you need the sky efficacy to convert irradiance
to illuminance but that changes for any given location and
sky condition!

Therefore if you don't have measured illuminance values
you have to assume a reasonable sky efficacy. The built-in
value in Radiance is 179 lm/W. This value is only used at
the end to convert calculated irradiance to illuminance (the
magic "*179" in the command line).

If you are more interested in a relative comparison over the
year and not so much in absolute illuminance values at a
particular date you don't have to worry much. You can still
compare the illuminance images even if they are say 15%
too bright.

However, if you want to calculate the energy savings for a
daylight liked artificial lighting system that switches off at
500 lux you'd better get a set of real world measurement to
have some data you can use as calibration points.

Now the second point:

No. If you use Radiance you have to check that the irradiance
from your sky model matches that of the EPW for every given
sky. It does not matter if you use gendaylit or gensky. Both
work with irradiance input ("-P" for gendaylit and "-r" and "-B"
for gensky). Gendaylit is commonly used because it creates
a more sophisticated sky distribution than gensky. You also
have to chose to add a sun or not (and which model you want
to use in the case of gensky.

You now calculate the irradiance of a single point on a plane
and compare that with the "global horizontal irradiance" from
the EPW file. If the two values differ this is just a sign that
the sky model does not fit perfectly the actual atmospheric
conditions. Modify your sky description to compensate for
the difference and check that the global irradiance matches
your calculations.

If you don't have illuminance values you are set. Repeat the
above process for all dates of the year to find matching sky
descriptions which you can use in a Radiance simulation.

If you do have illuminance values you calculate the sky efficacy
from the ratio of the irradiance and illuminance values and use
this factor to convert the rendered irradiance picture to a falsecolor
illuminance picture (or anywhere else where you want to calculate
illuminance values).

If you have a good estimate for the sky efficacy you should
also use that instead of the built in value.

> If my weather file has not illuminance data values, I must
> use Daysim to generate the illuminace external values
> and use them in Radiance to make analysis (by means gensky);
> I can`t use gendaylit (starting from Irradiance value provided
> by the weather file) because it provides illuminance values
> are not correct compared to measured ones.
> Can you confirm it?

No. If you think the results of Daysim are accurate enough
then you should use Daysim to calculate your images if it
is not too limited for your purpose. It will save you all the
steps mentioned above and for a simulation covering the
whole year it might also be faster.

There is no need to use Daysim to calculate illuminance
values. You (and I) have no idea which conversion factors
are used to get to these values.

If you use Radiance you can (and should) modify the sky
descriptions generated by gensky or gendaylit until they
match best the available data. Then you can use the sky
in a simulation and be confident that the results will match
the reality within the limits of the simulation.

The replication of real world atmospheric conditions is quite
tricky. Don't expect your results to be too accurate. For the
type of evaluation that's usually done on the basis of climate
data files this inaccuracy does not matter much (cumulative
or relative evaluations). But don't depend too much on the
results of a single calculation out of a whole year's worth of
data.

Regards,
Thomas


From tbleicher at googlemail.com  Wed Feb  9 19:17:40 2011
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Wed, 9 Feb 2011 22:17:40 -0500
Subject: [Radiance-general] wxfalsecolor v0.50 released - contains important
	bug fix
Message-ID: <AANLkTinJxBHXi=rQ3j4Cc4piy8h0W9nnoifPUrtwmkMw@mail.gmail.com>

A new version of wxfalsecolor.exe is available.

priority: *HIGH*

All users should update to this version.

This version fixes a bug which can lead to wrong spot values being displayed
for falsecolor images.

You can download the new version via the following link:

http://pyrat.googlecode.com/files/wxfalsecolor.exe

major changes:

This version adds command line support. Falsecolor2 options and new debug
options ('-v' and '-d') can now be given as command line arguments following
the falsecolor2 argument convention.

It also includes a new configuration file parser which will allow future
versions to read configuration options set by the user. This version will
create a configuration file in the user's %APPDATA% (Windows) or $HOME
directory on the first startup.

further changes:

* fixed a problem with the status bar that caused an error message to pop up
on close

* changed the start sequence so that the interface appears now before data
is loaded or a falsecolor conversion starts

* new automatic and manual update checks

* logging is now done via the Python logging module
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110209/2af89672/attachment.html>

From caria.roberto at tiscali.it  Thu Feb 10 02:07:19 2011
From: caria.roberto at tiscali.it (caria.roberto at tiscali.it)
Date: Thu, 10 Feb 2011 11:07:19 +0100 (CET)
Subject: [Radiance-general] Falsecolor and script by csh
Message-ID: <32770492.447841297332439047.JavaMail.defaultUser@defaultHost>

Hi all,
I created a pic file with this comand:

rpict -w-  view.vf -x 1600 -y 1600 -ab 5 -ad 4096 -as 4096 -ar 256 -
aa 0.2-t 60 oct/gensky_sky_$months[$i].$days[$i].$hours[$i].oct > 
pics/lum_gensky_sky_$months[$i].$days[$i].$hours[$i].pic

and everything is fine (I can see the pic and the value are correct)

When I use falsecolor I get a file with 1K size and the tiff comand 
gives me "bad picture:

falsecolor pics/lum_gensky_sky_$months[$i].$days[$i].$hours[$i].pic -
m 179 -s 10000 -l cd/m2 -n 10 > pics/lum_gen_sky_$months[$i].$days
[$i].$hours[$i].fc.pic

#ra_tiff -z  pics/lum_gen_sky_$months[$i].$days[$i].$hours[$i].fc.pic 
tiffs/lum_gensky_sky_$months[$i].$days[$i].$hours[$i].fc.tiff




Another question is about a script and the "if" function; the script 
is showen below:

foreach cloud (5 10 3 4 8 9 7 1 0 6 5)

      if ($cloud <= 3) then
               set sky = "+s"
                       else if ($cloud <= 7 && $cloud >= 4) then
               set sky = "+i"
                        else if ($cloud <= 10 && $cloud >= 8) then
              set sky = "-c"
       endif

      echo $sky
  
 end

It works fine, but if I use a data values, by a text file (data 
values put by one column), I get sintax error: 

set cloud = `cat data_sky/cloud.dat`

set i = 1

while ($i < 10)

echo cloud cover for index $i is $cloud[$i]

set value = `echo $cloud[$1] | cut -d '.' -f 1`
          if ($value <= 3) then
               set sky = "+s"											
          else if ($value <= 7 && $value >= 4) then
               set sky = "+i"
          else if ($value <= 10 && $value >= 8) then
               set sky = "-c"
          
          endif

	echo $sky
    @ i++
 
end

Maybe the if function is not able to read the data values?


Thanks a lot 

Roberto




Supera i limiti: raddoppia la velocit? da 10 a 20 Mega! Risparmia con Tutto Incluso: telefono + adsl 20 mega a soli 29,95 ? al mese per due anni!SCONTO DI 240 EURO!http://abbonati.tiscali.it/telefono-adsl/prodotti/tc/tuttoincluso/?WT.mc_id=01fw


From grobe at gmx.net  Thu Feb 10 03:47:58 2011
From: grobe at gmx.net (Lars O. Grobe)
Date: Thu, 10 Feb 2011 12:47:58 +0100
Subject: [Radiance-general] Falsecolor and script by csh
In-Reply-To: <32770492.447841297332439047.JavaMail.defaultUser@defaultHost>
References: <32770492.447841297332439047.JavaMail.defaultUser@defaultHost>
Message-ID: <4D53D06E.1000402@gmx.net>

Hi Roberto!

> When I use falsecolor I get a file with 1K size and the tiff comand
> gives me "bad picture:
>
> falsecolor pics/lum_gensky_sky_$months[$i].$days[$i].$hours[$i].pic -
> m 179 -s 10000 -l cd/m2 -n 10>  pics/lum_gen_sky_$months[$i].$days
> [$i].$hours[$i].fc.pic

You can pass the image data to be used as value input by falsecolor using

"falsecolor -i filename.hdr > output.hdr"

or by sending to to stdin, e.g.

"cat filename.hdr | falsecolor > output.hdr"

So just add a "-i" in front of the input filename in your script.

Besides that, I would recommend not to use the outdated pic-extension, 
but the officially registred hdr-extension. But that is a side-not.

> echo cloud cover for index $i is $cloud[$i]

Does this work up to here?

> Maybe the if function is not able to read the data values?

I have to admit that I do not like bash when working on strings and 
arrays too much. I usually switch to perl whenever I need to process 
strings, even if it is just splitting a record.

Cheers, Lars.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 3740 bytes
Desc: S/MIME Cryptographic Signature
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110210/00b5a6cc/attachment.bin>

From tbleicher at googlemail.com  Thu Feb 10 06:08:56 2011
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Thu, 10 Feb 2011 09:08:56 -0500
Subject: [Radiance-general] Falsecolor and script by csh
In-Reply-To: <32770492.447841297332439047.JavaMail.defaultUser@defaultHost>
References: <32770492.447841297332439047.JavaMail.defaultUser@defaultHost>
Message-ID: <AANLkTikgTBBk-z__g6hZ=5XU0eXkOF1EoHH8Fw+oZ4YG@mail.gmail.com>

Hello.

On Thu, Feb 10, 2011 at 5:07 AM, caria.roberto at tiscali.it <
caria.roberto at tiscali.it> wrote:

When I use falsecolor I get a file with 1K size and the tiff comand
> gives me "bad picture:
>
> falsecolor pics/lum_gensky_sky_$months[$i].$days[$i].$hours[$i].pic -
> m 179 -s 10000 -l cd/m2 -n 10 > pics/lum_gen_sky_$months[$i].$days
> [$i].$hours[$i].fc.pic
>

falsecolor works like a UNIX filter: it expects data at stdin and writes
modified data to stdout. If you want to specify a filename as input you have
to use the '-i' option.

Writing programs like filters allows you to combine the output of one
program to connect directly with the input of the next without intermediate
(potentially large) files.

Another question is about a script and the "if" function; the script
> is showen below:
>

[...]


> set cloud = `cat data_sky/cloud.dat`
> set i = 1
> while ($i < 10)
>     echo cloud cover for index $i is $cloud[$i]
>     set value = `echo $cloud[$1] | cut -d '.' -f 1`
>          if ($value <= 3) then
>               set sky = "+s"
>          else if ($value <= 7 && $value >= 4) then
>               set sky = "+i"
>          else if ($value <= 10 && $value >= 8) then
>               set sky = "-c"

         endif

         echo $sky
>    @ i++
> end
>
> Maybe the if function is not able to read the data values?
>

When you specified your array in the first example the numbers were
interpreted as numbers. When you read from a file they are at first just
strings. The syntax error is raised because CSH recognises the variable as a
string and wants quotes around the left side of the test ( if ( "$value" <=
3 ) ... ). However, that's not your problem. You have to convert the strings
to numbers to compare against another number in the if condition. Here is a
(slightly cleaned up) version. Note the line with the `expr ...` in it.

set cloud = `cat cloud_cover.dat`
set i = 1
while ($i<10)
    echo "cloud cover for index $i is $cloud[$i]"
    set value_s = `echo $cloud[$i] | cut -d '.' -f 1`
    set value = `expr $value_s`

    if ( $value <= 3 ) then
        set sky = "+s"
    else if ( $value <= 7 ) then
        set sky = "+i"
    else
        set sky = "-c"
    endif

    echo "cloud: $cloud[$i]   sky: $sky"
    @ i++
end


PS: If you are new to shell scripting you should consider switching to bash.
It's more popular and doesn't have as many syntax oddities as CSH.

Thomas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110210/544827d9/attachment.html>

From Galen.Burrell at arup.com  Thu Feb 10 13:03:37 2011
From: Galen.Burrell at arup.com (Galen Burrell)
Date: Thu, 10 Feb 2011 13:03:37 -0800
Subject: [Radiance-general] dctimestep & rtcontrib with sky subdivisions > 1
Message-ID: <912E8E33E0563B448D0CB0FAA4E874D16F6715EB0B@AMXEXC02.global.arup.com>

Hi All,
I'm using rtcontrib for some glare studies (producing time series
renderings for the year).  I'm puzzled by an error i get when using
dctimestep & rtcontrib with sky subdivisions > 1.

This is the command i'm issuing:
vwrays -ff -x 400 -y 400 -vf fisheye.vf | \
rtcontrib $options -ffc `vwrays -d -x 400 -y 400 -vf fisheye.vf` -fo -e MF:2 \
-f reinhart.cal -b rbin -bn Nrbins -o tmp/p%03d.hdr -m sky_glow -w 
octrees/geom_sky.oct

then to combine these for a particular sky:

gendaylit $month $day $hour -W $radiation | genskyvec -m 2 | dctimestep
tmp/p%03d.hdr > temp.hdr

this command always results in the following error:
system - error reading picture 'tmp/p000.hdr'

tmp/p000.hdr does exist, as do all the other 248 images (for MF:2).  They
are all only 4 kb however, which of course is wrong.

Everything works fine with the tregenza sky, for example:

vwrays -ff -x 400 -y 400 -vf fisheye.vf | \
rtcontrib $options -ffc `vwrays -d -x 400 -y 400 -vf fisheye.vf` -fo \
-f tregenza.cal -b tbin -bn Ntbins -o tmp/p%03d.hdr -m sky_glow -w
octrees/geom_sky.oct


Or even:

vwrays -ff -x 400 -y 400 -vf fisheye.vf | \
rtcontrib $options -ffc `vwrays -d -x 400 -y 400 -vf fisheye.vf` -fo -e
MF:1 \
-f reinhart.cal -b rbin -bn Nrbins -o tmp/p%03d.hdr -m sky_glow -w
octrees/geom_sky.oct

...And using 'genskyvec -m 1' in the next command.

I have a feeling it's something obvious and hoping another set of eyes
will help me find it.

Thanks!
Galen

____________________________________________________________
Electronic mail messages entering and leaving Arup  business
systems are scanned for acceptability of content and viruses



From amcneil at lbl.gov  Thu Feb 10 13:51:01 2011
From: amcneil at lbl.gov (Andy McNeil)
Date: Thu, 10 Feb 2011 13:51:01 -0800
Subject: [Radiance-general] dctimestep & rtcontrib with sky subdivisions
	> 1
In-Reply-To: <912E8E33E0563B448D0CB0FAA4E874D16F6715EB0B@AMXEXC02.global.arup.com>
References: <912E8E33E0563B448D0CB0FAA4E874D16F6715EB0B@AMXEXC02.global.arup.com>
Message-ID: <4E907D83-FD74-4E65-ABE8-3A31E0221B6B@lbl.gov>

Hi Galen,

> tmp/p000.hdr does exist, as do all the other 248 images (for MF:2). 

Actually there should be 578 images, so you're probably exceeding the limit on number of open files.  On a mac the default is 256.  Once you hit the limit nothing else is written and you're left with a bunch of image files with a header and no data.

To check the limit type:
ulimit -a

To change the limit to 1024:
ulimit -n 1024

Changing it this way only applies to the current shell.  If you use a shell script you might need to add it to the script.

- Andy




On Feb 10, 2011, at 1:03 PM, Galen Burrell wrote:

> Hi All,
> I'm using rtcontrib for some glare studies (producing time series
> renderings for the year).  I'm puzzled by an error i get when using
> dctimestep & rtcontrib with sky subdivisions > 1.
> 
> This is the command i'm issuing:
> vwrays -ff -x 400 -y 400 -vf fisheye.vf | \
> rtcontrib $options -ffc `vwrays -d -x 400 -y 400 -vf fisheye.vf` -fo -e MF:2 \
> -f reinhart.cal -b rbin -bn Nrbins -o tmp/p%03d.hdr -m sky_glow -w 
> octrees/geom_sky.oct
> 
> then to combine these for a particular sky:
> 
> gendaylit $month $day $hour -W $radiation | genskyvec -m 2 | dctimestep
> tmp/p%03d.hdr > temp.hdr
> 
> this command always results in the following error:
> system - error reading picture 'tmp/p000.hdr'
> 
> tmp/p000.hdr does exist, as do all the other 248 images (for MF:2).  They
> are all only 4 kb however, which of course is wrong.
> 
> Everything works fine with the tregenza sky, for example:
> 
> vwrays -ff -x 400 -y 400 -vf fisheye.vf | \
> rtcontrib $options -ffc `vwrays -d -x 400 -y 400 -vf fisheye.vf` -fo \
> -f tregenza.cal -b tbin -bn Ntbins -o tmp/p%03d.hdr -m sky_glow -w
> octrees/geom_sky.oct
> 
> 
> Or even:
> 
> vwrays -ff -x 400 -y 400 -vf fisheye.vf | \
> rtcontrib $options -ffc `vwrays -d -x 400 -y 400 -vf fisheye.vf` -fo -e
> MF:1 \
> -f reinhart.cal -b rbin -bn Nrbins -o tmp/p%03d.hdr -m sky_glow -w
> octrees/geom_sky.oct
> 
> ...And using 'genskyvec -m 1' in the next command.
> 
> I have a feeling it's something obvious and hoping another set of eyes
> will help me find it.
> 
> Thanks!
> Galen
> 
> ____________________________________________________________
> Electronic mail messages entering and leaving Arup  business
> systems are scanned for acceptability of content and viruses
> 
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general



From amcneil at lbl.gov  Mon Feb 14 10:52:25 2011
From: amcneil at lbl.gov (Andy McNeil)
Date: Mon, 14 Feb 2011 10:52:25 -0800
Subject: [Radiance-general] Save The Date - Radiance Workshop
Message-ID: <43793542-D316-48F7-AB27-40929618E39C@lbl.gov>

Hello Everyone,

I wanted to let you know that we've settled on a date for the Radiance workshop.  The main workshop will be Aug. 25th and 26th.  A pre-workshop seminar day will occur on Aug. 24th.

We've decided to hold the workshop in August to allow more participation from academic institutions.  I hope the date is suitable for everyone.  I know August is a common time for family vacations, so I'll also mention that the Northern California is a common vacation destination.

Andy


Andy McNeil
Windows & Daylighting Research Group
Lawrence Berkeley National Laboratory




-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110214/5374b7ea/attachment.html>

From kzelenay at berkeley.edu  Mon Feb 14 15:16:58 2011
From: kzelenay at berkeley.edu (Krystyna Zelenay)
Date: Mon, 14 Feb 2011 15:16:58 -0800
Subject: [Radiance-general] Low simulated illuminance levels under direct sun
Message-ID: <AANLkTik9DO1qNL3sggYdUD4+6BGjuTBqOQkWW1E0bhW4@mail.gmail.com>

Hi,

I am trying to develop a Radiance model of an actual building.  I have
collected hourly global horiz. illum. on roof and vertical illum. on
facade (using a LI-COR sensor) and have been making hourly comparisons
between measured and simulated data. The building is surrounded by
several buildings which block much of the direct sun reaching the
facade - I've included the obstructions in the computer model.

While the simulated  global vertical illuminance levels on the facade
are within +/-10% of those measured on site under diffuse light
conditions (much of the light reaching the facade is diffuse due to
heavy exterior obstructions), I am getting a high error when for
simulated vs actual illuminance under direct sun. Under direct sun,
illuminance levels are underpredicted by 30% in the computer model.

The site is Berkeley, CA, and I used the Oakland weather file, so the
location should be very close in terms of latitude/longitude and I
double-checked the facade orientation (8 deg east of South). I
excluded all of the exterior obstructions and compared to illuminance
levels one might expect  under direct sun for that orientation using
daylight availability tables for San Francisco and the levels once
again seem low.

Here is a bit more info on the model:
CIE clear sky
-ab 5 -ad 1024 -as 256 -ar 1064 -aa 0.1
Max. dimension of the site/model modeled is 4,200 ft

Does anyone have any idea why illuminance levels under direct sun
might be underpredicted?

Thank you,

Krystyna

M.S. in Architecture student
Department of Architecture
University of California - Berkeley


From gregoryjward at gmail.com  Mon Feb 14 16:02:11 2011
From: gregoryjward at gmail.com (Greg Ward)
Date: Mon, 14 Feb 2011 16:02:11 -0800
Subject: [Radiance-general] Low simulated illuminance levels under
	direct sun
In-Reply-To: <AANLkTik9DO1qNL3sggYdUD4+6BGjuTBqOQkWW1E0bhW4@mail.gmail.com>
References: <AANLkTik9DO1qNL3sggYdUD4+6BGjuTBqOQkWW1E0bhW4@mail.gmail.com>
Message-ID: <98EC0CDF-0531-40A6-A94A-367A5724EB4C@lmi.net>

Hi Krystyna,

Did you use any of the calibration options to gensky (-r, -R, -b, or -B)?  If not, then it's surprising that your results are as close as this.  If you did use these options, then we should check the conversion factors and what measurements you based them on.  Provided you have a separate measure of sun and sky and the rest of the parameters are correct, you should get good agreement with the open-sky test case.

Some good tips on setting gensky parameters may be found in Axel Jacob's Radiance tutorial, which is currently linked at:

	http://luminance.londonmet.ac.uk/learnix/docs/radiance_tutorial.pdf

Best,
-Greg

> From: Krystyna Zelenay <kzelenay at berkeley.edu>
> Date: February 14, 2011 3:16:58 PM PST
> 
> Hi,
> 
> I am trying to develop a Radiance model of an actual building.  I have
> collected hourly global horiz. illum. on roof and vertical illum. on
> facade (using a LI-COR sensor) and have been making hourly comparisons
> between measured and simulated data. The building is surrounded by
> several buildings which block much of the direct sun reaching the
> facade - I've included the obstructions in the computer model.
> 
> While the simulated  global vertical illuminance levels on the facade
> are within +/-10% of those measured on site under diffuse light
> conditions (much of the light reaching the facade is diffuse due to
> heavy exterior obstructions), I am getting a high error when for
> simulated vs actual illuminance under direct sun. Under direct sun,
> illuminance levels are underpredicted by 30% in the computer model.
> 
> The site is Berkeley, CA, and I used the Oakland weather file, so the
> location should be very close in terms of latitude/longitude and I
> double-checked the facade orientation (8 deg east of South). I
> excluded all of the exterior obstructions and compared to illuminance
> levels one might expect  under direct sun for that orientation using
> daylight availability tables for San Francisco and the levels once
> again seem low.
> 
> Here is a bit more info on the model:
> CIE clear sky
> -ab 5 -ad 1024 -as 256 -ar 1064 -aa 0.1
> Max. dimension of the site/model modeled is 4,200 ft
> 
> Does anyone have any idea why illuminance levels under direct sun
> might be underpredicted?
> 
> Thank you,
> 
> Krystyna


From kzelenay at berkeley.edu  Mon Feb 14 20:02:33 2011
From: kzelenay at berkeley.edu (Krystyna Zelenay)
Date: Mon, 14 Feb 2011 20:02:33 -0800
Subject: [Radiance-general] Low simulated illuminance levels under
	direct sun
In-Reply-To: <98EC0CDF-0531-40A6-A94A-367A5724EB4C@lmi.net>
References: <AANLkTik9DO1qNL3sggYdUD4+6BGjuTBqOQkWW1E0bhW4@mail.gmail.com>
	<98EC0CDF-0531-40A6-A94A-367A5724EB4C@lmi.net>
Message-ID: <AANLkTinunUUG5yNWncAY1K1=Jn7UTP793r5bWDH+0ZN2@mail.gmail.com>

Hi Greg,

I got a response from the DIVA mailing list - the program does not
allow the user to input calibration factors (-r -R -b or -B) for the
gensky command (I chose to use Rhino in combination w/ the plugin
DIVA-for-Rhino since I do not have access to a Unix machine and
because of its user-friendly interface). Will see if I can workaround
this problem as described below.

Thank you,

Krystyna


On Mon, Feb 14, 2011 at 7:09 PM, J. Alstan Jakubiec <alstan at jakubiec.net> wrote:
Dear Krystyna,

DIVA does not pass any calibration factors to gensky from the weather
file. It is called as in the below example,
!gensky 09 21 09 +s -a -16 -o 48 -m 45

You can't put in the calibration factors using -r -R -b or -B as Greg
suggests via the DIVA GUI. However, by editing the filename_sky.rad in
your DIVA temp folder and by running the simulation using
filenameimg.bat you could short-circuit the GUI and add a calibration
flag to the gensky command. Note that every time you run a
visualization from the GUI, you'll need to re-edit the sky.rad file if
you decide to do this.

The other option, if you have direct and diffuse radiation data, is to
use the Perez sky distribution via gendaylit. DIVA has a gui frontend
to this which you can choose by selecting the Perez Sky option under
sky condition in the metrics dialog.

Best,
Alstan




On Mon, Feb 14, 2011 at 4:02 PM, Greg Ward <gregoryjward at gmail.com> wrote:
>
> Hi Krystyna,
>
> Did you use any of the calibration options to gensky (-r, -R, -b, or -B)? ?If not, then it's surprising that your results are as close as this. ?If you did use these options, then we should check the conversion factors and what measurements you based them on. ?Provided you have a separate measure of sun and sky and the rest of the parameters are correct, you should get good agreement with the open-sky test case.
>
> Some good tips on setting gensky parameters may be found in Axel Jacob's Radiance tutorial, which is currently linked at:
>
> ? ? ? ?http://luminance.londonmet.ac.uk/learnix/docs/radiance_tutorial.pdf
>
> Best,
> -Greg
>
> > From: Krystyna Zelenay <kzelenay at berkeley.edu>
> > Date: February 14, 2011 3:16:58 PM PST
> >
> > Hi,
> >
> > I am trying to develop a Radiance model of an actual building. ?I have
> > collected hourly global horiz. illum. on roof and vertical illum. on
> > facade (using a LI-COR sensor) and have been making hourly comparisons
> > between measured and simulated data. The building is surrounded by
> > several buildings which block much of the direct sun reaching the
> > facade - I've included the obstructions in the computer model.
> >
> > While the simulated ?global vertical illuminance levels on the facade
> > are within +/-10% of those measured on site under diffuse light
> > conditions (much of the light reaching the facade is diffuse due to
> > heavy exterior obstructions), I am getting a high error when for
> > simulated vs actual illuminance under direct sun. Under direct sun,
> > illuminance levels are underpredicted by 30% in the computer model.
> >
> > The site is Berkeley, CA, and I used the Oakland weather file, so the
> > location should be very close in terms of latitude/longitude and I
> > double-checked the facade orientation (8 deg east of South). I
> > excluded all of the exterior obstructions and compared to illuminance
> > levels one might expect ?under direct sun for that orientation using
> > daylight availability tables for San Francisco and the levels once
> > again seem low.
> >
> > Here is a bit more info on the model:
> > CIE clear sky
> > -ab 5 -ad 1024 -as 256 -ar 1064 -aa 0.1
> > Max. dimension of the site/model modeled is 4,200 ft
> >
> > Does anyone have any idea why illuminance levels under direct sun
> > might be underpredicted?
> >
> > Thank you,
> >
> > Krystyna
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general


From gbetti at fosterandpartners.com  Tue Feb 15 02:50:40 2011
From: gbetti at fosterandpartners.com (Giovanni Betti)
Date: Tue, 15 Feb 2011 10:50:40 -0000
Subject: [Radiance-general] Sunlight hours calculation in radiance
In-Reply-To: <AANLkTinunUUG5yNWncAY1K1=Jn7UTP793r5bWDH+0ZN2@mail.gmail.com>
References: <AANLkTik9DO1qNL3sggYdUD4+6BGjuTBqOQkWW1E0bhW4@mail.gmail.com><98EC0CDF-0531-40A6-A94A-367A5724EB4C@lmi.net>
	<AANLkTinunUUG5yNWncAY1K1=Jn7UTP793r5bWDH+0ZN2@mail.gmail.com>
Message-ID: <6F5225D6E15F954BB4E58EC25F6736C30661E405@corp3005.CORPORATE.FOSTER.NETWORK>

Dear List,

I was wondering if anybody could give me a hint on how to solve the
following problem: how to calculate sunlight hours hitting a surface
using Radiance.
My hunch is to use a modified version of gensky with -B set to 0 (no
diffuse component) and -R set to 1/179 and of course as many calls of
gensky as required to cover all the sunlight hours in the time period I
am interested in.
Of course it is a brute force approach but as I am just interested in
'hit or miss' type of results and -ab would beset to 0 it still seems
pretty fast.
The problem that I face is that each ray is weighted based on the angle
of incidence with the target surface. Is there a way of forcing radiance
to return only a yes/no type of value?

Thanks in advance for your help,

Best,

Giovanni


From grobe at gmx.net  Tue Feb 15 03:00:56 2011
From: grobe at gmx.net (Lars O. Grobe)
Date: Tue, 15 Feb 2011 12:00:56 +0100
Subject: [Radiance-general] Sunlight hours calculation in radiance
In-Reply-To: <6F5225D6E15F954BB4E58EC25F6736C30661E405@corp3005.CORPORATE.FOSTER.NETWORK>
References: <AANLkTik9DO1qNL3sggYdUD4+6BGjuTBqOQkWW1E0bhW4@mail.gmail.com><98EC0CDF-0531-40A6-A94A-367A5724EB4C@lmi.net>	<AANLkTinunUUG5yNWncAY1K1=Jn7UTP793r5bWDH+0ZN2@mail.gmail.com>
	<6F5225D6E15F954BB4E58EC25F6736C30661E405@corp3005.CORPORATE.FOSTER.NETWORK>
Message-ID: <4D5A5CE8.8000301@gmx.net>

Hi!

> The problem that I face is that each ray is weighted based on the angle
> of incidence with the target surface. Is there a way of forcing radiance
> to return only a yes/no type of value?

You may use pcomb to combine the images after applying a threshold to 
the pixel values (using the -e parameter to pass an expression) of each 
image.

Cheers, Lars.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 3740 bytes
Desc: S/MIME Cryptographic Signature
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110215/9e61357e/attachment-0001.bin>

From gbetti at fosterandpartners.com  Tue Feb 15 03:51:17 2011
From: gbetti at fosterandpartners.com (Giovanni Betti)
Date: Tue, 15 Feb 2011 11:51:17 -0000
Subject: [Radiance-general] Sunlight hours calculation in radiance
In-Reply-To: <4D5A5CE8.8000301@gmx.net>
References: <AANLkTik9DO1qNL3sggYdUD4+6BGjuTBqOQkWW1E0bhW4@mail.gmail.com><98EC0CDF-0531-40A6-A94A-367A5724EB4C@lmi.net>	<AANLkTinunUUG5yNWncAY1K1=Jn7UTP793r5bWDH+0ZN2@mail.gmail.com><6F5225D6E15F954BB4E58EC25F6736C30661E405@corp3005.CORPORATE.FOSTER.NETWORK>
	<4D5A5CE8.8000301@gmx.net>
Message-ID: <6F5225D6E15F954BB4E58EC25F6736C30661E40F@corp3005.CORPORATE.FOSTER.NETWORK>



Thanks Lars, 
I see how that's a possibility but it would mean running separate images
and to filter each of them. 
It might work on a run over a day in winter but it seems unpractical
over a longer period of time (if you where to do this over a year you
would end up with about 4k images!) I was planning to run only one
simulation with multiple sun positions. Eventually as an optimization
the sun position can be clustereed according to tregenza patches and
each patch weighted based on the number of sun hours it represents (so
you don't even need 4000 sun but maybe only 300...)
Any hint on that?
Thanks,

Giovanni

-----Original Message-----
From: Lars O. Grobe [mailto:grobe at gmx.net] 
Sent: 15 February 2011 11:01
To: Radiance general discussion
Subject: Re: [Radiance-general] Sunlight hours calculation in radiance

Hi!

> The problem that I face is that each ray is weighted based on the
angle
> of incidence with the target surface. Is there a way of forcing
radiance
> to return only a yes/no type of value?

You may use pcomb to combine the images after applying a threshold to 
the pixel values (using the -e parameter to pass an expression) of each 
image.

Cheers, Lars.



From grobe at gmx.net  Tue Feb 15 04:16:15 2011
From: grobe at gmx.net (Lars O. Grobe)
Date: Tue, 15 Feb 2011 13:16:15 +0100
Subject: [Radiance-general] Sunlight hours calculation in radiance
In-Reply-To: <6F5225D6E15F954BB4E58EC25F6736C30661E40F@corp3005.CORPORATE.FOSTER.NETWORK>
References: <AANLkTik9DO1qNL3sggYdUD4+6BGjuTBqOQkWW1E0bhW4@mail.gmail.com><98EC0CDF-0531-40A6-A94A-367A5724EB4C@lmi.net>	<AANLkTinunUUG5yNWncAY1K1=Jn7UTP793r5bWDH+0ZN2@mail.gmail.com><6F5225D6E15F954BB4E58EC25F6736C30661E405@corp3005.CORPORATE.FOSTER.NETWORK>	<4D5A5CE8.8000301@gmx.net>
	<6F5225D6E15F954BB4E58EC25F6736C30661E40F@corp3005.CORPORATE.FOSTER.NETWORK>
Message-ID: <4D5A6E8F.4000105@gmx.net>

Hi Giovanni!

> I see how that's a possibility but it would mean running separate images
> and to filter each of them.

I guess it would not be impossible, as renderings should complete very 
fast when considering only direct.

> simulation with multiple sun positions. Eventually as an optimization
> the sun position can be clustereed according to tregenza patches and
> each patch weighted based on the number of sun hours it represents (so
> you don't even need 4000 sun but maybe only 300...)
> Any hint on that?

The tregenza sky introduces limitations of the angular resolution. You 
may try a two-step approach:

First, for each patch, find out at how many time intervals the sun is 
covered by the patch. So a patch containing the sun solid angle 20 times 
a year, you would set the patch value to 20.

Second, run rtcontrib to find out which patch contributes to which 
pixel. Here you can apply your threshold just as described in my former 
email, so any pixel that is lid by a patch is set to the value (in 
hours) for the patch from step 1.

With a Tregenza grid, you would end up with 145 images, each pixel value 
corresponding to the number of hours of direct sun exposure from the 
related patch. Adding up all the 145 images in the third step should 
result in pixel values of direct sun exposure (hours) for all patches.

BTW if you follow an approach as typically used when working with 
Tregenza skies, and split the sun over n neighbouring patches, you would 
of course set the pixel value to 1/n instead.

I am not sure about better ways to achieve what you want to do, this is 
just one idea... any other proposals? I am sure others have done that 
before...

Cheers, Lars.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 3740 bytes
Desc: S/MIME Cryptographic Signature
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110215/a7c51f8c/attachment.bin>

From gbetti at fosterandpartners.com  Tue Feb 15 04:28:56 2011
From: gbetti at fosterandpartners.com (Giovanni Betti)
Date: Tue, 15 Feb 2011 12:28:56 -0000
Subject: [Radiance-general] Sunlight hours calculation in radiance
In-Reply-To: <4D5A6E8F.4000105@gmx.net>
References: <AANLkTik9DO1qNL3sggYdUD4+6BGjuTBqOQkWW1E0bhW4@mail.gmail.com><98EC0CDF-0531-40A6-A94A-367A5724EB4C@lmi.net>	<AANLkTinunUUG5yNWncAY1K1=Jn7UTP793r5bWDH+0ZN2@mail.gmail.com><6F5225D6E15F954BB4E58EC25F6736C30661E405@corp3005.CORPORATE.FOSTER.NETWORK>	<4D5A5CE8.8000301@gmx.net><6F5225D6E15F954BB4E58EC25F6736C30661E40F@corp3005.CORPORATE.FOSTER.NETWORK>
	<4D5A6E8F.4000105@gmx.net>
Message-ID: <6F5225D6E15F954BB4E58EC25F6736C30661E415@corp3005.CORPORATE.FOSTER.NETWORK>



Lars, 
the number of about 300 comes from subdividing each tregenza patch in 4
to increase angular resolution and then looking only at the occupied
patches, sorry for the confusion.

I would be interested as well in seeing how other people approached the
same problem though.

Thanks,

Giovanni

-----Original Message-----
From: Lars O. Grobe [mailto:grobe at gmx.net] 
Sent: 15 February 2011 12:16
To: Radiance general discussion
Subject: Re: [Radiance-general] Sunlight hours calculation in radiance

Hi Giovanni!

> I see how that's a possibility but it would mean running separate
images
> and to filter each of them.

I guess it would not be impossible, as renderings should complete very 
fast when considering only direct.

> simulation with multiple sun positions. Eventually as an optimization
> the sun position can be clustereed according to tregenza patches and
> each patch weighted based on the number of sun hours it represents (so
> you don't even need 4000 sun but maybe only 300...)
> Any hint on that?

The tregenza sky introduces limitations of the angular resolution. You 
may try a two-step approach:

First, for each patch, find out at how many time intervals the sun is 
covered by the patch. So a patch containing the sun solid angle 20 times

a year, you would set the patch value to 20.

Second, run rtcontrib to find out which patch contributes to which 
pixel. Here you can apply your threshold just as described in my former 
email, so any pixel that is lid by a patch is set to the value (in 
hours) for the patch from step 1.

With a Tregenza grid, you would end up with 145 images, each pixel value

corresponding to the number of hours of direct sun exposure from the 
related patch. Adding up all the 145 images in the third step should 
result in pixel values of direct sun exposure (hours) for all patches.

BTW if you follow an approach as typically used when working with 
Tregenza skies, and split the sun over n neighbouring patches, you would

of course set the pixel value to 1/n instead.

I am not sure about better ways to achieve what you want to do, this is 
just one idea... any other proposals? I am sure others have done that 
before...

Cheers, Lars.



From tbleicher at googlemail.com  Tue Feb 15 07:02:18 2011
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Tue, 15 Feb 2011 10:02:18 -0500
Subject: [Radiance-general] Sunlight hours calculation in radiance
In-Reply-To: <6F5225D6E15F954BB4E58EC25F6736C30661E415@corp3005.CORPORATE.FOSTER.NETWORK>
References: <AANLkTik9DO1qNL3sggYdUD4+6BGjuTBqOQkWW1E0bhW4@mail.gmail.com>
	<98EC0CDF-0531-40A6-A94A-367A5724EB4C@lmi.net>
	<AANLkTinunUUG5yNWncAY1K1=Jn7UTP793r5bWDH+0ZN2@mail.gmail.com>
	<6F5225D6E15F954BB4E58EC25F6736C30661E405@corp3005.CORPORATE.FOSTER.NETWORK>
	<4D5A5CE8.8000301@gmx.net>
	<6F5225D6E15F954BB4E58EC25F6736C30661E40F@corp3005.CORPORATE.FOSTER.NETWORK>
	<4D5A6E8F.4000105@gmx.net>
	<6F5225D6E15F954BB4E58EC25F6736C30661E415@corp3005.CORPORATE.FOSTER.NETWORK>
Message-ID: <AANLkTimxBaTXGHnch_gCeM4sZNQ2ixGrum0wKUmEmB63@mail.gmail.com>

On Tue, Feb 15, 2011 at 7:28 AM, Giovanni Betti <
gbetti at fosterandpartners.com> wrote:

I would be interested as well in seeing how other people approached the
> same problem though.
>

In the UK you have to calculate sunlight hours on the ground for planning
purposes.

We used a grid (as opposed to an image) and traced rays from each grid point
to the sun (direction was calculated from the gensky sun angle information).
We modified the rtrace command to print the material of the surface it hits
instead of the radiance. If the ray hits the sky (or nothing) it returns
"*", if it hits an obstruction it returns the material name. Then you just
need to count the "*"s in the output file to know your number of sunlight
hours.

For planning this is done on one day only, so we ran it with a 5 minute
resolution. It only took minutes for a reasonably sized grid and that
included all the preparation and evaluation in Lua (Ecotect). This method
generates a data array (x,y,n) which you have to visualise in a separate
step.

[On second thought you can probably combine this method with an vwrays based
preprocess to find all the surface points in the scene. For these scene
points you then evaluate the number of sunlight hours as above and return
the number as value for the image. Sounds like a longish simulation,
though.]

If you want pictures your idea with rtcontrib and optimised suns seems very
promising. A Tregenza subdivision is not optimal because the sun only
occupies about a quarter to a third of the sky. But you can run rtcontrib on
defined light sources so you just need to give all your suns a unique
identifier and you're set (the command line length might be somewhat
excessive, though). You can also interpolate between the sun positions
without loosing too much accuracy so you really only need to evaluate a few
hundred positions. It might be worth to split the summer from the winter.

If you want to read the sun light hours directly from the final image you
have to use a unified sun source and combine all the images with a cosine
corrected intensity for this particular surface which results in a 1 for
each bright pixel on that surface. The final image gives you a direct
representation of the sunlight hours. If you have more than one surface
(more than one surface orientation, that is) you should go with Lars'
recommendation and apply a threshold value to convert all bright pixels to a
1 value, regardless of the intensity.

Regards,
Thomas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110215/7bdadb40/attachment.html>

From daniel at lightfoundryllc.com  Tue Feb 15 07:40:48 2011
From: daniel at lightfoundryllc.com (Dan Glaser)
Date: Tue, 15 Feb 2011 08:40:48 -0700
Subject: [Radiance-general] Sunlight hours calculation in radiance
In-Reply-To: <6F5225D6E15F954BB4E58EC25F6736C30661E415@corp3005.CORPORATE.FOSTER.NETWORK>
References: <AANLkTik9DO1qNL3sggYdUD4+6BGjuTBqOQkWW1E0bhW4@mail.gmail.com><98EC0CDF-0531-40A6-A94A-367A5724EB4C@lmi.net>	<AANLkTinunUUG5yNWncAY1K1=Jn7UTP793r5bWDH+0ZN2@mail.gmail.com><6F5225D6E15F954BB4E58EC25F6736C30661E405@corp3005.CORPORATE.FOSTER.NETWORK>	<4D5A5CE8.8000301@gmx.net><6F5225D6E15F954BB4E58EC25F6736C30661E40F@corp3005.CORPORATE.FOSTER.NETWORK>	<4D5A6E8F.4000105@gmx.net>
	<6F5225D6E15F954BB4E58EC25F6736C30661E415@corp3005.CORPORATE.FOSTER.NETWORK>
Message-ID: <4D5A9E80.8070703@lightfoundryllc.com>

Hi Giovanni and Lars!
   I think you guys have some good approaches.
   If # of images it produces is an issue for the original "brute force" 
method you proposed for checking direct sun exposure on clear days, you 
can overwrite the same image every-time after doing an image check and 
incrementing a variable.  Below is pseudo-code:

[loop over timebounds (can have a sun above horizon check here too)]
     [create/overwrite image SunCheckImage]
     [if (pixel value of representative point in SunCheckImage > threshold)
         num_timesteps_in_sun++]
[print "I've been in the sun for " + num_timesteps_in_sun + " time steps"]
[delete SunCheckImage]

   Sorry, I do not know off-hand an easy command for reading pixel 
values of .hdr images with Radiance (pcomb ?...), but this can be done 
elsewhere (e.g. ImageMagick...).
   Thresholds can be tricky, so take into account reflected, ambient, 
low angle, etc light (which is what you are doing with -ab...).
   You can also try intersecting the line between the surface and sun 
with the model geometry for each time-step...
   Good luck!

- Dan


On 2/15/2011 5:28 AM, Giovanni Betti wrote:
>
> Lars,
> the number of about 300 comes from subdividing each tregenza patch in 4
> to increase angular resolution and then looking only at the occupied
> patches, sorry for the confusion.
>
> I would be interested as well in seeing how other people approached the
> same problem though.
>
> Thanks,
>
> Giovanni
>
> -----Original Message-----
> From: Lars O. Grobe [mailto:grobe at gmx.net]
> Sent: 15 February 2011 12:16
> To: Radiance general discussion
> Subject: Re: [Radiance-general] Sunlight hours calculation in radiance
>
> Hi Giovanni!
>
>> I see how that's a possibility but it would mean running separate
> images
>> and to filter each of them.
> I guess it would not be impossible, as renderings should complete very
> fast when considering only direct.
>
>> simulation with multiple sun positions. Eventually as an optimization
>> the sun position can be clustereed according to tregenza patches and
>> each patch weighted based on the number of sun hours it represents (so
>> you don't even need 4000 sun but maybe only 300...)
>> Any hint on that?
> The tregenza sky introduces limitations of the angular resolution. You
> may try a two-step approach:
>
> First, for each patch, find out at how many time intervals the sun is
> covered by the patch. So a patch containing the sun solid angle 20 times
>
> a year, you would set the patch value to 20.
>
> Second, run rtcontrib to find out which patch contributes to which
> pixel. Here you can apply your threshold just as described in my former
> email, so any pixel that is lid by a patch is set to the value (in
> hours) for the patch from step 1.
>
> With a Tregenza grid, you would end up with 145 images, each pixel value
>
> corresponding to the number of hours of direct sun exposure from the
> related patch. Adding up all the 145 images in the third step should
> result in pixel values of direct sun exposure (hours) for all patches.
>
> BTW if you follow an approach as typically used when working with
> Tregenza skies, and split the sun over n neighbouring patches, you would
>
> of course set the pixel value to 1/n instead.
>
> I am not sure about better ways to achieve what you want to do, this is
> just one idea... any other proposals? I am sure others have done that
> before...
>
> Cheers, Lars.
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>


-- 
LF logo 	Daniel C. Glaser, PhD, LEED AP, IES
Principal
Light Foundry, LLC
T: 510.387.8890 | F: 315.410.2617
www.lightfoundryllc.com <http://www.lightfoundryllc.com>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110215/4273e8ed/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: LF.png
Type: image/png
Size: 5569 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110215/4273e8ed/attachment-0001.png>

From David.Smith at BuroHappold.com  Tue Feb 15 08:15:22 2011
From: David.Smith at BuroHappold.com (David Smith)
Date: Tue, 15 Feb 2011 16:15:22 -0000
Subject: [Radiance-general] Sunlight hours calculation in radiance
In-Reply-To: <4D5A9E80.8070703@lightfoundryllc.com>
References: <AANLkTik9DO1qNL3sggYdUD4+6BGjuTBqOQkWW1E0bhW4@mail.gmail.com><98EC0CDF-0531-40A6-A94A-367A5724EB4C@lmi.net>	<AANLkTinunUUG5yNWncAY1K1=Jn7UTP793r5bWDH+0ZN2@mail.gmail.com><6F5225D6E15F954BB4E58EC25F6736C30661E405@corp3005.CORPORATE.FOSTER.NETWORK>	<4D5A5CE8.8000301@gmx.net><6F5225D6E15F954BB4E58EC25F6736C30661E40F@corp3005.CORPORATE.FOSTER.NETWORK>	<4D5A6E8F.4000105@gmx.net><6F5225D6E15F954BB4E58EC25F6736C30661E415@corp3005.CORPORATE.FOSTER.NETWORK>
	<4D5A9E80.8070703@lightfoundryllc.com>
Message-ID: <58E15A7AECA742499E0D566C95B03BD2115DA791@ex-be01.burohappold.com>

I would suggest this:

 

[loop over timebounds (can have a sun above horizon check here too, also
if the day exists, like Feb 30)]
    [gensky with the day/time]

    [create/overwrite temp image making sure to have -ab 0]

    [pcomb -e 'lo=if(li(1)-100/WE,1,0' the image to make any value above
100 lux be 1, any value below be 0 > month.day.hour.hdr]

[loop over timebounds]

    [for every month]

        [for every day]

            [combine hours in day with pcomb > month.day.XX.hdr]

        [combine days in month with pcomb > month.XX.XX.hdr]

    [combine months in year with pcomb > sunhours.hdr]

 

The values in the final image will be in terms of sun-hours. It assumes
that any part of the image over 100 lux direct exterior illuminance is
in the sun. The key to speed here, I think, is to make the octree quick
to load. 

 

Bonus points if you can create multiple threads/processes and run
through the first loop in parallel...

 

 

 

From: Dan Glaser [mailto:daniel at lightfoundryllc.com] 
Sent: Tuesday, February 15, 2011 10:41 AM
To: Radiance general discussion
Subject: Re: [Radiance-general] Sunlight hours calculation in radiance

 

Hi Giovanni and Lars!
  I think you guys have some good approaches.
  If # of images it produces is an issue for the original "brute force"
method you proposed for checking direct sun exposure on clear days, you
can overwrite the same image every-time after doing an image check and
incrementing a variable.  Below is pseudo-code:

[loop over timebounds (can have a sun above horizon check here too)]
    [create/overwrite image SunCheckImage]
    [if (pixel value of representative point in SunCheckImage >
threshold) 
        num_timesteps_in_sun++]
[print "I've been in the sun for " + num_timesteps_in_sun + " time
steps"]
[delete SunCheckImage]

  Sorry, I do not know off-hand an easy command for reading pixel values
of .hdr images with Radiance (pcomb ?...), but this can be done
elsewhere (e.g. ImageMagick...). 
  Thresholds can be tricky, so take into account reflected, ambient, low
angle, etc light (which is what you are doing with -ab...).  
  You can also try intersecting the line between the surface and sun
with the model geometry for each time-step...
  Good luck!

- Dan


On 2/15/2011 5:28 AM, Giovanni Betti wrote: 

 
 
Lars, 
the number of about 300 comes from subdividing each tregenza patch in 4
to increase angular resolution and then looking only at the occupied
patches, sorry for the confusion.
 
I would be interested as well in seeing how other people approached the
same problem though.
 
Thanks,
 
Giovanni
 
-----Original Message-----
From: Lars O. Grobe [mailto:grobe at gmx.net] 
Sent: 15 February 2011 12:16
To: Radiance general discussion
Subject: Re: [Radiance-general] Sunlight hours calculation in radiance
 
Hi Giovanni!
 

	I see how that's a possibility but it would mean running
separate

images

	and to filter each of them.

 
I guess it would not be impossible, as renderings should complete very 
fast when considering only direct.
 

	simulation with multiple sun positions. Eventually as an
optimization
	the sun position can be clustereed according to tregenza patches
and
	each patch weighted based on the number of sun hours it
represents (so
	you don't even need 4000 sun but maybe only 300...)
	Any hint on that?

 
The tregenza sky introduces limitations of the angular resolution. You 
may try a two-step approach:
 
First, for each patch, find out at how many time intervals the sun is 
covered by the patch. So a patch containing the sun solid angle 20 times
 
a year, you would set the patch value to 20.
 
Second, run rtcontrib to find out which patch contributes to which 
pixel. Here you can apply your threshold just as described in my former 
email, so any pixel that is lid by a patch is set to the value (in 
hours) for the patch from step 1.
 
With a Tregenza grid, you would end up with 145 images, each pixel value
 
corresponding to the number of hours of direct sun exposure from the 
related patch. Adding up all the 145 images in the third step should 
result in pixel values of direct sun exposure (hours) for all patches.
 
BTW if you follow an approach as typically used when working with 
Tregenza skies, and split the sun over n neighbouring patches, you would
 
of course set the pixel value to 1/n instead.
 
I am not sure about better ways to achieve what you want to do, this is 
just one idea... any other proposals? I am sure others have done that 
before...
 
Cheers, Lars.
 
 
_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general
 
 

 

-- 

 

Daniel C. Glaser, PhD, LEED AP, IES 

Principal
Light Foundry, LLC
T: 510.387.8890 | F: 315.410.2617

www.lightfoundryllc.com

 

 

 



This message has been scanned by MailController - www.MailController.altohiway.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110215/80bc7e9a/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 5569 bytes
Desc: image001.png
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110215/80bc7e9a/attachment.png>

From gregoryjward at gmail.com  Tue Feb 15 09:04:43 2011
From: gregoryjward at gmail.com (Greg Ward)
Date: Tue, 15 Feb 2011 09:04:43 -0800
Subject: [Radiance-general] Low simulated illuminance levels under
	direct sun
In-Reply-To: <AANLkTinunUUG5yNWncAY1K1=Jn7UTP793r5bWDH+0ZN2@mail.gmail.com>
References: <AANLkTik9DO1qNL3sggYdUD4+6BGjuTBqOQkWW1E0bhW4@mail.gmail.com>
	<98EC0CDF-0531-40A6-A94A-367A5724EB4C@lmi.net>
	<AANLkTinunUUG5yNWncAY1K1=Jn7UTP793r5bWDH+0ZN2@mail.gmail.com>
Message-ID: <1322AA58-DC93-40DF-AC89-4E55F8F24790@lmi.net>

Hi Krystyna,

I haven't had a chance to play around with DIVA myself, but it sounds like an amazing tool!  I'm sure the authors will add in some workarounds in future releases for users who need a little more control over their simulations, but in the meanwhile, the gendaylit option Alstan mentions seems like a good one.  Let us know how it all turns out.

Best,
-Greg

> From: Krystyna Zelenay <kzelenay at berkeley.edu>
> Date: February 14, 2011 8:02:33 PM PST
> 
> Hi Greg,
> 
> I got a response from the DIVA mailing list - the program does not
> allow the user to input calibration factors (-r -R -b or -B) for the
> gensky command (I chose to use Rhino in combination w/ the plugin
> DIVA-for-Rhino since I do not have access to a Unix machine and
> because of its user-friendly interface). Will see if I can workaround
> this problem as described below.
> 
> Thank you,
> 
> Krystyna
> 
> 
> On Mon, Feb 14, 2011 at 7:09 PM, J. Alstan Jakubiec <alstan at jakubiec.net> wrote:
> Dear Krystyna,
> 
> DIVA does not pass any calibration factors to gensky from the weather
> file. It is called as in the below example,
> !gensky 09 21 09 +s -a -16 -o 48 -m 45
> 
> You can't put in the calibration factors using -r -R -b or -B as Greg
> suggests via the DIVA GUI. However, by editing the filename_sky.rad in
> your DIVA temp folder and by running the simulation using
> filenameimg.bat you could short-circuit the GUI and add a calibration
> flag to the gensky command. Note that every time you run a
> visualization from the GUI, you'll need to re-edit the sky.rad file if
> you decide to do this.
> 
> The other option, if you have direct and diffuse radiation data, is to
> use the Perez sky distribution via gendaylit. DIVA has a gui frontend
> to this which you can choose by selecting the Perez Sky option under
> sky condition in the metrics dialog.
> 
> Best,
> Alstan


From reinhart at gsd.harvard.edu  Tue Feb 15 10:37:23 2011
From: reinhart at gsd.harvard.edu (Reinhart, Christoph)
Date: Tue, 15 Feb 2011 13:37:23 -0500
Subject: [Radiance-general] Low simulated illuminance levels underdirect
	sun
In-Reply-To: <1322AA58-DC93-40DF-AC89-4E55F8F24790@lmi.net>
References: <AANLkTik9DO1qNL3sggYdUD4+6BGjuTBqOQkWW1E0bhW4@mail.gmail.com><98EC0CDF-0531-40A6-A94A-367A5724EB4C@lmi.net><AANLkTinunUUG5yNWncAY1K1=Jn7UTP793r5bWDH+0ZN2@mail.gmail.com>
	<1322AA58-DC93-40DF-AC89-4E55F8F24790@lmi.net>
Message-ID: <C5E1527F129BF545A250B5AD0B0C26EF088B866A@ENTWEXMB0000000.university.harvard.edu>

Dear Krystyna,

We can probably add a command line option for gensky to DIVA in the
future but using gendaylit indeed seems to be the better solution for
you.

Christoph

-----Original Message-----
From: Greg Ward [mailto:gregoryjward at gmail.com] 
Sent: Tuesday, February 15, 2011 12:05 PM
To: Radiance general discussion
Subject: Re: [Radiance-general] Low simulated illuminance levels
underdirect sun

Hi Krystyna,

I haven't had a chance to play around with DIVA myself, but it sounds
like an amazing tool!  I'm sure the authors will add in some workarounds
in future releases for users who need a little more control over their
simulations, but in the meanwhile, the gendaylit option Alstan mentions
seems like a good one.  Let us know how it all turns out.

Best,
-Greg

> From: Krystyna Zelenay <kzelenay at berkeley.edu>
> Date: February 14, 2011 8:02:33 PM PST
> 
> Hi Greg,
> 
> I got a response from the DIVA mailing list - the program does not
> allow the user to input calibration factors (-r -R -b or -B) for the
> gensky command (I chose to use Rhino in combination w/ the plugin
> DIVA-for-Rhino since I do not have access to a Unix machine and
> because of its user-friendly interface). Will see if I can workaround
> this problem as described below.
> 
> Thank you,
> 
> Krystyna
> 
> 
> On Mon, Feb 14, 2011 at 7:09 PM, J. Alstan Jakubiec
<alstan at jakubiec.net> wrote:
> Dear Krystyna,
> 
> DIVA does not pass any calibration factors to gensky from the weather
> file. It is called as in the below example,
> !gensky 09 21 09 +s -a -16 -o 48 -m 45
> 
> You can't put in the calibration factors using -r -R -b or -B as Greg
> suggests via the DIVA GUI. However, by editing the filename_sky.rad in
> your DIVA temp folder and by running the simulation using
> filenameimg.bat you could short-circuit the GUI and add a calibration
> flag to the gensky command. Note that every time you run a
> visualization from the GUI, you'll need to re-edit the sky.rad file if
> you decide to do this.
> 
> The other option, if you have direct and diffuse radiation data, is to
> use the Perez sky distribution via gendaylit. DIVA has a gui frontend
> to this which you can choose by selecting the Perez Sky option under
> sky condition in the metrics dialog.
> 
> Best,
> Alstan

_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general


From reinhart at gsd.harvard.edu  Tue Feb 15 10:41:24 2011
From: reinhart at gsd.harvard.edu (Reinhart, Christoph)
Date: Tue, 15 Feb 2011 13:41:24 -0500
Subject: [Radiance-general] Sunlight hours calculation in radiance
In-Reply-To: <AANLkTimxBaTXGHnch_gCeM4sZNQ2ixGrum0wKUmEmB63@mail.gmail.com>
References: <AANLkTik9DO1qNL3sggYdUD4+6BGjuTBqOQkWW1E0bhW4@mail.gmail.com><98EC0CDF-0531-40A6-A94A-367A5724EB4C@lmi.net><AANLkTinunUUG5yNWncAY1K1=Jn7UTP793r5bWDH+0ZN2@mail.gmail.com><6F5225D6E15F954BB4E58EC25F6736C30661E405@corp3005.CORPORATE.FOSTER.NETWORK><4D5A5CE8.8000301@gmx.net><6F5225D6E15F954BB4E58EC25F6736C30661E40F@corp3005.CORPORATE.FOSTER.NETWORK><4D5A6E8F.4000105@gmx.net><6F5225D6E15F954BB4E58EC25F6736C30661E415@corp3005.CORPORATE.FOSTER.NETWORK>
	<AANLkTimxBaTXGHnch_gCeM4sZNQ2ixGrum0wKUmEmB63@mail.gmail.com>
Message-ID: <C5E1527F129BF545A250B5AD0B0C26EF088B8678@ENTWEXMB0000000.university.harvard.edu>

For those of you using Daysim, there is a fast subprogram called
gen_directsunlight that you can use for this purpose. The program places
your  scene in a glowing sphere and  then shoot rays from your work
plane sensor towards the direction of the sun if the direct radiation
component is above 50WM/m2 (according to the annual climate file). The
resulting *.dir file reports a "1" if direct sunlight hits the sensor
and '0' otherwise for every hour in the year.

 

Christoph

 

From: Thomas Bleicher [mailto:tbleicher at googlemail.com] 
Sent: Tuesday, February 15, 2011 10:02 AM
To: Radiance general discussion
Subject: Re: [Radiance-general] Sunlight hours calculation in radiance

 

On Tue, Feb 15, 2011 at 7:28 AM, Giovanni Betti
<gbetti at fosterandpartners.com> wrote:

 

	I would be interested as well in seeing how other people
approached the
	same problem though.

 

In the UK you have to calculate sunlight hours on the ground for
planning purposes. 

 

We used a grid (as opposed to an image) and traced rays from each grid
point to the sun (direction was calculated from the gensky sun angle
information). We modified the rtrace command to print the material of
the surface it hits instead of the radiance. If the ray hits the sky (or
nothing) it returns "*", if it hits an obstruction it returns the
material name. Then you just need to count the "*"s in the output file
to know your number of sunlight hours.

 

For planning this is done on one day only, so we ran it with a 5 minute
resolution. It only took minutes for a reasonably sized grid and that
included all the preparation and evaluation in Lua (Ecotect). This
method generates a data array (x,y,n) which you have to visualise in a
separate step.

 

[On second thought you can probably combine this method with an vwrays
based preprocess to find all the surface points in the scene. For these
scene points you then evaluate the number of sunlight hours as above and
return the number as value for the image. Sounds like a longish
simulation, though.]

 

If you want pictures your idea with rtcontrib and optimised suns seems
very promising. A Tregenza subdivision is not optimal because the sun
only occupies about a quarter to a third of the sky. But you can run
rtcontrib on defined light sources so you just need to give all your
suns a unique identifier and you're set (the command line length might
be somewhat excessive, though). You can also interpolate between the sun
positions without loosing too much accuracy so you really only need to
evaluate a few hundred positions. It might be worth to split the summer
from the winter.

 

If you want to read the sun light hours directly from the final image
you have to use a unified sun source and combine all the images with a
cosine corrected intensity for this particular surface which results in
a 1 for each bright pixel on that surface. The final image gives you a
direct representation of the sunlight hours. If you have more than one
surface (more than one surface orientation, that is) you should go with
Lars' recommendation and apply a threshold value to convert all bright
pixels to a 1 value, regardless of the intensity.

 

Regards,

Thomas

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110215/a14b8871/attachment.html>

From tbleicher at googlemail.com  Fri Feb 25 07:12:10 2011
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Fri, 25 Feb 2011 10:12:10 -0500
Subject: [Radiance-general] psign error on 64-bit Windows
Message-ID: <AANLkTinuosML343YYFv6o4mzDcA_+NWahNBkvN307H9V@mail.gmail.com>

Hi folks

Has anyone on a 64-bit Windows system ever experienced problems with psign
(compiled on a 32-bit system)?

In particular I'm interested in a "Fatal - cannot find font file
'helvet.fnt'" error that might pop up during a falsecolor conversion.


Thanks and have a nice weekend.
Thomas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110225/30e05366/attachment.html>

