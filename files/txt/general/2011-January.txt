From cbm at create.aau.dk  Mon Jan  3 05:37:34 2011
From: cbm at create.aau.dk (=?iso-8859-1?Q?Claus_Br=F8ndgaard_Madsen?=)
Date: Mon, 3 Jan 2011 14:37:34 +0100
Subject: [Radiance-general] Noisy irradiance rendering from
	glow	materials
In-Reply-To: <75DEF7D5-96D6-4A65-ACCF-8FE0DBF5CB51@lmi.net>
References: <E35477F1A321144D897D44CCAAFF202C091DE75D43@AD-MAILBOX01.aau.dk>
	<75DEF7D5-96D6-4A65-ACCF-8FE0DBF5CB51@lmi.net>
Message-ID: <E35477F1A321144D897D44CCAAFF202C091DE75F6D@AD-MAILBOX01.aau.dk>



Hi Thomas and Greg,

Thanks a lot for your feedback to my post.

Happy New Year to everybody.

I spent a good part of my holiday evenings messing around with my problem ... very nerdy, but life with RADIANCE is so inspiring that you sometimes cannot wait until the next official work day :).

Status now is that the noise has "gone" and there is now a new artifact that I cannot get rid of. Thanks, Greg, for the revised and streamlined command line, which I am now using. I must admit that I was so proud of "my own" command line that accepting this revised one was like killing a darling.

In fact I have specified a positive radius for the glow materials. The rendering result I am after is the cosine weighted, hemi-spherical integral of the *direct* incident radiance (caused by the glow materials only). That's why I originally had -ab 0 and then positive radius on the materials. Is using -ab 1 in combination with positive radius going to result in any indirect computation?

In any case I have used Greg's command line verbatim for a new rendering attempt ... see result1.jpg.

I results1.jpg there are 3 things "I don't like":


1)      The odd "hot spots" at crease edges

2)      The fact that the pole in the foreground does not receive the same irradiance on all sides (which it should since the pole sides facing the camera only receive illumination from the ground plane)

3)      The vertical end-plane of the house gets brighter the further away from the groundplane you get ... I am sure it should be the other way around

For these reasons I replaced the single genbox groundplane object with a 10x10 tiling of genbox objects (auto-generated with a small matlab script). With the same command line I arrived at result2.jpg.

While pretty (!) there are still several problems:


1)      Weird hot spots at crease edges

2)      Dark (under-illumination) at the foot of walls

In an attempt to combat this I tried adding a -ds 0.02 option. This multiplied rendering time by a factor of 5 but resulted in no visible changes (result3.jpg). All images show visible jpg compression artifacts but are in all essence true to the actual result.

The scene is a scale model of a dairy. The scene is modeled in meters, so for example the width of the dairy end wall is 0.07 meters and is one single 6 vertex polygon. As described the ground plane is a tiling of side-by-side genbox objects ... each genbox object is 0.3 meters square. This scene is merely a test scene. When I get to the proper experiments the geometry of a scene will be a triangle mesh generated from stereo camera scans of (parts of) real building exteriors ... kind of like trimesh.jpg where the triangle sizes will be very homogeneous.

So, what is the proper approach: subdivide the geometry (for the test scene or test with the tri-mesh real scenes), or add some rendering option to force a subdivision of whatever needs to be subdivided for the hot spots to disappear?

Best,
Claus








From: Greg Ward [mailto:gregoryjward at gmail.com]
Sent: 31. december 2010 00:37
To: Radiance general discussion
Subject: Re: [Radiance-general] Noisy irradiance rendering from glow materials

Hi Claus,

I am also a little puzzled by your results.  As Thomas mentioned, glow surfaces are included in the indirect calculation, so unless you specified a positive radius value for your glow materials, they should not light your scene at all with -ab 0.  The complexities of your command line are mostly unnecessary.  You should be able to simplify it to:

vwrays -ff -x $XRES -y $YRES -vf $NAME.vp \
|rtrace -h -fff -opN $NAME.oct \
|rtrace -ffc -x $XRES -y $YRES -I -ab 1 -aa 0.1 -ad 4096 -ar 0 $NAME.oct > $NAME.irradiance.hdr

Rays with zero normals will be evaluated as (0 0 0) by the second rtrace, and an epsilon is always added to the origin in the direction of the normal when using the -I option, so your rcalc command, while clever, is unnecessary.  I changed your -ab to 1 and got rid of the other unnecessary options.  I set -ar to 0, since you seem to want a very high resolution result.  I added -aa 0.1 for the same reason.

If you are still getting this peculiar noise pattern after these changes, please post your scene description and I'll have a look at it.

Best,
-Greg

P.S.  Regarding mailing list policy on attachments.  In general, I prefer that people not attach large files to e-mails, and people have been very good about this, posting larger images on websites, instead.  Small JPEGs (less than 100K or so) are acceptable; likewise small text attachments are OK.


From: Claus Br?ndgaard Madsen <cbm at create.aau.dk<mailto:cbm at create.aau.dk>>

Date: December 29, 2010 1:59:30 PM PST


Dear list,
With a lot of inspiration from Thomas Bleicher's tutorial (http://sites.google.com/site/tbleicher/radiance/stencil) which he pointed me to back in August (yes, it took me a while to gather the courage to go down that path) I have managed to devise a small script (or rather a command line) which allows me to render the irradiances received at any point in a scene with all glow materials (the standard -i irradiance option for rpict does not work for glow materials).
I attach (not so sure about list rules regarding attachments) the scene rendered where pixel values represent the outgoing radiance of the glow materials (radiance.jpg) and the scene rendered such that every pixel represents the incident irradiance in the same scene (irradiance.jpg). There are no other light sources than the glow materials.
My question is simply: how to reduce the significant amount of rendering noise for the (near) vertical surfaces? The irradiance on those surfaces is dominated by energy coming from the horizontal ground plane, which is a single box object (genbox).
I feel I have tried "everything" with the render options (see my setting below) but have seen no improvement in render noise ... hope to get some pointers/ideas from the list.
I use the following command line command to render the irradiance:
vwrays -ff -x $XRES -y $YRES -vf $NAME.vp \
|rtrace -ffa -opN $NAME.oct \
|sed '1,8d' \
|rcalc -ia6 -of \
-e '$1=$1 + 0.001*$4;$2=$2 + 0.001*$5;$3=$3 + 0.001*$6' \
-e 'out(v)=if(sqrt($4*$4 + $5*$5 + $6*$6) - 0.9,v,-1)' \
-e '$4=out($4);$5=out($5);$6=out($6)'  \
|rtrace -ffc -x $XRES -y $YRES -I -ab 0  -aw 1 -ad 4096 -ar 4096 -dt 0.0 -dp 8192 -ds 0.01 -dj 0.9 $NAME.oct > $NAME.irradiance.hdr
In short: use vwrays to generate the primary rays needed to render the scene, pipe into rtrace to get intersection points and normals, pipe into sed to get rid of header generated by rtrace and leave only lines with intersection point and normal, pipe through rcalc to "lift" intersection points 1/1000 of a unit in the direction of the normal (to avoid surface self-intersection problems later when using intersection point and normal as the start point for an incident irradiance computation) ... and rcalc also sets a (-1, -1, -1) direction vector if the original surface normal from rtrace is close to zero length, finally pipe through rtrace, this time with -I option to gather incident irradiance at the "lifted" surface point.
Best,
Claus
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110103/4f13ee20/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: result1.jpg
Type: image/jpeg
Size: 10011 bytes
Desc: result1.jpg
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110103/4f13ee20/attachment-0004.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: result2.jpg
Type: image/jpeg
Size: 9557 bytes
Desc: result2.jpg
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110103/4f13ee20/attachment-0005.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: result3.jpg
Type: image/jpeg
Size: 9547 bytes
Desc: result3.jpg
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110103/4f13ee20/attachment-0006.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: trimesh.jpg
Type: image/jpeg
Size: 16396 bytes
Desc: trimesh.jpg
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110103/4f13ee20/attachment-0007.jpg>

From jedev at visarc.com  Mon Jan  3 07:23:09 2011
From: jedev at visarc.com (Jack de Valpine)
Date: Mon, 03 Jan 2011 10:23:09 -0500
Subject: [Radiance-general] Noisy irradiance rendering
	from	glow	materials
In-Reply-To: <E35477F1A321144D897D44CCAAFF202C091DE75F6D@AD-MAILBOX01.aau.dk>
References: <E35477F1A321144D897D44CCAAFF202C091DE75D43@AD-MAILBOX01.aau.dk>	<75DEF7D5-96D6-4A65-ACCF-8FE0DBF5CB51@lmi.net>
	<E35477F1A321144D897D44CCAAFF202C091DE75F6D@AD-MAILBOX01.aau.dk>
Message-ID: <4D21E9DD.3090201@visarc.com>

Hi Claus,

I think if you want to get a smoother result from your ground plane you 
will need to be more careful about how it is constructed. Direct 
sampling (subdivision of the source) occurs relative to the "center" of 
the ground plane geometry, which is why you may not be seeing what you 
expect. Additionally if the center of a ground plane object is "under" 
one of the buildings this will contribute to some of the effects that 
you are seeing. As a test I would consider constructing the ground plane 
of multiple polygons (probably should be quads) where the edge of a 
given polygon meets the edge of a building side at the "ground."

I think that another thing to add into your command line is to set 
direct jitter (-dj). I think you could start out with with -dj .7 and 
see what happens.

I would try reconstructing your ground plane first and then run as is 
with your original command line, then you can try setting -dj to further 
adjust things.

Hope this helps.

-Jack

-- 
# Jack de Valpine
# president
#
# visarc incorporated
# http://www.visarc.com
#
# channeling technology for superior design and construction


On 1/3/2011 8:37 AM, Claus Br?ndgaard Madsen wrote:
>
> Hi Thomas and Greg,
>
> Thanks a lot for your feedback to my post.
>
> Happy New Year to everybody.
>
> I spent a good part of my holiday evenings messing around with my 
> problem ... very nerdy, but life with RADIANCE is so inspiring that 
> you sometimes cannot wait until the next official work day J.
>
> Status now is that the noise has "gone" and there is now a new 
> artifact that I cannot get rid of. Thanks, Greg, for the revised and 
> streamlined command line, which I am now using. I must admit that I 
> was so proud of "my own" command line that accepting this revised one 
> was like killing a darling.
>
> In fact I have specified a positive radius for the glow materials. The 
> rendering result I am after is the cosine weighted, hemi-spherical 
> integral of the *direct* incident radiance (caused by the glow 
> materials only). That's why I originally had --ab 0 and then positive 
> radius on the materials. Is using --ab 1 in combination with positive 
> radius going to result in any indirect computation?
>
> In any case I have used Greg's command line verbatim for a new 
> rendering attempt ... see result1.jpg.
>
> I results1.jpg there are 3 things "I don't like":
>
> 1)The odd "hot spots" at crease edges
>
> 2)The fact that the pole in the foreground does not receive the same 
> irradiance on all sides (which it should since the pole sides facing 
> the camera only receive illumination from the ground plane)
>
> 3)The vertical end-plane of the house gets brighter the further away 
> from the groundplane you get ... I am sure it should be the other way 
> around
>
> For these reasons I replaced the single genbox groundplane object with 
> a 10x10 tiling of genbox objects (auto-generated with a small matlab 
> script). With the same command line I arrived at result2.jpg.
>
> While pretty (!) there are still several problems:
>
> 1)Weird hot spots at crease edges
>
> 2)Dark (under-illumination) at the foot of walls
>
> In an attempt to combat this I tried adding a --ds 0.02 option. This 
> multiplied rendering time by a factor of 5 but resulted in no visible 
> changes (result3.jpg). All images show visible jpg compression 
> artifacts but are in all essence true to the actual result.
>
> The scene is a scale model of a dairy. The scene is modeled in meters, 
> so for example the width of the dairy end wall is 0.07 meters and is 
> one single 6 vertex polygon. As described the ground plane is a tiling 
> of side-by-side genbox objects ... each genbox object is 0.3 meters 
> square. This scene is merely a test scene. When I get to the proper 
> experiments the geometry of a scene will be a triangle mesh generated 
> from stereo camera scans of (parts of) real building exteriors ... 
> kind of like trimesh.jpg where the triangle sizes will be very 
> homogeneous.
>
> So, what is the proper approach: subdivide the geometry (for the test 
> scene or test with the tri-mesh real scenes), or add some rendering 
> option to force a subdivision of whatever needs to be subdivided for 
> the hot spots to disappear?
>
> Best,
>
> Claus
>
> *From:*Greg Ward [mailto:gregoryjward at gmail.com]
> *Sent:* 31. december 2010 00:37
> *To:* Radiance general discussion
> *Subject:* Re: [Radiance-general] Noisy irradiance rendering from glow 
> materials
>
> Hi Claus,
>
> I am also a little puzzled by your results.  As Thomas mentioned, glow 
> surfaces are included in the indirect calculation, so unless you 
> specified a positive radius value for your glow materials, they should 
> not light your scene at all with -ab 0.  The complexities of your 
> command line are mostly unnecessary.  You should be able to simplify 
> it to:
>
> vwrays -ff -x $XRES -y $YRES -vf $NAME.vp \
>
> |rtrace -h -fff -opN $NAME.oct \
>
> |rtrace -ffc -x $XRES -y $YRES -I -ab 1 -aa 0.1 -ad 4096 -ar 0 
> $NAME.oct > $NAME.irradiance.hdr
>
> Rays with zero normals will be evaluated as (0 0 0) by the second 
> rtrace, and an epsilon is always added to the origin in the direction 
> of the normal when using the -I option, so your rcalc command, while 
> clever, is unnecessary.  I changed your -ab to 1 and got rid of the 
> other unnecessary options.  I set -ar to 0, since you seem to want a 
> very high resolution result.  I added -aa 0.1 for the same reason.
>
> If you are still getting this peculiar noise pattern after these 
> changes, please post your scene description and I'll have a look at it.
>
> Best,
>
> -Greg
>
> P.S.  Regarding mailing list policy on attachments.  In general, I 
> prefer that people not attach large files to e-mails, and people have 
> been very good about this, posting larger images on websites, instead. 
>  Small JPEGs (less than 100K or so) are acceptable; likewise small 
> text attachments are OK.
>
> *From: *Claus Br?ndgaard Madsen <cbm at create.aau.dk 
> <mailto:cbm at create.aau.dk>>
>
> *Date: *December 29, 2010 1:59:30 PM PST
>
>     Dear list,
>
>     With a lot of inspiration from Thomas Bleicher's tutorial
>     (http://sites.google.com/site/tbleicher/radiance/stencil) which he
>     pointed me to back in August (yes, it took me a while to gather
>     the courage to go down that path) I have managed to devise a small
>     script (or rather a command line) which allows me to render the
>     irradiances received at any point in a scene with all glow
>     materials (the standard --i irradiance option for rpict does not
>     work for glow materials).
>
>     I attach (not so sure about list rules regarding attachments) the
>     scene rendered where pixel values represent the outgoing radiance
>     of the glow materials (radiance.jpg) and the scene rendered such
>     that every pixel represents the incident irradiance in the same
>     scene (irradiance.jpg). There are no other light sources than the
>     glow materials.
>
>     My question is simply: how to reduce the significant amount of
>     rendering noise for the (near) vertical surfaces? The irradiance
>     on those surfaces is dominated by energy coming from the
>     horizontal ground plane, which is a single box object (genbox).
>
>     I feel I have tried "everything" with the render options (see my
>     setting below) but have seen no improvement in render noise ...
>     hope to get some pointers/ideas from the list.
>
>     I use the following command line command to render the irradiance:
>
>     vwrays -ff -x $XRES -y $YRES -vf $NAME.vp \
>
>     |rtrace -ffa -opN $NAME.oct \
>
>     |sed '1,8d' \
>
>     |rcalc -ia6 -of \
>
>     -e '$1=$1 + 0.001*$4;$2=$2 + 0.001*$5;$3=$3 + 0.001*$6' \
>
>     -e 'out(v)=if(sqrt($4*$4 + $5*$5 + $6*$6) - 0.9,v,-1)' \
>
>     -e '$4=out($4);$5=out($5);$6=out($6)'  \
>
>     |rtrace -ffc -x $XRES -y $YRES -I -ab 0  -aw 1 -ad 4096 -ar 4096
>     -dt 0.0 -dp 8192 -ds 0.01 -dj 0.9 $NAME.oct > $NAME.irradiance.hdr
>
>     In short: use vwrays to generate the primary rays needed to render
>     the scene, pipe into rtrace to get intersection points and
>     normals, pipe into sed to get rid of header generated by rtrace
>     and leave only lines with intersection point and normal, pipe
>     through rcalc to "lift" intersection points 1/1000 of a unit in
>     the direction of the normal (to avoid surface self-intersection
>     problems later when using intersection point and normal as the
>     start point for an incident irradiance computation) ... and rcalc
>     also sets a (-1, -1, -1) direction vector if the original surface
>     normal from rtrace is close to zero length, finally pipe through
>     rtrace, this time with --I option to gather incident irradiance at
>     the "lifted" surface point.
>
>     Best,
>
>     Claus
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110103/4e01eda2/attachment-0001.html>

From gregoryjward at gmail.com  Mon Jan  3 09:31:59 2011
From: gregoryjward at gmail.com (Greg Ward)
Date: Mon, 3 Jan 2011 09:31:59 -0800
Subject: [Radiance-general] Noisy irradiance rendering from
	glow	materials
In-Reply-To: <E35477F1A321144D897D44CCAAFF202C091DE75F6D@AD-MAILBOX01.aau.dk>
References: <E35477F1A321144D897D44CCAAFF202C091DE75D43@AD-MAILBOX01.aau.dk>
	<75DEF7D5-96D6-4A65-ACCF-8FE0DBF5CB51@lmi.net>
	<E35477F1A321144D897D44CCAAFF202C091DE75F6D@AD-MAILBOX01.aau.dk>
Message-ID: <76D22BEC-EBC8-4B44-8AFE-17E3B0517DFA@lmi.net>

Hi Claus,

At least this explains most of your artifacts.  The direct calculation really doesn't work very well for abutting surfaces, so you are better off using zero radii on your glow materials.  How are you even seeing a pattern, though?  Glow materials don't reflect light.  I thought you had some glow materials and some regular ones.  Are you using a mixture between a glow material and a diffuse material?  I could then understand your results.

If you use -ab 1 and zero radii for your glow materials, then your results should be much improved.  You don't need to break up your ground plane.  I don't think you will ever be satisfied with the output, otherwise.

Best,
-Greg

> From: Claus Br?ndgaard Madsen <cbm at create.aau.dk>
> Date: January 3, 2011 5:37:34 AM PST
>  
> Hi Thomas and Greg,
> 
>  
> 
> Thanks a lot for your feedback to my post.
> 
>  
> 
> Happy New Year to everybody.
> 
>  
> 
> I spent a good part of my holiday evenings messing around with my problem ? very nerdy, but life with RADIANCE is so inspiring that you sometimes cannot wait until the next official work day J.
> 
>  
> 
> Status now is that the noise has ?gone? and there is now a new artifact that I cannot get rid of. Thanks, Greg, for the revised and streamlined command line, which I am now using. I must admit that I was so proud of ?my own? command line that accepting this revised one was like killing a darling.
> 
>  
> 
> In fact I have specified a positive radius for the glow materials. The rendering result I am after is the cosine weighted, hemi-spherical integral of the *direct* incident radiance (caused by the glow materials only). That?s why I originally had ?ab 0 and then positive radius on the materials. Is using ?ab 1 in combination with positive radius going to result in any indirect computation?
> 
>  
> 
> In any case I have used Greg?s command line verbatim for a new rendering attempt ? see result1.jpg.
> 
>  
> 
> I results1.jpg there are 3 things ?I don?t like?:
> 
>  
> 
> 1)      The odd ?hot spots? at crease edges
> 
> 2)      The fact that the pole in the foreground does not receive the same irradiance on all sides (which it should since the pole sides facing the camera only receive illumination from the ground plane)
> 
> 3)      The vertical end-plane of the house gets brighter the further away from the groundplane you get ? I am sure it should be the other way around
> 
>  
> 
> For these reasons I replaced the single genbox groundplane object with a 10x10 tiling of genbox objects (auto-generated with a small matlab script). With the same command line I arrived at result2.jpg.
> 
>  
> 
> While pretty (!) there are still several problems:
> 
>  
> 
> 1)      Weird hot spots at crease edges
> 
> 2)      Dark (under-illumination) at the foot of walls
> 
>  
> 
> In an attempt to combat this I tried adding a ?ds 0.02 option. This multiplied rendering time by a factor of 5 but resulted in no visible changes (result3.jpg). All images show visible jpg compression artifacts but are in all essence true to the actual result.
> 
>  
> 
> The scene is a scale model of a dairy. The scene is modeled in meters, so for example the width of the dairy end wall is 0.07 meters and is one single 6 vertex polygon. As described the ground plane is a tiling of side-by-side genbox objects ? each genbox object is 0.3 meters square. This scene is merely a test scene. When I get to the proper experiments the geometry of a scene will be a triangle mesh generated from stereo camera scans of (parts of) real building exteriors ? kind of like trimesh.jpg where the triangle sizes will be very homogeneous.
> 
>  
> 
> So, what is the proper approach: subdivide the geometry (for the test scene or test with the tri-mesh real scenes), or add some rendering option to force a subdivision of whatever needs to be subdivided for the hot spots to disappear?
> 
>  
> 
> Best,
> 
> Claus
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110103/4a0e2fe7/attachment.html>

From amcneil at lbl.gov  Mon Jan  3 10:51:18 2011
From: amcneil at lbl.gov (Andy McNeil)
Date: Mon, 3 Jan 2011 10:51:18 -0800
Subject: [Radiance-general] Noisy irradiance rendering from
	glow	materials
In-Reply-To: <E35477F1A321144D897D44CCAAFF202C091DE75F6D@AD-MAILBOX01.aau.dk>
References: <E35477F1A321144D897D44CCAAFF202C091DE75D43@AD-MAILBOX01.aau.dk>
	<75DEF7D5-96D6-4A65-ACCF-8FE0DBF5CB51@lmi.net>
	<E35477F1A321144D897D44CCAAFF202C091DE75F6D@AD-MAILBOX01.aau.dk>
Message-ID: <15F96387-DD8E-4C96-A373-7CF3112599A7@lbl.gov>

Hello,

> In an attempt to combat this I tried adding a ?ds 0.02 option. This multiplied rendering time by a factor of 5 but resulted in no visible changes (result3.jpg).


In source.h the variable MAXSPART sets the maximum number of source partitions.  Currently it is set to 64.  The end wall of your house is divided into 8x8 partitions which explains the eight hotspots on the ground.  The surfaces of the tower is probably divided into 2x32 divisions since it is slender, hence two hotspots.  increasing -ds won't divide the sources any further than the coded maximum.

But if the surfaces are already fully subdivided then why did computation time increase?  The source division is done separately for each ray.   When computing irradiance on the ground further away from the source (beyond the hotspots) changing -ds will increase the number of source subdivisions.   This is why you experienced increased computation time but the same results.

So instead of changing -ds you would have been better off changing MASXPART and recompiling Radiance.  But don't do this.  Greg's suggestion to use -ab 1 and glow surfaces is more efficient and easier.  

Andy
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110103/03c84021/attachment.html>

From cbm at create.aau.dk  Mon Jan  3 12:29:49 2011
From: cbm at create.aau.dk (=?iso-8859-1?Q?Claus_Br=F8ndgaard_Madsen?=)
Date: Mon, 3 Jan 2011 21:29:49 +0100
Subject: [Radiance-general] Noisy irradiance rendering
	from	glow	materials
In-Reply-To: <76D22BEC-EBC8-4B44-8AFE-17E3B0517DFA@lmi.net>
References: <E35477F1A321144D897D44CCAAFF202C091DE75D43@AD-MAILBOX01.aau.dk>
	<75DEF7D5-96D6-4A65-ACCF-8FE0DBF5CB51@lmi.net>
	<E35477F1A321144D897D44CCAAFF202C091DE75F6D@AD-MAILBOX01.aau.dk>
	<76D22BEC-EBC8-4B44-8AFE-17E3B0517DFA@lmi.net>
Message-ID: <E35477F1A321144D897D44CCAAFF202C091DE75FEC@AD-MAILBOX01.aau.dk>



Hi Greg,

Removed -ds 0.02, replaced radius 100 with 0 in the glow materials (there are only pure glow materials in the scene, no mixtures, no diffuse), re-ran rendering (but kept 10 by 10 genbox tiled groundplane ... frankly I forgot to comment back in the old single large genbox groundplane). Rendering done in about 25 minutes on my 4 year old core duo laptop.

Bingo.jpg shows results ... just the way I always mentally pictured that it would/should.

Thanks. Also to Andy for providing an explanation on the subdivision.

This is so great 'cause now I can get on with what I needed the irradiances for ... I can hardly wait :)

In addition to being just what I was needing (and essentially have been needing since August 2010 but have been too busy to pursue) these renderings actually have a very pleasing aesthetic side to them.

Best,
Claus


From: Greg Ward [mailto:gregoryjward at gmail.com]
Sent: 3. januar 2011 18:32
To: Radiance general discussion
Subject: Re: [Radiance-general] Noisy irradiance rendering from glow materials

Hi Claus,

At least this explains most of your artifacts.  The direct calculation really doesn't work very well for abutting surfaces, so you are better off using zero radii on your glow materials.  How are you even seeing a pattern, though?  Glow materials don't reflect light.  I thought you had some glow materials and some regular ones.  Are you using a mixture between a glow material and a diffuse material?  I could then understand your results.

If you use -ab 1 and zero radii for your glow materials, then your results should be much improved.  You don't need to break up your ground plane.  I don't think you will ever be satisfied with the output, otherwise.

Best,
-Greg


From: Claus Br?ndgaard Madsen <cbm at create.aau.dk<mailto:cbm at create.aau.dk>>
Date: January 3, 2011 5:37:34 AM PST

Hi Thomas and Greg,

Thanks a lot for your feedback to my post.

Happy New Year to everybody.

I spent a good part of my holiday evenings messing around with my problem ... very nerdy, but life with RADIANCE is so inspiring that you sometimes cannot wait until the next official work day :).

Status now is that the noise has "gone" and there is now a new artifact that I cannot get rid of. Thanks, Greg, for the revised and streamlined command line, which I am now using. I must admit that I was so proud of "my own" command line that accepting this revised one was like killing a darling.

In fact I have specified a positive radius for the glow materials. The rendering result I am after is the cosine weighted, hemi-spherical integral of the *direct* incident radiance (caused by the glow materials only). That's why I originally had -ab 0 and then positive radius on the materials. Is using -ab 1 in combination with positive radius going to result in any indirect computation?

In any case I have used Greg's command line verbatim for a new rendering attempt ... see result1.jpg.

I results1.jpg there are 3 things "I don't like":


1)      The odd "hot spots" at crease edges

2)      The fact that the pole in the foreground does not receive the same irradiance on all sides (which it should since the pole sides facing the camera only receive illumination from the ground plane)

3)      The vertical end-plane of the house gets brighter the further away from the groundplane you get ... I am sure it should be the other way around

For these reasons I replaced the single genbox groundplane object with a 10x10 tiling of genbox objects (auto-generated with a small matlab script). With the same command line I arrived at result2.jpg.

While pretty (!) there are still several problems:


1)      Weird hot spots at crease edges

2)      Dark (under-illumination) at the foot of walls

In an attempt to combat this I tried adding a -ds 0.02 option. This multiplied rendering time by a factor of 5 but resulted in no visible changes (result3.jpg). All images show visible jpg compression artifacts but are in all essence true to the actual result.

The scene is a scale model of a dairy. The scene is modeled in meters, so for example the width of the dairy end wall is 0.07 meters and is one single 6 vertex polygon. As described the ground plane is a tiling of side-by-side genbox objects ... each genbox object is 0.3 meters square. This scene is merely a test scene. When I get to the proper experiments the geometry of a scene will be a triangle mesh generated from stereo camera scans of (parts of) real building exteriors ... kind of like trimesh.jpg where the triangle sizes will be very homogeneous.

So, what is the proper approach: subdivide the geometry (for the test scene or test with the tri-mesh real scenes), or add some rendering option to force a subdivision of whatever needs to be subdivided for the hot spots to disappear?

Best,
Claus
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110103/eb7e1580/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: bingo.jpg
Type: image/jpeg
Size: 9012 bytes
Desc: bingo.jpg
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110103/eb7e1580/attachment-0001.jpg>

From Chris.Coulter at smithgroup.com  Tue Jan  4 08:01:41 2011
From: Chris.Coulter at smithgroup.com (Chris Coulter)
Date: Tue, 4 Jan 2011 11:01:41 -0500
Subject: [Radiance-general] falsecolor -lw 0 not working in latest CVS
	snapshot?
Message-ID: <6025C928C785944983BD457EB996C1360CC9F0F904@SG-EXCHMB1>

Hello all,

I've run into a problem with falsecolor on the latest CVS version (compiled this morning). When I try to generate a falsecolor image without a legend (by setting -lw 0 or -lh 0), I get an error: "/tmp/<temp dir>/scol.hdr: bad picture size"
If I try to run the same command on the same image using the official 4R0 release I also have compiled, I do not get this error and the falsecolor image is successfully generated without a legend.

Can anyone else replicate this error? Or is it possible that I have a compiling error somewhere along the way? Any help/insight would be greatly appreciated.

Chris M. Coulter, LC, IESNA, LEED AP
Associate
Lighting Designer
President, Detroit Section of the Illuminating Engineering Society
............................................................

SmithGroup
500 Griswold, Suite 1700
Detroit, MI 48226

t 313.983.3600 d 313.442.8366 f 313.442.8197

Chris.Coulter at smithgroup.com<mailto:Chris.Coulter at smithgroup.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110104/a1539225/attachment.html>

From gregoryjward at gmail.com  Tue Jan  4 09:02:00 2011
From: gregoryjward at gmail.com (Greg Ward)
Date: Tue, 4 Jan 2011 09:02:00 -0800
Subject: [Radiance-general] falsecolor -lw 0 not working in latest CVS
	snapshot?
In-Reply-To: <6025C928C785944983BD457EB996C1360CC9F0F904@SG-EXCHMB1>
References: <6025C928C785944983BD457EB996C1360CC9F0F904@SG-EXCHMB1>
Message-ID: <453345AC-081B-40A8-A446-1EB2BBC124F3@lmi.net>

Hi Chris,

Thanks for pointing out this error.  The falsecolor C-shell script was replaced with a Perl script written by Axel Jacobs, and I guess this particular option wasn't tested.  There was a set of single-quotes that needed to be double-quotes, which I have fixed and checked in this morning.  It should appear in tomorrow's HEAD.

Cheers,
-Greg

> From: Chris Coulter <Chris.Coulter at smithgroup.com>
> Date: January 4, 2011 8:01:41 AM PST
> 
> Hello all,
> 
>  
> 
> I?ve run into a problem with falsecolor on the latest CVS version (compiled this morning). When I try to generate a falsecolor image without a legend (by setting ?lw 0 or ?lh 0), I get an error: ?/tmp/<temp dir>/scol.hdr: bad picture size?
> 
> If I try to run the same command on the same image using the official 4R0 release I also have compiled, I do not get this error and the falsecolor image is successfully generated without a legend.
> 
>  
> 
> Can anyone else replicate this error? Or is it possible that I have a compiling error somewhere along the way? Any help/insight would be greatly appreciated.
> 
>  
> 
> Chris M. Coulter, LC, IESNA, LEED AP


From jacobs.axel at gmail.com  Tue Jan  4 16:47:43 2011
From: jacobs.axel at gmail.com (Axel Jacobs)
Date: Wed, 05 Jan 2011 00:47:43 +0000
Subject: [Radiance-general] falsecolor -lw 0 not working in latest CVS
	snapshot?
In-Reply-To: <mailman.1.1294171200.45403.radiance-general@radiance-online.org>
References: <mailman.1.1294171200.45403.radiance-general@radiance-online.org>
Message-ID: <4D23BFAF.2000103@gmail.com>

Chris, Greg, all

>> I've run into a problem with falsecolor on the latest CVS version
 >> (compiled this morning). When I try to generate a falsecolor image
 >>  without a legend (by setting -lw 0 or -lh 0), I get an error:
>> "/tmp/<temp dir>/scol.hdr: bad picture size"
 >>
>> If I try to run the same command on the same image using the
 >> official 4R0 release I also have compiled, I do not get this error
 >> and the falsecolor image is successfully generated without a legend.
>>
>> Can anyone else replicate this error? Or is it possible that I have
 >> a compiling error somewhere along the way? Any help/insight would
 >> be greatly appreciated.

> Thanks for pointing out this error.  The falsecolor C-shell script
 > was replaced with a Perl script written by Axel Jacobs, and I guess
 > this particular option wasn't tested.  There was a set of
 > single-quotes  that needed to be double-quotes, which I have fixed and
 > checked in this morning.  It should appear in tomorrow's HEAD.

Sorry about this oversight. Yes, I submitted a Perl replacement of the 
falsecolor.csh script a couple of months ago. I wrote the Perl script 
some time ago, needing to run fc on a server that didn't have CSH 
installed. Well, it seems I did not test all options thoroughly. 
Apologies for that.

I have since looked at some of the other CSH scripts, and started 
re-writing some of them. In the long run (Radiance 5.0???), I was hoping 
to get rid of all of them and replace them with Perl. If there are any 
'Perlistas' out there willing to adopt a CSH script and turn it into a 
Perl one, please get in touch with me. I would not like to burden Greg 
with this for now. Maybe amongst us, we can come up with a 'coding 
standard' to have some consistency here. I've got a few ideas and 
experice with Perl coding (WebHDR is all done in Perl), but it's all a 
bit rusty...

Axel


From jedev at visarc.com  Tue Jan  4 17:05:15 2011
From: jedev at visarc.com (Jack de Valpine)
Date: Tue, 04 Jan 2011 20:05:15 -0500
Subject: [Radiance-general] falsecolor -lw 0 not working in latest CVS
 snapshot?
In-Reply-To: <4D23BFAF.2000103@gmail.com>
References: <mailman.1.1294171200.45403.radiance-general@radiance-online.org>
	<4D23BFAF.2000103@gmail.com>
Message-ID: <4D23C3CB.9080004@visarc.com>

Hi Axel,

I would be willing to work on this with you. Perhaps we can move the 
discussion to dev?

-Jack

-- 
# Jack de Valpine
# president
#
# visarc incorporated
# http://www.visarc.com
#
# channeling technology for superior design and construction


On 1/4/2011 7:47 PM, Axel Jacobs wrote:
> Chris, Greg, all
>
>>> I've run into a problem with falsecolor on the latest CVS version
> >> (compiled this morning). When I try to generate a falsecolor image
> >>  without a legend (by setting -lw 0 or -lh 0), I get an error:
>>> "/tmp/<temp dir>/scol.hdr: bad picture size"
> >>
>>> If I try to run the same command on the same image using the
> >> official 4R0 release I also have compiled, I do not get this error
> >> and the falsecolor image is successfully generated without a legend.
>>>
>>> Can anyone else replicate this error? Or is it possible that I have
> >> a compiling error somewhere along the way? Any help/insight would
> >> be greatly appreciated.
>
>> Thanks for pointing out this error.  The falsecolor C-shell script
> > was replaced with a Perl script written by Axel Jacobs, and I guess
> > this particular option wasn't tested.  There was a set of
> > single-quotes  that needed to be double-quotes, which I have fixed and
> > checked in this morning.  It should appear in tomorrow's HEAD.
>
> Sorry about this oversight. Yes, I submitted a Perl replacement of the 
> falsecolor.csh script a couple of months ago. I wrote the Perl script 
> some time ago, needing to run fc on a server that didn't have CSH 
> installed. Well, it seems I did not test all options thoroughly. 
> Apologies for that.
>
> I have since looked at some of the other CSH scripts, and started 
> re-writing some of them. In the long run (Radiance 5.0???), I was 
> hoping to get rid of all of them and replace them with Perl. If there 
> are any 'Perlistas' out there willing to adopt a CSH script and turn 
> it into a Perl one, please get in touch with me. I would not like to 
> burden Greg with this for now. Maybe amongst us, we can come up with a 
> 'coding standard' to have some consistency here. I've got a few ideas 
> and experice with Perl coding (WebHDR is all done in Perl), but it's 
> all a bit rusty...
>
> Axel
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general


From cbm at create.aau.dk  Wed Jan  5 00:41:22 2011
From: cbm at create.aau.dk (=?iso-8859-1?Q?Claus_Br=F8ndgaard_Madsen?=)
Date: Wed, 5 Jan 2011 09:41:22 +0100
Subject: [Radiance-general] Image calculations
Message-ID: <E35477F1A321144D897D44CCAAFF202C091DE76284@AD-MAILBOX01.aau.dk>



Dear List,


Simple question: I need to divide one image with another ... pixel by pixel, channel by channel. I.e., IM1(x,y,C) / IM2(x,y,C) for all x,y and for all channels RGB and have the result ordered as a new image.

I am messing around with some rlam & pvalue combinations, but there must be some elegant way :)

Best,
Claus



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110105/54485dcb/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Claus Br?ndgaard Madsen.vcf
Type: text/x-vcard
Size: 6218 bytes
Desc: Claus Br?ndgaard Madsen.vcf
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110105/54485dcb/attachment.vcf>

From cbm at create.aau.dk  Wed Jan  5 02:29:58 2011
From: cbm at create.aau.dk (=?iso-8859-1?Q?Claus_Br=F8ndgaard_Madsen?=)
Date: Wed, 5 Jan 2011 11:29:58 +0100
Subject: [Radiance-general] Image calculations
In-Reply-To: <E35477F1A321144D897D44CCAAFF202C091DE76284@AD-MAILBOX01.aau.dk>
References: <E35477F1A321144D897D44CCAAFF202C091DE76284@AD-MAILBOX01.aau.dk>
Message-ID: <E35477F1A321144D897D44CCAAFF202C091DE762EE@AD-MAILBOX01.aau.dk>



Sorry about the previous post ... I managed to stumble upon the pcomb command which does exactly what I need ... and more

Best,
Claus



From: Claus Br?ndgaard Madsen [mailto:cbm at create.aau.dk]
Sent: 5. januar 2011 09:41
To: radiance-general at radiance-online.org
Subject: [Radiance-general] Image calculations



Dear List,


Simple question: I need to divide one image with another ... pixel by pixel, channel by channel. I.e., IM1(x,y,C) / IM2(x,y,C) for all x,y and for all channels RGB and have the result ordered as a new image.

I am messing around with some rlam & pvalue combinations, but there must be some elegant way :)

Best,
Claus




-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110105/222a63a0/attachment-0001.html>

From grobe at gmx.net  Wed Jan  5 03:19:37 2011
From: grobe at gmx.net (Lars O. Grobe)
Date: Wed, 05 Jan 2011 12:19:37 +0100
Subject: [Radiance-general] Image calculations
In-Reply-To: <E35477F1A321144D897D44CCAAFF202C091DE76284@AD-MAILBOX01.aau.dk>
References: <E35477F1A321144D897D44CCAAFF202C091DE76284@AD-MAILBOX01.aau.dk>
Message-ID: <4D2453C9.1060804@gmx.net>

Hi!

> Simple question: I need to divide one image with another ? pixel by
> pixel, channel by channel. I.e., IM1(x,y,C) / IM2(x,y,C) for all x,y and
> for all channels RGB and have the result ordered as a new image.

Just for completeness:

pcomb -e 'ro=ri(1)/ri(2); go=gi(1)/gi(2); bo=bi(1)/bi(2)' -o image1.hdr 
-o image2.hdr > result.hdr

The -o flags are important to calculate with the original pixel values 
(usually radiance W/m2*sr) without any exposure effects.

Cheers, Lars.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 3740 bytes
Desc: S/MIME Cryptographic Signature
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110105/1a7777da/attachment.bin>

From RFritz at lbl.gov  Wed Jan  5 11:34:22 2011
From: RFritz at lbl.gov (Randolph M. Fritz)
Date: Wed, 5 Jan 2011 11:34:22 -0800
Subject: [Radiance-general] Simulating rooms with blinds: performance
Message-ID: <ig2h3u$s17$1@dough.gmane.org>

I've been working with a simple model for glare studies, based on an 
LBL test room with blinds.  The results are looking pretty good, but as 
soon as I put the blinds into the model, single-case simulation times 
went up to 2.5-3.5 hours.  Does anyone have any feeling for these 
times?  Are they reasonable for a na?ve model or too high?  The 
processor used is a quad-core AMD Opteron 2376 (2300 MHz) and I've been 
using Delaunay's implementation of the Perez sky model, gendaylit, and 
calculating five ambient bounces.

Possible lines of attack on the problem:
-- Using genBSDF/mkillum (suggested by a colleague.)
-- Simplify the blind model; use flat rather than curved slats.
-- Review the rtrace parameters I am using.  I'm rereading John 
Mardaljevic's chapter in RwR on Daylight Simulation, looking for hints, 
but Mardaljevic (are you out there?) was primarily working with 
overcast skies, which aren't adequate for glare models, so I'm not sure 
how much of his advice still applies.  I'm also going to be sweeping 
the archives of this mailing list for ideas.

Anyone have additional suggestions?  Any thoughts on which to try 
first?  Are there particular articles it might be helpful to look at?
-- 
Randolph M. Fritz ? RFritz at lbl.gov
Environmental Energy Technologies Division ? Lawrence Berkeley Labs




From gregoryjward at gmail.com  Wed Jan  5 12:50:05 2011
From: gregoryjward at gmail.com (Greg Ward)
Date: Wed, 5 Jan 2011 12:50:05 -0800
Subject: [Radiance-general] Simulating rooms with blinds: performance
In-Reply-To: <ig2h3u$s17$1@dough.gmane.org>
References: <ig2h3u$s17$1@dough.gmane.org>
Message-ID: <B5403EFC-62FF-4D1F-840C-CE4BDE0E06BB@lmi.net>

Hi Randolph,

Depending on whether you need to compute the direct component precisely or not, the optimal calculation of a space with venetian blinds is going to come from rtcontrib or mkillum with a BSDF file describing the blinds.  If you use genBSDF to create this file, the geometry is inserted into the final model using mkillum.  If you don't care so much about the direct component (sunlight passing between the slats onto interior surfaces), then rtcontrib will be much faster if you are computing many time points.  My feeling is that this should work well enough for glare evaluations.

Cheers,
-Greg

> From: "Randolph M. Fritz" <RFritz at lbl.gov>
> Date: January 5, 2011 11:34:22 AM PST
> 
> I've been working with a simple model for glare studies, based on an LBL test room with blinds.  The results are looking pretty good, but as soon as I put the blinds into the model, single-case simulation times went up to 2.5-3.5 hours.  Does anyone have any feeling for these times?  Are they reasonable for a na?ve model or too high?  The processor used is a quad-core AMD Opteron 2376 (2300 MHz) and I've been using Delaunay's implementation of the Perez sky model, gendaylit, and calculating five ambient bounces.
> 
> Possible lines of attack on the problem:
> -- Using genBSDF/mkillum (suggested by a colleague.)
> -- Simplify the blind model; use flat rather than curved slats.
> -- Review the rtrace parameters I am using.  I'm rereading John Mardaljevic's chapter in RwR on Daylight Simulation, looking for hints, but Mardaljevic (are you out there?) was primarily working with overcast skies, which aren't adequate for glare models, so I'm not sure how much of his advice still applies.  I'm also going to be sweeping the archives of this mailing list for ideas.
> 
> Anyone have additional suggestions?  Any thoughts on which to try first?  Are there particular articles it might be helpful to look at?
> -- 
> Randolph M. Fritz ? RFritz at lbl.gov


From jm at dmu.ac.uk  Wed Jan  5 13:19:47 2011
From: jm at dmu.ac.uk (John Mardaljevic)
Date: Wed, 5 Jan 2011 21:19:47 +0000
Subject: [Radiance-general] Simulating rooms with blinds: performance
Message-ID: <C7E0B3D0-6FB1-4839-8EBE-9377613978CD@dmu.ac.uk>

> but Mardaljevic (are you out there?)
I hadn't realised that I'd gone away.
> was primarily working with overcast skies, which aren't adequate for  
> glare models,
Indeed. (Actually, I'd already got a climate-based implementation  
working by then, but the chapter would have ended up longer than the  
book if I'd have tried to include it.)
> so I'm not sure how much of his advice still applies.
Depends on what you mean. The advice re: convergence testing is  
(still) probably applicable to most scenarios, at least for a 'naive'  
calc. But we need to know a little more what your goal is. The bulk of  
the computational effort tends to be, of course, with the prediction  
of the indirect component. So a reasonable estimate for luminance of,  
say, the blinds shouldn't be too onerous since the direct component  
and maybe 1st bounce will usually (but perhaps not always) dominate.  
Same goes for the view to the outside.
> Simplify the blind model; use flat rather than curved slats.
That might not be practicable if it changes the view of potentially  
illuminated slat area.
For what it's worth, I'm still very much with the sceptics re:  
predicting glare for deployed blinds (unless perhaps they're fabric).  
With venetian or vertical blinds, the experienced field of view  
luminance is dependant on the vagaries of user operation, which, I  
feel, renders an evaluation all but meaningless - even for a  
stochastic-based model of user operation (due to uncertainties in the  
parameterisation). I'm open to be convinced otherwise if someone can  
come up with a sufficiently compelling argument.
Cheers
John
-----------------------------------------------
Dr. John Mardaljevic
Reader in Daylight Modelling
Institute of Energy and Sustainable Development
De Montfort University
The Gateway
Leicester
LE1 9BH, UK
+44 (0) 116 257 7972
+44 (0) 116 257 7981 (fax)

jm at dmu.ac.uk
http://www.iesd.dmu.ac.uk/~jm





From RFritz at lbl.gov  Wed Jan  5 14:46:37 2011
From: RFritz at lbl.gov (Randolph M. Fritz)
Date: Wed, 5 Jan 2011 14:46:37 -0800
Subject: [Radiance-general] Printing man pages on a Mac on US-sized paper
Message-ID: <ig2scd$nch$1@dough.gmane.org>

(A brief note for anyone who needs this.)

First, set the default paper size in the groff driver by:
  sudo find /usr/share/groff -name DESC -exec perl -pi -e 's/^papersize 
a4/papersize letter/' {} \;

Then, the following command will create a PostScript file for a page 
without equations or tables:
     groff -Tps -mandoc -c -dpaper=letter `man -w rtcontrib` >t.ps

t.ps can then be opened in "preview" and printed.

Bah!
-- 
Randolph M. Fritz ? RFritz at lbl.gov
Environmental Energy Technologies Division ? Lawrence Berkeley Labs




From tbleicher at googlemail.com  Wed Jan  5 15:02:59 2011
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Wed, 5 Jan 2011 18:02:59 -0500
Subject: [Radiance-general] Printing man pages on a Mac on US-sized paper
In-Reply-To: <ig2scd$nch$1@dough.gmane.org>
References: <ig2scd$nch$1@dough.gmane.org>
Message-ID: <AANLkTin72RB0znr=_2tnat55=BnMyKUtBEMFQg22R_Gb@mail.gmail.com>

What's wrong with this:

groff -Tps -P-pletter -mandoc -c `man -w rtcontrib` > t.ps

Works for me without fiddling with system files.

Taken from the groff man-page, btw.

Thomas


On Wed, Jan 5, 2011 at 5:46 PM, Randolph M. Fritz <RFritz at lbl.gov> wrote:
> (A brief note for anyone who needs this.)
>
> First, set the default paper size in the groff driver by:
> ?sudo find /usr/share/groff -name DESC -exec perl -pi -e 's/^papersize
> a4/papersize letter/' {} \;
>
> Then, the following command will create a PostScript file for a page without
> equations or tables:
> ? ?groff -Tps -mandoc -c -dpaper=letter `man -w rtcontrib` >t.ps
>
> t.ps can then be opened in "preview" and printed.
>
> Bah!
> --
> Randolph M. Fritz ? RFritz at lbl.gov
> Environmental Energy Technologies Division ? Lawrence Berkeley Labs
>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>


From Robert.Guglielmetti at nrel.gov  Wed Jan  5 15:10:48 2011
From: Robert.Guglielmetti at nrel.gov (Guglielmetti, Robert)
Date: Wed, 5 Jan 2011 16:10:48 -0700
Subject: [Radiance-general] Printing man pages on a Mac on US-sized paper
In-Reply-To: <ig2scd$nch$1@dough.gmane.org>
Message-ID: <C94A471D.26AC%robert.guglielmetti@nrel.gov>

Hi Randolph,

man -t rtcontrib | open -f -a /Applications/Preview.app/

Yay Mac. =8-)
 
Rob Guglielmetti  IESNA, LEED AP
Commercial Buildings Research Group
National Renewable Energy Laboratory
1617 Cole Blvd MS:RSF202
Golden, CO 80401
T. 303.275.4319
F. 303.630.2055
E. robert.guglielmetti at nrel.gov





On 1/5/11 3:46 PM, "Randolph M. Fritz" <RFritz at lbl.gov> wrote:

>(A brief note for anyone who needs this.)
>
>First, set the default paper size in the groff driver by:
>  sudo find /usr/share/groff -name DESC -exec perl -pi -e 's/^papersize
>a4/papersize letter/' {} \;
>
>Then, the following command will create a PostScript file for a page
>without equations or tables:
>     groff -Tps -mandoc -c -dpaper=letter `man -w rtcontrib` >t.ps
>
>t.ps can then be opened in "preview" and printed.
>
>Bah!
>-- 
>Randolph M. Fritz ? RFritz at lbl.gov
>Environmental Energy Technologies Division ? Lawrence Berkeley Labs
>
>
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general at radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general



From RFritz at lbl.gov  Wed Jan  5 15:43:09 2011
From: RFritz at lbl.gov (Randolph M. Fritz)
Date: Wed, 5 Jan 2011 15:43:09 -0800
Subject: [Radiance-general] Printing man pages on a Mac on US-sized paper
References: <ig2scd$nch$1@dough.gmane.org>
	<C94A471D.26AC%robert.guglielmetti@nrel.gov>
Message-ID: <ig2vmd$6sr$1@dough.gmane.org>

> groff -Tps -P-pletter -mandoc -c `man -w rtcontrib` > t.ps

This also needs a "-dpaper=letter" to get the typography correct; the 
paper size is set in two places, and both have to be touched.

> man -t rtcontrib | open -f -a /Applications/Preview.app/

I didn't know that open can accept input from the standard input!  (And 
it's not documented in the general case, only for text files.)  This 
will produce an a4-size page, though.  Preview will stretch and squash 
it for printing.

I think the following command is an improvement on all three methods.  
It creates the typeset document correctly and does not require a change 
to system files.

> groff -Tps -mandoc -c -dpaper=letter -P-pletter `man -w rtcontrib` | 
> open -f -a Preview

Wish this stuff just worked.

Randolph

Back to the bit mines...




From jm at dmu.ac.uk  Thu Jan  6 00:46:01 2011
From: jm at dmu.ac.uk (John Mardaljevic)
Date: Thu, 6 Jan 2011 08:46:01 +0000
Subject: [Radiance-general] Printing man pages on a Mac on US-sized paper
Message-ID: <9A57CCF7-0C05-45B4-8EEF-2F4A77A0AE81@dmu.ac.uk>

Has anyone over there tried Skim to view/print man pages?  I've no  
idea how it handles paper size, but it's worth a go.  Here's the  
command (similar to Rob's) set to alias 'manp' in my .tcshrc file:

alias manp 	"man -t \!* | open -f -a Skim"

Skim is a very neat PDF viewer and allows annotations / notes similar  
to Acrobat Pro (but not compatible with A Pro).

John

-----------------------------------------------
Dr. John Mardaljevic
Reader in Daylight Modelling
Institute of Energy and Sustainable Development
De Montfort University
The Gateway
Leicester
LE1 9BH, UK
+44 (0) 116 257 7972
+44 (0) 116 257 7981 (fax)

jm at dmu.ac.uk
http://www.iesd.dmu.ac.uk/~jm





From RFritz at lbl.gov  Fri Jan  7 09:51:36 2011
From: RFritz at lbl.gov (Randolph M. Fritz)
Date: Fri, 7 Jan 2011 09:51:36 -0800
Subject: [Radiance-general] Printing man pages on a Mac on US-sized paper
References: <ig2scd$nch$1@dough.gmane.org>
	<9A57CCF7-0C05-45B4-8EEF-2F4A77A0AE81@dmu.ac.uk>
Message-ID: <ig7jr8$h74$1@dough.gmane.org>

Skim looks really cool--I'll have to try it.

Randolph

On 2011-01-06 00:46:01 -0800, John Mardaljevic said:

> Has anyone over there tried Skim to view/print man pages?  I've no
> idea how it handles paper size, but it's worth a go.  Here's the
> command (similar to Rob's) set to alias 'manp' in my .tcshrc file:
> 
> alias manp 	"man -t \!* | open -f -a Skim"
> 
> Skim is a very neat PDF viewer and allows annotations / notes similar
> to Acrobat Pro (but not compatible with A Pro).
> 
> John




From RFritz at lbl.gov  Fri Jan  7 09:54:19 2011
From: RFritz at lbl.gov (Randolph M. Fritz)
Date: Fri, 7 Jan 2011 09:54:19 -0800
Subject: [Radiance-general] Simulating rooms with blinds: performance
References: <ig2h3u$s17$1@dough.gmane.org>
	<B5403EFC-62FF-4D1F-840C-CE4BDE0E06BB@lmi.net>
Message-ID: <ig7k0b$i92$1@dough.gmane.org>

On 2011-01-05 12:50:05 -0800, Greg Ward said:

> Hi Randolph,
> 
> Depending on whether you need to compute the direct component precisely 
> or not, the optimal calculation of a space with venetian blinds is 
> going to come from rtcontrib or mkillum with a BSDF file describing the 
> blinds.  If you use genBSDF to create this file, the geometry is 
> inserted into the final model using mkillum.  If you don't care so much 
> about the direct component (sunlight passing between the slats onto 
> interior surfaces), then rtcontrib will be much faster if you are 
> computing many time points.  My feeling is that this should work well 
> enough for glare evaluations.
> 
> Cheers,
> -Greg

Thanks, Greg.  If sunlight is getting through the blinds, we're doing 
it wrong, so I think I'll try rtcontrib, though I probably need to 
consult with the rest of my team first.

Randolph

> 
>> From: "Randolph M. Fritz" <RFritz at lbl.gov>
>> Date: January 5, 2011 11:34:22 AM PST
>> 
>> I've been working with a simple model for glare studies, based on an 
>> LBL test room with blinds.  The results are looking pretty good, but as 
>> soon as I put the blinds into the model, single-case simulation times 
>> went up to 2.5-3.5 hours.  Does anyone have any feeling for these 
>> times?  Are they reasonable for a na?ve model or too high?  The 
>> processor used is a quad-core AMD Opteron 2376 (2300 MHz) and I've been 
>> using Delaunay's implementation of the Perez sky model, gendaylit, and 
>> calculating five ambient bounces.
>> 
>> Possible lines of attack on the problem:
>> -- Using genBSDF/mkillum (suggested by a colleague.)
>> -- Simplify the blind model; use flat rather than curved slats.
>> -- Review the rtrace parameters I am using.  I'm rereading John 
>> Mardaljevic's chapter in RwR on Daylight Simulation, looking for hints, 
>> but Mardaljevic (are you out there?) was primarily working with 
>> overcast skies, which aren't adequate for glare models, so I'm not sure 
>> how much of his advice still applies.  I'm also going to be sweeping 
>> the archives of this mailing list for ideas.
>> 
>> Anyone have additional suggestions?  Any thoughts on which to try 
>> first?  Are there particular articles it might be helpful to look at?
>> -- 
>> Randolph M. Fritz ? RFritz at lbl.gov





From Lucio.Boscolo at arup.com  Fri Jan  7 10:40:39 2011
From: Lucio.Boscolo at arup.com (Lucio Boscolo)
Date: Fri, 7 Jan 2011 18:40:39 +0000
Subject: [Radiance-general] Instances
In-Reply-To: <C43A7C7D-072A-469E-A5BE-8BA6FAC32AF3@lmi.net>
References: <1773335.454131290542592530.JavaMail.defaultUser@defaultHost>
	<4CEC21B0.6060103@visarc.com>
	<CC7B52EF0E443D45B11162FB554D97DF06B915F81C@EURXMBC02.global.arup.com>
	<4CED0866.2080807@visarc.com>
	<CC7B52EF0E443D45B11162FB554D97DF06B935FE90@EURXMBC02.global.arup.com>
	<4D05F826.5060009@gmx.net>
	<CC7B52EF0E443D45B11162FB554D97DF06B947B2E3@EURXMBC02.global.arup.com>
	<C43A7C7D-072A-469E-A5BE-8BA6FAC32AF3@lmi.net>
Message-ID: <CC7B52EF0E443D45B11162FB554D97DF101ABD7B72@EURXMBC02.global.arup.com>

Hi Greg,

Thank you so much for your detailed answer (and sorry for being late again exploring it). 

-aa method is a good one, but I am a little concerned this will impact a lot on rendering time in a scene like mine in which many ab are required and a very high number of rays (it is a comparison between shading systems to work out transmittances).

The -PP option seems to be what I need, but I am not sure I understand it. Please tell me if the following is correct.

I start an rpict (or rtrace) with a -PP namefile option.

I start other rpict or rtrace wit -PP namefile (the same) and they will share memory (ram?)

Ambient file instead will be shared by using -af and the same ambient file for all the processes.

Is this correct?

I believe -S is not needed with the -PP option, am I right?

Can I share with -PP between rpict and rtrace processes?

Thank you for your help, one of my colleagues run into the same issue today, so it would be very good if we manage to solve this! 

Have a nice day!!!

Lucio 

-----Original Message-----
From: Greg Ward [mailto:gregoryjward at gmail.com] 
Sent: 23 December 2010 17:33
To: Radiance general discussion
Subject: Re: [Radiance-general] Instances

Hi Lucio,

If you are executing in parallel on a shared memory machine, are you using the -PP option to rtrace (or rpict)?  This can help to reduce memory, especially on jobs where you are loading in a substantial ambient file to start.

Another approach is to abandon ambient caching entirely, which makes sense in scenes where you have a lot of important detail, but what's most important about it is the aggregate behavior.  I think your problem falls into that category.  Unfortunately, whatever -a* settings you have worked out will have to be rethought when you do this.  I should have a good guide for how to set these parameters, but you basically start by setting -aa 0, at which point -af, -ar, and -aw settings become irrelevant (no caching), and the -ad and -as settings should be changed.  You also should look at the -lw and -lr settings, because they will have a strong influence over how deep the ray tree is explored.

Axel Jacobs offers a brief treatment of these settings on page 12 of his rtcontrib tutorial, currently linked at:

	http://luminance.londonmet.ac.uk/learnix/docs/rtcontrib_lesson.pdf

It's probably worth a try.  I use -aa 0 routinely when modeling blind systems in mkillum, for example.

Best,
-Greg

> From: Lucio Boscolo <Lucio.Boscolo at arup.com>
> Date: December 23, 2010 4:18:25 AM PST
> 
> Hi Lars, 
> 
> Sorry again for late answer.
> 
> I think it is a memory problem because I monitored it with top and memory is quickly reducing and as soon as it goes under 100 MB or so (when it probably starts swapping to the HD) processors use drops to 0.something %. I've got 8 GB memory and ambient files are big up to 1.5 GB (very high settings). In the worst case the octree is 600 MB.
> 
> Unfortunately the detail is all in a shading device (it is actually a transmittance study) so, no chance for using ambient exclude. And there are no overlapping geometries in the single instances and the instances replication is done by xform using the bounding box for spacing. Also care has been taken in taking away vertical faces at the boundaries to avoid overlapping surfaces. 
> 
> So what I understand from this is that if rpict loads ambient files in memory as well as octrees, in the worst case I will have for each rpict calculation 1.5 + 0.5 + some work memory in use (I don't know how to quantify this). As I cannot run more than 2 processes, the work memory is probably bigger than  [7.5(available ram  memory) / 3 (max processes before it runs out of memory)] -[1.5+0.5] = 0.5 GB, which makes sense to me. 
> 
> What do you think?
> 
> As Jack was saying I should have organized the model better, but still is good to understand what happened for future use.
> 
> Thanks for all your help and Merry Christmas to you both and to all the radiance community :-)
> 
> Lucio Boscolo Mezzopan

_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general
____________________________________________________________
Electronic mail messages entering and leaving Arup  business
systems are scanned for acceptability of content and viruses



From jm at dmu.ac.uk  Fri Jan  7 10:47:54 2011
From: jm at dmu.ac.uk (John Mardaljevic)
Date: Fri, 7 Jan 2011 18:47:54 +0000
Subject: [Radiance-general] Printing man pages on a Mac on US-sized paper
Message-ID: <371BE063-D2E4-401D-8ED5-B8C6A2EFE91A@dmu.ac.uk>

For anyone else thinking of using Skim -- you need to know that any notes you make to a PDF are stored as metadata (this makes is very different to Acrobat Pro).  I made the mistake of annotating a PDF in Skim and then e-mailed it to myself to work on at home -- what I got was the un-annotated original.  What I should have done was Mail (or Save) as an Archive.  Of course, I could have just read the instructions in the first place...

John

-----------------------------------------------
Dr. John Mardaljevic
Reader in Daylight Modelling
Institute of Energy and Sustainable Development
De Montfort University
The Gateway
Leicester
LE1 9BH, UK
+44 (0) 116 257 7972
+44 (0) 116 257 7981 (fax)

jm at dmu.ac.uk
http://www.iesd.dmu.ac.uk/~jm

From gregoryjward at gmail.com  Fri Jan  7 15:22:24 2011
From: gregoryjward at gmail.com (Greg Ward)
Date: Fri, 7 Jan 2011 15:22:24 -0800
Subject: [Radiance-general] Instances
In-Reply-To: <CC7B52EF0E443D45B11162FB554D97DF101ABD7B72@EURXMBC02.global.arup.com>
References: <1773335.454131290542592530.JavaMail.defaultUser@defaultHost>
	<4CEC21B0.6060103@visarc.com>
	<CC7B52EF0E443D45B11162FB554D97DF06B915F81C@EURXMBC02.global.arup.com>
	<4CED0866.2080807@visarc.com>
	<CC7B52EF0E443D45B11162FB554D97DF06B935FE90@EURXMBC02.global.arup.com>
	<4D05F826.5060009@gmx.net>
	<CC7B52EF0E443D45B11162FB554D97DF06B947B2E3@EURXMBC02.global.arup.com>
	<C43A7C7D-072A-469E-A5BE-8BA6FAC32AF3@lmi.net>
	<CC7B52EF0E443D45B11162FB554D97DF101ABD7B72@EURXMBC02.global.arup.com>
Message-ID: <A3159C8B-89E6-4D92-A0A6-36C73DB225A3@lmi.net>

Hi Lucio,

> Thank you so much for your detailed answer (and sorry for being late again exploring it). 
> 
> -aa method is a good one, but I am a little concerned this will impact a lot on rendering time in a scene like mine in which many ab are required and a very high number of rays (it is a comparison between shading systems to work out transmittances).

It doesn't necessarily take as long as you might expect, because the ray tree is very sparse after the first bounce (depending on the -lw and -ld settings).

> The -PP option seems to be what I need, but I am not sure I understand it. Please tell me if the following is correct.
> 
> I start an rpict (or rtrace) with a -PP namefile option.
> 
> I start other rpict or rtrace wit -PP namefile (the same) and they will share memory (ram?)

Correct, although new ambient values will not share RAM.

> Ambient file instead will be shared by using -af and the same ambient file for all the processes.

This will share the values themselves, which is critical for speed if -aa is not 0, but they will take additional memory in each process.

> I believe -S is not needed with the -PP option, am I right?

With rpict, you need to couple -PP with -S.  The rpiece program takes care of dividing a single image into pieces if that is your desire.

> Can I share with -PP between rpict and rtrace processes?

Regrettably no, you need a separate syncfile for rpict and rtrace, as they are different executables.

Cheers,
-Greg

From jelleferinga at gmail.com  Mon Jan 10 06:19:13 2011
From: jelleferinga at gmail.com (jelle feringa)
Date: Mon, 10 Jan 2011 15:19:13 +0100
Subject: [Radiance-general] =?windows-1252?q?useful_reference=3A_=93Princi?=
 =?windows-1252?q?ples_of_Digital_Image_Synthesis=94?=
Message-ID: <8403C096-94FB-4F79-A521-1ED1045C60F2@gmail.com>

Excellent references! 
http://www.realtimerendering.com/blog/principles-of-digital-image-synthesis-now-free-for-download/

Cheers,

-jelle
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110110/782628cd/attachment.html>

From Lucio.Boscolo at arup.com  Mon Jan 10 07:06:48 2011
From: Lucio.Boscolo at arup.com (Lucio Boscolo)
Date: Mon, 10 Jan 2011 15:06:48 +0000
Subject: [Radiance-general] Instances
In-Reply-To: <A3159C8B-89E6-4D92-A0A6-36C73DB225A3@lmi.net>
References: <1773335.454131290542592530.JavaMail.defaultUser@defaultHost>
	<4CEC21B0.6060103@visarc.com>
	<CC7B52EF0E443D45B11162FB554D97DF06B915F81C@EURXMBC02.global.arup.com>
	<4CED0866.2080807@visarc.com>
	<CC7B52EF0E443D45B11162FB554D97DF06B935FE90@EURXMBC02.global.arup.com>
	<4D05F826.5060009@gmx.net>
	<CC7B52EF0E443D45B11162FB554D97DF06B947B2E3@EURXMBC02.global.arup.com>
	<C43A7C7D-072A-469E-A5BE-8BA6FAC32AF3@lmi.net>
	<CC7B52EF0E443D45B11162FB554D97DF101ABD7B72@EURXMBC02.global.arup.com>
	<A3159C8B-89E6-4D92-A0A6-36C73DB225A3@lmi.net>
Message-ID: <CC7B52EF0E443D45B11162FB554D97DF101ABD7D4C@EURXMBC02.global.arup.com>

Sorry Greg,

I feel a bit dumb, but still I'd like to understand this. 

If -PP is not sharing RAM, what memory is it sharing?

Thanks for your help again.


Lucio Boscolo Mezzopan
Assistant Designer? |? Lighting
       
Arup
13 Fitzroy Street ?London W1T 4BQ? United Kingdom
t +44 20 7636 1531? d +44 20 7755 6311
f +44 20 7755 9012 
www.arup.com

-----Original Message-----
From: Greg Ward [mailto:gregoryjward at gmail.com] 
Sent: 07 January 2011 23:22
To: Radiance general discussion
Subject: Re: [Radiance-general] Instances

Hi Lucio,

> Thank you so much for your detailed answer (and sorry for being late again exploring it). 
> 
> -aa method is a good one, but I am a little concerned this will impact a lot on rendering time in a scene like mine in which many ab are required and a very high number of rays (it is a comparison between shading systems to work out transmittances).

It doesn't necessarily take as long as you might expect, because the ray tree is very sparse after the first bounce (depending on the -lw and -ld settings).

> The -PP option seems to be what I need, but I am not sure I understand it. Please tell me if the following is correct.
> 
> I start an rpict (or rtrace) with a -PP namefile option.
> 
> I start other rpict or rtrace wit -PP namefile (the same) and they will share memory (ram?)

Correct, although new ambient values will not share RAM.

> Ambient file instead will be shared by using -af and the same ambient file for all the processes.

This will share the values themselves, which is critical for speed if -aa is not 0, but they will take additional memory in each process.

> I believe -S is not needed with the -PP option, am I right?

With rpict, you need to couple -PP with -S.  The rpiece program takes care of dividing a single image into pieces if that is your desire.

> Can I share with -PP between rpict and rtrace processes?

Regrettably no, you need a separate syncfile for rpict and rtrace, as they are different executables.

Cheers,
-Greg
_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general
____________________________________________________________
Electronic mail messages entering and leaving Arup  business
systems are scanned for acceptability of content and viruses



From jedev at visarc.com  Mon Jan 10 07:44:50 2011
From: jedev at visarc.com (Jack de Valpine)
Date: Mon, 10 Jan 2011 10:44:50 -0500
Subject: [Radiance-general] Instances
In-Reply-To: <CC7B52EF0E443D45B11162FB554D97DF101ABD7D4C@EURXMBC02.global.arup.com>
References: <1773335.454131290542592530.JavaMail.defaultUser@defaultHost>	<4CEC21B0.6060103@visarc.com>	<CC7B52EF0E443D45B11162FB554D97DF06B915F81C@EURXMBC02.global.arup.com>	<4CED0866.2080807@visarc.com>	<CC7B52EF0E443D45B11162FB554D97DF06B935FE90@EURXMBC02.global.arup.com>	<4D05F826.5060009@gmx.net>	<CC7B52EF0E443D45B11162FB554D97DF06B947B2E3@EURXMBC02.global.arup.com>	<C43A7C7D-072A-469E-A5BE-8BA6FAC32AF3@lmi.net>	<CC7B52EF0E443D45B11162FB554D97DF101ABD7B72@EURXMBC02.global.arup.com>	<A3159C8B-89E6-4D92-A0A6-36C73DB225A3@lmi.net>
	<CC7B52EF0E443D45B11162FB554D97DF101ABD7D4C@EURXMBC02.global.arup.com>
Message-ID: <4D2B2972.20400@visarc.com>

Hi Lucio,

This is somewhat confusing. -PP enables multiple process on the same 
machine to share memory. What is shared is memory space taken up by the 
octree. Ambient values are shared via the ambient file (-af), so they 
are not shared in RAM between processes (eg there is not a message 
passing mechanism for communicating back and forth between processes). 
At given points processes will write out the ambient data that has been 
calculated (by the given process) and held in memory to the ambient 
file. As processes do this they also read in the ambient values from the 
file (hope I get this right), so this is the method of sharing ambient 
terms.

-Jack

-- 
# Jack de Valpine
# president
#
# visarc incorporated
# http://www.visarc.com
#
# channeling technology for superior design and construction


On 1/10/2011 10:06 AM, Lucio Boscolo wrote:
> Sorry Greg,
>
> I feel a bit dumb, but still I'd like to understand this.
>
> If -PP is not sharing RAM, what memory is it sharing?
>
> Thanks for your help again.
>
>
> Lucio Boscolo Mezzopan
> Assistant Designer  |  Lighting
>
> Arup
> 13 Fitzroy Street  London W1T 4BQ  United Kingdom
> t +44 20 7636 1531  d +44 20 7755 6311
> f +44 20 7755 9012
> www.arup.com
>
> -----Original Message-----
> From: Greg Ward [mailto:gregoryjward at gmail.com]
> Sent: 07 January 2011 23:22
> To: Radiance general discussion
> Subject: Re: [Radiance-general] Instances
>
> Hi Lucio,
>
>> Thank you so much for your detailed answer (and sorry for being late again exploring it).
>>
>> -aa method is a good one, but I am a little concerned this will impact a lot on rendering time in a scene like mine in which many ab are required and a very high number of rays (it is a comparison between shading systems to work out transmittances).
> It doesn't necessarily take as long as you might expect, because the ray tree is very sparse after the first bounce (depending on the -lw and -ld settings).
>
>> The -PP option seems to be what I need, but I am not sure I understand it. Please tell me if the following is correct.
>>
>> I start an rpict (or rtrace) with a -PP namefile option.
>>
>> I start other rpict or rtrace wit -PP namefile (the same) and they will share memory (ram?)
> Correct, although new ambient values will not share RAM.
>
>> Ambient file instead will be shared by using -af and the same ambient file for all the processes.
> This will share the values themselves, which is critical for speed if -aa is not 0, but they will take additional memory in each process.
>
>> I believe -S is not needed with the -PP option, am I right?
> With rpict, you need to couple -PP with -S.  The rpiece program takes care of dividing a single image into pieces if that is your desire.
>
>> Can I share with -PP between rpict and rtrace processes?
> Regrettably no, you need a separate syncfile for rpict and rtrace, as they are different executables.
>
> Cheers,
> -Greg
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
> ____________________________________________________________
> Electronic mail messages entering and leaving Arup  business
> systems are scanned for acceptability of content and viruses
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general


From gregoryjward at gmail.com  Mon Jan 10 08:46:37 2011
From: gregoryjward at gmail.com (Greg Ward)
Date: Mon, 10 Jan 2011 08:46:37 -0800
Subject: [Radiance-general] Instances
In-Reply-To: <4D2B2972.20400@visarc.com>
References: <1773335.454131290542592530.JavaMail.defaultUser@defaultHost>	<4CEC21B0.6060103@visarc.com>	<CC7B52EF0E443D45B11162FB554D97DF06B915F81C@EURXMBC02.global.arup.com>	<4CED0866.2080807@visarc.com>	<CC7B52EF0E443D45B11162FB554D97DF06B935FE90@EURXMBC02.global.arup.com>	<4D05F826.5060009@gmx.net>	<CC7B52EF0E443D45B11162FB554D97DF06B947B2E3@EURXMBC02.global.arup.com>	<C43A7C7D-072A-469E-A5BE-8BA6FAC32AF3@lmi.net>	<CC7B52EF0E443D45B11162FB554D97DF101ABD7B72@EURXMBC02.global.arup.com>	<A3159C8B-89E6-4D92-A0A6-36C73DB225A3@lmi.net>
	<CC7B52EF0E443D45B11162FB554D97DF101ABD7D4C@EURXMBC02.global.arup.com>
	<4D2B2972.20400@visarc.com>
Message-ID: <B5D4DBFC-0741-4CD2-A3E4-26D66D84F928@lmi.net>

Hi Jack,

Your description of the behavior of rpict and rtrace with the -PP option is correct, and you essentially captured the reason behind the lack of memory sharing of ambient values.  Doing so would require locking and coordination of memory sharing across processes, which is implemented a little differently on different systems.  I chose to avoid the differences by taking advantage of the "copy-on-write" behavior of most Unix systems when fork() is called.

When you use the -PP option, rpict (or rtrace) loads in the octree and all the associated, static data structures needed for rendering.  It also loads in any indirect irradiance values that have been previously computed and cached in the ambient file.  Once that is done, it calls fork() to make a copy of the process and waits for additional connections by other rpict/rtrace commands using the same -PP syncfile.  It's a bit awkward, but it works on all modern Unix systems, and requires no further communication among processes once started.

The newer -n option in rvu works similarly, but through a different mechanism.  Rather than making multiple copies of the same process that expects input from stdin to tell it what to do, it has a single parent process that communicates via pipes to all its children, which perform the actual ray tracing.  It still uses the copy-on-write trick, loading the scene and ambient data prior to forking the child processes, but the whole thing is hidden from the user.

I subsequently implemented the -n option in rtrace as well, which is a bit confusing.  In most cases, it's a little more efficient to use rtrace -n than rtrace -PP, and you have to use one or the other.  The times you would still choose rtrace -PP are when you need to start the parallel processes at different times, or take the ray input from different sources.

I don't expect to add a -n option to rpict in the forseeable future.  There are certain things about the way rpict samples the image plane that make such an option problematic, so we're kind of stuck with -PP for now.

Best,
-Greg

> From: Jack de Valpine <jedev at visarc.com>
> Date: January 10, 2011 7:44:50 AM PST
> 
> Hi Lucio,
> 
> This is somewhat confusing. -PP enables multiple process on the same machine to share memory. What is shared is memory space taken up by the octree. Ambient values are shared via the ambient file (-af), so they are not shared in RAM between processes (eg there is not a message passing mechanism for communicating back and forth between processes). At given points processes will write out the ambient data that has been calculated (by the given process) and held in memory to the ambient file. As processes do this they also read in the ambient values from the file (hope I get this right), so this is the method of sharing ambient terms.
> 
> -Jack


From Lucio.Boscolo at arup.com  Tue Jan 11 10:46:48 2011
From: Lucio.Boscolo at arup.com (Lucio Boscolo)
Date: Tue, 11 Jan 2011 18:46:48 +0000
Subject: [Radiance-general] Instances
In-Reply-To: <B5D4DBFC-0741-4CD2-A3E4-26D66D84F928@lmi.net>
References: <1773335.454131290542592530.JavaMail.defaultUser@defaultHost>
	<4CEC21B0.6060103@visarc.com>
	<CC7B52EF0E443D45B11162FB554D97DF06B915F81C@EURXMBC02.global.arup.com>
	<4CED0866.2080807@visarc.com>
	<CC7B52EF0E443D45B11162FB554D97DF06B935FE90@EURXMBC02.global.arup.com>
	<4D05F826.5060009@gmx.net>
	<CC7B52EF0E443D45B11162FB554D97DF06B947B2E3@EURXMBC02.global.arup.com>
	<C43A7C7D-072A-469E-A5BE-8BA6FAC32AF3@lmi.net>
	<CC7B52EF0E443D45B11162FB554D97DF101ABD7B72@EURXMBC02.global.arup.com>
	<A3159C8B-89E6-4D92-A0A6-36C73DB225A3@lmi.net>
	<CC7B52EF0E443D45B11162FB554D97DF101ABD7D4C@EURXMBC02.global.arup.com>
	<4D2B2972.20400@visarc.com>
	<B5D4DBFC-0741-4CD2-A3E4-26D66D84F928@lmi.net>
Message-ID: <CC7B52EF0E443D45B11162FB554D97DF101ABD809F@EURXMBC02.global.arup.com>

Greg, Jack,

Thanks for your explanations, I think I've got it now!

So the RAM memory I can save via -PP is the one taken by the oct.

(hope I haven't misunderstood it again!)

Thanks again! You are great!

Lucio Boscolo Mezzopan
Assistant Designer? |? Lighting
       
Arup
13 Fitzroy Street ?London W1T 4BQ? United Kingdom
t +44 20 7636 1531? d +44 20 7755 6311
f +44 20 7755 9012 
www.arup.com

-----Original Message-----
From: Greg Ward [mailto:gregoryjward at gmail.com] 
Sent: 10 January 2011 16:47
To: Radiance general discussion
Subject: Re: [Radiance-general] Instances

Hi Jack,

Your description of the behavior of rpict and rtrace with the -PP option is correct, and you essentially captured the reason behind the lack of memory sharing of ambient values.  Doing so would require locking and coordination of memory sharing across processes, which is implemented a little differently on different systems.  I chose to avoid the differences by taking advantage of the "copy-on-write" behavior of most Unix systems when fork() is called.

When you use the -PP option, rpict (or rtrace) loads in the octree and all the associated, static data structures needed for rendering.  It also loads in any indirect irradiance values that have been previously computed and cached in the ambient file.  Once that is done, it calls fork() to make a copy of the process and waits for additional connections by other rpict/rtrace commands using the same -PP syncfile.  It's a bit awkward, but it works on all modern Unix systems, and requires no further communication among processes once started.

The newer -n option in rvu works similarly, but through a different mechanism.  Rather than making multiple copies of the same process that expects input from stdin to tell it what to do, it has a single parent process that communicates via pipes to all its children, which perform the actual ray tracing.  It still uses the copy-on-write trick, loading the scene and ambient data prior to forking the child processes, but the whole thing is hidden from the user.

I subsequently implemented the -n option in rtrace as well, which is a bit confusing.  In most cases, it's a little more efficient to use rtrace -n than rtrace -PP, and you have to use one or the other.  The times you would still choose rtrace -PP are when you need to start the parallel processes at different times, or take the ray input from different sources.

I don't expect to add a -n option to rpict in the forseeable future.  There are certain things about the way rpict samples the image plane that make such an option problematic, so we're kind of stuck with -PP for now.

Best,
-Greg

> From: Jack de Valpine <jedev at visarc.com>
> Date: January 10, 2011 7:44:50 AM PST
> 
> Hi Lucio,
> 
> This is somewhat confusing. -PP enables multiple process on the same machine to share memory. What is shared is memory space taken up by the octree. Ambient values are shared via the ambient file (-af), so they are not shared in RAM between processes (eg there is not a message passing mechanism for communicating back and forth between processes). At given points processes will write out the ambient data that has been calculated (by the given process) and held in memory to the ambient file. As processes do this they also read in the ambient values from the file (hope I get this right), so this is the method of sharing ambient terms.
> 
> -Jack

_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general
____________________________________________________________
Electronic mail messages entering and leaving Arup  business
systems are scanned for acceptability of content and viruses



From cbm at create.aau.dk  Wed Jan 12 00:39:18 2011
From: cbm at create.aau.dk (=?iso-8859-1?Q?Claus_Br=F8ndgaard_Madsen?=)
Date: Wed, 12 Jan 2011 09:39:18 +0100
Subject: [Radiance-general] Up-sampling a radiance picture?
Message-ID: <E35477F1A321144D897D44CCAAFF202C091DE76C85@AD-MAILBOX01.aau.dk>




Dear list

I have a weird question. How can I upsample a radiance image with a factor of 2 (or 4 or 8 ...) on the command line? It is easy to do in HDRShop but I need the functionality embedded in a large script.

I don't any fancy bi-linear interpolation ... simply nearest neighbour will do (i.e., repeating the same pixel four times in the upsampled output image).

I am doing compositing and I wish to composite a high res render with a low res real image. I want to do the compositing in high res, and subsample (using pfilt) afterwards to achieve a little blurring at the edges of the rendered objects ... sort of to feather them into the  image.


Best,
Claus


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110112/fa814581/attachment.html>

From grobe at gmx.net  Wed Jan 12 04:55:58 2011
From: grobe at gmx.net (Lars O. Grobe)
Date: Wed, 12 Jan 2011 13:55:58 +0100
Subject: [Radiance-general] Up-sampling a radiance picture?
In-Reply-To: <E35477F1A321144D897D44CCAAFF202C091DE76C85@AD-MAILBOX01.aau.dk>
References: <E35477F1A321144D897D44CCAAFF202C091DE76C85@AD-MAILBOX01.aau.dk>
Message-ID: <4D2DA4DE.8090102@gmx.net>

Hi Claus,

you can use pfilt to do that. The -x and -y parameters allow to set a 
target resolution. Many use them like -x /2 -y /2 to downsample, but you 
can also do the opposite by setting -x /.5 -y /.5 and achieve upsampling.

Cheers, Lars.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 3740 bytes
Desc: S/MIME Cryptographic Signature
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110112/d705f537/attachment.bin>

From cbm at create.aau.dk  Wed Jan 12 05:24:44 2011
From: cbm at create.aau.dk (=?iso-8859-1?Q?Claus_Br=F8ndgaard_Madsen?=)
Date: Wed, 12 Jan 2011 14:24:44 +0100
Subject: [Radiance-general] Up-sampling a radiance picture?
In-Reply-To: <4D2DA4DE.8090102@gmx.net>
References: <E35477F1A321144D897D44CCAAFF202C091DE76C85@AD-MAILBOX01.aau.dk>
	<4D2DA4DE.8090102@gmx.net>
Message-ID: <E35477F1A321144D897D44CCAAFF202C091DF2A080@AD-MAILBOX01.aau.dk>



Hi Lars,

Thanks! That was also my immediate idea ... then I read the man-page and saw that when using -x xres, xres has to be less than or equal to the target device. And when I read that I was reading it too quickly and simply "reading" (or getting the understanding) that xres needs to be less than or equal to the input resolution.

Sorry. One can say I was not reading what was written, but rather what I was fearing to read.

Best,
Claus




-----Original Message-----
From: Lars O. Grobe [mailto:grobe at gmx.net] 
Sent: 12. januar 2011 13:56
To: Radiance general discussion
Subject: Re: [Radiance-general] Up-sampling a radiance picture?

Hi Claus,

you can use pfilt to do that. The -x and -y parameters allow to set a target resolution. Many use them like -x /2 -y /2 to downsample, but you can also do the opposite by setting -x /.5 -y /.5 and achieve upsampling.

Cheers, Lars.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Claus Br?ndgaard Madsen.vcf
Type: text/x-vcard
Size: 6218 bytes
Desc: Claus Br?ndgaard Madsen.vcf
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110112/c092627d/attachment.vcf>

From reinhart at gsd.harvard.edu  Thu Jan 13 08:34:49 2011
From: reinhart at gsd.harvard.edu (Reinhart, Christoph)
Date: Thu, 13 Jan 2011 11:34:49 -0500
Subject: [Radiance-general] Survey on Current Glare Practice
Message-ID: <C5E1527F129BF545A250B5AD0B0C26EF0859CE47@ENTWEXMB0000000.university.harvard.edu>

Dear colleagues and friends,

 

Glare from daylight remains a somewhat underexplored parameter in
contemporary building design. In an attempt to help our students to
start thinking about the problem, we are teaching them HDR photography
and computer-based analysis methods via Radiance/Daysim/Evalglare. We
are now interested in how far you are currently dealing with glare in
your practice (or teaching) and invite you to participate in a survey on
'Glare Analysis and HDR Photography in Contemporary Architectural
Practice'. The survey is conducted as part of a Master's thesis by
Rashida Mogri at the Graduate School of Design at Harvard University. It
takes literally five minutes to complete and you may 'reward ' yourself
afterwards by reviewing some of the glare-related material on our web
site at
www.gsd.harvard.edu/research/gsdsquare/GlareRecommendationsForPractice.h
tml.

 

To participate in the survey please go to
http://www.surveymonkey.com/s/hdrphotography. Thank you for your time
and interest!

 

Christoph

Christoph Reinhart, Dr. Ing. 

Associate Professor of Architectural Technology

Graduate School of Design - Harvard University

Gund Hall 331, 48 Quincy Street, Cambridge, MA 02138, USA

t: 617 384 7269, f: 617 495 8916, reinhart at gsd.harvard.edu
<mailto:reinhart at gsd.harvard.edu> 

Research <http://www.gsd.harvard.edu/research/gsdsquare/> , DIVA-toolbox
<http://www.diva-for-rhino.com/> , Design Workflows
<http://www.gsd.harvard.edu/research/gsdsquare/tutorials.html>  

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110113/f04060e2/attachment.html>

From tbleicher at googlemail.com  Thu Jan 13 17:19:36 2011
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Thu, 13 Jan 2011 20:19:36 -0500
Subject: [Radiance-general] wxfalsecolor - important update
Message-ID: <AANLkTikgNCARDhwb=eA_OJAadMaCzLvZXWOa21J90+oS@mail.gmail.com>

All.

A new version (0.42) of wxfalsecolor is available for download from
the google projects site. This update fixes a bug which led to wrong
calculation of average luminance values for scaled images.

I recommend that all users update to the new version asap.

Further changes:
* improved feedback for loading of large images
* images zoom level is displayed in the lower left corner
* resizing of the frame (and image) is done in steps now to reduce
   the CPU load from recalculating every new image size. This is
   a temporary hack until I find a better solution for the problem.

Direct download link:

http://pyrat.googlecode.com/files/wxfalsecolor.exe


Regards,
Thomas


From RFritz at lbl.gov  Fri Jan 14 14:37:56 2011
From: RFritz at lbl.gov (Randolph M. Fritz)
Date: Fri, 14 Jan 2011 14:37:56 -0800
Subject: [Radiance-general] Simulating rooms with blinds: performance
References: <ig2h3u$s17$1@dough.gmane.org>
	<B5403EFC-62FF-4D1F-840C-CE4BDE0E06BB@lmi.net>
Message-ID: <igqj84$5me$1@dough.gmane.org>

Greg, I'm confused as to how rtcontrib would apply in my blinds case.  
I think it falls under "arbitrary input-output relationships in optical 
systems," but I am not sure how to do this for my blinds.  Did you do a 
presentation on this?  Something I could read?  Or...?

Randolph

On 2011-01-05 12:50:05 -0800, Greg Ward said:

> Hi Randolph,
> 
> Depending on whether you need to compute the direct component precisely 
> or not, the optimal calculation of a space with venetian blinds is 
> going to come from rtcontrib or mkillum with a BSDF file describing the 
> blinds.  If you use genBSDF to create this file, the geometry is 
> inserted into the final model using mkillum.  If you don't care so much 
> about the direct component (sunlight passing between the slats onto 
> interior surfaces), then rtcontrib will be much faster if you are 
> computing many time points.  My feeling is that this should work well 
> enough for glare evaluations.
> 
> Cheers,
> -Greg
> 
>> From: "Randolph M. Fritz" <RFritz at lbl.gov>
>> Date: January 5, 2011 11:34:22 AM PST
>> 
>> I've been working with a simple model for glare studies, based on an 
>> LBL test room with blinds.  The results are looking pretty good, but as 
>> soon as I put the blinds into the model, single-case simulation times 
>> went up to 2.5-3.5 hours.  Does anyone have any feeling for these 
>> times?  Are they reasonable for a na?ve model or too high?  The 
>> processor used is a quad-core AMD Opteron 2376 (2300 MHz) and I've been 
>> using Delaunay's implementation of the Perez sky model, gendaylit, and 
>> calculating five ambient bounces.
>> 
>> Possible lines of attack on the problem:
>> -- Using genBSDF/mkillum (suggested by a colleague.)
>> -- Simplify the blind model; use flat rather than curved slats.
>> -- Review the rtrace parameters I am using.  I'm rereading John 
>> Mardaljevic's chapter in RwR on Daylight Simulation, looking for hints, 
>> but Mardaljevic (are you out there?) was primarily working with 
>> overcast skies, which aren't adequate for glare models, so I'm not sure 
>> how much of his advice still applies.  I'm also going to be sweeping 
>> the archives of this mailing list for ideas.
>> 
>> Anyone have additional suggestions?  Any thoughts on which to try 
>> first?  Are there particular articles it might be helpful to look at?
>> --
>> Randolph M. Fritz ? RFritz at lbl.gov


-- 
Randolph M. Fritz ? RFritz at lbl.gov
Environmental Energy Technologies Division ? Lawrence Berkeley Labs




From gregoryjward at gmail.com  Fri Jan 14 15:40:42 2011
From: gregoryjward at gmail.com (Greg Ward)
Date: Fri, 14 Jan 2011 15:40:42 -0800
Subject: [Radiance-general] Simulating rooms with blinds: performance
In-Reply-To: <igqj84$5me$1@dough.gmane.org>
References: <ig2h3u$s17$1@dough.gmane.org>
	<B5403EFC-62FF-4D1F-840C-CE4BDE0E06BB@lmi.net>
	<igqj84$5me$1@dough.gmane.org>
Message-ID: <BA604C29-E791-4829-B146-771F99A65446@lmi.net>

Hi Randolph,

Have you looked through Axel's tutorial?  You'll need to run genBSDF if you don't have WINDOW6 data to get a BSDF for your blinds.  Andy can help you with that if you need help.

Cheers,
-Greg

> From: "Randolph M. Fritz" <RFritz at lbl.gov>
> Date: January 14, 2011 2:37:56 PM PST
> 
> Greg, I'm confused as to how rtcontrib would apply in my blinds case.  I think it falls under "arbitrary input-output relationships in optical systems," but I am not sure how to do this for my blinds.  Did you do a presentation on this?  Something I could read?  Or...?
> 
> Randolph
> 
> On 2011-01-05 12:50:05 -0800, Greg Ward said:
> 
>> Hi Randolph,
>> Depending on whether you need to compute the direct component precisely or not, the optimal calculation of a space with venetian blinds is going to come from rtcontrib or mkillum with a BSDF file describing the blinds.  If you use genBSDF to create this file, the geometry is inserted into the final model using mkillum.  If you don't care so much about the direct component (sunlight passing between the slats onto interior surfaces), then rtcontrib will be much faster if you are computing many time points.  My feeling is that this should work well enough for glare evaluations.
>> Cheers,
>> -Greg


From RFritz at lbl.gov  Fri Jan 14 15:55:14 2011
From: RFritz at lbl.gov (Randolph M. Fritz)
Date: Fri, 14 Jan 2011 15:55:14 -0800
Subject: [Radiance-general] Simulating rooms with blinds: performance
References: <ig2h3u$s17$1@dough.gmane.org>
	<B5403EFC-62FF-4D1F-840C-CE4BDE0E06BB@lmi.net>
	<igqj84$5me$1@dough.gmane.org>
	<BA604C29-E791-4829-B146-771F99A65446@lmi.net>
Message-ID: <igqnp2$pbi$1@dough.gmane.org>

Great, thanks!

On 2011-01-14 15:40:42 -0800, Greg Ward said:

> Hi Randolph,
> 
> Have you looked through Axel's tutorial?  You'll need to run genBSDF if 
> you don't have WINDOW6 data to get a BSDF for your blinds.  Andy can 
> help you with that if you need help.
> 
> Cheers,
> -Greg
> 
>> From: "Randolph M. Fritz" <RFritz at lbl.gov>
>> Date: January 14, 2011 2:37:56 PM PST
>> 
>> Greg, I'm confused as to how rtcontrib would apply in my blinds case.  
>> I think it falls under "arbitrary input-output relationships in optical 
>> systems," but I am not sure how to do this for my blinds.  Did you do a 
>> presentation on this?  Something I could read?  Or...?
>> 
>> Randolph
>> 
>> On 2011-01-05 12:50:05 -0800, Greg Ward said:
>> 
>>> Hi Randolph,
>>> Depending on whether you need to compute the direct component precisely 
>>> or not, the optimal calculation of a space with venetian blinds is 
>>> going to come from rtcontrib or mkillum with a BSDF file describing the 
>>> blinds.  If you use genBSDF to create this file, the geometry is 
>>> inserted into the final model using mkillum.  If you don't care so much 
>>> about the direct component (sunlight passing between the slats onto 
>>> interior surfaces), then rtcontrib will be much faster if you are 
>>> computing many time points.  My feeling is that this should work well 
>>> enough for glare evaluations.
>>> Cheers,
>>> -Greg


-- 
Randolph M. Fritz ? RFritz at lbl.gov
Environmental Energy Technologies Division ? Lawrence Berkeley Labs




From jacobs.axel at gmail.com  Sun Jan 16 13:42:29 2011
From: jacobs.axel at gmail.com (Axel Jacobs)
Date: Sun, 16 Jan 2011 21:42:29 +0000
Subject: [Radiance-general] primaries, horseshoes and v(lambda)
Message-ID: <4D336645.1060100@gmail.com>

I am trying to work out why the coefficient for converting r,g,b into a 
grey value are what they are:

L = 0.265R + 0.670G + 0.065B

I started off with the 1931 horseshoe diagram onto which I drew the 
Radiance colour gamut. The primitives are defined in src/common/color.h:

0.640 0.330 (red)
0.290 0.600 (green)
0.150 0.060 (blue)
0.333 0.333 (white)

http://luminance.londonmet.ac.uk/pickup/radiance_xy_primaries_with_lines_med.png

I then determined the dominant wavelength for r,g,b by projecting the 
x,y coordinates from the white point onto the perimeter of the 
horseshoe. This was rounded to the nearest 5 nm, because the data I had 
for the v(lambda) curve only had a 5 nm resolution:

http://luminance.londonmet.ac.uk/pickup/primaries_vlambda.png

The dominant wavelengths of the r,g,b primaries are drawn as arrows. The 
little coloured rings are the weighting coefficient as used by Radiance.

Since 1 = r + g + b, I normalised the values I got (where the little 
arrows hit the v(lambda) curve).

L = 0.326R + 0.635G + 0.039B

The derived coefficients are qualitatively similar to the Radiance ones 
in the sense that b < r < g, but I would have liked them to be closer in 
their absolute values, too. Although the methodology and drawings are a 
bit crude, I was hoping to get a better match.

Can anybody suggest a better solution?

Thanks

Axel


From cbm at create.aau.dk  Mon Jan 17 13:07:27 2011
From: cbm at create.aau.dk (=?iso-8859-1?Q?Claus_Br=F8ndgaard_Madsen?=)
Date: Mon, 17 Jan 2011 22:07:27 +0100
Subject: [Radiance-general] 3ds Max -> sketchup -> su2rad ?
Message-ID: <E35477F1A321144D897D44CCAAFF202C091DF2A6C1@AD-MAILBOX01.aau.dk>


Hi y'all,

I've grown tired of looking at boxes and spheres as test objects in my renderings ... so I wish to model in 3ds Max, import into SketchUp, and export from there to radiance format using the su2rad plugin.

At first I was ambitious and tested with a complicated sculpture I had in .max format, but soon I started testing with a simple 1x1x2 meter box. I model it in Max, save it in .3ds format, and import into SketchUp. The import works although there is a scale issue ... once imported the box is 0.025x0.025x0.05 meters, but that is easy to fix.

When I use the su2rad plugin to export to radiance files I get an xform error unless I use the "by group" mode and tick the "global coords" option. On the other hand, if I use the global cords option I don't get any geometry exported. After export the export directory looks like this:




Ambfiles
Images
Logfiles
Luminaires
Octrees
Skies
Views

(those are all directories, of which Views contain a valid .vf file with correct info, and luminaires contain a .ies file which I am not going to need ... all other directories are empty)

... and then two files:
Box.rad
Materials.rad

Materials.rad contain a generic plastic material (diffuse, reflectance 0.4 0.4 0.4).

Box.rad looks like this:

!xform skies/Boulder_CO_1108_1330.sky
!xform ./materials.rad
!ies2rad -s -m 0.800000 -t default -o luminaires/skp5030 luminaires/skp5030.ies | xform -n group

That's it.

If I model something (e.g., a box) directly in SketchUp the export seems to work fine.

Anyone else having experiences with something like this?

Best,
Claus




-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110117/4143e04b/attachment.html>

From tbleicher at googlemail.com  Mon Jan 17 13:26:57 2011
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Mon, 17 Jan 2011 16:26:57 -0500
Subject: [Radiance-general] 3ds Max -> sketchup -> su2rad ?
In-Reply-To: <E35477F1A321144D897D44CCAAFF202C091DF2A6C1@AD-MAILBOX01.aau.dk>
References: <E35477F1A321144D897D44CCAAFF202C091DF2A6C1@AD-MAILBOX01.aau.dk>
Message-ID: <AANLkTikDfEOvK5ODfZg4u17m94a_GSKuxG+K79e5KUND@mail.gmail.com>

Hi Claus

Which version of the su2rad plugin did you install?

Since you can export geometry created in SketchUp I would
assume that the import from 3DMax creates an odd scene
structure that su2rad can't handle properly. You can send me
the *.skp file with the imported geometry and I'll poke around
a bit.

2011/1/17 Claus Br?ndgaard Madsen <cbm at create.aau.dk>:
> The import works although there is a scale issue ?
> once imported the box is 0.025x0.025x0.05 meters,
> but that is easy to fix.

The basic SketchUp unit is 1 inch. So if you import something
with 1x1 units size it turns into roughly 0.025 meters.

> When I use the su2rad plugin to export to radiance files I get an xform
> error unless I use the ?by group? mode and tick the ?global coords? option.

[...]

> (those are all directories, of which Views contain a valid .vf file with
> correct info, and luminaires contain a .ies file which I am not going to
> need ? all other directories are empty)

Most directories are empty at this stage because they are used
for the rendering process. However, you are missing a *.rif file
and an "objects" directory, which tells me that there must have
been a problem during the export.

You can open the Ruby console window before you start the
export. This will show any script errors in the console and
helps to see if the export finishes successfully.

I am very surprised that the "luminaires" directory is created
and that there is an *.ies file that's supposed to be converted.
I thought I had disabled this feature in the official versions
so far.

Thomas


From cbm at create.aau.dk  Mon Jan 17 13:47:50 2011
From: cbm at create.aau.dk (=?iso-8859-1?Q?Claus_Br=F8ndgaard_Madsen?=)
Date: Mon, 17 Jan 2011 22:47:50 +0100
Subject: [Radiance-general] 3ds Max -> sketchup -> su2rad ?
In-Reply-To: <AANLkTikDfEOvK5ODfZg4u17m94a_GSKuxG+K79e5KUND@mail.gmail.com>
References: <E35477F1A321144D897D44CCAAFF202C091DF2A6C1@AD-MAILBOX01.aau.dk>
	<AANLkTikDfEOvK5ODfZg4u17m94a_GSKuxG+K79e5KUND@mail.gmail.com>
Message-ID: <E35477F1A321144D897D44CCAAFF202C091DF2A6D1@AD-MAILBOX01.aau.dk>

Hi Thomas,

I am rather excited about the possibilities I suddenly have if this can be made to work, so I am hoping the best :-)

The su2rad version I installed was su2rad_daysim_r03

I attach the .skp file ...


Thanks!

Claus




-----Original Message-----
From: Thomas Bleicher [mailto:tbleicher at googlemail.com] 
Sent: 17. januar 2011 22:27
To: Radiance general discussion
Subject: Re: [Radiance-general] 3ds Max -> sketchup -> su2rad ?

Hi Claus

Which version of the su2rad plugin did you install?

Since you can export geometry created in SketchUp I would assume that the import from 3DMax creates an odd scene structure that su2rad can't handle properly. You can send me the *.skp file with the imported geometry and I'll poke around a bit.

2011/1/17 Claus Br?ndgaard Madsen <cbm at create.aau.dk>:
> The import works although there is a scale issue . once imported the 
> box is 0.025x0.025x0.05 meters, but that is easy to fix.

The basic SketchUp unit is 1 inch. So if you import something with 1x1 units size it turns into roughly 0.025 meters.

> When I use the su2rad plugin to export to radiance files I get an 
> xform error unless I use the "by group" mode and tick the "global coords" option.

[...]

> (those are all directories, of which Views contain a valid .vf file 
> with correct info, and luminaires contain a .ies file which I am not 
> going to need . all other directories are empty)

Most directories are empty at this stage because they are used for the rendering process. However, you are missing a *.rif file and an "objects" directory, which tells me that there must have been a problem during the export.

You can open the Ruby console window before you start the export. This will show any script errors in the console and helps to see if the export finishes successfully.

I am very surprised that the "luminaires" directory is created and that there is an *.ies file that's supposed to be converted.
I thought I had disabled this feature in the official versions so far.

Thomas

_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 3dstoskpimport.skp
Type: application/octet-stream
Size: 64713 bytes
Desc: 3dstoskpimport.skp
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110117/c6ca5975/attachment-0001.obj>

From tbleicher at googlemail.com  Mon Jan 17 14:34:24 2011
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Mon, 17 Jan 2011 17:34:24 -0500
Subject: [Radiance-general] 3ds Max -> sketchup -> su2rad ?
In-Reply-To: <E35477F1A321144D897D44CCAAFF202C091DF2A6D1@AD-MAILBOX01.aau.dk>
References: <E35477F1A321144D897D44CCAAFF202C091DF2A6C1@AD-MAILBOX01.aau.dk>
	<AANLkTikDfEOvK5ODfZg4u17m94a_GSKuxG+K79e5KUND@mail.gmail.com>
	<E35477F1A321144D897D44CCAAFF202C091DF2A6D1@AD-MAILBOX01.aau.dk>
Message-ID: <AANLkTik4bXNOWnx4VixkM7wQMDTqsHJMoRZH13JJ86FG@mail.gmail.com>

Claus.

I just downloaded your file and opened it in SketchUp. I had to update
to the newest version of SU (released last week) but I think that's the
same version you have.

I then installed su2rad from a fresh download from the project site.
However, I had no problems exporting the scene in any mode.

The import from 3DMax creates a SketchUp component which
contains another component with the geometry (12 triangles).
su2rad can handle this structure.

I have checked the code again and I don't know why it would
try to replace the component with an IES file. This should only
happen if the component is created from a *.skp file and a *.ies
file with the same name exists next to *.skp file.

To debug this please open the Ruby console window in SketchUp
and type:

$SU2RAD_LOGLEVEL = 4

Then start the su2rad export function. You should see a number
of messages printed to the Ruby console. If the export finishes
without error it should also create a log file of the export in the
"logfiles" directory. If you can send me the text from the console
or the file I might be able to see what's going on on your machine.

Regards,
Thomas


From cbm at create.aau.dk  Mon Jan 17 14:53:03 2011
From: cbm at create.aau.dk (=?iso-8859-1?Q?Claus_Br=F8ndgaard_Madsen?=)
Date: Mon, 17 Jan 2011 23:53:03 +0100
Subject: [Radiance-general] 3ds Max -> sketchup -> su2rad ?
In-Reply-To: <AANLkTik4bXNOWnx4VixkM7wQMDTqsHJMoRZH13JJ86FG@mail.gmail.com>
References: <E35477F1A321144D897D44CCAAFF202C091DF2A6C1@AD-MAILBOX01.aau.dk>
	<AANLkTikDfEOvK5ODfZg4u17m94a_GSKuxG+K79e5KUND@mail.gmail.com>
	<E35477F1A321144D897D44CCAAFF202C091DF2A6D1@AD-MAILBOX01.aau.dk>
	<AANLkTik4bXNOWnx4VixkM7wQMDTqsHJMoRZH13JJ86FG@mail.gmail.com>
Message-ID: <E35477F1A321144D897D44CCAAFF202C091DF2A6DA@AD-MAILBOX01.aau.dk>



Hi Thomas,

The SU version I have is 8.0.4811 installed last night.

I open Ruby console, set LOGLEVEL and ran export. Here's the output (dunno if it matters but apparently there is some complaint about a convert.exe not being found):

$SU2RAD_LOGLEVEL = 4
4
RunTimeConfig.initialize()
RunTimeConfig: initPaths() ...
  searching 'replmarks.exe' ...
  => found 'replmarks.exe' in 'C:/Program Files/Google/Google SketchUp 8/Plugins/su2radlib/bin/WIN'
  searching 'convert.exe' ...
  ... skipping system folder 'C:\Windows\system32'
  ... skipping system folder 'C:\Windows\System32\Wbem'
  ... skipping system folder 'C:\Windows\System32\WindowsPowerShell\v1.0\'
  ... skipping system folder 'C:\Program Files\QuickTime\QTSystem\'
  => application 'convert.exe' not found
  searching 'ra_ppm.exe' ...
  => found 'ra_ppm.exe' in 'C:/Program Files/Google/Google SketchUp 8/Plugins/su2radlib/bin/WIN'
  searching 'obj2mesh.exe' ...
  => found 'obj2mesh.exe' in 'C:/Program Files/Google/Google SketchUp 8/Plugins/su2radlib/bin/WIN'
WARNING: path for CONVERT does not exist ('')


###  su2rad.rb export  ###
[D] ExportOptions.initialize()
[V] loading export options from attribute
 searching in 'C:/Program Files/Google/Google SketchUp 8/Plugins/su2radlib/ray'
 > 130 materials in file 'C:/Program Files/Google/Google SketchUp 8/Plugins/su2radlib/ray/K_and_E.rad'
 >  69 materials in file 'C:/Program Files/Google/Google SketchUp 8/Plugins/su2radlib/ray/materials.rad'
 >  33 materials in file 'C:/Program Files/Google/Google SketchUp 8/Plugins/su2radlib/ray/ral.rad'
=> materials total: 232
        texfunc: 2
          metal: 4
        plastic: 212
          glass: 12
     brightfunc: 1
          alias: 1

[D] setSketchup()
[D] setExportOptions() ...
[V] 'replmarks' found => keeping 'global coords' options
[W] 'convert' not found => disabling 'textures' options
[D] setRenderOptions() ...
[D] SketchupViewsList: setting views list ...
[D] setSkyOptions() ...
[I] mList rad: setting materials 0 to 200
[I] mList rad: setting materials 200 to 232
[I] mList skm: setting materials 0 to 10
[I] mList layer: setting materials 0 to 1
[V] TODO: webdialog closed
[I] Creating directory 'C:/Users/cbm/Desktop/3dstoskpimport/radiance/octrees'
[I] Creating directory 'C:/Users/cbm/Desktop/3dstoskpimport/radiance/images'
[I] Creating directory 'C:/Users/cbm/Desktop/3dstoskpimport/radiance/logfiles'
[I] Creating directory 'C:/Users/cbm/Desktop/3dstoskpimport/radiance/ambfiles'
[I] Creating directory 'C:/Users/cbm/Desktop/3dstoskpimport/radiance/skies'
[V] created file 'C:/Users/cbm/Desktop/3dstoskpimport/radiance/skies/Boulder_CO_1108_1330.sky'
[I] 
[I] OBJECTS:
[I] RadComponent: '' [def='skp2C40']
[V] ies data file 'C:/Users/cbm/AppData/Local/Temp/skp2C40.tmp' found
[V] replacement file 'C:/Users/cbm/AppData/Local/Temp/skp2C40.tmp' found
[I] begin export Sketchup::ComponentInstance name='' id='85135050'
  [I] new alias name 'skp2C40_material' for material 'sketchup_default_material'
  [I] Creating directory 'C:/Users/cbm/Desktop/3dstoskpimport/radiance/luminaires'
  [V] created file 'C:/Users/cbm/Desktop/3dstoskpimport/radiance/luminaires/skp2C40.ies'
[I] end export Sketchup::ComponentInstance name=''
[V] exported entities [refs=1, faces=0]
[V] created file 'C:/Users/cbm/Desktop/3dstoskpimport/radiance/unnamed_scene.rad'
[I] 
[I] MATERIALS:
[V] created file 'C:/Users/cbm/Desktop/3dstoskpimport/radiance/materials.rad'
[I] Creating directory 'C:/Users/cbm/Desktop/3dstoskpimport/radiance/views'
[V] created file 'C:/Users/cbm/Desktop/3dstoskpimport/radiance/views/unnamed_view.vf'
[E] No such file or directory - C:/Users/cbm/Desktop/3dstoskpimport/radiance/objects
C:/Program Files/Google/Google SketchUp 8/Plugins/su2radlib/radiancescene.rb:378:in `open'
C:/Program Files/Google/Google SketchUp 8/Plugins/su2radlib/radiancescene.rb:378:in `foreach'
C:/Program Files/Google/Google SketchUp 8/Plugins/su2radlib/radiancescene.rb:378:in `getRifObjects'
C:/Program Files/Google/Google SketchUp 8/Plugins/su2radlib/radiancescene.rb:505:in `createRifFile'
C:/Program Files/Google/Google SketchUp 8/Plugins/su2radlib/radiancescene.rb:277:in `export'
C:/Program Files/Google/Google SketchUp 8/Plugins/su2radlib/radiancescene.rb:233:in `startExportWeb'
C:/Program Files/Google/Google SketchUp 8/Plugins/su2radlib/webdialog.rb:160:in `startExport'
C:/Program Files/Google/Google SketchUp 8/Plugins/su2radlib/webdialog.rb:74:in `show'



Cheers,
Claus

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Claus Br?ndgaard Madsen.vcf
Type: text/x-vcard
Size: 6218 bytes
Desc: Claus Br?ndgaard Madsen.vcf
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110117/aec5a0aa/attachment.vcf>

From tbleicher at googlemail.com  Mon Jan 17 15:16:03 2011
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Mon, 17 Jan 2011 18:16:03 -0500
Subject: [Radiance-general] 3ds Max -> sketchup -> su2rad ?
In-Reply-To: <E35477F1A321144D897D44CCAAFF202C091DF2A6DA@AD-MAILBOX01.aau.dk>
References: <E35477F1A321144D897D44CCAAFF202C091DF2A6C1@AD-MAILBOX01.aau.dk>
	<AANLkTikDfEOvK5ODfZg4u17m94a_GSKuxG+K79e5KUND@mail.gmail.com>
	<E35477F1A321144D897D44CCAAFF202C091DF2A6D1@AD-MAILBOX01.aau.dk>
	<AANLkTik4bXNOWnx4VixkM7wQMDTqsHJMoRZH13JJ86FG@mail.gmail.com>
	<E35477F1A321144D897D44CCAAFF202C091DF2A6DA@AD-MAILBOX01.aau.dk>
Message-ID: <AANLkTinMy04Uh5ZvFNkW+1z6G_gprsmdN8scBoeLFv1q@mail.gmail.com>

Thanks Claus.

I think I understand now what's going on

2011/1/17 Claus Br?ndgaard Madsen <cbm at create.aau.dk>:
> I open Ruby console, set LOGLEVEL and ran export.
> Here's the output (dunno if it matters but apparently there
> is some complaint about a convert.exe not being found):

Not an issue here. "convert.exe" is used to convert textures
to tiffs which can then be converted to *.hdr files for Radiance.
If you don't have it you can't export textures, that's all.

Now on to the log:
[...]
> [I] OBJECTS:
> [I] RadComponent: '' [def='skp2C40']
> [V] ies data file 'C:/Users/cbm/AppData/Local/Temp/skp2C40.tmp' found
> [V] replacement file 'C:/Users/cbm/AppData/Local/Temp/skp2C40.tmp' found

Ok. The only top level entity in your scene is the component "skp2c40".
This component is created via export to a file "skp2C40.tmp" and then
loaded into your current file. su2rad tries to find an *.ies file by
substituting a ".ies" extension for a ".skp" extension. However, since
the file doesn't end with ".skp" nothing is substituted and the path to
"skp2C40.tmp" is returned as IES path. Therefore no geometry is created
and the whole export is replaced with an ies2rad command.

Temporary fix for now: delete the file
'C:/Users/cbm/AppData/Local/Temp/skp2C40.tmp' and any other skp*.tmp
files you might find there.

I can send you a file with a fix for su2rad later.

> [E] No such file or directory - C:/Users/cbm/Desktop/3dstoskpimport/radiance/objects

Here is the real problem of the export: Because there is no geometry
there is also no "objects" directory. The script tries to list it's contents
and crashes. Another thing I need to change.

If you can get rid of the wrong IES replacement above this should not
be an issue any more.


Regards,
Thomas


From cbm at create.aau.dk  Mon Jan 17 15:28:46 2011
From: cbm at create.aau.dk (=?utf-8?B?Q2xhdXMgQnLDuG5kZ2FhcmQgTWFkc2Vu?=)
Date: Tue, 18 Jan 2011 00:28:46 +0100
Subject: [Radiance-general] 3ds Max -> sketchup -> su2rad ?
In-Reply-To: <AANLkTinMy04Uh5ZvFNkW+1z6G_gprsmdN8scBoeLFv1q@mail.gmail.com>
References: <E35477F1A321144D897D44CCAAFF202C091DF2A6C1@AD-MAILBOX01.aau.dk>
	<AANLkTikDfEOvK5ODfZg4u17m94a_GSKuxG+K79e5KUND@mail.gmail.com>
	<E35477F1A321144D897D44CCAAFF202C091DF2A6D1@AD-MAILBOX01.aau.dk>
	<AANLkTik4bXNOWnx4VixkM7wQMDTqsHJMoRZH13JJ86FG@mail.gmail.com>
	<E35477F1A321144D897D44CCAAFF202C091DF2A6DA@AD-MAILBOX01.aau.dk>
	<AANLkTinMy04Uh5ZvFNkW+1z6G_gprsmdN8scBoeLFv1q@mail.gmail.com>
Message-ID: <40A5D8CD-5264-4085-AEF6-D946803741F9@create.aau.dk>

Thanks a million. I'm off to bed now ... Will continue tomorrow after work. Too busy during daytime to work on this :-)

/Claus

Sent from my iPod

On 18/01/2011, at 00.17, "Thomas Bleicher" <tbleicher at googlemail.com> wrote:

> Thanks Claus.
> 
> I think I understand now what's going on
> 
> 2011/1/17 Claus Br?ndgaard Madsen <cbm at create.aau.dk>:
>> I open Ruby console, set LOGLEVEL and ran export.
>> Here's the output (dunno if it matters but apparently there
>> is some complaint about a convert.exe not being found):
> 
> Not an issue here. "convert.exe" is used to convert textures
> to tiffs which can then be converted to *.hdr files for Radiance.
> If you don't have it you can't export textures, that's all.
> 
> Now on to the log:
> [...]
>> [I] OBJECTS:
>> [I] RadComponent: '' [def='skp2C40']
>> [V] ies data file 'C:/Users/cbm/AppData/Local/Temp/skp2C40.tmp' found
>> [V] replacement file 'C:/Users/cbm/AppData/Local/Temp/skp2C40.tmp' found
> 
> Ok. The only top level entity in your scene is the component "skp2c40".
> This component is created via export to a file "skp2C40.tmp" and then
> loaded into your current file. su2rad tries to find an *.ies file by
> substituting a ".ies" extension for a ".skp" extension. However, since
> the file doesn't end with ".skp" nothing is substituted and the path to
> "skp2C40.tmp" is returned as IES path. Therefore no geometry is created
> and the whole export is replaced with an ies2rad command.
> 
> Temporary fix for now: delete the file
> 'C:/Users/cbm/AppData/Local/Temp/skp2C40.tmp' and any other skp*.tmp
> files you might find there.
> 
> I can send you a file with a fix for su2rad later.
> 
>> [E] No such file or directory - C:/Users/cbm/Desktop/3dstoskpimport/radiance/objects
> 
> Here is the real problem of the export: Because there is no geometry
> there is also no "objects" directory. The script tries to list it's contents
> and crashes. Another thing I need to change.
> 
> If you can get rid of the wrong IES replacement above this should not
> be an issue any more.
> 
> 
> Regards,
> Thomas
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general

From cbm at create.aau.dk  Tue Jan 18 00:00:10 2011
From: cbm at create.aau.dk (=?utf-8?B?Q2xhdXMgQnLDuG5kZ2FhcmQgTWFkc2Vu?=)
Date: Tue, 18 Jan 2011 09:00:10 +0100
Subject: [Radiance-general] 3ds Max -> sketchup -> su2rad ?
In-Reply-To: <40A5D8CD-5264-4085-AEF6-D946803741F9@create.aau.dk>
References: <E35477F1A321144D897D44CCAAFF202C091DF2A6C1@AD-MAILBOX01.aau.dk>
	<AANLkTikDfEOvK5ODfZg4u17m94a_GSKuxG+K79e5KUND@mail.gmail.com>
	<E35477F1A321144D897D44CCAAFF202C091DF2A6D1@AD-MAILBOX01.aau.dk>
	<AANLkTik4bXNOWnx4VixkM7wQMDTqsHJMoRZH13JJ86FG@mail.gmail.com>
	<E35477F1A321144D897D44CCAAFF202C091DF2A6DA@AD-MAILBOX01.aau.dk>
	<AANLkTinMy04Uh5ZvFNkW+1z6G_gprsmdN8scBoeLFv1q@mail.gmail.com>
	<40A5D8CD-5264-4085-AEF6-D946803741F9@create.aau.dk>
Message-ID: <E35477F1A321144D897D44CCAAFF202C091DF2A720@AD-MAILBOX01.aau.dk>



Hi Thomas,

After removing the .tmp files export now works just fine ...

Regarding convert.exe ... what is it, where does it come from, any chances I can get it somewhere?

Already late for a meeting, but had to check export first :-)

Cheers,
Claus





-----Original Message-----
From: Claus Br?ndgaard Madsen [mailto:cbm at create.aau.dk] 
Sent: 18. januar 2011 00:29
To: Radiance general discussion
Subject: Re: [Radiance-general] 3ds Max -> sketchup -> su2rad ?

Thanks a million. I'm off to bed now ... Will continue tomorrow after work. Too busy during daytime to work on this :-)

/Claus

Sent from my iPod

On 18/01/2011, at 00.17, "Thomas Bleicher" <tbleicher at googlemail.com> wrote:

> Thanks Claus.
> 
> I think I understand now what's going on
> 
> 2011/1/17 Claus Br?ndgaard Madsen <cbm at create.aau.dk>:
>> I open Ruby console, set LOGLEVEL and ran export.
>> Here's the output (dunno if it matters but apparently there is some 
>> complaint about a convert.exe not being found):
> 
> Not an issue here. "convert.exe" is used to convert textures to tiffs 
> which can then be converted to *.hdr files for Radiance.
> If you don't have it you can't export textures, that's all.
> 
> Now on to the log:
> [...]
>> [I] OBJECTS:
>> [I] RadComponent: '' [def='skp2C40']
>> [V] ies data file 'C:/Users/cbm/AppData/Local/Temp/skp2C40.tmp' found 
>> [V] replacement file 'C:/Users/cbm/AppData/Local/Temp/skp2C40.tmp' 
>> found
> 
> Ok. The only top level entity in your scene is the component "skp2c40".
> This component is created via export to a file "skp2C40.tmp" and then 
> loaded into your current file. su2rad tries to find an *.ies file by 
> substituting a ".ies" extension for a ".skp" extension. However, since 
> the file doesn't end with ".skp" nothing is substituted and the path 
> to "skp2C40.tmp" is returned as IES path. Therefore no geometry is 
> created and the whole export is replaced with an ies2rad command.
> 
> Temporary fix for now: delete the file 
> 'C:/Users/cbm/AppData/Local/Temp/skp2C40.tmp' and any other skp*.tmp 
> files you might find there.
> 
> I can send you a file with a fix for su2rad later.
> 
>> [E] No such file or directory - 
>> C:/Users/cbm/Desktop/3dstoskpimport/radiance/objects
> 
> Here is the real problem of the export: Because there is no geometry 
> there is also no "objects" directory. The script tries to list it's 
> contents and crashes. Another thing I need to change.
> 
> If you can get rid of the wrong IES replacement above this should not 
> be an issue any more.
> 
> 
> Regards,
> Thomas
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Claus Br?ndgaard Madsen.vcf
Type: text/x-vcard
Size: 6218 bytes
Desc: Claus Br?ndgaard Madsen.vcf
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110118/848d224f/attachment.vcf>

From grobe at gmx.net  Tue Jan 18 00:40:28 2011
From: grobe at gmx.net (Lars O. Grobe)
Date: Tue, 18 Jan 2011 09:40:28 +0100
Subject: [Radiance-general] convert (was: 3ds Max -> sketchup -> su2rad ?)
In-Reply-To: <E35477F1A321144D897D44CCAAFF202C091DF2A720@AD-MAILBOX01.aau.dk>
References: <E35477F1A321144D897D44CCAAFF202C091DF2A6C1@AD-MAILBOX01.aau.dk>
	<AANLkTikDfEOvK5ODfZg4u17m94a_GSKuxG+K79e5KUND@mail.gmail.com>
	<E35477F1A321144D897D44CCAAFF202C091DF2A6D1@AD-MAILBOX01.aau.dk>
	<AANLkTik4bXNOWnx4VixkM7wQMDTqsHJMoRZH13JJ86FG@mail.gmail.com>
	<E35477F1A321144D897D44CCAAFF202C091DF2A6DA@AD-MAILBOX01.aau.dk>
	<AANLkTinMy04Uh5ZvFNkW+1z6G_gprsmdN8scBoeLFv1q@mail.gmail.com>
	<40A5D8CD-5264-4085-AEF6-D946803741F9@create.aau.dk>
	<E35477F1A321144D897D44CCAAFF202C091DF2A720@AD-MAILBOX01.aau.dk>
Message-ID: <1295340028.2827.3.camel@lars-laptop>

Hi Claus!

> Regarding convert.exe ... what is it, where does it come from, any chances I can get it somewhere?

"convert" is part of Imagemagick, the front-end to all its image
manipulation and conversion features. Very useful tool to have, it also
supports Radiance's hdr format (as long as you use its -gamma
parameter), so you can e.g. directly convert from HDR to PNG or JPG (not
a lossless operation of course...).

Cheers, Lars.



From gregoryjward at gmail.com  Tue Jan 18 07:50:56 2011
From: gregoryjward at gmail.com (Greg Ward)
Date: Tue, 18 Jan 2011 07:50:56 -0800
Subject: [Radiance-general] primaries, horseshoes and v(lambda)
In-Reply-To: <4D336645.1060100@gmail.com>
References: <4D336645.1060100@gmail.com>
Message-ID: <9E92F262-8FAB-415C-B3DA-FD7B01BB4D59@lmi.net>

Hi Axel,

The calculation of the coefficients for red green and blue conversion to luminance (Y) is spelled out in src/common/color.h.  The math is a little bit complicated, and I admit that I do not fully understand its relationship to the geometry of the CIE horseshoe diagram, so I'm not sure I can resolve your conundrum.  I know you have to account for the white point, which in the case of the Radiance color space is set to neutral gray (x,y)=(1/3,1/3).  It looks like the CIE formulas, which I copied out of a text somewhere, apply ratios of cross products, but I really have no idea why.

I'm sorry I can't be of more help.  If I knew of a text that explained this intuitively, I would refer you (and myself) to it....

Best,
-Greg

> From: Axel Jacobs <jacobs.axel at gmail.com>
> Date: January 16, 2011 1:42:29 PM PST
> 
> I am trying to work out why the coefficient for converting r,g,b into a grey value are what they are:
> 
> L = 0.265R + 0.670G + 0.065B
> 
> I started off with the 1931 horseshoe diagram onto which I drew the Radiance colour gamut. The primitives are defined in src/common/color.h:
> 
> 0.640 0.330 (red)
> 0.290 0.600 (green)
> 0.150 0.060 (blue)
> 0.333 0.333 (white)
> 
> http://luminance.londonmet.ac.uk/pickup/radiance_xy_primaries_with_lines_med.png
> 
> I then determined the dominant wavelength for r,g,b by projecting the x,y coordinates from the white point onto the perimeter of the horseshoe. This was rounded to the nearest 5 nm, because the data I had for the v(lambda) curve only had a 5 nm resolution:
> 
> http://luminance.londonmet.ac.uk/pickup/primaries_vlambda.png
> 
> The dominant wavelengths of the r,g,b primaries are drawn as arrows. The little coloured rings are the weighting coefficient as used by Radiance.
> 
> Since 1 = r + g + b, I normalised the values I got (where the little arrows hit the v(lambda) curve).
> 
> L = 0.326R + 0.635G + 0.039B
> 
> The derived coefficients are qualitatively similar to the Radiance ones in the sense that b < r < g, but I would have liked them to be closer in their absolute values, too. Although the methodology and drawings are a bit crude, I was hoping to get a better match.
> 
> Can anybody suggest a better solution?
> 
> Thanks
> 
> Axel


From brajeshlal at yahoo.com  Wed Jan 19 23:58:52 2011
From: brajeshlal at yahoo.com (Brajesh Lal)
Date: Wed, 19 Jan 2011 23:58:52 -0800 (PST)
Subject: [Radiance-general] rendering without shadow
In-Reply-To: <9E92F262-8FAB-415C-B3DA-FD7B01BB4D59@lmi.net>
References: <4D336645.1060100@gmail.com>
	<9E92F262-8FAB-415C-B3DA-FD7B01BB4D59@lmi.net>
Message-ID: <329674.31822.qm@web57309.mail.re1.yahoo.com>

Hi,

I am using rpict command , i need to render the scene without shadows. 
How i can do it ?

-Brajesh


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110119/c887ff2b/attachment.html>

From brajeshlal at yahoo.com  Thu Jan 20 00:35:01 2011
From: brajeshlal at yahoo.com (Brajesh Lal)
Date: Thu, 20 Jan 2011 00:35:01 -0800 (PST)
Subject: [Radiance-general] Reading light vectors tom txt and automate
	rendering
Message-ID: <431106.21235.qm@web57314.mail.re1.yahoo.com>

Hi,

I have txt file with light vectors ( x, y and z vectors separated by tabs) . 
Same scene has to be rendered (using rpict) with each set of light vector and 
saved as different .hdr file.
Instead of doing one by one, i need to automate the process by creating a some 
script (may be using rif file and rad command), which can update the light 
vectors in the scene file (.rad file).
I am confused 

1. How do i declare the variable for light vectors and update the light vectors 
in the scene file ?
2. What are the steps to do it ? 

( I am still using 3.9 version)
Best Regards, 
Brajesh Lal



      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110120/6e5050f3/attachment.html>

From tbleicher at googlemail.com  Thu Jan 20 07:00:00 2011
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Thu, 20 Jan 2011 10:00:00 -0500
Subject: [Radiance-general] rendering without shadow
In-Reply-To: <329674.31822.qm@web57309.mail.re1.yahoo.com>
References: <4D336645.1060100@gmail.com>
	<9E92F262-8FAB-415C-B3DA-FD7B01BB4D59@lmi.net>
	<329674.31822.qm@web57309.mail.re1.yahoo.com>
Message-ID: <AANLkTimgV5nuDFVJyH87UiZ=Jfp=wTo7cDokpZjK+9EL@mail.gmail.com>

Brajesh.

Your problem description is a bit cryptic. Could you please clarify
what your problem exactly is and add a few details about your scene
and the exact command you  used to render your picture.

On Thu, Jan 20, 2011 at 2:58 AM, Brajesh Lal <brajeshlal at yahoo.com> wrote:

> I am using rpict command , i need to render the scene without shadows.
> How i can do it ?

Rendering a scene completely without shadow is probably possible but
it would not look good. You need shadows to see the shape of objects.

You seem to be new to Radiance so I am speculating a bit about your
problem: Your rendered an image but everything that is not in direct
(sun)light is totally black?

If this is the case you have to add the option "-ab 2" to your rpict
command line to calculate the light in areas that only receive
reflected light. Depending on your scene you should increase the "-ab
2" to "-ab 5" or "-ab 6" to capture the ambient light more accurately.
However, I assume that you also need to set other parameters to
improve the quality of your rendering/calculation.

Regards,
Thomas


From tbleicher at googlemail.com  Thu Jan 20 07:27:48 2011
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Thu, 20 Jan 2011 10:27:48 -0500
Subject: [Radiance-general] Reading light vectors tom txt and automate
	rendering
In-Reply-To: <431106.21235.qm@web57314.mail.re1.yahoo.com>
References: <431106.21235.qm@web57314.mail.re1.yahoo.com>
Message-ID: <AANLkTimZ3LfThfoEcMPXKAbeN1Bd58qjxrMAM9AuTxRF@mail.gmail.com>

Brajesh.

Before I go into too much detail about a scripted solution please
confirm the following:

You have a static scene and want to show this scene under different
lighting conditions; specifically you want to show changes of the
light (sun?) direction.

If you only want one directional light source (sun but no sky) you can
modify a typical sky description as created by gensky. For example,
the following gensky command creates a sun 45 degrees east of south
and 45 degrees zenith elevation:

gensky -ang 45 -45 +s

The corresponding Radiance description looks like this:


# --- begin sky description ----
# gensky -ang 45 -45 +s
# Ground ambient level: 14.8

void light solar
0
0
3 6.77e+06 6.77e+06 6.77e+06

solar source sun
0
0
4 0.500000 -0.500000 0.707107 0.5

void brightfunc skyfunc
2 skybr skybright.cal
0
7 1 9.56e+00 2.12e+01 5.71e-01 0.500000 -0.500000 0.707107
# --- end sky description ---

The line "4 0.500000 -0.500000 0.707107 0.5" has as the 2nd, 3rd and
4th argument the sun direction as x,y,z vector.


To create a set of image with changing sun direction you have to

1) replace the (x,y,z) vector in the sky definition with one of your
light vectors
2) create a new scene octree from the sky definition and the scene geometry
3) render the image
4) give the new image a recognisable name ("img_x_y_z.hdr")
5) rinse and repeat

Depending on your computer environment and your scripting skills you
have a number of choices to accomplish this in detail. If you need
more information please provide more details about your situation,
knowledge and operating system.

Please note that the above modification will not create a complete sky
definition. If you want to simulate the effect of natural light (sun
and sky) then you should not modify the sky description file directly.
This modification will also not take into account the change of
sunlight intensity during the day.

Regards,
Thomas

On Thu, Jan 20, 2011 at 3:35 AM, Brajesh Lal <brajeshlal at yahoo.com> wrote:
> Hi,
> I have txt file with light vectors ( x, y and z vectors separated by tabs) .
> Same scene has to be rendered (using rpict) with each set of light vector
> and saved as different .hdr file.
> Instead of doing one by one, i need to automate the process by creating a
> some script (may be using rif file and rad command), which can update the
> light vectors in the scene file (.rad file).
> I am confused
> 1. How do i declare the variable for light vectors and update the light
> vectors in the scene file ?
> 2. What are the steps to do it ?
> ( I am still using 3.9 version)
> Best Regards,
> Brajesh Lal
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>


From brajeshlal at yahoo.com  Thu Jan 20 07:39:47 2011
From: brajeshlal at yahoo.com (Brajesh Lal)
Date: Thu, 20 Jan 2011 07:39:47 -0800 (PST)
Subject: [Radiance-general] rendering without shadow
In-Reply-To: <AANLkTimgV5nuDFVJyH87UiZ=Jfp=wTo7cDokpZjK+9EL@mail.gmail.com>
References: <4D336645.1060100@gmail.com>
	<9E92F262-8FAB-415C-B3DA-FD7B01BB4D59@lmi.net>
	<329674.31822.qm@web57309.mail.re1.yahoo.com>
	<AANLkTimgV5nuDFVJyH87UiZ=Jfp=wTo7cDokpZjK+9EL@mail.gmail.com>
Message-ID: <534476.11642.qm@web57309.mail.re1.yahoo.com>

Hi Thomas,
Sorry for ambiguity. I need shadow pixel ids of the scene.
I am wondering if i can disable or enable the shadow casting feature of a 
particular object or scene ( like any other 3D packages). Then i can 
have rendered image with and without shadow. Their difference can give me shadow 
pixels. 
Or
If i can render the scene with some constant background color, then i can read 
the shadows pixel ids (low pixel value) in matlab.

my scene has only diffuse objects  ( diffuse reflectance can be of any value, no 
black object) and a single direct light.   

 Best Regards,     Brajesh Lal




________________________________
From: Thomas Bleicher <tbleicher at googlemail.com>
To: Radiance general discussion <radiance-general at radiance-online.org>
Sent: Thu, January 20, 2011 4:00:00 PM
Subject: Re: [Radiance-general] rendering without shadow

Brajesh.

Your problem description is a bit cryptic. Could you please clarify
what your problem exactly is and add a few details about your scene
and the exact command you  used to render your picture.

On Thu, Jan 20, 2011 at 2:58 AM, Brajesh Lal <brajeshlal at yahoo.com> wrote:

> I am using rpict command , i need to render the scene without shadows.
> How i can do it ?

Rendering a scene completely without shadow is probably possible but
it would not look good. You need shadows to see the shape of objects.

You seem to be new to Radiance so I am speculating a bit about your
problem: Your rendered an image but everything that is not in direct
(sun)light is totally black?

If this is the case you have to add the option "-ab 2" to your rpict
command line to calculate the light in areas that only receive
reflected light. Depending on your scene you should increase the "-ab
2" to "-ab 5" or "-ab 6" to capture the ambient light more accurately.
However, I assume that you also need to set other parameters to
improve the quality of your rendering/calculation.

Regards,
Thomas

_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general



      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110120/2e80ca3a/attachment.html>

From tbleicher at googlemail.com  Thu Jan 20 08:59:14 2011
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Thu, 20 Jan 2011 11:59:14 -0500
Subject: [Radiance-general] rendering without shadow
In-Reply-To: <534476.11642.qm@web57309.mail.re1.yahoo.com>
References: <4D336645.1060100@gmail.com>
	<9E92F262-8FAB-415C-B3DA-FD7B01BB4D59@lmi.net>
	<329674.31822.qm@web57309.mail.re1.yahoo.com>
	<AANLkTimgV5nuDFVJyH87UiZ=Jfp=wTo7cDokpZjK+9EL@mail.gmail.com>
	<534476.11642.qm@web57309.mail.re1.yahoo.com>
Message-ID: <AANLkTimfiy-7PbNGjjNh_5EdkcgB8H9mEMuG0jMLDmBw@mail.gmail.com>

Thanks for clarifying.

On Thu, Jan 20, 2011 at 10:39 AM, Brajesh Lal <brajeshlal at yahoo.com> wrote:
> Hi Thomas,
> Sorry for ambiguity. I need shadow pixel ids of the scene.
> I am wondering if i can disable or enable the shadow casting feature
> of a particular object or scene ( like any other 3D packages).

Radiance is not like a typical 3D engine where lighting effects and
surface qualities are synthetic. In Radiance you have some "physical"
restrictions for what you can model and render. However, Radiance is
also very flexible so that with some extra effort you may be able to
achieve your desired result.

> Then i can have?rendered image with and without shadow.
> Their difference can give me shadow pixels.

You can render one image with only the direct light visible (no
ambient light). Everything that lies in shadow will be black. Try to
render an image with the option "-ab 0" and see if the dark areas are
what you expected your shadows to look like.

You can then render a second image with indirect contribution and
subtract the two images. But the result will not be limited to the
shadows but will also show the difference in the lighting levels of
lit areas. To render the second image use "-ab 1" or "-ab 2".

To calculate the difference of the images use this command:

pcomb -e 'ro=ri(1)-ri(2);go=gi(1)-gi(2);bo=bi(1)-bi(2)' -o
no_shadow.hdr -o shadow.hdr > diff.hdr

You can modify this calculation to introduce a threshold which will
clean up the shadow image a bit. But first you have to see if this is
in principle the right way to go.

> Or
> If i can render the scene with some constant background color, then i can
> read the shadows pixel ids (low pixel value) in matlab.

You can also define a coloured "ambient light" to give the shadow a
red or green tint.

> my scene has only diffuse objects (diffuse reflectance can
> be of any value, no black object) and a single direct light.

Light sources in Radiance are not point lights but need a physical
surface area to attache to. You should use a small object here and set
the rendering parameters right to avoid a subdivision of the surface
during the rendering process which would result in fuzzy shadow edges.

Regards,
Thomas


From gregoryjward at gmail.com  Thu Jan 20 12:06:43 2011
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu, 20 Jan 2011 12:06:43 -0800
Subject: [Radiance-general] rendering without shadow
In-Reply-To: <AANLkTimfiy-7PbNGjjNh_5EdkcgB8H9mEMuG0jMLDmBw@mail.gmail.com>
References: <4D336645.1060100@gmail.com>
	<9E92F262-8FAB-415C-B3DA-FD7B01BB4D59@lmi.net>
	<329674.31822.qm@web57309.mail.re1.yahoo.com>
	<AANLkTimgV5nuDFVJyH87UiZ=Jfp=wTo7cDokpZjK+9EL@mail.gmail.com>
	<534476.11642.qm@web57309.mail.re1.yahoo.com>
	<AANLkTimfiy-7PbNGjjNh_5EdkcgB8H9mEMuG0jMLDmBw@mail.gmail.com>
Message-ID: <18646883-EEEE-4912-A559-CE12A6BC5EF6@lmi.net>

Another option is to use rtcontrib to separate light source contributions.  Something like:

	vwrays -ff -x 1024 -y 1024 -vf view.vf \
		| rtcontrib -ffc `vwrays -x 1024 -y 1024 -vf view.vf -d` -ab 0 -dj 0 -ds 0 -o shad_%s.hdr -m src1mat -m src2mat -m src3mat input.oct

The id's "src1mat," "src2mat" and "src3mat" must correspond to different materials for different sources in the octree.  Each will produce a separate output file from rtcontrib, "shad_src1mat.hdr," "shad_src2mat.hdr," and "shad_src3mat.hdr".  If you have many sources, you can put the different material names into a single file and use the -M option to load it. 

Afterwards, you can use Thomas' trick of thresholding the results to determine what is in shadow from what is not.  The "-dj 0 -ds 0" options make all the sources act as points, but if you want penumbras to show up in the output, you can remove these options.

Best,
-Greg

> From: Thomas Bleicher <tbleicher at googlemail.com>
> Date: January 20, 2011 8:59:14 AM PST
> 
> Thanks for clarifying.
> 
> On Thu, Jan 20, 2011 at 10:39 AM, Brajesh Lal <brajeshlal at yahoo.com> wrote:
>> Hi Thomas,
>> Sorry for ambiguity. I need shadow pixel ids of the scene.
>> I am wondering if i can disable or enable the shadow casting feature
>> of a particular object or scene ( like any other 3D packages).
> 
> Radiance is not like a typical 3D engine where lighting effects and
> surface qualities are synthetic. In Radiance you have some "physical"
> restrictions for what you can model and render. However, Radiance is
> also very flexible so that with some extra effort you may be able to
> achieve your desired result.
> 
>> Then i can have rendered image with and without shadow.
>> Their difference can give me shadow pixels.
> 
> You can render one image with only the direct light visible (no
> ambient light). Everything that lies in shadow will be black. Try to
> render an image with the option "-ab 0" and see if the dark areas are
> what you expected your shadows to look like.
> 
> You can then render a second image with indirect contribution and
> subtract the two images. But the result will not be limited to the
> shadows but will also show the difference in the lighting levels of
> lit areas. To render the second image use "-ab 1" or "-ab 2".
> 
> To calculate the difference of the images use this command:
> 
> pcomb -e 'ro=ri(1)-ri(2);go=gi(1)-gi(2);bo=bi(1)-bi(2)' -o
> no_shadow.hdr -o shadow.hdr > diff.hdr
> 
> You can modify this calculation to introduce a threshold which will
> clean up the shadow image a bit. But first you have to see if this is
> in principle the right way to go.
> 
>> Or
>> If i can render the scene with some constant background color, then i can
>> read the shadows pixel ids (low pixel value) in matlab.
> 
> You can also define a coloured "ambient light" to give the shadow a
> red or green tint.
> 
>> my scene has only diffuse objects (diffuse reflectance can
>> be of any value, no black object) and a single direct light.
> 
> Light sources in Radiance are not point lights but need a physical
> surface area to attache to. You should use a small object here and set
> the rendering parameters right to avoid a subdivision of the surface
> during the rendering process which would result in fuzzy shadow edges.
> 
> Regards,
> Thomas


From tmetcalfe at kalwall.com  Mon Jan 31 03:41:18 2011
From: tmetcalfe at kalwall.com (Tim Metcalfe)
Date: Mon, 31 Jan 2011 06:41:18 -0500
Subject: [Radiance-general] trans material file
Message-ID: <31A1F95173EDC043A63B0B06D158CE074414B1CF7D@NTEXCHAN.kellercomp.local>

Hello all,
I am looking to write a file to import in Ecotect for a 75 fc electric stadium light.
Since electric lights are not my usual I am at a loss. Any suggestions?

Tim Metcalfe
Kalwall Corporation
Daylight Modeling Group
1111 Candia Road
Manchester, N.H. 03105
1(800)258-9777 X4483
P  Please consider your environmental responsibility before printing this e-mail


________________________________
This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please notify the system manager. This message contains confidential information and is intended only for the individual named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail. Please notify the sender immediately by e-mail if you have received this e-mail by mistake and delete this e-mail from your system. If you are not the intended recipient you are notified that disclosing, copying, distributing or taking any action in reliance on the contents of this information is strictly prohibited.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20110131/4a0bf66f/attachment.html>

From grobe at gmx.net  Mon Jan 31 04:01:10 2011
From: grobe at gmx.net (Lars O. Grobe)
Date: Mon, 31 Jan 2011 13:01:10 +0100
Subject: [Radiance-general]  stadium light (was: trans material file)
In-Reply-To: <31A1F95173EDC043A63B0B06D158CE074414B1CF7D@NTEXCHAN.kellercomp.local>
References: <31A1F95173EDC043A63B0B06D158CE074414B1CF7D@NTEXCHAN.kellercomp.local>
Message-ID: <1296475270.6067.20.camel@lars-laptop>

Hi Tim!

> I am looking to write a file to import in Ecotect for a 75 fc electric
> stadium light. 

What information on that stadium light do you have? Do you have a
candela distribution (either as a print-out or as an IES or Eulumdat
file)?

Cheers, Lars.

BTW I changed the subject line, I guess this thread is not about trans
material questions.



From tbleicher at googlemail.com  Mon Jan 31 05:31:30 2011
From: tbleicher at googlemail.com (Thomas Bleicher)
Date: Mon, 31 Jan 2011 08:31:30 -0500
Subject: [Radiance-general] Stadium light [was: trans material file]
Message-ID: <AANLkTinzABtdyfBCfxrobicBttxdrTxg7uDgQmvCYnRd@mail.gmail.com>

On Mon, Jan 31, 2011 at 6:41 AM, Tim Metcalfe <tmetcalfe at kalwall.com> wrote:
> Hello all,
>
> I am looking to write a file to import in Ecotect for a 75 fc electric
> stadium light.
>
> Since electric lights are not my usual I am at a loss. Any suggestions?

Tim. I hope you are looking just for a way to import distribution data
into Ecotect.

In that case, IES is your friend. IIRC you define it as a type of
material in Ecotect. If you go through the materials you should find
some examples for "light materials" which should get you going.

If you want to roll your own IES file ...

Are you sure about this? If you have a fitting that's safety-tested
enough to go in a stadium you should be able to get an IES file. If
not I would still look for a distribution file of a similar fitting
before I start to hack together my own IES file.

If you really want to dive into it I recommend "Thinking
Photometrically (II)" by Ian Ashdown as first start:

http://www.dial.de/CMS/German/Articles/Licht/Service/Downloads/Thinking_Photometrically_II.pdf

Good luck,
Thomas


From Robert.Guglielmetti at nrel.gov  Mon Jan 31 08:53:26 2011
From: Robert.Guglielmetti at nrel.gov (Guglielmetti, Robert)
Date: Mon, 31 Jan 2011 09:53:26 -0700
Subject: [Radiance-general] Stadium light [was: trans material file]
In-Reply-To: <AANLkTinzABtdyfBCfxrobicBttxdrTxg7uDgQmvCYnRd@mail.gmail.com>
Message-ID: <C96C35E7.30AB%robert.guglielmetti@nrel.gov>

I don't think it's all that difficult to create an IES file from scratch
(assuming one has a proper test report and either IES LM-63 or Ian's great
paper that Thomas cites below). Lighting Analysts has a nice piece of
software called "Photometric Toolbox" that guides you through the process
of generating your own IES file as well. But again, this assumes you have
a photometric test report with all the candela values in hand. If you
don't have that, Thomas' suggestion of trying to find a similar product
that has been tested is the way to go.
 
Rob Guglielmetti  IESNA, LEED AP
Commercial Buildings Research Group
National Renewable Energy Laboratory
1617 Cole Blvd MS:RSF202
Golden, CO 80401
T. 303.275.4319
F. 303.630.2055
E. robert.guglielmetti at nrel.gov





On 1/31/11 6:31 AM, "Thomas Bleicher" <tbleicher at googlemail.com> wrote:

>On Mon, Jan 31, 2011 at 6:41 AM, Tim Metcalfe <tmetcalfe at kalwall.com>
>wrote:
>> Hello all,
>>
>> I am looking to write a file to import in Ecotect for a 75 fc electric
>> stadium light.
>>
>> Since electric lights are not my usual I am at a loss. Any suggestions?
>
>Tim. I hope you are looking just for a way to import distribution data
>into Ecotect.
>
>In that case, IES is your friend. IIRC you define it as a type of
>material in Ecotect. If you go through the materials you should find
>some examples for "light materials" which should get you going.
>
>If you want to roll your own IES file ...
>
>Are you sure about this? If you have a fitting that's safety-tested
>enough to go in a stadium you should be able to get an IES file. If
>not I would still look for a distribution file of a similar fitting
>before I start to hack together my own IES file.
>
>If you really want to dive into it I recommend "Thinking
>Photometrically (II)" by Ian Ashdown as first start:
>
>http://www.dial.de/CMS/German/Articles/Licht/Service/Downloads/Thinking_Ph
>otometrically_II.pdf
>
>Good luck,
>Thomas
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general at radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general



