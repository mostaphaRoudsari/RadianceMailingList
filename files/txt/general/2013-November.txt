From miinchaca at gmail.com  Fri Nov  1 10:26:14 2013
From: miinchaca at gmail.com (minchaca)
Date: Fri, 1 Nov 2013 18:26:14 +0100
Subject: [Radiance-general] 5Phase & proxy geometry
Message-ID: <CAO0Bi3XFY5byD6Nq7TOgkZbyEKDRwePN10+TO_2ty1yhYqmXxA@mail.gmail.com>

Hi all, I?m coming again with more questions now regarding the 5Phase
Method.  I hope someone finds the time to answer.



As following:



1.- I?m not sure of the use of the ?BSDFproxy polygon inside? included in
the glazing_bsdf.rad file.



If the latter was generated by genBSDF and includes already the dimensions
of the venetian blind, the model, the glazing, and the thickness is also
specified?why do we need to specify the coordinates of the polygon (same of
the glow material) in this file?



I also wonder if we need to use proxy when only if we have a system such as
venetian blinds. Is possible to use it also if we have a daylight system as
thick as a glass pane such as lasercut panel 6mm?



I guess that I can shorten this question by: what would be exactly the
function of the proxy geometry?





2.- Regarding this, in the tutorial you have to rotate the geometry in
order to generate the two xml files (section 6.2) my
silly-silly-super-silly question is:  what would be the orientation of the
resulting xml file? Are we re-orientating it by the last three values of
the orientation vector in the glazing_bsdf.rad ?





3.- I have a final question that just came now when trying the 5Phase: What
would be the number to use in rcontrib ?bn when creating the
direct-sun-coefficient-matrix?

As I understand, it represents the number of sky patches, and it will
generate the values of the RGB in the output file. But, if I use ?e MF:6 ?f
reinhart.cal ?b 5186, I obtain a matrix result with 31116 columns, which is
the number of sky patches six times? Please tell me where am I wrong.



I thank you in advance for your time and help!!



Chantal.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131101/1751ac9b/attachment.html>

From amcneil at lbl.gov  Fri Nov  1 11:23:34 2013
From: amcneil at lbl.gov (Andrew McNeil)
Date: Fri, 1 Nov 2013 11:23:34 -0700
Subject: [Radiance-general] 5Phase & proxy geometry
In-Reply-To: <CAO0Bi3XFY5byD6Nq7TOgkZbyEKDRwePN10+TO_2ty1yhYqmXxA@mail.gmail.com>
References: <CAO0Bi3XFY5byD6Nq7TOgkZbyEKDRwePN10+TO_2ty1yhYqmXxA@mail.gmail.com>
Message-ID: <CAOG+Niz0g0TBPBFKmjpHtzpTaOjuHoJRuevOWuTJy9LAt4cTmg@mail.gmail.com>

Hi Chantal,

1.- I?m not sure of the use of the ?BSDFproxy polygon inside? included in
> the glazing_bsdf.rad file.
>
The BSDF material is applied to this surface. It allows Radiance to use the
BSDF data in lieu of sampling the geometry during the direct sun simulation.


> If the latter was generated by genBSDF and includes already the dimensions
> of the venetian blind, the model, the glazing, and the thickness is also
> specified?why do we need to specify the coordinates of the polygon (same of
> the glow material) in this file?
>
The BSDF is not always produced by genBSDF, it can come from WINDOW or from
measurement as well. But regardless, the intention is that optical data in
a BSDF file is not specific to a size of window, and so you could use it in
various sized windows.  For example if lightlouver produces a BSDF for
their product using genBSDF for one project you might want to use it in a
2m window for one project but a 3m window for another. Addtionally there
may be times when you want to use a different thinckness for the
simulation.  I can think of probably half a dozen reasons why you might not
want to use dimensions baked into a BSDF file, an as is typical with
Radiance we lean towards generalization.


>
>
> I also wonder if we need to use proxy when only if we have a system such
> as venetian blinds. Is possible to use it also if we have a daylight system
> as thick as a glass pane such as lasercut panel 6mm?
>
Yes, but it isn't worth it unless you have a good Radiance material model
for the lasercut panel.  Otherwise you're better off using the BSDF
(assuming it was measured).


>
>
> I guess that I can shorten this question by: what would be exactly the
> function of the proxy geometry?
>
The BSDF, even high resolution tensortree BSDFs, are spatially averaged.  A
venetian blind that is angled to admit stripes of light modeled with only a
BSDF will result in a rectangular patch of intermediate brightness.  Using
proxy geometry results in bright sun alternating with dark shadows.

>
>
> 2.- Regarding this, in the tutorial you have to rotate the geometry in
> order to generate the two xml files (section 6.2) my
> silly-silly-super-silly question is:  what would be the orientation of
> the resulting xml file? Are we re-orientating it by the last three values
> of the orientation vector in the glazing_bsdf.rad ?
>
The WINDOW XML file standard says inside is +Z outside is -Z, up is +Y.
In Radiance we use up as +Z and inside and outside, well it depends on the
space your modeling.


>
>
> 3.- I have a final question that just came now when trying the 5Phase:
> What would be the number to use in rcontrib ?bn when creating the
> direct-sun-coefficient-matrix?
>
> As I understand, it represents the number of sky patches, and it will
> generate the values of the RGB in the output file. But, if I use ?e MF:6 ?f
> reinhart.cal ?b 5186, I obtain a matrix result with 31116 columns, which is
> the number of sky patches six times? Please tell me where am I wrong.
>

There should be three values per skypatch (R G and B) I don't know why you
are getting twice as many.  Can you send the full command you are using?

Andy
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131101/53b4c5ac/attachment.html>

From Wendelin.Sprenger at ise.fraunhofer.de  Fri Nov  1 14:02:56 2013
From: Wendelin.Sprenger at ise.fraunhofer.de (Wendelin.Sprenger at ise.fraunhofer.de)
Date: Fri, 1 Nov 2013 22:02:56 +0100
Subject: [Radiance-general] AUTO: AUTO: Wendelin Sprenger is not in the
	office
Message-ID: <OF72CC06CA.6D96BE55-ONC1257C16.0073A033-C1257C16.0073A033@ise.fhg.de>


Ich bin von Mi, 23.10.2013 bis Mi, 05.02.2014 abwesend.


I am absent until February 5th, 2014.
Only in urgent cases, please call Helen Rose Wilson: 0049/761/4588-5149





Hinweis: Dies ist eine automatische Antwort auf Ihre Nachricht
"Radiance-general Digest, Vol 117, Issue 1" gesendet am 01.11.2013 20:00:00
.

Diese ist die einzige Benachrichtigung, die Sie empfangen werden, w?hrend
diese Person abwesend ist.



From miinchaca at gmail.com  Sun Nov  3 08:53:29 2013
From: miinchaca at gmail.com (minchaca)
Date: Sun, 3 Nov 2013 17:53:29 +0100
Subject: [Radiance-general] 5Phase & proxy geometry
In-Reply-To: <CAOG+Niz0g0TBPBFKmjpHtzpTaOjuHoJRuevOWuTJy9LAt4cTmg@mail.gmail.com>
References: <CAO0Bi3XFY5byD6Nq7TOgkZbyEKDRwePN10+TO_2ty1yhYqmXxA@mail.gmail.com>
	<CAOG+Niz0g0TBPBFKmjpHtzpTaOjuHoJRuevOWuTJy9LAt4cTmg@mail.gmail.com>
Message-ID: <CAO0Bi3ULamYmGMeEr_Pg_z_b8ALNbzxZxgqPxQhpW8n6KXocyg@mail.gmail.com>

Hi Andy



Thanks a lot for your help with all my questions. I found the solution to
the last one... (Not really worth mentioning!!)

 :))



Regarding my previous 1st. Question:



I tried to create a *glazing_bsdf.rad* file using one of the cfs.xml files
that we have in the lab. I?ve got the message:

?Unsupported IncidentDataStructure for BSDF?, I assume this means that this
is not a ?tensor tree high resolution BSDF?.

This might be a silly question but: if there is a way to resample the
tensor tree BSDF into a Klems basis BSDF, is there any way

to do the other way around? Or...perhaps this 'error message' means
something else..?



I thank you in advance for your help again!!



Chantal.


2013/11/1 Andrew McNeil <amcneil at lbl.gov>

> Hi Chantal,
>
> 1.- I?m not sure of the use of the ?BSDFproxy polygon inside? included in
>> the glazing_bsdf.rad file.
>>
> The BSDF material is applied to this surface. It allows Radiance to use
> the BSDF data in lieu of sampling the geometry during the direct sun
> simulation.
>
>
>> If the latter was generated by genBSDF and includes already the
>> dimensions of the venetian blind, the model, the glazing, and the thickness
>> is also specified?why do we need to specify the coordinates of the polygon
>> (same of the glow material) in this file?
>>
> The BSDF is not always produced by genBSDF, it can come from WINDOW or
> from measurement as well. But regardless, the intention is that optical
> data in a BSDF file is not specific to a size of window, and so you could
> use it in various sized windows.  For example if lightlouver produces a
> BSDF for their product using genBSDF for one project you might want to use
> it in a 2m window for one project but a 3m window for another. Addtionally
> there may be times when you want to use a different thinckness for the
> simulation.  I can think of probably half a dozen reasons why you might not
> want to use dimensions baked into a BSDF file, an as is typical with
> Radiance we lean towards generalization.
>
>
>>
>>
>> I also wonder if we need to use proxy when only if we have a system such
>> as venetian blinds. Is possible to use it also if we have a daylight system
>> as thick as a glass pane such as lasercut panel 6mm?
>>
> Yes, but it isn't worth it unless you have a good Radiance material model
> for the lasercut panel.  Otherwise you're better off using the BSDF
> (assuming it was measured).
>
>
>>
>>
>> I guess that I can shorten this question by: what would be exactly the
>> function of the proxy geometry?
>>
> The BSDF, even high resolution tensortree BSDFs, are spatially averaged.
>  A venetian blind that is angled to admit stripes of light modeled with
> only a BSDF will result in a rectangular patch of intermediate brightness.
>  Using proxy geometry results in bright sun alternating with dark shadows.
>
>>
>>
>> 2.- Regarding this, in the tutorial you have to rotate the geometry in
>> order to generate the two xml files (section 6.2) my
>> silly-silly-super-silly question is:  what would be the orientation of
>> the resulting xml file? Are we re-orientating it by the last three values
>> of the orientation vector in the glazing_bsdf.rad ?
>>
> The WINDOW XML file standard says inside is +Z outside is -Z, up is +Y.
> In Radiance we use up as +Z and inside and outside, well it depends on the
> space your modeling.
>
>
>>
>>
>> 3.- I have a final question that just came now when trying the 5Phase:
>> What would be the number to use in rcontrib ?bn when creating the
>> direct-sun-coefficient-matrix?
>>
>> As I understand, it represents the number of sky patches, and it will
>> generate the values of the RGB in the output file. But, if I use ?e MF:6 ?f
>> reinhart.cal ?b 5186, I obtain a matrix result with 31116 columns, which is
>> the number of sky patches six times? Please tell me where am I wrong.
>>
>
> There should be three values per skypatch (R G and B) I don't know why you
> are getting twice as many.  Can you send the full command you are using?
>
> Andy
>
>
>
>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131103/3e601423/attachment.html>

From amcneil at lbl.gov  Mon Nov  4 11:14:23 2013
From: amcneil at lbl.gov (Andrew McNeil)
Date: Mon, 4 Nov 2013 11:14:23 -0800
Subject: [Radiance-general] 5Phase & proxy geometry
In-Reply-To: <CAO0Bi3ULamYmGMeEr_Pg_z_b8ALNbzxZxgqPxQhpW8n6KXocyg@mail.gmail.com>
References: <CAO0Bi3XFY5byD6Nq7TOgkZbyEKDRwePN10+TO_2ty1yhYqmXxA@mail.gmail.com>
	<CAOG+Niz0g0TBPBFKmjpHtzpTaOjuHoJRuevOWuTJy9LAt4cTmg@mail.gmail.com>
	<CAO0Bi3ULamYmGMeEr_Pg_z_b8ALNbzxZxgqPxQhpW8n6KXocyg@mail.gmail.com>
Message-ID: <CAOG+Niz1GLYGCmgwG=J-8_JN6mVZ9hzEB5PygOa-YY4ap++4_w@mail.gmail.com>

Hi Chantal,
You should be able to use a non-klems and non-tensor tree BSDF as long as
the angle basis can be described using the format described in the XML
schema (not all can - I've maintain hacked version of Radiance to use a
BSDF angle basis that I've developed). If you send me the XML file I can
look to see what could be causing the problem.

Yes, there are tools for resampling BSDF files.
bsdf2klems :
http://www.radiance-online.org/learning/documentation/manual-pages/pdfs/bsdf2klems.pdf
bsdf2ttree :
http://www.radiance-online.org/learning/documentation/manual-pages/pdfs/bsdf2ttree.pdf

Andy




On Sun, Nov 3, 2013 at 8:53 AM, minchaca <miinchaca at gmail.com> wrote:

> Hi Andy
>
>
>
> Thanks a lot for your help with all my questions. I found the solution to
> the last one... (Not really worth mentioning!!)
>
>  :))
>
>
>
> Regarding my previous 1st. Question:
>
>
>
> I tried to create a *glazing_bsdf.rad* file using one of the cfs.xml
> files that we have in the lab. I?ve got the message:
>
> ?Unsupported IncidentDataStructure for BSDF?, I assume this means that
> this is not a ?tensor tree high resolution BSDF?.
>
> This might be a silly question but: if there is a way to resample the
> tensor tree BSDF into a Klems basis BSDF, is there any way
>
> to do the other way around? Or...perhaps this 'error message' means
> something else..?
>
>
>
> I thank you in advance for your help again!!
>
>
>
> Chantal.
>
>
> 2013/11/1 Andrew McNeil <amcneil at lbl.gov>
>
>>  Hi Chantal,
>>
>> 1.- I?m not sure of the use of the ?BSDFproxy polygon inside? included in
>>> the glazing_bsdf.rad file.
>>>
>> The BSDF material is applied to this surface. It allows Radiance to use
>> the BSDF data in lieu of sampling the geometry during the direct sun
>> simulation.
>>
>>
>>> If the latter was generated by genBSDF and includes already the
>>> dimensions of the venetian blind, the model, the glazing, and the thickness
>>> is also specified?why do we need to specify the coordinates of the polygon
>>> (same of the glow material) in this file?
>>>
>> The BSDF is not always produced by genBSDF, it can come from WINDOW or
>> from measurement as well. But regardless, the intention is that optical
>> data in a BSDF file is not specific to a size of window, and so you could
>> use it in various sized windows.  For example if lightlouver produces a
>> BSDF for their product using genBSDF for one project you might want to use
>> it in a 2m window for one project but a 3m window for another. Addtionally
>> there may be times when you want to use a different thinckness for the
>> simulation.  I can think of probably half a dozen reasons why you might not
>> want to use dimensions baked into a BSDF file, an as is typical with
>> Radiance we lean towards generalization.
>>
>>
>>>
>>>
>>> I also wonder if we need to use proxy when only if we have a system such
>>> as venetian blinds. Is possible to use it also if we have a daylight system
>>> as thick as a glass pane such as lasercut panel 6mm?
>>>
>> Yes, but it isn't worth it unless you have a good Radiance material model
>> for the lasercut panel.  Otherwise you're better off using the BSDF
>> (assuming it was measured).
>>
>>
>>>
>>>
>>> I guess that I can shorten this question by: what would be exactly the
>>> function of the proxy geometry?
>>>
>> The BSDF, even high resolution tensortree BSDFs, are spatially averaged.
>>  A venetian blind that is angled to admit stripes of light modeled with
>> only a BSDF will result in a rectangular patch of intermediate brightness.
>>  Using proxy geometry results in bright sun alternating with dark shadows.
>>
>>>
>>>
>>> 2.- Regarding this, in the tutorial you have to rotate the geometry in
>>> order to generate the two xml files (section 6.2) my
>>> silly-silly-super-silly question is:  what would be the orientation of
>>> the resulting xml file? Are we re-orientating it by the last three values
>>> of the orientation vector in the glazing_bsdf.rad ?
>>>
>> The WINDOW XML file standard says inside is +Z outside is -Z, up is +Y.
>> In Radiance we use up as +Z and inside and outside, well it depends on the
>> space your modeling.
>>
>>
>>>
>>>
>>> 3.- I have a final question that just came now when trying the 5Phase:
>>> What would be the number to use in rcontrib ?bn when creating the
>>> direct-sun-coefficient-matrix?
>>>
>>> As I understand, it represents the number of sky patches, and it will
>>> generate the values of the RGB in the output file. But, if I use ?e MF:6 ?f
>>> reinhart.cal ?b 5186, I obtain a matrix result with 31116 columns, which is
>>> the number of sky patches six times? Please tell me where am I wrong.
>>>
>>
>> There should be three values per skypatch (R G and B) I don't know why
>> you are getting twice as many.  Can you send the full command you are using?
>>
>> Andy
>>
>>
>>
>>
>>
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131104/0a51e6a5/attachment.html>

From miinchaca at gmail.com  Tue Nov  5 05:57:56 2013
From: miinchaca at gmail.com (minchaca)
Date: Tue, 5 Nov 2013 14:57:56 +0100
Subject: [Radiance-general] 5Phase & proxy geometry
In-Reply-To: <CAOG+Niz1GLYGCmgwG=J-8_JN6mVZ9hzEB5PygOa-YY4ap++4_w@mail.gmail.com>
References: <CAO0Bi3XFY5byD6Nq7TOgkZbyEKDRwePN10+TO_2ty1yhYqmXxA@mail.gmail.com>
	<CAOG+Niz0g0TBPBFKmjpHtzpTaOjuHoJRuevOWuTJy9LAt4cTmg@mail.gmail.com>
	<CAO0Bi3ULamYmGMeEr_Pg_z_b8ALNbzxZxgqPxQhpW8n6KXocyg@mail.gmail.com>
	<CAOG+Niz1GLYGCmgwG=J-8_JN6mVZ9hzEB5PygOa-YY4ap++4_w@mail.gmail.com>
Message-ID: <CAO0Bi3X3N_npC=wn6t4QLuXKc4jycaJfM_4G_jyFmFbVydZFtg@mail.gmail.com>

Hi Andy

I thank you for the pdf  files and I'll send you then the xml file so you
can have a look to it. Thanks also for that!

Chantal


2013/11/4 Andrew McNeil <amcneil at lbl.gov>

> Hi Chantal,
> You should be able to use a non-klems and non-tensor tree BSDF as long as
> the angle basis can be described using the format described in the XML
> schema (not all can - I've maintain hacked version of Radiance to use a
> BSDF angle basis that I've developed). If you send me the XML file I can
> look to see what could be causing the problem.
>
> Yes, there are tools for resampling BSDF files.
> bsdf2klems :
> http://www.radiance-online.org/learning/documentation/manual-pages/pdfs/bsdf2klems.pdf
> bsdf2ttree :
> http://www.radiance-online.org/learning/documentation/manual-pages/pdfs/bsdf2ttree.pdf
>
>  Andy
>
>
>
>
> On Sun, Nov 3, 2013 at 8:53 AM, minchaca <miinchaca at gmail.com> wrote:
>
>> Hi Andy
>>
>>
>>
>> Thanks a lot for your help with all my questions. I found the solution to
>> the last one... (Not really worth mentioning!!)
>>
>>  :))
>>
>>
>>
>> Regarding my previous 1st. Question:
>>
>>
>>
>> I tried to create a *glazing_bsdf.rad* file using one of the cfs.xml
>> files that we have in the lab. I?ve got the message:
>>
>> ?Unsupported IncidentDataStructure for BSDF?, I assume this means that
>> this is not a ?tensor tree high resolution BSDF?.
>>
>> This might be a silly question but: if there is a way to resample the
>> tensor tree BSDF into a Klems basis BSDF, is there any way
>>
>> to do the other way around? Or...perhaps this 'error message' means
>> something else..?
>>
>>
>>
>> I thank you in advance for your help again!!
>>
>>
>>
>> Chantal.
>>
>>
>> 2013/11/1 Andrew McNeil <amcneil at lbl.gov>
>>
>>>  Hi Chantal,
>>>
>>> 1.- I?m not sure of the use of the ?BSDFproxy polygon inside? included
>>>> in the glazing_bsdf.rad file.
>>>>
>>> The BSDF material is applied to this surface. It allows Radiance to use
>>> the BSDF data in lieu of sampling the geometry during the direct sun
>>> simulation.
>>>
>>>
>>>> If the latter was generated by genBSDF and includes already the
>>>> dimensions of the venetian blind, the model, the glazing, and the thickness
>>>> is also specified?why do we need to specify the coordinates of the polygon
>>>> (same of the glow material) in this file?
>>>>
>>> The BSDF is not always produced by genBSDF, it can come from WINDOW or
>>> from measurement as well. But regardless, the intention is that optical
>>> data in a BSDF file is not specific to a size of window, and so you could
>>> use it in various sized windows.  For example if lightlouver produces a
>>> BSDF for their product using genBSDF for one project you might want to use
>>> it in a 2m window for one project but a 3m window for another. Addtionally
>>> there may be times when you want to use a different thinckness for the
>>> simulation.  I can think of probably half a dozen reasons why you might not
>>> want to use dimensions baked into a BSDF file, an as is typical with
>>> Radiance we lean towards generalization.
>>>
>>>
>>>>
>>>>
>>>> I also wonder if we need to use proxy when only if we have a system
>>>> such as venetian blinds. Is possible to use it also if we have a daylight
>>>> system as thick as a glass pane such as lasercut panel 6mm?
>>>>
>>> Yes, but it isn't worth it unless you have a good Radiance material
>>> model for the lasercut panel.  Otherwise you're better off using the BSDF
>>> (assuming it was measured).
>>>
>>>
>>>>
>>>>
>>>> I guess that I can shorten this question by: what would be exactly the
>>>> function of the proxy geometry?
>>>>
>>> The BSDF, even high resolution tensortree BSDFs, are spatially averaged.
>>>  A venetian blind that is angled to admit stripes of light modeled with
>>> only a BSDF will result in a rectangular patch of intermediate brightness.
>>>  Using proxy geometry results in bright sun alternating with dark shadows.
>>>
>>>>
>>>>
>>>> 2.- Regarding this, in the tutorial you have to rotate the geometry in
>>>> order to generate the two xml files (section 6.2) my
>>>> silly-silly-super-silly question is:  what would be the orientation of
>>>> the resulting xml file? Are we re-orientating it by the last three values
>>>> of the orientation vector in the glazing_bsdf.rad ?
>>>>
>>> The WINDOW XML file standard says inside is +Z outside is -Z, up is +Y.
>>>   In Radiance we use up as +Z and inside and outside, well it depends on
>>> the space your modeling.
>>>
>>>
>>>>
>>>>
>>>> 3.- I have a final question that just came now when trying the 5Phase:
>>>> What would be the number to use in rcontrib ?bn when creating the
>>>> direct-sun-coefficient-matrix?
>>>>
>>>> As I understand, it represents the number of sky patches, and it will
>>>> generate the values of the RGB in the output file. But, if I use ?e MF:6 ?f
>>>> reinhart.cal ?b 5186, I obtain a matrix result with 31116 columns, which is
>>>> the number of sky patches six times? Please tell me where am I wrong.
>>>>
>>>
>>> There should be three values per skypatch (R G and B) I don't know why
>>> you are getting twice as many.  Can you send the full command you are using?
>>>
>>> Andy
>>>
>>>
>>>
>>>
>>>
>>>
>>> _______________________________________________
>>> Radiance-general mailing list
>>> Radiance-general at radiance-online.org
>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>>
>>>
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131105/eff918cb/attachment.html>

From leylasanati at gmail.com  Sun Nov 10 20:21:36 2013
From: leylasanati at gmail.com (Leyla Sanati)
Date: Sun, 10 Nov 2013 22:21:36 -0600
Subject: [Radiance-general] 5-phase method - Direct daylight matrix
Message-ID: <CAN1QwsOPXWMNs-MQ94arw6KWbNN12Uq2KK+z3DaCR_1o=juvZA@mail.gmail.com>

Hi all,

My question is regarding the 5-phase method tutorial, example 1, section
6.6. I was wondering why glazing.rad is not included in the all black model
of the direct daylight matrix (after "-").

Best,
Leyla
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131110/88c90154/attachment.html>

From amcneil at lbl.gov  Mon Nov 11 11:42:14 2013
From: amcneil at lbl.gov (Andrew McNeil)
Date: Mon, 11 Nov 2013 11:42:14 -0800
Subject: [Radiance-general] 5-phase method - Direct daylight matrix
In-Reply-To: <CAN1QwsOPXWMNs-MQ94arw6KWbNN12Uq2KK+z3DaCR_1o=juvZA@mail.gmail.com>
References: <CAN1QwsOPXWMNs-MQ94arw6KWbNN12Uq2KK+z3DaCR_1o=juvZA@mail.gmail.com>
Message-ID: <CAOG+NiyCaX1iL-C3K10cSzwT4tO_Ohz=z3yCoY30_ROQ8i3tuw@mail.gmail.com>

Hi Leyla,
This section computes the direct component of the three-phase method in
order to subtract it out.  The transmission properties of glazing.rad are
contained in the BSDF (bsdf/fullwindow.xml) and is applied in the second
dctimestep command in section 6.8.
Best,
Andy


On Sun, Nov 10, 2013 at 8:21 PM, Leyla Sanati <leylasanati at gmail.com> wrote:

> Hi all,
>
> My question is regarding the 5-phase method tutorial, example 1, section
> 6.6. I was wondering why glazing.rad is not included in the all black
> model of the direct daylight matrix (after "-").
>
> Best,
> Leyla
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131111/1a91594e/attachment.html>

From leylasanati at gmail.com  Mon Nov 11 12:59:43 2013
From: leylasanati at gmail.com (Leyla Sanati)
Date: Mon, 11 Nov 2013 14:59:43 -0600
Subject: [Radiance-general] 5-phase method - Direct daylight matrix
In-Reply-To: <CAOG+NiyCaX1iL-C3K10cSzwT4tO_Ohz=z3yCoY30_ROQ8i3tuw@mail.gmail.com>
References: <CAN1QwsOPXWMNs-MQ94arw6KWbNN12Uq2KK+z3DaCR_1o=juvZA@mail.gmail.com>
	<CAOG+NiyCaX1iL-C3K10cSzwT4tO_Ohz=z3yCoY30_ROQ8i3tuw@mail.gmail.com>
Message-ID: <CAN1QwsOvh1Tc043rqkKv2dGcf_9QyPF_vPWrE58Cdohw8foHww@mail.gmail.com>

Thank you Andy for your response.
Sorry if this sounds dumb.  I just want to make sure I am doing it right.
So in the all black model, I include all of the window assembly elements
(window frame, mullions, shading devices) Except for the glass.

Leyla


On Mon, Nov 11, 2013 at 1:42 PM, Andrew McNeil <amcneil at lbl.gov> wrote:

> Hi Leyla,
> This section computes the direct component of the three-phase method in
> order to subtract it out.  The transmission properties of glazing.rad are
> contained in the BSDF (bsdf/fullwindow.xml) and is applied in the second
> dctimestep command in section 6.8.
> Best,
> Andy
>
>
> On Sun, Nov 10, 2013 at 8:21 PM, Leyla Sanati <leylasanati at gmail.com>wrote:
>
>> Hi all,
>>
>> My question is regarding the 5-phase method tutorial, example 1, section
>> 6.6. I was wondering why glazing.rad is not included in the all black
>> model of the direct daylight matrix (after "-").
>>
>> Best,
>> Leyla
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131111/d4cb7723/attachment.html>

From amcneil at lbl.gov  Mon Nov 11 17:14:11 2013
From: amcneil at lbl.gov (Andrew McNeil)
Date: Mon, 11 Nov 2013 17:14:11 -0800
Subject: [Radiance-general] 5-phase method - Direct daylight matrix
In-Reply-To: <CAN1QwsOvh1Tc043rqkKv2dGcf_9QyPF_vPWrE58Cdohw8foHww@mail.gmail.com>
References: <CAN1QwsOPXWMNs-MQ94arw6KWbNN12Uq2KK+z3DaCR_1o=juvZA@mail.gmail.com>
	<CAOG+NiyCaX1iL-C3K10cSzwT4tO_Ohz=z3yCoY30_ROQ8i3tuw@mail.gmail.com>
	<CAN1QwsOvh1Tc043rqkKv2dGcf_9QyPF_vPWrE58Cdohw8foHww@mail.gmail.com>
Message-ID: <CAOG+NiwV9iaey3kXdWwJQn34K_9ADA2DGEBZMfBdMN2b_k5Mxg@mail.gmail.com>

Hi Leyla,
Assuming the window frame, mullions and shading devices are contained in
the BSDF data, no you don't need those either.
Andy


On Mon, Nov 11, 2013 at 12:59 PM, Leyla Sanati <leylasanati at gmail.com>wrote:

> Thank you Andy for your response.
> Sorry if this sounds dumb.  I just want to make sure I am doing it right.
> So in the all black model, I include all of the window assembly elements
> (window frame, mullions, shading devices) Except for the glass.
>
> Leyla
>
>
> On Mon, Nov 11, 2013 at 1:42 PM, Andrew McNeil <amcneil at lbl.gov> wrote:
>
>> Hi Leyla,
>> This section computes the direct component of the three-phase method in
>> order to subtract it out.  The transmission properties of glazing.rad are
>> contained in the BSDF (bsdf/fullwindow.xml) and is applied in the second
>> dctimestep command in section 6.8.
>> Best,
>> Andy
>>
>>
>> On Sun, Nov 10, 2013 at 8:21 PM, Leyla Sanati <leylasanati at gmail.com>wrote:
>>
>>> Hi all,
>>>
>>> My question is regarding the 5-phase method tutorial, example 1, section
>>> 6.6. I was wondering why glazing.rad is not included in the all black
>>> model of the direct daylight matrix (after "-").
>>>
>>> Best,
>>> Leyla
>>>
>>> _______________________________________________
>>> Radiance-general mailing list
>>> Radiance-general at radiance-online.org
>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>>
>>>
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131111/3e34a3a9/attachment.html>

From op5 at st-andrews.ac.uk  Tue Nov 12 05:36:30 2013
From: op5 at st-andrews.ac.uk (Olivier Penacchio)
Date: Tue, 12 Nov 2013 13:36:30 +0000
Subject: [Radiance-general] Access to outgoing radiance at polyhedra level
Message-ID: <3C120D8376A40D4D8EFDC0ABA036E813091CF9FD@UOS-DUN-MBX3.st-andrews.ac.uk>

Hi Everyone,

I am using Radiance to render objects using realistic lighting conditions.

The objects I use are represented as triangulated polyhedra. Currently I'm accessing
the radiance outgoing from the objects in a scene using rendered images (rpict and then pfilt)
of the scene (with no information anymore on each single triangle).

I am wondering whether it is possible to have access to the
radiance outgoing from each triangle directly (as a list of values, one for each triangle
for example)?

I'm running minGW radiance in windows (with a Matlab wrapper), but could
switch to Linux if required.

Best wishes,
Olivier---

Dr Olivier Penacchio---
School of Psychology & Neuroscience
St Mary's Quad
South Street
St Andrews
Fife
KY16 9JP
Scotland, United Kingdom

Tel: +44 (0) 1334 462099
Fax:+44 (0) 1334 463042

Email:op5 at st-andrews.ac.uk<mailto:psych at st-andrews.ac.uk>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131112/6db7b464/attachment.html>

From leylasanati at gmail.com  Tue Nov 12 06:23:57 2013
From: leylasanati at gmail.com (Leyla Sanati)
Date: Tue, 12 Nov 2013 08:23:57 -0600
Subject: [Radiance-general] 5-phase method - Direct daylight matrix
In-Reply-To: <CAOG+NiwV9iaey3kXdWwJQn34K_9ADA2DGEBZMfBdMN2b_k5Mxg@mail.gmail.com>
References: <CAN1QwsOPXWMNs-MQ94arw6KWbNN12Uq2KK+z3DaCR_1o=juvZA@mail.gmail.com>
	<CAOG+NiyCaX1iL-C3K10cSzwT4tO_Ohz=z3yCoY30_ROQ8i3tuw@mail.gmail.com>
	<CAN1QwsOvh1Tc043rqkKv2dGcf_9QyPF_vPWrE58Cdohw8foHww@mail.gmail.com>
	<CAOG+NiwV9iaey3kXdWwJQn34K_9ADA2DGEBZMfBdMN2b_k5Mxg@mail.gmail.com>
Message-ID: <CAN1QwsMb977d3bD=_+2pm16UaGyq2v+DTy=QA_pXWtcz57yqfA@mail.gmail.com>

Andy,
Thank you for clarification. I guess I was confused because I noticed you
had the venetian blinds in your all black model, while it was already
contained in your BSDF. It must have slipped there from previous parts.


$ xform -m black objects/testroom_Swall.rad objects/testroom.rad
objects/ground.rad

 \ *objects/venetianblind.rad  *| oconv materials/testroom.mat -
objects/viewmtxsurf.rad

\ objects/daymtxsurf.rad skies/sky_white.rad > octs/model_allblack.oct


Best,

Leyla


On Mon, Nov 11, 2013 at 7:14 PM, Andrew McNeil <amcneil at lbl.gov> wrote:

> Hi Leyla,
> Assuming the window frame, mullions and shading devices are contained in
> the BSDF data, no you don't need those either.
> Andy
>
>
> On Mon, Nov 11, 2013 at 12:59 PM, Leyla Sanati <leylasanati at gmail.com>wrote:
>
>> Thank you Andy for your response.
>> Sorry if this sounds dumb.  I just want to make sure I am doing it right.
>> So in the all black model, I include all of the window assembly elements
>> (window frame, mullions, shading devices) Except for the glass.
>>
>> Leyla
>>
>>
>> On Mon, Nov 11, 2013 at 1:42 PM, Andrew McNeil <amcneil at lbl.gov> wrote:
>>
>>> Hi Leyla,
>>> This section computes the direct component of the three-phase method in
>>> order to subtract it out.  The transmission properties of glazing.rad are
>>> contained in the BSDF (bsdf/fullwindow.xml) and is applied in the second
>>> dctimestep command in section 6.8.
>>> Best,
>>> Andy
>>>
>>>
>>> On Sun, Nov 10, 2013 at 8:21 PM, Leyla Sanati <leylasanati at gmail.com>wrote:
>>>
>>>> Hi all,
>>>>
>>>> My question is regarding the 5-phase method tutorial, example 1,
>>>> section 6.6. I was wondering why glazing.rad is not included in the
>>>> all black model of the direct daylight matrix (after "-").
>>>>
>>>> Best,
>>>> Leyla
>>>>
>>>> _______________________________________________
>>>> Radiance-general mailing list
>>>> Radiance-general at radiance-online.org
>>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>>>
>>>>
>>>
>>> _______________________________________________
>>> Radiance-general mailing list
>>> Radiance-general at radiance-online.org
>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>>
>>>
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131112/03091822/attachment-0001.html>

From amcneil at lbl.gov  Tue Nov 12 09:34:08 2013
From: amcneil at lbl.gov (Andrew McNeil)
Date: Tue, 12 Nov 2013 09:34:08 -0800
Subject: [Radiance-general] 5-phase method - Direct daylight matrix
In-Reply-To: <CAN1QwsMb977d3bD=_+2pm16UaGyq2v+DTy=QA_pXWtcz57yqfA@mail.gmail.com>
References: <CAN1QwsOPXWMNs-MQ94arw6KWbNN12Uq2KK+z3DaCR_1o=juvZA@mail.gmail.com>
	<CAOG+NiyCaX1iL-C3K10cSzwT4tO_Ohz=z3yCoY30_ROQ8i3tuw@mail.gmail.com>
	<CAN1QwsOvh1Tc043rqkKv2dGcf_9QyPF_vPWrE58Cdohw8foHww@mail.gmail.com>
	<CAOG+NiwV9iaey3kXdWwJQn34K_9ADA2DGEBZMfBdMN2b_k5Mxg@mail.gmail.com>
	<CAN1QwsMb977d3bD=_+2pm16UaGyq2v+DTy=QA_pXWtcz57yqfA@mail.gmail.com>
Message-ID: <CAOG+Niykq_iXy83Su1Un=ABV0PDrungNNgbdSkWdnqf=TYfwTQ@mail.gmail.com>

You don't need to include the venetian blinds in that model, but since it
was between the daylight and view matrix polygons it doesn't hurt to
include it.
Andy


On Tue, Nov 12, 2013 at 6:23 AM, Leyla Sanati <leylasanati at gmail.com> wrote:

> Andy,
> Thank you for clarification. I guess I was confused because I noticed you
> had the venetian blinds in your all black model, while it was already
> contained in your BSDF. It must have slipped there from previous parts.
>
>
> $ xform -m black objects/testroom_Swall.rad objects/testroom.rad
> objects/ground.rad
>
>  \ *objects/venetianblind.rad  *| oconv materials/testroom.mat -
> objects/viewmtxsurf.rad
>
> \ objects/daymtxsurf.rad skies/sky_white.rad > octs/model_allblack.oct
>
>
> Best,
>
> Leyla
>
>
> On Mon, Nov 11, 2013 at 7:14 PM, Andrew McNeil <amcneil at lbl.gov> wrote:
>
>> Hi Leyla,
>> Assuming the window frame, mullions and shading devices are contained in
>> the BSDF data, no you don't need those either.
>> Andy
>>
>>
>> On Mon, Nov 11, 2013 at 12:59 PM, Leyla Sanati <leylasanati at gmail.com>wrote:
>>
>>> Thank you Andy for your response.
>>> Sorry if this sounds dumb.  I just want to make sure I am doing it
>>> right. So in the all black model, I include all of the window assembly
>>> elements (window frame, mullions, shading devices) Except for the glass.
>>>
>>> Leyla
>>>
>>>
>>> On Mon, Nov 11, 2013 at 1:42 PM, Andrew McNeil <amcneil at lbl.gov> wrote:
>>>
>>>> Hi Leyla,
>>>> This section computes the direct component of the three-phase method in
>>>> order to subtract it out.  The transmission properties of glazing.rad are
>>>> contained in the BSDF (bsdf/fullwindow.xml) and is applied in the second
>>>> dctimestep command in section 6.8.
>>>> Best,
>>>> Andy
>>>>
>>>>
>>>> On Sun, Nov 10, 2013 at 8:21 PM, Leyla Sanati <leylasanati at gmail.com>wrote:
>>>>
>>>>> Hi all,
>>>>>
>>>>> My question is regarding the 5-phase method tutorial, example 1,
>>>>> section 6.6. I was wondering why glazing.rad is not included in the
>>>>> all black model of the direct daylight matrix (after "-").
>>>>>
>>>>> Best,
>>>>> Leyla
>>>>>
>>>>> _______________________________________________
>>>>> Radiance-general mailing list
>>>>> Radiance-general at radiance-online.org
>>>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>>>>
>>>>>
>>>>
>>>> _______________________________________________
>>>> Radiance-general mailing list
>>>> Radiance-general at radiance-online.org
>>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>>>
>>>>
>>>
>>> _______________________________________________
>>> Radiance-general mailing list
>>> Radiance-general at radiance-online.org
>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>>
>>>
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131112/c5d90439/attachment.html>

From gbetti at fosterandpartners.com  Tue Nov 12 10:26:03 2013
From: gbetti at fosterandpartners.com (Giovanni Betti)
Date: Tue, 12 Nov 2013 18:26:03 +0000
Subject: [Radiance-general] Recover HDR from RAW images
In-Reply-To: <CAOG+Niykq_iXy83Su1Un=ABV0PDrungNNgbdSkWdnqf=TYfwTQ@mail.gmail.com>
References: <CAN1QwsOPXWMNs-MQ94arw6KWbNN12Uq2KK+z3DaCR_1o=juvZA@mail.gmail.com>
	<CAOG+NiyCaX1iL-C3K10cSzwT4tO_Ohz=z3yCoY30_ROQ8i3tuw@mail.gmail.com>
	<CAN1QwsOvh1Tc043rqkKv2dGcf_9QyPF_vPWrE58Cdohw8foHww@mail.gmail.com>
	<CAOG+NiwV9iaey3kXdWwJQn34K_9ADA2DGEBZMfBdMN2b_k5Mxg@mail.gmail.com>
	<CAN1QwsMb977d3bD=_+2pm16UaGyq2v+DTy=QA_pXWtcz57yqfA@mail.gmail.com>
	<CAOG+Niykq_iXy83Su1Un=ABV0PDrungNNgbdSkWdnqf=TYfwTQ@mail.gmail.com>
Message-ID: <9AE3DAF33501B04BA74EFAE9629663183625DAE3@CORP3011.CORPORATE.FOSTER.NETWORK>

Dear List,

Apologies for cross posting but I sent this to the HDR mailing list and had no reply, I thought I'd try my luck here...

I was wondering if anybody has some experience in recovering luminance information (an HDR image) from a single RAW file.

I understand RAW files as some sort of MDR (Medium Dynamic Range) images... not as wide as a true HDR but higher than jpgs and the like...
This range could be enough to get some meaningful results in certain lighting conditions (i.e. an artificially lit interior) where contrast is limited.

I have tried a few ways to accomplish this using Photoshop or Picturenaut or LuminaceHDR but I get very different results and a million different options that end up being quite confusing.

Anyone any thoughts?

Thanks in advance,

Giovanni

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131112/bc00b700/attachment-0001.html>

From gregoryjward at gmail.com  Tue Nov 12 09:54:49 2013
From: gregoryjward at gmail.com (Greg Ward)
Date: Tue, 12 Nov 2013 09:54:49 -0800
Subject: [Radiance-general] Access to outgoing radiance at polyhedra
	level
In-Reply-To: <3C120D8376A40D4D8EFDC0ABA036E813091CF9FD@UOS-DUN-MBX3.st-andrews.ac.uk>
References: <3C120D8376A40D4D8EFDC0ABA036E813091CF9FD@UOS-DUN-MBX3.st-andrews.ac.uk>
Message-ID: <DEFEF7F2-4AA3-4584-9B97-2EE6CD401179@lmi.net>

Hi Olivier,

The simplest method is to use rtrace.  You can separate your polygons by name with:

	vwrays [resolution & view options] | rtrace -h -osv scene.oct | sort > surfaces.txt

You should get a selection of radiance values for each surface based on the selected view.  If you want orthonormal values for _every_ polygon, not just those visible from one perspective, more sophisticated methods are needed.  You would have to read in the scene file and generate a custom view for each polygon.  It can be done, but it might require some scripting/programming to accomplish it.

-Greg

P.S.  If you want irradiance/illuminance values rather than radiance/luminance, use the rtrace -i option.

> From: Olivier Penacchio <op5 at st-andrews.ac.uk>
> Date: November 12, 2013 5:36:30 AM PST
> 
> Hi Everyone,
> 
> I am using Radiance to render objects using realistic lighting conditions.
> 
> The objects I use are represented as triangulated polyhedra. Currently I'm accessing
> the radiance outgoing from the objects in a scene using rendered images (rpict and then pfilt)
> of the scene (with no information anymore on each single triangle).
> 
> I am wondering whether it is possible to have access to the
> radiance outgoing from each triangle directly (as a list of values, one for each triangle
> for example)?
> 
> I'm running minGW radiance in windows (with a Matlab wrapper), but could
> switch to Linux if required.
> 
> Best wishes,
> Olivier---
> 
> Dr Olivier Penacchio---
> School of Psychology & Neuroscience
> St Mary's Quad
> South Street
> St Andrews
> Fife
> KY16 9JP
> Scotland, United Kingdom
> Tel: +44 (0) 1334 462099
> Fax:+44 (0) 1334 463042
> Email:op5 at st-andrews.ac.uk
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131112/ed56b890/attachment-0001.html>

From gregoryjward at gmail.com  Tue Nov 12 11:38:04 2013
From: gregoryjward at gmail.com (Greg Ward)
Date: Tue, 12 Nov 2013 11:38:04 -0800
Subject: [Radiance-general] Recover HDR from RAW images
In-Reply-To: <9AE3DAF33501B04BA74EFAE9629663183625DAE3@CORP3011.CORPORATE.FOSTER.NETWORK>
References: <CAN1QwsOPXWMNs-MQ94arw6KWbNN12Uq2KK+z3DaCR_1o=juvZA@mail.gmail.com>
	<CAOG+NiyCaX1iL-C3K10cSzwT4tO_Ohz=z3yCoY30_ROQ8i3tuw@mail.gmail.com>
	<CAN1QwsOvh1Tc043rqkKv2dGcf_9QyPF_vPWrE58Cdohw8foHww@mail.gmail.com>
	<CAOG+NiwV9iaey3kXdWwJQn34K_9ADA2DGEBZMfBdMN2b_k5Mxg@mail.gmail.com>
	<CAN1QwsMb977d3bD=_+2pm16UaGyq2v+DTy=QA_pXWtcz57yqfA@mail.gmail.com>
	<CAOG+Niykq_iXy83Su1Un=ABV0PDrungNNgbdSkWdnqf=TYfwTQ@mail.gmail.com>
	<9AE3DAF33501B04BA74EFAE9629663183625DAE3@CORP3011.CORPORATE.FOSTER.NETWORK>
Message-ID: <0F95E33E-C7AD-44D5-87B9-3CDBDC6DEC1A@lmi.net>

I did respond.  Did you not see my post (attached)?

Cheers,
-Greg

Begin forwarded message:

> From: "Gregory J. Ward" <gregoryjward at gmail.com>
> Date: October 31, 2013 8:23:03 AM PDT
> To: High Dynamic Range Imaging <hdri at radiance-online.org>
> Subject: Re: [HDRI] Recover HDR from RAW images
> 
> Hi Giovanni,
> 
> Preserving all of the data from a camera RAW file is a tricky business.  The Adobe RAW converter has a lot of options to play with and allows you to go straight into a 16-bit/channel file, which has the potential to keep everything.  You still have to make choices as to how to clamp the highlights as the three channels will clip at different levels and this depends on the camera sensor, environment and white balance settings.
> 
> The ultimate control comes from the program dcraw by Dave Coffin:
> 
> 	http://www.cybercom.net/~dcoffin/dcraw/
> 
> I have written the attached C-shell script that uses dcraw and another excellent freeware package called exiftool to preserve 16-bit data and camera information while converting to a linear 16-bit/channel output.  This will be recognized by Photosphere but may display incorrectly in other programs due to an assumed gamma.
> 
> Cheers,
> -Greg
> 
> 
> 
>> From: Giovanni Betti <gbetti at fosterandpartners.com>
>> Date: October 31, 2013 5:13:48 AM PDT
>> 
>> Dear List,
>>  
>> I was wondering if anybody has some experience in recovering luminance information (an HDR image) from a single RAW file.
>>  
>> I understand RAW files as some sort of MDR (Medium Dynamic Range) images? not as wide as a true HDR but higher than jpgs and the like?
>> This range could be enough to get some meaningful results in certain lighting conditions (i.e. an artificially lit interior) where contrast is limited.
>>  
>> I have tried a few ways to accomplish this using Photoshop or Picturenaut or LuminaceHDR but I get very different results and a million different options that end up being quite confusing.
>>  
>> Anyone any thoughts?
>>  
>> Thanks in advance,
>>  
>> Giovanni
>>  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131112/f05f7ba3/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: dctiff
Type: application/octet-stream
Size: 639 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131112/f05f7ba3/attachment.obj>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131112/f05f7ba3/attachment-0001.html>

From michael at coolshadow.com  Tue Nov 12 11:42:11 2013
From: michael at coolshadow.com (Michael Martinez)
Date: Tue, 12 Nov 2013 11:42:11 -0800
Subject: [Radiance-general] Falsecolor tricks
In-Reply-To: <DC41FBD4-E356-420E-804E-0D8D50EDA5E6@lmi.net>
References: <000AF3DF-CFF8-40C1-9055-9B76D646471F@coolshadow.com>
	<5FA90BD9-A861-4A54-9FB8-0988EEA4CDDF@coolshadow.com>
	<DC41FBD4-E356-420E-804E-0D8D50EDA5E6@lmi.net>
Message-ID: <A0CEAD41-4A48-4DF3-B2F1-9244BD80359D@coolshadow.com>

Hi folks - one more question about falsecolor hacks. 

any chance one could make -e in falsecolor return not the extrema pixels, but the extrema pixels averaged by their immediate neighbors (8 surrounding pixels), or possibly an even larger radius or neighboring pixels? in other words, i'd like to highlight the maximum value on a set of images, but instead of a single point, a larger 'extrema zone' on the image. 

Thanks for any ideas... 

MM




On Sep 24, 2013, at 3:21 PM, Greg Ward wrote:

> Funny -- I guess I'm repeating myself!  I didn't think of using ra_xyze -o before, though, so maybe a slight improvement...
> 
> -Greg
> 
>> From: Christian Humann <chris at coolshadow.com>
>> Date: September 24, 2013 2:54:04 PM PDT
>> 
>> Hi Michael,
>> 
>> I had asked a similar question several years ago on how to extract a value at a specific pixel location in the original HDR image. Greg responded with the following (you'll have to pass the result to the equivalent pixel location in the false color HDR using psign  piped into pcompos *don't forget to add the pixel width of the false color scale  to the x-location in the false color image);
>> 
>> From Greg??.
>> If you haven't passed the picture through pfilt or otherwise introduced an exposure change, then it would be much faster to use pcompos to extract the value you're interested in.  E.g.:
>> 
>> 	pcompos -x 1 -y 1 rendered_image.hdr -Xpos -Ypos | pvalue -h -H -d | rcalc -e '$1=($1*0.265+$2*0.670+$3*0.065)*179'
>> 
>> If getinfo shows one or more EXPOSURE= lines in the header, then the above won't quite work and you'll need to use pvalue.  The syntax for the command you want is:
>> 
>> 	pvalue -o -h -H rendered_image.hdr | rcalc -e 'eq(a,b):if(a-b+.5,b-a+.5,-1);and(a,b):if(a,b,a)' \
>> 		-e 'cond=and(eq($1,x_location),eq($2,y_location))' -e '$1=$3;$2=$4;$3=$5'
>> 
>> Nasty, eh?  It's also slow.  Use pcompos if you can.  A faster alternative to the above is to use sed:
>> 
>> 	pvalue -o -h -H rendered_image.hdr | sed -n 's/^ *x_location  *y_location //p'
>> 
>> EXAMPLE:
>> pvalue -o -h -H dec_cie_43-63tvis_dome_sit_west.hdr  | sed -n 's/^ *284  *248 //p' | rcalc -e \ '$1=($1*0.265+$2*0.670+$3*0.065)*179' > value.txt
>> _________________________
>> 
>> For the second part
>> 
>> ex:
>> psign -cf 1 1 1 -cb 0 0 0 -h 16 the_value_from above  | pompos     falsecolor_image.hdr +t .5 - x_location y_location >     image_out.hdr
>> 
>> 
>> 
>> Hope this helps,
>> 
>> Chris
>> On Sep 24, 2013, at 1:25 PM, Michael Martinez <michael at coolshadow.com> wrote:
>> 
>>> Hi All - 
>>> 
>>> I'd like to make falsecolor stamp an image with a value for a single pixel of my choosing (say at 250, 300 in a 1000px x 700px image), similar to how -e works. This is to show irradiance levels changing at a given point in a sequential animation. Anybody have a trick to do this, or something like it? 
>>> 
>>> Thanks very much,
>>> Mike
>>> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131112/69688c95/attachment.html>

From gregoryjward at gmail.com  Tue Nov 12 12:10:47 2013
From: gregoryjward at gmail.com (Greg Ward)
Date: Tue, 12 Nov 2013 12:10:47 -0800
Subject: [Radiance-general] Falsecolor tricks
In-Reply-To: <A0CEAD41-4A48-4DF3-B2F1-9244BD80359D@coolshadow.com>
References: <000AF3DF-CFF8-40C1-9055-9B76D646471F@coolshadow.com>
	<5FA90BD9-A861-4A54-9FB8-0988EEA4CDDF@coolshadow.com>
	<DC41FBD4-E356-420E-804E-0D8D50EDA5E6@lmi.net>
	<A0CEAD41-4A48-4DF3-B2F1-9244BD80359D@coolshadow.com>
Message-ID: <BAE36BC6-9DE7-4252-A967-1A745FDBA84E@lmi.net>

Yes, it's possible.  You just need to hack falsecolor.

Is that the answer you're looking for?

More detailed:  Use pfilt to box-filter the image, then run pextrem on the output.  Upscale the positions it gives you and reinsert them in the appropriate place in the code.

An option to do this could be added if it's of general interest.  Axel Jacobs is the maintainer of falsecolor.pl these days.

Cheers,
-Greg

> From: Michael Martinez <michael at coolshadow.com>
> Date: November 12, 2013 11:42:11 AM PST
> 
> Hi folks - one more question about falsecolor hacks. 
> 
> any chance one could make -e in falsecolor return not the extrema pixels, but the extrema pixels averaged by their immediate neighbors (8 surrounding pixels), or possibly an even larger radius or neighboring pixels? in other words, i'd like to highlight the maximum value on a set of images, but instead of a single point, a larger 'extrema zone' on the image. 
> 
> Thanks for any ideas... 
> 
> MM
> 
> 
> 
> 
> On Sep 24, 2013, at 3:21 PM, Greg Ward wrote:
> 
>> Funny -- I guess I'm repeating myself!  I didn't think of using ra_xyze -o before, though, so maybe a slight improvement...
>> 
>> -Greg
>> 
>>> From: Christian Humann <chris at coolshadow.com>
>>> Date: September 24, 2013 2:54:04 PM PDT
>>> 
>>> Hi Michael,
>>> 
>>> I had asked a similar question several years ago on how to extract a value at a specific pixel location in the original HDR image. Greg responded with the following (you'll have to pass the result to the equivalent pixel location in the false color HDR using psign  piped into pcompos *don't forget to add the pixel width of the false color scale  to the x-location in the false color image);
>>> 
>>> From Greg??.
>>> If you haven't passed the picture through pfilt or otherwise introduced an exposure change, then it would be much faster to use pcompos to extract the value you're interested in.  E.g.:
>>> 
>>> 	pcompos -x 1 -y 1 rendered_image.hdr -Xpos -Ypos | pvalue -h -H -d | rcalc -e '$1=($1*0.265+$2*0.670+$3*0.065)*179'
>>> 
>>> If getinfo shows one or more EXPOSURE= lines in the header, then the above won't quite work and you'll need to use pvalue.  The syntax for the command you want is:
>>> 
>>> 	pvalue -o -h -H rendered_image.hdr | rcalc -e 'eq(a,b):if(a-b+.5,b-a+.5,-1);and(a,b):if(a,b,a)' \
>>> 		-e 'cond=and(eq($1,x_location),eq($2,y_location))' -e '$1=$3;$2=$4;$3=$5'
>>> 
>>> Nasty, eh?  It's also slow.  Use pcompos if you can.  A faster alternative to the above is to use sed:
>>> 
>>> 	pvalue -o -h -H rendered_image.hdr | sed -n 's/^ *x_location  *y_location //p'
>>> 
>>> EXAMPLE:
>>> pvalue -o -h -H dec_cie_43-63tvis_dome_sit_west.hdr  | sed -n 's/^ *284  *248 //p' | rcalc -e \ '$1=($1*0.265+$2*0.670+$3*0.065)*179' > value.txt
>>> _________________________
>>> 
>>> For the second part
>>> 
>>> ex:
>>> psign -cf 1 1 1 -cb 0 0 0 -h 16 the_value_from above  | pompos     falsecolor_image.hdr +t .5 - x_location y_location >     image_out.hdr
>>> 
>>> 
>>> 
>>> Hope this helps,
>>> 
>>> Chris
>>> On Sep 24, 2013, at 1:25 PM, Michael Martinez <michael at coolshadow.com> wrote:
>>> 
>>>> Hi All - 
>>>> 
>>>> I'd like to make falsecolor stamp an image with a value for a single pixel of my choosing (say at 250, 300 in a 1000px x 700px image), similar to how -e works. This is to show irradiance levels changing at a given point in a sequential animation. Anybody have a trick to do this, or something like it? 
>>>> 
>>>> Thanks very much,
>>>> Mike
>>>> 
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131112/84d556c8/attachment.html>

From sotos.enveng at gmail.com  Tue Nov 12 12:21:20 2013
From: sotos.enveng at gmail.com (Sotiris Papantoniou)
Date: Tue, 12 Nov 2013 22:21:20 +0200
Subject: [Radiance-general] Equations for horizontal radiation/ illuminance
	under overcast sky
Message-ID: <001b01cedfe4$c0a80f20$41f82d60$@gmail.com>

Hello Radiance Group,

 

I want to right a code which is estimating the illuminance (or ever better
radiation) in horizontal level under overcast sky. Although I have managed
to find similar equations for clear sky, I haven't managed to find any for
an overcast CIE sky.

 

Can you lead me to any reference that can help me on this research?

 

Thank you

 

Sotiris Papantoniou

PhD Candidate

Environmental Engineering Dept.

Technical University of Crete

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131112/bc5811ec/attachment.html>

From jacobs.axel at gmail.com  Tue Nov 12 13:27:31 2013
From: jacobs.axel at gmail.com (Axel Jacobs)
Date: Tue, 12 Nov 2013 21:27:31 +0000
Subject: [Radiance-general] Falsecolor tricks
In-Reply-To: <BAE36BC6-9DE7-4252-A967-1A745FDBA84E@lmi.net>
References: <000AF3DF-CFF8-40C1-9055-9B76D646471F@coolshadow.com>	<5FA90BD9-A861-4A54-9FB8-0988EEA4CDDF@coolshadow.com>	<DC41FBD4-E356-420E-804E-0D8D50EDA5E6@lmi.net>	<A0CEAD41-4A48-4DF3-B2F1-9244BD80359D@coolshadow.com>
	<BAE36BC6-9DE7-4252-A967-1A745FDBA84E@lmi.net>
Message-ID: <52829D43.3090206@gmail.com>

Hi Michael,

the question of extracting certain regions of interest from an HDR 
occupied me a couple of years ago. The box filter approach that Greg is 
suggesting is certainly doable. However, if you want more than the 
neighbouring 8 pixel, you will have to think about how useful a 'box' is 
as opposed to all pixels within a certain radius, ie a 'circle'.

If you take this a little further (and out of your FC context), then you 
might wish to extract a number of shapes from an HDR image:
- circles, ellipses
- squares, rectangles
- points
- lines
- polygons
- masked areas (b/w HDR image)

The latter is easily doable, but all the other shapes are not, unless 
they are cast into a mask first. Well, I supposed arbitrary 'boxes' can 
be done, too.

Back then, I wrote a Python script that I named pextract. It never 
worked to my complete satisfaction, mostly because it was agonisingly 
slow. It took several minutes for a 3 or so megapixel HDR to be 
processed. Part of the reason might be that this was a pure Python HDR 
reader, and I did very little in terms of optimising the RGBE parser.

Help output is below to give you an idea of what it did:

$ pyray_pextract.py -h
Usage: pyray_pextract.py [options] file.hdr

Exactly one action is required.

Options:
   --version             show program's version number and exit
   -h, --help            show this help message and exit
   -f, --flip            The origin of an HDR image is at the bottom-left
                         corner. This switch inverts the row order, 
putting the
                         origin at the top-left. This is the convention for
                         most image processing software [default: False].
   -a, --all             Instead of dropping all pixels outside of the 
shape,
                         colour them black and output them, too. This can be
                         used for reverse-assembling a new HDR image, and is
                         useful for testing and debugging.
   -d, --data-only       Output data only, do not print x and y pixel 
position.

   Actions:
     -l x0,y0,x1,y1, --line=x0,y0,x1,y1
                         Extract values along a line.
     -r x0,y0,x1,y1, --rectangle=x0,y0,x1,y1
                         Extract values inside a rectangle.
     -e x0,y0,x1,y1, --ellipse=x0,y0,x1,y1
                         Extract values inside an ellipse.
     -p x0,y0,x1,y1,...,xn,yn, --polygon=x0,y0,x1,y1,...,xn,yn
                         Extract values inside a polygon.

What I am trying to say with all this is this: Yes, a box shaped extreme 
is doable, but I wonder how much use it would be for anything other than 
a VERY specific purpose. It is also easy enough to create a circular b/w 
mask with pcomb and link this mask into FC, but this would put all sorts 
of if and but statements into the FC code, and might quickly become 
ugly. In all likelihood, you will also wish to indicate the box/circle 
coordinates in the legend or a caption, since by just looking at the FC 
image, it would not be apparent how the label got there, and what it 
represents.

In that sense, I'd be inclined to say that the 'value at specific x,y' 
you mentioned in your earlier post would probably be more generally 
useful. As it happens, I am currently working at a project where exactly 
this functionality might be required. My quick-n-dirty approach would be 
to extract the value with pvalue, grep for the pixel, then stick the 
label onto the FC image (or even the LDR image--ImageMagick is pretty 
cool) afterwards. I might look into this as a new feature for FC if 
there is general interest.

Regards

Axel


On 12/11/13 20:10, Greg Ward wrote:
> Yes, it's possible.  You just need to hack falsecolor.
>
> Is that the answer you're looking for?
>
> More detailed:  Use pfilt to box-filter the image, then run pextrem on
> the output.  Upscale the positions it gives you and reinsert them in the
> appropriate place in the code.
>
> An option to do this could be added if it's of general interest.  Axel
> Jacobs is the maintainer of falsecolor.pl <http://falsecolor.pl> these days.
>
> Cheers,
> -Greg
>
>> *From: *Michael Martinez <michael at coolshadow.com
>> <mailto:michael at coolshadow.com>>
>>
>> *Date: *November 12, 2013 11:42:11 AM PST
>>
>> *
>> *
>>
>> Hi folks - one more question about falsecolor hacks.
>>
>> any chance one could make -e in falsecolor return not the extrema
>> pixels, but the extrema pixels averaged by their immediate neighbors
>> (8 surrounding pixels), or possibly an even larger radius or
>> neighboring pixels? in other words, i'd like to highlight the maximum
>> value on a set of images, but instead of a single point, a larger
>> 'extrema zone' on the image.
>>
>> Thanks for any ideas...
>>
>> MM
>>
>>
>>
>>
>> On Sep 24, 2013, at 3:21 PM, Greg Ward wrote:
>>
>>> Funny -- I guess I'm repeating myself!  I didn't think of using
>>> ra_xyze -o before, though, so maybe a slight improvement...
>>>
>>> -Greg
>>>
>>>> *From: *Christian Humann <chris at coolshadow.com
>>>> <mailto:chris at coolshadow.com>>
>>>> *Date: *September 24, 2013 2:54:04 PM PDT
>>>> *
>>>> *
>>>> Hi Michael,
>>>>
>>>> I had asked a similar question several years ago on how to extract a
>>>> value at a specific pixel location in the original HDR image. Greg
>>>> responded with the following (you'll have to pass the result to the
>>>> equivalent pixel location in the false color HDR using psign  piped
>>>> into pcompos *don't forget to add the pixel width of the false color
>>>> scale  to the x-location in the false color image);
>>>>
>>>> From Greg??.
>>>> If you haven't passed the picture through pfilt or otherwise
>>>> introduced an exposure change, then it would be much faster to use
>>>> pcompos to extract the value you're interested in.  E.g.:
>>>>
>>>> pcompos -x 1 -y 1 rendered_image.hdr -Xpos -Ypos | pvalue -h -H -d |
>>>> rcalc -e '$1=($1*0.265+$2*0.670+$3*0.065)*179'
>>>>
>>>> If getinfo shows one or more EXPOSURE= lines in the header, then the
>>>> above won't quite work and you'll need to use pvalue.  The syntax
>>>> for the command you want is:
>>>>
>>>> pvalue -o -h -H rendered_image.hdr | rcalc -e
>>>> 'eq(a,b):if(a-b+.5,b-a+.5,-1);and(a,b):if(a,b,a)' \
>>>> -e 'cond=and(eq($1,x_location),eq($2,y_location))' -e
>>>> '$1=$3;$2=$4;$3=$5'
>>>>
>>>> Nasty, eh?  It's also slow.  Use pcompos if you can.  A faster
>>>> alternative to the above is to use sed:
>>>>
>>>> pvalue -o -h -H rendered_image.hdr | sed -n 's/^ *x_location
>>>>  *y_location //p'
>>>>
>>>> EXAMPLE:
>>>> pvalue -o -h -H dec_cie_43-63tvis_dome_sit_west.hdr  | sed -n 's/^
>>>> *284  *248 //p' | rcalc -e \ '$1=($1*0.265+$2*0.670+$3*0.065)*179' >
>>>> value.txt
>>>> _________________________
>>>>
>>>> For the second part
>>>>
>>>> ex:
>>>> psign -cf 1 1 1 -cb 0 0 0 -h 16 the_value_from above  | pompos
>>>> falsecolor_image.hdr +t .5 - x_location y_location >     image_out.hdr
>>>>
>>>>
>>>>
>>>> Hope this helps,
>>>>
>>>> Chris
>>>> On Sep 24, 2013, at 1:25 PM, Michael Martinez
>>>> <michael at coolshadow.com <mailto:michael at coolshadow.com>> wrote:
>>>>
>>>>> Hi All -
>>>>>
>>>>> I'd like to make falsecolor stamp an image with a value for a
>>>>> single pixel of my choosing (say at 250, 300 in a 1000px x 700px
>>>>> image), similar to how -e works. This is to show irradiance levels
>>>>> changing at a given point in a sequential animation. Anybody have a
>>>>> trick to do this, or something like it?
>>>>>
>>>>> Thanks very much,
>>>>> Mike




From gregoryjward at gmail.com  Tue Nov 12 13:37:44 2013
From: gregoryjward at gmail.com (Greg Ward)
Date: Tue, 12 Nov 2013 13:37:44 -0800
Subject: [Radiance-general] Equations for horizontal radiation/
	illuminance under overcast sky
In-Reply-To: <001b01cedfe4$c0a80f20$41f82d60$@gmail.com>
References: <001b01cedfe4$c0a80f20$41f82d60$@gmail.com>
Message-ID: <B7807B47-811A-45B1-A5FD-B1F9CEDD7B85@lmi.net>

The integrated horizontal illuminance for a standard CIE overcast sky is 7/9 times the zenith luminance.

If you have a Perez model or something more sophisticated in mind, you may need to perform a numerical integration.

Best,
-Greg

> From: "Sotiris Papantoniou" <sotos.enveng at gmail.com>
> Date: November 12, 2013 12:21:20 PM PST
> 
> Hello Radiance Group,
>  
> I want to right a code which is estimating the illuminance (or ever better radiation) in horizontal level under overcast sky. Although I have managed to find similar equations for clear sky, I haven?t managed to find any for an overcast CIE sky.
>  
> Can you lead me to any reference that can help me on this research?
>  
> Thank you
>  
> Sotiris Papantoniou
> PhD Candidate
> Environmental Engineering Dept.
> Technical University of Crete
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131112/6061b435/attachment.html>

From j.winter at tu-berlin.de  Thu Nov 14 09:22:41 2013
From: j.winter at tu-berlin.de (Winter, Jan-Christoph)
Date: Thu, 14 Nov 2013 17:22:41 +0000
Subject: [Radiance-general] Road Lighting Simulation / Evaluation Framework
Message-ID: <632DC273F0AF9345BC5AA487C9247A1C013050015B@EX-MB3.tubit.win.tu-berlin.de>

Hi,

at Fachgebiet Lichttechnik of Technische Universit?t Berlin we are interested in evaluating road lighting design based on contrasts of small targets between two luminaires (visibility level). Therefore we have developed some tools to create luminance image series with Radiance in python and some evaluation tools for plotting the data in MATLAB. The Radiance simulation part is mainly based on the examples within that book:
@book{WS:radiance,
Author = {Gregory J Ward and Robert Shakespeare},
Publisher = {Morgan Kaufmann},
Title = {Rendering with Radiance },
Year = {1998}}

If you're interested in simulating road lighting with radiance, too, you're very welcome to have a look at this repository:

https://github.com/fglichttechnik/Radiance-RoadLighting-Simulation-Framework

and that:

https://github.com/fglichttechnik/VisibilityLevel-Evaluation-MATLAB

Best regards

--
Dipl.-Ing. Jan Winter
Wissenschaftlicher Mitarbeiter

Technische Universit?t Berlin
Fakult?t IV, Elektrotechnik und Informatik
Fachgebiet Lichttechnik
Sekretariat E6

Einsteinufer 19
10587 Berlin

Raum E311b

Telefon:     +49 (0)30 314 29184
Telefax:     +49 (0)30 314 22161

E-Mail:  mailto:j.winter at tu-berlin.de
Internet: http://www.li.tu-berlin.de

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131114/3639f472/attachment.html>

From T.Charles at maxfordham.com  Thu Nov 14 11:01:49 2013
From: T.Charles at maxfordham.com (T.Charles at maxfordham.com)
Date: Thu, 14 Nov 2013 19:01:49 +0000
Subject: [Radiance-general] Translucent material modeling with Radiance
Message-ID: <OFD68B3607.7D9D2680-ON80257C23.0068898E-80257C23.00688998@LocalDomain>

Dear Radiance users and experts,

As an engineer in a the building industry, I use Radiance to model different facades options in terms of daylighting. I also use Daysim for annual calculations to estimate annual illuminance exposure and other metrics (DA, etc.).

I'm currently working on a translucent glazing option and below is my understanding of the several possibilities I have to model it with Radiance.
Please feel free to correct me.

The easiest way is to use trans but I understand that this does not allow one to model an angle-dependant transmittance and reflectance.
To overcome this limitation, I could use transfunc or transdata but the angle-dependant transmittance/reflectance only applies to the specular components and not the diffuse ones.
I understand that BRTDfunc suffers from the same limitations even if it allows the user specifying more distribution functions (mirror, reflectance, transmittance lobes).
>From my understanding then only a BSDF material allows a complete material description. This can be achieve with Window and (or?) the genBSDF routine.

Moreover, on the use of transdata/transfunc, I understand from the Radiance documentation that the only modified value is the transmitted specular component so the last one called tspec. Is that correct ?
I've carried out some calculation with a trans and transdata material following the process described in Reinhart's paper (Development and validation of a Radiance model for a translucent panel).

trans:
void trans south_panel?
0
0?
7 0.40446 0.40446 0.40446 0.08 0 0.435635 0?

transdata
void transdata?south_panel?
4 noop refl.dat rang.cal rang?
0
6 0.40446 0.40446 0.40446 0.08 0.435635 1

Reading the paper, I though that the values contained into the refl.dat file where multipliers of the transmitted specular fraction (tspec) set to 1 (last parameter of the transdata). Then I ran a simulation with a sunny sky with sun (simple square box with a window).?
In the case of the trans material, with no transmitted specular component, I was expecting to see a perfect diffuser which was the case.
In the transdata case,?I expected to see a patch of light on the floor as the transmitted specular fraction was not zero (from my understanding at least). Instead, the transdata material seemed to behave as a trans material with no transmitted specular component.
Am I missing something ?
These results really confuse me.

Thank you all for your support.

Regards,

Thibault



42-43 Gloucester Crescent
London
NW1 7PE
T?+44 (0) 20 7267 5161
F?+44 (0) 20 7482 0329
maxfordham.com

Max Fordham LLP is a Limited Liability Partnership. Registered in England and Wales Number OC300026
Registered office 42-43 Gloucester Crescent, London, NW1 7PE
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131114/9060c55e/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Image.1384455709335.jpg
Type: image/jpeg
Size: 25055 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131114/9060c55e/attachment-0001.jpg>

From leylasanati at gmail.com  Fri Nov 15 13:11:38 2013
From: leylasanati at gmail.com (Leyla Sanati)
Date: Fri, 15 Nov 2013 15:11:38 -0600
Subject: [Radiance-general] 5-phase method - Direct daylight matrix
In-Reply-To: <CAOG+Niykq_iXy83Su1Un=ABV0PDrungNNgbdSkWdnqf=TYfwTQ@mail.gmail.com>
References: <CAN1QwsOPXWMNs-MQ94arw6KWbNN12Uq2KK+z3DaCR_1o=juvZA@mail.gmail.com>
	<CAOG+NiyCaX1iL-C3K10cSzwT4tO_Ohz=z3yCoY30_ROQ8i3tuw@mail.gmail.com>
	<CAN1QwsOvh1Tc043rqkKv2dGcf_9QyPF_vPWrE58Cdohw8foHww@mail.gmail.com>
	<CAOG+NiwV9iaey3kXdWwJQn34K_9ADA2DGEBZMfBdMN2b_k5Mxg@mail.gmail.com>
	<CAN1QwsMb977d3bD=_+2pm16UaGyq2v+DTy=QA_pXWtcz57yqfA@mail.gmail.com>
	<CAOG+Niykq_iXy83Su1Un=ABV0PDrungNNgbdSkWdnqf=TYfwTQ@mail.gmail.com>
Message-ID: <CAN1QwsOCiNLUD91acfhw2ZaYiwyh8Ww7GmwKBJ8yt5d1=uQUTg@mail.gmail.com>

Yes. It makes sense.
Now, may I a question about the direct sun coefficient matrix. I have a
model with windows facing south, west and north and varying shading devices
for each orientation.
Should I create a separate direct sun coefficient matrix for each window
orientation, or would it be correct if I create an all-black model
containing all of the shading devices and pass it to rcontrib. Something
like this:

xform -m black room.rad objects/ground.rad | oconv materials/room.mat -
objects/glazing.rad objects/shading_south.rad objects/shading_west.rad

objects/glazing_bsdf_south.rad objects/glazing_bsdf_west.rad
objects/glazing_bsdf_north.rad

skies/suns.rad > octs/model_suns.oct





*rcontrib < data/photocells.pts -I -ab 1 -ad 65536 -lw 1.52e-5 -dc 1 -dt 0
-dj 0 -st 1 -ss 0 -faf -e MF:6 -f reinhart.cal -b rbin -bn Nrbins -m solar
octs/model_suns.oct > matrices/directsun.dsmxThank you,Leyla*



On Tue, Nov 12, 2013 at 11:34 AM, Andrew McNeil <amcneil at lbl.gov> wrote:

> You don't need to include the venetian blinds in that model, but since it
> was between the daylight and view matrix polygons it doesn't hurt to
> include it.
> Andy
>
>
> On Tue, Nov 12, 2013 at 6:23 AM, Leyla Sanati <leylasanati at gmail.com>wrote:
>
>> Andy,
>> Thank you for clarification. I guess I was confused because I noticed you
>> had the venetian blinds in your all black model, while it was already
>> contained in your BSDF. It must have slipped there from previous parts.
>>
>>
>> $ xform -m black objects/testroom_Swall.rad objects/testroom.rad
>> objects/ground.rad
>>
>>  \ *objects/venetianblind.rad  *| oconv materials/testroom.mat -
>> objects/viewmtxsurf.rad
>>
>> \ objects/daymtxsurf.rad skies/sky_white.rad > octs/model_allblack.oct
>>
>>
>> Best,
>>
>> Leyla
>>
>>
>> On Mon, Nov 11, 2013 at 7:14 PM, Andrew McNeil <amcneil at lbl.gov> wrote:
>>
>>> Hi Leyla,
>>> Assuming the window frame, mullions and shading devices are contained in
>>> the BSDF data, no you don't need those either.
>>> Andy
>>>
>>>
>>> On Mon, Nov 11, 2013 at 12:59 PM, Leyla Sanati <leylasanati at gmail.com>wrote:
>>>
>>>> Thank you Andy for your response.
>>>> Sorry if this sounds dumb.  I just want to make sure I am doing it
>>>> right. So in the all black model, I include all of the window assembly
>>>> elements (window frame, mullions, shading devices) Except for the glass.
>>>>
>>>> Leyla
>>>>
>>>>
>>>> On Mon, Nov 11, 2013 at 1:42 PM, Andrew McNeil <amcneil at lbl.gov> wrote:
>>>>
>>>>> Hi Leyla,
>>>>> This section computes the direct component of the three-phase method
>>>>> in order to subtract it out.  The transmission properties of glazing.rad
>>>>> are contained in the BSDF (bsdf/fullwindow.xml) and is applied in the
>>>>> second dctimestep command in section 6.8.
>>>>> Best,
>>>>> Andy
>>>>>
>>>>>
>>>>> On Sun, Nov 10, 2013 at 8:21 PM, Leyla Sanati <leylasanati at gmail.com>wrote:
>>>>>
>>>>>> Hi all,
>>>>>>
>>>>>> My question is regarding the 5-phase method tutorial, example 1,
>>>>>> section 6.6. I was wondering why glazing.rad is not included in the
>>>>>> all black model of the direct daylight matrix (after "-").
>>>>>>
>>>>>> Best,
>>>>>> Leyla
>>>>>>
>>>>>> _______________________________________________
>>>>>> Radiance-general mailing list
>>>>>> Radiance-general at radiance-online.org
>>>>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>>>>>
>>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> Radiance-general mailing list
>>>>> Radiance-general at radiance-online.org
>>>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>>>>
>>>>>
>>>>
>>>> _______________________________________________
>>>> Radiance-general mailing list
>>>> Radiance-general at radiance-online.org
>>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>>>
>>>>
>>>
>>> _______________________________________________
>>> Radiance-general mailing list
>>> Radiance-general at radiance-online.org
>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>>
>>>
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131115/d3110d6e/attachment.html>

From amcneil at lbl.gov  Fri Nov 15 13:35:48 2013
From: amcneil at lbl.gov (Andrew McNeil)
Date: Fri, 15 Nov 2013 13:35:48 -0800
Subject: [Radiance-general] 5-phase method - Direct daylight matrix
In-Reply-To: <CAN1QwsOCiNLUD91acfhw2ZaYiwyh8Ww7GmwKBJ8yt5d1=uQUTg@mail.gmail.com>
References: <CAN1QwsOPXWMNs-MQ94arw6KWbNN12Uq2KK+z3DaCR_1o=juvZA@mail.gmail.com>
	<CAOG+NiyCaX1iL-C3K10cSzwT4tO_Ohz=z3yCoY30_ROQ8i3tuw@mail.gmail.com>
	<CAN1QwsOvh1Tc043rqkKv2dGcf_9QyPF_vPWrE58Cdohw8foHww@mail.gmail.com>
	<CAOG+NiwV9iaey3kXdWwJQn34K_9ADA2DGEBZMfBdMN2b_k5Mxg@mail.gmail.com>
	<CAN1QwsMb977d3bD=_+2pm16UaGyq2v+DTy=QA_pXWtcz57yqfA@mail.gmail.com>
	<CAOG+Niykq_iXy83Su1Un=ABV0PDrungNNgbdSkWdnqf=TYfwTQ@mail.gmail.com>
	<CAN1QwsOCiNLUD91acfhw2ZaYiwyh8Ww7GmwKBJ8yt5d1=uQUTg@mail.gmail.com>
Message-ID: <CAOG+NizfB8ek3HpBZWijVf=kv1Ed=dO1U1oN6G4BpRR_7RKBZA@mail.gmail.com>

If you want to control shading separately for each orientation than you
need a separate run for each window group. You also need a separate model
for each shading state.  But if all are controlled together or if there is
no active shading than one model is fine.

Andy


On Fri, Nov 15, 2013 at 1:11 PM, Leyla Sanati <leylasanati at gmail.com> wrote:

> Yes. It makes sense.
> Now, may I a question about the direct sun coefficient matrix. I have a
> model with windows facing south, west and north and varying shading devices
> for each orientation.
> Should I create a separate direct sun coefficient matrix for each window
> orientation, or would it be correct if I create an all-black model
> containing all of the shading devices and pass it to rcontrib. Something
> like this:
>
> xform -m black room.rad objects/ground.rad | oconv materials/room.mat -
> objects/glazing.rad objects/shading_south.rad objects/shading_west.rad
>
> objects/glazing_bsdf_south.rad objects/glazing_bsdf_west.rad
> objects/glazing_bsdf_north.rad
>
> skies/suns.rad > octs/model_suns.oct
>
>
>
>
>
> *rcontrib < data/photocells.pts -I -ab 1 -ad 65536 -lw 1.52e-5 -dc 1 -dt 0
> -dj 0 -st 1 -ss 0 -faf -e MF:6 -f reinhart.cal -b rbin -bn Nrbins -m solar
> octs/model_suns.oct > matrices/directsun.dsmx Thank you, Leyla*
>
>
>
>  On Tue, Nov 12, 2013 at 11:34 AM, Andrew McNeil <amcneil at lbl.gov> wrote:
>
>> You don't need to include the venetian blinds in that model, but since it
>> was between the daylight and view matrix polygons it doesn't hurt to
>> include it.
>> Andy
>>
>>
>> On Tue, Nov 12, 2013 at 6:23 AM, Leyla Sanati <leylasanati at gmail.com>wrote:
>>
>>> Andy,
>>> Thank you for clarification. I guess I was confused because I noticed
>>> you had the venetian blinds in your all black model, while it was already
>>> contained in your BSDF. It must have slipped there from previous parts.
>>>
>>>
>>> $ xform -m black objects/testroom_Swall.rad objects/testroom.rad
>>> objects/ground.rad
>>>
>>>  \ *objects/venetianblind.rad  *| oconv materials/testroom.mat -
>>> objects/viewmtxsurf.rad
>>>
>>> \ objects/daymtxsurf.rad skies/sky_white.rad > octs/model_allblack.oct
>>>
>>>
>>> Best,
>>>
>>> Leyla
>>>
>>>
>>> On Mon, Nov 11, 2013 at 7:14 PM, Andrew McNeil <amcneil at lbl.gov> wrote:
>>>
>>>> Hi Leyla,
>>>> Assuming the window frame, mullions and shading devices are contained
>>>> in the BSDF data, no you don't need those either.
>>>> Andy
>>>>
>>>>
>>>> On Mon, Nov 11, 2013 at 12:59 PM, Leyla Sanati <leylasanati at gmail.com>wrote:
>>>>
>>>>> Thank you Andy for your response.
>>>>> Sorry if this sounds dumb.  I just want to make sure I am doing it
>>>>> right. So in the all black model, I include all of the window assembly
>>>>> elements (window frame, mullions, shading devices) Except for the glass.
>>>>>
>>>>> Leyla
>>>>>
>>>>>
>>>>> On Mon, Nov 11, 2013 at 1:42 PM, Andrew McNeil <amcneil at lbl.gov>wrote:
>>>>>
>>>>>> Hi Leyla,
>>>>>> This section computes the direct component of the three-phase method
>>>>>> in order to subtract it out.  The transmission properties of glazing.rad
>>>>>> are contained in the BSDF (bsdf/fullwindow.xml) and is applied in the
>>>>>> second dctimestep command in section 6.8.
>>>>>> Best,
>>>>>> Andy
>>>>>>
>>>>>>
>>>>>> On Sun, Nov 10, 2013 at 8:21 PM, Leyla Sanati <leylasanati at gmail.com>wrote:
>>>>>>
>>>>>>> Hi all,
>>>>>>>
>>>>>>> My question is regarding the 5-phase method tutorial, example 1,
>>>>>>> section 6.6. I was wondering why glazing.rad is not included in the
>>>>>>> all black model of the direct daylight matrix (after "-").
>>>>>>>
>>>>>>> Best,
>>>>>>> Leyla
>>>>>>>
>>>>>>> _______________________________________________
>>>>>>> Radiance-general mailing list
>>>>>>> Radiance-general at radiance-online.org
>>>>>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>>>>>>
>>>>>>>
>>>>>>
>>>>>> _______________________________________________
>>>>>> Radiance-general mailing list
>>>>>> Radiance-general at radiance-online.org
>>>>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>>>>>
>>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> Radiance-general mailing list
>>>>> Radiance-general at radiance-online.org
>>>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>>>>
>>>>>
>>>>
>>>> _______________________________________________
>>>> Radiance-general mailing list
>>>> Radiance-general at radiance-online.org
>>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>>>
>>>>
>>>
>>> _______________________________________________
>>> Radiance-general mailing list
>>> Radiance-general at radiance-online.org
>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>>
>>>
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131115/56394aac/attachment-0001.html>

From grobe at gmx.net  Fri Nov 15 15:27:49 2013
From: grobe at gmx.net (Lars O. Grobe)
Date: Sat, 16 Nov 2013 00:27:49 +0100
Subject: [Radiance-general] color calculations in mgfilt
Message-ID: <5286ADF5.3090600@gmx.net>

Hi,

mgfilt is not really part of the core Radiance package, but typically
used with Radiance. So I hope this is not entirely off-topic.

I have been using mgfilt from time to time as a convenient tool for
getting color coordinates from measured reflection spectra. However some
results appeared a bit strange, and thus I did a comparision with what I
get from mgfilt and the results of using the CIE formulae with rcalc
instead. To make it short, the results I got from mgfilt were quite off,
and I am wondering wether I did something wrong or the accuracy
implemented in mgfilt is really that much worse.

I uploaded a short report on the comparison here:

http://static.larsgrobe.de/spec2Yxy-20131115.pdf

Cheers, Lars.


From gward at lmi.net  Fri Nov 15 18:49:03 2013
From: gward at lmi.net (Greg Ward)
Date: Fri, 15 Nov 2013 18:49:03 -0800
Subject: [Radiance-general] color calculations in mgfilt
In-Reply-To: <5286ADF5.3090600@gmx.net>
References: <5286ADF5.3090600@gmx.net>
Message-ID: <E469B205-8E52-492B-8F11-EE8B61FC4FC5@lmi.net>

Hi Lars,

I'm pretty sure mgfilt does its calculation with an equal-energy white, not D65 or any of the other standard illuminants.  Try repeating it with EE white to see what you get.

Cheers,
-Greg

Sent from my iPad

> On Nov 15, 2013, at 3:27 PM, "Lars O. Grobe" <grobe at gmx.net> wrote:
> 
> Hi,
> 
> mgfilt is not really part of the core Radiance package, but typically
> used with Radiance. So I hope this is not entirely off-topic.
> 
> I have been using mgfilt from time to time as a convenient tool for
> getting color coordinates from measured reflection spectra. However some
> results appeared a bit strange, and thus I did a comparision with what I
> get from mgfilt and the results of using the CIE formulae with rcalc
> instead. To make it short, the results I got from mgfilt were quite off,
> and I am wondering wether I did something wrong or the accuracy
> implemented in mgfilt is really that much worse.
> 
> I uploaded a short report on the comparison here:
> 
> http://static.larsgrobe.de/spec2Yxy-20131115.pdf
> 
> Cheers, Lars.


From bruno.bueno at ise.fraunhofer.de  Wed Nov 20 07:16:41 2013
From: bruno.bueno at ise.fraunhofer.de (Bruno Bueno)
Date: Wed, 20 Nov 2013 16:16:41 +0100
Subject: [Radiance-general] 3pm to calculate indoor solar transmission
Message-ID: <528CD259.3040309@ise.fraunhofer.de>

Hello,

I'm using the three-phase method to calculate indoor illuminance, and it 
works fine. However, when I use it to calculate total solar transmission 
(irradiance) in a room, I get an underprediction of around 30% (compared 
to other methods such as EnergyPlus). Can anybody tell me what I'm doing 
wrong?

- I have an office with three south-oriented windows. Each window has 
only double-pane glazing.
- I use the -O 1 option in gendaylit to get radiance integrated over the 
solar range.
- I use the solar properties of my fenestration system instead of the 
visible ones to calculate BSDF data.
- I calculate solar transmission by creating two grids of sensors 1mm 
away from the windows (1000 sensors for 4 m2 window area), one facing to 
the windows (front) and another one in the opposite direction (back). 
The total solar transmission in [W] is the irradiance of the "front" 
sensors minus the irradiance of the "back" sensors multiplied by the 
window area.

The three-phase method matrices are calculated as:

Sky vector
gendaylit %i %i %1.1f -a %f -o %f -m %f -W %f %f -O 1 -w -l %i 
|genskyvec -m 4 -c 1 1 1 > daylight/tempSol.skv (%* are replaced by 
actual numbers)

View matrix
rcontrib -f klems_int.cal -bn Nkbins -fo -o daylight/irrSurfFront_%s.vmx 
-b kbinS -m window_south -I+ -ab 12 -ad 50000 -lw 2e-5 daylight/vmx.oct 
< daylight/intSurfFrontSensor.pts

Daylight matrix
genklemsamp -vd 0 -1 0 daylight/SouthWindow.rad | rcontrib -c 1000 -e 
MF:4 -f reinhart.cal -b rbin -bn Nrbins -m sky_glow daylight/dmx.oct > 
daylight/south.dmx

Then, for the "front" grid, I'd just multiply the matrices as:

rlam '!dctimestep daylight/irrWinFront_window_south.vmx 
daylight/tmxs%i.xml daylight/south.dmx daylight/tempSol.skv' | rcalc -e 
'$1=($1+$4+$7+$10+$13)*0.333+($2+$5+$8+$11+$14)*0.333+($3+$6+$9+$12+$15)*0.333'

Similarly for the "back" grid.

Thank you in advance for your help!

Bruno

-- 
Dr.-Ing. Bruno Bueno
Solar Facades
Division Thermal Systems and Buildings
Fraunhofer Institute for Solar Energy Systems ISE
Heidenhofstr. 2, 79110 Freiburg, Germany
Phone: +49(0)761 4588 5377
bruno.bueno at ise.fraunhofer.de
www.ise.fraunhofer.de




From leylasanati at gmail.com  Fri Nov 22 23:55:36 2013
From: leylasanati at gmail.com (Leyla Sanati)
Date: Sat, 23 Nov 2013 01:55:36 -0600
Subject: [Radiance-general] 5-phase method with sky vector
Message-ID: <CAN1QwsO9w42dxg8HaiP8uRbxfz3ci9nPtFFkVa3MuY5J8NiWAw@mail.gmail.com>

Hi all,

I am trying to the rendering part of the 5-phase method with sky vectors
instead of the sky matrices. I'd appreciate it if anyone could help me with
writing the gensky scripts.

Best,
Leyla
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131123/3295bde7/attachment.html>

From gregoryjward at gmail.com  Sat Nov 23 13:45:52 2013
From: gregoryjward at gmail.com (Greg Ward)
Date: Sat, 23 Nov 2013 13:45:52 -0800
Subject: [Radiance-general] 3pm to calculate indoor solar transmission
In-Reply-To: <528CD259.3040309@ise.fraunhofer.de>
References: <528CD259.3040309@ise.fraunhofer.de>
Message-ID: <7F84A013-978E-4E0F-9B17-C777BD7E959D@lmi.net>

Hi Bruno,

The underprediction is expected for fenestration systems with any concentrated through component, as the Klems matrix representation will spread out any transmission to the resolution of its patch sizes, which is around 15 degrees or so (square).  In other words, the direct component will be spread out by the resolution of the Klems BTDF.  I don't know whether or not EnergyPlus is using the Klems BTDF, and if it does, it might use it differently so there isn't this spreading of irradiation, but that's a trade-off between different types of errors.  Radiance spreads the light based on BTDF angular accuracy, but the integrated value (and therefore the subsequent interreflections) will carry the correct amount of energy.  A different energy sampling approach might dump the energy into a smaller area with higher concentration, just not get it in the right place.  It's difficult to say which approach is better.

Cheers,
-Greg

> From: Bruno Bueno <bruno.bueno at ise.fraunhofer.de>
> Date: November 20, 2013 7:16:41 AM PST
> 
> Hello,
> 
> I'm using the three-phase method to calculate indoor illuminance, and it works fine. However, when I use it to calculate total solar transmission (irradiance) in a room, I get an underprediction of around 30% (compared to other methods such as EnergyPlus). Can anybody tell me what I'm doing wrong?
> 
> - I have an office with three south-oriented windows. Each window has only double-pane glazing.
> - I use the -O 1 option in gendaylit to get radiance integrated over the solar range.
> - I use the solar properties of my fenestration system instead of the visible ones to calculate BSDF data.
> - I calculate solar transmission by creating two grids of sensors 1mm away from the windows (1000 sensors for 4 m2 window area), one facing to the windows (front) and another one in the opposite direction (back). The total solar transmission in [W] is the irradiance of the "front" sensors minus the irradiance of the "back" sensors multiplied by the window area.
> 
> The three-phase method matrices are calculated as:
> 
> Sky vector
> gendaylit %i %i %1.1f -a %f -o %f -m %f -W %f %f -O 1 -w -l %i |genskyvec -m 4 -c 1 1 1 > daylight/tempSol.skv (%* are replaced by actual numbers)
> 
> View matrix
> rcontrib -f klems_int.cal -bn Nkbins -fo -o daylight/irrSurfFront_%s.vmx -b kbinS -m window_south -I+ -ab 12 -ad 50000 -lw 2e-5 daylight/vmx.oct < daylight/intSurfFrontSensor.pts
> 
> Daylight matrix
> genklemsamp -vd 0 -1 0 daylight/SouthWindow.rad | rcontrib -c 1000 -e MF:4 -f reinhart.cal -b rbin -bn Nrbins -m sky_glow daylight/dmx.oct > daylight/south.dmx
> 
> Then, for the "front" grid, I'd just multiply the matrices as:
> 
> rlam '!dctimestep daylight/irrWinFront_window_south.vmx daylight/tmxs%i.xml daylight/south.dmx daylight/tempSol.skv' | rcalc -e '$1=($1+$4+$7+$10+$13)*0.333+($2+$5+$8+$11+$14)*0.333+($3+$6+$9+$12+$15)*0.333'
> 
> Similarly for the "back" grid.
> 
> Thank you in advance for your help!
> 
> Bruno
> 
> -- 
> Dr.-Ing. Bruno Bueno
> Solar Facades
> Division Thermal Systems and Buildings
> Fraunhofer Institute for Solar Energy Systems ISE
> Heidenhofstr. 2, 79110 Freiburg, Germany
> Phone: +49(0)761 4588 5377
> bruno.bueno at ise.fraunhofer.de
> www.ise.fraunhofer.de
> 
> 
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general


From gmolina1 at uc.cl  Sat Nov 23 15:03:53 2013
From: gmolina1 at uc.cl (=?ISO-8859-1?Q?Germ=E1n_Molina_Larrain?=)
Date: Sat, 23 Nov 2013 20:03:53 -0300
Subject: [Radiance-general] 3pm to calculate indoor solar transmission
In-Reply-To: <7F84A013-978E-4E0F-9B17-C777BD7E959D@lmi.net>
References: <528CD259.3040309@ise.fraunhofer.de>
	<7F84A013-978E-4E0F-9B17-C777BD7E959D@lmi.net>
Message-ID: <CAF-iH4LqC+TxMVUsxbk0yeE_D01d1U07KXLq=sGUUn7XfeP0TQ@mail.gmail.com>

I think I can add something else that S. Vidanovic told me:

"Well, main limitation is that integration is not really done patch by
patch (at least not for solar part)...  If you for example take a look at
equation 280 you will notice that integration is averaged over sky and
ground elements.  In solar calculations, I do not care from which part of
the sky radiation is coming, I simply do averaging over entire sky and just
apply that into equations.  I have no idea how much error that will
introduce into calculations.  One important note is that I do care what is
current sun position and therefore I do know what is incoming patch at
given time, and will know really precisely to calculate absorbed solar
radiation on interior sides."

meaning that only the beam radation is passed thorugh the BSDF, and the
rest is averaged.
Also, EnergyPlus should add the absorbed and reemited radiation...? are you
considering that?

I am not sure about what EnergyPlus does about the Basis issue that Greg
mentioned...

German


2013/11/23 Greg Ward <gregoryjward at gmail.com>

> Hi Bruno,
>
> The underprediction is expected for fenestration systems with any
> concentrated through component, as the Klems matrix representation will
> spread out any transmission to the resolution of its patch sizes, which is
> around 15 degrees or so (square).  In other words, the direct component
> will be spread out by the resolution of the Klems BTDF.  I don't know
> whether or not EnergyPlus is using the Klems BTDF, and if it does, it might
> use it differently so there isn't this spreading of irradiation, but that's
> a trade-off between different types of errors.  Radiance spreads the light
> based on BTDF angular accuracy, but the integrated value (and therefore the
> subsequent interreflections) will carry the correct amount of energy.  A
> different energy sampling approach might dump the energy into a smaller
> area with higher concentration, just not get it in the right place.  It's
> difficult to say which approach is better.
>
> Cheers,
> -Greg
>
> > From: Bruno Bueno <bruno.bueno at ise.fraunhofer.de>
> > Date: November 20, 2013 7:16:41 AM PST
> >
> > Hello,
> >
> > I'm using the three-phase method to calculate indoor illuminance, and it
> works fine. However, when I use it to calculate total solar transmission
> (irradiance) in a room, I get an underprediction of around 30% (compared to
> other methods such as EnergyPlus). Can anybody tell me what I'm doing wrong?
> >
> > - I have an office with three south-oriented windows. Each window has
> only double-pane glazing.
> > - I use the -O 1 option in gendaylit to get radiance integrated over the
> solar range.
> > - I use the solar properties of my fenestration system instead of the
> visible ones to calculate BSDF data.
> > - I calculate solar transmission by creating two grids of sensors 1mm
> away from the windows (1000 sensors for 4 m2 window area), one facing to
> the windows (front) and another one in the opposite direction (back). The
> total solar transmission in [W] is the irradiance of the "front" sensors
> minus the irradiance of the "back" sensors multiplied by the window area.
> >
> > The three-phase method matrices are calculated as:
> >
> > Sky vector
> > gendaylit %i %i %1.1f -a %f -o %f -m %f -W %f %f -O 1 -w -l %i
> |genskyvec -m 4 -c 1 1 1 > daylight/tempSol.skv (%* are replaced by actual
> numbers)
> >
> > View matrix
> > rcontrib -f klems_int.cal -bn Nkbins -fo -o daylight/irrSurfFront_%s.vmx
> -b kbinS -m window_south -I+ -ab 12 -ad 50000 -lw 2e-5 daylight/vmx.oct <
> daylight/intSurfFrontSensor.pts
> >
> > Daylight matrix
> > genklemsamp -vd 0 -1 0 daylight/SouthWindow.rad | rcontrib -c 1000 -e
> MF:4 -f reinhart.cal -b rbin -bn Nrbins -m sky_glow daylight/dmx.oct >
> daylight/south.dmx
> >
> > Then, for the "front" grid, I'd just multiply the matrices as:
> >
> > rlam '!dctimestep daylight/irrWinFront_window_south.vmx
> daylight/tmxs%i.xml daylight/south.dmx daylight/tempSol.skv' | rcalc -e
> '$1=($1+$4+$7+$10+$13)*0.333+($2+$5+$8+$11+$14)*0.333+($3+$6+$9+$12+$15)*0.333'
> >
> > Similarly for the "back" grid.
> >
> > Thank you in advance for your help!
> >
> > Bruno
> >
> > --
> > Dr.-Ing. Bruno Bueno
> > Solar Facades
> > Division Thermal Systems and Buildings
> > Fraunhofer Institute for Solar Energy Systems ISE
> > Heidenhofstr. 2, 79110 Freiburg, Germany
> > Phone: +49(0)761 4588 5377
> > bruno.bueno at ise.fraunhofer.de
> > www.ise.fraunhofer.de
> >
> >
> >
> > _______________________________________________
> > Radiance-general mailing list
> > Radiance-general at radiance-online.org
> > http://www.radiance-online.org/mailman/listinfo/radiance-general
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131123/ffdac4b7/attachment.html>

From gbetti at fosterandpartners.com  Mon Nov 25 02:09:56 2013
From: gbetti at fosterandpartners.com (Giovanni Betti)
Date: Mon, 25 Nov 2013 10:09:56 +0000
Subject: [Radiance-general] genBSDF on Windows
Message-ID: <9AE3DAF33501B04BA74EFAE962966318362C37C7@CORP3011.CORPORATE.FOSTER.NETWORK>

Dear List,

Is there any option currently available to run genBSDF on windows? (besides running a Linux virtual machine from Windows)

Thanks in advance for your help,

Giovanni

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131125/d2d33cf0/attachment.html>

From gmolina1 at uc.cl  Mon Nov 25 03:41:30 2013
From: gmolina1 at uc.cl (=?ISO-8859-1?Q?Germ=E1n_Molina_Larrain?=)
Date: Mon, 25 Nov 2013 08:41:30 -0300
Subject: [Radiance-general] genBSDF on Windows
In-Reply-To: <9AE3DAF33501B04BA74EFAE962966318362C37C7@CORP3011.CORPORATE.FOSTER.NETWORK>
References: <9AE3DAF33501B04BA74EFAE962966318362C37C7@CORP3011.CORPORATE.FOSTER.NETWORK>
Message-ID: <CAF-iH4KGM1pTXq9fv1VmWLXUe-QL0h0gezfb4Rra9CjEJVwBMQ@mail.gmail.com>

I think there is one... I remember downloading WINDOW, and it came with
some genBSDF program somewhere.

It should be a Perl script, though, you will probably have to install that.




2013/11/25 Giovanni Betti <gbetti at fosterandpartners.com>

>  Dear List,
>
>
>
> Is there any option currently available to run genBSDF on windows?
> (besides running a Linux virtual machine from Windows)
>
>
> Thanks in advance for your help,
>
>
>
> Giovanni
>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131125/434e02ea/attachment.html>

From jacobs.axel at gmail.com  Mon Nov 25 05:58:43 2013
From: jacobs.axel at gmail.com (Axel Jacobs)
Date: Mon, 25 Nov 2013 13:58:43 +0000
Subject: [Radiance-general] genBSDF on Windows
In-Reply-To: <CAF-iH4KGM1pTXq9fv1VmWLXUe-QL0h0gezfb4Rra9CjEJVwBMQ@mail.gmail.com>
References: <9AE3DAF33501B04BA74EFAE962966318362C37C7@CORP3011.CORPORATE.FOSTER.NETWORK>
	<CAF-iH4KGM1pTXq9fv1VmWLXUe-QL0h0gezfb4Rra9CjEJVwBMQ@mail.gmail.com>
Message-ID: <CA+dqh63Dp2uvLEStzJozZ_GZ7tHZB+HZ3PH4=y-LOr2hKQj_Rw@mail.gmail.com>

I've compiled the four Perl scripts that come with the NREL Radiance
for Windows, but have not had tested them extensively:

http://www.jaloxa.eu/pickup/falsecolor.zip

No need to install the Perl interpreter now.

Regards

Axel

On 25 November 2013 11:41, Germ?n Molina Larrain <gmolina1 at uc.cl> wrote:
> I think there is one... I remember downloading WINDOW, and it came with some
> genBSDF program somewhere.
>
> It should be a Perl script, though, you will probably have to install that.
>
>
>
>
> 2013/11/25 Giovanni Betti <gbetti at fosterandpartners.com>
>>
>> Dear List,
>>
>>
>>
>> Is there any option currently available to run genBSDF on windows?
>> (besides running a Linux virtual machine from Windows)
>>
>>
>> Thanks in advance for your help,
>>
>>
>>
>> Giovanni
>>
>>
>>
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>


From gbetti at fosterandpartners.com  Mon Nov 25 06:46:22 2013
From: gbetti at fosterandpartners.com (Giovanni Betti)
Date: Mon, 25 Nov 2013 14:46:22 +0000
Subject: [Radiance-general] genBSDF on Windows
In-Reply-To: <CA+dqh63Dp2uvLEStzJozZ_GZ7tHZB+HZ3PH4=y-LOr2hKQj_Rw@mail.gmail.com>
References: <9AE3DAF33501B04BA74EFAE962966318362C37C7@CORP3011.CORPORATE.FOSTER.NETWORK>
	<CAF-iH4KGM1pTXq9fv1VmWLXUe-QL0h0gezfb4Rra9CjEJVwBMQ@mail.gmail.com>
	<CA+dqh63Dp2uvLEStzJozZ_GZ7tHZB+HZ3PH4=y-LOr2hKQj_Rw@mail.gmail.com>
Message-ID: <9AE3DAF33501B04BA74EFAE962966318362C38CC@CORP3011.CORPORATE.FOSTER.NETWORK>

Thanks both Axel and Germ?n,

I have installed radiance for windows 7 and this has created a number of files including a genbsdf.exe, I'll try that and the link Axel posted,

Will let you know if I succeed,

Thanks,

Giovanni

////////////////////////////////////////////////
Giovanni Betti
-----Original Message-----
From: Axel Jacobs [mailto:jacobs.axel at gmail.com] 
Sent: 25 November 2013 13:59
To: Radiance general discussion
Subject: Re: [Radiance-general] genBSDF on Windows

I've compiled the four Perl scripts that come with the NREL Radiance for Windows, but have not had tested them extensively:

http://www.jaloxa.eu/pickup/falsecolor.zip

No need to install the Perl interpreter now.

Regards

Axel

On 25 November 2013 11:41, Germ?n Molina Larrain <gmolina1 at uc.cl> wrote:
> I think there is one... I remember downloading WINDOW, and it came 
> with some genBSDF program somewhere.
>
> It should be a Perl script, though, you will probably have to install that.
>
>
>
>
> 2013/11/25 Giovanni Betti <gbetti at fosterandpartners.com>
>>
>> Dear List,
>>
>>
>>
>> Is there any option currently available to run genBSDF on windows?
>> (besides running a Linux virtual machine from Windows)
>>
>>
>> Thanks in advance for your help,
>>
>>
>>
>> Giovanni
>>
>>
>>
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>

_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general


From gregoryjward at gmail.com  Mon Nov 25 09:25:08 2013
From: gregoryjward at gmail.com (Greg Ward)
Date: Mon, 25 Nov 2013 09:25:08 -0800
Subject: [Radiance-general] Translucent material modeling with Radiance
In-Reply-To: <OFD68B3607.7D9D2680-ON80257C23.0068898E-80257C23.00688998@LocalDomain>
References: <OFD68B3607.7D9D2680-ON80257C23.0068898E-80257C23.00688998@LocalDomain>
Message-ID: <676901B7-61E3-4E38-9549-FFB7187C5963@lmi.net>

Hi Thibault,

It seems like no one responded to this.  First, you might want to read through Peter Apian-Bennewitz's recent review of the various Radiance types, which he has posted at:

	http://www.pab.eu/docs/Review_of_simulating_four_classes_of_window_materials_for_daylighting_with_non-standard_BSDF_using_simulation_program_Radiance.pdf

Peter does an excellent job of explaining the different types, what they do, and when they are useful -- something that has been missing from the documentation and literature for decades, now.

What I think you will learn as it applies to your case is that without an interreflection calculation, the transdata and transfunc types will not give you a solar patch on the interior of your test space no matter what your material parameters.  The BSTDfunc type would, however.

Cheers,
-Greg

> From: T.Charles at maxfordham.com
> Date: November 14, 2013 11:01:49 AM PST
> 
> Dear Radiance users and experts,
> 
> As an engineer in a the building industry, I use Radiance to model different facades options in terms of daylighting. I also use Daysim for annual calculations to estimate annual illuminance exposure and other metrics (DA, etc.).
> 
> I'm currently working on a translucent glazing option and below is my understanding of the several possibilities I have to model it with Radiance.
> Please feel free to correct me.
> 
> The easiest way is to use trans but I understand that this does not allow one to model an angle-dependant transmittance and reflectance.
> To overcome this limitation, I could use transfunc or transdata but the angle-dependant transmittance/reflectance only applies to the specular components and not the diffuse ones.
> I understand that BRTDfunc suffers from the same limitations even if it allows the user specifying more distribution functions (mirror, reflectance, transmittance lobes).
> From my understanding then only a BSDF material allows a complete material description. This can be achieve with Window and (or?) the genBSDF routine.
> 
> Moreover, on the use of transdata/transfunc, I understand from the Radiance documentation that the only modified value is the transmitted specular component so the last one called tspec. Is that correct ?
> I've carried out some calculation with a trans and transdata material following the process described in Reinhart's paper (Development and validation of a Radiance model for a translucent panel).
> 
> trans:
> void trans south_panel 
> 0
> 0 
> 7 0.40446 0.40446 0.40446 0.08 0 0.435635 0 
> 
> transdata
> void transdata south_panel 
> 4 noop refl.dat rang.cal rang 
> 0
> 6 0.40446 0.40446 0.40446 0.08 0.435635 1
> 
> Reading the paper, I though that the values contained into the refl.dat file where multipliers of the transmitted specular fraction (tspec) set to 1 (last parameter of the transdata). Then I ran a simulation with a sunny sky with sun (simple square box with a window). 
> In the case of the trans material, with no transmitted specular component, I was expecting to see a perfect diffuser which was the case.
> In the transdata case, I expected to see a patch of light on the floor as the transmitted specular fraction was not zero (from my understanding at least). Instead, the transdata material seemed to behave as a trans material with no transmitted specular component.
> Am I missing something ?
> These results really confuse me.
> 
> Thank you all for your support.
> 
> Regards,
> 
> Thibault
> 
> 
> 
> 42-43 Gloucester Crescent
> London
> NW1 7PE
> T +44 (0) 20 7267 5161
> F +44 (0) 20 7482 0329
> maxfordham.com
> 
> Max Fordham LLP is a Limited Liability Partnership. Registered in England and Wales Number OC300026
> Registered office 42-43 Gloucester Crescent, London, NW1 7PE
> 
> http://www.radiance-online.org/mailman/listinfo/radiance-general
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131125/9b3ef156/attachment-0001.html>

From sadeghipour at gmail.com  Mon Nov 25 11:03:44 2013
From: sadeghipour at gmail.com (Mostapha Sadeghipour)
Date: Mon, 25 Nov 2013 14:03:44 -0500
Subject: [Radiance-general] genBSDF on Windows
In-Reply-To: <CA+dqh63Dp2uvLEStzJozZ_GZ7tHZB+HZ3PH4=y-LOr2hKQj_Rw@mail.gmail.com>
References: <9AE3DAF33501B04BA74EFAE962966318362C37C7@CORP3011.CORPORATE.FOSTER.NETWORK>
	<CAF-iH4KGM1pTXq9fv1VmWLXUe-QL0h0gezfb4Rra9CjEJVwBMQ@mail.gmail.com>
	<CA+dqh63Dp2uvLEStzJozZ_GZ7tHZB+HZ3PH4=y-LOr2hKQj_Rw@mail.gmail.com>
Message-ID: <CAAd_PgR4WF7b3VNmyK1pE3-gs9_T7qTXVdankVWd8_ARyAOJJQ@mail.gmail.com>

Hi Axel,

genklemsamp and genskyvec works on my system which is a great news. Finally
I can give 5Phase method a real try on Windows. =)

Thanks,
Mostapha



On Mon, Nov 25, 2013 at 8:58 AM, Axel Jacobs <jacobs.axel at gmail.com> wrote:

> I've compiled the four Perl scripts that come with the NREL Radiance
> for Windows, but have not had tested them extensively:
>
> http://www.jaloxa.eu/pickup/falsecolor.zip
>
> No need to install the Perl interpreter now.
>
> Regards
>
> Axel
>
> On 25 November 2013 11:41, Germ?n Molina Larrain <gmolina1 at uc.cl> wrote:
> > I think there is one... I remember downloading WINDOW, and it came with
> some
> > genBSDF program somewhere.
> >
> > It should be a Perl script, though, you will probably have to install
> that.
> >
> >
> >
> >
> > 2013/11/25 Giovanni Betti <gbetti at fosterandpartners.com>
> >>
> >> Dear List,
> >>
> >>
> >>
> >> Is there any option currently available to run genBSDF on windows?
> >> (besides running a Linux virtual machine from Windows)
> >>
> >>
> >> Thanks in advance for your help,
> >>
> >>
> >>
> >> Giovanni
> >>
> >>
> >>
> >>
> >> _______________________________________________
> >> Radiance-general mailing list
> >> Radiance-general at radiance-online.org
> >> http://www.radiance-online.org/mailman/listinfo/radiance-general
> >>
> >
> >
> > _______________________________________________
> > Radiance-general mailing list
> > Radiance-general at radiance-online.org
> > http://www.radiance-online.org/mailman/listinfo/radiance-general
> >
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131125/ffe6b948/attachment.html>

From jacobs.axel at gmail.com  Mon Nov 25 11:42:39 2013
From: jacobs.axel at gmail.com (Axel Jacobs)
Date: Mon, 25 Nov 2013 19:42:39 +0000
Subject: [Radiance-general] genBSDF on Windows
In-Reply-To: <CAAd_PgR4WF7b3VNmyK1pE3-gs9_T7qTXVdankVWd8_ARyAOJJQ@mail.gmail.com>
References: <9AE3DAF33501B04BA74EFAE962966318362C37C7@CORP3011.CORPORATE.FOSTER.NETWORK>	<CAF-iH4KGM1pTXq9fv1VmWLXUe-QL0h0gezfb4Rra9CjEJVwBMQ@mail.gmail.com>	<CA+dqh63Dp2uvLEStzJozZ_GZ7tHZB+HZ3PH4=y-LOr2hKQj_Rw@mail.gmail.com>
	<CAAd_PgR4WF7b3VNmyK1pE3-gs9_T7qTXVdankVWd8_ARyAOJJQ@mail.gmail.com>
Message-ID: <5293A82F.3020806@gmail.com>

Great. Thanks for confirming this.

Don't get tangled up in your phases.

Best

Axel

On 25/11/13 19:03, Mostapha Sadeghipour wrote:
> Hi Axel,
>
> genklemsamp and genskyvec works on my system which is a great news.
> Finally I can give 5Phase method a real try on Windows. =)
>
> Thanks,
> Mostapha
>
>
>
> On Mon, Nov 25, 2013 at 8:58 AM, Axel Jacobs <jacobs.axel at gmail.com
> <mailto:jacobs.axel at gmail.com>> wrote:
>
>     I've compiled the four Perl scripts that come with the NREL Radiance
>     for Windows, but have not had tested them extensively:
>
>     http://www.jaloxa.eu/pickup/falsecolor.zip
>
>     No need to install the Perl interpreter now.
>
>     Regards
>
>     Axel
>
>     On 25 November 2013 11:41, Germ?n Molina Larrain <gmolina1 at uc.cl
>     <mailto:gmolina1 at uc.cl>> wrote:
>      > I think there is one... I remember downloading WINDOW, and it
>     came with some
>      > genBSDF program somewhere.
>      >
>      > It should be a Perl script, though, you will probably have to
>     install that.
>      >
>      >
>      >
>      >
>      > 2013/11/25 Giovanni Betti <gbetti at fosterandpartners.com
>     <mailto:gbetti at fosterandpartners.com>>
>      >>
>      >> Dear List,
>      >>
>      >>
>      >>
>      >> Is there any option currently available to run genBSDF on windows?
>      >> (besides running a Linux virtual machine from Windows)
>      >>
>      >>
>      >> Thanks in advance for your help,
>      >>
>      >>
>      >>
>      >> Giovanni
>      >>
>      >>
>      >>
>      >>
>      >> _______________________________________________
>      >> Radiance-general mailing list
>      >> Radiance-general at radiance-online.org
>     <mailto:Radiance-general at radiance-online.org>
>      >> http://www.radiance-online.org/mailman/listinfo/radiance-general
>      >>
>      >
>      >
>      > _______________________________________________
>      > Radiance-general mailing list
>      > Radiance-general at radiance-online.org
>     <mailto:Radiance-general at radiance-online.org>
>      > http://www.radiance-online.org/mailman/listinfo/radiance-general
>      >
>
>     _______________________________________________
>     Radiance-general mailing list
>     Radiance-general at radiance-online.org
>     <mailto:Radiance-general at radiance-online.org>
>     http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>



From amcneil at lbl.gov  Mon Nov 25 12:28:50 2013
From: amcneil at lbl.gov (Andrew McNeil)
Date: Mon, 25 Nov 2013 12:28:50 -0800
Subject: [Radiance-general] 5-phase method with sky vector
In-Reply-To: <CAN1QwsO9w42dxg8HaiP8uRbxfz3ci9nPtFFkVa3MuY5J8NiWAw@mail.gmail.com>
References: <CAN1QwsO9w42dxg8HaiP8uRbxfz3ci9nPtFFkVa3MuY5J8NiWAw@mail.gmail.com>
Message-ID: <CAOG+NiyfDxDCb+9p6eGE1Cdwwv9V7FDU7tKsy=TDzHq6_obDfA@mail.gmail.com>

Hi Leyla,
You need to use the -5 option in gendaymtx, which isn't an option for
genskyvec at the moment. I'd suggest using a single-timestep sky matrix.

you could make a *.wea file like this:
place Oakland Metropolitan Arpt_USA
latitude 37.72
longitude 122.22
time_zone 120
site_elevation 2.0
weather_data_file_units 1
1 1 12.000 655 129

Than it's:
$ gendaymtx -of skies/OakLand.wea > matrices/OakLand.smx
$ gendaymtx -of -d skies/OakLand.wea > matrices/OakLand_direct.smx
$ gendaymtx -5 -d -m 6 -of skies/OakLand.wea >
matrices/OakLand_direct_m6.smx

And change -n 8760 to -n 1:
$ dctimestep -n 1 -if  viewpics/back_%03d.hdr \ bsdf/fullwindow.xml
matrices/daylightmatrix.dmx matrices/OakLand.smx > hourlypics/back.hdr

I think that works...

Andy



On Fri, Nov 22, 2013 at 11:55 PM, Leyla Sanati <leylasanati at gmail.com>wrote:

> Hi all,
>
> I am trying to the rendering part of the 5-phase method with sky vectors
> instead of the sky matrices. I'd appreciate it if anyone could help me with
> writing the gensky scripts.
>
> Best,
> Leyla
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131125/67205e05/attachment.html>

From leylasanati at gmail.com  Mon Nov 25 15:03:57 2013
From: leylasanati at gmail.com (Leyla Sanati)
Date: Mon, 25 Nov 2013 17:03:57 -0600
Subject: [Radiance-general] 5-phase method with sky vector
In-Reply-To: <CAOG+NiyfDxDCb+9p6eGE1Cdwwv9V7FDU7tKsy=TDzHq6_obDfA@mail.gmail.com>
References: <CAN1QwsO9w42dxg8HaiP8uRbxfz3ci9nPtFFkVa3MuY5J8NiWAw@mail.gmail.com>
	<CAOG+NiyfDxDCb+9p6eGE1Cdwwv9V7FDU7tKsy=TDzHq6_obDfA@mail.gmail.com>
Message-ID: <CAN1QwsNNQgchLCR3CiHkwteouvyZn5CRfMKDXQdPcCev26QgJg@mail.gmail.com>

Thank you Andy!

Leyla


On Mon, Nov 25, 2013 at 2:28 PM, Andrew McNeil <amcneil at lbl.gov> wrote:

> Hi Leyla,
> You need to use the -5 option in gendaymtx, which isn't an option for
> genskyvec at the moment. I'd suggest using a single-timestep sky matrix.
>
> you could make a *.wea file like this:
> place Oakland Metropolitan Arpt_USA
> latitude 37.72
> longitude 122.22
> time_zone 120
> site_elevation 2.0
> weather_data_file_units 1
> 1 1 12.000 655 129
>
> Than it's:
> $ gendaymtx -of skies/OakLand.wea > matrices/OakLand.smx
> $ gendaymtx -of -d skies/OakLand.wea > matrices/OakLand_direct.smx
> $ gendaymtx -5 -d -m 6 -of skies/OakLand.wea >
> matrices/OakLand_direct_m6.smx
>
> And change -n 8760 to -n 1:
> $ dctimestep -n 1 -if  viewpics/back_%03d.hdr \ bsdf/fullwindow.xml
> matrices/daylightmatrix.dmx matrices/OakLand.smx > hourlypics/back.hdr
>
> I think that works...
>
> Andy
>
>
>
> On Fri, Nov 22, 2013 at 11:55 PM, Leyla Sanati <leylasanati at gmail.com>wrote:
>
>> Hi all,
>>
>> I am trying to the rendering part of the 5-phase method with sky vectors
>> instead of the sky matrices. I'd appreciate it if anyone could help me with
>> writing the gensky scripts.
>>
>> Best,
>> Leyla
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131125/148def7d/attachment.html>

From Luca.Baglivo at eurac.edu  Wed Nov 27 03:45:11 2013
From: Luca.Baglivo at eurac.edu (Baglivo Luca)
Date: Wed, 27 Nov 2013 11:45:11 +0000
Subject: [Radiance-general] Radiance installation on Ubuntu 12.04
Message-ID: <35E3BFD420B2954F91CB15BA19C5B195172A011F@SDCEMB01.unibz.it>

I am trying to manually install the 'radiance-4.2.a-Linux.tar32' compiled binaries currently available from the NREL site.

The issue:

When I run 'trad' in the terminal I get an error related to 'wish0.4' which is not in the 'usr/local' folder as expected.

Any help please ?

Should I manually change a path variable to point to the right folder where wish0.4 is (still I don't know where) ?

Luca


Luca Baglivo, Ph.D.
Institute for Renewable Energy
Group of Energy Management in Buildings

EURAC research
Via Zuegg 11, I-39100 Bolzano
t +39 0471 055 657
f +39 0471 055 699
luca.baglivo at eurac.edu<mailto:luca.baglivo at eurac.edu>
www.eurac.edu<http://www.eurac.edu/>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131127/35218ac6/attachment.html>

From grobe at gmx.net  Wed Nov 27 05:38:13 2013
From: grobe at gmx.net (Lars O. Grobe)
Date: Wed, 27 Nov 2013 14:38:13 +0100
Subject: [Radiance-general] Radiance installation on Ubuntu 12.04
In-Reply-To: <35E3BFD420B2954F91CB15BA19C5B195172A011F@SDCEMB01.unibz.it>
References: <35E3BFD420B2954F91CB15BA19C5B195172A011F@SDCEMB01.unibz.it>
Message-ID: <5295F5C5.60007@gmx.net>

Hi Luca,

you need TCL and TK version 8.x. Please have a look at this page:

http://wiki.ubuntuusers.de/Tcl

Lars O. Grobe.||||

> I am trying to manually install the 'radiance-4.2.a-Linux.tar32' 
> compiled binaries currently available from the NREL site.
>
> The issue:
>
> When I run 'trad' in the terminal I get an error related to 'wish0.4' 
> which is not in the 'usr/local' folder as expected.
>
> Any help please ?
>
> Should I manually change a path variable to point to the right folder 
> where wish0.4 is (still I don't know where) ?
>
> Luca
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131127/4c453876/attachment.html>

From Robert.Guglielmetti at nrel.gov  Wed Nov 27 07:17:12 2013
From: Robert.Guglielmetti at nrel.gov (Guglielmetti, Robert)
Date: Wed, 27 Nov 2013 08:17:12 -0700
Subject: [Radiance-general] Radiance installation on Ubuntu 12.04
In-Reply-To: <5295F5C5.60007@gmx.net>
References: <35E3BFD420B2954F91CB15BA19C5B195172A011F@SDCEMB01.unibz.it>
	<5295F5C5.60007@gmx.net>
Message-ID: <FFF56A6D37A3A54F91A03601AC22DA32263ADB0A2B@MAILBOX2.nrel.gov>

Hi Luca,

I suspect you are "lbag" on the OpenStudio forum. =)

https://openstudio.nrel.gov/forums/openstudio-application/help-desk/installing-radiance-linux#comment-3174

- Rob

From: Lars O. Grobe [mailto:grobe at gmx.net]
Sent: Wednesday, November 27, 2013 6:38 AM
To: Radiance general discussion
Subject: Re: [Radiance-general] Radiance installation on Ubuntu 12.04

Hi Luca,

you need TCL and TK version 8.x. Please have a look at this page:

http://wiki.ubuntuusers.de/Tcl

Lars O. Grobe.
I am trying to manually install the 'radiance-4.2.a-Linux.tar32' compiled binaries currently available from the NREL site.

The issue:

When I run 'trad' in the terminal I get an error related to 'wish0.4' which is not in the 'usr/local' folder as expected.

Any help please ?

Should I manually change a path variable to point to the right folder where wish0.4 is (still I don't know where) ?

Luca


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131127/c10854bf/attachment.html>

From Robert.Guglielmetti at nrel.gov  Wed Nov 27 13:24:06 2013
From: Robert.Guglielmetti at nrel.gov (Guglielmetti, Robert)
Date: Wed, 27 Nov 2013 14:24:06 -0700
Subject: [Radiance-general] Updated Radiance Installers Available
Message-ID: <FFF56A6D37A3A54F91A03601AC22DA32263ADB0A7C@MAILBOX2.nrel.gov>

Hi, lighting geeks. 

This is just a note to let you all know that we've updated the Radiance binaries, based on the latest LBNL-hosted Radiance code repository. There are installers for Windows (32-bit) and Mac ("Universal") as well as 32- and 64-bit tarballs of all the executables and library files for Linux. Grab yours here:

https://openstudio.nrel.gov/getting-started-developer/getting-started-radiance

Happy simulationification. 

- Rob

=========================
Rob Guglielmetti
National Renewable Energy Laboratory (NREL)
Commercial Buildings Research Group
15013 Denver West Parkway MS: RSF202
Golden, CO 80401   --   303.275.4319
rob.guglielmetti at nrel.gov
you can print if you want, but you probably shouldn't, because, like, trees.




From weiss at stahl-sonnenenergie.de  Thu Nov 28 12:15:10 2013
From: weiss at stahl-sonnenenergie.de (weiss at stahl-sonnenenergie.de)
Date: Thu, 28 Nov 2013 20:15:10 +0000
Subject: [Radiance-general] AUTOREPLY Radiance-general Digest, Vol 117,
	Issue 22
Message-ID: <0001E7FF.5297B25B@smtprelaypool.ispgateway.de>


Sehr geehrte Damen und Herren,

vielen Dank fr Ihre Nachricht.
Ich bin von 28.11.2013 bis 25.01.2014 in Elternzeit.
Ihre Mail wird nicht automatisch weiter geleitet oder gelesen. 
Bitte wenden Sie sich mit ihrem Anliegen an unsere Zentrale per Telefon unter 0761/38909-30  oder senden sie ihre Nachricht an info at stahl-weiss.de. Meine Kollegen helfen ihnen gerne weiter.

Mit freundlichen Gren

Volker Wei

Stahl+Wei
Bro fr SonnenEnergie

Basler Strae 55
D-79100 Freiburg

Tel.   +49-(0)761-38909-30
Durchwahl                -32
Fax.  +49-(0)761-38909-39

weiss at stahl-weiss.de
www.stahl-weiss.de
Send Radiance-general mailing list submissions to
	radiance-general at radiance-online.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://www.radiance-online.org/mailman/listinfo/radiance-general
or, via email, send a message with subject or body 'help' to
	radiance-general-request at radiance-online.org

You can reach the person managing the list at
	radiance-general-owner at radiance-online.org

When replying, please edit your Subject line so it is more specific
than "Re: Contents of Radiance-general digest..."


Today's Topics:

   1. Updated Radiance Installers Available (Guglielmetti, Robert)


----------------------------------------------------------------------

Message: 1
Date: Wed, 27 Nov 2013 14:24:06 -0700
From: "Guglielmetti, Robert" <Robert.Guglielmetti at nrel.gov>
To: "'Radiance general discussion
	(radiance-general at radiance-online.org)'"
	<radiance-general at radiance-online.org>
Subject: [Radiance-general] Updated Radiance Installers Available
Message-ID:
	<FFF56A6D37A3A54F91A03601AC22DA32263ADB0A7C at MAILBOX2.nrel.gov>
Content-Type: text/plain; charset="us-ascii"

Hi, lighting geeks. 

This is just a note to let you all know that we've updated the Radiance binaries, based on the latest LBNL-hosted Radiance code repository. There are installers for Windows (32-bit) and Mac ("Universal") as well as 32- and 64-bit tarballs of all the executables and library files for Linux. Grab yours here:

https://openstudio.nrel.gov/getting-started-developer/getting-started-radiance

Happy simulationification. 

- Rob

=========================
Rob Guglielmetti
National Renewable Energy Laboratory (NREL)
Commercial Buildings Research Group
15013 Denver West Parkway MS: RSF202
Golden, CO 80401   --   303.275.4319
rob.guglielmetti at nrel.gov
you can print if you want, but you probably shouldn't, because, like, trees.





------------------------------

_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general


End of Radiance-general Digest, Vol 117, Issue 22
*************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131128/409e2bb8/attachment.html>

From bruno.bueno at ise.fraunhofer.de  Fri Nov 29 02:10:29 2013
From: bruno.bueno at ise.fraunhofer.de (Bruno Bueno)
Date: Fri, 29 Nov 2013 11:10:29 +0100
Subject: [Radiance-general] 3pm to calculate indoor solar transmission
Message-ID: <52986815.80202@ise.fraunhofer.de>

Thanks Greg and German for your comments. As I mentioned in my email, I'm considering only a simple double-pane window, without any concentrating system.

Finally, the problem was not the 3pm but the shading effect of the 
reveal, which we included in the 3pm but not in EnergyPlus. The 
thickness of the wall was 0.35 m, the glass was located at 0.05 m from 
inside and there were three windows on a south-facing facade. With this 
configuration, the solar transmission decreased up to 30% due to shading 
effects from the reveal for high incidence angles.

We've compared the solar transmission from the 3pm with classic 
Radiance, and they match well.

Cheers,
Bruno

----------------------------------------------------------------------

Message: 1
Date: Sat, 23 Nov 2013 13:45:52 -0800
From: Greg Ward<gregoryjward at gmail.com>
To: Radiance general discussion<radiance-general at radiance-online.org>
Subject: Re: [Radiance-general] 3pm to calculate indoor solar
	transmission
Message-ID:<7F84A013-978E-4E0F-9B17-C777BD7E959D at lmi.net>
Content-Type: text/plain; charset=us-ascii

Hi Bruno,

The underprediction is expected for fenestration systems with any concentrated through component, as the Klems matrix representation will spread out any transmission to the resolution of its patch sizes, which is around 15 degrees or so (square).  In other words, the direct component will be spread out by the resolution of the Klems BTDF.  I don't know whether or not EnergyPlus is using the Klems BTDF, and if it does, it might use it differently so there isn't this spreading of irradiation, but that's a trade-off between different types of errors.  Radiance spreads the light based on BTDF angular accuracy, but the integrated value (and therefore the subsequent interreflections) will carry the correct amount of energy.  A different energy sampling approach might dump the energy into a smaller area with higher concentration, just not get it in the right place.  It's difficult to say which approach is better.

Cheers,
-Greg

> From: Bruno Bueno<bruno.bueno at ise.fraunhofer.de>
> Date: November 20, 2013 7:16:41 AM PST
>
> Hello,
>
> I'm using the three-phase method to calculate indoor illuminance, and it works fine. However, when I use it to calculate total solar transmission (irradiance) in a room, I get an underprediction of around 30% (compared to other methods such as EnergyPlus). Can anybody tell me what I'm doing wrong?
>
> - I have an office with three south-oriented windows. Each window has only double-pane glazing.
> - I use the -O 1 option in gendaylit to get radiance integrated over the solar range.
> - I use the solar properties of my fenestration system instead of the visible ones to calculate BSDF data.
> - I calculate solar transmission by creating two grids of sensors 1mm away from the windows (1000 sensors for 4 m2 window area), one facing to the windows (front) and another one in the opposite direction (back). The total solar transmission in [W] is the irradiance of the "front" sensors minus the irradiance of the "back" sensors multiplied by the window area.
>
> The three-phase method matrices are calculated as:
>
> Sky vector
> gendaylit %i %i %1.1f -a %f -o %f -m %f -W %f %f -O 1 -w -l %i |genskyvec -m 4 -c 1 1 1 > daylight/tempSol.skv (%* are replaced by actual numbers)
>
> View matrix
> rcontrib -f klems_int.cal -bn Nkbins -fo -o daylight/irrSurfFront_%s.vmx -b kbinS -m window_south -I+ -ab 12 -ad 50000 -lw 2e-5 daylight/vmx.oct < daylight/intSurfFrontSensor.pts
>
> Daylight matrix
> genklemsamp -vd 0 -1 0 daylight/SouthWindow.rad | rcontrib -c 1000 -e MF:4 -f reinhart.cal -b rbin -bn Nrbins -m sky_glow daylight/dmx.oct > daylight/south.dmx
>
> Then, for the "front" grid, I'd just multiply the matrices as:
>
> rlam '!dctimestep daylight/irrWinFront_window_south.vmx daylight/tmxs%i.xml daylight/south.dmx daylight/tempSol.skv' | rcalc -e '$1=($1+$4+$7+$10+$13)*0.333+($2+$5+$8+$11+$14)*0.333+($3+$6+$9+$12+$15)*0.333'
>
> Similarly for the "back" grid.
>
> Thank you in advance for your help!
>
> Bruno
>
> --
> Dr.-Ing. Bruno Bueno
> Solar Facades
> Division Thermal Systems and Buildings
> Fraunhofer Institute for Solar Energy Systems ISE
> Heidenhofstr. 2, 79110 Freiburg, Germany
> Phone: +49(0)761 4588 5377
>bruno.bueno at ise.fraunhofer.de
>www.ise.fraunhofer.de
>
>
>
> _______________________________________________
> Radiance-general mailing list
>Radiance-general at radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general



------------------------------

Message: 2
Date: Sat, 23 Nov 2013 20:03:53 -0300
From: Germ?n Molina Larrain<gmolina1 at uc.cl>
To: Radiance general discussion<radiance-general at radiance-online.org>
Subject: Re: [Radiance-general] 3pm to calculate indoor solar
	transmission
Message-ID:
	<CAF-iH4LqC+TxMVUsxbk0yeE_D01d1U07KXLq=sGUUn7XfeP0TQ at mail.gmail.com>
Content-Type: text/plain; charset="iso-8859-1"

I think I can add something else that S. Vidanovic told me:

"Well, main limitation is that integration is not really done patch by
patch (at least not for solar part)...  If you for example take a look at
equation 280 you will notice that integration is averaged over sky and
ground elements.  In solar calculations, I do not care from which part of
the sky radiation is coming, I simply do averaging over entire sky and just
apply that into equations.  I have no idea how much error that will
introduce into calculations.  One important note is that I do care what is
current sun position and therefore I do know what is incoming patch at
given time, and will know really precisely to calculate absorbed solar
radiation on interior sides."

meaning that only the beam radation is passed thorugh the BSDF, and the
rest is averaged.
Also, EnergyPlus should add the absorbed and reemited radiation...? are you
considering that?

I am not sure about what EnergyPlus does about the Basis issue that Greg
mentioned...

German

-- 
Dr.-Ing. Bruno Bueno
Solar Facades
Division Thermal Systems and Buildings
Fraunhofer Institute for Solar Energy Systems ISE
Heidenhofstr. 2, 79110 Freiburg, Germany
Phone: +49(0)761 4588 5377
bruno.bueno at ise.fraunhofer.de
www.ise.fraunhofer.de






From gregoryjward at gmail.com  Fri Nov 29 09:42:29 2013
From: gregoryjward at gmail.com (Greg Ward)
Date: Fri, 29 Nov 2013 09:42:29 -0800
Subject: [Radiance-general] 3pm to calculate indoor solar transmission
In-Reply-To: <52986815.80202@ise.fraunhofer.de>
References: <52986815.80202@ise.fraunhofer.de>
Message-ID: <B7BCCB0C-8828-4115-8454-61CE0C4A4FA9@lmi.net>

Thanks for letting us know, Bruno.  Glad you were able to figure it out!

-Greg

> From: Bruno Bueno <bruno.bueno at ise.fraunhofer.de>
> Date: November 29, 2013 2:10:29 AM PST
> 
> Thanks Greg and German for your comments. As I mentioned in my email, I'm considering only a simple double-pane window, without any concentrating system.
> 
> Finally, the problem was not the 3pm but the shading effect of the reveal, which we included in the 3pm but not in EnergyPlus. The thickness of the wall was 0.35 m, the glass was located at 0.05 m from inside and there were three windows on a south-facing facade. With this configuration, the solar transmission decreased up to 30% due to shading effects from the reveal for high incidence angles.
> 
> We've compared the solar transmission from the 3pm with classic Radiance, and they match well.
> 
> Cheers,
> Bruno
> 
> ----------------------------------------------------------------------
> 
> Message: 1
> Date: Sat, 23 Nov 2013 13:45:52 -0800
> From: Greg Ward<gregoryjward at gmail.com>
> 
> Hi Bruno,
> 
> The underprediction is expected for fenestration systems with any concentrated through component, as the Klems matrix representation will spread out any transmission to the resolution of its patch sizes, which is around 15 degrees or so (square).  In other words, the direct component will be spread out by the resolution of the Klems BTDF.  I don't know whether or not EnergyPlus is using the Klems BTDF, and if it does, it might use it differently so there isn't this spreading of irradiation, but that's a trade-off between different types of errors.  Radiance spreads the light based on BTDF angular accuracy, but the integrated value (and therefore the subsequent interreflections) will carry the correct amount of energy.  A different energy sampling approach might dump the energy into a smaller area with higher concentration, just not get it in the right place.  It's difficult to say which approach is better.
> 
> Cheers,
> -Greg
> 
>> From: Bruno Bueno<bruno.bueno at ise.fraunhofer.de>
>> Date: November 20, 2013 7:16:41 AM PST
>> 
>> Hello,
>> 
>> I'm using the three-phase method to calculate indoor illuminance, and it works fine. However, when I use it to calculate total solar transmission (irradiance) in a room, I get an underprediction of around 30% (compared to other methods such as EnergyPlus). Can anybody tell me what I'm doing wrong?
>> 
>> - I have an office with three south-oriented windows. Each window has only double-pane glazing.
>> - I use the -O 1 option in gendaylit to get radiance integrated over the solar range.
>> - I use the solar properties of my fenestration system instead of the visible ones to calculate BSDF data.
>> - I calculate solar transmission by creating two grids of sensors 1mm away from the windows (1000 sensors for 4 m2 window area), one facing to the windows (front) and another one in the opposite direction (back). The total solar transmission in [W] is the irradiance of the "front" sensors minus the irradiance of the "back" sensors multiplied by the window area.
>> 
>> The three-phase method matrices are calculated as:
>> 
>> Sky vector
>> gendaylit %i %i %1.1f -a %f -o %f -m %f -W %f %f -O 1 -w -l %i |genskyvec -m 4 -c 1 1 1 > daylight/tempSol.skv (%* are replaced by actual numbers)
>> 
>> View matrix
>> rcontrib -f klems_int.cal -bn Nkbins -fo -o daylight/irrSurfFront_%s.vmx -b kbinS -m window_south -I+ -ab 12 -ad 50000 -lw 2e-5 daylight/vmx.oct < daylight/intSurfFrontSensor.pts
>> 
>> Daylight matrix
>> genklemsamp -vd 0 -1 0 daylight/SouthWindow.rad | rcontrib -c 1000 -e MF:4 -f reinhart.cal -b rbin -bn Nrbins -m sky_glow daylight/dmx.oct > daylight/south.dmx
>> 
>> Then, for the "front" grid, I'd just multiply the matrices as:
>> 
>> rlam '!dctimestep daylight/irrWinFront_window_south.vmx daylight/tmxs%i.xml daylight/south.dmx daylight/tempSol.skv' | rcalc -e '$1=($1+$4+$7+$10+$13)*0.333+($2+$5+$8+$11+$14)*0.333+($3+$6+$9+$12+$15)*0.333'
>> 
>> Similarly for the "back" grid.
>> 
>> Thank you in advance for your help!
>> 
>> Bruno
>> 
>> --
>> Dr.-Ing. Bruno Bueno
> 
> 
> ------------------------------
> 
> Message: 2
> Date: Sat, 23 Nov 2013 20:03:53 -0300
> From: Germ?n Molina Larrain<gmolina1 at uc.cl>
> 
> I think I can add something else that S. Vidanovic told me:
> 
> "Well, main limitation is that integration is not really done patch by
> patch (at least not for solar part)...  If you for example take a look at
> equation 280 you will notice that integration is averaged over sky and
> ground elements.  In solar calculations, I do not care from which part of
> the sky radiation is coming, I simply do averaging over entire sky and just
> apply that into equations.  I have no idea how much error that will
> introduce into calculations.  One important note is that I do care what is
> current sun position and therefore I do know what is incoming patch at
> given time, and will know really precisely to calculate absorbed solar
> radiation on interior sides."
> 
> meaning that only the beam radation is passed thorugh the BSDF, and the
> rest is averaged.
> Also, EnergyPlus should add the absorbed and reemited radiation...? are you
> considering that?
> 
> I am not sure about what EnergyPlus does about the Basis issue that Greg
> mentioned...
> 
> German


