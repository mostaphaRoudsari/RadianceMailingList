From bruno.bueno at ise.fraunhofer.de  Tue Oct  1 07:07:13 2013
From: bruno.bueno at ise.fraunhofer.de (Bruno Bueno)
Date: Tue, 01 Oct 2013 16:07:13 +0200
Subject: [Radiance-general] rcontrib output format options
Message-ID: <524AD711.9010202@ise.fraunhofer.de>

Hello!
I'd like to extract the three-phase-method matrices in a human redeable 
format (view and daylight). How can I do this? I've tried the option 
-faa in rcontrib but I get problems reading the cal files.
rcontrib: fatal - command line error at 'klems_int.cal'
rcontrib: fatal - command line error at 'reinhart.cal'

Thank you!
Bruno


From gmolina1 at uc.cl  Tue Oct  1 07:17:52 2013
From: gmolina1 at uc.cl (=?ISO-8859-1?Q?Germ=E1n_Molina_Larrain?=)
Date: Tue, 1 Oct 2013 11:17:52 -0300
Subject: [Radiance-general] rcontrib output format options
In-Reply-To: <524AD711.9010202@ise.fraunhofer.de>
References: <524AD711.9010202@ise.fraunhofer.de>
Message-ID: <CAF-iH4J0AoC98kVn-bQ_8vyAX3VurMtPh=n1VyCNkNF3jTdUuQ@mail.gmail.com>

Bruno,

These cal files do not come in the library folder by default. Have you put
them there? They are in ray/src/cal/cal, if I am not wrong.

hope it works!




2013/10/1 Bruno Bueno <bruno.bueno at ise.fraunhofer.de>

> Hello!
> I'd like to extract the three-phase-method matrices in a human redeable
> format (view and daylight). How can I do this? I've tried the option -faa
> in rcontrib but I get problems reading the cal files.
> rcontrib: fatal - command line error at 'klems_int.cal'
> rcontrib: fatal - command line error at 'reinhart.cal'
>
> Thank you!
> Bruno
>
> ______________________________**_________________
> Radiance-general mailing list
> Radiance-general at radiance-**online.org<Radiance-general at radiance-online.org>
> http://www.radiance-online.**org/mailman/listinfo/radiance-**general<http://www.radiance-online.org/mailman/listinfo/radiance-general>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131001/065dd105/attachment-0001.html>

From amcneil at lbl.gov  Tue Oct  1 10:22:09 2013
From: amcneil at lbl.gov (Andrew McNeil)
Date: Tue, 1 Oct 2013 10:22:09 -0700
Subject: [Radiance-general] rcontrib output format options
In-Reply-To: <524AD711.9010202@ise.fraunhofer.de>
References: <524AD711.9010202@ise.fraunhofer.de>
Message-ID: <CAOG+Nizik_jvMvAb=KubcuPCi9AWKgCxxtE93GYujz_ySRb-pw@mail.gmail.com>

Bruno,
It seems that there is a problem with your command line. It's tough to tell
exactly without seeing it, but my guess is that you've done something like
this:

-faa klems_int.cal


but it should be two seperate options like this:

-faa  -f klems_int.cal


If this isn't the problem pleas send the full command and we'll have a
better chance at troubleshooting.

Best,
Andy



On Tue, Oct 1, 2013 at 7:07 AM, Bruno Bueno
<bruno.bueno at ise.fraunhofer.de>wrote:

> Hello!
> I'd like to extract the three-phase-method matrices in a human redeable
> format (view and daylight). How can I do this? I've tried the option -faa
> in rcontrib but I get problems reading the cal files.
> rcontrib: fatal - command line error at 'klems_int.cal'
> rcontrib: fatal - command line error at 'reinhart.cal'
>
> Thank you!
> Bruno
>
> ______________________________**_________________
> Radiance-general mailing list
> Radiance-general at radiance-**online.org<Radiance-general at radiance-online.org>
> http://www.radiance-online.**org/mailman/listinfo/radiance-**general<http://www.radiance-online.org/mailman/listinfo/radiance-general>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131001/4849d2ed/attachment.html>

From bruno.bueno at ise.fraunhofer.de  Wed Oct  2 01:20:00 2013
From: bruno.bueno at ise.fraunhofer.de (Bruno Bueno)
Date: Wed, 02 Oct 2013 10:20:00 +0200
Subject: [Radiance-general] rcontrib output format options
Message-ID: <524BD730.7020807@ise.fraunhofer.de>

Hi German,

Yes, I put them there, so I can modify them. I'm using the 3pm and it 
works fine by using -f option in rcontrib (i.e. working with binary 
matrices?). Now I'd like to work with the matrices outside Radiance. Any 
ideas? Thank you!

Bruno



From bruno.bueno at ise.fraunhofer.de  Wed Oct  2 06:48:32 2013
From: bruno.bueno at ise.fraunhofer.de (Bruno Bueno)
Date: Wed, 02 Oct 2013 15:48:32 +0200
Subject: [Radiance-general] rcontrib output format options
Message-ID: <524C2430.1060104@ise.fraunhofer.de>

Hi Andy,

Yes, that was the problem. Now it works!
Thanks a lot for the help!

Bruno


From sadeghipour at gmail.com  Wed Oct  2 13:37:49 2013
From: sadeghipour at gmail.com (Mostapha Sadeghipour)
Date: Wed, 2 Oct 2013 16:37:49 -0400
Subject: [Radiance-general] gendaymtx returns -1.#J -1.#J -1.#J
Message-ID: <CAAd_PgQYFVWp1XfoNw8MRfEy_wqz-Ovkawmmjkxyg4YoUQ4R_g@mail.gmail.com>

Hi all,

I tried to read the results of the gendaymtx with a custom script and I
noticed that there are multiple values of  -1.#J -1.#J -1.#J for RGB. Does
anybody know why this is happening?

I'm trying to get the total solar radiation for sky patches (-O1). I'm
running RADIANCE on Windows and here is the line:

gendaymtx -m 1 -O1 .\USA_AK_Anchorage.Intl.AP.702730_TMY3.wea>
.\USA_AK_Anchorage.Intl.AP.702730_TMY3.mtx

Thanks in advance,
Mostapha
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131002/939640cb/attachment.html>

From gregoryjward at gmail.com  Thu Oct  3 08:37:15 2013
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu, 3 Oct 2013 08:37:15 -0700
Subject: [Radiance-general] gendaymtx returns -1.#J -1.#J -1.#J
In-Reply-To: <CAAd_PgQYFVWp1XfoNw8MRfEy_wqz-Ovkawmmjkxyg4YoUQ4R_g@mail.gmail.com>
References: <CAAd_PgQYFVWp1XfoNw8MRfEy_wqz-Ovkawmmjkxyg4YoUQ4R_g@mail.gmail.com>
Message-ID: <1AF66972-0D9D-4E9B-9ED9-44030B4D4C79@lmi.net>

Hi Mostapha,

This sounds like a bug in gendaymtx.  Some versions of the standard library print out "-1.#J" for NaN (Not a Number), which can result from a divide-by-zero or similar illegal math operation.  If you send me your weather file in a separate message (not to the mailing list), I will see if I can reproduce the problem.  There may be a corner case or two that gendaymtx still doesn't deal with gracefully.

Cheers,
-Greg

> From: Mostapha Sadeghipour <sadeghipour at gmail.com>
> Date: October 2, 2013 1:37:49 PM PDT
> 
> Hi all,
> 
> I tried to read the results of the gendaymtx with a custom script and I noticed that there are multiple values of  -1.#J -1.#J -1.#J for RGB. Does anybody know why this is happening?
> 
> I'm trying to get the total solar radiation for sky patches (-O1). I'm running RADIANCE on Windows and here is the line:
> 
> gendaymtx -m 1 -O1 .\USA_AK_Anchorage.Intl.AP.702730_TMY3.wea> .\USA_AK_Anchorage.Intl.AP.702730_TMY3.mtx
> 
> Thanks in advance,
> Mostapha
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131003/ab53fd3a/attachment.html>

From gregoryjward at gmail.com  Thu Oct  3 09:21:30 2013
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Thu, 3 Oct 2013 09:21:30 -0700
Subject: [Radiance-general] gendaymtx returns -1.#J -1.#J -1.#J
In-Reply-To: <1AF66972-0D9D-4E9B-9ED9-44030B4D4C79@lmi.net>
References: <CAAd_PgQYFVWp1XfoNw8MRfEy_wqz-Ovkawmmjkxyg4YoUQ4R_g@mail.gmail.com>
	<1AF66972-0D9D-4E9B-9ED9-44030B4D4C79@lmi.net>
Message-ID: <EABFA500-DC53-4EC7-B840-23504D514FA4@gmail.com>

Hi Mostapha,

Thanks for sending your files.  For some reason, your WEA file has the month and day columns swapped, which is the source of your error.  What did you use to translate the EPW file?  The latest HEAD includes Christoph Reinharts epw2wea program, which does the correct translation.  With the correct input, gendaymtx seems to produce appropriate output.

Best,
-Greg

> From: Greg Ward <gward at lmi.net>
> Date: October 3, 2013 8:37:15 AM PDT
> 
> Hi Mostapha,
> 
> This sounds like a bug in gendaymtx.  Some versions of the standard library print out "-1.#J" for NaN (Not a Number), which can result from a divide-by-zero or similar illegal math operation.  If you send me your weather file in a separate message (not to the mailing list), I will see if I can reproduce the problem.  There may be a corner case or two that gendaymtx still doesn't deal with gracefully.
> 
> Cheers,
> -Greg
> 
>> From: Mostapha Sadeghipour <sadeghipour at gmail.com>
>> Date: October 2, 2013 1:37:49 PM PDT
>> 
>> Hi all,
>> 
>> I tried to read the results of the gendaymtx with a custom script and I noticed that there are multiple values of  -1.#J -1.#J -1.#J for RGB. Does anybody know why this is happening?
>> 
>> I'm trying to get the total solar radiation for sky patches (-O1). I'm running RADIANCE on Windows and here is the line:
>> 
>> gendaymtx -m 1 -O1 .\USA_AK_Anchorage.Intl.AP.702730_TMY3.wea> .\USA_AK_Anchorage.Intl.AP.702730_TMY3.mtx
>> 
>> Thanks in advance,
>> Mostapha
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131003/385a8d76/attachment.html>

From sadeghipour at gmail.com  Thu Oct  3 10:21:55 2013
From: sadeghipour at gmail.com (Mostapha Sadeghipour)
Date: Thu, 3 Oct 2013 13:21:55 -0400
Subject: [Radiance-general] gendaymtx returns -1.#J -1.#J -1.#J
In-Reply-To: <EABFA500-DC53-4EC7-B840-23504D514FA4@gmail.com>
References: <CAAd_PgQYFVWp1XfoNw8MRfEy_wqz-Ovkawmmjkxyg4YoUQ4R_g@mail.gmail.com>
	<1AF66972-0D9D-4E9B-9ED9-44030B4D4C79@lmi.net>
	<EABFA500-DC53-4EC7-B840-23504D514FA4@gmail.com>
Message-ID: <CAAd_PgQyVXD11uXQ7+Aj4zwxuWXxfF=Sb6=NEMkQCqfu2sdLKg@mail.gmail.com>

Hi Greg,

Thank you for checking. My bad! I use my own written epw2wea convertor so
the user don't need to download epw2wea file separately. That was a bug
indeed. Sorry about that.

One more question about conversion of the results of gendaymtx. Where can I
find  solid angle subtended for each patch of Reinhart sky? I already have
the values for Tregenza sky as (0.0435, 0.0416, 0.0474, 0.0407, 0.0429,
0.0445, 0.0455, 0.0344) for the 8 rows. Is it fine to use the same numbers
for every two rows?

Thanks again,
Mostapha




On Thu, Oct 3, 2013 at 12:21 PM, Gregory J. Ward <gregoryjward at gmail.com>wrote:

> Hi Mostapha,
>
> Thanks for sending your files.  For some reason, your WEA file has the
> month and day columns swapped, which is the source of your error.  What did
> you use to translate the EPW file?  The latest HEAD includes Christoph
> Reinharts epw2wea program, which does the correct translation.  With the
> correct input, gendaymtx seems to produce appropriate output.
>
> Best,
> -Greg
>
> *From: *Greg Ward <gward at lmi.net>
>
> *Date: *October 3, 2013 8:37:15 AM PDT
>
> *
> *
>
> Hi Mostapha,
>
> This sounds like a bug in gendaymtx.  Some versions of the standard
> library print out "-1.#J" for NaN (Not a Number), which can result from a
> divide-by-zero or similar illegal math operation.  If you send me your
> weather file in a separate message (not to the mailing list), I will see if
> I can reproduce the problem.  There may be a corner case or two that
> gendaymtx still doesn't deal with gracefully.
>
> Cheers,
> -Greg
>
> *From: *Mostapha Sadeghipour <sadeghipour at gmail.com>
>
> *Date: *October 2, 2013 1:37:49 PM PDT
>
> *
> *
>
> Hi all,
>
> I tried to read the results of the gendaymtx with a custom script and I
> noticed that there are multiple values of  -1.#J -1.#J -1.#J for RGB. Does
> anybody know why this is happening?
>
> I'm trying to get the total solar radiation for sky patches (-O1). I'm
> running RADIANCE on Windows and here is the line:
>
> gendaymtx -m 1 -O1 .\USA_AK_Anchorage.Intl.AP.702730_TMY3.wea>
> .\USA_AK_Anchorage.Intl.AP.702730_TMY3.mtx
>
> Thanks in advance,
> Mostapha
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131003/b448db58/attachment.html>

From gregoryjward at gmail.com  Thu Oct  3 19:43:15 2013
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu, 3 Oct 2013 19:43:15 -0700
Subject: [Radiance-general] gendaymtx returns -1.#J -1.#J -1.#J
In-Reply-To: <CAAd_PgQyVXD11uXQ7+Aj4zwxuWXxfF=Sb6=NEMkQCqfu2sdLKg@mail.gmail.com>
References: <CAAd_PgQYFVWp1XfoNw8MRfEy_wqz-Ovkawmmjkxyg4YoUQ4R_g@mail.gmail.com>
	<1AF66972-0D9D-4E9B-9ED9-44030B4D4C79@lmi.net>
	<EABFA500-DC53-4EC7-B840-23504D514FA4@gmail.com>
	<CAAd_PgQyVXD11uXQ7+Aj4zwxuWXxfF=Sb6=NEMkQCqfu2sdLKg@mail.gmail.com>
Message-ID: <5C00207A-DAA3-4FF0-9D0D-610C8B4EB3B1@lmi.net>

Here are the solid angles (in steradians) for the full Klems rows:

0.023909417
0.0237731163
0.0234119493
0.0273807841
0.0293333813
0.0349581625
0.0478687897
0.051801754
0.135517335

Note that we start at the zenith in the Klems subdivision, not at the horizon the way Tregenza's goes.

-Greg

P.S.  I used the command:

	cnt 145 | rcalc -f klems_ang.cal -e 'kbin=recno;$1=omega' | uniq 

> From: Mostapha Sadeghipour <sadeghipour at gmail.com>
> Date: October 3, 2013 10:21:55 AM PDT
> 
> Hi Greg,
> 
> Thank you for checking. My bad! I use my own written epw2wea convertor so the user don't need to download epw2wea file separately. That was a bug indeed. Sorry about that.
> 
> One more question about conversion of the results of gendaymtx. Where can I find  solid angle subtended for each patch of Reinhart sky? I already have the values for Tregenza sky as (0.0435, 0.0416, 0.0474, 0.0407, 0.0429, 0.0445, 0.0455, 0.0344) for the 8 rows. Is it fine to use the same numbers for every two rows?
> 
> Thanks again,
> Mostapha
> 
> 
> 
> 
> On Thu, Oct 3, 2013 at 12:21 PM, Gregory J. Ward <gregoryjward at gmail.com> wrote:
> Hi Mostapha,
> 
> Thanks for sending your files.  For some reason, your WEA file has the month and day columns swapped, which is the source of your error.  What did you use to translate the EPW file?  The latest HEAD includes Christoph Reinharts epw2wea program, which does the correct translation.  With the correct input, gendaymtx seems to produce appropriate output.
> 
> Best,
> -Greg
> 
>> From: Greg Ward <gward at lmi.net>
>> Date: October 3, 2013 8:37:15 AM PDT
>> 
>> Hi Mostapha,
>> 
>> This sounds like a bug in gendaymtx.  Some versions of the standard library print out "-1.#J" for NaN (Not a Number), which can result from a divide-by-zero or similar illegal math operation.  If you send me your weather file in a separate message (not to the mailing list), I will see if I can reproduce the problem.  There may be a corner case or two that gendaymtx still doesn't deal with gracefully.
>> 
>> Cheers,
>> -Greg
>> 
>>> From: Mostapha Sadeghipour <sadeghipour at gmail.com>
>>> Date: October 2, 2013 1:37:49 PM PDT
>>> 
>>> Hi all,
>>> 
>>> I tried to read the results of the gendaymtx with a custom script and I noticed that there are multiple values of  -1.#J -1.#J -1.#J for RGB. Does anybody know why this is happening?
>>> 
>>> I'm trying to get the total solar radiation for sky patches (-O1). I'm running RADIANCE on Windows and here is the line:
>>> 
>>> gendaymtx -m 1 -O1 .\USA_AK_Anchorage.Intl.AP.702730_TMY3.wea> .\USA_AK_Anchorage.Intl.AP.702730_TMY3.mtx
>>> 
>>> Thanks in advance,
>>> Mostapha
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131003/672d7d36/attachment.html>

From sadeghipour at gmail.com  Fri Oct  4 07:07:24 2013
From: sadeghipour at gmail.com (Mostapha Sadeghipour)
Date: Fri, 4 Oct 2013 10:07:24 -0400
Subject: [Radiance-general] gendaymtx returns -1.#J -1.#J -1.#J
In-Reply-To: <5C00207A-DAA3-4FF0-9D0D-610C8B4EB3B1@lmi.net>
References: <CAAd_PgQYFVWp1XfoNw8MRfEy_wqz-Ovkawmmjkxyg4YoUQ4R_g@mail.gmail.com>
	<1AF66972-0D9D-4E9B-9ED9-44030B4D4C79@lmi.net>
	<EABFA500-DC53-4EC7-B840-23504D514FA4@gmail.com>
	<CAAd_PgQyVXD11uXQ7+Aj4zwxuWXxfF=Sb6=NEMkQCqfu2sdLKg@mail.gmail.com>
	<5C00207A-DAA3-4FF0-9D0D-610C8B4EB3B1@lmi.net>
Message-ID: <CAAd_PgStM2Ao-9Rf8rmC1Tjaf4D=pSxfVXWNMSP-X8BT0SzLuA@mail.gmail.com>

Hi Greg,

I know it may not be the normal use of gendaymtx but I'm not using it to
run 5Phase or 3Phase method.

What I'm looking for is the values for each sky patch itself (e.g. 577
numbers for each time step for Reinhart sky). The numbers are already
generated from gendaymtx and I just want to multiply them with stradian
angles to have the values in w/m2.

I assume it should be 15 numbers for 14 rows + zenith patch.

Cheers,
Mostapha

PS: I wish I knew how to write a line like this on Windows then I could run
it for reinhart.cal I assume. :-\


On Thu, Oct 3, 2013 at 10:43 PM, Greg Ward <gregoryjward at gmail.com> wrote:

> Here are the solid angles (in steradians) for the full Klems rows:
>
> 0.023909417
> 0.0237731163
> 0.0234119493
> 0.0273807841
> 0.0293333813
> 0.0349581625
> 0.0478687897
> 0.051801754
> 0.135517335
>
> Note that we start at the zenith in the Klems subdivision, not at the
> horizon the way Tregenza's goes.
>
> -Greg
>
> P.S.  I used the command:
>
> cnt 145 | rcalc -f klems_ang.cal -e 'kbin=recno;$1=omega' | uniq
>
> *From: *Mostapha Sadeghipour <sadeghipour at gmail.com>
>
> *Date: *October 3, 2013 10:21:55 AM PDT
>
> *
> *
>
> Hi Greg,
>
> Thank you for checking. My bad! I use my own written epw2wea convertor so
> the user don't need to download epw2wea file separately. That was a bug
> indeed. Sorry about that.
>
> One more question about conversion of the results of gendaymtx. Where can
> I find  solid angle subtended for each patch of Reinhart sky? I already
> have the values for Tregenza sky as (0.0435, 0.0416, 0.0474, 0.0407,
> 0.0429, 0.0445, 0.0455, 0.0344) for the 8 rows. Is it fine to use the same
> numbers for every two rows?
>
> Thanks again,
> Mostapha
>
>
>
>
> On Thu, Oct 3, 2013 at 12:21 PM, Gregory J. Ward <gregoryjward at gmail.com>wrote:
>
>> Hi Mostapha,
>>
>> Thanks for sending your files.  For some reason, your WEA file has the
>> month and day columns swapped, which is the source of your error.  What did
>> you use to translate the EPW file?  The latest HEAD includes Christoph
>> Reinharts epw2wea program, which does the correct translation.  With the
>> correct input, gendaymtx seems to produce appropriate output.
>>
>> Best,
>> -Greg
>>
>> *From: *Greg Ward <gward at lmi.net>
>>
>> *Date: *October 3, 2013 8:37:15 AM PDT
>>
>> *
>> *
>>
>> Hi Mostapha,
>>
>> This sounds like a bug in gendaymtx.  Some versions of the standard
>> library print out "-1.#J" for NaN (Not a Number), which can result from a
>> divide-by-zero or similar illegal math operation.  If you send me your
>> weather file in a separate message (not to the mailing list), I will see if
>> I can reproduce the problem.  There may be a corner case or two that
>> gendaymtx still doesn't deal with gracefully.
>>
>> Cheers,
>> -Greg
>>
>> *From: *Mostapha Sadeghipour <sadeghipour at gmail.com>
>>
>> *Date: *October 2, 2013 1:37:49 PM PDT
>>
>> *
>> *
>>
>> Hi all,
>>
>> I tried to read the results of the gendaymtx with a custom script and I
>> noticed that there are multiple values of  -1.#J -1.#J -1.#J for RGB. Does
>> anybody know why this is happening?
>>
>> I'm trying to get the total solar radiation for sky patches (-O1). I'm
>> running RADIANCE on Windows and here is the line:
>>
>> gendaymtx -m 1 -O1 .\USA_AK_Anchorage.Intl.AP.702730_TMY3.wea>
>> .\USA_AK_Anchorage.Intl.AP.702730_TMY3.mtx
>>
>> Thanks in advance,
>> Mostapha
>>
>>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131004/891403a4/attachment.html>

From gregoryjward at gmail.com  Fri Oct  4 08:16:27 2013
From: gregoryjward at gmail.com (Greg Ward)
Date: Fri, 4 Oct 2013 08:16:27 -0700
Subject: [Radiance-general] gendaymtx returns -1.#J -1.#J -1.#J
In-Reply-To: <CAAd_PgStM2Ao-9Rf8rmC1Tjaf4D=pSxfVXWNMSP-X8BT0SzLuA@mail.gmail.com>
References: <CAAd_PgQYFVWp1XfoNw8MRfEy_wqz-Ovkawmmjkxyg4YoUQ4R_g@mail.gmail.com>
	<1AF66972-0D9D-4E9B-9ED9-44030B4D4C79@lmi.net>
	<EABFA500-DC53-4EC7-B840-23504D514FA4@gmail.com>
	<CAAd_PgQyVXD11uXQ7+Aj4zwxuWXxfF=Sb6=NEMkQCqfu2sdLKg@mail.gmail.com>
	<5C00207A-DAA3-4FF0-9D0D-610C8B4EB3B1@lmi.net>
	<CAAd_PgStM2Ao-9Rf8rmC1Tjaf4D=pSxfVXWNMSP-X8BT0SzLuA@mail.gmail.com>
Message-ID: <D5B40061-5D37-4A62-907B-B2944A534AF6@lmi.net>

Hi Mostapha,

If you run the command I gave you at the end of my e-mail, minus the "uniq" function that takes out the repeated values, you will get 145 solid angles for the 145 patches, starting as I said from the ZENITH patch.  You just need to find the klems_ang.cal file, which comes in the ray/src/cal/cal directory with the distribution.

The Reinhart sky source generator is called reinsrc.cal, and you can use it like this:

	cnt 2305 | rcalc -e MF:4 -f reinsrc.cal -e 'Rbin=recno;$1=Romega' > rh_sang.txt

You will 2305 values, get one solid angle for each patch.  If you change the MF setting, you will need to use a different number in cnt according to (using an example subdivision of 2):

	rcalc -n -e MF:2 -f reinhart.cal -e '$1=Nrbins'

The output of gendaymtx has 145 rows of 8760 values each for a full year, which may be less convenient for you.  You may swap rows and columns using the new rcollate command if you have it in your installation:

	gendaymtx year.wea | rcollate -i > transpose.txt

Cheers,
-Greg

> From: Mostapha Sadeghipour <sadeghipour at gmail.com>
> Date: October 4, 2013 7:07:24 AM PDT
> 
> Hi Greg,
> 
> I know it may not be the normal use of gendaymtx but I'm not using it to run 5Phase or 3Phase method.
> 
> What I'm looking for is the values for each sky patch itself (e.g. 577 numbers for each time step for Reinhart sky). The numbers are already generated from gendaymtx and I just want to multiply them with stradian angles to have the values in w/m2.
> 
> I assume it should be 15 numbers for 14 rows + zenith patch.
> 
> Cheers,
> Mostapha
> 
> PS: I wish I knew how to write a line like this on Windows then I could run it for reinhart.cal I assume. :-\
> 
> 
> On Thu, Oct 3, 2013 at 10:43 PM, Greg Ward <gregoryjward at gmail.com> wrote:
> Here are the solid angles (in steradians) for the full Klems rows:
> 
> 0.023909417
> 0.0237731163
> 0.0234119493
> 0.0273807841
> 0.0293333813
> 0.0349581625
> 0.0478687897
> 0.051801754
> 0.135517335
> 
> Note that we start at the zenith in the Klems subdivision, not at the horizon the way Tregenza's goes.
> 
> -Greg
> 
> P.S.  I used the command:
> 
> 	cnt 145 | rcalc -f klems_ang.cal -e 'kbin=recno;$1=omega' | uniq 
> 
>> From: Mostapha Sadeghipour <sadeghipour at gmail.com>
>> Date: October 3, 2013 10:21:55 AM PDT
>> 
>> Hi Greg,
>> 
>> Thank you for checking. My bad! I use my own written epw2wea convertor so the user don't need to download epw2wea file separately. That was a bug indeed. Sorry about that.
>> 
>> One more question about conversion of the results of gendaymtx. Where can I find  solid angle subtended for each patch of Reinhart sky? I already have the values for Tregenza sky as (0.0435, 0.0416, 0.0474, 0.0407, 0.0429, 0.0445, 0.0455, 0.0344) for the 8 rows. Is it fine to use the same numbers for every two rows?
>> 
>> Thanks again,
>> Mostapha
>> 
>> 
>> 
>> 
>> On Thu, Oct 3, 2013 at 12:21 PM, Gregory J. Ward <gregoryjward at gmail.com> wrote:
>> Hi Mostapha,
>> 
>> Thanks for sending your files.  For some reason, your WEA file has the month and day columns swapped, which is the source of your error.  What did you use to translate the EPW file?  The latest HEAD includes Christoph Reinharts epw2wea program, which does the correct translation.  With the correct input, gendaymtx seems to produce appropriate output.
>> 
>> Best,
>> -Greg
>> 
>>> From: Greg Ward <gward at lmi.net>
>>> Date: October 3, 2013 8:37:15 AM PDT
>>> 
>>> Hi Mostapha,
>>> 
>>> This sounds like a bug in gendaymtx.  Some versions of the standard library print out "-1.#J" for NaN (Not a Number), which can result from a divide-by-zero or similar illegal math operation.  If you send me your weather file in a separate message (not to the mailing list), I will see if I can reproduce the problem.  There may be a corner case or two that gendaymtx still doesn't deal with gracefully.
>>> 
>>> Cheers,
>>> -Greg
>>> 
>>>> From: Mostapha Sadeghipour <sadeghipour at gmail.com>
>>>> Date: October 2, 2013 1:37:49 PM PDT
>>>> 
>>>> Hi all,
>>>> 
>>>> I tried to read the results of the gendaymtx with a custom script and I noticed that there are multiple values of  -1.#J -1.#J -1.#J for RGB. Does anybody know why this is happening?
>>>> 
>>>> I'm trying to get the total solar radiation for sky patches (-O1). I'm running RADIANCE on Windows and here is the line:
>>>> 
>>>> gendaymtx -m 1 -O1 .\USA_AK_Anchorage.Intl.AP.702730_TMY3.wea> .\USA_AK_Anchorage.Intl.AP.702730_TMY3.mtx
>>>> 
>>>> Thanks in advance,
>>>> Mostapha
> http://www.radiance-online.org/mailman/listinfo/radiance-general
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131004/ace67579/attachment-0001.html>

From sadeghipour at gmail.com  Fri Oct  4 09:02:02 2013
From: sadeghipour at gmail.com (Mostapha Sadeghipour)
Date: Fri, 4 Oct 2013 12:02:02 -0400
Subject: [Radiance-general] gendaymtx returns -1.#J -1.#J -1.#J
In-Reply-To: <D5B40061-5D37-4A62-907B-B2944A534AF6@lmi.net>
References: <CAAd_PgQYFVWp1XfoNw8MRfEy_wqz-Ovkawmmjkxyg4YoUQ4R_g@mail.gmail.com>
	<1AF66972-0D9D-4E9B-9ED9-44030B4D4C79@lmi.net>
	<EABFA500-DC53-4EC7-B840-23504D514FA4@gmail.com>
	<CAAd_PgQyVXD11uXQ7+Aj4zwxuWXxfF=Sb6=NEMkQCqfu2sdLKg@mail.gmail.com>
	<5C00207A-DAA3-4FF0-9D0D-610C8B4EB3B1@lmi.net>
	<CAAd_PgStM2Ao-9Rf8rmC1Tjaf4D=pSxfVXWNMSP-X8BT0SzLuA@mail.gmail.com>
	<D5B40061-5D37-4A62-907B-B2944A534AF6@lmi.net>
Message-ID: <CAAd_PgQwCtZFvXkvP-zOU8gSiS08cSSRP40qzjvKyqRiDY2xig@mail.gmail.com>

Hi Greg,

Perfect! I think I have all I need now. Thank you so much for your help.

Cheers,
Mostapha

PS: Just in case there are other Windows users here who want to use the
same commands. You need to remove single quotes. Something like this works
on Windows:

cnt 2305 | rcalc -e MF:4 -f reinsrc.cal -e Rbin=recno;$1=Romega >
rh_sang.txt


On Fri, Oct 4, 2013 at 11:16 AM, Greg Ward <gregoryjward at gmail.com> wrote:

> Hi Mostapha,
>
> If you run the command I gave you at the end of my e-mail, minus the
> "uniq" function that takes out the repeated values, you will get 145 solid
> angles for the 145 patches, starting as I said from the ZENITH patch.  You
> just need to find the klems_ang.cal file, which comes in the
> ray/src/cal/cal directory with the distribution.
>
> The Reinhart sky source generator is called reinsrc.cal, and you can use
> it like this:
>
> cnt 2305 | rcalc -e MF:4 -f reinsrc.cal -e 'Rbin=recno;$1=Romega' >
> rh_sang.txt
>
> You will 2305 values, get one solid angle for each patch.  If you change
> the MF setting, you will need to use a different number in cnt according to
> (using an example subdivision of 2):
>
>  rcalc -n -e MF:2 -f reinhart.cal -e '$1=Nrbins'
>
> The output of gendaymtx has 145 rows of 8760 values each for a full year,
> which may be less convenient for you.  You may swap rows and columns using
> the new rcollate command if you have it in your installation:
>
> gendaymtx year.wea | rcollate -i > transpose.txt
>
> Cheers,
> -Greg
>
> *From: *Mostapha Sadeghipour <sadeghipour at gmail.com>
>
> *Date: *October 4, 2013 7:07:24 AM PDT
>
> *
> *
>
> Hi Greg,
>
> I know it may not be the normal use of gendaymtx but I'm not using it to
> run 5Phase or 3Phase method.
>
> What I'm looking for is the values for each sky patch itself (e.g. 577
> numbers for each time step for Reinhart sky). The numbers are already
> generated from gendaymtx and I just want to multiply them with stradian
> angles to have the values in w/m2.
>
> I assume it should be 15 numbers for 14 rows + zenith patch.
>
> Cheers,
> Mostapha
>
> PS: I wish I knew how to write a line like this on Windows then I could
> run it for reinhart.cal I assume. :-\
>
>
> On Thu, Oct 3, 2013 at 10:43 PM, Greg Ward <gregoryjward at gmail.com> wrote:
>
>> Here are the solid angles (in steradians) for the full Klems rows:
>>
>> 0.023909417
>> 0.0237731163
>> 0.0234119493
>> 0.0273807841
>> 0.0293333813
>> 0.0349581625
>> 0.0478687897
>> 0.051801754
>> 0.135517335
>>
>> Note that we start at the zenith in the Klems subdivision, not at the
>> horizon the way Tregenza's goes.
>>
>> -Greg
>>
>> P.S.  I used the command:
>>
>> cnt 145 | rcalc -f klems_ang.cal -e 'kbin=recno;$1=omega' | uniq
>>
>> *From: *Mostapha Sadeghipour <sadeghipour at gmail.com>
>>
>> *Date: *October 3, 2013 10:21:55 AM PDT
>>
>> *
>> *
>>
>> Hi Greg,
>>
>> Thank you for checking. My bad! I use my own written epw2wea convertor so
>> the user don't need to download epw2wea file separately. That was a bug
>> indeed. Sorry about that.
>>
>> One more question about conversion of the results of gendaymtx. Where can
>> I find  solid angle subtended for each patch of Reinhart sky? I already
>> have the values for Tregenza sky as (0.0435, 0.0416, 0.0474, 0.0407,
>> 0.0429, 0.0445, 0.0455, 0.0344) for the 8 rows. Is it fine to use the same
>> numbers for every two rows?
>>
>> Thanks again,
>> Mostapha
>>
>>
>>
>>
>> On Thu, Oct 3, 2013 at 12:21 PM, Gregory J. Ward <gregoryjward at gmail.com>wrote:
>>
>>> Hi Mostapha,
>>>
>>> Thanks for sending your files.  For some reason, your WEA file has the
>>> month and day columns swapped, which is the source of your error.  What did
>>> you use to translate the EPW file?  The latest HEAD includes Christoph
>>> Reinharts epw2wea program, which does the correct translation.  With the
>>> correct input, gendaymtx seems to produce appropriate output.
>>>
>>> Best,
>>> -Greg
>>>
>>> *From: *Greg Ward <gward at lmi.net>
>>>
>>> *Date: *October 3, 2013 8:37:15 AM PDT
>>>
>>> *
>>> *
>>>
>>> Hi Mostapha,
>>>
>>> This sounds like a bug in gendaymtx.  Some versions of the standard
>>> library print out "-1.#J" for NaN (Not a Number), which can result from a
>>> divide-by-zero or similar illegal math operation.  If you send me your
>>> weather file in a separate message (not to the mailing list), I will see if
>>> I can reproduce the problem.  There may be a corner case or two that
>>> gendaymtx still doesn't deal with gracefully.
>>>
>>> Cheers,
>>> -Greg
>>>
>>> *From: *Mostapha Sadeghipour <sadeghipour at gmail.com>
>>>
>>> *Date: *October 2, 2013 1:37:49 PM PDT
>>>
>>> *
>>> *
>>>
>>> Hi all,
>>>
>>> I tried to read the results of the gendaymtx with a custom script and I
>>> noticed that there are multiple values of  -1.#J -1.#J -1.#J for RGB. Does
>>> anybody know why this is happening?
>>>
>>> I'm trying to get the total solar radiation for sky patches (-O1). I'm
>>> running RADIANCE on Windows and here is the line:
>>>
>>> gendaymtx -m 1 -O1 .\USA_AK_Anchorage.Intl.AP.702730_TMY3.wea>
>>> .\USA_AK_Anchorage.Intl.AP.702730_TMY3.mtx
>>>
>>> Thanks in advance,
>>> Mostapha
>>>
>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131004/b76310f9/attachment.html>

From gregoryjward at gmail.com  Fri Oct  4 09:20:51 2013
From: gregoryjward at gmail.com (Greg Ward)
Date: Fri, 4 Oct 2013 09:20:51 -0700
Subject: [Radiance-general] gendaymtx returns -1.#J -1.#J -1.#J
In-Reply-To: <CAAd_PgQwCtZFvXkvP-zOU8gSiS08cSSRP40qzjvKyqRiDY2xig@mail.gmail.com>
References: <CAAd_PgQYFVWp1XfoNw8MRfEy_wqz-Ovkawmmjkxyg4YoUQ4R_g@mail.gmail.com>
	<1AF66972-0D9D-4E9B-9ED9-44030B4D4C79@lmi.net>
	<EABFA500-DC53-4EC7-B840-23504D514FA4@gmail.com>
	<CAAd_PgQyVXD11uXQ7+Aj4zwxuWXxfF=Sb6=NEMkQCqfu2sdLKg@mail.gmail.com>
	<5C00207A-DAA3-4FF0-9D0D-610C8B4EB3B1@lmi.net>
	<CAAd_PgStM2Ao-9Rf8rmC1Tjaf4D=pSxfVXWNMSP-X8BT0SzLuA@mail.gmail.com>
	<D5B40061-5D37-4A62-907B-B2944A534AF6@lmi.net>
	<CAAd_PgQwCtZFvXkvP-zOU8gSiS08cSSRP40qzjvKyqRiDY2xig@mail.gmail.com>
Message-ID: <43D4D9FA-BEB6-4A62-9BEE-96310D6E7641@lmi.net>

Right.  In general, you need to replace single-quotes on the command line with double-quotes under Windows.

-Greg

> From: Mostapha Sadeghipour <sadeghipour at gmail.com>
> Date: October 4, 2013 9:02:02 AM PDT
> 
> Hi Greg,
> 
> Perfect! I think I have all I need now. Thank you so much for your help.
> 
> Cheers,
> Mostapha
> 
> PS: Just in case there are other Windows users here who want to use the same commands. You need to remove single quotes. Something like this works on Windows:
> 
> cnt 2305 | rcalc -e MF:4 -f reinsrc.cal -e Rbin=recno;$1=Romega > rh_sang.txt
> 
> 
> On Fri, Oct 4, 2013 at 11:16 AM, Greg Ward <gregoryjward at gmail.com> wrote:
> Hi Mostapha,
> 
> If you run the command I gave you at the end of my e-mail, minus the "uniq" function that takes out the repeated values, you will get 145 solid angles for the 145 patches, starting as I said from the ZENITH patch.  You just need to find the klems_ang.cal file, which comes in the ray/src/cal/cal directory with the distribution.
> 
> The Reinhart sky source generator is called reinsrc.cal, and you can use it like this:
> 
> 	cnt 2305 | rcalc -e MF:4 -f reinsrc.cal -e 'Rbin=recno;$1=Romega' > rh_sang.txt
> 
> You will 2305 values, get one solid angle for each patch.  If you change the MF setting, you will need to use a different number in cnt according to (using an example subdivision of 2):
> 
> 	rcalc -n -e MF:2 -f reinhart.cal -e '$1=Nrbins'
> 
> The output of gendaymtx has 145 rows of 8760 values each for a full year, which may be less convenient for you.  You may swap rows and columns using the new rcollate command if you have it in your installation:
> 
> 	gendaymtx year.wea | rcollate -i > transpose.txt
> 
> Cheers,
> -Greg
> 
>> From: Mostapha Sadeghipour <sadeghipour at gmail.com>
>> Date: October 4, 2013 7:07:24 AM PDT
>> 
>> Hi Greg,
>> 
>> I know it may not be the normal use of gendaymtx but I'm not using it to run 5Phase or 3Phase method.
>> 
>> What I'm looking for is the values for each sky patch itself (e.g. 577 numbers for each time step for Reinhart sky). The numbers are already generated from gendaymtx and I just want to multiply them with stradian angles to have the values in w/m2.
>> 
>> I assume it should be 15 numbers for 14 rows + zenith patch.
>> 
>> Cheers,
>> Mostapha
>> 
>> PS: I wish I knew how to write a line like this on Windows then I could run it for reinhart.cal I assume. :-\
>> 
>> 
>> On Thu, Oct 3, 2013 at 10:43 PM, Greg Ward <gregoryjward at gmail.com> wrote:
>> Here are the solid angles (in steradians) for the full Klems rows:
>> 
>> 0.023909417
>> 0.0237731163
>> 0.0234119493
>> 0.0273807841
>> 0.0293333813
>> 0.0349581625
>> 0.0478687897
>> 0.051801754
>> 0.135517335
>> 
>> Note that we start at the zenith in the Klems subdivision, not at the horizon the way Tregenza's goes.
>> 
>> -Greg
>> 
>> P.S.  I used the command:
>> 
>> 	cnt 145 | rcalc -f klems_ang.cal -e 'kbin=recno;$1=omega' | uniq 
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131004/6ef72af5/attachment-0001.html>

From jedev at visarc.com  Fri Oct  4 09:25:14 2013
From: jedev at visarc.com (Jack de Valpine)
Date: Fri, 04 Oct 2013 12:25:14 -0400
Subject: [Radiance-general] gendaymtx returns -1.#J -1.#J -1.#J
In-Reply-To: <D5B40061-5D37-4A62-907B-B2944A534AF6@lmi.net>
References: <CAAd_PgQYFVWp1XfoNw8MRfEy_wqz-Ovkawmmjkxyg4YoUQ4R_g@mail.gmail.com>
	<1AF66972-0D9D-4E9B-9ED9-44030B4D4C79@lmi.net>
	<EABFA500-DC53-4EC7-B840-23504D514FA4@gmail.com>
	<CAAd_PgQyVXD11uXQ7+Aj4zwxuWXxfF=Sb6=NEMkQCqfu2sdLKg@mail.gmail.com>
	<5C00207A-DAA3-4FF0-9D0D-610C8B4EB3B1@lmi.net>
	<CAAd_PgStM2Ao-9Rf8rmC1Tjaf4D=pSxfVXWNMSP-X8BT0SzLuA@mail.gmail.com>
	<D5B40061-5D37-4A62-907B-B2944A534AF6@lmi.net>
Message-ID: <524EEBEA.8070108@visarc.com>

Hi Mostapha,

Just a quick note, I think that Greg means:

    gendaymtx year.wea | rcollate -t > transpose.txt

to transpose.

-Jack

-- 
Jack de Valpine
President

Visarc Incorporated
www.visarc.com

channeling technology for superior design and construction

On 10/4/2013 11:16 AM, Greg Ward wrote:
> Hi Mostapha,
>
> If you run the command I gave you at the end of my e-mail, minus the 
> "uniq" function that takes out the repeated values, you will get 145 
> solid angles for the 145 patches, starting as I said from the ZENITH 
> patch.  You just need to find the klems_ang.cal file, which comes in 
> the ray/src/cal/cal directory with the distribution.
>
> The Reinhart sky source generator is called reinsrc.cal, and you can 
> use it like this:
>
> cnt 2305 | rcalc -e MF:4 -f reinsrc.cal -e 'Rbin=recno;$1=Romega' > 
> rh_sang.txt
>
> You will 2305 values, get one solid angle for each patch.  If you 
> change the MF setting, you will need to use a different number in cnt 
> according to (using an example subdivision of 2):
>
> rcalc -n -e MF:2 -f reinhart.cal -e '$1=Nrbins'
>
> The output of gendaymtx has 145 rows of 8760 values each for a full 
> year, which may be less convenient for you.  You may swap rows and 
> columns using the new rcollate command if you have it in your 
> installation:
>
> gendaymtx year.wea | rcollate -i > transpose.txt
>
> Cheers,
> -Greg
>
>> *From: *Mostapha Sadeghipour <sadeghipour at gmail.com 
>> <mailto:sadeghipour at gmail.com>>
>>
>> *Date: *October 4, 2013 7:07:24 AM PDT
>>
>> *
>> *
>>
>> Hi Greg,
>>
>> I know it may not be the normal use of gendaymtx but I'm not using it 
>> to run 5Phase or 3Phase method.
>>
>> What I'm looking for is the values for each sky patch itself (e.g. 
>> 577 numbers for each time step for Reinhart sky). The numbers are 
>> already generated from gendaymtx and I just want to multiply them 
>> with stradian angles to have the values in w/m2.
>>
>> I assume it should be 15 numbers for 14 rows + zenith patch.
>>
>> Cheers,
>> Mostapha
>>
>> PS: I wish I knew how to write a line like this on Windows then I 
>> could run it for reinhart.cal I assume. :-\
>>
>>
>> On Thu, Oct 3, 2013 at 10:43 PM, Greg Ward <gregoryjward at gmail.com 
>> <mailto:gregoryjward at gmail.com>> wrote:
>>
>>     Here are the solid angles (in steradians) for the full Klems rows:
>>
>>     0.023909417
>>     0.0237731163
>>     0.0234119493
>>     0.0273807841
>>     0.0293333813
>>     0.0349581625
>>     0.0478687897
>>     0.051801754
>>     0.135517335
>>
>>     Note that we start at the zenith in the Klems subdivision, not at
>>     the horizon the way Tregenza's goes.
>>
>>     -Greg
>>
>>     P.S.  I used the command:
>>
>>     cnt 145 | rcalc -f klems_ang.cal -e 'kbin=recno;$1=omega' | uniq
>>
>>>     *From: *Mostapha Sadeghipour <sadeghipour at gmail.com
>>>     <mailto:sadeghipour at gmail.com>>
>>>
>>>     *Date: *October 3, 2013 10:21:55 AM PDT
>>>
>>>     *
>>>     *
>>>
>>>     Hi Greg,
>>>
>>>     Thank you for checking. My bad! I use my own written epw2wea
>>>     convertor so the user don't need to download epw2wea file
>>>     separately. That was a bug indeed. Sorry about that.
>>>
>>>     One more question about conversion of the results of gendaymtx.
>>>     Where can I find  solid angle subtended for each patch of
>>>     Reinhart sky? I already have the values for Tregenza sky as
>>>     (0.0435, 0.0416, 0.0474, 0.0407, 0.0429, 0.0445, 0.0455, 0.0344)
>>>     for the 8 rows. Is it fine to use the same numbers for every two
>>>     rows?
>>>
>>>     Thanks again,
>>>     Mostapha
>>>
>>>
>>>
>>>
>>>     On Thu, Oct 3, 2013 at 12:21 PM, Gregory J. Ward
>>>     <gregoryjward at gmail.com <mailto:gregoryjward at gmail.com>> wrote:
>>>
>>>         Hi Mostapha,
>>>
>>>         Thanks for sending your files.  For some reason, your WEA
>>>         file has the month and day columns swapped, which is the
>>>         source of your error.  What did you use to translate the EPW
>>>         file?  The latest HEAD includes Christoph Reinharts epw2wea
>>>         program, which does the correct translation.  With the
>>>         correct input, gendaymtx seems to produce appropriate output.
>>>
>>>         Best,
>>>         -Greg
>>>
>>>>         *From: *Greg Ward <gward at lmi.net <mailto:gward at lmi.net>>
>>>>
>>>>         *Date: *October 3, 2013 8:37:15 AM PDT
>>>>
>>>>         *
>>>>         *
>>>>
>>>>         Hi Mostapha,
>>>>
>>>>         This sounds like a bug in gendaymtx.  Some versions of the
>>>>         standard library print out "-1.#J" for NaN (Not a Number),
>>>>         which can result from a divide-by-zero or similar illegal
>>>>         math operation.  If you send me your weather file in a
>>>>         separate message (not to the mailing list), I will see if I
>>>>         can reproduce the problem.  There may be a corner case or
>>>>         two that gendaymtx still doesn't deal with gracefully.
>>>>
>>>>         Cheers,
>>>>         -Greg
>>>>
>>>>>         *From: *Mostapha Sadeghipour <sadeghipour at gmail.com
>>>>>         <mailto:sadeghipour at gmail.com>>
>>>>>
>>>>>         *Date: *October 2, 2013 1:37:49 PM PDT
>>>>>
>>>>>         *
>>>>>         *
>>>>>
>>>>>         Hi all,
>>>>>
>>>>>         I tried to read the results of the gendaymtx with a custom
>>>>>         script and I noticed that there are multiple values of 
>>>>>         -1.#J -1.#J -1.#J for RGB. Does anybody know why this is
>>>>>         happening?
>>>>>
>>>>>         I'm trying to get the total solar radiation for sky
>>>>>         patches (-O1). I'm running RADIANCE on Windows and here is
>>>>>         the line:
>>>>>
>>>>>         gendaymtx -m 1 -O1
>>>>>         .\USA_AK_Anchorage.Intl.AP.702730_TMY3.wea>
>>>>>         .\USA_AK_Anchorage.Intl.AP.702730_TMY3.mtx
>>>>>
>>>>>         Thanks in advance,
>>>>>         Mostapha
>>>
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131004/a740abbc/attachment.html>

From gregoryjward at gmail.com  Fri Oct  4 09:39:32 2013
From: gregoryjward at gmail.com (Greg Ward)
Date: Fri, 4 Oct 2013 09:39:32 -0700
Subject: [Radiance-general] gendaymtx returns -1.#J -1.#J -1.#J
In-Reply-To: <524EEBEA.8070108@visarc.com>
References: <CAAd_PgQYFVWp1XfoNw8MRfEy_wqz-Ovkawmmjkxyg4YoUQ4R_g@mail.gmail.com>
	<1AF66972-0D9D-4E9B-9ED9-44030B4D4C79@lmi.net>
	<EABFA500-DC53-4EC7-B840-23504D514FA4@gmail.com>
	<CAAd_PgQyVXD11uXQ7+Aj4zwxuWXxfF=Sb6=NEMkQCqfu2sdLKg@mail.gmail.com>
	<5C00207A-DAA3-4FF0-9D0D-610C8B4EB3B1@lmi.net>
	<CAAd_PgStM2Ao-9Rf8rmC1Tjaf4D=pSxfVXWNMSP-X8BT0SzLuA@mail.gmail.com>
	<D5B40061-5D37-4A62-907B-B2944A534AF6@lmi.net>
	<524EEBEA.8070108@visarc.com>
Message-ID: <84002BB2-21DF-401F-AE36-682AD50DE150@lmi.net>

Indeed, I did.  Good catch, Jack!  Under Unix, it's more efficient to use:

 gendaymtx year.wea > temp.txt
 rcollate -t temp.txt > transpose.txt
 rm temp.txt

Maybe not enough to really matter, but if you use a Reinhart sky then it can start to make a difference.

-G

> From: Jack de Valpine <jedev at visarc.com>
> Date: October 4, 2013 9:25:14 AM PDT
> 
> Hi Mostapha,
> 
> Just a quick note, I think that Greg means:
> gendaymtx year.wea | rcollate -t > transpose.txt
> to transpose.
> 
> -Jack
> -- 
> Jack de Valpine
> President
> 
> Visarc Incorporated
> www.visarc.com
> 
> channeling technology for superior design and construction
> On 10/4/2013 11:16 AM, Greg Ward wrote:
>> Hi Mostapha,
>> 
>> If you run the command I gave you at the end of my e-mail, minus the "uniq" function that takes out the repeated values, you will get 145 solid angles for the 145 patches, starting as I said from the ZENITH patch.  You just need to find the klems_ang.cal file, which comes in the ray/src/cal/cal directory with the distribution.
>> 
>> The Reinhart sky source generator is called reinsrc.cal, and you can use it like this:
>> 
>>  cnt 2305 | rcalc -e MF:4 -f reinsrc.cal -e 'Rbin=recno;$1=Romega' > rh_sang.txt
>> 
>> You will 2305 values, get one solid angle for each patch.  If you change the MF setting, you will need to use a different number in cnt according to (using an example subdivision of 2):
>> 
>>  rcalc -n -e MF:2 -f reinhart.cal -e '$1=Nrbins'
>> 
>> The output of gendaymtx has 145 rows of 8760 values each for a full year, which may be less convenient for you.  You may swap rows and columns using the new rcollate command if you have it in your installation:
>> 
>>  gendaymtx year.wea | rcollate -i > transpose.txt
>> 
>> Cheers,
>> -Greg
>> 
>>> From: Mostapha Sadeghipour <sadeghipour at gmail.com>
>>> Date: October 4, 2013 7:07:24 AM PDT
>>> 
>>> Hi Greg,
>>> 
>>> I know it may not be the normal use of gendaymtx but I'm not using it to run 5Phase or 3Phase method.
>>> 
>>> What I'm looking for is the values for each sky patch itself (e.g. 577 numbers for each time step for Reinhart sky). The numbers are already generated from gendaymtx and I just want to multiply them with stradian angles to have the values in w/m2.
>>> 
>>> I assume it should be 15 numbers for 14 rows + zenith patch.
>>> 
>>> Cheers,
>>> Mostapha
>>> 
>>> PS: I wish I knew how to write a line like this on Windows then I could run it for reinhart.cal I assume. :-\
>>> 
>>> 
>>> On Thu, Oct 3, 2013 at 10:43 PM, Greg Ward <gregoryjward at gmail.com> wrote:
>>> Here are the solid angles (in steradians) for the full Klems rows:
>>> 
>>> 0.023909417
>>> 0.0237731163
>>> 0.0234119493
>>> 0.0273807841
>>> 0.0293333813
>>> 0.0349581625
>>> 0.0478687897
>>> 0.051801754
>>> 0.135517335
>>> 
>>> Note that we start at the zenith in the Klems subdivision, not at the horizon the way Tregenza's goes.
>>> 
>>> -Greg
>>> 
>>> P.S.  I used the command:
>>> 
>>>  cnt 145 | rcalc -f klems_ang.cal -e 'kbin=recno;$1=omega' | uniq 
>>> 
>>>> From: Mostapha Sadeghipour <sadeghipour at gmail.com>
>>>> Date: October 3, 2013 10:21:55 AM PDT
>>>> 
>>>> Hi Greg,
>>>> 
>>>> Thank you for checking. My bad! I use my own written epw2wea convertor so the user don't need to download epw2wea file separately. That was a bug indeed. Sorry about that.
>>>> 
>>>> One more question about conversion of the results of gendaymtx. Where can I find  solid angle subtended for each patch of Reinhart sky? I already have the values for Tregenza sky as (0.0435, 0.0416, 0.0474, 0.0407, 0.0429, 0.0445, 0.0455, 0.0344) for the 8 rows. Is it fine to use the same numbers for every two rows?
>>>> 
>>>> Thanks again,
>>>> Mostapha
>>>> 
>>>> 
>>>> 
>>>> 
>>>> On Thu, Oct 3, 2013 at 12:21 PM, Gregory J. Ward <gregoryjward at gmail.com> wrote:
>>>> Hi Mostapha,
>>>> 
>>>> Thanks for sending your files.  For some reason, your WEA file has the month and day columns swapped, which is the source of your error.  What did you use to translate the EPW file?  The latest HEAD includes Christoph Reinharts epw2wea program, which does the correct translation.  With the correct input, gendaymtx seems to produce appropriate output.
>>>> 
>>>> Best,
>>>> -Greg
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131004/6602e0a0/attachment-0001.html>

From grobe at gmx.net  Tue Oct  8 05:59:43 2013
From: grobe at gmx.net (Lars O. Grobe)
Date: Tue, 8 Oct 2013 14:59:43 +0200
Subject: [Radiance-general] trans parameters for translucent fabric
In-Reply-To: <1380278223.20229.YahooMailNeo@web161701.mail.bf1.yahoo.com>
References: <1380278223.20229.YahooMailNeo@web161701.mail.bf1.yahoo.com>
Message-ID: <8BF678AC-E36C-4C33-95E9-A95D722A94AC@gmx.net>


Hi Mona.

> hi
>  I have used a kind of translucent   fabric in my project that i need to know its definition as a radiance material  to use in my analysis 
> i have some  characteristic of the fabric  like  solar transmittance(Ts) =18%,solar reflection(Rs) =61% ,solar absorption(As)=21%,normal -hemispherical light transmission(TV ,n-h)=17% ,normal-normal light transmission(TV, n-n)=14%
> external solar factor=0.13  internal solar factor=0.37
> 
> how can I define it using above data?
> I need the following numbers:
> 
> > void trans fabric
> > 0
> > 0
> > 7 ?  ?  ?  ?  ?  ? ?
Getting the trans-material's parameters right implies some calculation. For the lazy ones, there is Andy McNeil's trans-widget for the Mac, which is what I used to get a quick set of parameters. The tool needs as input:

Transmission (diffuse and specular) Td, Ts
Reflection (diffuse and specular) Rd, Rs
Roughness (scattering in the specular transmission/reflection)

If you want to do photometric calculations, meaning that you are interested in light rather than solar radiation (including e.g. IR), you use light transmission and reflection. Unfortunately, you gave only solar reflection, but as solar and light transmission are similar, I assume light reflection to be the same as solar reflection for your example. I also assume the reflection to be purely diffuse.

Probably reflection is not critical for you anyway, if you are more interested to know how much light enters your room. However, if you look at a sunshade from a bright room, in theory a specular reflection could even cause glare. Also, view-through is affected by highly reflective surfaces.

So, I assume from your numbers:

Td=0.03 (normal-hemispherical minus normal-normal)
Ts=0.14 (normal-normal)
Rd=0.61 (guessed from given solar reflection)
Rs=0.00 (perfectly diffuse, so no specularity)
Roughness=0 (we simply have no information based on your data)

Entering this into the trans widget leads to

#Td=0.03 Ts=0.14 Rd=0.61 Rs=0
void trans translucent_fabric
0
0
7 0.78 0.78 0.78 0 0 0.218 0.824

No warranty for any of the above :)

Hope this helps. For the full background of the meanings A1-A7 used with the trans material, browse the mailing list archives, check the Radiance Cook-Book and/or tutorial, see Schorsch Mischler's documentation, the Materials-pdf part of the Radiance distribution as well as the book "Rendering with Radiance"...

Cheers, Lars.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131008/26fdc04a/attachment.html>

From kirankumar.devs at gmail.com  Tue Oct  8 21:29:14 2013
From: kirankumar.devs at gmail.com (DEVS Kiran Kumar)
Date: Wed, 9 Oct 2013 04:29:14 +0000 (UTC)
Subject: [Radiance-general] Invitation to connect on LinkedIn
Message-ID: <387025046.7231732.1381292954967.JavaMail.app@ela4-app3634.prod>

LinkedIn
------------



I'd like to add you to my professional network on LinkedIn.

- DEVS Kiran

DEVS Kiran Kumar
Research Associate at TERI
Bengaluru Area, India

Confirm that you know DEVS Kiran Kumar:
https://www.linkedin.com/e/zg1ju9-hmk25t8r-6m/isd/8668976907/GJ3wkMeN/?hs=false&tok=1nyB-2EuPJhRY1

--
You are receiving Invitation to Connect emails. Click to unsubscribe:
http://www.linkedin.com/e/zg1ju9-hmk25t8r-6m/q-9PbkWGytNVJnQ3B_QPpXWZzuiVBoRABMcUHdWGL6_2_Ofe0vpIep/goo/radiance-general%40radiance-online%2Eorg/20061/I5700863650_1/?hs=false&tok=3cUyP24EzJhRY1

(c) 2012 LinkedIn Corporation. 2029 Stierlin Ct, Mountain View, CA 94043, USA.


  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131009/8ee6333a/attachment.html>

From miinchaca at gmail.com  Fri Oct 11 02:37:24 2013
From: miinchaca at gmail.com (minchaca)
Date: Fri, 11 Oct 2013 11:37:24 +0200
Subject: [Radiance-general] Three-Phase Method: dmx
In-Reply-To: <DAA9876D-CDB2-4B80-B4A9-8237D7556158@lmi.net>
References: <CAO0Bi3W3LfV70CJMUgKgffVCoJ9jHWEcqjUBh8WEoty+m_F4mQ@mail.gmail.com>
	<DAA9876D-CDB2-4B80-B4A9-8237D7556158@lmi.net>
Message-ID: <CAO0Bi3Vfm0ATaAevqu+m+GHP9bv-vWVHtAg9Y4EkCwSxELTiug@mail.gmail.com>

Thanks a lot!! Indeed, after that correction I was able to create the
*dmx*for the south window orientation.

I take the opportunity to ask a simple question regarding *dctimestep*:

when I tried to use it for annual calculations with -n 8760 I get a msg:

Usage:dctimestep DCspec [ skyvec ]
dctimestep Vspec Tbsdf.xml Dmat.dat [ skyvec ]

I sounds to me that is not accepting the -n, so I guess that there might be
a new version that it takes it.

We have the 4.1 version released Nov 2011 installed in the server.
I wonder if the source file of that 'dctimestep new version' its available
somewhere the web to download?

Thanks in advance!

Chantal.


2013/9/25 Greg Ward <gregoryjward at gmail.com>

> Hi Chantal,
>
> I'm not 100% sure, but I think you need to use ASCII data files under
> Windows, because it doesn't track the exact End-of-File, which confuses
> some programs.   Replace the -faf option in rtcontrib (which should be
> rcontrib anyway) with -faa.
>
> Cheers,
> -Greg
>
> *From: *minchaca <miinchaca at gmail.com>
>
> *Date: *September 25, 2013 10:21:28 AM PDT
>
> *
> *
>
> Dear Radiance List
>
> I'm coming with another question that is probably too simple but still
> keeps me from moving to the next phase of  the 3Phase:
>
> When I create the daylight matrix using genklemsamp & rtcontrib I obtain a
> file with only the header and sometimes some weird symbols ike :
> ?7?7?7?7?7?7
>
>  If I use such file (*.dmx) with dctimestep I get the following Error
> messages :
>  warning - unexpected data at the end of binary file
> results/window_SOUTH.dmx
>
>  or
>  fatal - unexpected EOS reading results/window_SOUTH.dmx
>
>  my commands are just like in the Exercise 2 of the tutorial:
>  genklemsamp -vd 0 -1 0 objects/window_S.rad | rtcontrib -c 1000 -e MF:4
> -f reinhart.cal -b rbin -bn Nrbins -m sky_glow -faf model_dmx.oct >
> results/south.dmx
>
> If I try to do the same in Windows I get:
>
> Usage: vwright {offset|name}
> Argument "" isn't numeric in multiplication (*) at genklemsamp.pl line 51
> Argument "" isn't numeric in multiplication (*) at genklemsamp.pl line 51
> Illegal division by zero at genklemsamp.pl line 51.
>
>  I'll really appreciate your help!
>
> Thanks in advance!
>
> Chantal.
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131011/3a254569/attachment.html>

From gregoryjward at gmail.com  Fri Oct 11 09:46:24 2013
From: gregoryjward at gmail.com (Greg Ward)
Date: Fri, 11 Oct 2013 09:46:24 -0700
Subject: [Radiance-general] Three-Phase Method: dmx
In-Reply-To: <CAO0Bi3Vfm0ATaAevqu+m+GHP9bv-vWVHtAg9Y4EkCwSxELTiug@mail.gmail.com>
References: <CAO0Bi3W3LfV70CJMUgKgffVCoJ9jHWEcqjUBh8WEoty+m_F4mQ@mail.gmail.com>
	<DAA9876D-CDB2-4B80-B4A9-8237D7556158@lmi.net>
	<CAO0Bi3Vfm0ATaAevqu+m+GHP9bv-vWVHtAg9Y4EkCwSxELTiug@mail.gmail.com>
Message-ID: <4A048E0E-97A3-4966-A951-5109E22D2C2E@lmi.net>

Hi Chantal,

Yes, you need the newer version of dctimestep.  You can find HEAD sources from the HTML interface at:

	http://www.radiance-online.org/cgi-bin/viewcvs.cgi/ray/src/#dirlist

Getting to the appropriate "Download" link you find:

	http://www.radiance-online.org/cgi-bin/viewcvs.cgi/ray/src/util/dctimestep.c?revision=2.27

Best,
-Greg

> From: minchaca <miinchaca at gmail.com>
> Date: October 11, 2013 2:37:24 AM PDT
> 
> Thanks a lot!! Indeed, after that correction I was able to create the dmx for the south window orientation.
> 
> I take the opportunity to ask a simple question regarding dctimestep:
> 
> when I tried to use it for annual calculations with -n 8760 I get a msg:
> 
> Usage:dctimestep DCspec [ skyvec ] 
> dctimestep Vspec Tbsdf.xml Dmat.dat [ skyvec ]
> 
> I sounds to me that is not accepting the -n, so I guess that there might be a new version that it takes it. 
> 
> We have the 4.1 version released Nov 2011 installed in the server.  
> I wonder if the source file of that 'dctimestep new version' its available somewhere the web to download? 
> 
> Thanks in advance!
> 
> Chantal.
> 
> 
> 2013/9/25 Greg Ward <gregoryjward at gmail.com>
> Hi Chantal,
> 
> I'm not 100% sure, but I think you need to use ASCII data files under Windows, because it doesn't track the exact End-of-File, which confuses some programs.   Replace the -faf option in rtcontrib (which should be rcontrib anyway) with -faa.
> 
> Cheers,
> -Greg
> 
>> From: minchaca <miinchaca at gmail.com>
>> Date: September 25, 2013 10:21:28 AM PDT
>> 
>> Dear Radiance List
>> 
>> I'm coming with another question that is probably too simple but still keeps me from moving to the next phase of  the 3Phase:
>> 
>> When I create the daylight matrix using genklemsamp & rtcontrib I obtain a file with only the header and sometimes some weird symbols ike : ?7?7?7?7?7?7
>>  
>>  If I use such file (*.dmx) with dctimestep I get the following Error messages :
>>  warning - unexpected data at the end of binary file results/window_SOUTH.dmx
>>  
>>  or
>>  fatal - unexpected EOS reading results/window_SOUTH.dmx
>>  
>>  my commands are just like in the Exercise 2 of the tutorial:
>>  genklemsamp -vd 0 -1 0 objects/window_S.rad | rtcontrib -c 1000 -e MF:4 -f reinhart.cal -b rbin -bn Nrbins -m sky_glow -faf model_dmx.oct > results/south.dmx
>> 
>> If I try to do the same in Windows I get:
>> 
>> Usage: vwright {offset|name}
>> Argument "" isn't numeric in multiplication (*) at genklemsamp.pl line 51
>> Argument "" isn't numeric in multiplication (*) at genklemsamp.pl line 51
>> Illegal division by zero at genklemsamp.pl line 51.
>> 
>>  I'll really appreciate your help! 
>> 
>> Thanks in advance!
>> 
>> Chantal.
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
> 
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131011/080f1545/attachment.html>

From miinchaca at gmail.com  Sat Oct 12 02:27:15 2013
From: miinchaca at gmail.com (minchaca)
Date: Sat, 12 Oct 2013 11:27:15 +0200
Subject: [Radiance-general] Three-Phase Method: dmx
In-Reply-To: <4A048E0E-97A3-4966-A951-5109E22D2C2E@lmi.net>
References: <CAO0Bi3W3LfV70CJMUgKgffVCoJ9jHWEcqjUBh8WEoty+m_F4mQ@mail.gmail.com>
	<DAA9876D-CDB2-4B80-B4A9-8237D7556158@lmi.net>
	<CAO0Bi3Vfm0ATaAevqu+m+GHP9bv-vWVHtAg9Y4EkCwSxELTiug@mail.gmail.com>
	<4A048E0E-97A3-4966-A951-5109E22D2C2E@lmi.net>
Message-ID: <CAO0Bi3UjcaGvqsyHjCVFCf8aFS2KxtpYPQ3Zux5-_xczB-v4ug@mail.gmail.com>

Thanks a lot Greg!! :)

Ch.


2013/10/11 Greg Ward <gregoryjward at gmail.com>

> Hi Chantal,
>
> Yes, you need the newer version of dctimestep.  You can find HEAD sources
> from the HTML interface at:
>
> http://www.radiance-online.org/cgi-bin/viewcvs.cgi/ray/src/#dirlist
>
> Getting to the appropriate "Download" link you find:
>
>
> http://www.radiance-online.org/cgi-bin/viewcvs.cgi/ray/src/util/dctimestep.c?revision=2.27
>
> Best,
> -Greg
>
> *From: *minchaca <miinchaca at gmail.com>
>
> *Date: *October 11, 2013 2:37:24 AM PDT
>
> *
> *
>
> Thanks a lot!! Indeed, after that correction I was able to create the *dmx
> * for the south window orientation.
>
> I take the opportunity to ask a simple question regarding *dctimestep*:
>
> when I tried to use it for annual calculations with -n 8760 I get a msg:
>
> Usage:dctimestep DCspec [ skyvec ]
> dctimestep Vspec Tbsdf.xml Dmat.dat [ skyvec ]
>
> I sounds to me that is not accepting the -n, so I guess that there might
> be a new version that it takes it.
>
> We have the 4.1 version released Nov 2011 installed in the server.
> I wonder if the source file of that 'dctimestep new version' its available
> somewhere the web to download?
>
> Thanks in advance!
>
> Chantal.
>
>
> 2013/9/25 Greg Ward <gregoryjward at gmail.com>
>
>> Hi Chantal,
>>
>> I'm not 100% sure, but I think you need to use ASCII data files under
>> Windows, because it doesn't track the exact End-of-File, which confuses
>> some programs.   Replace the -faf option in rtcontrib (which should be
>> rcontrib anyway) with -faa.
>>
>> Cheers,
>> -Greg
>>
>> *From: *minchaca <miinchaca at gmail.com>
>>
>> *Date: *September 25, 2013 10:21:28 AM PDT
>>
>> *
>> *
>>
>> Dear Radiance List
>>
>> I'm coming with another question that is probably too simple but still
>> keeps me from moving to the next phase of  the 3Phase:
>>
>> When I create the daylight matrix using genklemsamp & rtcontrib I obtain
>> a file with only the header and sometimes some weird symbols ike :
>> ?7?7?7?7?7?7
>>
>>  If I use such file (*.dmx) with dctimestep I get the following Error
>> messages :
>>  warning - unexpected data at the end of binary file
>> results/window_SOUTH.dmx
>>
>>  or
>>  fatal - unexpected EOS reading results/window_SOUTH.dmx
>>
>>  my commands are just like in the Exercise 2 of the tutorial:
>>  genklemsamp -vd 0 -1 0 objects/window_S.rad | rtcontrib -c 1000 -e MF:4
>> -f reinhart.cal -b rbin -bn Nrbins -m sky_glow -faf model_dmx.oct >
>> results/south.dmx
>>
>> If I try to do the same in Windows I get:
>>
>> Usage: vwright {offset|name}
>> Argument "" isn't numeric in multiplication (*) at genklemsamp.pl line 51
>> Argument "" isn't numeric in multiplication (*) at genklemsamp.pl line 51
>> Illegal division by zero at genklemsamp.pl line 51.
>>
>>  I'll really appreciate your help!
>>
>> Thanks in advance!
>>
>> Chantal.
>>
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131012/7a212b7c/attachment.html>

From gbetti at fosterandpartners.com  Tue Oct 15 02:15:49 2013
From: gbetti at fosterandpartners.com (Giovanni Betti)
Date: Tue, 15 Oct 2013 09:15:49 +0000
Subject: [Radiance-general] Environmental Design Analyst @ Foster and
	Partners
Message-ID: <9AE3DAF33501B04BA74EFAE9629663183621DA2D@CORP3011.CORPORATE.FOSTER.NETWORK>

Dear List,

There is a chance for a bright, talented young individual to join our London based team as Environmental Design Analyst in the Specialist Modelling Group at Foster+Partners.
We are looking for someone with a solid knowledge of lighting and daylighting simulation techniques to be involved in a number of world class projects.
Exceptional design skills are required, together with outstanding communication and presentation capabilities.

Your work will involve assisting the design teams in developing integrated designs, with a strong focus on the assessment and development of lighting and daylighting aspects of a project, balancing the aesthetic and technical requirements.
You will be immersed in a very creative and interdisciplinary team, which forms the core of R&D at Foster +Partners and that drives innovation on a number of high profile and unconventional projects. Our work constantly challenges the boundaries between architectural and engineering disciplines, striving for the achievement of tightly integrated, high performance building designs.
Our work includes projects of all scales from luminaire design to daylight availability assessment at a master planning scale, through lighting and daylighting assessment and design for a number of building typologies.

General Requirements:
Degree in Architecture or Engineering disciplines
Ability to understand and formulate design decisions and present them for discussion
Ability to use a variety of media in the development and documentation of a design project
Good interpersonal skills and the ability to work well in a team
Ability to take initiative in response to direction or instruction
Ability to work well under pressure and meet deadlines efficiently
A ?exible and open attitude towards new ways of working and commitment to independent, lifelong learning
Fluent English, written and spoken

Software Requirements
Advanced knowledge of Radiance and/or other lighting simulation tool
Proficiency in Rhinoceros and/or Microstation
Adobe Creative Suite
Ms Office
Scripting abilities a plus

If you are interested please send me a C.V. and portfolio of works at gbetti at fosterandpartners.com<mailto:gbetti at fosterandpartners.com>
For large portfolios (above 3MB) please send a link from a web based service as they could otherwise be blocked by the mailing system.

Best Regards,

Giovanni Betti


////////////////////////////////////////////////
Giovanni Betti

Associate Partner ? Specialist Modeling Group
Architect
Environmental Design Analyst

Foster + Partners
Riverside, 22 Hester Road
London SW11 4AN
T +44 (0)20 7738 0455
D +44 (0)20 3147 5705
F +44 (0)20 7738 1107
E gbetti at fosterandpartners.com
www.fosterandpartners.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131015/5e67abed/attachment.html>

From david.moroder at gmail.com  Tue Oct 22 06:45:47 2013
From: david.moroder at gmail.com (David Geisler-Moroder)
Date: Tue, 22 Oct 2013 15:45:47 +0200
Subject: [Radiance-general] Tone mapping for animation
Message-ID: <CAL-bo5EWL=NjbOrBTQcxpF-Q=FSqU=C_fjSL+Cx-gYWtfAqjOQ@mail.gmail.com>

Hi all,

I have a question concerning the tone mapping procedures implemented in the
Radiance tools.
For an animation of a full day I would like to get something similar that a
camera would do that just takes a picture every 5 minutes with the same
settings (exposure time and aperture). Rendering the images for every 5
minutes is not a problem, however, I stuck when trying to convert the HDRs
to some tonemapped images. As far as I got it, In ra_jpeg/hdr2jpeg no
exposure can be given at all, in ra_tiff/ra_bmp only relative exposures can
be applied.

Thus my question: is it possible to explicitly set the exposure used in the
tonemapping process with any tool in Radiance?

Thanks in advance!
David
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131022/4d184717/attachment.html>

From jedev at visarc.com  Tue Oct 22 07:05:15 2013
From: jedev at visarc.com (Jack de Valpine)
Date: Tue, 22 Oct 2013 10:05:15 -0400
Subject: [Radiance-general] Tone mapping for animation
In-Reply-To: <CAL-bo5EWL=NjbOrBTQcxpF-Q=FSqU=C_fjSL+Cx-gYWtfAqjOQ@mail.gmail.com>
References: <CAL-bo5EWL=NjbOrBTQcxpF-Q=FSqU=C_fjSL+Cx-gYWtfAqjOQ@mail.gmail.com>
Message-ID: <5266861B.5090302@visarc.com>

Hi David,

I am a little unclear on what you want to accomplish but here are a few 
thoughts.

 1. time series animation with constant exposure on successive frames -
    use pfilt -1 -e [constant exposure setting] for each frame
 2. time series animation with tone mapping function on successive
    frames - use pcond and phisto, phisto will compute a histogram
    across a series of frames pcond can then use the results from phisto
    to tone map the frames according to selected tone mapping operator,
    there is a an example in the man page for pcond

I think that maybe where I am confused by your description is that since 
Radiance output is already HDR, setting exposure is really a post 
process. I think that what you are looking for is the second option that 
I describe above.

Not sure if this answers your questions, but perhaps gives you some 
things to look into.

Best,

-Jack

-- 
Jack de Valpine
President

Visarc Incorporated
www.visarc.com

channeling technology for superior design and construction

On 10/22/2013 9:45 AM, David Geisler-Moroder wrote:
> Hi all,
>
> I have a question concerning the tone mapping procedures implemented 
> in the Radiance tools.
> For an animation of a full day I would like to get something similar 
> that a camera would do that just takes a picture every 5 minutes with 
> the same settings (exposure time and aperture). Rendering the images 
> for every 5 minutes is not a problem, however, I stuck when trying to 
> convert the HDRs to some tonemapped images. As far as I got it, In 
> ra_jpeg/hdr2jpeg no exposure can be given at all, in ra_tiff/ra_bmp 
> only relative exposures can be applied.
>
> Thus my question: is it possible to explicitly set the exposure used 
> in the tonemapping process with any tool in Radiance?
>
> Thanks in advance!
> David
>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131022/a6efb9e7/attachment.html>

From rob.guglielmetti at gmail.com  Tue Oct 22 07:43:42 2013
From: rob.guglielmetti at gmail.com (Rob Guglielmetti)
Date: Tue, 22 Oct 2013 08:43:42 -0600
Subject: [Radiance-general] Tone mapping for animation
In-Reply-To: <5266861B.5090302@visarc.com>
References: <CAL-bo5EWL=NjbOrBTQcxpF-Q=FSqU=C_fjSL+Cx-gYWtfAqjOQ@mail.gmail.com>
	<5266861B.5090302@visarc.com>
Message-ID: <D0E8FF16-C39D-4D38-8293-586EEC117BF6@gmail.com>

Hi all,

Yeah, it is a little unclear what you want. On the one hand if you want what a camera would do with fixed aperture and shutter speed, Jack's option one is correct. If you want to tonemap, we assume you want something like what we would see at each visual environment, and then jacks option two is the way to go. Phisto is very cool. Yet another one of those tools that make you realize how dense these Radiance images are!

-Rob

> On Oct 22, 2013, at 8:05 AM, Jack de Valpine <jedev at visarc.com> wrote:
> 
> Hi David,
> 
> I am a little unclear on what you want to accomplish but here are a few thoughts.
> time series animation with constant exposure on successive frames - use pfilt -1 -e [constant exposure setting] for each frame
> time series animation with tone mapping function on successive frames - use pcond and phisto, phisto will compute a histogram across a series of frames pcond can then use the           results from phisto to tone map the frames according to selected tone mapping operator, there is a an example in the man page for pcond
> I think that maybe where I am confused by your description is that since Radiance output is already HDR, setting exposure is really a post process. I think that what you are looking for is the second option that I describe above.
> Not sure if this answers your questions, but perhaps gives you some things to look into.
> 
> Best,
> 
> -Jack
> -- 
> Jack de Valpine
> President
> 
> Visarc Incorporated
> www.visarc.com
> 
> channeling technology for superior design and construction
> On 10/22/2013 9:45 AM, David Geisler-Moroder wrote:
>> Hi all,
>> 
>> I have a question concerning the tone mapping procedures implemented in the Radiance tools. 
>> For an animation of a full day I would like to get something similar that a camera would do that just takes a picture every 5 minutes with the same settings (exposure time and aperture).         Rendering the images for every 5 minutes is not a problem, however, I stuck when trying to convert the HDRs to some tonemapped images. As far as I got it, In ra_jpeg/hdr2jpeg no exposure can be given at all, in ra_tiff/ra_bmp only relative exposures can be applied.   
>> 
>> Thus my question: is it possible to explicitly set the exposure used in the tonemapping process with any tool in Radiance?
>> 
>> Thanks in advance!
>> David
>> 
>> 
>> 
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131022/ab2e4142/attachment.html>

From david.moroder at gmail.com  Tue Oct 22 08:14:04 2013
From: david.moroder at gmail.com (David Geisler-Moroder)
Date: Tue, 22 Oct 2013 17:14:04 +0200
Subject: [Radiance-general] Tone mapping for animation
In-Reply-To: <5266861B.5090302@visarc.com>
References: <CAL-bo5EWL=NjbOrBTQcxpF-Q=FSqU=C_fjSL+Cx-gYWtfAqjOQ@mail.gmail.com>
	<5266861B.5090302@visarc.com>
Message-ID: <CAL-bo5FiX2kZwzHXKcK8CLrr5eqydD6ffNELXW-pBKUPdnJDaQ@mail.gmail.com>

Hi Jack, hi Lars,

thanks a lot for the quick response!
Jack, your second hint exactly did what I was looking for. I tried to use
pcond first, but didn't think of the possibility to use a histogram...

Sorry, if my description was somehow cryptic, but you exactly found what I
wanted...

Just for information: the pfilt exposure corrections do not help in my case
because the tone-mapping that is done in the HDR2LDR conversion (with
hdr2jpeg / ra_tiff or similar) does the tone mapping for each single frame
independent from the other images. (But maybe I just got something terribly
wrong here...!?)

Thanks!
David



2013/10/22 Jack de Valpine <jedev at visarc.com>

>  Hi David,
>
> I am a little unclear on what you want to accomplish but here are a few
> thoughts.
>
>    1. time series animation with constant exposure on successive frames -
>    use pfilt -1 -e [constant exposure setting] for each frame
>     2. time series animation with tone mapping function on successive
>    frames - use pcond and phisto, phisto will compute a histogram across a
>    series of frames pcond can then use the results from phisto to tone map the
>    frames according to selected tone mapping operator, there is a an example
>    in the man page for pcond
>
> I think that maybe where I am confused by your description is that since
> Radiance output is already HDR, setting exposure is really a post process.
> I think that what you are looking for is the second option that I describe
> above.
>  Not sure if this answers your questions, but perhaps gives you some
> things to look into.
>
> Best,
>
> -Jack
>
> --
> Jack de Valpine
> President
>
> Visarc Incorporatedwww.visarc.com
>
> channeling technology for superior design and construction
>
> On 10/22/2013 9:45 AM, David Geisler-Moroder wrote:
>
>  Hi all,
>
>  I have a question concerning the tone mapping procedures implemented in
> the Radiance tools.
> For an animation of a full day I would like to get something similar that
> a camera would do that just takes a picture every 5 minutes with the same
> settings (exposure time and aperture). Rendering the images for every 5
> minutes is not a problem, however, I stuck when trying to convert the HDRs
> to some tonemapped images. As far as I got it, In ra_jpeg/hdr2jpeg no
> exposure can be given at all, in ra_tiff/ra_bmp only relative exposures can
> be applied.
>
>  Thus my question: is it possible to explicitly set the exposure used in
> the tonemapping process with any tool in Radiance?
>
>  Thanks in advance!
>  David
>
>
>
> _______________________________________________
> Radiance-general mailing listRadiance-general at radiance-online.orghttp://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131022/d1dbdf10/attachment-0001.html>

From jedev at visarc.com  Tue Oct 22 08:32:11 2013
From: jedev at visarc.com (Jack de Valpine)
Date: Tue, 22 Oct 2013 11:32:11 -0400
Subject: [Radiance-general] Tone mapping for animation
In-Reply-To: <CAL-bo5FiX2kZwzHXKcK8CLrr5eqydD6ffNELXW-pBKUPdnJDaQ@mail.gmail.com>
References: <CAL-bo5EWL=NjbOrBTQcxpF-Q=FSqU=C_fjSL+Cx-gYWtfAqjOQ@mail.gmail.com>	<5266861B.5090302@visarc.com>
	<CAL-bo5FiX2kZwzHXKcK8CLrr5eqydD6ffNELXW-pBKUPdnJDaQ@mail.gmail.com>
Message-ID: <52669A7B.7040602@visarc.com>

Hi David,

Great, glad it helped!

I have not used the hdr2jpeg utility so I am not really sure what it 
does. My impression is that it converts to a jpeg that contains hdr 
information. I do not think that it does tone mapping though. Perhaps 
others can weigh in...

Best,

-Jack

-- 
Jack de Valpine
President

Visarc Incorporated
www.visarc.com

channeling technology for superior design and construction

On 10/22/2013 11:14 AM, David Geisler-Moroder wrote:
> Hi Jack, hi Lars,
>
> thanks a lot for the quick response!
> Jack, your second hint exactly did what I was looking for. I tried to 
> use pcond first, but didn't think of the possibility to use a histogram...
>
> Sorry, if my description was somehow cryptic, but you exactly found 
> what I wanted...
>
> Just for information: the pfilt exposure corrections do not help in my 
> case because the tone-mapping that is done in the HDR2LDR conversion 
> (with hdr2jpeg / ra_tiff or similar) does the tone mapping for each 
> single frame independent from the other images. (But maybe I just got 
> something terribly wrong here...!?)
>
> Thanks!
> David
>
>
>
> 2013/10/22 Jack de Valpine <jedev at visarc.com <mailto:jedev at visarc.com>>
>
>     Hi David,
>
>     I am a little unclear on what you want to accomplish but here are
>     a few thoughts.
>
>      1. time series animation with constant exposure on successive
>         frames - use pfilt -1 -e [constant exposure setting] for each
>         frame
>      2. time series animation with tone mapping function on successive
>         frames - use pcond and phisto, phisto will compute a histogram
>         across a series of frames pcond can then use the results from
>         phisto to tone map the frames according to selected tone
>         mapping operator, there is a an example in the man page for pcond
>
>     I think that maybe where I am confused by your description is that
>     since Radiance output is already HDR, setting exposure is really a
>     post process. I think that what you are looking for is the second
>     option that I describe above.
>
>     Not sure if this answers your questions, but perhaps gives you
>     some things to look into.
>
>     Best,
>
>     -Jack
>
>     -- 
>     Jack de Valpine
>     President
>
>     Visarc Incorporated
>     www.visarc.com  <http://www.visarc.com>
>
>     channeling technology for superior design and construction
>
>     On 10/22/2013 9:45 AM, David Geisler-Moroder wrote:
>>     Hi all,
>>
>>     I have a question concerning the tone mapping procedures
>>     implemented in the Radiance tools.
>>     For an animation of a full day I would like to get something
>>     similar that a camera would do that just takes a picture every 5
>>     minutes with the same settings (exposure time and aperture).
>>     Rendering the images for every 5 minutes is not a problem,
>>     however, I stuck when trying to convert the HDRs to some
>>     tonemapped images. As far as I got it, In ra_jpeg/hdr2jpeg no
>>     exposure can be given at all, in ra_tiff/ra_bmp only relative
>>     exposures can be applied.
>>
>>     Thus my question: is it possible to explicitly set the exposure
>>     used in the tonemapping process with any tool in Radiance?
>>
>>     Thanks in advance!
>>     David
>>
>>
>>
>>     _______________________________________________
>>     Radiance-general mailing list
>>     Radiance-general at radiance-online.org  <mailto:Radiance-general at radiance-online.org>
>>     http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131022/81db76c5/attachment.html>

From david.moroder at gmail.com  Tue Oct 22 08:50:27 2013
From: david.moroder at gmail.com (David Geisler-Moroder)
Date: Tue, 22 Oct 2013 17:50:27 +0200
Subject: [Radiance-general] Tone mapping for animation
In-Reply-To: <52669A7B.7040602@visarc.com>
References: <CAL-bo5EWL=NjbOrBTQcxpF-Q=FSqU=C_fjSL+Cx-gYWtfAqjOQ@mail.gmail.com>
	<5266861B.5090302@visarc.com>
	<CAL-bo5FiX2kZwzHXKcK8CLrr5eqydD6ffNELXW-pBKUPdnJDaQ@mail.gmail.com>
	<52669A7B.7040602@visarc.com>
Message-ID: <CAL-bo5HeAAsf5nHtrHaV1tZc340SyGuWOvCSOSk3r9YN0jMKhg@mail.gmail.com>

Hi Jack,

I guess Greg is the only one to answer that question.
However, I guess some tone mapping has to be done as the HDR-JPG format is
backwards compatible and all viewers that read JPGs also read that. So
somehow they need to get get the tonemapped information...

Cheers,
David


2013/10/22 Jack de Valpine <jedev at visarc.com>

>  Hi David,
>
> Great, glad it helped!
>
> I have not used the hdr2jpeg utility so I am not really sure what it does.
> My impression is that it converts to a jpeg that contains hdr information.
> I do not think that it does tone mapping though. Perhaps others can weigh
> in...
>
>
> Best,
>
> -Jack
>
> --
> Jack de Valpine
> President
>
> Visarc Incorporatedwww.visarc.com
>
> channeling technology for superior design and construction
>
> On 10/22/2013 11:14 AM, David Geisler-Moroder wrote:
>
>    Hi Jack, hi Lars,
>
>  thanks a lot for the quick response!
>  Jack, your second hint exactly did what I was looking for. I tried to use
> pcond first, but didn't think of the possibility to use a histogram...
>
>  Sorry, if my description was somehow cryptic, but you exactly found what
> I wanted...
>
>  Just for information: the pfilt exposure corrections do not help in my
> case because the tone-mapping that is done in the HDR2LDR conversion (with
> hdr2jpeg / ra_tiff or similar) does the tone mapping for each single frame
> independent from the other images. (But maybe I just got something terribly
> wrong here...!?)
>
>  Thanks!
>  David
>
>
>
> 2013/10/22 Jack de Valpine <jedev at visarc.com>
>
>>  Hi David,
>>
>> I am a little unclear on what you want to accomplish but here are a few
>> thoughts.
>>
>>    1. time series animation with constant exposure on successive frames
>>    - use pfilt -1 -e [constant exposure setting] for each frame
>>     2. time series animation with tone mapping function on successive
>>    frames - use pcond and phisto, phisto will compute a histogram across a
>>    series of frames pcond can then use the results from phisto to tone map the
>>    frames according to selected tone mapping operator, there is a an example
>>    in the man page for pcond
>>
>> I think that maybe where I am confused by your description is that since
>> Radiance output is already HDR, setting exposure is really a post process.
>> I think that what you are looking for is the second option that I describe
>> above.
>>  Not sure if this answers your questions, but perhaps gives you some
>> things to look into.
>>
>> Best,
>>
>> -Jack
>>
>> --
>> Jack de Valpine
>> President
>>
>> Visarc Incorporatedwww.visarc.com
>>
>> channeling technology for superior design and construction
>>
>>  On 10/22/2013 9:45 AM, David Geisler-Moroder wrote:
>>
>>   Hi all,
>>
>>  I have a question concerning the tone mapping procedures implemented in
>> the Radiance tools.
>> For an animation of a full day I would like to get something similar that
>> a camera would do that just takes a picture every 5 minutes with the same
>> settings (exposure time and aperture). Rendering the images for every 5
>> minutes is not a problem, however, I stuck when trying to convert the HDRs
>> to some tonemapped images. As far as I got it, In ra_jpeg/hdr2jpeg no
>> exposure can be given at all, in ra_tiff/ra_bmp only relative exposures can
>> be applied.
>>
>>  Thus my question: is it possible to explicitly set the exposure used in
>> the tonemapping process with any tool in Radiance?
>>
>>  Thanks in advance!
>>  David
>>
>>
>>
>>  _______________________________________________
>> Radiance-general mailing listRadiance-general at radiance-online.orghttp://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
>>
>
>
> _______________________________________________
> Radiance-general mailing listRadiance-general at radiance-online.orghttp://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131022/cc6e9ece/attachment-0001.html>

From Robert.Guglielmetti at nrel.gov  Tue Oct 22 08:58:47 2013
From: Robert.Guglielmetti at nrel.gov (Guglielmetti, Robert)
Date: Tue, 22 Oct 2013 09:58:47 -0600
Subject: [Radiance-general] Tone mapping for animation
In-Reply-To: <CAL-bo5HeAAsf5nHtrHaV1tZc340SyGuWOvCSOSk3r9YN0jMKhg@mail.gmail.com>
References: <CAL-bo5EWL=NjbOrBTQcxpF-Q=FSqU=C_fjSL+Cx-gYWtfAqjOQ@mail.gmail.com>
	<5266861B.5090302@visarc.com>
	<CAL-bo5FiX2kZwzHXKcK8CLrr5eqydD6ffNELXW-pBKUPdnJDaQ@mail.gmail.com>
	<52669A7B.7040602@visarc.com>
	<CAL-bo5HeAAsf5nHtrHaV1tZc340SyGuWOvCSOSk3r9YN0jMKhg@mail.gmail.com>
Message-ID: <FFF56A6D37A3A54F91A03601AC22DA32263ABB8925@MAILBOX2.nrel.gov>

Yep, it's a tonemapped jpg that retains (in a lossy way) the HDR info, so you can share these with people sans HDR image viewers and still retain backward compatibility (and enjoy a smaller file size). The paper is here:

http://www.anyhere.com/gward/papers/cic05.pdf

I do not know exactly what operator is used by hdr2jpeg...

- Rob


From: David Geisler-Moroder [mailto:david.moroder at gmail.com]
Sent: Tuesday, October 22, 2013 9:50 AM
To: Radiance general discussion
Subject: Re: [Radiance-general] Tone mapping for animation

Hi Jack,
I guess Greg is the only one to answer that question.
However, I guess some tone mapping has to be done as the HDR-JPG format is backwards compatible and all viewers that read JPGs also read that. So somehow they need to get get the tonemapped information...
Cheers,
David

2013/10/22 Jack de Valpine <jedev at visarc.com<mailto:jedev at visarc.com>>
Hi David,

Great, glad it helped!

I have not used the hdr2jpeg utility so I am not really sure what it does. My impression is that it converts to a jpeg that contains hdr information. I do not think that it does tone mapping though. Perhaps others can weigh in...


Best,

-Jack


--

Jack de Valpine

President



Visarc Incorporated

www.visarc.com<http://www.visarc.com>



channeling technology for superior design and construction
On 10/22/2013 11:14 AM, David Geisler-Moroder wrote:
Hi Jack, hi Lars,
thanks a lot for the quick response!
Jack, your second hint exactly did what I was looking for. I tried to use pcond first, but didn't think of the possibility to use a histogram...
Sorry, if my description was somehow cryptic, but you exactly found what I wanted...
Just for information: the pfilt exposure corrections do not help in my case because the tone-mapping that is done in the HDR2LDR conversion (with hdr2jpeg / ra_tiff or similar) does the tone mapping for each single frame independent from the other images. (But maybe I just got something terribly wrong here...!?)
Thanks!
David


2013/10/22 Jack de Valpine <jedev at visarc.com<mailto:jedev at visarc.com>>
Hi David,

I am a little unclear on what you want to accomplish but here are a few thoughts.

 1.  time series animation with constant exposure on successive frames - use pfilt -1 -e [constant exposure setting] for each frame
 2.  time series animation with tone mapping function on successive frames - use pcond and phisto, phisto will compute a histogram across a series of frames pcond can then use the results from phisto to tone map the frames according to selected tone mapping operator, there is a an example in the man page for pcond

I think that maybe where I am confused by your description is that since Radiance output is already HDR, setting exposure is really a post process. I think that what you are looking for is the second option that I describe above.
Not sure if this answers your questions, but perhaps gives you some things to look into.

Best,

-Jack


--

Jack de Valpine

President



Visarc Incorporated

www.visarc.com<http://www.visarc.com>



channeling technology for superior design and construction
On 10/22/2013 9:45 AM, David Geisler-Moroder wrote:
Hi all,
I have a question concerning the tone mapping procedures implemented in the Radiance tools.
For an animation of a full day I would like to get something similar that a camera would do that just takes a picture every 5 minutes with the same settings (exposure time and aperture). Rendering the images for every 5 minutes is not a problem, however, I stuck when trying to convert the HDRs to some tonemapped images. As far as I got it, In ra_jpeg/hdr2jpeg no exposure can be given at all, in ra_tiff/ra_bmp only relative exposures can be applied.

Thus my question: is it possible to explicitly set the exposure used in the tonemapping process with any tool in Radiance?
Thanks in advance!
David



_______________________________________________

Radiance-general mailing list

Radiance-general at radiance-online.org<mailto:Radiance-general at radiance-online.org>

http://www.radiance-online.org/mailman/listinfo/radiance-general




_______________________________________________

Radiance-general mailing list

Radiance-general at radiance-online.org<mailto:Radiance-general at radiance-online.org>

http://www.radiance-online.org/mailman/listinfo/radiance-general


_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org<mailto:Radiance-general at radiance-online.org>
http://www.radiance-online.org/mailman/listinfo/radiance-general

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131022/bdcbb815/attachment.html>

From gregoryjward at gmail.com  Tue Oct 22 09:11:45 2013
From: gregoryjward at gmail.com (Greg Ward)
Date: Tue, 22 Oct 2013 09:11:45 -0700
Subject: [Radiance-general] Tone mapping for animation
In-Reply-To: <CAL-bo5HeAAsf5nHtrHaV1tZc340SyGuWOvCSOSk3r9YN0jMKhg@mail.gmail.com>
References: <CAL-bo5EWL=NjbOrBTQcxpF-Q=FSqU=C_fjSL+Cx-gYWtfAqjOQ@mail.gmail.com>
	<5266861B.5090302@visarc.com>
	<CAL-bo5FiX2kZwzHXKcK8CLrr5eqydD6ffNELXW-pBKUPdnJDaQ@mail.gmail.com>
	<52669A7B.7040602@visarc.com>
	<CAL-bo5HeAAsf5nHtrHaV1tZc340SyGuWOvCSOSk3r9YN0jMKhg@mail.gmail.com>
Message-ID: <A3CAC87B-B214-4E48-B5B0-072C309579F3@lmi.net>

I don't use hdr2jpeg myself, and it isn't distributed with Radiance.  Depending on which version you have, it applies either a Reinhard TMO or a variant of the histogram adjustment operator in pcond, but there's no way to tell it to use a specific curve as you can with the pcond -I option Jack mentioned.  The latter technique with phisto is what I generally use if I want a sequence exposed the same.  And, you can go on using the same histogram for future frames so long as they don't change too much from the range of past frames.

Cheers,
-Greg

> From: David Geisler-Moroder <david.moroder at gmail.com>
> Date: October 22, 2013 8:50:27 AM PDT
> 
> Hi Jack,
> 
> I guess Greg is the only one to answer that question.
> However, I guess some tone mapping has to be done as the HDR-JPG format is backwards compatible and all viewers that read JPGs also read that. So somehow they need to get get the tonemapped information...
> 
> Cheers,
> David
> 
> 
> 2013/10/22 Jack de Valpine <jedev at visarc.com>
> Hi David,
> 
> Great, glad it helped!
> 
> I have not used the hdr2jpeg utility so I am not really sure what it does. My impression is that it converts to a jpeg that contains hdr information. I do not think that it does tone mapping though. Perhaps others can weigh in...
> 
> 
> Best,
> 
> -Jack
> -- 
> Jack de Valpine
> President
> 
> Visarc Incorporated
> www.visarc.com
> 
> channeling technology for superior design and construction
> On 10/22/2013 11:14 AM, David Geisler-Moroder wrote:
>> Hi Jack, hi Lars,
>> 
>> thanks a lot for the quick response!
>> Jack, your second hint exactly did what I was looking for. I tried to use pcond first, but didn't think of the possibility to use a histogram...
>> 
>> Sorry, if my description was somehow cryptic, but you exactly found what I wanted...
>> 
>> Just for information: the pfilt exposure corrections do not help in my case because the tone-mapping that is done in the HDR2LDR conversion (with hdr2jpeg / ra_tiff or similar) does the tone mapping for each single frame independent from the other images. (But maybe I just got something terribly wrong here...!?)
>> 
>> Thanks!
>> David
>> 
>> 
>> 
>> 2013/10/22 Jack de Valpine <jedev at visarc.com>
>> Hi David,
>> 
>> I am a little unclear on what you want to accomplish but here are a few thoughts.
>> time series animation with constant exposure on successive frames - use pfilt -1 -e [constant exposure setting] for each frame
>> time series animation with tone mapping function on successive frames - use pcond and phisto, phisto will compute a histogram across a series of frames pcond can then use the results from phisto to tone map the frames according to selected tone mapping operator, there is a an example in the man page for pcond
>> I think that maybe where I am confused by your description is that since Radiance output is already HDR, setting exposure is really a post process. I think that what you are looking for is the second option that I describe above.
>> Not sure if this answers your questions, but perhaps gives you some things to look into.
>> 
>> Best,
>> 
>> -Jack
>> -- 
>> Jack de Valpine
>> President
>> 
>> Visarc Incorporated
>> www.visarc.com
>> 
>> channeling technology for superior design and construction
>> On 10/22/2013 9:45 AM, David Geisler-Moroder wrote:
>>> Hi all,
>>> 
>>> I have a question concerning the tone mapping procedures implemented in the Radiance tools. 
>>> For an animation of a full day I would like to get something similar that a camera would do that just takes a picture every 5 minutes with the same settings (exposure time and aperture). Rendering the images for every 5 minutes is not a problem, however, I stuck when trying to convert the HDRs to some tonemapped images. As far as I got it, In ra_jpeg/hdr2jpeg no exposure can be given at all, in ra_tiff/ra_bmp only relative exposures can be applied.   
>>> 
>>> Thus my question: is it possible to explicitly set the exposure used in the tonemapping process with any tool in Radiance?
>>> 
>>> Thanks in advance!
>>> David
>>> 
>>> 
>>> 
>>> _______________________________________________
>>> Radiance-general mailing list
>>> Radiance-general at radiance-online.org
>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>> 
>> 
>> 
>> 
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
> 
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
> 
> 
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131022/39f534fb/attachment-0001.html>

From david.moroder at gmail.com  Tue Oct 22 09:45:12 2013
From: david.moroder at gmail.com (David Geisler-Moroder)
Date: Tue, 22 Oct 2013 18:45:12 +0200
Subject: [Radiance-general] Tone mapping for animation
In-Reply-To: <A3CAC87B-B214-4E48-B5B0-072C309579F3@lmi.net>
References: <CAL-bo5EWL=NjbOrBTQcxpF-Q=FSqU=C_fjSL+Cx-gYWtfAqjOQ@mail.gmail.com>
	<5266861B.5090302@visarc.com>
	<CAL-bo5FiX2kZwzHXKcK8CLrr5eqydD6ffNELXW-pBKUPdnJDaQ@mail.gmail.com>
	<52669A7B.7040602@visarc.com>
	<CAL-bo5HeAAsf5nHtrHaV1tZc340SyGuWOvCSOSk3r9YN0jMKhg@mail.gmail.com>
	<A3CAC87B-B214-4E48-B5B0-072C309579F3@lmi.net>
Message-ID: <CAL-bo5FmtKpQexVNdmtQYhM6Tk94CVaAcmjGEpZZiF-VbuJgKQ@mail.gmail.com>

Perfect, thanks for the clarification Greg!

Another short note:
I just found out that one thing that also made my life hard with getting
the scene constantly exposed was the inclusion of a time stamp in the image
with psign before sending the image through pcond... stupid error on my
side as this introduces virtual luminances that are not in the scene.


2013/10/22 Greg Ward <gregoryjward at gmail.com>

> I don't use hdr2jpeg myself, and it isn't distributed with Radiance.
>  Depending on which version you have, it applies either a Reinhard TMO or a
> variant of the histogram adjustment operator in pcond, but there's no way
> to tell it to use a specific curve as you can with the pcond -I option Jack
> mentioned.  The latter technique with phisto is what I generally use if I
> want a sequence exposed the same.  And, you can go on using the same
> histogram for future frames so long as they don't change too much from the
> range of past frames.
>
> Cheers,
> -Greg
>
> *From: *David Geisler-Moroder <david.moroder at gmail.com>
>
> *Date: *October 22, 2013 8:50:27 AM PDT
>
> *
> *
>
> Hi Jack,
>
> I guess Greg is the only one to answer that question.
> However, I guess some tone mapping has to be done as the HDR-JPG format is
> backwards compatible and all viewers that read JPGs also read that. So
> somehow they need to get get the tonemapped information...
>
> Cheers,
> David
>
>
> 2013/10/22 Jack de Valpine <jedev at visarc.com>
>
>>  Hi David,
>>
>> Great, glad it helped!
>>
>> I have not used the hdr2jpeg utility so I am not really sure what it
>> does. My impression is that it converts to a jpeg that contains hdr
>> information. I do not think that it does tone mapping though. Perhaps
>> others can weigh in...
>>
>>
>> Best,
>>
>> -Jack
>>
>> --
>> Jack de Valpine
>> President
>>
>> Visarc Incorporatedwww.visarc.com
>>
>> channeling technology for superior design and construction
>>
>> On 10/22/2013 11:14 AM, David Geisler-Moroder wrote:
>>
>>    Hi Jack, hi Lars,
>>
>>  thanks a lot for the quick response!
>>  Jack, your second hint exactly did what I was looking for. I tried to
>> use pcond first, but didn't think of the possibility to use a histogram...
>>
>>  Sorry, if my description was somehow cryptic, but you exactly found what
>> I wanted...
>>
>>  Just for information: the pfilt exposure corrections do not help in my
>> case because the tone-mapping that is done in the HDR2LDR conversion (with
>> hdr2jpeg / ra_tiff or similar) does the tone mapping for each single frame
>> independent from the other images. (But maybe I just got something terribly
>> wrong here...!?)
>>
>>  Thanks!
>>  David
>>
>>
>>
>> 2013/10/22 Jack de Valpine <jedev at visarc.com>
>>
>>>  Hi David,
>>>
>>> I am a little unclear on what you want to accomplish but here are a few
>>> thoughts.
>>>
>>>    1. time series animation with constant exposure on successive frames
>>>    - use pfilt -1 -e [constant exposure setting] for each frame
>>>     2. time series animation with tone mapping function on successive
>>>    frames - use pcond and phisto, phisto will compute a histogram across a
>>>    series of frames pcond can then use the results from phisto to tone map the
>>>    frames according to selected tone mapping operator, there is a an example
>>>    in the man page for pcond
>>>
>>> I think that maybe where I am confused by your description is that since
>>> Radiance output is already HDR, setting exposure is really a post process.
>>> I think that what you are looking for is the second option that I describe
>>> above.
>>>  Not sure if this answers your questions, but perhaps gives you some
>>> things to look into.
>>>
>>> Best,
>>>
>>> -Jack
>>>
>>> --
>>> Jack de Valpine
>>> President
>>>
>>> Visarc Incorporatedwww.visarc.com
>>>
>>> channeling technology for superior design and construction
>>>
>>>  On 10/22/2013 9:45 AM, David Geisler-Moroder wrote:
>>>
>>>   Hi all,
>>>
>>>  I have a question concerning the tone mapping procedures implemented in
>>> the Radiance tools.
>>> For an animation of a full day I would like to get something similar
>>> that a camera would do that just takes a picture every 5 minutes with the
>>> same settings (exposure time and aperture). Rendering the images for every
>>> 5 minutes is not a problem, however, I stuck when trying to convert the
>>> HDRs to some tonemapped images. As far as I got it, In ra_jpeg/hdr2jpeg no
>>> exposure can be given at all, in ra_tiff/ra_bmp only relative exposures can
>>> be applied.
>>>
>>>  Thus my question: is it possible to explicitly set the exposure used
>>> in the tonemapping process with any tool in Radiance?
>>>
>>>  Thanks in advance!
>>>  David
>>>
>>>
>>>
>>>  _______________________________________________
>>> Radiance-general mailing listRadiance-general at radiance-online.orghttp://www.radiance-online.org/mailman/listinfo/radiance-general
>>>
>>>
>>>
>>
>>
>> _______________________________________________
>> Radiance-general mailing listRadiance-general at radiance-online.orghttp://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
>
>  _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131022/43ea3a36/attachment.html>

From gregoryjward at gmail.com  Tue Oct 22 10:17:29 2013
From: gregoryjward at gmail.com (Greg Ward)
Date: Tue, 22 Oct 2013 10:17:29 -0700
Subject: [Radiance-general] Tone mapping for animation
In-Reply-To: <CAL-bo5FmtKpQexVNdmtQYhM6Tk94CVaAcmjGEpZZiF-VbuJgKQ@mail.gmail.com>
References: <CAL-bo5EWL=NjbOrBTQcxpF-Q=FSqU=C_fjSL+Cx-gYWtfAqjOQ@mail.gmail.com>
	<5266861B.5090302@visarc.com>
	<CAL-bo5FiX2kZwzHXKcK8CLrr5eqydD6ffNELXW-pBKUPdnJDaQ@mail.gmail.com>
	<52669A7B.7040602@visarc.com>
	<CAL-bo5HeAAsf5nHtrHaV1tZc340SyGuWOvCSOSk3r9YN0jMKhg@mail.gmail.com>
	<A3CAC87B-B214-4E48-B5B0-072C309579F3@lmi.net>
	<CAL-bo5FmtKpQexVNdmtQYhM6Tk94CVaAcmjGEpZZiF-VbuJgKQ@mail.gmail.com>
Message-ID: <0D3E6E1E-AD72-41C5-BBA9-B66B6D75E2F4@lmi.net>

Indeed.  The usual way of getting a label into an image is using pcompos, which strips the image of exposure information that pcond needs to do its job.  Since the output of pcond in most cases has lost its useful luminance information, it works well to apply the label at that point and/or convert to some non-HDR image type via ra_whatever.

Cheers,
-Greg

> From: David Geisler-Moroder <david.moroder at gmail.com>
> Date: October 22, 2013 9:45:12 AM PDT
> 
> Perfect, thanks for the clarification Greg!
> 
> Another short note: 
> I just found out that one thing that also made my life hard with getting the scene constantly exposed was the inclusion of a time stamp in the image with psign before sending the image through pcond... stupid error on my side as this introduces virtual luminances that are not in the scene. 
> 
> 
> 2013/10/22 Greg Ward <gregoryjward at gmail.com>
> I don't use hdr2jpeg myself, and it isn't distributed with Radiance.  Depending on which version you have, it applies either a Reinhard TMO or a variant of the histogram adjustment operator in pcond, but there's no way to tell it to use a specific curve as you can with the pcond -I option Jack mentioned.  The latter technique with phisto is what I generally use if I want a sequence exposed the same.  And, you can go on using the same histogram for future frames so long as they don't change too much from the range of past frames.
> 
> Cheers,
> -Greg
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20131022/00be9c26/attachment.html>

