From achim.geissler at intergga.ch  Wed Jun  1 01:08:31 2016
From: achim.geissler at intergga.ch (Achim Geissler)
Date: Wed, 1 Jun 2016 10:08:31 +0200
Subject: [Radiance-general] genskyvec with HDR sky view?
In-Reply-To: <49291F00-43FF-4140-8950-B53712BAC512@lmi.net>
References: <AFCAEC0C-40CC-46AD-A28E-AEAD6276E961@intergga.ch>	<DCBD49C2-94A3-4545-A5D0-A9669F311BC9@lmi.net>	<001201d1ba84$b372a720$1a57f560$@intergga.ch>
	<49291F00-43FF-4140-8950-B53712BAC512@lmi.net>
Message-ID: <001501d1bbdc$caeaf4d0$60c0de70$@intergga.ch>

Hi Greg,

sorry to be somehow seemingly rubbing you the wrong way - I can't remember
you ever telling anybody else simply to "give up" :o( . It is definitely not
intentional (and I may note here that I am not a native English
speaker/writer).

The formatting was O.K. with html mail format. Whatever.

The Photosphere stuff was simply to try to give some information on the HDR
in respond to your statements in regard to same (kind of "prove" that it is
actually a Radiance readable HDR ...).

The comments on orienting the HDR are noted. I accept that if I do it right,
it should be correct  ;o)

I wasn't planning to rewrite genskyvec.pl, but you have me confused on how I
should "prepare a sky file it will accept" - which is clearly my goal -
without understanding at least partially how it works / what the data flow
is / what it needs.

Actually, the number of the warnings increased significantly and no result
was obtained. With skyfunc_hdr a (not very useful) result was generated with
"some" identical warning messages.

@Andy: Incidentally, this is in regard to one step before tackling genskyvec
again, I am trying to generate a view of a scene via "sky_glow source sky"
based on the HDR ... the scene has a ground plane, but does have a "hole"
between this and the sky (which works with "normal" skies). I'll try your
suggestion for the sky definition, thanks!

Skymap.cal is
===
u = 1 - (0.5 + DDx *r);
v = 0.5 + DDy *r;

r = if(DD, 0.707106781*(sin(acos(DDz)/2))/DD,0);

DD = sqrt(DDx*DDx + DDy*DDy);

DDy = Py*norm;
DDx = Px*norm;
DDz = Pz*norm;

norm = 1/sqrt(Py*Py + Px*Px + Pz*Pz);
===

I'll go back to RWR again and see what I can learn.

Thanks.

Best
Achim


-----Urspr?ngliche Nachricht-----
Von: Greg Ward [mailto:gregoryjward at gmail.com] 
Gesendet: Mittwoch, 1. Juni 2016 00:18
An: Radiance general discussion
Betreff: Re: [Radiance-general] genskyvec with HDR sky view?

Hi Achim,

I'll answer inline again, making a bad formatting job look even worse....

> From: "Achim Geissler" <achim.geissler at intergga.ch>
> Date: May 30, 2016 8:05:25 AM PDT
> 
> Hi Greg,
> 
> thanks for the pointers. I am afraid, though, that I was unable to 
> really make heads or tails of them.
> a) HDR file (Photosphere)
> 	i, the (test) HDR gives min/max values in falsecolor view of 39 to 
> 2900, whatever the unit, there
> 	ii, it gives histogram min/max values  for Luminance of 34.8 to
> 4.43E+06
> 	iii, it does not seem to be clipped

I don't know what (i), (ii) and (iii) refer to, if anything.  Are these
particular processes you have tried?  If so, what are they?

Typically, falsecolor and Photosphere report photometric values (i.e.,
radiance values times 179 lumens/watt efficacy).

> b) There is a sun (albeit behind a thin cloud cover). Simply adding a 
> sun definition to my sky description did not really change anything,
though.
> Also, at this point I do not know which r,g,b radiance values to use 
> for the solar "light" material and do these influence the result? And, 
> actually, how to exactly position the HDR so that the sun positions tally.

If you have your sky turned the right way around, so that the Z-axis points
up, Y-axis points north, and X-axis points east, then positioning the sun is
a matter of running gensky with the appropriate date/time and global
position parameters, and extracting the description it generates.  You can
adjust the solar radiance values to match the global-diffuse measured that
day using the -R option to gensky.

> c) I took a look at the genskyvec.pl script, however, I am not 
> perl-literate so that is a bit difficult. I seem to be missing out on 
> where this script >could< use values from the HDR file to generate the 
> sky vectors. Part of the code seems to be a copy of the setting up of
patches from reinhart.cal.
> Also, the "skyfunc glow skyglow" and "skyglow source sky" are written 
> to the
> (an) octree in the script. Can I ignore that? Or does that let me 
> leave these definitions out of my sky description? Which definition has
precedent?
> I can't really see where the "skybright.cal" values from a standard 
> gensky sky would come into play - this should be what is replaced by 
> values from the HDR?

I'm not suggesting you rewrite genskyvec.  Rather, I'm suggesting that you
prepare a sky file it will accept and run it on that file.  If this doesn't
make sense, then I suggest you give up.

> d) using the sky description as below but with "skyfunc" gives
> rpict: warning - compute error for colorpict "skyfunc"
> rpict: Division by zero
> when trying to generate a view of a scene.

I don't know why globally replacing "skyfunc_hdr" with "skyfunc" in your
file should cause new errors.  You must have done something else, or the
original run would have generated the same errors.  I don't know what's in
"map_sky.cal", which is the likely cause.

> I must admit the flow of data (input / output) in all the definitions 
> is a bit of a mystery, for me. I did find a kind of description for 
> colorpict in p_data.c, but that didn't really help, sadly. Looking at 
> your code, I get the feeling I am not literate in any programming 
> language ... :o(

Well, it's not particularly transparent, I will grant you.  There's this
back-and-forth between the ray tracing and the scene description, such that
when a material is intersected, it queries its modifiers, which calls back
to your map_sky.cal file in a rather convoluted fashion.

You should look through Chapter 4 of "Rendering with Radiance."  Starting at
Section 4.1.4, we talk about how the interaction between rendering and .cal
files operates.

> If you (or, of course, anyone else out there that has done this 
> before) can give any further help or tips, it would be much appreciated.
> 
> Best
> Achim
> 
> 
> -----Urspr?ngliche Nachricht-----
> Von: Greg Ward [mailto:gregoryjward at gmail.com]
> Gesendet: Samstag, 28. Mai 2016 01:27
> An: Radiance general discussion
> Betreff: Re: [Radiance-general] genskyvec with HDR sky view?
> 
> Hi Achim,
> 
> I wouldn't call what you are trying to do "easy," even if others have 
> done it.  Your HDR file has to be in the correct units or scaled by 
> the right amount to get calibrated radiance values, and even then, the 
> sun is usually out of range(clipped) and won't be properly sampled if it
is a clear sky.
> 
> As you noted, such a sky cannot be given as input to genskyvec, which 
> expects a very specific set of primitives output by gensky or gendaylit.
> Specifically, you need to name your colorpict pattern "skyfunc" and 
> add a solar source if the sky is sunny.  You could try to modify your 
> description to match, but you'd have to look at the Perl script 
> src/util/genskyvec.pl to figure out how to satisfy the input requirements.
> 
> Once you have a sky description, you can use rtrace with the -I option 
> to compute hemispherical irradiance, from which you can create an 
> adjustment factor to apply to your glow based on horizontal irradiance.
> 
> It's all possible, but the details are not very straightforward.
> 
> Best,
> -Greg
> 
>> From: Achim Geissler <achim.geissler at intergga.ch>
>> Date: May 27, 2016 12:29:35 PM PDT
>> 
>> Hi all,
>> 
>> after searching high and low without clear results apart from a lot 
>> of
> pointers that ?everybody seems to be doing it? (so it should actually 
> be easy and I am probably missing the forest due to seeing trees, as 
> they say) a short question: The goal is to use HDR (fisheye) views of 
> the sky for radiance calculations. All I could manage to date are 
> pretty pictures with HDR skies. Ideally, the workflow would be ?the 
> same? as when using a sky from gensky or gendaylit. E.g., it would be 
> nice to be able to generate the sky vectors (genskyvec) from the HDR 
> sky view. Is that possible? How? Trying to simply pipe a sky 
> definition along the lines of
>> 
>> void colorpict skyfunc_hdr
>> 7 red green blue sky_image.hdr map_sky.cal u v
>> 0
>> 0
>> 
>> skyfunc_hdr glow sky_glow_hdr
>> 0
>> 0
>> 4 1 1 1 0
>> 
>> sky_glow_hdr source sky_hdr
>> 0
>> 0
>> 4 0 0 1 180
>> 
>> into genskyvec didn?t work - well, would have been too simple (the
> map_sky.cal is from the PhD by Coralie Cauwerts, 2013). The following 
> approaches resulted in the ?pretty pictures? (replacing ?source? 
> above)
>> 
>> sky_glow_hdr bubble sky_hdr
>> 0
>> 0
>> 4 0 0 0 2000
>> 
>> or
>> 
>> !genbox sky_glow_hdr boxenv 2000 2000 1000 -i | xform -t -1000 -1000 
>> -500
>> 
>> A further topic will be a ?calibration? of the HDR sky views - we 
>> have
> global horizontal and diffuse horizontal radiation values available. 
> The current idea of a (possibly slightly rough) method of calibration 
> would be to use the HDR sky to calculate the corresponding sensor 
> value with radiance and ?somehow? introduce a scaling factor into the 
> HDR sky such that the measured and calculated global horizontal radiation
values tally.
>> 
>> Thanks for any hints & ideas!
>> 
>> Best
>> Achim
>> 
>> achim.geissler at intergga.ch

_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general



From mcneil.andrew at gmail.com  Wed Jun  1 08:00:06 2016
From: mcneil.andrew at gmail.com (Andy McNeil)
Date: Wed, 1 Jun 2016 08:00:06 -0700
Subject: [Radiance-general] genskyvec with HDR sky view?
In-Reply-To: <001501d1bbdc$caeaf4d0$60c0de70$@intergga.ch>
References: <AFCAEC0C-40CC-46AD-A28E-AEAD6276E961@intergga.ch>
	<DCBD49C2-94A3-4545-A5D0-A9669F311BC9@lmi.net>
	<001201d1ba84$b372a720$1a57f560$@intergga.ch>
	<49291F00-43FF-4140-8950-B53712BAC512@lmi.net>
	<001501d1bbdc$caeaf4d0$60c0de70$@intergga.ch>
Message-ID: <CAEFJVk8Rg+=FiAmbo3MOAHJEebJq=qEfF0SU0+fC7FC2=99mrA@mail.gmail.com>

@Andy: Incidentally, this is in regard to one step before tackling genskyvec
> again, I am trying to generate a view of a scene via "sky_glow source sky"
> based on the HDR ... the scene has a ground plane, but does have a "hole"
> between this and the sky (which works with "normal" skies). I'll try your
> suggestion for the sky definition, thanks!


Oh, I didn't realize it was a cal file issue. Have you considered using
fisheye.cal? It is distributed with the radiance auxiliary files (get them
here:
http://radiance-online.org/download-install/radiance-source-code/un-official-head-version
look in here: ray/lib/fisheye.cal). Here's how I use it, which I found
somewhere else along the way:

void colorpict skypict
11 red green blue sky_image.hdr fisheye.cal fish_u fish_v -rx 90 -rz 180
0
0

skypict glow skyglow
0
0
4 1 1 1 0

skyglow source sky
0
0
4 0 0 1 180

Andy


On Wed, Jun 1, 2016 at 1:08 AM, Achim Geissler <achim.geissler at intergga.ch>
wrote:

> Hi Greg,
>
> sorry to be somehow seemingly rubbing you the wrong way - I can't remember
> you ever telling anybody else simply to "give up" :o( . It is definitely
> not
> intentional (and I may note here that I am not a native English
> speaker/writer).
>
> The formatting was O.K. with html mail format. Whatever.
>
> The Photosphere stuff was simply to try to give some information on the HDR
> in respond to your statements in regard to same (kind of "prove" that it is
> actually a Radiance readable HDR ...).
>
> The comments on orienting the HDR are noted. I accept that if I do it
> right,
> it should be correct  ;o)
>
> I wasn't planning to rewrite genskyvec.pl, but you have me confused on
> how I
> should "prepare a sky file it will accept" - which is clearly my goal -
> without understanding at least partially how it works / what the data flow
> is / what it needs.
>
> Actually, the number of the warnings increased significantly and no result
> was obtained. With skyfunc_hdr a (not very useful) result was generated
> with
> "some" identical warning messages.
>
> @Andy: Incidentally, this is in regard to one step before tackling
> genskyvec
> again, I am trying to generate a view of a scene via "sky_glow source sky"
> based on the HDR ... the scene has a ground plane, but does have a "hole"
> between this and the sky (which works with "normal" skies). I'll try your
> suggestion for the sky definition, thanks!
>
> Skymap.cal is
> ===
> u = 1 - (0.5 + DDx *r);
> v = 0.5 + DDy *r;
>
> r = if(DD, 0.707106781*(sin(acos(DDz)/2))/DD,0);
>
> DD = sqrt(DDx*DDx + DDy*DDy);
>
> DDy = Py*norm;
> DDx = Px*norm;
> DDz = Pz*norm;
>
> norm = 1/sqrt(Py*Py + Px*Px + Pz*Pz);
> ===
>
> I'll go back to RWR again and see what I can learn.
>
> Thanks.
>
> Best
> Achim
>
>
> -----Urspr?ngliche Nachricht-----
> Von: Greg Ward [mailto:gregoryjward at gmail.com]
> Gesendet: Mittwoch, 1. Juni 2016 00:18
> An: Radiance general discussion
> Betreff: Re: [Radiance-general] genskyvec with HDR sky view?
>
> Hi Achim,
>
> I'll answer inline again, making a bad formatting job look even worse....
>
> > From: "Achim Geissler" <achim.geissler at intergga.ch>
> > Date: May 30, 2016 8:05:25 AM PDT
> >
> > Hi Greg,
> >
> > thanks for the pointers. I am afraid, though, that I was unable to
> > really make heads or tails of them.
> > a) HDR file (Photosphere)
> >       i, the (test) HDR gives min/max values in falsecolor view of 39 to
> > 2900, whatever the unit, there
> >       ii, it gives histogram min/max values  for Luminance of 34.8 to
> > 4.43E+06
> >       iii, it does not seem to be clipped
>
> I don't know what (i), (ii) and (iii) refer to, if anything.  Are these
> particular processes you have tried?  If so, what are they?
>
> Typically, falsecolor and Photosphere report photometric values (i.e.,
> radiance values times 179 lumens/watt efficacy).
>
> > b) There is a sun (albeit behind a thin cloud cover). Simply adding a
> > sun definition to my sky description did not really change anything,
> though.
> > Also, at this point I do not know which r,g,b radiance values to use
> > for the solar "light" material and do these influence the result? And,
> > actually, how to exactly position the HDR so that the sun positions
> tally.
>
> If you have your sky turned the right way around, so that the Z-axis points
> up, Y-axis points north, and X-axis points east, then positioning the sun
> is
> a matter of running gensky with the appropriate date/time and global
> position parameters, and extracting the description it generates.  You can
> adjust the solar radiance values to match the global-diffuse measured that
> day using the -R option to gensky.
>
> > c) I took a look at the genskyvec.pl script, however, I am not
> > perl-literate so that is a bit difficult. I seem to be missing out on
> > where this script >could< use values from the HDR file to generate the
> > sky vectors. Part of the code seems to be a copy of the setting up of
> patches from reinhart.cal.
> > Also, the "skyfunc glow skyglow" and "skyglow source sky" are written
> > to the
> > (an) octree in the script. Can I ignore that? Or does that let me
> > leave these definitions out of my sky description? Which definition has
> precedent?
> > I can't really see where the "skybright.cal" values from a standard
> > gensky sky would come into play - this should be what is replaced by
> > values from the HDR?
>
> I'm not suggesting you rewrite genskyvec.  Rather, I'm suggesting that you
> prepare a sky file it will accept and run it on that file.  If this doesn't
> make sense, then I suggest you give up.
>
> > d) using the sky description as below but with "skyfunc" gives
> > rpict: warning - compute error for colorpict "skyfunc"
> > rpict: Division by zero
> > when trying to generate a view of a scene.
>
> I don't know why globally replacing "skyfunc_hdr" with "skyfunc" in your
> file should cause new errors.  You must have done something else, or the
> original run would have generated the same errors.  I don't know what's in
> "map_sky.cal", which is the likely cause.
>
> > I must admit the flow of data (input / output) in all the definitions
> > is a bit of a mystery, for me. I did find a kind of description for
> > colorpict in p_data.c, but that didn't really help, sadly. Looking at
> > your code, I get the feeling I am not literate in any programming
> > language ... :o(
>
> Well, it's not particularly transparent, I will grant you.  There's this
> back-and-forth between the ray tracing and the scene description, such that
> when a material is intersected, it queries its modifiers, which calls back
> to your map_sky.cal file in a rather convoluted fashion.
>
> You should look through Chapter 4 of "Rendering with Radiance."  Starting
> at
> Section 4.1.4, we talk about how the interaction between rendering and .cal
> files operates.
>
> > If you (or, of course, anyone else out there that has done this
> > before) can give any further help or tips, it would be much appreciated.
> >
> > Best
> > Achim
> >
> >
> > -----Urspr?ngliche Nachricht-----
> > Von: Greg Ward [mailto:gregoryjward at gmail.com]
> > Gesendet: Samstag, 28. Mai 2016 01:27
> > An: Radiance general discussion
> > Betreff: Re: [Radiance-general] genskyvec with HDR sky view?
> >
> > Hi Achim,
> >
> > I wouldn't call what you are trying to do "easy," even if others have
> > done it.  Your HDR file has to be in the correct units or scaled by
> > the right amount to get calibrated radiance values, and even then, the
> > sun is usually out of range(clipped) and won't be properly sampled if it
> is a clear sky.
> >
> > As you noted, such a sky cannot be given as input to genskyvec, which
> > expects a very specific set of primitives output by gensky or gendaylit.
> > Specifically, you need to name your colorpict pattern "skyfunc" and
> > add a solar source if the sky is sunny.  You could try to modify your
> > description to match, but you'd have to look at the Perl script
> > src/util/genskyvec.pl to figure out how to satisfy the input
> requirements.
> >
> > Once you have a sky description, you can use rtrace with the -I option
> > to compute hemispherical irradiance, from which you can create an
> > adjustment factor to apply to your glow based on horizontal irradiance.
> >
> > It's all possible, but the details are not very straightforward.
> >
> > Best,
> > -Greg
> >
> >> From: Achim Geissler <achim.geissler at intergga.ch>
> >> Date: May 27, 2016 12:29:35 PM PDT
> >>
> >> Hi all,
> >>
> >> after searching high and low without clear results apart from a lot
> >> of
> > pointers that ?everybody seems to be doing it? (so it should actually
> > be easy and I am probably missing the forest due to seeing trees, as
> > they say) a short question: The goal is to use HDR (fisheye) views of
> > the sky for radiance calculations. All I could manage to date are
> > pretty pictures with HDR skies. Ideally, the workflow would be ?the
> > same? as when using a sky from gensky or gendaylit. E.g., it would be
> > nice to be able to generate the sky vectors (genskyvec) from the HDR
> > sky view. Is that possible? How? Trying to simply pipe a sky
> > definition along the lines of
> >>
> >> void colorpict skyfunc_hdr
> >> 7 red green blue sky_image.hdr map_sky.cal u v
> >> 0
> >> 0
> >>
> >> skyfunc_hdr glow sky_glow_hdr
> >> 0
> >> 0
> >> 4 1 1 1 0
> >>
> >> sky_glow_hdr source sky_hdr
> >> 0
> >> 0
> >> 4 0 0 1 180
> >>
> >> into genskyvec didn?t work - well, would have been too simple (the
> > map_sky.cal is from the PhD by Coralie Cauwerts, 2013). The following
> > approaches resulted in the ?pretty pictures? (replacing ?source?
> > above)
> >>
> >> sky_glow_hdr bubble sky_hdr
> >> 0
> >> 0
> >> 4 0 0 0 2000
> >>
> >> or
> >>
> >> !genbox sky_glow_hdr boxenv 2000 2000 1000 -i | xform -t -1000 -1000
> >> -500
> >>
> >> A further topic will be a ?calibration? of the HDR sky views - we
> >> have
> > global horizontal and diffuse horizontal radiation values available.
> > The current idea of a (possibly slightly rough) method of calibration
> > would be to use the HDR sky to calculate the corresponding sensor
> > value with radiance and ?somehow? introduce a scaling factor into the
> > HDR sky such that the measured and calculated global horizontal radiation
> values tally.
> >>
> >> Thanks for any hints & ideas!
> >>
> >> Best
> >> Achim
> >>
> >> achim.geissler at intergga.ch
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160601/eaf1058c/attachment-0001.html>

From achim.geissler at intergga.ch  Wed Jun  1 08:48:23 2016
From: achim.geissler at intergga.ch (Achim Geissler)
Date: Wed, 1 Jun 2016 17:48:23 +0200
Subject: [Radiance-general] genskyvec with HDR sky view?
In-Reply-To: <CAEFJVk8Rg+=FiAmbo3MOAHJEebJq=qEfF0SU0+fC7FC2=99mrA@mail.gmail.com>
References: <AFCAEC0C-40CC-46AD-A28E-AEAD6276E961@intergga.ch>	<DCBD49C2-94A3-4545-A5D0-A9669F311BC9@lmi.net>	<001201d1ba84$b372a720$1a57f560$@intergga.ch>	<49291F00-43FF-4140-8950-B53712BAC512@lmi.net>	<001501d1bbdc$caeaf4d0$60c0de70$@intergga.ch>
	<CAEFJVk8Rg+=FiAmbo3MOAHJEebJq=qEfF0SU0+fC7FC2=99mrA@mail.gmail.com>
Message-ID: <001601d1bc1d$0764e020$162ea060$@intergga.ch>

Hi Andy,

 

that worked like a charm, thanks! The .cal file I was using originated from a source using ?specific? fisheye lenses ? hmm. More work to do.

 

You haven?t ever used a HDR sky with rcontrib, by the way?

 

Best

Achim

 

 

 

Von: Andy McNeil [mailto:mcneil.andrew at gmail.com] 
Gesendet: Mittwoch, 1. Juni 2016 17:00
An: Radiance general discussion
Betreff: Re: [Radiance-general] genskyvec with HDR sky view?

 

@Andy: Incidentally, this is in regard to one step before tackling genskyvec
again, I am trying to generate a view of a scene via "sky_glow source sky"
based on the HDR ... the scene has a ground plane, but does have a "hole"
between this and the sky (which works with "normal" skies). I'll try your
suggestion for the sky definition, thanks!

 

Oh, I didn't realize it was a cal file issue. Have you considered using fisheye.cal? It is distributed with the radiance auxiliary files (get them here:http://radiance-online.org/download-install/radiance-source-code/un-official-head-version look in here: ray/lib/fisheye.cal). Here's how I use it, which I found somewhere else along the way:

 

void colorpict skypict

11 red green blue sky_image.hdr fisheye.cal fish_u fish_v -rx 90 -rz 180

0

0

 

skypict glow skyglow

0

0

4 1 1 1 0

 

skyglow source sky

0

0

4 0 0 1 180

 

Andy

 

 

On Wed, Jun 1, 2016 at 1:08 AM, Achim Geissler <achim.geissler at intergga.ch> wrote:

Hi Greg,

sorry to be somehow seemingly rubbing you the wrong way - I can't remember
you ever telling anybody else simply to "give up" :o( . It is definitely not
intentional (and I may note here that I am not a native English
speaker/writer).

The formatting was O.K. with html mail format. Whatever.

The Photosphere stuff was simply to try to give some information on the HDR
in respond to your statements in regard to same (kind of "prove" that it is
actually a Radiance readable HDR ...).

The comments on orienting the HDR are noted. I accept that if I do it right,
it should be correct  ;o)

I wasn't planning to rewrite genskyvec.pl, but you have me confused on how I
should "prepare a sky file it will accept" - which is clearly my goal -
without understanding at least partially how it works / what the data flow
is / what it needs.

Actually, the number of the warnings increased significantly and no result
was obtained. With skyfunc_hdr a (not very useful) result was generated with
"some" identical warning messages.

@Andy: Incidentally, this is in regard to one step before tackling genskyvec
again, I am trying to generate a view of a scene via "sky_glow source sky"
based on the HDR ... the scene has a ground plane, but does have a "hole"
between this and the sky (which works with "normal" skies). I'll try your
suggestion for the sky definition, thanks!

Skymap.cal is
===
u = 1 - (0.5 + DDx *r);
v = 0.5 + DDy *r;

r = if(DD, 0.707106781*(sin(acos(DDz)/2))/DD,0);

DD = sqrt(DDx*DDx + DDy*DDy);

DDy = Py*norm;
DDx = Px*norm;
DDz = Pz*norm;

norm = 1/sqrt(Py*Py + Px*Px + Pz*Pz);
===

I'll go back to RWR again and see what I can learn.

Thanks.

Best
Achim


-----Urspr?ngliche Nachricht-----
Von: Greg Ward [mailto:gregoryjward at gmail.com]
Gesendet: Mittwoch, 1. Juni 2016 00:18

An: Radiance general discussion
Betreff: Re: [Radiance-general] genskyvec with HDR sky view?

Hi Achim,

I'll answer inline again, making a bad formatting job look even worse....

> From: "Achim Geissler" <achim.geissler at intergga.ch>
> Date: May 30, 2016 8:05:25 AM PDT
>
> Hi Greg,
>
> thanks for the pointers. I am afraid, though, that I was unable to
> really make heads or tails of them.
> a) HDR file (Photosphere)
>       i, the (test) HDR gives min/max values in falsecolor view of 39 to
> 2900, whatever the unit, there
>       ii, it gives histogram min/max values  for Luminance of 34.8 to
> 4.43E+06
>       iii, it does not seem to be clipped

I don't know what (i), (ii) and (iii) refer to, if anything.  Are these
particular processes you have tried?  If so, what are they?

Typically, falsecolor and Photosphere report photometric values (i.e.,
radiance values times 179 lumens/watt efficacy).

> b) There is a sun (albeit behind a thin cloud cover). Simply adding a
> sun definition to my sky description did not really change anything,
though.
> Also, at this point I do not know which r,g,b radiance values to use
> for the solar "light" material and do these influence the result? And,
> actually, how to exactly position the HDR so that the sun positions tally.

If you have your sky turned the right way around, so that the Z-axis points
up, Y-axis points north, and X-axis points east, then positioning the sun is
a matter of running gensky with the appropriate date/time and global
position parameters, and extracting the description it generates.  You can
adjust the solar radiance values to match the global-diffuse measured that
day using the -R option to gensky.

> c) I took a look at the genskyvec.pl script, however, I am not
> perl-literate so that is a bit difficult. I seem to be missing out on
> where this script >could< use values from the HDR file to generate the
> sky vectors. Part of the code seems to be a copy of the setting up of
patches from reinhart.cal.
> Also, the "skyfunc glow skyglow" and "skyglow source sky" are written
> to the
> (an) octree in the script. Can I ignore that? Or does that let me
> leave these definitions out of my sky description? Which definition has
precedent?
> I can't really see where the "skybright.cal" values from a standard
> gensky sky would come into play - this should be what is replaced by
> values from the HDR?

I'm not suggesting you rewrite genskyvec.  Rather, I'm suggesting that you
prepare a sky file it will accept and run it on that file.  If this doesn't
make sense, then I suggest you give up.

> d) using the sky description as below but with "skyfunc" gives
> rpict: warning - compute error for colorpict "skyfunc"
> rpict: Division by zero
> when trying to generate a view of a scene.

I don't know why globally replacing "skyfunc_hdr" with "skyfunc" in your
file should cause new errors.  You must have done something else, or the
original run would have generated the same errors.  I don't know what's in
"map_sky.cal", which is the likely cause.

> I must admit the flow of data (input / output) in all the definitions
> is a bit of a mystery, for me. I did find a kind of description for
> colorpict in p_data.c, but that didn't really help, sadly. Looking at
> your code, I get the feeling I am not literate in any programming
> language ... :o(

Well, it's not particularly transparent, I will grant you.  There's this
back-and-forth between the ray tracing and the scene description, such that
when a material is intersected, it queries its modifiers, which calls back
to your map_sky.cal file in a rather convoluted fashion.

You should look through Chapter 4 of "Rendering with Radiance."  Starting at
Section 4.1.4, we talk about how the interaction between rendering and .cal
files operates.

> If you (or, of course, anyone else out there that has done this
> before) can give any further help or tips, it would be much appreciated.
>
> Best
> Achim
>
>
> -----Urspr?ngliche Nachricht-----
> Von: Greg Ward [mailto:gregoryjward at gmail.com]
> Gesendet: Samstag, 28. Mai 2016 01:27
> An: Radiance general discussion
> Betreff: Re: [Radiance-general] genskyvec with HDR sky view?
>
> Hi Achim,
>
> I wouldn't call what you are trying to do "easy," even if others have
> done it.  Your HDR file has to be in the correct units or scaled by
> the right amount to get calibrated radiance values, and even then, the
> sun is usually out of range(clipped) and won't be properly sampled if it
is a clear sky.
>
> As you noted, such a sky cannot be given as input to genskyvec, which
> expects a very specific set of primitives output by gensky or gendaylit.
> Specifically, you need to name your colorpict pattern "skyfunc" and
> add a solar source if the sky is sunny.  You could try to modify your
> description to match, but you'd have to look at the Perl script
> src/util/genskyvec.pl to figure out how to satisfy the input requirements.
>
> Once you have a sky description, you can use rtrace with the -I option
> to compute hemispherical irradiance, from which you can create an
> adjustment factor to apply to your glow based on horizontal irradiance.
>
> It's all possible, but the details are not very straightforward.
>
> Best,
> -Greg
>
>> From: Achim Geissler <achim.geissler at intergga.ch>
>> Date: May 27, 2016 12:29:35 PM PDT
>>
>> Hi all,
>>
>> after searching high and low without clear results apart from a lot
>> of
> pointers that ?everybody seems to be doing it? (so it should actually
> be easy and I am probably missing the forest due to seeing trees, as
> they say) a short question: The goal is to use HDR (fisheye) views of
> the sky for radiance calculations. All I could manage to date are
> pretty pictures with HDR skies. Ideally, the workflow would be ?the
> same? as when using a sky from gensky or gendaylit. E.g., it would be
> nice to be able to generate the sky vectors (genskyvec) from the HDR
> sky view. Is that possible? How? Trying to simply pipe a sky
> definition along the lines of
>>
>> void colorpict skyfunc_hdr
>> 7 red green blue sky_image.hdr map_sky.cal u v
>> 0
>> 0
>>
>> skyfunc_hdr glow sky_glow_hdr
>> 0
>> 0
>> 4 1 1 1 0
>>
>> sky_glow_hdr source sky_hdr
>> 0
>> 0
>> 4 0 0 1 180
>>
>> into genskyvec didn?t work - well, would have been too simple (the
> map_sky.cal is from the PhD by Coralie Cauwerts, 2013). The following
> approaches resulted in the ?pretty pictures? (replacing ?source?
> above)
>>
>> sky_glow_hdr bubble sky_hdr
>> 0
>> 0
>> 4 0 0 0 2000
>>
>> or
>>
>> !genbox sky_glow_hdr boxenv 2000 2000 1000 -i | xform -t -1000 -1000
>> -500
>>
>> A further topic will be a ?calibration? of the HDR sky views - we
>> have
> global horizontal and diffuse horizontal radiation values available.
> The current idea of a (possibly slightly rough) method of calibration
> would be to use the HDR sky to calculate the corresponding sensor
> value with radiance and ?somehow? introduce a scaling factor into the
> HDR sky such that the measured and calculated global horizontal radiation
values tally.
>>
>> Thanks for any hints & ideas!
>>
>> Best
>> Achim
>>
>> achim.geissler at intergga.ch

_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general


_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160601/783a8b32/attachment-0001.html>

From mcneil.andrew at gmail.com  Wed Jun  1 09:22:57 2016
From: mcneil.andrew at gmail.com (Andy McNeil)
Date: Wed, 1 Jun 2016 09:22:57 -0700
Subject: [Radiance-general] genskyvec with HDR sky view?
In-Reply-To: <001601d1bc1d$0764e020$162ea060$@intergga.ch>
References: <AFCAEC0C-40CC-46AD-A28E-AEAD6276E961@intergga.ch>
	<DCBD49C2-94A3-4545-A5D0-A9669F311BC9@lmi.net>
	<001201d1ba84$b372a720$1a57f560$@intergga.ch>
	<49291F00-43FF-4140-8950-B53712BAC512@lmi.net>
	<001501d1bbdc$caeaf4d0$60c0de70$@intergga.ch>
	<CAEFJVk8Rg+=FiAmbo3MOAHJEebJq=qEfF0SU0+fC7FC2=99mrA@mail.gmail.com>
	<001601d1bc1d$0764e020$162ea060$@intergga.ch>
Message-ID: <CAEFJVk83xE7eDJ263j8UUh5TXODd6RVmvGz-R_9Ljc-QqeNFow@mail.gmail.com>

>
> You haven?t ever used a HDR sky with rcontrib, by the way?

Yes, I have. I'm working for Terrestrial Light: http://terrestriallight.com/
which makes HDR cameras for building control systems.

On Wed, Jun 1, 2016 at 8:48 AM, Achim Geissler <achim.geissler at intergga.ch>
wrote:

> Hi Andy,
>
>
>
> that worked like a charm, thanks! The .cal file I was using originated
> from a source using ?specific? fisheye lenses ? hmm. More work to do.
>
>
>
> You haven?t ever used a HDR sky with rcontrib, by the way?
>
>
>
> Best
>
> Achim
>
>
>
>
>
>
>
> *Von:* Andy McNeil [mailto:mcneil.andrew at gmail.com]
> *Gesendet:* Mittwoch, 1. Juni 2016 17:00
>
> *An:* Radiance general discussion
> *Betreff:* Re: [Radiance-general] genskyvec with HDR sky view?
>
>
>
> @Andy: Incidentally, this is in regard to one step before tackling
> genskyvec
> again, I am trying to generate a view of a scene via "sky_glow source sky"
> based on the HDR ... the scene has a ground plane, but does have a "hole"
> between this and the sky (which works with "normal" skies). I'll try your
> suggestion for the sky definition, thanks!
>
>
>
> Oh, I didn't realize it was a cal file issue. Have you considered using
> fisheye.cal? It is distributed with the radiance auxiliary files (get them
> here:
> http://radiance-online.org/download-install/radiance-source-code/un-official-head-version
> look in here: ray/lib/fisheye.cal). Here's how I use it, which I found
> somewhere else along the way:
>
>
>
> void colorpict skypict
>
> 11 red green blue sky_image.hdr fisheye.cal fish_u fish_v -rx 90 -rz 180
>
> 0
>
> 0
>
>
>
> skypict glow skyglow
>
> 0
>
> 0
>
> 4 1 1 1 0
>
>
>
> skyglow source sky
>
> 0
>
> 0
>
> 4 0 0 1 180
>
>
>
> Andy
>
>
>
>
>
> On Wed, Jun 1, 2016 at 1:08 AM, Achim Geissler <achim.geissler at intergga.ch>
> wrote:
>
> Hi Greg,
>
> sorry to be somehow seemingly rubbing you the wrong way - I can't remember
> you ever telling anybody else simply to "give up" :o( . It is definitely
> not
> intentional (and I may note here that I am not a native English
> speaker/writer).
>
> The formatting was O.K. with html mail format. Whatever.
>
> The Photosphere stuff was simply to try to give some information on the HDR
> in respond to your statements in regard to same (kind of "prove" that it is
> actually a Radiance readable HDR ...).
>
> The comments on orienting the HDR are noted. I accept that if I do it
> right,
> it should be correct  ;o)
>
> I wasn't planning to rewrite genskyvec.pl, but you have me confused on
> how I
> should "prepare a sky file it will accept" - which is clearly my goal -
> without understanding at least partially how it works / what the data flow
> is / what it needs.
>
> Actually, the number of the warnings increased significantly and no result
> was obtained. With skyfunc_hdr a (not very useful) result was generated
> with
> "some" identical warning messages.
>
> @Andy: Incidentally, this is in regard to one step before tackling
> genskyvec
> again, I am trying to generate a view of a scene via "sky_glow source sky"
> based on the HDR ... the scene has a ground plane, but does have a "hole"
> between this and the sky (which works with "normal" skies). I'll try your
> suggestion for the sky definition, thanks!
>
> Skymap.cal is
> ===
> u = 1 - (0.5 + DDx *r);
> v = 0.5 + DDy *r;
>
> r = if(DD, 0.707106781*(sin(acos(DDz)/2))/DD,0);
>
> DD = sqrt(DDx*DDx + DDy*DDy);
>
> DDy = Py*norm;
> DDx = Px*norm;
> DDz = Pz*norm;
>
> norm = 1/sqrt(Py*Py + Px*Px + Pz*Pz);
> ===
>
> I'll go back to RWR again and see what I can learn.
>
> Thanks.
>
> Best
> Achim
>
>
> -----Urspr?ngliche Nachricht-----
> Von: Greg Ward [mailto:gregoryjward at gmail.com]
> Gesendet: Mittwoch, 1. Juni 2016 00:18
>
> An: Radiance general discussion
> Betreff: Re: [Radiance-general] genskyvec with HDR sky view?
>
> Hi Achim,
>
> I'll answer inline again, making a bad formatting job look even worse....
>
> > From: "Achim Geissler" <achim.geissler at intergga.ch>
> > Date: May 30, 2016 8:05:25 AM PDT
> >
> > Hi Greg,
> >
> > thanks for the pointers. I am afraid, though, that I was unable to
> > really make heads or tails of them.
> > a) HDR file (Photosphere)
> >       i, the (test) HDR gives min/max values in falsecolor view of 39 to
> > 2900, whatever the unit, there
> >       ii, it gives histogram min/max values  for Luminance of 34.8 to
> > 4.43E+06
> >       iii, it does not seem to be clipped
>
> I don't know what (i), (ii) and (iii) refer to, if anything.  Are these
> particular processes you have tried?  If so, what are they?
>
> Typically, falsecolor and Photosphere report photometric values (i.e.,
> radiance values times 179 lumens/watt efficacy).
>
> > b) There is a sun (albeit behind a thin cloud cover). Simply adding a
> > sun definition to my sky description did not really change anything,
> though.
> > Also, at this point I do not know which r,g,b radiance values to use
> > for the solar "light" material and do these influence the result? And,
> > actually, how to exactly position the HDR so that the sun positions
> tally.
>
> If you have your sky turned the right way around, so that the Z-axis points
> up, Y-axis points north, and X-axis points east, then positioning the sun
> is
> a matter of running gensky with the appropriate date/time and global
> position parameters, and extracting the description it generates.  You can
> adjust the solar radiance values to match the global-diffuse measured that
> day using the -R option to gensky.
>
> > c) I took a look at the genskyvec.pl script, however, I am not
> > perl-literate so that is a bit difficult. I seem to be missing out on
> > where this script >could< use values from the HDR file to generate the
> > sky vectors. Part of the code seems to be a copy of the setting up of
> patches from reinhart.cal.
> > Also, the "skyfunc glow skyglow" and "skyglow source sky" are written
> > to the
> > (an) octree in the script. Can I ignore that? Or does that let me
> > leave these definitions out of my sky description? Which definition has
> precedent?
> > I can't really see where the "skybright.cal" values from a standard
> > gensky sky would come into play - this should be what is replaced by
> > values from the HDR?
>
> I'm not suggesting you rewrite genskyvec.  Rather, I'm suggesting that you
> prepare a sky file it will accept and run it on that file.  If this doesn't
> make sense, then I suggest you give up.
>
> > d) using the sky description as below but with "skyfunc" gives
> > rpict: warning - compute error for colorpict "skyfunc"
> > rpict: Division by zero
> > when trying to generate a view of a scene.
>
> I don't know why globally replacing "skyfunc_hdr" with "skyfunc" in your
> file should cause new errors.  You must have done something else, or the
> original run would have generated the same errors.  I don't know what's in
> "map_sky.cal", which is the likely cause.
>
> > I must admit the flow of data (input / output) in all the definitions
> > is a bit of a mystery, for me. I did find a kind of description for
> > colorpict in p_data.c, but that didn't really help, sadly. Looking at
> > your code, I get the feeling I am not literate in any programming
> > language ... :o(
>
> Well, it's not particularly transparent, I will grant you.  There's this
> back-and-forth between the ray tracing and the scene description, such that
> when a material is intersected, it queries its modifiers, which calls back
> to your map_sky.cal file in a rather convoluted fashion.
>
> You should look through Chapter 4 of "Rendering with Radiance."  Starting
> at
> Section 4.1.4, we talk about how the interaction between rendering and .cal
> files operates.
>
> > If you (or, of course, anyone else out there that has done this
> > before) can give any further help or tips, it would be much appreciated.
> >
> > Best
> > Achim
> >
> >
> > -----Urspr?ngliche Nachricht-----
> > Von: Greg Ward [mailto:gregoryjward at gmail.com]
> > Gesendet: Samstag, 28. Mai 2016 01:27
> > An: Radiance general discussion
> > Betreff: Re: [Radiance-general] genskyvec with HDR sky view?
> >
> > Hi Achim,
> >
> > I wouldn't call what you are trying to do "easy," even if others have
> > done it.  Your HDR file has to be in the correct units or scaled by
> > the right amount to get calibrated radiance values, and even then, the
> > sun is usually out of range(clipped) and won't be properly sampled if it
> is a clear sky.
> >
> > As you noted, such a sky cannot be given as input to genskyvec, which
> > expects a very specific set of primitives output by gensky or gendaylit.
> > Specifically, you need to name your colorpict pattern "skyfunc" and
> > add a solar source if the sky is sunny.  You could try to modify your
> > description to match, but you'd have to look at the Perl script
> > src/util/genskyvec.pl to figure out how to satisfy the input
> requirements.
> >
> > Once you have a sky description, you can use rtrace with the -I option
> > to compute hemispherical irradiance, from which you can create an
> > adjustment factor to apply to your glow based on horizontal irradiance.
> >
> > It's all possible, but the details are not very straightforward.
> >
> > Best,
> > -Greg
> >
> >> From: Achim Geissler <achim.geissler at intergga.ch>
> >> Date: May 27, 2016 12:29:35 PM PDT
> >>
> >> Hi all,
> >>
> >> after searching high and low without clear results apart from a lot
> >> of
> > pointers that ?everybody seems to be doing it? (so it should actually
> > be easy and I am probably missing the forest due to seeing trees, as
> > they say) a short question: The goal is to use HDR (fisheye) views of
> > the sky for radiance calculations. All I could manage to date are
> > pretty pictures with HDR skies. Ideally, the workflow would be ?the
> > same? as when using a sky from gensky or gendaylit. E.g., it would be
> > nice to be able to generate the sky vectors (genskyvec) from the HDR
> > sky view. Is that possible? How? Trying to simply pipe a sky
> > definition along the lines of
> >>
> >> void colorpict skyfunc_hdr
> >> 7 red green blue sky_image.hdr map_sky.cal u v
> >> 0
> >> 0
> >>
> >> skyfunc_hdr glow sky_glow_hdr
> >> 0
> >> 0
> >> 4 1 1 1 0
> >>
> >> sky_glow_hdr source sky_hdr
> >> 0
> >> 0
> >> 4 0 0 1 180
> >>
> >> into genskyvec didn?t work - well, would have been too simple (the
> > map_sky.cal is from the PhD by Coralie Cauwerts, 2013). The following
> > approaches resulted in the ?pretty pictures? (replacing ?source?
> > above)
> >>
> >> sky_glow_hdr bubble sky_hdr
> >> 0
> >> 0
> >> 4 0 0 0 2000
> >>
> >> or
> >>
> >> !genbox sky_glow_hdr boxenv 2000 2000 1000 -i | xform -t -1000 -1000
> >> -500
> >>
> >> A further topic will be a ?calibration? of the HDR sky views - we
> >> have
> > global horizontal and diffuse horizontal radiation values available.
> > The current idea of a (possibly slightly rough) method of calibration
> > would be to use the HDR sky to calculate the corresponding sensor
> > value with radiance and ?somehow? introduce a scaling factor into the
> > HDR sky such that the measured and calculated global horizontal radiation
> values tally.
> >>
> >> Thanks for any hints & ideas!
> >>
> >> Best
> >> Achim
> >>
> >> achim.geissler at intergga.ch
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160601/ad050e2f/attachment-0001.html>

From germolinal at gmail.com  Wed Jun  1 09:42:31 2016
From: germolinal at gmail.com (=?UTF-8?Q?Germ=C3=A1n_Molina_Larrain?=)
Date: Wed, 1 Jun 2016 13:42:31 -0300
Subject: [Radiance-general] [HDRI] Photosphere (or equivalent) in Linux
	or Windows?
In-Reply-To: <b49672ce1db1498bb95a65050f96f1e8@rexb.intranet.epfl.ch>
References: <b49672ce1db1498bb95a65050f96f1e8@rexb.intranet.epfl.ch>
Message-ID: <CAF-iH4+Q_-nFcHWaLXxHTV6Du3Q4aQ6cRSSCc33m91eXuvJRdA@mail.gmail.com>

Have you heard about HDR Scope??? I saw a demonstration given by Mehlika
Inanici once... it was REALLY COOL. For Windows only, though.

Anyone knows wheather it has been updated to work in Windows 10?

2016-05-31 9:45 GMT-03:00 Chamilothori Kynthia <kynthia.chamilothori at epfl.ch
>:

> Hi Greg,
>
> Thanks for your answer! Great to hear that the Windows port is stable and
> working!
> I completely understand the difficulty of continuing the porting work -
> thanks for all the work you have already put into this. I think that for
> what I want to do hdrgen and pcomb will do fine for now.
>
> Cheers,
> Kynthia
> ------------------------------
>
> Message: 3
> Date: Mon, 30 May 2016 08:40:58 -0700
> From: Greg Ward <gregoryjward at gmail.com>
> To: Radiance general discussion <radiance-general at radiance-online.org>
> Subject: Re: [Radiance-general] [HDRI] Photosphere (or equivalent) in
>         Linux   or Windows?
> Message-ID: <519C9544-A8CF-430D-8857-27537814B93B at lmi.net>
> Content-Type: text/plain; charset="us-ascii"
>
> Hi Kynthia,
>
> To recover the costs related to developing a Windows version, we have been
> charging a site license fee of $250 US to institutions that want to use
> Elena's port of Photosphere.  It does appear to be stable inasmuch as we
> have received no complaints about its behavior from any of the licensees.
>
> The long-term goal is to port her version, which is based on the
> cross-platform wxWidgets API, back to newer versions of Mac OS X and even
> Linux.  Unfortunately, I have not had time to pursue this activity.  I am
> unsure at this point when I will ever get to it....
>
> Cheers,
> -Greg
>
> > From: Chamilothori Kynthia <kynthia.chamilothori at epfl.ch>
> > Date: May 30, 2016 6:09:23 AM PDT
> >
> > Dear Radiance community,
> >
> > There was a great effort a couple of years ago to create a
> cross-platform version of Photosphere by Greg and Helena Eydelberg. Is this
> version perhaps stable enough for distribution?
> > Otherwise, what would you use as an alternative if not Photosphere? Has
> anyone used successfully any other workaround (e.g. an OS X virtual box)?
> >
> > Thanks for any ideas!
> >
> > Best,
> > Kynthia Chamilothori
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: <
> http://www.radiance-online.org/pipermail/radiance-general/attachments/20160530/915e41c1/attachment-0001.html
> >
>
> ------------------------------
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
> End of Radiance-general Digest, Vol 147, Issue 11
> *************************************************
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160601/24de3acb/attachment.html>

From gregoryjward at gmail.com  Wed Jun  1 10:44:17 2016
From: gregoryjward at gmail.com (Greg Ward)
Date: Wed, 1 Jun 2016 10:44:17 -0700
Subject: [Radiance-general] genskyvec with HDR sky view?
In-Reply-To: <001501d1bbdc$caeaf4d0$60c0de70$@intergga.ch>
References: <AFCAEC0C-40CC-46AD-A28E-AEAD6276E961@intergga.ch>	<DCBD49C2-94A3-4545-A5D0-A9669F311BC9@lmi.net>	<001201d1ba84$b372a720$1a57f560$@intergga.ch>
	<49291F00-43FF-4140-8950-B53712BAC512@lmi.net>
	<001501d1bbdc$caeaf4d0$60c0de70$@intergga.ch>
Message-ID: <A3C9E9DA-C55C-4580-A027-2A474ADEABA1@lmi.net>

Hi Achim,

I apologize for being snippy in my response.  It must be because I am feeling a little out of depth on this topic, myself.  I am glad that Andy and others are willing to help, as they know more about it than I do.

It does help when you provide example inputs, commands you have run, and what was unexpected about your results.  Too many questions without specifics can be overwhelming.  If your mail was sent as HTML, it got stripped before getting to me.  I think our mailing list manager may be to blame.  Best just to compose in standard text format.

To create a sky that genskyvec will accept, it should be sufficient to take the output of gensky and replace the skyfunc definition with your colorpict modifier.  I don't think it cares about the primitive type (i.e., "brightfunc" versus "colorpict").

I agree that you should not use skymap.cal, which assumes local geometry.  A hemispherical source will not set the Px, Py, and Pz variables properly.

Cheers,
-Greg

> From: "Achim Geissler" <achim.geissler at intergga.ch>
> Date: June 1, 2016 1:08:31 AM PDT
> 
> Hi Greg,
> 
> sorry to be somehow seemingly rubbing you the wrong way - I can't remember
> you ever telling anybody else simply to "give up" :o( . It is definitely not
> intentional (and I may note here that I am not a native English
> speaker/writer).
> 
> The formatting was O.K. with html mail format. Whatever.
> 
> The Photosphere stuff was simply to try to give some information on the HDR
> in respond to your statements in regard to same (kind of "prove" that it is
> actually a Radiance readable HDR ...).
> 
> The comments on orienting the HDR are noted. I accept that if I do it right,
> it should be correct  ;o)
> 
> I wasn't planning to rewrite genskyvec.pl, but you have me confused on how I
> should "prepare a sky file it will accept" - which is clearly my goal -
> without understanding at least partially how it works / what the data flow
> is / what it needs.
> 
> Actually, the number of the warnings increased significantly and no result
> was obtained. With skyfunc_hdr a (not very useful) result was generated with
> "some" identical warning messages.
> 
> @Andy: Incidentally, this is in regard to one step before tackling genskyvec
> again, I am trying to generate a view of a scene via "sky_glow source sky"
> based on the HDR ... the scene has a ground plane, but does have a "hole"
> between this and the sky (which works with "normal" skies). I'll try your
> suggestion for the sky definition, thanks!
> 
> Skymap.cal is
> ===
> u = 1 - (0.5 + DDx *r);
> v = 0.5 + DDy *r;
> 
> r = if(DD, 0.707106781*(sin(acos(DDz)/2))/DD,0);
> 
> DD = sqrt(DDx*DDx + DDy*DDy);
> 
> DDy = Py*norm;
> DDx = Px*norm;
> DDz = Pz*norm;
> 
> norm = 1/sqrt(Py*Py + Px*Px + Pz*Pz);
> ===
> 
> I'll go back to RWR again and see what I can learn.
> 
> Thanks.
> 
> Best
> Achim
> 
> 
> -----Urspr?ngliche Nachricht-----
> Von: Greg Ward [mailto:gregoryjward at gmail.com] 
> Gesendet: Mittwoch, 1. Juni 2016 00:18
> An: Radiance general discussion
> Betreff: Re: [Radiance-general] genskyvec with HDR sky view?
> 
> Hi Achim,
> 
> I'll answer inline again, making a bad formatting job look even worse....
> 
>> From: "Achim Geissler" <achim.geissler at intergga.ch>
>> Date: May 30, 2016 8:05:25 AM PDT
>> 
>> Hi Greg,
>> 
>> thanks for the pointers. I am afraid, though, that I was unable to 
>> really make heads or tails of them.
>> a) HDR file (Photosphere)
>> 	i, the (test) HDR gives min/max values in falsecolor view of 39 to 
>> 2900, whatever the unit, there
>> 	ii, it gives histogram min/max values  for Luminance of 34.8 to
>> 4.43E+06
>> 	iii, it does not seem to be clipped
> 
> I don't know what (i), (ii) and (iii) refer to, if anything.  Are these
> particular processes you have tried?  If so, what are they?
> 
> Typically, falsecolor and Photosphere report photometric values (i.e.,
> radiance values times 179 lumens/watt efficacy).
> 
>> b) There is a sun (albeit behind a thin cloud cover). Simply adding a 
>> sun definition to my sky description did not really change anything,
> though.
>> Also, at this point I do not know which r,g,b radiance values to use 
>> for the solar "light" material and do these influence the result? And, 
>> actually, how to exactly position the HDR so that the sun positions tally.
> 
> If you have your sky turned the right way around, so that the Z-axis points
> up, Y-axis points north, and X-axis points east, then positioning the sun is
> a matter of running gensky with the appropriate date/time and global
> position parameters, and extracting the description it generates.  You can
> adjust the solar radiance values to match the global-diffuse measured that
> day using the -R option to gensky.
> 
>> c) I took a look at the genskyvec.pl script, however, I am not 
>> perl-literate so that is a bit difficult. I seem to be missing out on 
>> where this script >could< use values from the HDR file to generate the 
>> sky vectors. Part of the code seems to be a copy of the setting up of
> patches from reinhart.cal.
>> Also, the "skyfunc glow skyglow" and "skyglow source sky" are written 
>> to the
>> (an) octree in the script. Can I ignore that? Or does that let me 
>> leave these definitions out of my sky description? Which definition has
> precedent?
>> I can't really see where the "skybright.cal" values from a standard 
>> gensky sky would come into play - this should be what is replaced by 
>> values from the HDR?
> 
> I'm not suggesting you rewrite genskyvec.  Rather, I'm suggesting that you
> prepare a sky file it will accept and run it on that file.  If this doesn't
> make sense, then I suggest you give up.
> 
>> d) using the sky description as below but with "skyfunc" gives
>> rpict: warning - compute error for colorpict "skyfunc"
>> rpict: Division by zero
>> when trying to generate a view of a scene.
> 
> I don't know why globally replacing "skyfunc_hdr" with "skyfunc" in your
> file should cause new errors.  You must have done something else, or the
> original run would have generated the same errors.  I don't know what's in
> "map_sky.cal", which is the likely cause.
> 
>> I must admit the flow of data (input / output) in all the definitions 
>> is a bit of a mystery, for me. I did find a kind of description for 
>> colorpict in p_data.c, but that didn't really help, sadly. Looking at 
>> your code, I get the feeling I am not literate in any programming 
>> language ... :o(
> 
> Well, it's not particularly transparent, I will grant you.  There's this
> back-and-forth between the ray tracing and the scene description, such that
> when a material is intersected, it queries its modifiers, which calls back
> to your map_sky.cal file in a rather convoluted fashion.
> 
> You should look through Chapter 4 of "Rendering with Radiance."  Starting at
> Section 4.1.4, we talk about how the interaction between rendering and .cal
> files operates.
> 
>> If you (or, of course, anyone else out there that has done this 
>> before) can give any further help or tips, it would be much appreciated.
>> 
>> Best
>> Achim
>> 
>> 
>> -----Urspr?ngliche Nachricht-----
>> Von: Greg Ward [mailto:gregoryjward at gmail.com]
>> Gesendet: Samstag, 28. Mai 2016 01:27
>> An: Radiance general discussion
>> Betreff: Re: [Radiance-general] genskyvec with HDR sky view?
>> 
>> Hi Achim,
>> 
>> I wouldn't call what you are trying to do "easy," even if others have 
>> done it.  Your HDR file has to be in the correct units or scaled by 
>> the right amount to get calibrated radiance values, and even then, the 
>> sun is usually out of range(clipped) and won't be properly sampled if it
> is a clear sky.
>> 
>> As you noted, such a sky cannot be given as input to genskyvec, which 
>> expects a very specific set of primitives output by gensky or gendaylit.
>> Specifically, you need to name your colorpict pattern "skyfunc" and 
>> add a solar source if the sky is sunny.  You could try to modify your 
>> description to match, but you'd have to look at the Perl script 
>> src/util/genskyvec.pl to figure out how to satisfy the input requirements.
>> 
>> Once you have a sky description, you can use rtrace with the -I option 
>> to compute hemispherical irradiance, from which you can create an 
>> adjustment factor to apply to your glow based on horizontal irradiance.
>> 
>> It's all possible, but the details are not very straightforward.
>> 
>> Best,
>> -Greg
>> 
>>> From: Achim Geissler <achim.geissler at intergga.ch>
>>> Date: May 27, 2016 12:29:35 PM PDT
>>> 
>>> Hi all,
>>> 
>>> after searching high and low without clear results apart from a lot 
>>> of
>> pointers that ?everybody seems to be doing it? (so it should actually 
>> be easy and I am probably missing the forest due to seeing trees, as 
>> they say) a short question: The goal is to use HDR (fisheye) views of 
>> the sky for radiance calculations. All I could manage to date are 
>> pretty pictures with HDR skies. Ideally, the workflow would be ?the 
>> same? as when using a sky from gensky or gendaylit. E.g., it would be 
>> nice to be able to generate the sky vectors (genskyvec) from the HDR 
>> sky view. Is that possible? How? Trying to simply pipe a sky 
>> definition along the lines of
>>> 
>>> void colorpict skyfunc_hdr
>>> 7 red green blue sky_image.hdr map_sky.cal u v
>>> 0
>>> 0
>>> 
>>> skyfunc_hdr glow sky_glow_hdr
>>> 0
>>> 0
>>> 4 1 1 1 0
>>> 
>>> sky_glow_hdr source sky_hdr
>>> 0
>>> 0
>>> 4 0 0 1 180
>>> 
>>> into genskyvec didn?t work - well, would have been too simple (the
>> map_sky.cal is from the PhD by Coralie Cauwerts, 2013). The following 
>> approaches resulted in the ?pretty pictures? (replacing ?source? 
>> above)
>>> 
>>> sky_glow_hdr bubble sky_hdr
>>> 0
>>> 0
>>> 4 0 0 0 2000
>>> 
>>> or
>>> 
>>> !genbox sky_glow_hdr boxenv 2000 2000 1000 -i | xform -t -1000 -1000 
>>> -500
>>> 
>>> A further topic will be a ?calibration? of the HDR sky views - we 
>>> have
>> global horizontal and diffuse horizontal radiation values available. 
>> The current idea of a (possibly slightly rough) method of calibration 
>> would be to use the HDR sky to calculate the corresponding sensor 
>> value with radiance and ?somehow? introduce a scaling factor into the 
>> HDR sky such that the measured and calculated global horizontal radiation
> values tally.
>>> 
>>> Thanks for any hints & ideas!
>>> 
>>> Best
>>> Achim


From achim.geissler at intergga.ch  Wed Jun  1 13:00:06 2016
From: achim.geissler at intergga.ch (Achim Geissler)
Date: Wed, 1 Jun 2016 22:00:06 +0200
Subject: [Radiance-general] genskyvec with HDR sky view?
In-Reply-To: <A3C9E9DA-C55C-4580-A027-2A474ADEABA1@lmi.net>
References: <AFCAEC0C-40CC-46AD-A28E-AEAD6276E961@intergga.ch>
	<DCBD49C2-94A3-4545-A5D0-A9669F311BC9@lmi.net>
	<001201d1ba84$b372a720$1a57f560$@intergga.ch>
	<49291F00-43FF-4140-8950-B53712BAC512@lmi.net>
	<001501d1bbdc$caeaf4d0$60c0de70$@intergga.ch>
	<A3C9E9DA-C55C-4580-A027-2A474ADEABA1@lmi.net>
Message-ID: <D2BA4C73-D657-4802-B350-5223168F22E9@intergga.ch>

Hi Greg,

all clear, thanks.

Now I?m rolling. The basic problem was that I had tried to be too smart and combined the angmap.cal from Paul Debevec with the one from Coralie Cauwerts and ended up with the Px, Py and Pz that, as you write, are not set for a ?source? (a fact that I will try to understand, by and by). Now genskyvec has no problem with my HDR skies both with ?fisheye.cal? and a corrected ?map_sky.cal?. Perfect. Now the actual work can begin ;o)

Thanks for your time, Greg and Andy!

Best
Achim

P.S: I assume I will be back at some point, though ?

P.P.S.: @Andy: terrestriallight looks very interesting!!


> On 01 Jun 2016, at 19:44, Greg Ward <gregoryjward at gmail.com> wrote:
> 
> Hi Achim,
> 
> I apologize for being snippy in my response.  It must be because I am feeling a little out of depth on this topic, myself.  I am glad that Andy and others are willing to help, as they know more about it than I do.
> 
> It does help when you provide example inputs, commands you have run, and what was unexpected about your results.  Too many questions without specifics can be overwhelming.  If your mail was sent as HTML, it got stripped before getting to me.  I think our mailing list manager may be to blame.  Best just to compose in standard text format.
> 
> To create a sky that genskyvec will accept, it should be sufficient to take the output of gensky and replace the skyfunc definition with your colorpict modifier.  I don't think it cares about the primitive type (i.e., "brightfunc" versus "colorpict").
> 
> I agree that you should not use skymap.cal, which assumes local geometry.  A hemispherical source will not set the Px, Py, and Pz variables properly.
> 
> Cheers,
> -Greg
> 
>> From: "Achim Geissler" <achim.geissler at intergga.ch>
>> Date: June 1, 2016 1:08:31 AM PDT
>> 
>> Hi Greg,
>> 
>> sorry to be somehow seemingly rubbing you the wrong way - I can't remember
>> you ever telling anybody else simply to "give up" :o( . It is definitely not
>> intentional (and I may note here that I am not a native English
>> speaker/writer).
>> 
>> The formatting was O.K. with html mail format. Whatever.
>> 
>> The Photosphere stuff was simply to try to give some information on the HDR
>> in respond to your statements in regard to same (kind of "prove" that it is
>> actually a Radiance readable HDR ...).
>> 
>> The comments on orienting the HDR are noted. I accept that if I do it right,
>> it should be correct  ;o)
>> 
>> I wasn't planning to rewrite genskyvec.pl, but you have me confused on how I
>> should "prepare a sky file it will accept" - which is clearly my goal -
>> without understanding at least partially how it works / what the data flow
>> is / what it needs.
>> 
>> Actually, the number of the warnings increased significantly and no result
>> was obtained. With skyfunc_hdr a (not very useful) result was generated with
>> "some" identical warning messages.
>> 
>> @Andy: Incidentally, this is in regard to one step before tackling genskyvec
>> again, I am trying to generate a view of a scene via "sky_glow source sky"
>> based on the HDR ... the scene has a ground plane, but does have a "hole"
>> between this and the sky (which works with "normal" skies). I'll try your
>> suggestion for the sky definition, thanks!
>> 
>> Skymap.cal is
>> ===
>> u = 1 - (0.5 + DDx *r);
>> v = 0.5 + DDy *r;
>> 
>> r = if(DD, 0.707106781*(sin(acos(DDz)/2))/DD,0);
>> 
>> DD = sqrt(DDx*DDx + DDy*DDy);
>> 
>> DDy = Py*norm;
>> DDx = Px*norm;
>> DDz = Pz*norm;
>> 
>> norm = 1/sqrt(Py*Py + Px*Px + Pz*Pz);
>> ===
>> 
>> I'll go back to RWR again and see what I can learn.
>> 
>> Thanks.
>> 
>> Best
>> Achim
>> 
>> 
>> -----Urspr?ngliche Nachricht-----
>> Von: Greg Ward [mailto:gregoryjward at gmail.com] 
>> Gesendet: Mittwoch, 1. Juni 2016 00:18
>> An: Radiance general discussion
>> Betreff: Re: [Radiance-general] genskyvec with HDR sky view?
>> 
>> Hi Achim,
>> 
>> I'll answer inline again, making a bad formatting job look even worse....
>> 
>>> From: "Achim Geissler" <achim.geissler at intergga.ch>
>>> Date: May 30, 2016 8:05:25 AM PDT
>>> 
>>> Hi Greg,
>>> 
>>> thanks for the pointers. I am afraid, though, that I was unable to 
>>> really make heads or tails of them.
>>> a) HDR file (Photosphere)
>>> 	i, the (test) HDR gives min/max values in falsecolor view of 39 to 
>>> 2900, whatever the unit, there
>>> 	ii, it gives histogram min/max values  for Luminance of 34.8 to
>>> 4.43E+06
>>> 	iii, it does not seem to be clipped
>> 
>> I don't know what (i), (ii) and (iii) refer to, if anything.  Are these
>> particular processes you have tried?  If so, what are they?
>> 
>> Typically, falsecolor and Photosphere report photometric values (i.e.,
>> radiance values times 179 lumens/watt efficacy).
>> 
>>> b) There is a sun (albeit behind a thin cloud cover). Simply adding a 
>>> sun definition to my sky description did not really change anything,
>> though.
>>> Also, at this point I do not know which r,g,b radiance values to use 
>>> for the solar "light" material and do these influence the result? And, 
>>> actually, how to exactly position the HDR so that the sun positions tally.
>> 
>> If you have your sky turned the right way around, so that the Z-axis points
>> up, Y-axis points north, and X-axis points east, then positioning the sun is
>> a matter of running gensky with the appropriate date/time and global
>> position parameters, and extracting the description it generates.  You can
>> adjust the solar radiance values to match the global-diffuse measured that
>> day using the -R option to gensky.
>> 
>>> c) I took a look at the genskyvec.pl script, however, I am not 
>>> perl-literate so that is a bit difficult. I seem to be missing out on 
>>> where this script >could< use values from the HDR file to generate the 
>>> sky vectors. Part of the code seems to be a copy of the setting up of
>> patches from reinhart.cal.
>>> Also, the "skyfunc glow skyglow" and "skyglow source sky" are written 
>>> to the
>>> (an) octree in the script. Can I ignore that? Or does that let me 
>>> leave these definitions out of my sky description? Which definition has
>> precedent?
>>> I can't really see where the "skybright.cal" values from a standard 
>>> gensky sky would come into play - this should be what is replaced by 
>>> values from the HDR?
>> 
>> I'm not suggesting you rewrite genskyvec.  Rather, I'm suggesting that you
>> prepare a sky file it will accept and run it on that file.  If this doesn't
>> make sense, then I suggest you give up.
>> 
>>> d) using the sky description as below but with "skyfunc" gives
>>> rpict: warning - compute error for colorpict "skyfunc"
>>> rpict: Division by zero
>>> when trying to generate a view of a scene.
>> 
>> I don't know why globally replacing "skyfunc_hdr" with "skyfunc" in your
>> file should cause new errors.  You must have done something else, or the
>> original run would have generated the same errors.  I don't know what's in
>> "map_sky.cal", which is the likely cause.
>> 
>>> I must admit the flow of data (input / output) in all the definitions 
>>> is a bit of a mystery, for me. I did find a kind of description for 
>>> colorpict in p_data.c, but that didn't really help, sadly. Looking at 
>>> your code, I get the feeling I am not literate in any programming 
>>> language ... :o(
>> 
>> Well, it's not particularly transparent, I will grant you.  There's this
>> back-and-forth between the ray tracing and the scene description, such that
>> when a material is intersected, it queries its modifiers, which calls back
>> to your map_sky.cal file in a rather convoluted fashion.
>> 
>> You should look through Chapter 4 of "Rendering with Radiance."  Starting at
>> Section 4.1.4, we talk about how the interaction between rendering and .cal
>> files operates.
>> 
>>> If you (or, of course, anyone else out there that has done this 
>>> before) can give any further help or tips, it would be much appreciated.
>>> 
>>> Best
>>> Achim
>>> 
>>> 
>>> -----Urspr?ngliche Nachricht-----
>>> Von: Greg Ward [mailto:gregoryjward at gmail.com]
>>> Gesendet: Samstag, 28. Mai 2016 01:27
>>> An: Radiance general discussion
>>> Betreff: Re: [Radiance-general] genskyvec with HDR sky view?
>>> 
>>> Hi Achim,
>>> 
>>> I wouldn't call what you are trying to do "easy," even if others have 
>>> done it.  Your HDR file has to be in the correct units or scaled by 
>>> the right amount to get calibrated radiance values, and even then, the 
>>> sun is usually out of range(clipped) and won't be properly sampled if it
>> is a clear sky.
>>> 
>>> As you noted, such a sky cannot be given as input to genskyvec, which 
>>> expects a very specific set of primitives output by gensky or gendaylit.
>>> Specifically, you need to name your colorpict pattern "skyfunc" and 
>>> add a solar source if the sky is sunny.  You could try to modify your 
>>> description to match, but you'd have to look at the Perl script 
>>> src/util/genskyvec.pl to figure out how to satisfy the input requirements.
>>> 
>>> Once you have a sky description, you can use rtrace with the -I option 
>>> to compute hemispherical irradiance, from which you can create an 
>>> adjustment factor to apply to your glow based on horizontal irradiance.
>>> 
>>> It's all possible, but the details are not very straightforward.
>>> 
>>> Best,
>>> -Greg
>>> 
>>>> From: Achim Geissler <achim.geissler at intergga.ch>
>>>> Date: May 27, 2016 12:29:35 PM PDT
>>>> 
>>>> Hi all,
>>>> 
>>>> after searching high and low without clear results apart from a lot 
>>>> of
>>> pointers that ?everybody seems to be doing it? (so it should actually 
>>> be easy and I am probably missing the forest due to seeing trees, as 
>>> they say) a short question: The goal is to use HDR (fisheye) views of 
>>> the sky for radiance calculations. All I could manage to date are 
>>> pretty pictures with HDR skies. Ideally, the workflow would be ?the 
>>> same? as when using a sky from gensky or gendaylit. E.g., it would be 
>>> nice to be able to generate the sky vectors (genskyvec) from the HDR 
>>> sky view. Is that possible? How? Trying to simply pipe a sky 
>>> definition along the lines of
>>>> 
>>>> void colorpict skyfunc_hdr
>>>> 7 red green blue sky_image.hdr map_sky.cal u v
>>>> 0
>>>> 0
>>>> 
>>>> skyfunc_hdr glow sky_glow_hdr
>>>> 0
>>>> 0
>>>> 4 1 1 1 0
>>>> 
>>>> sky_glow_hdr source sky_hdr
>>>> 0
>>>> 0
>>>> 4 0 0 1 180
>>>> 
>>>> into genskyvec didn?t work - well, would have been too simple (the
>>> map_sky.cal is from the PhD by Coralie Cauwerts, 2013). The following 
>>> approaches resulted in the ?pretty pictures? (replacing ?source? 
>>> above)
>>>> 
>>>> sky_glow_hdr bubble sky_hdr
>>>> 0
>>>> 0
>>>> 4 0 0 0 2000
>>>> 
>>>> or
>>>> 
>>>> !genbox sky_glow_hdr boxenv 2000 2000 1000 -i | xform -t -1000 -1000 
>>>> -500
>>>> 
>>>> A further topic will be a ?calibration? of the HDR sky views - we 
>>>> have
>>> global horizontal and diffuse horizontal radiation values available. 
>>> The current idea of a (possibly slightly rough) method of calibration 
>>> would be to use the HDR sky to calculate the corresponding sensor 
>>> value with radiance and ?somehow? introduce a scaling factor into the 
>>> HDR sky such that the measured and calculated global horizontal radiation
>> values tally.
>>>> 
>>>> Thanks for any hints & ideas!
>>>> 
>>>> Best
>>>> Achim
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general

achim.geissler at intergga.ch






From inanici at u.washington.edu  Thu Jun  2 09:39:58 2016
From: inanici at u.washington.edu (Mehlika Inanici)
Date: Thu, 2 Jun 2016 09:39:58 -0700 (PDT)
Subject: [Radiance-general] [HDRI] Photosphere (or equivalent) in Linux
 or Windows?
In-Reply-To: <CAF-iH4+Q_-nFcHWaLXxHTV6Du3Q4aQ6cRSSCc33m91eXuvJRdA@mail.gmail.com>
Message-ID: <alpine.LRH.2.01.1606020939580.3808@hymn02.u.washington.edu>



Hi German,

hdrscope works in Windows 10. That is what I am using. You need a valid Radaince installation and path and raypath set to Radiance/bin and Radiance/lib.

Best,
Mehlika


On Wed, 1 Jun 2016, Germ?n Molina Larrain wrote:

> Have you heard about HDR Scope??? I saw a demonstration given by Mehlika Inanici once... it was REALLY COOL. For Windows only, though.
> 
> Anyone knows wheather it has been updated to work in Windows 10?
> 
> 2016-05-31 9:45 GMT-03:00 Chamilothori Kynthia <kynthia.chamilothori at epfl.ch>:
>       Hi Greg,
> 
>       Thanks for your answer! Great to hear that the Windows port is stable and working!
>       I completely understand the difficulty of continuing the porting work - thanks for all the work you have already put into this. I think that for what I want to do
>       hdrgen and pcomb will do fine for now.
> 
>       Cheers,
>       Kynthia
>       ------------------------------
> 
>       Message: 3
>       Date: Mon, 30 May 2016 08:40:58 -0700
>       From: Greg Ward <gregoryjward at gmail.com>
>       To: Radiance general discussion <radiance-general at radiance-online.org>
>       Subject: Re: [Radiance-general] [HDRI] Photosphere (or equivalent) in
>       ? ? ? ? Linux? ?or Windows?
>       Message-ID: <519C9544-A8CF-430D-8857-27537814B93B at lmi.net>
>       Content-Type: text/plain; charset="us-ascii"
> 
>       Hi Kynthia,
> 
>       To recover the costs related to developing a Windows version, we have been charging a site license fee of $250 US to institutions that want to use Elena's port of
>       Photosphere.? It does appear to be stable inasmuch as we have received no complaints about its behavior from any of the licensees.
> 
>       The long-term goal is to port her version, which is based on the cross-platform wxWidgets API, back to newer versions of Mac OS X and even Linux.? Unfortunately, I
>       have not had time to pursue this activity.? I am unsure at this point when I will ever get to it....
> 
>       Cheers,
>       -Greg
> 
>       > From: Chamilothori Kynthia <kynthia.chamilothori at epfl.ch>
>       > Date: May 30, 2016 6:09:23 AM PDT
>       >
>       > Dear Radiance community,
>       >
>       > There was a great effort a couple of years ago to create a cross-platform version of Photosphere by Greg and Helena Eydelberg. Is this version perhaps stable enough
>       for distribution?
>       > Otherwise, what would you use as an alternative if not Photosphere? Has anyone used successfully any other workaround (e.g. an OS X virtual box)?
>       >
>       > Thanks for any ideas!
>       >
>       > Best,
>       > Kynthia Chamilothori
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160530/915e41c1/attachment-0001.html>
> 
> ------------------------------
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
> 
> 
> End of Radiance-general Digest, Vol 147, Issue 11
> *************************************************
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
> 
> 
> 
>

From gregoryjward at gmail.com  Thu Jun  2 09:48:20 2016
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu, 2 Jun 2016 09:48:20 -0700
Subject: [Radiance-general] [HDRI] Photosphere (or equivalent) in Linux
	or Windows?
In-Reply-To: <b49672ce1db1498bb95a65050f96f1e8@rexb.intranet.epfl.ch>
References: <b49672ce1db1498bb95a65050f96f1e8@rexb.intranet.epfl.ch>
Message-ID: <208F8A65-1C86-4F69-B520-79B73524A325@lmi.net>

Seems relevant to this discussion as well (from Radiance-general list):

> From: Mehlika Inanici <inanici at u.washington.edu>
> Subject: [!!SP: THIS MESSAGE IS SPAM] Re: [Radiance-general] [HDRI] Photosphere (or equivalent) in Linux or Windows?
> Date: June 2, 2016 9:39:58 AM PDT
> 
> Hi German,
> 
> hdrscope works in Windows 10. That is what I am using. You need a valid Radaince installation and path and raypath set to Radiance/bin and Radiance/lib.
> 
> Best,
> Mehlika
> 
> 
> On Wed, 1 Jun 2016, Germ?n Molina Larrain wrote:
> 
>> Have you heard about HDR Scope??? I saw a demonstration given by Mehlika Inanici once... it was REALLY COOL. For Windows only, though.
>> Anyone knows wheather it has been updated to work in Windows 10?
>> 2016-05-31 9:45 GMT-03:00 Chamilothori Kynthia <kynthia.chamilothori at epfl.ch>:
>>      Hi Greg,
>>      Thanks for your answer! Great to hear that the Windows port is stable and working!
>>      I completely understand the difficulty of continuing the porting work - thanks for all the work you have already put into this. I think that for what I want to do
>>      hdrgen and pcomb will do fine for now.
>>      Cheers,
>>      Kynthia
>>      ------------------------------
>>      Message: 3
>>      Date: Mon, 30 May 2016 08:40:58 -0700
>>      From: Greg Ward <gregoryjward at gmail.com>
>>      To: Radiance general discussion <radiance-general at radiance-online.org>
>>      Subject: Re: [Radiance-general] [HDRI] Photosphere (or equivalent) in
>>              Linux   or Windows?
>>      Message-ID: <519C9544-A8CF-430D-8857-27537814B93B at lmi.net>
>>      Content-Type: text/plain; charset="us-ascii"
>>      Hi Kynthia,
>>      To recover the costs related to developing a Windows version, we have been charging a site license fee of $250 US to institutions that want to use Elena's port of
>>      Photosphere.  It does appear to be stable inasmuch as we have received no complaints about its behavior from any of the licensees.
>>      The long-term goal is to port her version, which is based on the cross-platform wxWidgets API, back to newer versions of Mac OS X and even Linux.  Unfortunately, I
>>      have not had time to pursue this activity.  I am unsure at this point when I will ever get to it....
>>      Cheers,
>>      -Greg
>>      > From: Chamilothori Kynthia <kynthia.chamilothori at epfl.ch>
>>      > Date: May 30, 2016 6:09:23 AM PDT
>>      >
>>      > Dear Radiance community,
>>      >
>>      > There was a great effort a couple of years ago to create a cross-platform version of Photosphere by Greg and Helena Eydelberg. Is this version perhaps stable enough
>>      for distribution?
>>      > Otherwise, what would you use as an alternative if not Photosphere? Has anyone used successfully any other workaround (e.g. an OS X virtual box)?
>>      >
>>      > Thanks for any ideas!
>>      >
>>      > Best,
>>      > Kynthia Chamilothori
>> -------------- next part --------------
>> An HTML attachment was scrubbed...
>> URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160530/915e41c1/attachment-0001.html>
>> ------------------------------
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general


From germolinal at gmail.com  Thu Jun  2 09:58:46 2016
From: germolinal at gmail.com (=?UTF-8?Q?Germ=C3=A1n_Molina_Larrain?=)
Date: Thu, 2 Jun 2016 13:58:46 -0300
Subject: [Radiance-general] [HDRI] Photosphere (or equivalent) in Linux
	or Windows?
In-Reply-To: <alpine.LRH.2.01.1606020939580.3808@hymn02.u.washington.edu>
References: <CAF-iH4+Q_-nFcHWaLXxHTV6Du3Q4aQ6cRSSCc33m91eXuvJRdA@mail.gmail.com>
	<alpine.LRH.2.01.1606020939580.3808@hymn02.u.washington.edu>
Message-ID: <CAF-iH4JJDKDg=Hv1UUy1iY3snmkqzLvqf1pH8C3pxhNTL3u__g@mail.gmail.com>

Thanks, Mehlika.

I downloaded it from http://courses.washington.edu/hdrscope/download.html
and installed the NREL Binaries for Windows (they are working), but the
setup still tells me that I need to install Radiance.

Is that a known problem? when I put "echo %RAYPATH%" in the command line,
it returns the correct path.

Best,

Germ?n

2016-06-02 13:39 GMT-03:00 Mehlika Inanici <inanici at u.washington.edu>:

>
>
> Hi German,
>
> hdrscope works in Windows 10. That is what I am using. You need a valid
> Radaince installation and path and raypath set to Radiance/bin and
> Radiance/lib.
>
> Best,
> Mehlika
>
>
>
> On Wed, 1 Jun 2016, Germ?n Molina Larrain wrote:
>
> Have you heard about HDR Scope??? I saw a demonstration given by Mehlika
>> Inanici once... it was REALLY COOL. For Windows only, though.
>>
>> Anyone knows wheather it has been updated to work in Windows 10?
>>
>> 2016-05-31 9:45 GMT-03:00 Chamilothori Kynthia <
>> kynthia.chamilothori at epfl.ch>:
>>       Hi Greg,
>>
>>       Thanks for your answer! Great to hear that the Windows port is
>> stable and working!
>>       I completely understand the difficulty of continuing the porting
>> work - thanks for all the work you have already put into this. I think that
>> for what I want to do
>>       hdrgen and pcomb will do fine for now.
>>
>>       Cheers,
>>       Kynthia
>>       ------------------------------
>>
>>       Message: 3
>>       Date: Mon, 30 May 2016 08:40:58 -0700
>>       From: Greg Ward <gregoryjward at gmail.com>
>>       To: Radiance general discussion <
>> radiance-general at radiance-online.org>
>>       Subject: Re: [Radiance-general] [HDRI] Photosphere (or equivalent)
>> in
>>               Linux   or Windows?
>>       Message-ID: <519C9544-A8CF-430D-8857-27537814B93B at lmi.net>
>>       Content-Type: text/plain; charset="us-ascii"
>>
>>       Hi Kynthia,
>>
>>       To recover the costs related to developing a Windows version, we
>> have been charging a site license fee of $250 US to institutions that want
>> to use Elena's port of
>>       Photosphere.  It does appear to be stable inasmuch as we have
>> received no complaints about its behavior from any of the licensees.
>>
>>       The long-term goal is to port her version, which is based on the
>> cross-platform wxWidgets API, back to newer versions of Mac OS X and even
>> Linux.  Unfortunately, I
>>       have not had time to pursue this activity.  I am unsure at this
>> point when I will ever get to it....
>>
>>       Cheers,
>>       -Greg
>>
>>       > From: Chamilothori Kynthia <kynthia.chamilothori at epfl.ch>
>>       > Date: May 30, 2016 6:09:23 AM PDT
>>       >
>>       > Dear Radiance community,
>>       >
>>       > There was a great effort a couple of years ago to create a
>> cross-platform version of Photosphere by Greg and Helena Eydelberg. Is this
>> version perhaps stable enough
>>       for distribution?
>>       > Otherwise, what would you use as an alternative if not
>> Photosphere? Has anyone used successfully any other workaround (e.g. an OS
>> X virtual box)?
>>       >
>>       > Thanks for any ideas!
>>       >
>>       > Best,
>>       > Kynthia Chamilothori
>> -------------- next part --------------
>> An HTML attachment was scrubbed...
>> URL: <
>> http://www.radiance-online.org/pipermail/radiance-general/attachments/20160530/915e41c1/attachment-0001.html
>> >
>>
>> ------------------------------
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
>> End of Radiance-general Digest, Vol 147, Issue 11
>> *************************************************
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
>>
>>
>>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160602/48cf9cff/attachment-0001.html>

From nathanieljon at gmail.com  Thu Jun  2 10:09:07 2016
From: nathanieljon at gmail.com (Nathaniel Jones)
Date: Thu, 2 Jun 2016 13:09:07 -0400
Subject: [Radiance-general] [HDRI] Photosphere (or equivalent) in Linux
	or Windows?
In-Reply-To: <CAF-iH4JJDKDg=Hv1UUy1iY3snmkqzLvqf1pH8C3pxhNTL3u__g@mail.gmail.com>
References: <CAF-iH4+Q_-nFcHWaLXxHTV6Du3Q4aQ6cRSSCc33m91eXuvJRdA@mail.gmail.com>
	<alpine.LRH.2.01.1606020939580.3808@hymn02.u.washington.edu>
	<CAF-iH4JJDKDg=Hv1UUy1iY3snmkqzLvqf1pH8C3pxhNTL3u__g@mail.gmail.com>
Message-ID: <CAJR73ttSnKLj5OE4nRjwgqYA=bU4t+Day7UiumGBD6fN9aAVMA@mail.gmail.com>

He Germ?n,

I recall having the same problem when I installed hdrscope on Windows 7. As
I recall, I had set a system-wide RAYPATH, but it turned out that the
installer only checks the user environment variables. Adding Radiance to
the user PATH and RAYPATH, then running the installer, and then removing
the user PATH and RAYPATH seemed to work.

Nathaniel

On Thu, Jun 2, 2016 at 12:58 PM, Germ?n Molina Larrain <germolinal at gmail.com
> wrote:

> Thanks, Mehlika.
>
> I downloaded it from http://courses.washington.edu/hdrscope/download.html
> and installed the NREL Binaries for Windows (they are working), but the
> setup still tells me that I need to install Radiance.
>
> Is that a known problem? when I put "echo %RAYPATH%" in the command line,
> it returns the correct path.
>
> Best,
>
> Germ?n
>
> 2016-06-02 13:39 GMT-03:00 Mehlika Inanici <inanici at u.washington.edu>:
>
>>
>>
>> Hi German,
>>
>> hdrscope works in Windows 10. That is what I am using. You need a valid
>> Radaince installation and path and raypath set to Radiance/bin and
>> Radiance/lib.
>>
>> Best,
>> Mehlika
>>
>>
>>
>> On Wed, 1 Jun 2016, Germ?n Molina Larrain wrote:
>>
>> Have you heard about HDR Scope??? I saw a demonstration given by Mehlika
>>> Inanici once... it was REALLY COOL. For Windows only, though.
>>>
>>> Anyone knows wheather it has been updated to work in Windows 10?
>>>
>>> 2016-05-31 9:45 GMT-03:00 Chamilothori Kynthia <
>>> kynthia.chamilothori at epfl.ch>:
>>>       Hi Greg,
>>>
>>>       Thanks for your answer! Great to hear that the Windows port is
>>> stable and working!
>>>       I completely understand the difficulty of continuing the porting
>>> work - thanks for all the work you have already put into this. I think that
>>> for what I want to do
>>>       hdrgen and pcomb will do fine for now.
>>>
>>>       Cheers,
>>>       Kynthia
>>>       ------------------------------
>>>
>>>       Message: 3
>>>       Date: Mon, 30 May 2016 08:40:58 -0700
>>>       From: Greg Ward <gregoryjward at gmail.com>
>>>       To: Radiance general discussion <
>>> radiance-general at radiance-online.org>
>>>       Subject: Re: [Radiance-general] [HDRI] Photosphere (or equivalent)
>>> in
>>>               Linux   or Windows?
>>>       Message-ID: <519C9544-A8CF-430D-8857-27537814B93B at lmi.net>
>>>       Content-Type: text/plain; charset="us-ascii"
>>>
>>>       Hi Kynthia,
>>>
>>>       To recover the costs related to developing a Windows version, we
>>> have been charging a site license fee of $250 US to institutions that want
>>> to use Elena's port of
>>>       Photosphere.  It does appear to be stable inasmuch as we have
>>> received no complaints about its behavior from any of the licensees.
>>>
>>>       The long-term goal is to port her version, which is based on the
>>> cross-platform wxWidgets API, back to newer versions of Mac OS X and even
>>> Linux.  Unfortunately, I
>>>       have not had time to pursue this activity.  I am unsure at this
>>> point when I will ever get to it....
>>>
>>>       Cheers,
>>>       -Greg
>>>
>>>       > From: Chamilothori Kynthia <kynthia.chamilothori at epfl.ch>
>>>       > Date: May 30, 2016 6:09:23 AM PDT
>>>       >
>>>       > Dear Radiance community,
>>>       >
>>>       > There was a great effort a couple of years ago to create a
>>> cross-platform version of Photosphere by Greg and Helena Eydelberg. Is this
>>> version perhaps stable enough
>>>       for distribution?
>>>       > Otherwise, what would you use as an alternative if not
>>> Photosphere? Has anyone used successfully any other workaround (e.g. an OS
>>> X virtual box)?
>>>       >
>>>       > Thanks for any ideas!
>>>       >
>>>       > Best,
>>>       > Kynthia Chamilothori
>>> -------------- next part --------------
>>> An HTML attachment was scrubbed...
>>> URL: <
>>> http://www.radiance-online.org/pipermail/radiance-general/attachments/20160530/915e41c1/attachment-0001.html
>>> >
>>>
>>> ------------------------------
>>>
>>> _______________________________________________
>>> Radiance-general mailing list
>>> Radiance-general at radiance-online.org
>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>>
>>>
>>> End of Radiance-general Digest, Vol 147, Issue 11
>>> *************************************************
>>>
>>> _______________________________________________
>>> Radiance-general mailing list
>>> Radiance-general at radiance-online.org
>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>>
>>>
>>>
>>>
>>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160602/b92eb2c7/attachment.html>

From majid_miri at yahoo.com  Fri Jun  3 01:05:12 2016
From: majid_miri at yahoo.com (Majid Miri)
Date: Fri, 3 Jun 2016 08:05:12 +0000 (UTC)
Subject: [Radiance-general] [HDRI] Photosphere (or equivalent) in
	Linux	or Windows?
In-Reply-To: <CAJR73ttSnKLj5OE4nRjwgqYA=bU4t+Day7UiumGBD6fN9aAVMA@mail.gmail.com>
References: <CAF-iH4+Q_-nFcHWaLXxHTV6Du3Q4aQ6cRSSCc33m91eXuvJRdA@mail.gmail.com>
	<alpine.LRH.2.01.1606020939580.3808@hymn02.u.washington.edu>
	<CAF-iH4JJDKDg=Hv1UUy1iY3snmkqzLvqf1pH8C3pxhNTL3u__g@mail.gmail.com>
	<CAJR73ttSnKLj5OE4nRjwgqYA=bU4t+Day7UiumGBD6fN9aAVMA@mail.gmail.com>
Message-ID: <1525332067.601228.1464941112817.JavaMail.yahoo@mail.yahoo.com>

Hi all,
I also?developed a window based software a few years ago to work with HDR images. You can download it from this link:?http://aftabsoft.net/AftabAlpha/Software/Aftab_Setup.exeThey are some tutorials for it here?http://aftabsoft.net/aftab-alpha.html
Regards,Majid


 

    On Thursday, June 2, 2016 7:09 PM, Nathaniel Jones <nathanieljon at gmail.com> wrote:
 

 He Germ?n,

I recall having the same problem when I installed hdrscope on Windows 7. As I recall, I had set a system-wide RAYPATH, but it turned out that the installer only checks the user environment variables. Adding Radiance to the user PATH and RAYPATH, then running the installer, and then removing the user PATH and RAYPATH seemed to work.
Nathaniel
On Thu, Jun 2, 2016 at 12:58 PM, Germ?n Molina Larrain <germolinal at gmail.com> wrote:

Thanks, Mehlika.

I downloaded it from http://courses.washington.edu/hdrscope/download.html and installed the NREL Binaries for Windows (they are working), but the setup still tells me that I need to install Radiance.

Is that a known problem? when I put "echo %RAYPATH%" in the command line, it returns the correct path.

Best,

Germ?n

2016-06-02 13:39 GMT-03:00 Mehlika Inanici <inanici at u.washington.edu>:



Hi German,

hdrscope works in Windows 10. That is what I am using. You need a valid Radaince installation and path and raypath set to Radiance/bin and Radiance/lib.

Best,
Mehlika


On Wed, 1 Jun 2016, Germ?n Molina Larrain wrote:


Have you heard about HDR Scope??? I saw a demonstration given by Mehlika Inanici once... it was REALLY COOL. For Windows only, though.

Anyone knows wheather it has been updated to work in Windows 10?

2016-05-31 9:45 GMT-03:00 Chamilothori Kynthia <kynthia.chamilothori at epfl.ch>:
? ? ? Hi Greg,

? ? ? Thanks for your answer! Great to hear that the Windows port is stable and working!
? ? ? I completely understand the difficulty of continuing the porting work - thanks for all the work you have already put into this. I think that for what I want to do
? ? ? hdrgen and pcomb will do fine for now.

? ? ? Cheers,
? ? ? Kynthia
? ? ? ------------------------------

? ? ? Message: 3
? ? ? Date: Mon, 30 May 2016 08:40:58 -0700
? ? ? From: Greg Ward <gregoryjward at gmail.com>
? ? ? To: Radiance general discussion <radiance-general at radiance-online.org>
? ? ? Subject: Re: [Radiance-general] [HDRI] Photosphere (or equivalent) in
? ? ? ? ? ? ? Linux? ?or Windows?
? ? ? Message-ID: <519C9544-A8CF-430D-8857-27537814B93B at lmi.net>
? ? ? Content-Type: text/plain; charset="us-ascii"

? ? ? Hi Kynthia,

? ? ? To recover the costs related to developing a Windows version, we have been charging a site license fee of $250 US to institutions that want to use Elena's port of
? ? ? Photosphere.? It does appear to be stable inasmuch as we have received no complaints about its behavior from any of the licensees.

? ? ? The long-term goal is to port her version, which is based on the cross-platform wxWidgets API, back to newer versions of Mac OS X and even Linux.? Unfortunately, I
? ? ? have not had time to pursue this activity.? I am unsure at this point when I will ever get to it....

? ? ? Cheers,
? ? ? -Greg

? ? ? > From: Chamilothori Kynthia <kynthia.chamilothori at epfl.ch>
? ? ? > Date: May 30, 2016 6:09:23 AM PDT
? ? ? >
? ? ? > Dear Radiance community,
? ? ? >
? ? ? > There was a great effort a couple of years ago to create a cross-platform version of Photosphere by Greg and Helena Eydelberg. Is this version perhaps stable enough
? ? ? for distribution?
? ? ? > Otherwise, what would you use as an alternative if not Photosphere? Has anyone used successfully any other workaround (e.g. an OS X virtual box)?
? ? ? >
? ? ? > Thanks for any ideas!
? ? ? >
? ? ? > Best,
? ? ? > Kynthia Chamilothori
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160530/915e41c1/attachment-0001.html>

------------------------------

_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general


End of Radiance-general Digest, Vol 147, Issue 11
*************************************************

_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general






_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general




_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general




_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general


  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160603/39df0d9c/attachment.html>

From Santiago.Torres at arup.com  Fri Jun  3 13:10:50 2016
From: Santiago.Torres at arup.com (Santiago Torres)
Date: Fri, 3 Jun 2016 20:10:50 +0000
Subject: [Radiance-general] Strange behaviour with mixed material
Message-ID: <ACF98A76D0047542A29FEB2F3EB0DAA151BB04@E-AEXMBX01.global.arup.com>

Dear all,



I'm trying to define a mixfunc material to modify a mirror definition, so I can create holes (horizontal bands in this case) in the mirror. This was explained in an old tutorial by G. Antonutto, which now seems lost (at least I couldn't find it online... pillo?).



The complete definition is like this:



## metal

void metal metal_01

0

0

5 .8 .8 .8 .05 0



## mix the metal with void to create holes

void mixfunc strip

4 metal_01 void 'if(sin(Pz/10),0,1)' .

0

0



## alter the reflectance of mirror, reflectance is 0% for holes

void brightfunc band

2 'if(sin(Pz/10),0,1)' .

0

0



## mirror attached to the metal surface with holes

band mirror mix_01

1 strip

0

3 .9 .9 .9





If I create a cube with the "mix_01" material, it looks as expected. Horizontal bands of void in the mirror let the direct light through and the reflected light is also in matching stripes.



However, with the diffuse calculation, light doesn't seem to get through the void part. For example, if I measure irradiance inside the cube with only a glow source outside, I get zero.



The strangest part is that if I look at the model in rvu, it looks fine and there is diffuse light inside... unless I set -aa 0!!!



All other settings seem to make no difference (with ab > 0, of course).



Rpict behaves like rtrace, no diffuse light through.



I've tried setting all rtrace parameters to the rvu defaults (including dr 0), but the result is still nothing.



I'm sure there is an explanation, which is possibly that the material is just too weird, but I'm still confused by the strange difference in behaviour between rtrace/rpict and rvu...



Any ideas?

Thanks!

Santiago


____________________________________________________________
Electronic mail messages entering and leaving Arup  business
systems are scanned for acceptability of content and viruses
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160603/902ead96/attachment.html>

From wouter.beck at ascendilex.nl  Fri Jun  3 13:16:57 2016
From: wouter.beck at ascendilex.nl (ascendilex | Wouter Beck)
Date: Fri, 3 Jun 2016 22:16:57 +0200
Subject: [Radiance-general] Installation BSDFviewer Ubuntu14.04 64bit
In-Reply-To: <CAEFJVk-7wg=+6LQ1isCMUR0=KxYceb9US1mte2c2zWR1gNp7OQ@mail.gmail.com>
References: <CAFNnwksX9BGCxv=L7sVqanWrKFTCkGdi9qw-gQv7_k-8imUypQ@mail.gmail.com>
	<CAEFJVk-7wg=+6LQ1isCMUR0=KxYceb9US1mte2c2zWR1gNp7OQ@mail.gmail.com>
Message-ID: <5751E5B9.30305@ascendilex.nl>

An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160603/e76c01f6/attachment-0001.html>

From gregoryjward at gmail.com  Fri Jun  3 13:38:53 2016
From: gregoryjward at gmail.com (Greg Ward)
Date: Fri, 3 Jun 2016 13:38:53 -0700
Subject: [Radiance-general] Strange behaviour with mixed material
In-Reply-To: <ACF98A76D0047542A29FEB2F3EB0DAA151BB04@E-AEXMBX01.global.arup.com>
References: <ACF98A76D0047542A29FEB2F3EB0DAA151BB04@E-AEXMBX01.global.arup.com>
Message-ID: <13A27406-0AD6-45EC-98F3-70046AF9C537@lmi.net>

Hi Santiago,

Giulio kindly shared his tutorials and I haven't gotten around to putting them onto radiance-online.org, mostly because I don't know how to modify the website anymore since it was updated.  However, I have uploaded this particular tutorial for you to:

	http://www.anyhere.com/gward/pickup/giulio_mirror.tar.gz

However, this is really a situation that didn't occur to me, where you have indirect rays coming from the opposite side.  I see now that I should modify a test in the m_mirror.c routine to account for this case.  I will send you a modified version of this file in hopes that you can rebuild and test it for me.

Cheers,
-Greg

> From: Santiago Torres <Santiago.Torres at arup.com>
> Date: June 3, 2016 1:10:50 PM PDT
> 
> Dear all,
>  
> I?m trying to define a mixfunc material to modify a mirror definition, so I can create holes (horizontal bands in this case) in the mirror. This was explained in an old tutorial by G. Antonutto, which now seems lost (at least I couldn?t find it online? pillo?).
>  
> The complete definition is like this:
>  
> ## metal
> void metal metal_01
> 0
> 0
> 5 .8 .8 .8 .05 0
>  
> ## mix the metal with void to create holes
> void mixfunc strip
> 4 metal_01 void 'if(sin(Pz/10),0,1)' .
> 0
> 0
>  
> ## alter the reflectance of mirror, reflectance is 0% for holes
> void brightfunc band
> 2 'if(sin(Pz/10),0,1)' .
> 0
> 0
>  
> ## mirror attached to the metal surface with holes
> band mirror mix_01
> 1 strip
> 0
> 3 .9 .9 .9
>  
>  
> If I create a cube with the ?mix_01? material, it looks as expected. Horizontal bands of void in the mirror let the direct light through and the reflected light is also in matching stripes.
>  
> However, with the diffuse calculation, light doesn?t seem to get through the void part. For example, if I measure irradiance inside the cube with only a glow source outside, I get zero.
>  
> The strangest part is that if I look at the model in rvu, it looks fine and there is diffuse light inside? unless I set ?aa 0!!!
>  
> All other settings seem to make no difference (with ab > 0, of course).
>  
> Rpict behaves like rtrace, no diffuse light through.
>  
> I?ve tried setting all rtrace parameters to the rvu defaults (including dr 0), but the result is still nothing.
>  
> I?m sure there is an explanation, which is possibly that the material is just too weird, but I?m still confused by the strange difference in behaviour between rtrace/rpict and rvu?
>  
> Any ideas?
> Thanks!
> Santiago
>  
> ____________________________________________________________
> Electronic mail messages entering and leaving Arup  business
> systems are scanned for acceptability of content and viruses
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160603/321da140/attachment.html>

From mcneil.andrew at gmail.com  Fri Jun  3 14:18:28 2016
From: mcneil.andrew at gmail.com (Andy McNeil)
Date: Fri, 3 Jun 2016 14:18:28 -0700
Subject: [Radiance-general] Installation BSDFviewer Ubuntu14.04 64bit
In-Reply-To: <5751E5B9.30305@ascendilex.nl>
References: <CAFNnwksX9BGCxv=L7sVqanWrKFTCkGdi9qw-gQv7_k-8imUypQ@mail.gmail.com>
	<CAEFJVk-7wg=+6LQ1isCMUR0=KxYceb9US1mte2c2zWR1gNp7OQ@mail.gmail.com>
	<5751E5B9.30305@ascendilex.nl>
Message-ID: <CAEFJVk9y0b4q+2zmC-HmgzKFNwJ1PkuPb=AMujrwEoRtQcGfJg@mail.gmail.com>

Wouter,

Can you go into the BSDF viewer folder and run the following:
sudo bash install.sh

And report any errors?

Thanks,
Andy


On Fri, Jun 3, 2016 at 1:16 PM, ascendilex | Wouter Beck <
wouter.beck at ascendilex.nl> wrote:

> Andy,
>
> I'm having similar trouble getting BSDFviewer to run on my Suse 13.2 Linux
> box.
>
> I tried both the 32 an 64 bit versions. 64 bit needed some adjustment
> (-fPIC etc) for install.sh to finish without errors.
>
> Running ./BSDViewer_v1.3  launches the interface. Changing Logscale to
> linear scale, equidistant to orthographic and selecting an incident patch
> all appears to work.
>
>
> As soon as I click  "Load a BSDF XML file" the interface becomes
> unresponsive.
>
> My java command for the 64 bit version currently is: "java
> -Djava.library.path="/usr/local/lib/BSDFViewer" -cp
> "/usr/local/lib/BSDFViewer.jar:/usr/local/lib/core.jar" BSDFViewer"
> The 32 version out of the box: "java  -Djava.library.path="." -cp
> "./lib/BSDFViewer.jar:./lib/core.jar" BSDFViewer"
>
> Occasionally the application crashes, telling:
>
> [xcb] Unknown sequence number while processing queue
> [xcb] Most likely this is a multi-threaded client and XInitThreads has not
> been called
> [xcb] Aborting, sorry about that.
> java: xcb_io.c:259: poll_for_event: Assertion
> `!xcb_xlib_threads_sequence_lost' failed.
> ./BSDFViewer_v1.3: line 6: 14480 Aborted                 java
> -Djava.library.path="$APPDIR" -cp
> "$APPDIR/lib/BSDFViewer.jar:$APPDIR/lib/core.jar" BSDFViewer
>
> Any ideas?
>
> Cheers,
>
> Wouter
>
> On 02/04/2016 12:04 AM, Andy McNeil wrote:
>
> Hi Robert,
> Sorry for the delayed response. I think your problem is that you don't
> have the java development environment installed, just the runtime
> environment. You need javac and javah (part of the development environment)
> to create the interface to the radiance library.
>
> try:
>
> sudo apt-get install default-jdk
> and starting again from scratch.
>
> As for your debugging notes, thanks. Though some of the confusion comes
> from me lazily including the whole radiance library directory and just
> using the bits that I need.
>
> 1. line 14 in Rmakefile defines LIBDIR = /usr/local/lib/ray . That's not
>> the place my radiane libs are located /usr/local/radiance/lib or whatever
>> is the users choice.
>>
> Well LIBDIR isn't actually used (again - me lazy).  install.sh simply uses
> rmakefile to compile all the objects for libBSDF.so
>
>
>> 2. line 28 in install.sh asks for libBSDF.so, which is no located in that
>> place. instead: ./lib/libBSDF.so
>>
> libBSDF is compiled by install.sh in the BSDFViewer directory, this is the
> one that it attempts to use. (you'll note that install.sh uses cd to change
> to that directory - me lazy)
>
>
>> 3. the libBSDF.jnilib is not existing at all - so there is something
>> broken.
>>
> This is created by install.sh in the BSDFViewer directory - this fails to
> compile because you don't have javac - part of the development environment.
>
>
>> 4. An error message about something called: ELFClass32 I tried to solve
>> by apt-getting different java platforms - as different forums told me.
>
> I think this is because there are compiled versions of everything included
> in the zip.  Your system is using these (which were compiled 32-bit)
> because they are failing to complie on your system. I should have scrubbed
> these out before zipping the directory. This should be fixed when you
> install development environment.
>
> Andy
>
>
>
> On Mon, Feb 1, 2016 at 10:24 AM, Robert Weitlaner <r.weitlaner at gmail.com>
> wrote:
>
>> Dear experts, (particularly Andy),
>> ------------------
>>
>> First of all: I do not have any experience using all that java stuff.
>> Honestly I do hope, that you won't tell me to get used to it ;)
>> And I hope you can reproduce my problems to a certain extend.
>>
>> Thank you for any hint, or a description of the installation procedure.
>>
>> ------- Problem statement -----
>>  I'm running into dozens of error messages using the install.sh bash in
>> the BSDFViewer Download from
>> <http://www.radiance-online.org/download-install/bsdf-viewer/BSDFViewer1.3_ubuntu_64.tar>
>> http://www.radiance-online.org/download-install/bsdf-viewer/BSDFViewer1.3_ubuntu_64.tar
>> .
>> See these messages at the end of that email.
>>
>> Anyway, the BSDFViewer starts up. But it doesn't work properly (I can
>> click on the incoming patch which gets yellow, but there is no output
>> displayed - in terminal following error message is displayed as soon as I
>> load any xml.
>> Exception in thread "AWT-EventQueue-0" java.lang.UnsatisfiedLinkError:
>> Can't load library: /usr/local/lib/BSDFViewer/libBSDF.jnilib
>> or if any reload of another testBSDF is started:
>> Exception in thread "AWT-EventQueue-0" java.lang.NoClassDefFoundError:
>> Could not initialize class libBSDF
>>
>> I'm well aware of the *mailing list* discussion on that topic. Back
>> then, Andy's question to Serge about his JAVA installation did not yield to
>> any conclusion as Serge's problem disappeared:
>> <http://radiance-online.org/pipermail/radiance-general/2015-February/010783.html>
>> http://radiance-online.org/pipermail/radiance-general/2015-February/010783.html
>> .
>>
>> ------ Platform description ------------
>> platform: ubuntu 14.04 64bit  on VMware(R)Player 7.0.0; Windows 7 host
>> Java -version gives:
>> java version "1.7.0_91"
>> OpenJDK Runtime Environment (IcedTea 2.6.3) (7u91-2.6.3-0ubuntu0.14.04.1)
>> OpenJDK 64-Bit Server VM (build 24.91-b01, mixed mode)
>> ------------------------------------
>> ------------------------------------
>>
>> Please apologize for my poor debugging capabilities:
>>
>> 1. line 14 in Rmakefile defines LIBDIR = /usr/local/lib/ray . That's not
>> the place my radiane libs are located /usr/local/radiance/lib or whatever
>> is the users choice.
>>
>> 2. line 28 in install.sh asks for libBSDF.so, which is no located in that
>> place. instead: ./lib/libBSDF.so
>>
>> 3. the libBSDF.jnilib is not existing at all - so there is something
>> broken.
>>
>> 4. An error message about something called: ELFClass32 I tried to solve
>> by apt-getting different java platforms - as different forums told me.
>>
>> THANK You,
>> br Robert
>>
>> ------------------------------------------------------------------------
>> ------------------ERRORS after sudo install.sh--------------
>> ------------------------------------------------------------------------
>> vm:/usr/local/radiance/BSDFViewer1.3_ubuntu_64$ sudo bash install.sh
>> rm -f *.o librtrad.a libmgf.a
>> cc -DBSD -O   -c -o cone.o cone.c
>> cc -DBSD -O   -c -o face.o face.c
>> cc -DBSD -O   -c -o free_os.o free_os.c
>> cc -DBSD -O   -c -o instance.o instance.c
>> cc -DBSD -O   -c -o readobj.o readobj.c
>> readobj.c: In function ?readobj?:
>> readobj.c:53:9: warning: ignoring return value of ?fgets?, declared with
>> attribute warn_unused_result [-Wunused-result]
>>     fgets(buf, sizeof(buf), infp);
>>          ^
>> cc -DBSD -O   -c -o readoct.o readoct.c
>> cc -DBSD -O   -c -o otypes.o otypes.c
>> cc -DBSD -O   -c -o objset.o objset.c
>> cc -DBSD -O   -c -o octree.o octree.c
>> cc -DBSD -O   -c -o readfargs.o readfargs.c
>> cc -DBSD -O   -c -o modobject.o modobject.c
>> cc -DBSD -O -DDEFPATH=\":/usr/local/lib/ray\" -c getlibpath.c
>> cc -DBSD -O   -c -o addobjnotify.o addobjnotify.c
>> cc -DBSD -O   -c -o zeroes.o zeroes.c
>> cc -DBSD -O   -c -o mesh.o mesh.c
>> cc -DBSD -O   -c -o readmesh.o readmesh.c
>> cc -DBSD -O   -c -o tmesh.o tmesh.c
>> cc -DBSD -O   -c -o sceneio.o sceneio.c
>> cc -DBSD -O   -c -o color.o color.c
>> cc -DBSD -O   -c -o header.o header.c
>> cc -DBSD -O   -c -o image.o image.c
>> cc -DBSD -O   -c -o lamps.o lamps.c
>> cc -DBSD -O   -c -o resolu.o resolu.c
>> cc -DBSD -O   -c -o rexpr.o rexpr.c
>> cc -DBSD -O   -c -o spec_rgb.o spec_rgb.c
>> cc -DBSD -O   -c -o colrops.o colrops.c
>> cc -DBSD -O   -c -o font.o font.c
>> cc -DBSD -O   -c -o tonemap.o tonemap.c
>> In file included from tonemap.c:17:0:
>> tmprivat.h:62:1: warning: variably modified ?tmMesofact? at file scope
>> [enabled by default]
>>  extern uby8 tmMesofact[BMESUPPER-BMESLOWER];
>>  ^
>> tonemap.c:654:1: warning: variably modified ?tmMesofact? at file scope
>> [enabled by default]
>>  uby8 tmMesofact[BMESUPPER-BMESLOWER];
>>  ^
>> cc -DBSD -O -DPCOND=\"pcond\" -c tmapcolrs.c
>> In file included from tmapcolrs.c:21:0:
>> tmprivat.h:62:1: warning: variably modified ?tmMesofact? at file scope
>> [enabled by default]
>>  extern uby8 tmMesofact[BMESUPPER-BMESLOWER];
>>  ^
>> cc -DBSD -O   -c -o tmapluv.o tmapluv.c
>> In file included from tmapluv.c:19:0:
>> tmprivat.h:62:1: warning: variably modified ?tmMesofact? at file scope
>> [enabled by default]
>>  extern uby8 tmMesofact[BMESUPPER-BMESLOWER];
>>  ^
>> cc -DBSD -O   -c -o tmaptiff.o tmaptiff.c
>> In file included from tmaptiff.c:15:0:
>> tmprivat.h:62:1: warning: variably modified ?tmMesofact? at file scope
>> [enabled by default]
>>  extern uby8 tmMesofact[BMESUPPER-BMESLOWER];
>>  ^
>> cc -DBSD -O   -c -o tmap16bit.o tmap16bit.c
>> In file included from tmap16bit.c:14:0:
>> tmprivat.h:62:1: warning: variably modified ?tmMesofact? at file scope
>> [enabled by default]
>>  extern uby8 tmMesofact[BMESUPPER-BMESLOWER];
>>  ^
>> cc -DBSD -O   -c -o bmpfile.o bmpfile.c
>> cc -DBSD -O   -c -o falsecolor.o falsecolor.c
>> In file included from falsecolor.c:16:0:
>> tmprivat.h:62:1: warning: variably modified ?tmMesofact? at file scope
>> [enabled by default]
>>  extern uby8 tmMesofact[BMESUPPER-BMESLOWER];
>>  ^
>> cc -DBSD -O   -c -o ezxml.o ezxml.c
>> cc -DBSD -O   -c -o ccolor.o ccolor.c
>> cc -DBSD -O   -c -o ccyrgb.o ccyrgb.c
>> cc -DBSD -O   -c -o bsdf.o bsdf.c
>> bsdf.c: In function ?SDloadFile?:
>> bsdf.c:182:2: warning: null argument where non-null required (argument 1)
>> [-Wnonnull]
>>   if (strcmp(ezxml_name(fl), "WindowElement")) {
>>   ^
>> bsdf.c:182:2: warning: null argument where non-null required (argument 1)
>> [-Wnonnull]
>> bsdf.c:182:2: warning: null argument where non-null required (argument 1)
>> [-Wnonnull]
>> bsdf.c:182:2: warning: null argument where non-null required (argument 1)
>> [-Wnonnull]
>> bsdf.c:182:2: warning: null argument where non-null required (argument 1)
>> [-Wnonnull]
>> bsdf.c:182:2: warning: null argument where non-null required (argument 1)
>> [-Wnonnull]
>> cc -DBSD -O   -c -o bsdf_m.o bsdf_m.c
>> cc -DBSD -O   -c -o bsdf_t.o bsdf_t.c
>> cc -DBSD -O   -c -o loadbsdf.o loadbsdf.c
>> cc -DBSD -O   -c -o disk2square.o disk2square.c
>> cc -DBSD -O   -c -o hilbert.o hilbert.c
>> cc -DBSD -O   -c -o fgetline.o fgetline.c
>> cc -DBSD -O   -c -o fropen.o fropen.c
>> cc -DBSD -O   -c -o linregr.o linregr.c
>> cc -DBSD -O   -c -o xf.o xf.c
>> cc -DBSD -O   -c -o mat4.o mat4.c
>> cc -DBSD -O   -c -o invmat4.o invmat4.c
>> cc -DBSD -O   -c -o fvect.o fvect.c
>> cc -DBSD -O   -c -o urand.o urand.c
>> cc -DBSD -O   -c -o urind.o urind.c
>> cc -DBSD -O   -c -o calexpr.o calexpr.c
>> cc -DBSD -O   -c -o caldefn.o caldefn.c
>> cc -DBSD -O   -c -o calfunc.o calfunc.c
>> cc -DBSD -O   -c -o calprnt.o calprnt.c
>> cc -DBSD -O   -c -o biggerlib.o biggerlib.c
>> cc -DBSD -O   -c -o multisamp.o multisamp.c
>> cc -DBSD -O   -c -o unix_process.o unix_process.c
>> cc -DBSD -O   -c -o process.o process.c
>> cc -DBSD -O   -c -o gethomedir.o gethomedir.c
>> cc -DBSD -O   -c -o getpath.o getpath.c
>> cc -DBSD -O   -c -o error.o error.c
>> cc -DBSD -O   -c -o savestr.o savestr.c
>> cc -DBSD -O   -c -o savqstr.o savqstr.c
>> cc -DBSD -O   -c -o badarg.o badarg.c
>> cc -DBSD -O   -c -o fgetword.o fgetword.c
>> cc -DBSD -O   -c -o words.o words.c
>> cc -DBSD -O   -c -o expandarg.o expandarg.c
>> cc -DBSD -O   -c -o wordfile.o wordfile.c
>> cc -DBSD -O   -c -o fgetval.o fgetval.c
>> cc -DBSD -O   -c -o clip.o clip.c
>> cc -DBSD -O   -c -o plocate.o plocate.c
>> cc -DBSD -O   -c -o eputs.o eputs.c
>> cc -DBSD -O   -c -o wputs.o wputs.c
>> cc -DBSD -O   -c -o quit.o quit.c
>> cc -DBSD -O   -c -o lookup.o lookup.c
>> cc -DBSD -O   -c -o bmalloc.o bmalloc.c
>> cc -DBSD -O   -c -o loadvars.o loadvars.c
>> cc -DBSD -O   -c -o tcos.o tcos.c
>> cc -DBSD -O   -c -o fputword.o fputword.c
>> cc -DBSD -O   -c -o chanvalue.o chanvalue.c
>> cc -DBSD -O   -c -o dircode.o dircode.c
>> cc -DBSD -O   -c -o paths.o paths.c
>> cc -DBSD -O   -c -o byteswap.o byteswap.c
>> cc -DBSD -O   -c -o ealloc.o ealloc.c
>> cc -DBSD -O   -c -o fdate.o fdate.c
>> cc -DBSD -O   -c -o portio.o portio.c
>> cc -DBSD -O   -c -o myhostname.o myhostname.c
>> cc -DBSD -O   -c -o erf.o erf.c
>> cc -DBSD -O   -c -o strcmp.o strcmp.c
>> strcmp.c: In function ?strcmp?:
>> strcmp.c:13:17: warning: argument ?s1? doesn?t match built-in prototype
>> [enabled by default]
>>  register char  *s1, *s2;
>>                  ^
>> strcmp.c:13:22: warning: argument ?s2? doesn?t match built-in prototype
>> [enabled by default]
>>  register char  *s1, *s2;
>>                       ^
>> rm -f librtrad.a
>> ar rc librtrad.a cone.o face.o free_os.o instance.o readobj.o readoct.o
>> otypes.o objset.o octree.o readfargs.o modobject.o getlibpath.o
>> addobjnotify.o zeroes.o mesh.o readmesh.o tmesh.o sceneio.o color.o
>> header.o image.o lamps.o resolu.o rexpr.o spec_rgb.o colrops.o font.o
>> tonemap.o tmapcolrs.o tmapluv.o tmaptiff.o tmap16bit.o bmpfile.o
>> falsecolor.o ezxml.o ccolor.o ccyrgb.o bsdf.o bsdf_m.o bsdf_t.o loadbsdf.o
>> disk2square.o hilbert.o fgetline.o fropen.o linregr.o xf.o mat4.o invmat4.o
>> fvect.o urand.o urind.o calexpr.o caldefn.o calfunc.o calprnt.o biggerlib.o
>> multisamp.o unix_process.o process.o gethomedir.o getpath.o error.o
>> savestr.o savqstr.o badarg.o fgetword.o words.o expandarg.o wordfile.o
>> fgetval.o clip.o plocate.o eputs.o wputs.o quit.o lookup.o bmalloc.o
>> loadvars.o tcos.o fputword.o chanvalue.o dircode.o paths.o byteswap.o
>> ealloc.o fdate.o portio.o myhostname.o erf.o strcmp.o
>> ranlib librtrad.a
>> cc -DBSD -O   -c -o mgf_parser.o mgf_parser.c
>> cc -DBSD -O   -c -o mgf_object.o mgf_object.c
>> cc -DBSD -O   -c -o mgf_xf.o mgf_xf.c
>> cc -DBSD -O   -c -o mgf_context.o mgf_context.c
>> rm -f libmgf.a
>> ar rc libmgf.a mgf_parser.o mgf_object.o mgf_xf.o mgf_context.o
>> ranlib libmgf.a
>> /usr/bin/ld: badarg.o: Die Umlagerung von
>> badarg.o: error adding symbols: Ung?ltiger Wert -- unvalid data
>> collect2: error: ld returned 1 exit status
>> install.sh: Zeile 19: javac: Befehl nicht gefunden --- command not found
>> install.sh: Zeile 21: javah: Befehl nicht gefunden --- command not found
>> In file included from libBSDF.cpp:13:0:
>> libBSDF.h:2:17: fatal error: jni.h: Datei oder Verzeichnis nicht gefunden
>> -- not found
>>  #include <jni.h>
>>                  ^
>> compilation terminated.
>> g++: error: libBSDF.o: Datei oder Verzeichnis nicht gefunden -- not found
>> g++: error: libBSDF.so: Datei oder Verzeichnis nicht gefunden --- not
>> found
>> g++: fatal error: no input files
>> compilation terminated.
>> cp: der Aufruf von stat f?r ?BSDFViewer/libBSDF.so? ist nicht m?glich:
>> Datei oder Verzeichnis nicht gefunden -- not found
>>
>>
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
>
>
> _______________________________________________
> Radiance-general mailing listRadiance-general at radiance-online.orghttp://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160603/e3b9a9c5/attachment-0001.html>

From germolinal at gmail.com  Fri Jun  3 16:34:38 2016
From: germolinal at gmail.com (=?UTF-8?Q?Germ=C3=A1n_Molina_Larrain?=)
Date: Fri, 3 Jun 2016 20:34:38 -0300
Subject: [Radiance-general] [HDRI] Photosphere (or equivalent) in Linux
	or Windows?
In-Reply-To: <CAJR73ttSnKLj5OE4nRjwgqYA=bU4t+Day7UiumGBD6fN9aAVMA@mail.gmail.com>
References: <CAF-iH4+Q_-nFcHWaLXxHTV6Du3Q4aQ6cRSSCc33m91eXuvJRdA@mail.gmail.com>
	<alpine.LRH.2.01.1606020939580.3808@hymn02.u.washington.edu>
	<CAF-iH4JJDKDg=Hv1UUy1iY3snmkqzLvqf1pH8C3pxhNTL3u__g@mail.gmail.com>
	<CAJR73ttSnKLj5OE4nRjwgqYA=bU4t+Day7UiumGBD6fN9aAVMA@mail.gmail.com>
Message-ID: <CAF-iH4Jhww2TRhMvTunCV2R7by=Og5JBWHQnrtaavk7tDPBrPg@mail.gmail.com>

Really really cool, Nathaniel. Thanks a lot.

2016-06-02 14:09 GMT-03:00 Nathaniel Jones <nathanieljon at gmail.com>:

> He Germ?n,
>
> I recall having the same problem when I installed hdrscope on Windows 7.
> As I recall, I had set a system-wide RAYPATH, but it turned out that the
> installer only checks the user environment variables. Adding Radiance to
> the user PATH and RAYPATH, then running the installer, and then removing
> the user PATH and RAYPATH seemed to work.
>
> Nathaniel
>
> On Thu, Jun 2, 2016 at 12:58 PM, Germ?n Molina Larrain <
> germolinal at gmail.com> wrote:
>
>> Thanks, Mehlika.
>>
>> I downloaded it from http://courses.washington.edu/hdrscope/download.html
>> and installed the NREL Binaries for Windows (they are working), but the
>> setup still tells me that I need to install Radiance.
>>
>> Is that a known problem? when I put "echo %RAYPATH%" in the command line,
>> it returns the correct path.
>>
>> Best,
>>
>> Germ?n
>>
>> 2016-06-02 13:39 GMT-03:00 Mehlika Inanici <inanici at u.washington.edu>:
>>
>>>
>>>
>>> Hi German,
>>>
>>> hdrscope works in Windows 10. That is what I am using. You need a valid
>>> Radaince installation and path and raypath set to Radiance/bin and
>>> Radiance/lib.
>>>
>>> Best,
>>> Mehlika
>>>
>>>
>>>
>>> On Wed, 1 Jun 2016, Germ?n Molina Larrain wrote:
>>>
>>> Have you heard about HDR Scope??? I saw a demonstration given by Mehlika
>>>> Inanici once... it was REALLY COOL. For Windows only, though.
>>>>
>>>> Anyone knows wheather it has been updated to work in Windows 10?
>>>>
>>>> 2016-05-31 9:45 GMT-03:00 Chamilothori Kynthia <
>>>> kynthia.chamilothori at epfl.ch>:
>>>>       Hi Greg,
>>>>
>>>>       Thanks for your answer! Great to hear that the Windows port is
>>>> stable and working!
>>>>       I completely understand the difficulty of continuing the porting
>>>> work - thanks for all the work you have already put into this. I think that
>>>> for what I want to do
>>>>       hdrgen and pcomb will do fine for now.
>>>>
>>>>       Cheers,
>>>>       Kynthia
>>>>       ------------------------------
>>>>
>>>>       Message: 3
>>>>       Date: Mon, 30 May 2016 08:40:58 -0700
>>>>       From: Greg Ward <gregoryjward at gmail.com>
>>>>       To: Radiance general discussion <
>>>> radiance-general at radiance-online.org>
>>>>       Subject: Re: [Radiance-general] [HDRI] Photosphere (or
>>>> equivalent) in
>>>>               Linux   or Windows?
>>>>       Message-ID: <519C9544-A8CF-430D-8857-27537814B93B at lmi.net>
>>>>       Content-Type: text/plain; charset="us-ascii"
>>>>
>>>>       Hi Kynthia,
>>>>
>>>>       To recover the costs related to developing a Windows version, we
>>>> have been charging a site license fee of $250 US to institutions that want
>>>> to use Elena's port of
>>>>       Photosphere.  It does appear to be stable inasmuch as we have
>>>> received no complaints about its behavior from any of the licensees.
>>>>
>>>>       The long-term goal is to port her version, which is based on the
>>>> cross-platform wxWidgets API, back to newer versions of Mac OS X and even
>>>> Linux.  Unfortunately, I
>>>>       have not had time to pursue this activity.  I am unsure at this
>>>> point when I will ever get to it....
>>>>
>>>>       Cheers,
>>>>       -Greg
>>>>
>>>>       > From: Chamilothori Kynthia <kynthia.chamilothori at epfl.ch>
>>>>       > Date: May 30, 2016 6:09:23 AM PDT
>>>>       >
>>>>       > Dear Radiance community,
>>>>       >
>>>>       > There was a great effort a couple of years ago to create a
>>>> cross-platform version of Photosphere by Greg and Helena Eydelberg. Is this
>>>> version perhaps stable enough
>>>>       for distribution?
>>>>       > Otherwise, what would you use as an alternative if not
>>>> Photosphere? Has anyone used successfully any other workaround (e.g. an OS
>>>> X virtual box)?
>>>>       >
>>>>       > Thanks for any ideas!
>>>>       >
>>>>       > Best,
>>>>       > Kynthia Chamilothori
>>>> -------------- next part --------------
>>>> An HTML attachment was scrubbed...
>>>> URL: <
>>>> http://www.radiance-online.org/pipermail/radiance-general/attachments/20160530/915e41c1/attachment-0001.html
>>>> >
>>>>
>>>> ------------------------------
>>>>
>>>> _______________________________________________
>>>> Radiance-general mailing list
>>>> Radiance-general at radiance-online.org
>>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>>>
>>>>
>>>> End of Radiance-general Digest, Vol 147, Issue 11
>>>> *************************************************
>>>>
>>>> _______________________________________________
>>>> Radiance-general mailing list
>>>> Radiance-general at radiance-online.org
>>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>>>
>>>>
>>>>
>>>>
>>>>
>>> _______________________________________________
>>> Radiance-general mailing list
>>> Radiance-general at radiance-online.org
>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>>
>>>
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160603/6b0cec24/attachment.html>

From gregoryjward at gmail.com  Mon Jun  6 09:25:05 2016
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Mon, 6 Jun 2016 09:25:05 -0700
Subject: [Radiance-general] Strange behaviour with mixed material
In-Reply-To: <13A27406-0AD6-45EC-98F3-70046AF9C537@lmi.net>
References: <ACF98A76D0047542A29FEB2F3EB0DAA151BB04@E-AEXMBX01.global.arup.com>
	<13A27406-0AD6-45EC-98F3-70046AF9C537@lmi.net>
Message-ID: <4713D6B9-4B7D-4A5D-BABA-7EDE2009E028@gmail.com>

Just a quick follow-up.  This was indeed a bug in the m_mirror routine, which is now sorted out.  The next distribution should fix it.

Thanks, Santiago!

-Greg

> From: Greg Ward <gward at lmi.net>
> Date: June 3, 2016 1:38:53 PM PDT
> 
> Hi Santiago,
> 
> Giulio kindly shared his tutorials and I haven't gotten around to putting them onto radiance-online.org, mostly because I don't know how to modify the website anymore since it was updated.  However, I have uploaded this particular tutorial for you to:
> 
> 	http://www.anyhere.com/gward/pickup/giulio_mirror.tar.gz
> 
> However, this is really a situation that didn't occur to me, where you have indirect rays coming from the opposite side.  I see now that I should modify a test in the m_mirror.c routine to account for this case.  I will send you a modified version of this file in hopes that you can rebuild and test it for me.
> 
> Cheers,
> -Greg
> 
>> From: Santiago Torres <Santiago.Torres at arup.com>
>> Date: June 3, 2016 1:10:50 PM PDT
>> 
>> Dear all,
>>  
>> I?m trying to define a mixfunc material to modify a mirror definition, so I can create holes (horizontal bands in this case) in the mirror. This was explained in an old tutorial by G. Antonutto, which now seems lost (at least I couldn?t find it online? pillo?).
>>  
>> The complete definition is like this:
>>  
>> ## metal
>> void metal metal_01
>> 0
>> 0
>> 5 .8 .8 .8 .05 0
>>  
>> ## mix the metal with void to create holes
>> void mixfunc strip
>> 4 metal_01 void 'if(sin(Pz/10),0,1)' .
>> 0
>> 0
>>  
>> ## alter the reflectance of mirror, reflectance is 0% for holes
>> void brightfunc band
>> 2 'if(sin(Pz/10),0,1)' .
>> 0
>> 0
>>  
>> ## mirror attached to the metal surface with holes
>> band mirror mix_01
>> 1 strip
>> 0
>> 3 .9 .9 .9
>>  
>>  
>> If I create a cube with the ?mix_01? material, it looks as expected. Horizontal bands of void in the mirror let the direct light through and the reflected light is also in matching stripes.
>>  
>> However, with the diffuse calculation, light doesn?t seem to get through the void part. For example, if I measure irradiance inside the cube with only a glow source outside, I get zero.
>>  
>> The strangest part is that if I look at the model in rvu, it looks fine and there is diffuse light inside? unless I set ?aa 0!!!
>>  
>> All other settings seem to make no difference (with ab > 0, of course).
>>  
>> Rpict behaves like rtrace, no diffuse light through.
>>  
>> I?ve tried setting all rtrace parameters to the rvu defaults (including dr 0), but the result is still nothing.
>>  
>> I?m sure there is an explanation, which is possibly that the material is just too weird, but I?m still confused by the strange difference in behaviour between rtrace/rpict and rvu?
>>  
>> Any ideas?
>> Thanks!
>> Santiago
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160606/882a9a08/attachment.html>

From kynthia.chamilothori at epfl.ch  Tue Jun  7 06:30:37 2016
From: kynthia.chamilothori at epfl.ch (Chamilothori Kynthia)
Date: Tue, 7 Jun 2016 13:30:37 +0000
Subject: [Radiance-general] [HDRI] Photosphere (or equivalent) in Linux
 or Windows?
Message-ID: <e892e2765ab3402a927fb1d7916c51b8@rexb.intranet.epfl.ch>

Hi all,

Germ?n and Mehlika, thanks for introducing me to hdrscope, I?m installing it right now.
And thank you Nathaniel for solving the RAYPATH problem!

In case it helps someone else, I was using Greg?s hdrgen and the combination of ra_xyze, pcompos and pvalue to calibrate an HDR image as described in this thread<http://www.radiance-online.org/pipermail/radiance-general/2011-April/007764.html> and I ran into the following error when applying the last line:

(getinfo < capture.hdr ; echo EXPOSURE=$ecorr ; getinfo - < capture.hdr) > calibrated.hdr

The output picture reads as  a ?bad picture format? with ximage and a closer look reveals that the EXPOSURE line that is added in the header is just above the ?Y +X resolution parameters, with the empty line ("\n\n") before it, terminating the header before this new EXPOSURE variable.
Out of curiosity I put the empty line after the EXPOSURE (this time with no lines between the header variables), and now the HDR opens correctly with ximage with both EXPOSURE variables (original and new) but the luminance values are very low (<1L). I?m obviously doing something very wrong.
If I understand correctly, the error correction (and the added EXPOSURE variable) should ideally be very close to 179 based on the standard lumens/watt conversion ? in my case it?s 178.02 as the ratio of measured and generated luminance values is 0.99. Is this correct?

I?ve lent our copy of Rendering with Radiance to a student, so forgive me if I?m missing things that are explained there.
Let me know if I should make a separate message about this, as I am hijacking my own thread!

Thanks for all your help,
Kynthia



From: Germ?n Molina Larrain [mailto:germolinal at gmail.com]
Sent: samedi 4 juin 2016 01:35
To: Radiance general discussion <radiance-general at radiance-online.org>
Subject: Re: [Radiance-general] [HDRI] Photosphere (or equivalent) in Linux or Windows?

Really really cool, Nathaniel. Thanks a lot.

2016-06-02 14:09 GMT-03:00 Nathaniel Jones <nathanieljon at gmail.com<mailto:nathanieljon at gmail.com>>:
He Germ?n,

I recall having the same problem when I installed hdrscope on Windows 7. As I recall, I had set a system-wide RAYPATH, but it turned out that the installer only checks the user environment variables. Adding Radiance to the user PATH and RAYPATH, then running the installer, and then removing the user PATH and RAYPATH seemed to work.

Nathaniel

On Thu, Jun 2, 2016 at 12:58 PM, Germ?n Molina Larrain <germolinal at gmail.com<mailto:germolinal at gmail.com>> wrote:
Thanks, Mehlika.
I downloaded it from http://courses.washington.edu/hdrscope/download.html and installed the NREL Binaries for Windows (they are working), but the setup still tells me that I need to install Radiance.
Is that a known problem? when I put "echo %RAYPATH%" in the command line, it returns the correct path.
Best,
Germ?n

2016-06-02 13:39 GMT-03:00 Mehlika Inanici <inanici at u.washington.edu<mailto:inanici at u.washington.edu>>:


Hi German,

hdrscope works in Windows 10. That is what I am using. You need a valid Radaince installation and path and raypath set to Radiance/bin and Radiance/lib.

Best,
Mehlika



On Wed, 1 Jun 2016, Germ?n Molina Larrain wrote:
Have you heard about HDR Scope??? I saw a demonstration given by Mehlika Inanici once... it was REALLY COOL. For Windows only, though.

Anyone knows wheather it has been updated to work in Windows 10?

2016-05-31 9:45 GMT-03:00 Chamilothori Kynthia <kynthia.chamilothori at epfl.ch<mailto:kynthia.chamilothori at epfl.ch>>:
      Hi Greg,

      Thanks for your answer! Great to hear that the Windows port is stable and working!
      I completely understand the difficulty of continuing the porting work - thanks for all the work you have already put into this. I think that for what I want to do
      hdrgen and pcomb will do fine for now.

      Cheers,
      Kynthia
      ------------------------------

      Message: 3
      Date: Mon, 30 May 2016 08:40:58 -0700
      From: Greg Ward <gregoryjward at gmail.com<mailto:gregoryjward at gmail.com>>
      To: Radiance general discussion <radiance-general at radiance-online.org<mailto:radiance-general at radiance-online.org>>
      Subject: Re: [Radiance-general] [HDRI] Photosphere (or equivalent) in
              Linux   or Windows?
      Message-ID: <519C9544-A8CF-430D-8857-27537814B93B at lmi.net<mailto:519C9544-A8CF-430D-8857-27537814B93B at lmi.net>>
      Content-Type: text/plain; charset="us-ascii"

      Hi Kynthia,

      To recover the costs related to developing a Windows version, we have been charging a site license fee of $250 US to institutions that want to use Elena's port of
      Photosphere.  It does appear to be stable inasmuch as we have received no complaints about its behavior from any of the licensees.

      The long-term goal is to port her version, which is based on the cross-platform wxWidgets API, back to newer versions of Mac OS X and even Linux.  Unfortunately, I
      have not had time to pursue this activity.  I am unsure at this point when I will ever get to it....

      Cheers,
      -Greg

      > From: Chamilothori Kynthia <kynthia.chamilothori at epfl.ch<mailto:kynthia.chamilothori at epfl.ch>>
      > Date: May 30, 2016 6:09:23 AM PDT
      >
      > Dear Radiance community,
      >
      > There was a great effort a couple of years ago to create a cross-platform version of Photosphere by Greg and Helena Eydelberg. Is this version perhaps stable enough
      for distribution?
      > Otherwise, what would you use as an alternative if not Photosphere? Has anyone used successfully any other workaround (e.g. an OS X virtual box)?
      >
      > Thanks for any ideas!
      >
      > Best,
      > Kynthia Chamilothori
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160530/915e41c1/attachment-0001.html>

------------------------------

_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org<mailto:Radiance-general at radiance-online.org>
http://www.radiance-online.org/mailman/listinfo/radiance-general


End of Radiance-general Digest, Vol 147, Issue 11
*************************************************

_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org<mailto:Radiance-general at radiance-online.org>
http://www.radiance-online.org/mailman/listinfo/radiance-general




_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org<mailto:Radiance-general at radiance-online.org>
http://www.radiance-online.org/mailman/listinfo/radiance-general


_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org<mailto:Radiance-general at radiance-online.org>
http://www.radiance-online.org/mailman/listinfo/radiance-general


_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org<mailto:Radiance-general at radiance-online.org>
http://www.radiance-online.org/mailman/listinfo/radiance-general

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160607/d6280d16/attachment-0001.html>

From Santiago.Torres at arup.com  Tue Jun  7 07:35:41 2016
From: Santiago.Torres at arup.com (Santiago Torres)
Date: Tue, 7 Jun 2016 14:35:41 +0000
Subject: [Radiance-general] Strange behaviour with mixed material
In-Reply-To: <4713D6B9-4B7D-4A5D-BABA-7EDE2009E028@gmail.com>
References: <ACF98A76D0047542A29FEB2F3EB0DAA151BB04@E-AEXMBX01.global.arup.com>
	<13A27406-0AD6-45EC-98F3-70046AF9C537@lmi.net>
	<4713D6B9-4B7D-4A5D-BABA-7EDE2009E028@gmail.com>
Message-ID: <ACF98A76D0047542A29FEB2F3EB0DAA1525EA6@E-AEXMBX01.global.arup.com>

Thanks due to Kanae Hagiwara, from our Tokyo office, who found the problem!

And to Greg, of course, for finding the solution!

S.


From: Gregory J. Ward [mailto:gregoryjward at gmail.com]
Sent: 06 June 2016 17:25
To: Greg Ward
Cc: Radiance general discussion
Subject: Re: [Radiance-general] Strange behaviour with mixed material

Just a quick follow-up.  This was indeed a bug in the m_mirror routine, which is now sorted out.  The next distribution should fix it.

Thanks, Santiago!

-Greg



From: Greg Ward <gward at lmi.net<mailto:gward at lmi.net>>

Date: June 3, 2016 1:38:53 PM PDT


Hi Santiago,

Giulio kindly shared his tutorials and I haven't gotten around to putting them onto radiance-online.org<http://radiance-online.org>, mostly because I don't know how to modify the website anymore since it was updated.  However, I have uploaded this particular tutorial for you to:

                http://www.anyhere.com/gward/pickup/giulio_mirror.tar.gz

However, this is really a situation that didn't occur to me, where you have indirect rays coming from the opposite side.  I see now that I should modify a test in the m_mirror.c routine to account for this case.  I will send you a modified version of this file in hopes that you can rebuild and test it for me.

Cheers,
-Greg



From: Santiago Torres <Santiago.Torres at arup.com<mailto:Santiago.Torres at arup.com>>

Date: June 3, 2016 1:10:50 PM PDT



Dear all,



I'm trying to define a mixfunc material to modify a mirror definition, so I can create holes (horizontal bands in this case) in the mirror. This was explained in an old tutorial by G. Antonutto, which now seems lost (at least I couldn't find it online... pillo?).



The complete definition is like this:



## metal

void metal metal_01

0

0

5 .8 .8 .8 .05 0



## mix the metal with void to create holes

void mixfunc strip

4 metal_01 void 'if(sin(Pz/10),0,1)' .

0

0



## alter the reflectance of mirror, reflectance is 0% for holes

void brightfunc band

2 'if(sin(Pz/10),0,1)' .

0

0



## mirror attached to the metal surface with holes

band mirror mix_01

1 strip

0

3 .9 .9 .9





If I create a cube with the "mix_01" material, it looks as expected. Horizontal bands of void in the mirror let the direct light through and the reflected light is also in matching stripes.



However, with the diffuse calculation, light doesn't seem to get through the void part. For example, if I measure irradiance inside the cube with only a glow source outside, I get zero.



The strangest part is that if I look at the model in rvu, it looks fine and there is diffuse light inside... unless I set -aa 0!!!



All other settings seem to make no difference (with ab > 0, of course).



Rpict behaves like rtrace, no diffuse light through.



I've tried setting all rtrace parameters to the rvu defaults (including dr 0), but the result is still nothing.



I'm sure there is an explanation, which is possibly that the material is just too weird, but I'm still confused by the strange difference in behaviour between rtrace/rpict and rvu...



Any ideas?

Thanks!

Santiago
____________________________________________________________
Electronic mail messages entering and leaving Arup  business
systems are scanned for acceptability of content and viruses
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160607/ae8de987/attachment.html>

From gregoryjward at gmail.com  Tue Jun  7 08:45:13 2016
From: gregoryjward at gmail.com (Greg Ward)
Date: Tue, 7 Jun 2016 08:45:13 -0700
Subject: [Radiance-general] [HDRI] Photosphere (or equivalent) in Linux
	or Windows?
In-Reply-To: <e892e2765ab3402a927fb1d7916c51b8@rexb.intranet.epfl.ch>
References: <e892e2765ab3402a927fb1d7916c51b8@rexb.intranet.epfl.ch>
Message-ID: <9A7265CE-3FE0-4D33-A0D0-7E124F65F057@lmi.net>

Hi Kynthia,

The corrected version of this command sequence is:

	(getinfo < capture.hdr  | sed 1a\
EXPOSURE=$ecorr ; getinfo - < capture.hdr) > calibrated.hdr

It's important to put the backslash immediately after the 'a' with no spaces for this to work.  This puts the EXPOSURE= line on the second line of the header, instead of after it.

The following will create a "slighly wrong" header that will still work -- this is what I usually do:

	echo EXPOSURE=$ecorr  > calibrated.hdr
	cat capture.hdr >> calibrated.hdr

Cheers,
-Greg

> From: Chamilothori Kynthia <kynthia.chamilothori at epfl.ch>
> Date: June 7, 2016 6:30:37 AM PDT
> 
> Hi all,
>  
> Germ?n and Mehlika, thanks for introducing me to hdrscope, I?m installing it right now.
> And thank you Nathaniel for solving the RAYPATH problem!
>  
> In case it helps someone else, I was using Greg?s hdrgen and the combination of ra_xyze, pcompos and pvalue to calibrate an HDR image as described in this thread and I ran into the following error when applying the last line:
>  
> (getinfo < capture.hdr ; echo EXPOSURE=$ecorr ; getinfo - < capture.hdr) > calibrated.hdr
>  
> The output picture reads as  a ?bad picture format? with ximage and a closer look reveals that the EXPOSURE line that is added in the header is just above the ?Y +X resolution parameters, with the empty line ("\n\n") before it, terminating the header before this new EXPOSURE variable.
> Out of curiosity I put the empty line after the EXPOSURE (this time with no lines between the header variables), and now the HDR opens correctly with ximage with both EXPOSURE variables (original and new) but the luminance values are very low (<1L). I?m obviously doing something very wrong.
> If I understand correctly, the error correction (and the added EXPOSURE variable) should ideally be very close to 179 based on the standard lumens/watt conversion ? in my case it?s 178.02 as the ratio of measured and generated luminance values is 0.99. Is this correct?
>  
> I?ve lent our copy of Rendering with Radiance to a student, so forgive me if I?m missing things that are explained there.
> Let me know if I should make a separate message about this, as I am hijacking my own thread!
>  
> Thanks for all your help,
> Kynthia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160607/af1e7cf2/attachment-0001.html>

From kynthia.chamilothori at epfl.ch  Wed Jun  8 04:41:37 2016
From: kynthia.chamilothori at epfl.ch (Chamilothori Kynthia)
Date: Wed, 8 Jun 2016 11:41:37 +0000
Subject: [Radiance-general] [HDRI] Photosphere (or equivalent) in Linux
 or Windows?
Message-ID: <3ede400df91045538724ffd3ada027b7@rexb.intranet.epfl.ch>

Hi Greg,

Thanks for proposing a solution so quickly - much better than my clumsy attempts at grep!

However, my calibrated image still has very low luminance values (< 1.0L) This makes sense: as I read from the File Format document in the Radiance references, the EXPOSURE variables in the header are cumulative, so I am essentially dividing all my values by 178 (which is my $ecorr). Am I doing the conversion (set ecorr=`ev "179*$img_val/$meas"`) incorrectly? :-)



Thanks for your help once again,

Kynthia




From: Greg Ward [mailto:gregoryjward at gmail.com]
Sent: mardi 7 juin 2016 17:45
To: Radiance general discussion <radiance-general at radiance-online.org>
Subject: Re: [Radiance-general] [HDRI] Photosphere (or equivalent) in Linux or Windows?

Hi Kynthia,

The corrected version of this command sequence is:

            (getinfo < capture.hdr  | sed 1a\
EXPOSURE=$ecorr ; getinfo - < capture.hdr) > calibrated.hdr

It's important to put the backslash immediately after the 'a' with no spaces for this to work.  This puts the EXPOSURE= line on the second line of the header, instead of after it.

The following will create a "slighly wrong" header that will still work -- this is what I usually do:

                echo EXPOSURE=$ecorr  > calibrated.hdr
                cat capture.hdr >> calibrated.hdr

Cheers,
-Greg


From: Chamilothori Kynthia <kynthia.chamilothori at epfl.ch<mailto:kynthia.chamilothori at epfl.ch>>

Date: June 7, 2016 6:30:37 AM PDT


Hi all,

Germ?n and Mehlika, thanks for introducing me to hdrscope, I'm installing it right now.
And thank you Nathaniel for solving the RAYPATH problem!

In case it helps someone else, I was using Greg's hdrgen and the combination of ra_xyze, pcompos and pvalue to calibrate an HDR image as described in this thread<http://www.radiance-online.org/pipermail/radiance-general/2011-April/007764.html> and I ran into the following error when applying the last line:

(getinfo < capture.hdr ; echo EXPOSURE=$ecorr ; getinfo - < capture.hdr) > calibrated.hdr

The output picture reads as  a 'bad picture format' with ximage and a closer look reveals that the EXPOSURE line that is added in the header is just above the -Y +X resolution parameters, with the empty line ("\n\n") before it, terminating the header before this new EXPOSURE variable.
Out of curiosity I put the empty line after the EXPOSURE (this time with no lines between the header variables), and now the HDR opens correctly with ximage with both EXPOSURE variables (original and new) but the luminance values are very low (<1L). I'm obviously doing something very wrong.
If I understand correctly, the error correction (and the added EXPOSURE variable) should ideally be very close to 179 based on the standard lumens/watt conversion - in my case it's 178.02 as the ratio of measured and generated luminance values is 0.99. Is this correct?

I've lent our copy of Rendering with Radiance to a student, so forgive me if I'm missing things that are explained there.
Let me know if I should make a separate message about this, as I am hijacking my own thread!

Thanks for all your help,
Kynthia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160608/2cc274f4/attachment.html>

From gregoryjward at gmail.com  Wed Jun  8 08:01:20 2016
From: gregoryjward at gmail.com (Greg Ward)
Date: Wed, 8 Jun 2016 08:01:20 -0700
Subject: [Radiance-general] [HDRI] Photosphere (or equivalent) in Linux
	or Windows?
In-Reply-To: <3ede400df91045538724ffd3ada027b7@rexb.intranet.epfl.ch>
References: <3ede400df91045538724ffd3ada027b7@rexb.intranet.epfl.ch>
Message-ID: <B4DF8A40-1C73-4272-8726-A082CD06B1F4@lmi.net>

Hi Kynthia,

I suppose it depends on how you obtained your $img_val.  If you read it using pcomb (without -o option), then your exposure correction is correct.  If you read it from ximage using the 'l' command or similar, then it was already multiplied by 179 and you should leave this factor off.

Cheers,
-Greg

> From: Chamilothori Kynthia <kynthia.chamilothori at epfl.ch>
> Date: June 8, 2016 4:41:37 AM PDT
> To: Radiance general discussion <radiance-general at radiance-online.org>
> 
> Hi Greg,
>  
> Thanks for proposing a solution so quickly ? much better than my clumsy attempts at grep!
> However, my calibrated image still has very low luminance values (< 1.0L) This makes sense: as I read from the File Format document in the Radiance references, the EXPOSURE variables in the header are cumulative, so I am essentially dividing all my values by 178 (which is my $ecorr). Am I doing the conversion (set ecorr=`ev "179*$img_val/$meas"`) incorrectly? :-)
>  
> Thanks for your help once again,
> Kynthia
>  
> From: Greg Ward [mailto:gregoryjward at gmail.com] 
> Sent: mardi 7 juin 2016 17:45
> To: Radiance general discussion <radiance-general at radiance-online.org>
> Subject: Re: [Radiance-general] [HDRI] Photosphere (or equivalent) in Linux or Windows?
>  
> Hi Kynthia,
>  
> The corrected version of this command sequence is:
>  
>             (getinfo < capture.hdr  | sed 1a\
> EXPOSURE=$ecorr ; getinfo - < capture.hdr) > calibrated.hdr
>  
> It's important to put the backslash immediately after the 'a' with no spaces for this to work.  This puts the EXPOSURE= line on the second line of the header, instead of after it.
>  
> The following will create a "slighly wrong" header that will still work -- this is what I usually do:
>  
>                 echo EXPOSURE=$ecorr  > calibrated.hdr
>                 cat capture.hdr >> calibrated.hdr
>  
> Cheers,
> -Greg
>  
> 
> From: Chamilothori Kynthia <kynthia.chamilothori at epfl.ch>
> Date: June 7, 2016 6:30:37 AM PDT
>  
> Hi all,
>  
> Germ?n and Mehlika, thanks for introducing me to hdrscope, I?m installing it right now.
> And thank you Nathaniel for solving the RAYPATH problem!
>  
> In case it helps someone else, I was using Greg?s hdrgen and the combination of ra_xyze, pcompos and pvalue to calibrate an HDR image as described in this thread and I ran into the following error when applying the last line:
>  
> (getinfo < capture.hdr ; echo EXPOSURE=$ecorr ; getinfo - < capture.hdr) > calibrated.hdr
>  
> The output picture reads as  a ?bad picture format? with ximage and a closer look reveals that the EXPOSURE line that is added in the header is just above the ?Y +X resolution parameters, with the empty line ("\n\n") before it, terminating the header before this new EXPOSURE variable.
> Out of curiosity I put the empty line after the EXPOSURE (this time with no lines between the header variables), and now the HDR opens correctly with ximage with both EXPOSURE variables (original and new) but the luminance values are very low (<1L). I?m obviously doing something very wrong.
> If I understand correctly, the error correction (and the added EXPOSURE variable) should ideally be very close to 179 based on the standard lumens/watt conversion ? in my case it?s 178.02 as the ratio of measured and generated luminance values is 0.99. Is this correct?
>  
> I?ve lent our copy of Rendering with Radiance to a student, so forgive me if I?m missing things that are explained there.
> Let me know if I should make a separate message about this, as I am hijacking my own thread!
>  
> Thanks for all your help,
> Kynthia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160608/f68c3843/attachment-0001.html>

From nathanieljon at gmail.com  Wed Jun  8 17:28:59 2016
From: nathanieljon at gmail.com (Nathaniel Jones)
Date: Wed, 8 Jun 2016 20:28:59 -0400
Subject: [Radiance-general] [HDRI] Photosphere (or equivalent) in Linux
	or Windows?
In-Reply-To: <515fe390129247e48bda953ae366c334@rexb.intranet.epfl.ch>
References: <515fe390129247e48bda953ae366c334@rexb.intranet.epfl.ch>
Message-ID: <CAJR73tszNbMNXQUYuYxTmq9C5zcef34QnKrv6XTYWrFii0wTUA@mail.gmail.com>

To continue this conversation, I found a demonstration
<http://nljones.scripts.mit.edu/hdr/> I made a while back of the same
source jpegs used to create HDR files with three different softwares for
Windows (Photosphere, Bracket, and Picturenaut). The page is made using a
neat little javascript export from Picturenaut. As you can see from the
histograms, the three images are nearly (but not quite) identical. As I
recall, the Photosphere image looked the smoothest in falsecolor.

Cheers,

Nathaniel

On Mon, May 30, 2016 at 9:09 AM, Chamilothori Kynthia <
kynthia.chamilothori at epfl.ch> wrote:

> Dear Radiance community,
>
>
>
> There was a great effort a couple of years ago to create a cross-platform
> version of Photosphere by Greg and Helena Eydelberg. Is this version
> perhaps stable enough for distribution?
>
> Otherwise, what would you use as an alternative if not Photosphere? Has
> anyone used successfully any other workaround (e.g. an OS X virtual box)?
>
>
>
> Thanks for any ideas!
>
>
>
> Best,
>
> Kynthia Chamilothori
>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160608/0f9bbeb2/attachment.html>

From tbleicher at gmail.com  Wed Jun  8 18:08:42 2016
From: tbleicher at gmail.com (Thomas Bleicher)
Date: Wed, 8 Jun 2016 20:08:42 -0500
Subject: [Radiance-general] Radiance and Daysim
In-Reply-To: <CANTU3+pD6BgDCjqOHU4WjvSf5aHj88mh4c0RqYu2F6mdPP4Hcw@mail.gmail.com>
References: <CANTU3+pD6BgDCjqOHU4WjvSf5aHj88mh4c0RqYu2F6mdPP4Hcw@mail.gmail.com>
Message-ID: <CAKGV-k1FFTr7br7iqX_UtvZ026ycSRP6wYt2vPp0Qo=H67BFyA@mail.gmail.com>

Ziya

I am copying the Radiance-general mailing list on this conversation. Please
subscribe to the list (
http://radiance-online.org/community/mailing-lists/subscribe/radiance-general-mailing-list)
to follow the discussion there. The list members are far more knowledgeable
about this than I am.

I general I'd say that the octree format was chosen because it is an
efficient way to organize geometry in computer memory if you have to
frequently "query" the geometry for intersections, like during the
rendering calculations.

Daysim uses the octree format because it is a specialized version of
Radiance. Under the hood the data structures are identical.

On Wed, Jun 8, 2016 at 1:49 PM, Ziya Usta <ziyausta61 at gmail.com> wrote:

> Dear Mr. Bleicher, I  want to know why Radiance and Daysim use octree
> representation to run simulations. What are the benefits of octree for ray
> tracing? Any information about that would be very helpful.
>
> All the best,
>
> Ziya
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160608/3a691e79/attachment.html>

From rmfritz3 at gmail.com  Wed Jun  8 23:06:18 2016
From: rmfritz3 at gmail.com (Randolph M. Fritz)
Date: Wed, 8 Jun 2016 23:06:18 -0700
Subject: [Radiance-general] Strange behaviour with mixed material
In-Reply-To: <ACF98A76D0047542A29FEB2F3EB0DAA1525EA6@E-AEXMBX01.global.arup.com>
References: <ACF98A76D0047542A29FEB2F3EB0DAA151BB04@E-AEXMBX01.global.arup.com>
	<13A27406-0AD6-45EC-98F3-70046AF9C537@lmi.net>
	<4713D6B9-4B7D-4A5D-BABA-7EDE2009E028@gmail.com>
	<ACF98A76D0047542A29FEB2F3EB0DAA1525EA6@E-AEXMBX01.global.arup.com>
Message-ID: <CANeAMoJwrqSRO6wmSj8T5msKc2TzinGJpygFW_e43KsE4fEWRQ@mail.gmail.com>

I've put up the "Asphalt" example at
http://www.radiance-online.org/learning/tips-tricks/Asphalt. Please let me
know if it looks OK.

Randolph

On Tue, Jun 7, 2016 at 7:35 AM, Santiago Torres <Santiago.Torres at arup.com>
wrote:

> Thanks due to Kanae Hagiwara, from our Tokyo office, who found the problem!
>
>
>
> And to Greg, of course, for finding the solution!
>
>
>
> S.
>
>
>
>
>
> *From:* Gregory J. Ward [mailto:gregoryjward at gmail.com]
> *Sent:* 06 June 2016 17:25
> *To:* Greg Ward
> *Cc:* Radiance general discussion
> *Subject:* Re: [Radiance-general] Strange behaviour with mixed material
>
>
>
> Just a quick follow-up.  This was indeed a bug in the m_mirror routine,
> which is now sorted out.  The next distribution should fix it.
>
>
>
> Thanks, Santiago!
>
>
>
> -Greg
>
>
>
> *From: *Greg Ward <gward at lmi.net>
>
> *Date: *June 3, 2016 1:38:53 PM PDT
>
>
>
> Hi Santiago,
>
>
>
> Giulio kindly shared his tutorials and I haven't gotten around to putting
> them onto radiance-online.org, mostly because I don't know how to modify
> the website anymore since it was updated.  However, I have uploaded this
> particular tutorial for you to:
>
>
>
>                 http://www.anyhere.com/gward/pickup/giulio_mirror.tar.gz
>
>
>
> However, this is really a situation that didn't occur to me, where you
> have indirect rays coming from the opposite side.  I see now that I should
> modify a test in the m_mirror.c routine to account for this case.  I will
> send you a modified version of this file in hopes that you can rebuild and
> test it for me.
>
>
>
> Cheers,
>
> -Greg
>
>
>
> *From: *Santiago Torres <Santiago.Torres at arup.com>
>
> *Date: *June 3, 2016 1:10:50 PM PDT
>
>
>
> Dear all,
>
>
>
> I?m trying to define a mixfunc material to modify a mirror definition, so
> I can create holes (horizontal bands in this case) in the mirror. This was
> explained in an old tutorial by G. Antonutto, which now seems lost (at
> least I couldn?t find it online? pillo?).
>
>
>
> The complete definition is like this:
>
>
>
> ## metal
>
> void metal metal_01
>
> 0
>
> 0
>
> 5 .8 .8 .8 .05 0
>
>
>
> ## mix the metal with void to create holes
>
> void mixfunc strip
>
> 4 metal_01 void 'if(sin(Pz/10),0,1)' .
>
> 0
>
> 0
>
>
>
> ## alter the reflectance of mirror, reflectance is 0% for holes
>
> void brightfunc band
>
> 2 'if(sin(Pz/10),0,1)' .
>
> 0
>
> 0
>
>
>
> ## mirror attached to the metal surface with holes
>
> band mirror mix_01
>
> 1 strip
>
> 0
>
> 3 .9 .9 .9
>
>
>
>
>
> If I create a cube with the ?mix_01? material, it looks as expected.
> Horizontal bands of void in the mirror let the direct light through and the
> reflected light is also in matching stripes.
>
>
>
> However, with the diffuse calculation, light doesn?t seem to get through
> the void part. For example, if I measure irradiance inside the cube with
> only a glow source outside, I get zero.
>
>
>
> The strangest part is that if I look at the model in rvu, it looks fine
> and there is diffuse light inside? unless I set ?aa 0!!!
>
>
>
> All other settings seem to make no difference (with ab > 0, of course).
>
>
>
> Rpict behaves like rtrace, no diffuse light through.
>
>
>
> I?ve tried setting all rtrace parameters to the rvu defaults (including dr
> 0), but the result is still nothing.
>
>
>
> I?m sure there is an explanation, which is possibly that the material is
> just too weird, but I?m still confused by the strange difference in
> behaviour between rtrace/rpict and rvu?
>
>
>
> Any ideas?
>
> Thanks!
>
> Santiago
>
> ____________________________________________________________
> Electronic mail messages entering and leaving Arup  business
> systems are scanned for acceptability of content and viruses
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160608/8731ca63/attachment-0001.html>

From kynthia.chamilothori at epfl.ch  Thu Jun  9 02:33:53 2016
From: kynthia.chamilothori at epfl.ch (Chamilothori Kynthia)
Date: Thu, 9 Jun 2016 09:33:53 +0000
Subject: [Radiance-general] [HDRI] Photosphere (or equivalent) in
 Linux	or Windows?
In-Reply-To: <CAJR73tszNbMNXQUYuYxTmq9C5zcef34QnKrv6XTYWrFii0wTUA@mail.gmail.com>
References: <515fe390129247e48bda953ae366c334@rexb.intranet.epfl.ch>
	<CAJR73tszNbMNXQUYuYxTmq9C5zcef34QnKrv6XTYWrFii0wTUA@mail.gmail.com>
Message-ID: <929587ce217246d09cfdf4c1504be706@rexb.intranet.epfl.ch>

Hi Nathaniel,

This is a very interesting comparison, thank you! The HDR HTML viewer looks like a great tool for sharing HDR files.

Cheers,
Kynthia

From: Nathaniel Jones [mailto:nathanieljon at gmail.com]
Sent: jeudi 9 juin 2016 02:29
To: Radiance general discussion <radiance-general at radiance-online.org>
Subject: Re: [Radiance-general] [HDRI] Photosphere (or equivalent) in Linux or Windows?

To continue this conversation, I found a demonstration<http://nljones.scripts.mit.edu/hdr/> I made a while back of the same source jpegs used to create HDR files with three different softwares for Windows (Photosphere, Bracket, and Picturenaut). The page is made using a neat little javascript export from Picturenaut. As you can see from the histograms, the three images are nearly (but not quite) identical. As I recall, the Photosphere image looked the smoothest in falsecolor.

Cheers,

Nathaniel

On Mon, May 30, 2016 at 9:09 AM, Chamilothori Kynthia <kynthia.chamilothori at epfl.ch<mailto:kynthia.chamilothori at epfl.ch>> wrote:
Dear Radiance community,

There was a great effort a couple of years ago to create a cross-platform version of Photosphere by Greg and Helena Eydelberg. Is this version perhaps stable enough for distribution?
Otherwise, what would you use as an alternative if not Photosphere? Has anyone used successfully any other workaround (e.g. an OS X virtual box)?

Thanks for any ideas!

Best,
Kynthia Chamilothori


_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org<mailto:Radiance-general at radiance-online.org>
http://www.radiance-online.org/mailman/listinfo/radiance-general

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160609/ff4e964c/attachment.html>

From kynthia.chamilothori at epfl.ch  Thu Jun  9 02:34:58 2016
From: kynthia.chamilothori at epfl.ch (Chamilothori Kynthia)
Date: Thu, 9 Jun 2016 09:34:58 +0000
Subject: [Radiance-general] [HDRI] Photosphere (or equivalent) in
 Linux	or Windows?
In-Reply-To: <B4DF8A40-1C73-4272-8726-A082CD06B1F4@lmi.net>
References: <3ede400df91045538724ffd3ada027b7@rexb.intranet.epfl.ch>
	<B4DF8A40-1C73-4272-8726-A082CD06B1F4@lmi.net>
Message-ID: <fb350e5e37ef45e3bde783b3f58bede5@rexb.intranet.epfl.ch>

Hi Greg,

I was reading it from ximage indeed - mystery solved! Thanks for the clarification.

Cheers,
Kynthia

From: Greg Ward [mailto:gregoryjward at gmail.com]
Sent: mercredi 8 juin 2016 17:01
To: Radiance general discussion <radiance-general at radiance-online.org>
Subject: Re: [Radiance-general] [HDRI] Photosphere (or equivalent) in Linux or Windows?

Hi Kynthia,

I suppose it depends on how you obtained your $img_val.  If you read it using pcomb (without -o option), then your exposure correction is correct.  If you read it from ximage using the 'l' command or similar, then it was already multiplied by 179 and you should leave this factor off.

Cheers,
-Greg



From: Chamilothori Kynthia <kynthia.chamilothori at epfl.ch<mailto:kynthia.chamilothori at epfl.ch>>

Date: June 8, 2016 4:41:37 AM PDT

To: Radiance general discussion <radiance-general at radiance-online.org<mailto:radiance-general at radiance-online.org>>


Hi Greg,

Thanks for proposing a solution so quickly - much better than my clumsy attempts at grep!

However, my calibrated image still has very low luminance values (< 1.0L) This makes sense: as I read from the File Format document in the Radiance references, the EXPOSURE variables in the header are cumulative, so I am essentially dividing all my values by 178 (which is my $ecorr). Am I doing the conversion (set ecorr=`ev "179*$img_val/$meas"`) incorrectly? :-)



Thanks for your help once again,

Kynthia

From: Greg Ward [mailto:gregoryjward at gmail.com]
Sent: mardi 7 juin 2016 17:45
To: Radiance general discussion <radiance-general at radiance-online.org<mailto:radiance-general at radiance-online.org>>
Subject: Re: [Radiance-general] [HDRI] Photosphere (or equivalent) in Linux or Windows?

Hi Kynthia,

The corrected version of this command sequence is:

            (getinfo < capture.hdr  | sed 1a\
EXPOSURE=$ecorr ; getinfo - < capture.hdr) > calibrated.hdr

It's important to put the backslash immediately after the 'a' with no spaces for this to work.  This puts the EXPOSURE= line on the second line of the header, instead of after it.

The following will create a "slighly wrong" header that will still work -- this is what I usually do:

                echo EXPOSURE=$ecorr  > calibrated.hdr
                cat capture.hdr >> calibrated.hdr

Cheers,
-Greg


From: Chamilothori Kynthia <kynthia.chamilothori at epfl.ch<mailto:kynthia.chamilothori at epfl.ch>>

Date: June 7, 2016 6:30:37 AM PDT


Hi all,

Germ?n and Mehlika, thanks for introducing me to hdrscope, I'm installing it right now.
And thank you Nathaniel for solving the RAYPATH problem!

In case it helps someone else, I was using Greg's hdrgen and the combination of ra_xyze, pcompos and pvalue to calibrate an HDR image as described in this thread<http://www.radiance-online.org/pipermail/radiance-general/2011-April/007764.html> and I ran into the following error when applying the last line:

(getinfo < capture.hdr ; echo EXPOSURE=$ecorr ; getinfo - < capture.hdr) > calibrated.hdr

The output picture reads as  a 'bad picture format' with ximage and a closer look reveals that the EXPOSURE line that is added in the header is just above the -Y +X resolution parameters, with the empty line ("\n\n") before it, terminating the header before this new EXPOSURE variable.
Out of curiosity I put the empty line after the EXPOSURE (this time with no lines between the header variables), and now the HDR opens correctly with ximage with both EXPOSURE variables (original and new) but the luminance values are very low (<1L). I'm obviously doing something very wrong.
If I understand correctly, the error correction (and the added EXPOSURE variable) should ideally be very close to 179 based on the standard lumens/watt conversion - in my case it's 178.02 as the ratio of measured and generated luminance values is 0.99. Is this correct?

I've lent our copy of Rendering with Radiance to a student, so forgive me if I'm missing things that are explained there.
Let me know if I should make a separate message about this, as I am hijacking my own thread!

Thanks for all your help,
Kynthia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160609/ded02efa/attachment-0001.html>

From Robert.Guglielmetti at nrel.gov  Thu Jun  9 11:23:58 2016
From: Robert.Guglielmetti at nrel.gov (Guglielmetti, Robert)
Date: Thu, 9 Jun 2016 18:23:58 +0000
Subject: [Radiance-general] Radiance and Daysim
In-Reply-To: <CAKGV-k1FFTr7br7iqX_UtvZ026ycSRP6wYt2vPp0Qo=H67BFyA@mail.gmail.com>
References: <CANTU3+pD6BgDCjqOHU4WjvSf5aHj88mh4c0RqYu2F6mdPP4Hcw@mail.gmail.com>
	<CAKGV-k1FFTr7br7iqX_UtvZ026ycSRP6wYt2vPp0Qo=H67BFyA@mail.gmail.com>
Message-ID: <D37F0FD0.26246%Robert.Guglielmetti@nrel.gov>

In a word: yup. This recent technical report from Roland Schregle on his photon map work also discusses at length the octree advantage, in this case from the perspective of photon map storage.

https://www.academia.edu/25528679/The_RADIANCE_Out-of-Core_Photon_Map_Technical_Report

On 6/8/16, 7:08 PM, "Thomas Bleicher" <tbleicher at gmail.com<mailto:tbleicher at gmail.com>> wrote:

Ziya

I am copying the Radiance-general mailing list on this conversation. Please subscribe to the list (http://radiance-online.org/community/mailing-lists/subscribe/radiance-general-mailing-list) to follow the discussion there. The list members are far more knowledgeable about this than I am.

I general I'd say that the octree format was chosen because it is an efficient way to organize geometry in computer memory if you have to frequently "query" the geometry for intersections, like during the rendering calculations.

Daysim uses the octree format because it is a specialized version of Radiance. Under the hood the data structures are identical.

On Wed, Jun 8, 2016 at 1:49 PM, Ziya Usta <ziyausta61 at gmail.com<mailto:ziyausta61 at gmail.com>> wrote:
Dear Mr. Bleicher, I  want to know why Radiance and Daysim use octree representation to run simulations. What are the benefits of octree for ray tracing? Any information about that would be very helpful.

All the best,

Ziya



From germolinal at gmail.com  Sat Jun 11 17:07:17 2016
From: germolinal at gmail.com (=?UTF-8?Q?Germ=C3=A1n_Molina_Larrain?=)
Date: Sat, 11 Jun 2016 21:07:17 -0300
Subject: [Radiance-general] GENDAYMTX with part of the year
Message-ID: <CAF-iH4Jh-nTcdtrbpOR_FXxx6QGBhs5msT2VP1EO+omHKhuCig@mail.gmail.com>

Hello everyone,

I have been trying to generate the Daylight Matrix for a WEA file that
consists only on part of the year. The program seems to do the job, but
fails on the header, assuming the output is a matrix with 8760 rows (hours).

... I wonder if the error is just the header (i.e. change the number of
rows and go with it) or if gendaymtx is actually doing something wrong
because of the unexpected input.

Best,

Germ?n
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160611/e3c4d359/attachment.html>

From gregoryjward at gmail.com  Sat Jun 11 17:54:32 2016
From: gregoryjward at gmail.com (Greg Ward)
Date: Sat, 11 Jun 2016 17:54:32 -0700
Subject: [Radiance-general] GENDAYMTX with part of the year
In-Reply-To: <CAF-iH4Jh-nTcdtrbpOR_FXxx6QGBhs5msT2VP1EO+omHKhuCig@mail.gmail.com>
References: <CAF-iH4Jh-nTcdtrbpOR_FXxx6QGBhs5msT2VP1EO+omHKhuCig@mail.gmail.com>
Message-ID: <FAEFE3DB-64CC-4A11-B693-DDD26205D61E@lmi.net>

Hi Germ?n,

It's difficult to tell from your e-mail which program is failing and why.  Can you send me a private message with your input file, and the list of commands that isn't working for you?  There's no built-in assumption about the number of records in gendaymtx, but maybe the workflow you're using has such an assumption.  Either that, or we have a bug to fix.

Cheers,
-Greg

> From: Germ?n Molina Larrain <germolinal at gmail.com>
> Date: June 11, 2016 5:07:17 PM PDT
> 
> Hello everyone, 
> 
> I have been trying to generate the Daylight Matrix for a WEA file that consists only on part of the year. The program seems to do the job, but fails on the header, assuming the output is a matrix with 8760 rows (hours).
> 
> ... I wonder if the error is just the header (i.e. change the number of rows and go with it) or if gendaymtx is actually doing something wrong because of the unexpected input.
> 
> Best,
> 
> Germ?n
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160611/1397e206/attachment.html>

From germolinal at gmail.com  Sat Jun 11 18:10:58 2016
From: germolinal at gmail.com (=?UTF-8?Q?Germ=C3=A1n_Molina_Larrain?=)
Date: Sat, 11 Jun 2016 22:10:58 -0300
Subject: [Radiance-general] GENDAYMTX with part of the year
In-Reply-To: <FAEFE3DB-64CC-4A11-B693-DDD26205D61E@lmi.net>
References: <CAF-iH4Jh-nTcdtrbpOR_FXxx6QGBhs5msT2VP1EO+omHKhuCig@mail.gmail.com>
	<FAEFE3DB-64CC-4A11-B693-DDD26205D61E@lmi.net>
Message-ID: <CAF-iH4L1QACs9od23PuCuqVLBzJ1ABpXFfzk8xBYt9ggRhkRoQ@mail.gmail.com>

Hello Greg,

I am sorry about this.... it seems to be working now. I am not sure what
happened before, maybe an error on my typing.

I am sorry, thanks anyway

2016-06-11 21:54 GMT-03:00 Greg Ward <gregoryjward at gmail.com>:

> Hi Germ?n,
>
> It's difficult to tell from your e-mail which program is failing and why.
> Can you send me a private message with your input file, and the list of
> commands that isn't working for you?  There's no built-in assumption about
> the number of records in gendaymtx, but maybe the workflow you're using has
> such an assumption.  Either that, or we have a bug to fix.
>
> Cheers,
> -Greg
>
> *From: *Germ?n Molina Larrain <germolinal at gmail.com>
>
> *Date: *June 11, 2016 5:07:17 PM PDT
>
>
> Hello everyone,
>
> I have been trying to generate the Daylight Matrix for a WEA file that
> consists only on part of the year. The program seems to do the job, but
> fails on the header, assuming the output is a matrix with 8760 rows (hours).
>
> ... I wonder if the error is just the header (i.e. change the number of
> rows and go with it) or if gendaymtx is actually doing something wrong
> because of the unexpected input.
>
> Best,
>
> Germ?n
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160611/5896fbf2/attachment.html>

From rioboo at gmail.com  Sun Jun 12 16:16:03 2016
From: rioboo at gmail.com (goodriver laurus)
Date: Mon, 13 Jun 2016 00:16:03 +0100
Subject: [Radiance-general] mirror material ignoring modifier in virtual
	source calculations
Message-ID: <CADr1nSGXhC_i+9Ghn59MBZrTRwN3QLvHtoMUh77T_36NM1NqBQ@mail.gmail.com>

Dear all,

I am currently having problems using mirror materials with brightfunc
modifiers for virtual source calculations. The mirror material seems to
ignore the modifier. I've seen in recent post that there seems to be a bug
with in the m_mirror routine and I wonder if that is the problem or if it
could be something else.

Thanks,

rioboo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160613/e3e0b8d9/attachment.html>

From gregoryjward at gmail.com  Sun Jun 12 16:30:04 2016
From: gregoryjward at gmail.com (Greg Ward)
Date: Sun, 12 Jun 2016 16:30:04 -0700
Subject: [Radiance-general] mirror material ignoring modifier in virtual
	source calculations
In-Reply-To: <CADr1nSGXhC_i+9Ghn59MBZrTRwN3QLvHtoMUh77T_36NM1NqBQ@mail.gmail.com>
References: <CADr1nSGXhC_i+9Ghn59MBZrTRwN3QLvHtoMUh77T_36NM1NqBQ@mail.gmail.com>
Message-ID: <8B6D9FBB-D19D-4964-8F33-38E37E10FA55@lmi.net>

Hi Rioboo,

It helps when you give a specific example.  What is your material definition, and what is it doing that disagrees with your expectations?

The mirror material will ignore its modifiers in the case when you have given an alternate material type.  This will be called instead when viewed directly.  The modifiers to the mirror itself will only be used for calculating the virtual source contributions.

Best,
-Greg

> From: goodriver laurus <rioboo at gmail.com>
> Date: June 12, 2016 4:16:03 PM PDT
> 
> Dear all,
> 
> I am currently having problems using mirror materials with brightfunc modifiers for virtual source calculations. The mirror material seems to ignore the modifier. I've seen in recent post that there seems to be a bug with in the m_mirror routine and I wonder if that is the problem or if it could be something else.
> 
> Thanks,
> 
> rioboo
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160612/119f0c5c/attachment.html>

From rioboo at gmail.com  Mon Jun 13 02:29:16 2016
From: rioboo at gmail.com (goodriver laurus)
Date: Mon, 13 Jun 2016 10:29:16 +0100
Subject: [Radiance-general] mirror material ignoring modifier in virtual
	source calculations
Message-ID: <CADr1nSE3BBOFY0OhaHjLbQ406cxQu+_6K_8C-Ra3UJb3UOFXAw@mail.gmail.com>

------------------------------

Dear Greg,

Many thanks for for quick response. I am trying to use a modified
mirror like the one posted on 17 March 2008 in order to emulate the
angular-dependent reflections from a glass:

void glass glass_alt_mat
0
0
3 0.96 0.96 0.96

void brightfunc glass_angular_effect
2 A1+(1-A1)*(exp(-5.85*Rdot)-0.00287989916) .
0
1 0.08

glass_angular_effect mirror glass_mat
1 glass_alt_mat
0
3 1 1 1

I use this material to quantify in a top view the illuminance on the
ground due to reflected light from vertical windows (therefore not
looking at the glass, but just at the reflections). The calculation is
been done with rpict -i -ab 0 -dr 1. I have also tried other values
for the parameters but the results are the same.


I would expect the reflections to vary in value depending on the angle
of incidence on the glass. However, all reflections seem to be of the
same intensity, actually 100% reflective like in an ideal mirror.
I wonder if the issues I am having may have to do with the way I am
using rpict or if there is a more fundamental error. I have tried
testing this issue in Radiance 4.2 for Windows to see if could have to
do with the platform or with recent issues with the m_mirror routine,
as posted a few days ago, but the results are again the same.

Thanks and best regards,

Rioboo

Hi Rioboo,

It helps when you give a specific example.  What is your material
definition, and what is it doing that disagrees with your
expectations?

The mirror material will ignore its modifiers in the case when you
have given an alternate material type.  This will be called instead
when viewed directly.  The modifiers to the mirror itself will only be
used for calculating the virtual source contributions.

Best,
-Greg

>* From: goodriver laurus <rioboo at gmail.com <http://www.radiance-online.org/mailman/listinfo/radiance-general>>
*>* Date: June 12, 2016 4:16:03 PM PDT
*> >* Dear all,
*> >* I am currently having problems using mirror materials with
brightfunc modifiers for virtual source calculations. The mirror
material seems to ignore the modifier. I've seen in recent post that
there seems to be a bug with in the m_mirror routine and I wonder if
that is the problem or if it could be something else.
*> >* Thanks,
*> >* rioboo*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160613/bbb797ac/attachment.html>

From gregoryjward at gmail.com  Mon Jun 13 08:54:48 2016
From: gregoryjward at gmail.com (Greg Ward)
Date: Mon, 13 Jun 2016 08:54:48 -0700
Subject: [Radiance-general] mirror material ignoring modifier in virtual
	source calculations
In-Reply-To: <CADr1nSE3BBOFY0OhaHjLbQ406cxQu+_6K_8C-Ra3UJb3UOFXAw@mail.gmail.com>
References: <CADr1nSE3BBOFY0OhaHjLbQ406cxQu+_6K_8C-Ra3UJb3UOFXAw@mail.gmail.com>
Message-ID: <D7A521C1-83A8-40BD-BE98-1855E1B333C4@lmi.net>

Hi Rioboo,

Your definition looks correct to me.  What different conditions are you using to make this determination?

1) Do you change the angle of the sun?  This is the only way to test different angles on the mirror, since the sun is a collimated source of light.

2) When you change the solar angle, do you move your point or at least ensure that it remains in the reflected beam?  If it sees sunlight directly as well, you will need to look for variation in the 8-80% that is reflected (depending on angle).

3) Are you sure your mirror surface normal faces outwards?  If it faces inwards, like most windows in Radiance, then the mirrored sources will only happen on the interior.

Cheers,
-Greg

> From: goodriver laurus <rioboo at gmail.com>
> Date: June 13, 2016 2:29:16 AM PDT
> 
> 
> Dear Greg,
> 
> Many thanks for for quick response. I am trying to use a modified mirror like the one posted on 17 March 2008 in order to emulate the angular-dependent reflections from a glass:
> 
> void glass glass_alt_mat
> 0
> 0
> 3 0.96 0.96 0.96
> 
> void brightfunc glass_angular_effect
> 2 A1+(1-A1)*(exp(-5.85*Rdot)-0.00287989916) .
> 0
> 1 0.08
> 
> glass_angular_effect mirror glass_mat
> 1 glass_alt_mat
> 0
> 3 1 1 1
> 
> I use this material to quantify in a top view the illuminance on the ground due to reflected light from vertical windows (therefore not looking at the glass, but just at the reflections). The calculation is been done with rpict -i -ab 0 -dr 1. I have also tried other values for the parameters but the results are the same.
> 
> I would expect the reflections to vary in value depending on the angle of incidence on the glass. However, all reflections seem to be of the same intensity, actually 100% reflective like in an ideal mirror.
> I wonder if the issues I am having may have to do with the way I am using rpict or if there is a more fundamental error. I have tried testing this issue in Radiance 4.2 for Windows to see if could have to do with the platform or with recent issues with the m_mirror routine, as posted a few days ago, but the results are again the same.
> 
> Thanks and best regards,
> 
> Rioboo
> Hi Rioboo,
> 
> It helps when you give a specific example.  What is your material definition, and what is it doing that disagrees with your expectations?
> 
> The mirror material will ignore its modifiers in the case when you have given an alternate material type.  This will be called instead when viewed directly.  The modifiers to the mirror itself will only be used for calculating the virtual source contributions.
> 
> Best,
> -Greg
> 
> > From: goodriver laurus <rioboo at gmail.com>
> > Date: June 12, 2016 4:16:03 PM PDT
> > 
> > Dear all,
> > 
> > I am currently having problems using mirror materials with brightfunc modifiers for virtual source calculations. The mirror material seems to ignore the modifier. I've seen in recent post that there seems to be a bug with in the m_mirror routine and I wonder if that is the problem or if it could be something else.
> > 
> > Thanks,
> > 
> > rioboo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160613/d40f7c10/attachment-0001.html>

From rioboo at gmail.com  Mon Jun 13 11:56:25 2016
From: rioboo at gmail.com (goodriver laurus)
Date: Mon, 13 Jun 2016 19:56:25 +0100
Subject: [Radiance-general] mirror material ignoring modifier in virtual
	source calculations
Message-ID: <CADr1nSFY+RXHcLyj9te4SySGkzvJL9u8t6k3gYROKO0faoKCfw@mail.gmail.com>

Hi Greg,

I am sending you a simple test with my results, so you can have a look
if you have the time. I have included a small batch file to run the
calculation under MS-DOS (I had to change the extension to bat2 in
order to avoid the attachment to be blocked).

In answer to your questions:

1- I was testing different sun positions, but the test attached
includes only one. This should suffice to try different angles of
incidence, since every reflector has a different orientation.

2- I am not sure if I understand this point. I do see different values
where direct and reflected components converge, is that the question?

3- I checked the normals and they point outwards, but I guess that was
expected since I can see the reflections and the camera is located
outside the buildings.

I greatly appreciate your help, this issue is really puzzling me.

Many thanks,

Rioboo


Hi Rioboo,

Your definition looks correct to me.  What different conditions are
you using to make this determination?

1) Do you change the angle of the sun?  This is the only way to test
different angles on the mirror, since the sun is a collimated source
of light.

2) When you change the solar angle, do you move your point or at least
ensure that it remains in the reflected beam?  If it sees sunlight
directly as well, you will need to look for variation in the 8-80%
that is reflected (depending on angle).

3) Are you sure your mirror surface normal faces outwards?  If it
faces inwards, like most windows in Radiance, then the mirrored
sources will only happen on the interior.

Cheers,
-Greg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160613/3723a330/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test_Greg.rar
Type: application/rar
Size: 43191 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160613/3723a330/attachment-0001.bin>

From gregoryjward at gmail.com  Mon Jun 13 12:44:49 2016
From: gregoryjward at gmail.com (Greg Ward)
Date: Mon, 13 Jun 2016 12:44:49 -0700
Subject: [Radiance-general] mirror material ignoring modifier in virtual
	source calculations
In-Reply-To: <CADr1nSFY+RXHcLyj9te4SySGkzvJL9u8t6k3gYROKO0faoKCfw@mail.gmail.com>
References: <CADr1nSFY+RXHcLyj9te4SySGkzvJL9u8t6k3gYROKO0faoKCfw@mail.gmail.com>
Message-ID: <689C5256-EF73-4008-B5A1-662D8D8E81D9@lmi.net>

Hi Rioboo,

Your bat file only creates a single rendering with a single solar position.  In fact, I don't understand the output, which looks much darker than it should be for direct solar illumination.  Are you rendering different solar angles?  Can you do it with a simpler test case, like a single piece of glass with your mirror parallel to a diffuse surface that does not face the sun?  If you ran that at different solar incident angles, the value divided by the cosine of the incident angle (to account for grazing sunlight) should follow the Fresnel approximation you are using.

Cheers,
-Greg

> From: goodriver laurus <rioboo at gmail.com>
> Date: June 13, 2016 11:56:25 AM PDT
> 
> Hi Greg,
> I am sending you a simple test with my results, so you can have a look if you have the time. I have included a small batch file to run the calculation under MS-DOS (I had to change the extension to bat2 in order to avoid the attachment to be blocked).
> In answer to your questions:
> 1- I was testing different sun positions, but the test attached includes only one. This should suffice to try different angles of incidence, since every reflector has a different orientation.
> 2- I am not sure if I understand this point. I do see different values where direct and reflected components converge, is that the question?
> 3- I checked the normals and they point outwards, but I guess that was expected since I can see the reflections and the camera is located outside the buildings.
> I greatly appreciate your help, this issue is really puzzling me.
> Many thanks,
> Rioboo
> 
> Hi Rioboo,
> 
> Your definition looks correct to me.  What different conditions are you using to make this determination?
> 
> 1) Do you change the angle of the sun?  This is the only way to test different angles on the mirror, since the sun is a collimated source of light.
> 
> 2) When you change the solar angle, do you move your point or at least ensure that it remains in the reflected beam?  If it sees sunlight directly as well, you will need to look for variation in the 8-80% that is reflected (depending on angle).
> 
> 3) Are you sure your mirror surface normal faces outwards?  If it faces inwards, like most windows in Radiance, then the mirrored sources will only happen on the interior.
> 
> Cheers,
> -Greg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160613/0f8c8714/attachment.html>

From rioboo at gmail.com  Tue Jun 14 02:34:26 2016
From: rioboo at gmail.com (goodriver laurus)
Date: Tue, 14 Jun 2016 10:34:26 +0100
Subject: [Radiance-general] mirror material ignoring modifier in virtual
	source calculations
Message-ID: <CADr1nSFf5viXk8C1SAjQc7vxYuEN10O+Jx12KW-aqSf7qNAMUQ@mail.gmail.com>

Greg,

I think I may have found the issue. I was creating a simpler scene to send
over when I realized that the angular dependence was actually working. I
almost missed it because the differences were small, but it was working.
So, I went back to the original test and I discovered that the difference
was that I had been using aliases in the original test, but had had not
used them in the simplified scene I sent you, sorry about that. Could that
be it?

When I use aliases the mirror material seems to ignore the modifier:

void glass glass_alt_mat
0
0
3 0.96 0.96 0.96

void brightfunc glass_angular_effect
2 A1+(1-A1)*(exp(-5.85*Rdot)-0.00287989916) .
0
1 0.08

glass_angular_effect mirror glass_mat
1 glass_alt_mat
0
3 1 1 1
void  alias window glass_mat

If I use 'window' as the material for the geometry, then 'glass_mat' alias
is used instead, but the 'glass_angular_effect' modifier seems to be
ignored. However, if I apply 'glass_mat' as the material for the geometry
then it does work. So, I wonder if this is a reasonable explanation and if
it can be explained by the work aliases work. If that is the case it would
be great to know if there is a way around it so I can keep using aliases
whilst making sure modifiers are not ignored.

Many thanks,

Rioboo

Hi Rioboo,

Your bat file only creates a single rendering with a single solar
position.  In fact, I don't understand the output, which looks much
darker than it should be for direct solar illumination.  Are you
rendering different solar angles?  Can you do it with a simpler test
case, like a single piece of glass with your mirror parallel to a
diffuse surface that does not face the sun?  If you ran that at
different solar incident angles, the value divided by the cosine of
the incident angle (to account for grazing sunlight) should follow the
Fresnel approximation you are using.

Cheers,
-Greg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160614/77b1489b/attachment.html>

From rmfritz3 at gmail.com  Tue Jun 14 05:57:17 2016
From: rmfritz3 at gmail.com (Randolph M. Fritz)
Date: Tue, 14 Jun 2016 05:57:17 -0700
Subject: [Radiance-general] mirror material ignoring modifier in virtual
 source calculations
In-Reply-To: <CADr1nSFf5viXk8C1SAjQc7vxYuEN10O+Jx12KW-aqSf7qNAMUQ@mail.gmail.com>
References: <CADr1nSFf5viXk8C1SAjQc7vxYuEN10O+Jx12KW-aqSf7qNAMUQ@mail.gmail.com>
Message-ID: <CANeAMoLi0sRvRTbzJKurUMAu5p_jR-uvVc5owCkc-zhKctmgjA@mail.gmail.com>

I believe you need to apply the "inherit" modifier to the alias, otherwise,
indeed, the alias will not inherit the original material's modifier.

Randolph
On Jun 14, 2016 2:37 AM, "goodriver laurus" <rioboo at gmail.com> wrote:

> Greg,
>
> I think I may have found the issue. I was creating a simpler scene to send
> over when I realized that the angular dependence was actually working. I
> almost missed it because the differences were small, but it was working.
> So, I went back to the original test and I discovered that the difference
> was that I had been using aliases in the original test, but had had not
> used them in the simplified scene I sent you, sorry about that. Could that
> be it?
>
> When I use aliases the mirror material seems to ignore the modifier:
>
> void glass glass_alt_mat
> 0
> 0
> 3 0.96 0.96 0.96
>
> void brightfunc glass_angular_effect
> 2 A1+(1-A1)*(exp(-5.85*Rdot)-0.00287989916) .
> 0
> 1 0.08
>
> glass_angular_effect mirror glass_mat
> 1 glass_alt_mat
> 0
> 3 1 1 1
> void  alias window glass_mat
>
> If I use 'window' as the material for the geometry, then 'glass_mat' alias
> is used instead, but the 'glass_angular_effect' modifier seems to be
> ignored. However, if I apply 'glass_mat' as the material for the geometry
> then it does work. So, I wonder if this is a reasonable explanation and if
> it can be explained by the work aliases work. If that is the case it would
> be great to know if there is a way around it so I can keep using aliases
> whilst making sure modifiers are not ignored.
>
> Many thanks,
>
> Rioboo
>
> Hi Rioboo,
>
> Your bat file only creates a single rendering with a single solar position.  In fact, I don't understand the output, which looks much darker than it should be for direct solar illumination.  Are you rendering different solar angles?  Can you do it with a simpler test case, like a single piece of glass with your mirror parallel to a diffuse surface that does not face the sun?  If you ran that at different solar incident angles, the value divided by the cosine of the incident angle (to account for grazing sunlight) should follow the Fresnel approximation you are using.
>
> Cheers,
> -Greg
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160614/fe2ee1b4/attachment.html>

From rioboo at gmail.com  Tue Jun 14 06:45:46 2016
From: rioboo at gmail.com (goodriver laurus)
Date: Tue, 14 Jun 2016 14:45:46 +0100
Subject: [Radiance-general] mirror material ignoring modifier in virtual
	source calculations
Message-ID: <CADr1nSEWLy6wwqN+=tQUg827Ouyb3ojL-bqcSvZKfxsYXmDR9Q@mail.gmail.com>

Randolph,

That was my suspicion, and I was also guessing that applying the modifier
to the alias could perhaps work, but I had not tested it. It is great that
you can confirm it! It now makes sense, but I wonder if it would just be
easier if aliases could inherit modifiers, unless Greg thinks it is not
appropriate. I would personally think it would be more intuitive.

Many thanks,

Rioboo

I believe you need to apply the "inherit" modifier to the alias, otherwise,
indeed, the alias will not inherit the original material's modifier.

Randolph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160614/5b7f3aea/attachment-0001.html>

From gregoryjward at gmail.com  Tue Jun 14 08:34:47 2016
From: gregoryjward at gmail.com (Greg Ward)
Date: Tue, 14 Jun 2016 08:34:47 -0700
Subject: [Radiance-general] mirror material ignoring modifier in virtual
	source calculations
In-Reply-To: <CADr1nSEWLy6wwqN+=tQUg827Ouyb3ojL-bqcSvZKfxsYXmDR9Q@mail.gmail.com>
References: <CADr1nSEWLy6wwqN+=tQUg827Ouyb3ojL-bqcSvZKfxsYXmDR9Q@mail.gmail.com>
Message-ID: <0DB169E9-E464-4DE2-8174-8979C3D47A47@lmi.net>

You are both correct.  Applying the original modifier to the alias works, as does using the "inherit" tag.  One of the purposes of alias'es is to "pull out" a material (or modifier) definition to use with (or within) a different modifier chain.  The "inherit" tag was added later on to simplify alias management when all you wanted to do was essentially reassign materials.  If that's what you want alias'es for, then just get in the habit of using "inherit" in your work.

Cheers,
-Greg

> From: goodriver laurus <rioboo at gmail.com>
> Date: June 14, 2016 6:45:46 AM PDT
> 
> Randolph,
> 
> That was my suspicion, and I was also guessing that applying the modifier to the alias could perhaps work, but I had not tested it. It is great that you can confirm it! It now makes sense, but I wonder if it would just be easier if aliases could inherit modifiers, unless Greg thinks it is not appropriate. I would personally think it would be more intuitive.
> 
> Many thanks,
> 
> Rioboo
> 
> I believe you need to apply the "inherit" modifier to the alias, otherwise,
> indeed, the alias will not inherit the original material's modifier.
> 
> Randolph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160614/36b12ff3/attachment.html>

From Robert.Guglielmetti at nrel.gov  Tue Jun 14 09:18:43 2016
From: Robert.Guglielmetti at nrel.gov (Guglielmetti, Robert)
Date: Tue, 14 Jun 2016 16:18:43 +0000
Subject: [Radiance-general] mirror material ignoring modifier in virtual
 source calculations
In-Reply-To: <0DB169E9-E464-4DE2-8174-8979C3D47A47@lmi.net>
References: <CADr1nSEWLy6wwqN+=tQUg827Ouyb3ojL-bqcSvZKfxsYXmDR9Q@mail.gmail.com>
	<0DB169E9-E464-4DE2-8174-8979C3D47A47@lmi.net>
Message-ID: <D3858A23.26489%Robert.Guglielmetti@nrel.gov>

On 6/14/16, 9:34 AM, "Greg Ward" <gregoryjward at gmail.com<mailto:gregoryjward at gmail.com>> wrote:

 The "inherit" tag was added later on to simplify alias management when all you wanted to do was essentially reassign materials.  If that's what you want alias'es for, then just get in the habit of using "inherit" in your work.


I didn't even know about 'inherit' 'till just now; I've always used aliases for reassignment. Awesome, thanks Greg!

#MindBlown

- Rob


From zrogers at daylightinginnovations.com  Thu Jun 16 11:00:40 2016
From: zrogers at daylightinginnovations.com (Zack Rogers)
Date: Thu, 16 Jun 2016 12:00:40 -0600
Subject: [Radiance-general] New SPOT Pro version released!
Message-ID: <CAAP856xNPFR3SLLP1+=TPobAX5NJ2U7vSzajiUfJvcjYyt7RqQ@mail.gmail.com>

Fellow Radiance enthusiasts,

A new version of the SPOT Pro daylighting and lighting design and analysis
software is now available!  Visit SPOT home
<http://www.daylightinginnovations.com/spot-home>






to learn more about SPOT v5.02 and download the software.

SPOT Pro is a Windows-based stand-alone lighting and daylighting design
interface to a powerful Radiance ray-tracing engine that sits, accessible,
behind the scenes.  SPOT Pro has a number of unique simulation capabilities:

   - *Automated annual metric reports - compare various daylighting metrics
   with standard daylighting reports for LEED (v4, 2009), CHPS, IgCC, UDI PBSP
   and a robust SPOT daylight performance report.*
   - *Optical daylighting system annual simulation* - SPOT uses "system
   BSDF" files to describe Complex Fenestration Systems, like LightLouver or
   Tubular Daylight Devices, and perform annual Climate Based Daylight
   Modeling.
   - *Accurate Simulation of photosensor controlled electric lighting*
- SPOT simulates
   the actual photosensor system response, lets you refine the control system
   settings, and provides an annual simulation of the interaction between
   electric lighting and daylighting.  For those aiming for truly accurate
   simulation, this is the *only tool* that directly simulates the
   photosensor signals rather than using a workplane illuminance proxy, and
   that accounts for the interaction of electric light feedback on common
   closed-loop control systems.
   - *Output to EnergyPlus and DOE-2* - After optimization and simulation
   of the photosensor system, SPOT provides annual LPD multiplier schedule
   output files for both DOE-2 and EnergyPlus.
   - *Shade control simulation* - both automated/photosensor-based control
   and a range of unique manual shade control algorithms are available
   - *"Design Day" calculations* - results showing average "design day"
   conditions (calibrated to climate data) rather than a specific weather
   condition in an hourly weather file.
   - *Internal Geometry Modeler* - The internal modeling tools are fairly
   robust, with blocks, sloped ceilings, monitors, and sawtooth geometries
   available, yet still easy and quick to use with no CAD experience
   necessary.  Sketchup models can be imported into the software behind the
   scenes.
   - *Material Database and Editor * - New material database allows colors,
   patterns, glass, metals, and BSDF files to be assigned to your model's
   surfaces.
   - *Improved Renderings -* The use of materials and patterns greatly
   improve the quality of the perspective and sectional renderings.

The SPOT user manual
<http://www.manula.com/manuals/zrogers/spot-pro-v-5/1/en/topic/1-0-introduction>





 is an excellant resource and provides detailed information about the
software.  This SPOT webinar <https://www.youtube.com/watch?v=ecBFe83HRSY>


also provides a good introduction to the software.

We had a great workshop at LightFair in San Diego this year and are
offering the same workshop online as a series of 3 free webinars, as
scheduled below:

- SPOT Pro daylighting design and analysis.  Tuesday, June 21, 10AM MDT
- SPOT Pro materials and electric lighting design and analysis.  Tuesday,
June 28, 10AM MDT
- SPOT Pro photosensor system design and optimization: Tues, July 5, 10AM
MDT

Attend a webinar and recieve $100 off a SPOT Pro license purchased within
30days!  E-mail spot at daylightinginnovations.com if you are interested in
joining one of the LightFair workshop webinars or in scheduling a personal
SPOT webinar for your own company.

Join the growing list of design professionals and Universities using SPOT
to optimize daylighting and electric lighting designs.

Happy Simulating!

-- 
Zack Rogers, P.E., LEED AP BD+C
Daylighting Innovations, LLC
808 S. Public Road, Suite 200
Lafayette, CO 80026
(303)946-2310


www.daylightinginnovations.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160616/696023a2/attachment.html>

From mengdi.guo1988 at gmail.com  Mon Jun 13 22:56:54 2016
From: mengdi.guo1988 at gmail.com (Mengdi Guo)
Date: Tue, 14 Jun 2016 13:56:54 +0800
Subject: [Radiance-general] manipulate rtrace for desired outcome
Message-ID: <CAPK3KNFsT6_Xg0HLCvYCHOASriQZmZ+08A9ORAjZX9+ifScE8A@mail.gmail.com>

Hi,



Currently I'm using the ray tracing engine of radiance, trying to figure
out the ray paths connecting designated view points and light resources (in
cylinder and polygon type). In this process, I've encountered some
difficulties that I'd appreciate your assistance.

I'm mainly using light as primitive type, since I want to figure out the
possible ray paths between receiver point and artificial light sources.
However the ray paths is not what I?ve expected.

In the testing condition where there is one receiver and one polygon light
sources directly exposed to each other. The polygon light source is the
only light in this scene. The source and receiver are placed in the middle
of two building blocks. I?m controlling rtrace function with the parameters
? ?ab? ? ?ad? ??dj? ?? ds? ?-st? ?-ss?.

1.       No matter what parameters I?ve set for rtrace function, there?s
only one ray in the output. Yet, I?m expecting multiple rays emitted from
the receiver points to the light source, as described in radiance manual.

2.       I?d also like to know what parameters can control reflections
characters of rays. For instance, I want the rays to partly diffuse after
reflecting on the surface. The desirable condition is: for a bundle of rays
hitting the surface, 1) 70% of the rays will follow specular reflection,
30% will be scattered after reflection. 2) for the scattered part, I want
them to be reflected within an angle (e.g. 30 degree) to the specular
reflected ray.

Could you suggest me how to achieve the condition of 1 and 2 with radiance?
Is there any other suggestions on the setting of model or scene?

3.       Another question is: acknowledged that the emitted rays are not
evenly distributed for hemispherical sampling. I'm still wondering if it's
possible to evenly send rays with radiance.

Thank you very much with best regards,

Mengdi Guo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160614/6f0fb130/attachment.html>

From roland.schregle at gmail.com  Wed Jun 22 06:40:32 2016
From: roland.schregle at gmail.com (Schregle Roland HSLU T&A)
Date: Wed, 22 Jun 2016 15:40:32 +0200
Subject: [Radiance-general] Announcing the RADIANCE out-of-core photon map
Message-ID: <op.yjgn9uzpgbjfop@deldo>

Dear RADIANCE community,

we are proud to announce the release of a heavily revised RADIANCE photon  
map which includes parallelisation and out-of-core storage. This is the  
final outcome of the software developed during our project at the  
Competence Centre Envelopes and Solar Energy at the Lucerne University of  
Applied Sciences and Arts.

The out-of-core photon map enables simulations with very large numbers of  
photons on commodity hardware using on-demand loading and caching  
techniques. This is particularly useful with annual simulations using  
rcontrib, where the number of required photons scales linearly with the  
number of timestamps.

Since we consider out-of-core storage an advanced option, it must be  
explicitly enabled during compilation of the RADIANCE software; currently  
the original in-core photon map is still the default. Details on building  
the out-of-core photon map from source are documented in the RADIANCE  
distribution under ray/doc/notes compile_switches. Irrespective of the  
storage option used, mkpmap is now parallelised and accepts the '-n'  
option.

The software is now available from the RADIANCE CVS repository and will be  
included in the next official release. We provide this software to the  
community as is, with the caveat that it is not actively supported; I can  
volunteer limited support in my free time when possible, particularly in  
response to reported bugs.

The out-of-core photon map is documented in a paper in the Journal of  
Building Performance Simulation, and in an online technical report:
http://www.tandfonline.com/doi/full/10.1080/19401493.2016.1177116
https://www.researchgate.net/publication/303550129_The_RADIANCE_Out-of-Core_Photon_Map_Technical_Report

This work was supported by the Swiss National Science Foundation as part  
of the project ?Simulation-based assessment of daylight redirecting  
components for energy savings in office buildings? under grant SNSF  
#147053.

Best regards and happy photon mapping,

  --Roland


-- 
Dr. Roland Schregle
Senior Research Associate

Lucerne University of Applied Sciences and Arts
School of Engineering and Architecture
CC Envelopes and Solar Energy (EASE)
www.hslu.ch/ccease


From germolinal at gmail.com  Wed Jun 22 13:00:43 2016
From: germolinal at gmail.com (=?UTF-8?Q?Germ=C3=A1n_Molina_Larrain?=)
Date: Wed, 22 Jun 2016 17:00:43 -0300
Subject: [Radiance-general] RGB to Radiance definition
Message-ID: <CAF-iH4KbABU6x0c5hM2W2ueMRxa0LeSbqn8zZcqGD2ajd-SnSg@mail.gmail.com>

Dear All,

I am trying to integrate easier ways of defining materials in Groundhog,
for which I have the following doubt. How can I define a Radiance material
(i.e. plastic, metal, glass, etc.) from an RGB combination and the global
Reflectance (transmittance)? The purpose of this is to enable "eyedropping"
a color, and assigning a reflectance or transmittance to it.

What I initially did was to find the combination of RGB reflectances that
satisfied the rho = R*0.265 + 0.67*G + 0.065*B while maintaining the
original proportions of RGB. However, since the RGB color that comes from
the eyedropper has Black/White components (which intend to emulate shadows
and different light exposures), my procedure often ends up returning an R,
G or B channel that is greater than 1.

I guess my question is: Is there any way of reconstructing the R, G and B
reflectances (or transmittances or whatever) from an RGB pixel? Maybe
playing with HSL space or something?

Best,

Germ?n
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160622/fe1ff8c2/attachment.html>

From mcneil.andrew at gmail.com  Wed Jun 22 14:53:52 2016
From: mcneil.andrew at gmail.com (Andy McNeil)
Date: Wed, 22 Jun 2016 14:53:52 -0700
Subject: [Radiance-general] manipulate rtrace for desired outcome
In-Reply-To: <CAPK3KNFsT6_Xg0HLCvYCHOASriQZmZ+08A9ORAjZX9+ifScE8A@mail.gmail.com>
References: <CAPK3KNFsT6_Xg0HLCvYCHOASriQZmZ+08A9ORAjZX9+ifScE8A@mail.gmail.com>
Message-ID: <CAEFJVk9yt1KhYqsEcUCt-TVN0idNMyqV69Mx97v1Fn8m82KUVw@mail.gmail.com>

Mengdi,

Answers inline below...

1.       No matter what parameters I?ve set for rtrace function, there?s
> only one ray in the output. Yet, I?m expecting multiple rays emitted from
> the receiver points to the light source, as described in radiance manual.


By default rtrace outputs the accumulated value of the input ray. If you
want it to output information for rays traced to arrive at the reported
value you should use -o with either t or T.  See the rtrace manual page for
more output options:
http://radiance-online.org/learning/documentation/manual-pages/pdfs/rtrace.pdf

2.       I?d also like to know what parameters can control reflections
> characters of rays. For instance, I want the rays to partly diffuse after
> reflecting on the surface. The desirable condition is: for a bundle of rays
> hitting the surface, 1) 70% of the rays will follow specular reflection,
> 30% will be scattered after reflection. 2) for the scattered part, I want
> them to be reflected within an angle (e.g. 30 degree) to the specular
> reflected ray.
>

The relative weight of specular vs. diffuse rays is a result of the
material applied to the surface. if you use a plastic material such as
below (with 15% diffuse reflectance, 35% specular reflectance, and 0.05
roughness):
void plastic test70-30
0
0
5 0.15 0.15 0.15 0.35 0.05

then the specular rays will account for 30% of the final ray value and the
diffuse rays will account for 70% of the final ray value. However the
actual number of rays spawned are controlled by the -ad parameter for
diffuse rays and -ss parameter for specular rays, with the caveat that only
one ray is traced for the specular reflections if the roughness is 0,
otherwise you'd be tracing the same ray several times.

It seems to me that you want pure specular and scattered specular rays
together, so you'll probably need want to use a plasdata material
definition. The reference manual provides info on materials:
http://radsite.lbl.gov/radiance/refer/refman.pdf



> 3.       Another question is: acknowledged that the emitted rays are not
> evenly distributed for hemispherical sampling. I'm still wondering if it's
> possible to evenly send rays with radiance.


The spawned rays are random, but are distributed such that each ray as
equal influence on the result. This produces a non-biased estimate. If by
even you mean that you don't want a cosine factor on the distribution of
rays, you should look at plasdata. If however by evenly distributed you
don't want them to be randomized, I'm not sure that's possible without
going into the Radiance code, and doing this will result in a biased
estimate.

John Mardaljevic gives a good presentation on how radiance spawns rays in
order to find a result:
http://radiance-online.org/community/workshops/2014-london/presentations/day1/Mardaljevic_AmbientCrash.pdf

And chapter 12 in Rendering with Radiance gives a detailed overview of how
this all works:
http://radiance-online.org/learning/documentation/book/rwrcontents

Best,
Andy

On Mon, Jun 13, 2016 at 10:56 PM, Mengdi Guo <mengdi.guo1988 at gmail.com>
wrote:

> Hi,
>
>
>
> Currently I'm using the ray tracing engine of radiance, trying to figure
> out the ray paths connecting designated view points and light resources (in
> cylinder and polygon type). In this process, I've encountered some
> difficulties that I'd appreciate your assistance.
>
> I'm mainly using light as primitive type, since I want to figure out the
> possible ray paths between receiver point and artificial light sources.
> However the ray paths is not what I?ve expected.
>
> In the testing condition where there is one receiver and one polygon light
> sources directly exposed to each other. The polygon light source is the
> only light in this scene. The source and receiver are placed in the middle
> of two building blocks. I?m controlling rtrace function with the parameters
> ? ?ab? ? ?ad? ??dj? ?? ds? ?-st? ?-ss?.
>
> 1.       No matter what parameters I?ve set for rtrace function, there?s
> only one ray in the output. Yet, I?m expecting multiple rays emitted from
> the receiver points to the light source, as described in radiance manual.
>
> 2.       I?d also like to know what parameters can control reflections
> characters of rays. For instance, I want the rays to partly diffuse after
> reflecting on the surface. The desirable condition is: for a bundle of rays
> hitting the surface, 1) 70% of the rays will follow specular reflection,
> 30% will be scattered after reflection. 2) for the scattered part, I want
> them to be reflected within an angle (e.g. 30 degree) to the specular
> reflected ray.
>
> Could you suggest me how to achieve the condition of 1 and 2 with
> radiance? Is there any other suggestions on the setting of model or scene?
>
> 3.       Another question is: acknowledged that the emitted rays are not
> evenly distributed for hemispherical sampling. I'm still wondering if it's
> possible to evenly send rays with radiance.
>
> Thank you very much with best regards,
>
> Mengdi Guo
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160622/a80e5459/attachment.html>

From gregoryjward at gmail.com  Thu Jun 23 04:43:34 2016
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu, 23 Jun 2016 07:43:34 -0400
Subject: [Radiance-general] RGB to Radiance definition
In-Reply-To: <CAF-iH4KbABU6x0c5hM2W2ueMRxa0LeSbqn8zZcqGD2ajd-SnSg@mail.gmail.com>
References: <CAF-iH4KbABU6x0c5hM2W2ueMRxa0LeSbqn8zZcqGD2ajd-SnSg@mail.gmail.com>
Message-ID: <923B450A-2601-465B-B1FE-67882A616740@lmi.net>

Hi Germ?n,

While it's generally a bad idea to have reflectances (or transmittances) greater than 1 or less than 0, Radiance does not restrict you to this range.  In fact, if you are rendering colors from another (wider gamut) color space, such coefficients are sometimes necessary.  However, the Y sum (expressed by your R*0.265 + 0.67*G + 0.065*B equation) should stay between 0 and 1.  If you have an eyedropper that yields values outside this range, then it is not producing usable colors.

Cheers,
-Greg

> From: Germ?n Molina Larrain <germolinal at gmail.com>
> Date: June 22, 2016 4:00:43 PM EDT
> To: Radiance general discussion <radiance-general at radiance-online.org>
> 
> Dear All, 
> 
> I am trying to integrate easier ways of defining materials in Groundhog, for which I have the following doubt. How can I define a Radiance material (i.e. plastic, metal, glass, etc.) from an RGB combination and the global Reflectance (transmittance)? The purpose of this is to enable "eyedropping" a color, and assigning a reflectance or transmittance to it.
> 
> What I initially did was to find the combination of RGB reflectances that satisfied the rho = R*0.265 + 0.67*G + 0.065*B while maintaining the original proportions of RGB. However, since the RGB color that comes from the eyedropper has Black/White components (which intend to emulate shadows and different light exposures), my procedure often ends up returning an R, G or B channel that is greater than 1.
> 
> I guess my question is: Is there any way of reconstructing the R, G and B reflectances (or transmittances or whatever) from an RGB pixel? Maybe playing with HSL space or something?
> 
> Best,
> 
> Germ?n
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160623/1f6b1aa6/attachment-0001.html>

From p.khademagha at gmail.com  Thu Jun 23 05:34:54 2016
From: p.khademagha at gmail.com (parisa khademagha)
Date: Thu, 23 Jun 2016 14:34:54 +0200
Subject: [Radiance-general] Converting XYZ to Radiance RGB
Message-ID: <CAPysv6A3WpWFQDJuYP5KoBsM8ov8+Q5k3rVc5SO=15CMyknyqg@mail.gmail.com>

 Dear all,

I have used Konica Minolta (CL-500A)  spectrometer to measure X Y Z values
of the real sky using the data management software CL-S10w. I want to
convert these X Y Z values to the Radiance R G B. Is there any way/script
for such conversion?

Thanks in advance,
Kind regards,

Parisa
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160623/4146c5a7/attachment.html>

From gregoryjward at gmail.com  Thu Jun 23 06:12:04 2016
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu, 23 Jun 2016 09:12:04 -0400
Subject: [Radiance-general] Converting XYZ to Radiance RGB
In-Reply-To: <CAPysv6A3WpWFQDJuYP5KoBsM8ov8+Q5k3rVc5SO=15CMyknyqg@mail.gmail.com>
References: <CAPysv6A3WpWFQDJuYP5KoBsM8ov8+Q5k3rVc5SO=15CMyknyqg@mail.gmail.com>
Message-ID: <8DF9821D-D873-47BA-83CE-3010455C0932@lmi.net>

Hi Parisa,

You can use the xyz_rgb.cal definitions in ray/src/cal/cal, like so:

	rcalc -f xyz_rgb.cal -e "$1=R($1,$2,$3);$2=G($1,$2,$3);$3=B($1,$2,$3)"

Then, type or redirect your XYZ values separated by spaces or tabs to the standard input to get RGB values on the standard output.

Cheers,
-Greg

> From: parisa khademagha <p.khademagha at gmail.com>
> Subject: [Radiance-general] Converting XYZ to Radiance RGB
> Date: June 23, 2016 8:34:54 AM EDT
> To: Radiance general discussion <radiance-general at radiance-online.org>
> Reply-To: Radiance general discussion <radiance-general at radiance-online.org>
> 
> Dear all,
> 
> I have used Konica Minolta (CL-500A)  spectrometer to measure X Y Z values of the real sky using the data management software CL-S10w. I want to convert these X Y Z values to the Radiance R G B. Is there any way/script for such conversion?
> 
> Thanks in advance,
> Kind regards,
> 
> Parisa
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160623/58218ffc/attachment.html>

From p.khademagha at gmail.com  Thu Jun 23 06:26:08 2016
From: p.khademagha at gmail.com (parisa khademagha)
Date: Thu, 23 Jun 2016 15:26:08 +0200
Subject: [Radiance-general] Converting XYZ to Radiance RGB
In-Reply-To: <8DF9821D-D873-47BA-83CE-3010455C0932@lmi.net>
References: <CAPysv6A3WpWFQDJuYP5KoBsM8ov8+Q5k3rVc5SO=15CMyknyqg@mail.gmail.com>
	<8DF9821D-D873-47BA-83CE-3010455C0932@lmi.net>
Message-ID: <CAPysv6BjLWK5Fv9SfhiSLwQGcDC1CKTVgd=3vkW+dVpDB2UKQA@mail.gmail.com>

Hi Greg,

Thank you so much! I will give it a try.

Cheers,
Parisa

On 23 June 2016 at 15:12, Greg Ward <gregoryjward at gmail.com> wrote:

> Hi Parisa,
>
> You can use the xyz_rgb.cal definitions in ray/src/cal/cal, like so:
>
> rcalc -f xyz_rgb.cal -e "$1=R($1,$2,$3);$2=G($1,$2,$3);$3=B($1,$2,$3)"
>
> Then, type or redirect your XYZ values separated by spaces or tabs to the
> standard input to get RGB values on the standard output.
>
> Cheers,
> -Greg
>
> *From: *parisa khademagha <p.khademagha at gmail.com>
>
> *Subject: *[Radiance-general] Converting XYZ to Radiance RGB
>
> *Date: *June 23, 2016 8:34:54 AM EDT
>
> *To: *Radiance general discussion <radiance-general at radiance-online.org>
>
> *Reply-To: *Radiance general discussion <
> radiance-general at radiance-online.org>
>
>
> Dear all,
>
> I have used Konica Minolta (CL-500A)  spectrometer to measure X Y Z values
> of the real sky using the data management software CL-S10w. I want to
> convert these X Y Z values to the Radiance R G B. Is there any way/script
> for such conversion?
>
> Thanks in advance,
> Kind regards,
>
> Parisa
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160623/3c68c875/attachment.html>

From germolinal at gmail.com  Thu Jun 23 07:03:16 2016
From: germolinal at gmail.com (=?UTF-8?Q?Germ=C3=A1n_Molina_Larrain?=)
Date: Thu, 23 Jun 2016 11:03:16 -0300
Subject: [Radiance-general] RGB to Radiance definition
In-Reply-To: <923B450A-2601-465B-B1FE-67882A616740@lmi.net>
References: <CAF-iH4KbABU6x0c5hM2W2ueMRxa0LeSbqn8zZcqGD2ajd-SnSg@mail.gmail.com>
	<923B450A-2601-465B-B1FE-67882A616740@lmi.net>
Message-ID: <CAF-iH4K4JRB_zgBdzpXVRdnAD_xQ2CYzVpypYmFuBC1pCpdkzA@mail.gmail.com>

Hi Greg,

Thanks for your answer. I am already forcing the "Y sum restriction", which
can be easily done by scaling everything... I assume that rendering colours
from "a wider gamut" does not make any physical sense? (i.e. a 60%
reflective black surface?). What would not be a "wider gamut", though? any
color within the RGB triangle in the chromaticity diagram?

..... I have very little idea of what I am talking about..... sorry if I am
speaking nonsense

2016-06-23 8:43 GMT-03:00 Greg Ward <gregoryjward at gmail.com>:

> Hi Germ?n,
>
> While it's generally a bad idea to have reflectances (or transmittances)
> greater than 1 or less than 0, Radiance does not restrict you to this
> range.  In fact, if you are rendering colors from another (wider gamut)
> color space, such coefficients are sometimes necessary.  However, the Y sum
> (expressed by your R*0.265 + 0.67*G + 0.065*B equation) should stay between
> 0 and 1.  If you have an eyedropper that yields values outside this range,
> then it is not producing usable colors.
>
> Cheers,
> -Greg
>
> *From: *Germ?n Molina Larrain <germolinal at gmail.com>
>
> *Date: *June 22, 2016 4:00:43 PM EDT
>
> *To: *Radiance general discussion <radiance-general at radiance-online.org>
>
>
> Dear All,
>
> I am trying to integrate easier ways of defining materials in Groundhog,
> for which I have the following doubt. How can I define a Radiance material
> (i.e. plastic, metal, glass, etc.) from an RGB combination and the global
> Reflectance (transmittance)? The purpose of this is to enable "eyedropping"
> a color, and assigning a reflectance or transmittance to it.
>
> What I initially did was to find the combination of RGB reflectances that
> satisfied the rho = R*0.265 + 0.67*G + 0.065*B while maintaining the
> original proportions of RGB. However, since the RGB color that comes from
> the eyedropper has Black/White components (which intend to emulate shadows
> and different light exposures), my procedure often ends up returning an R,
> G or B channel that is greater than 1.
>
> I guess my question is: Is there any way of reconstructing the R, G and B
> reflectances (or transmittances or whatever) from an RGB pixel? Maybe
> playing with HSL space or something?
>
> Best,
>
> Germ?n
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160623/a3c06f9a/attachment-0001.html>

From mengdi.guo1988 at gmail.com  Thu Jun 23 00:13:33 2016
From: mengdi.guo1988 at gmail.com (Mengdi Guo)
Date: Thu, 23 Jun 2016 15:13:33 +0800
Subject: [Radiance-general] manipulate rtrace for desired outcome
In-Reply-To: <CAEFJVk9yt1KhYqsEcUCt-TVN0idNMyqV69Mx97v1Fn8m82KUVw@mail.gmail.com>
References: <CAPK3KNFsT6_Xg0HLCvYCHOASriQZmZ+08A9ORAjZX9+ifScE8A@mail.gmail.com>
	<CAEFJVk9yt1KhYqsEcUCt-TVN0idNMyqV69Mx97v1Fn8m82KUVw@mail.gmail.com>
Message-ID: <CAPK3KNG4KONuyq5_6gbS+J0KTEmU+4bFtoDSG80Hph08gB+G-g@mail.gmail.com>

Dear Andy,

Well received. Thank you very much for your kind help.

Best,
Mengdi

On 23 June 2016 at 05:53, Andy McNeil <mcneil.andrew at gmail.com> wrote:

> Mengdi,
>
> Answers inline below...
>
> 1.       No matter what parameters I?ve set for rtrace function, there?s
>> only one ray in the output. Yet, I?m expecting multiple rays emitted from
>> the receiver points to the light source, as described in radiance manual.
>
>
> By default rtrace outputs the accumulated value of the input ray. If you
> want it to output information for rays traced to arrive at the reported
> value you should use -o with either t or T.  See the rtrace manual page for
> more output options:
> http://radiance-online.org/learning/documentation/manual-pages/pdfs/rtrace.pdf
>
> 2.       I?d also like to know what parameters can control reflections
>> characters of rays. For instance, I want the rays to partly diffuse after
>> reflecting on the surface. The desirable condition is: for a bundle of rays
>> hitting the surface, 1) 70% of the rays will follow specular reflection,
>> 30% will be scattered after reflection. 2) for the scattered part, I want
>> them to be reflected within an angle (e.g. 30 degree) to the specular
>> reflected ray.
>>
>
> The relative weight of specular vs. diffuse rays is a result of the
> material applied to the surface. if you use a plastic material such as
> below (with 15% diffuse reflectance, 35% specular reflectance, and 0.05
> roughness):
> void plastic test70-30
> 0
> 0
> 5 0.15 0.15 0.15 0.35 0.05
>
> then the specular rays will account for 30% of the final ray value and the
> diffuse rays will account for 70% of the final ray value. However the
> actual number of rays spawned are controlled by the -ad parameter for
> diffuse rays and -ss parameter for specular rays, with the caveat that only
> one ray is traced for the specular reflections if the roughness is 0,
> otherwise you'd be tracing the same ray several times.
>
> It seems to me that you want pure specular and scattered specular rays
> together, so you'll probably need want to use a plasdata material
> definition. The reference manual provides info on materials:
> http://radsite.lbl.gov/radiance/refer/refman.pdf
>
>
>
>> 3.       Another question is: acknowledged that the emitted rays are not
>> evenly distributed for hemispherical sampling. I'm still wondering if it's
>> possible to evenly send rays with radiance.
>
>
> The spawned rays are random, but are distributed such that each ray as
> equal influence on the result. This produces a non-biased estimate. If by
> even you mean that you don't want a cosine factor on the distribution of
> rays, you should look at plasdata. If however by evenly distributed you
> don't want them to be randomized, I'm not sure that's possible without
> going into the Radiance code, and doing this will result in a biased
> estimate.
>
> John Mardaljevic gives a good presentation on how radiance spawns rays in
> order to find a result:
>
> http://radiance-online.org/community/workshops/2014-london/presentations/day1/Mardaljevic_AmbientCrash.pdf
>
> And chapter 12 in Rendering with Radiance gives a detailed overview of how
> this all works:
> http://radiance-online.org/learning/documentation/book/rwrcontents
>
> Best,
> Andy
>
> On Mon, Jun 13, 2016 at 10:56 PM, Mengdi Guo <mengdi.guo1988 at gmail.com>
> wrote:
>
>> Hi,
>>
>>
>>
>> Currently I'm using the ray tracing engine of radiance, trying to figure
>> out the ray paths connecting designated view points and light resources (in
>> cylinder and polygon type). In this process, I've encountered some
>> difficulties that I'd appreciate your assistance.
>>
>> I'm mainly using light as primitive type, since I want to figure out the
>> possible ray paths between receiver point and artificial light sources.
>> However the ray paths is not what I?ve expected.
>>
>> In the testing condition where there is one receiver and one polygon
>> light sources directly exposed to each other. The polygon light source is
>> the only light in this scene. The source and receiver are placed in the
>> middle of two building blocks. I?m controlling rtrace function with the
>> parameters ? ?ab? ? ?ad? ??dj? ?? ds? ?-st? ?-ss?.
>>
>> 1.       No matter what parameters I?ve set for rtrace function, there?s
>> only one ray in the output. Yet, I?m expecting multiple rays emitted from
>> the receiver points to the light source, as described in radiance manual.
>>
>> 2.       I?d also like to know what parameters can control reflections
>> characters of rays. For instance, I want the rays to partly diffuse after
>> reflecting on the surface. The desirable condition is: for a bundle of rays
>> hitting the surface, 1) 70% of the rays will follow specular reflection,
>> 30% will be scattered after reflection. 2) for the scattered part, I want
>> them to be reflected within an angle (e.g. 30 degree) to the specular
>> reflected ray.
>>
>> Could you suggest me how to achieve the condition of 1 and 2 with
>> radiance? Is there any other suggestions on the setting of model or scene?
>>
>> 3.       Another question is: acknowledged that the emitted rays are not
>> evenly distributed for hemispherical sampling. I'm still wondering if it's
>> possible to evenly send rays with radiance.
>>
>> Thank you very much with best regards,
>>
>> Mengdi Guo
>>
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
>


-- 
Mengdi GUO
PhD Candidate
the University of Hong Kong
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160623/fa98bbee/attachment.html>

From t.mcminnAocpms.com.au  Thu Jun 23 04:50:51 2016
From: t.mcminnAocpms.com.au (t.mcminnAocpms.com.au)
Date: Thu, 23 Jun 2016 19:50:51 +0800
Subject: [Radiance-general] RGB to Radiance definition
In-Reply-To: <CAF-iH4KbABU6x0c5hM2W2ueMRxa0LeSbqn8zZcqGD2ajd-SnSg@mail.gmail.com>
References: <CAF-iH4KbABU6x0c5hM2W2ueMRxa0LeSbqn8zZcqGD2ajd-SnSg@mail.gmail.com>
Message-ID: <74f0118f-00af-05b8-0feb-fcac539a47b2@iinet.net.au>

Hello Germ?n,

Have a look at Mark Stocks comment on converting RGB values 
http://www.radiance-online.org/pipermail/radiance-general/2011-April/007743.html

Regards

Terrance

On 23/06/2016 4:00 am, Germ?n Molina Larrain wrote:
> Dear All,
>
> I am trying to integrate easier ways of defining materials in
> Groundhog, for which I have the following doubt. How can I define a
> Radiance material (i.e. plastic, metal, glass, etc.) from an RGB
> combination and the global Reflectance (transmittance)? The purpose of
> this is to enable "eyedropping" a color, and assigning a reflectance
> or transmittance to it.
>
> What I initially did was to find the combination of RGB reflectances
> that satisfied the rho = R*0.265 + 0.67*G + 0.065*B while maintaining
> the original proportions of RGB. However, since the RGB color that
> comes from the eyedropper has Black/White components (which intend to
> emulate shadows and different light exposures), my procedure often
> ends up returning an R, G or B channel that is greater than 1.
>
> I guess my question is: Is there any way of reconstructing the R, G
> and B reflectances (or transmittances or whatever) from an RGB pixel?
> Maybe playing with HSL space or something?
>
> Best,
>
> Germ?n
>
>



From Robert.Guglielmetti at nrel.gov  Thu Jun 23 08:23:07 2016
From: Robert.Guglielmetti at nrel.gov (Guglielmetti, Robert)
Date: Thu, 23 Jun 2016 15:23:07 +0000
Subject: [Radiance-general] Converting XYZ to Radiance RGB
In-Reply-To: <8DF9821D-D873-47BA-83CE-3010455C0932@lmi.net>
References: <CAPysv6A3WpWFQDJuYP5KoBsM8ov8+Q5k3rVc5SO=15CMyknyqg@mail.gmail.com>
	<8DF9821D-D873-47BA-83CE-3010455C0932@lmi.net>
Message-ID: <D3915AD5.2687B%Robert.Guglielmetti@nrel.gov>

Use single quotes if on bash...

On 6/23/16, 7:12 AM, "Greg Ward" <gregoryjward at gmail.com<mailto:gregoryjward at gmail.com>> wrote:

Hi Parisa,

You can use the xyz_rgb.cal definitions in ray/src/cal/cal, like so:

rcalc -f xyz_rgb.cal -e "$1=R($1,$2,$3);$2=G($1,$2,$3);$3=B($1,$2,$3)"

Then, type or redirect your XYZ values separated by spaces or tabs to the standard input to get RGB values on the standard output.

Cheers,
-Greg


From: parisa khademagha <p.khademagha at gmail.com<mailto:p.khademagha at gmail.com>>

Subject: [Radiance-general] Converting XYZ to Radiance RGB

Date: June 23, 2016 8:34:54 AM EDT

To: Radiance general discussion <radiance-general at radiance-online.org<mailto:radiance-general at radiance-online.org>>

Reply-To: Radiance general discussion <radiance-general at radiance-online.org<mailto:radiance-general at radiance-online.org>>


Dear all,

I have used Konica Minolta (CL-500A)  spectrometer to measure X Y Z values of the real sky using the data management software CL-S10w. I want to convert these X Y Z values to the Radiance R G B. Is there any way/script for such conversion?

Thanks in advance,
Kind regards,

Parisa


From mstock at umich.edu  Thu Jun 23 09:35:47 2016
From: mstock at umich.edu (Mark Stock)
Date: Thu, 23 Jun 2016 10:35:47 -0600
Subject: [Radiance-general] RGB to Radiance definition
In-Reply-To: <74f0118f-00af-05b8-0feb-fcac539a47b2@iinet.net.au>
References: <CAF-iH4KbABU6x0c5hM2W2ueMRxa0LeSbqn8zZcqGD2ajd-SnSg@mail.gmail.com>
	<74f0118f-00af-05b8-0feb-fcac539a47b2@iinet.net.au>
Message-ID: <CADoMKs08eSCX=G_MtCNRvpP_727QM8HJ3un-O-Doi9hqfHkpxg@mail.gmail.com>

The slides referenced in that thread have moved (apologies!) to here:
http://markjstock.org/doc/gsd_talk_11_notes.pdf

The particular slide with my very unscientific RGB-to-reflectance
conversion contains:

Start with an RGB color from whatever color picker you use
(249, 214, 172)
Normalize 0..255 to 0..0.9
(0.88, 0.76, 0.61)
Square it (to move medium gray of 0.5 closer to grey card grey of 0.18)
(0.77, 0.57, 0.37)

I hope this helps.

Mark

On 6/23/16,  <> wrote:
> Hello Germ?n,
>
> Have a look at Mark Stocks comment on converting RGB values
> http://www.radiance-online.org/pipermail/radiance-general/2011-April/007743.html
>
> Regards
>
> Terrance
>
> On 23/06/2016 4:00 am, Germ?n Molina Larrain wrote:
>> Dear All,
>>
>> I am trying to integrate easier ways of defining materials in
>> Groundhog, for which I have the following doubt. How can I define a
>> Radiance material (i.e. plastic, metal, glass, etc.) from an RGB
>> combination and the global Reflectance (transmittance)? The purpose of
>> this is to enable "eyedropping" a color, and assigning a reflectance
>> or transmittance to it.
>>
>> What I initially did was to find the combination of RGB reflectances
>> that satisfied the rho = R*0.265 + 0.67*G + 0.065*B while maintaining
>> the original proportions of RGB. However, since the RGB color that
>> comes from the eyedropper has Black/White components (which intend to
>> emulate shadows and different light exposures), my procedure often
>> ends up returning an R, G or B channel that is greater than 1.
>>
>> I guess my question is: Is there any way of reconstructing the R, G
>> and B reflectances (or transmittances or whatever) from an RGB pixel?
>> Maybe playing with HSL space or something?
>>
>> Best,
>>
>> Germ?n
>>
>>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>


From germolinal at gmail.com  Fri Jun 24 06:59:57 2016
From: germolinal at gmail.com (=?UTF-8?Q?Germ=C3=A1n_Molina_Larrain?=)
Date: Fri, 24 Jun 2016 10:59:57 -0300
Subject: [Radiance-general] RGB to Radiance definition
In-Reply-To: <CADoMKs08eSCX=G_MtCNRvpP_727QM8HJ3un-O-Doi9hqfHkpxg@mail.gmail.com>
References: <CAF-iH4KbABU6x0c5hM2W2ueMRxa0LeSbqn8zZcqGD2ajd-SnSg@mail.gmail.com>
	<74f0118f-00af-05b8-0feb-fcac539a47b2@iinet.net.au>
	<CADoMKs08eSCX=G_MtCNRvpP_727QM8HJ3un-O-Doi9hqfHkpxg@mail.gmail.com>
Message-ID: <CAF-iH4JcGEuk+DQgYxj_3q4h_VQn+EHG__WXQJ-3CKJTkky4KQ@mail.gmail.com>

Thanks, Greg and Mark for your answers!

I studied this more, and decided not to follow Mark's procedure. Groundhog
is meant to be a Lighting tool, thus I do not really want to offer "very
unscientific" methods... I guess I will keep the eyedropper and colorpick
just for SketchUp representation. By default, the Radiance material will be
gray (based on just the reflectance), unless the user decides otherwise.

Would it be a problem if I mixed gray and non-gray materials in the same
model? I mean... I might know the RGB transmittances of a glass, but only
the reflectance of my carpet. Will that induce errors?

Best,

Germ?n

2016-06-23 13:35 GMT-03:00 Mark Stock <mstock at umich.edu>:

> The slides referenced in that thread have moved (apologies!) to here:
> http://markjstock.org/doc/gsd_talk_11_notes.pdf
>
> The particular slide with my very unscientific RGB-to-reflectance
> conversion contains:
>
> Start with an RGB color from whatever color picker you use
> (249, 214, 172)
> Normalize 0..255 to 0..0.9
> (0.88, 0.76, 0.61)
> Square it (to move medium gray of 0.5 closer to grey card grey of 0.18)
> (0.77, 0.57, 0.37)
>
> I hope this helps.
>
> Mark
>
> On 6/23/16,  <> wrote:
> > Hello Germ?n,
> >
> > Have a look at Mark Stocks comment on converting RGB values
> >
> http://www.radiance-online.org/pipermail/radiance-general/2011-April/007743.html
> >
> > Regards
> >
> > Terrance
> >
> > On 23/06/2016 4:00 am, Germ?n Molina Larrain wrote:
> >> Dear All,
> >>
> >> I am trying to integrate easier ways of defining materials in
> >> Groundhog, for which I have the following doubt. How can I define a
> >> Radiance material (i.e. plastic, metal, glass, etc.) from an RGB
> >> combination and the global Reflectance (transmittance)? The purpose of
> >> this is to enable "eyedropping" a color, and assigning a reflectance
> >> or transmittance to it.
> >>
> >> What I initially did was to find the combination of RGB reflectances
> >> that satisfied the rho = R*0.265 + 0.67*G + 0.065*B while maintaining
> >> the original proportions of RGB. However, since the RGB color that
> >> comes from the eyedropper has Black/White components (which intend to
> >> emulate shadows and different light exposures), my procedure often
> >> ends up returning an R, G or B channel that is greater than 1.
> >>
> >> I guess my question is: Is there any way of reconstructing the R, G
> >> and B reflectances (or transmittances or whatever) from an RGB pixel?
> >> Maybe playing with HSL space or something?
> >>
> >> Best,
> >>
> >> Germ?n
> >>
> >>
> >
> >
> > _______________________________________________
> > Radiance-general mailing list
> > Radiance-general at radiance-online.org
> > http://www.radiance-online.org/mailman/listinfo/radiance-general
> >
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160624/2ca2e029/attachment.html>

From jonathan.zhu.uk at gmail.com  Fri Jun 24 07:41:39 2016
From: jonathan.zhu.uk at gmail.com (Jiajie Zhu)
Date: Fri, 24 Jun 2016 15:41:39 +0100
Subject: [Radiance-general] Specular and diffuse reflection
Message-ID: <CABe4m-LtLrn7v2rRW5VXwh2=djM1KAo+0HgawTvJgAw220zAAg@mail.gmail.com>

Hi everyone,

I have a fundamental question about material types.
Do these material types, 'glass', 'metal', 'plastic' and 'mirror' all
perform both specular reflection and diffuse reflection in the simulation?
Or which type of reflection they can represent?
Could someone give a direct answer and explain in a mathematical ways if
possible.
Many Thanks!

Best Regards,
Jiajie
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160624/e2acfabb/attachment.html>

From gregoryjward at gmail.com  Fri Jun 24 16:26:03 2016
From: gregoryjward at gmail.com (Greg Ward)
Date: Fri, 24 Jun 2016 16:26:03 -0700
Subject: [Radiance-general] RGB to Radiance definition
In-Reply-To: <CAF-iH4JcGEuk+DQgYxj_3q4h_VQn+EHG__WXQJ-3CKJTkky4KQ@mail.gmail.com>
References: <CAF-iH4KbABU6x0c5hM2W2ueMRxa0LeSbqn8zZcqGD2ajd-SnSg@mail.gmail.com>
	<74f0118f-00af-05b8-0feb-fcac539a47b2@iinet.net.au>
	<CADoMKs08eSCX=G_MtCNRvpP_727QM8HJ3un-O-Doi9hqfHkpxg@mail.gmail.com>
	<CAF-iH4JcGEuk+DQgYxj_3q4h_VQn+EHG__WXQJ-3CKJTkky4KQ@mail.gmail.com>
Message-ID: <38E61658-7E2C-4A40-95E3-A0442212DF5F@lmi.net>

If you don't know the RGB values of a material, you can just use gray.  It won't hurt your accuracy as much as shifting *all* surfaces to gray.  It may be misleading when looking at renderings, however.  People may assume what is shown as gray really is gray, when it's actually unknown.

Cheers,
-Greg

> From: Germ?n Molina Larrain <germolinal at gmail.com>
> Date: June 24, 2016 6:59:57 AM PDT
> 
> Thanks, Greg and Mark for your answers! 
> 
> I studied this more, and decided not to follow Mark's procedure. Groundhog is meant to be a Lighting tool, thus I do not really want to offer "very unscientific" methods... I guess I will keep the eyedropper and colorpick just for SketchUp representation. By default, the Radiance material will be gray (based on just the reflectance), unless the user decides otherwise.
> 
> Would it be a problem if I mixed gray and non-gray materials in the same model? I mean... I might know the RGB transmittances of a glass, but only the reflectance of my carpet. Will that induce errors?
> 
> Best,
> 
> Germ?n
> 
> 2016-06-23 13:35 GMT-03:00 Mark Stock <mstock at umich.edu>:
> The slides referenced in that thread have moved (apologies!) to here:
> http://markjstock.org/doc/gsd_talk_11_notes.pdf
> 
> The particular slide with my very unscientific RGB-to-reflectance
> conversion contains:
> 
> Start with an RGB color from whatever color picker you use
> (249, 214, 172)
> Normalize 0..255 to 0..0.9
> (0.88, 0.76, 0.61)
> Square it (to move medium gray of 0.5 closer to grey card grey of 0.18)
> (0.77, 0.57, 0.37)
> 
> I hope this helps.
> 
> Mark
> 
> On 6/23/16,  <> wrote:
> > Hello Germ?n,
> >
> > Have a look at Mark Stocks comment on converting RGB values
> > http://www.radiance-online.org/pipermail/radiance-general/2011-April/007743.html
> >
> > Regards
> >
> > Terrance
> >
> > On 23/06/2016 4:00 am, Germ?n Molina Larrain wrote:
> >> Dear All,
> >>
> >> I am trying to integrate easier ways of defining materials in
> >> Groundhog, for which I have the following doubt. How can I define a
> >> Radiance material (i.e. plastic, metal, glass, etc.) from an RGB
> >> combination and the global Reflectance (transmittance)? The purpose of
> >> this is to enable "eyedropping" a color, and assigning a reflectance
> >> or transmittance to it.
> >>
> >> What I initially did was to find the combination of RGB reflectances
> >> that satisfied the rho = R*0.265 + 0.67*G + 0.065*B while maintaining
> >> the original proportions of RGB. However, since the RGB color that
> >> comes from the eyedropper has Black/White components (which intend to
> >> emulate shadows and different light exposures), my procedure often
> >> ends up returning an R, G or B channel that is greater than 1.
> >>
> >> I guess my question is: Is there any way of reconstructing the R, G
> >> and B reflectances (or transmittances or whatever) from an RGB pixel?
> >> Maybe playing with HSL space or something?
> >>
> >> Best,
> >>
> >> Germ?n
> >>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160624/c38c7c94/attachment.html>

From gregoryjward at gmail.com  Fri Jun 24 16:32:11 2016
From: gregoryjward at gmail.com (Greg Ward)
Date: Fri, 24 Jun 2016 16:32:11 -0700
Subject: [Radiance-general] RGB to Radiance definition
In-Reply-To: <CADoMKs08eSCX=G_MtCNRvpP_727QM8HJ3un-O-Doi9hqfHkpxg@mail.gmail.com>
References: <CAF-iH4KbABU6x0c5hM2W2ueMRxa0LeSbqn8zZcqGD2ajd-SnSg@mail.gmail.com>
	<74f0118f-00af-05b8-0feb-fcac539a47b2@iinet.net.au>
	<CADoMKs08eSCX=G_MtCNRvpP_727QM8HJ3un-O-Doi9hqfHkpxg@mail.gmail.com>
Message-ID: <BA689001-0B74-4F04-A47B-F31ECAA4E7AC@lmi.net>

By the way, I love your presentation, Mark.  Would it be OK to link it to radiance-online.org (rather than having it buried in an obscure mailing list thread)?

-Greg

> From: Mark Stock <mstock at umich.edu>
> Date: June 23, 2016 9:35:47 AM PDT
> 
> The slides referenced in that thread have moved (apologies!) to here:
> http://markjstock.org/doc/gsd_talk_11_notes.pdf
> 
> The particular slide with my very unscientific RGB-to-reflectance
> conversion contains:
> 
> Start with an RGB color from whatever color picker you use
> (249, 214, 172)
> Normalize 0..255 to 0..0.9
> (0.88, 0.76, 0.61)
> Square it (to move medium gray of 0.5 closer to grey card grey of 0.18)
> (0.77, 0.57, 0.37)
> 
> I hope this helps.
> 
> Mark
> 
> On 6/23/16,  <> wrote:
>> Hello Germ?n,
>> 
>> Have a look at Mark Stocks comment on converting RGB values
>> http://www.radiance-online.org/pipermail/radiance-general/2011-April/007743.html
>> 
>> Regards
>> 
>> Terrance
>> 
>> On 23/06/2016 4:00 am, Germ?n Molina Larrain wrote:
>>> Dear All,
>>> 
>>> I am trying to integrate easier ways of defining materials in
>>> Groundhog, for which I have the following doubt. How can I define a
>>> Radiance material (i.e. plastic, metal, glass, etc.) from an RGB
>>> combination and the global Reflectance (transmittance)? The purpose of
>>> this is to enable "eyedropping" a color, and assigning a reflectance
>>> or transmittance to it.
>>> 
>>> What I initially did was to find the combination of RGB reflectances
>>> that satisfied the rho = R*0.265 + 0.67*G + 0.065*B while maintaining
>>> the original proportions of RGB. However, since the RGB color that
>>> comes from the eyedropper has Black/White components (which intend to
>>> emulate shadows and different light exposures), my procedure often
>>> ends up returning an R, G or B channel that is greater than 1.
>>> 
>>> I guess my question is: Is there any way of reconstructing the R, G
>>> and B reflectances (or transmittances or whatever) from an RGB pixel?
>>> Maybe playing with HSL space or something?
>>> 
>>> Best,
>>> 
>>> Germ?n
>>> 
>>> 
>> 
>> 
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>> 
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general


From gregoryjward at gmail.com  Fri Jun 24 16:41:01 2016
From: gregoryjward at gmail.com (Greg Ward)
Date: Fri, 24 Jun 2016 16:41:01 -0700
Subject: [Radiance-general] Specular and diffuse reflection
In-Reply-To: <CABe4m-LtLrn7v2rRW5VXwh2=djM1KAo+0HgawTvJgAw220zAAg@mail.gmail.com>
References: <CABe4m-LtLrn7v2rRW5VXwh2=djM1KAo+0HgawTvJgAw220zAAg@mail.gmail.com>
Message-ID: <4A931571-F8DF-4FB1-9FBB-E5D4CE975E5C@lmi.net>

Hi Jiajie,

All Radiance materials that have a purely diffuse component send diffuse sampling rays.  This is true as well for the "rough specular" components of "plastic" and "metal."  In addition, rays are sent to sample light sources for their contributions for diffuse and rough specular components.  The "glass" and "mirror" types do not have any diffuse or rough specular component, however.  They send a single ray in the reflected (and another transmitted for glass) directions, paying no special attention to sources.  This is true of the "dielectric" type as well, and there are others that would require individual answers.

The ultimate reference is of course the C code provided, but there is also a PDF describing the basic material behaviors:

	http://radsite.lbl.gov/radiance/refer/materials.pdf

Unfortunately, some of the math formatting is messed up and may be difficult to read or print.

Cheers,
-Greg

> From: Jiajie Zhu <jonathan.zhu.uk at gmail.com>
> Date: June 24, 2016 7:41:39 AM PDT
> 
> Hi everyone,
> 
> I have a fundamental question about material types.
> Do these material types, 'glass', 'metal', 'plastic' and 'mirror' all perform both specular reflection and diffuse reflection in the simulation? Or which type of reflection they can represent?
> Could someone give a direct answer and explain in a mathematical ways if possible.
> Many Thanks!
> 
> Best Regards,
> Jiajie
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160624/782bf2f6/attachment.html>

From germolinal at gmail.com  Fri Jun 24 16:46:27 2016
From: germolinal at gmail.com (=?UTF-8?Q?Germ=C3=A1n_Molina_Larrain?=)
Date: Fri, 24 Jun 2016 20:46:27 -0300
Subject: [Radiance-general] RGB to Radiance definition
In-Reply-To: <BA689001-0B74-4F04-A47B-F31ECAA4E7AC@lmi.net>
References: <CAF-iH4KbABU6x0c5hM2W2ueMRxa0LeSbqn8zZcqGD2ajd-SnSg@mail.gmail.com>
	<74f0118f-00af-05b8-0feb-fcac539a47b2@iinet.net.au>
	<CADoMKs08eSCX=G_MtCNRvpP_727QM8HJ3un-O-Doi9hqfHkpxg@mail.gmail.com>
	<BA689001-0B74-4F04-A47B-F31ECAA4E7AC@lmi.net>
Message-ID: <CAF-iH4JOJ-EuoJ4rCqzztr9ah_OtN1ZX=hKkUcxpfm5kd8M=XA@mail.gmail.com>

Thanks very much, Greg! I will have that in mind... I guess the "rendering"
issue may be misleading when sharing the models. It is OK for now, I guess.

And, Yes! That is an awesome presentation! Really really cool tips, facts
and images.

Best,



2016-06-24 20:32 GMT-03:00 Greg Ward <gregoryjward at gmail.com>:

> By the way, I love your presentation, Mark.  Would it be OK to link it to
> radiance-online.org (rather than having it buried in an obscure mailing
> list thread)?
>
> -Greg
>
> > From: Mark Stock <mstock at umich.edu>
> > Date: June 23, 2016 9:35:47 AM PDT
> >
> > The slides referenced in that thread have moved (apologies!) to here:
> > http://markjstock.org/doc/gsd_talk_11_notes.pdf
> >
> > The particular slide with my very unscientific RGB-to-reflectance
> > conversion contains:
> >
> > Start with an RGB color from whatever color picker you use
> > (249, 214, 172)
> > Normalize 0..255 to 0..0.9
> > (0.88, 0.76, 0.61)
> > Square it (to move medium gray of 0.5 closer to grey card grey of 0.18)
> > (0.77, 0.57, 0.37)
> >
> > I hope this helps.
> >
> > Mark
> >
> > On 6/23/16,  <> wrote:
> >> Hello Germ?n,
> >>
> >> Have a look at Mark Stocks comment on converting RGB values
> >>
> http://www.radiance-online.org/pipermail/radiance-general/2011-April/007743.html
> >>
> >> Regards
> >>
> >> Terrance
> >>
> >> On 23/06/2016 4:00 am, Germ?n Molina Larrain wrote:
> >>> Dear All,
> >>>
> >>> I am trying to integrate easier ways of defining materials in
> >>> Groundhog, for which I have the following doubt. How can I define a
> >>> Radiance material (i.e. plastic, metal, glass, etc.) from an RGB
> >>> combination and the global Reflectance (transmittance)? The purpose of
> >>> this is to enable "eyedropping" a color, and assigning a reflectance
> >>> or transmittance to it.
> >>>
> >>> What I initially did was to find the combination of RGB reflectances
> >>> that satisfied the rho = R*0.265 + 0.67*G + 0.065*B while maintaining
> >>> the original proportions of RGB. However, since the RGB color that
> >>> comes from the eyedropper has Black/White components (which intend to
> >>> emulate shadows and different light exposures), my procedure often
> >>> ends up returning an R, G or B channel that is greater than 1.
> >>>
> >>> I guess my question is: Is there any way of reconstructing the R, G
> >>> and B reflectances (or transmittances or whatever) from an RGB pixel?
> >>> Maybe playing with HSL space or something?
> >>>
> >>> Best,
> >>>
> >>> Germ?n
> >>>
> >>>
> >>
> >>
> >> _______________________________________________
> >> Radiance-general mailing list
> >> Radiance-general at radiance-online.org
> >> http://www.radiance-online.org/mailman/listinfo/radiance-general
> >>
> >
> > _______________________________________________
> > Radiance-general mailing list
> > Radiance-general at radiance-online.org
> > http://www.radiance-online.org/mailman/listinfo/radiance-general
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160624/5e382718/attachment-0001.html>

From p.khademagha at gmail.com  Mon Jun 27 04:08:45 2016
From: p.khademagha at gmail.com (parisa khademagha)
Date: Mon, 27 Jun 2016 13:08:45 +0200
Subject: [Radiance-general] Converting XYZ to Radiance RGB
In-Reply-To: <D3915AD5.2687B%Robert.Guglielmetti@nrel.gov>
References: <CAPysv6A3WpWFQDJuYP5KoBsM8ov8+Q5k3rVc5SO=15CMyknyqg@mail.gmail.com>
	<8DF9821D-D873-47BA-83CE-3010455C0932@lmi.net>
	<D3915AD5.2687B%Robert.Guglielmetti@nrel.gov>
Message-ID: <CAPysv6CoTSqgzPMz0ExzCBk0W7ohgsgZ1gcjAcF9OVMXfkJzvA@mail.gmail.com>

Thanks Robert!

On 23 June 2016 at 17:23, Guglielmetti, Robert <Robert.Guglielmetti at nrel.gov
> wrote:

> Use single quotes if on bash...
>
> On 6/23/16, 7:12 AM, "Greg Ward" <gregoryjward at gmail.com<mailto:
> gregoryjward at gmail.com>> wrote:
>
> Hi Parisa,
>
> You can use the xyz_rgb.cal definitions in ray/src/cal/cal, like so:
>
> rcalc -f xyz_rgb.cal -e "$1=R($1,$2,$3);$2=G($1,$2,$3);$3=B($1,$2,$3)"
>
> Then, type or redirect your XYZ values separated by spaces or tabs to the
> standard input to get RGB values on the standard output.
>
> Cheers,
> -Greg
>
>
> From: parisa khademagha <p.khademagha at gmail.com<mailto:
> p.khademagha at gmail.com>>
>
> Subject: [Radiance-general] Converting XYZ to Radiance RGB
>
> Date: June 23, 2016 8:34:54 AM EDT
>
> To: Radiance general discussion <radiance-general at radiance-online.org
> <mailto:radiance-general at radiance-online.org>>
>
> Reply-To: Radiance general discussion <
> radiance-general at radiance-online.org<mailto:
> radiance-general at radiance-online.org>>
>
>
> Dear all,
>
> I have used Konica Minolta (CL-500A)  spectrometer to measure X Y Z values
> of the real sky using the data management software CL-S10w. I want to
> convert these X Y Z values to the Radiance R G B. Is there any way/script
> for such conversion?
>
> Thanks in advance,
> Kind regards,
>
> Parisa
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160627/494e9b1c/attachment.html>

From mengdi.guo1988 at gmail.com  Mon Jun 27 07:21:14 2016
From: mengdi.guo1988 at gmail.com (Mengdi Guo)
Date: Mon, 27 Jun 2016 22:21:14 +0800
Subject: [Radiance-general] manipulate rtrace for desired outcome
In-Reply-To: <CAEFJVk9yt1KhYqsEcUCt-TVN0idNMyqV69Mx97v1Fn8m82KUVw@mail.gmail.com>
References: <CAPK3KNFsT6_Xg0HLCvYCHOASriQZmZ+08A9ORAjZX9+ifScE8A@mail.gmail.com>
	<CAEFJVk9yt1KhYqsEcUCt-TVN0idNMyqV69Mx97v1Fn8m82KUVw@mail.gmail.com>
Message-ID: <CAPK3KNEuFVOa_it77Oy82ZfRTQUdKiMU=FDvNUUz910tf9uY_w@mail.gmail.com>

Dear Andy,

I have one more question about this part of your reply:

*The relative weight of specular vs. diffuse rays is a result of the
material applied to the surface. if you use a plastic material such as
below (with 15% diffuse reflectance, 35% specular reflectance, and 0.05
roughness):*

How do you get the value: '*5% diffuse reflectance, 35% specular
reflectance, and 0.05 roughness' *from the setting of 'specular weight 30%
and diffuse weight 70% after reflection'.

*void plastic test70-30*
*0*
*0*
*5 0.15 0.15 0.15 0.35 0.05*

*then the specular rays will account for 30% of the final ray value and the
diffuse rays will account for 70% of the final ray value.*

Thanks a lot.

Cheers,
Mengdi

On 23 June 2016 at 05:53, Andy McNeil <mcneil.andrew at gmail.com> wrote:

> Mengdi,
>
> Answers inline below...
>
> 1.       No matter what parameters I?ve set for rtrace function, there?s
>> only one ray in the output. Yet, I?m expecting multiple rays emitted from
>> the receiver points to the light source, as described in radiance manual.
>
>
> By default rtrace outputs the accumulated value of the input ray. If you
> want it to output information for rays traced to arrive at the reported
> value you should use -o with either t or T.  See the rtrace manual page for
> more output options:
> http://radiance-online.org/learning/documentation/manual-pages/pdfs/rtrace.pdf
>
> 2.       I?d also like to know what parameters can control reflections
>> characters of rays. For instance, I want the rays to partly diffuse after
>> reflecting on the surface. The desirable condition is: for a bundle of rays
>> hitting the surface, 1) 70% of the rays will follow specular reflection,
>> 30% will be scattered after reflection. 2) for the scattered part, I want
>> them to be reflected within an angle (e.g. 30 degree) to the specular
>> reflected ray.
>>
>
> The relative weight of specular vs. diffuse rays is a result of the
> material applied to the surface. if you use a plastic material such as
> below (with 15% diffuse reflectance, 35% specular reflectance, and 0.05
> roughness):
> void plastic test70-30
> 0
> 0
> 5 0.15 0.15 0.15 0.35 0.05
>
> then the specular rays will account for 30% of the final ray value and the
> diffuse rays will account for 70% of the final ray value. However the
> actual number of rays spawned are controlled by the -ad parameter for
> diffuse rays and -ss parameter for specular rays, with the caveat that only
> one ray is traced for the specular reflections if the roughness is 0,
> otherwise you'd be tracing the same ray several times.
>
> It seems to me that you want pure specular and scattered specular rays
> together, so you'll probably need want to use a plasdata material
> definition. The reference manual provides info on materials:
> http://radsite.lbl.gov/radiance/refer/refman.pdf
>
>
>
>> 3.       Another question is: acknowledged that the emitted rays are not
>> evenly distributed for hemispherical sampling. I'm still wondering if it's
>> possible to evenly send rays with radiance.
>
>
> The spawned rays are random, but are distributed such that each ray as
> equal influence on the result. This produces a non-biased estimate. If by
> even you mean that you don't want a cosine factor on the distribution of
> rays, you should look at plasdata. If however by evenly distributed you
> don't want them to be randomized, I'm not sure that's possible without
> going into the Radiance code, and doing this will result in a biased
> estimate.
>
> John Mardaljevic gives a good presentation on how radiance spawns rays in
> order to find a result:
>
> http://radiance-online.org/community/workshops/2014-london/presentations/day1/Mardaljevic_AmbientCrash.pdf
>
> And chapter 12 in Rendering with Radiance gives a detailed overview of how
> this all works:
> http://radiance-online.org/learning/documentation/book/rwrcontents
>
> Best,
> Andy
>
> On Mon, Jun 13, 2016 at 10:56 PM, Mengdi Guo <mengdi.guo1988 at gmail.com>
> wrote:
>
>> Hi,
>>
>>
>>
>> Currently I'm using the ray tracing engine of radiance, trying to figure
>> out the ray paths connecting designated view points and light resources (in
>> cylinder and polygon type). In this process, I've encountered some
>> difficulties that I'd appreciate your assistance.
>>
>> I'm mainly using light as primitive type, since I want to figure out the
>> possible ray paths between receiver point and artificial light sources.
>> However the ray paths is not what I?ve expected.
>>
>> In the testing condition where there is one receiver and one polygon
>> light sources directly exposed to each other. The polygon light source is
>> the only light in this scene. The source and receiver are placed in the
>> middle of two building blocks. I?m controlling rtrace function with the
>> parameters ? ?ab? ? ?ad? ??dj? ?? ds? ?-st? ?-ss?.
>>
>> 1.       No matter what parameters I?ve set for rtrace function, there?s
>> only one ray in the output. Yet, I?m expecting multiple rays emitted from
>> the receiver points to the light source, as described in radiance manual.
>>
>> 2.       I?d also like to know what parameters can control reflections
>> characters of rays. For instance, I want the rays to partly diffuse after
>> reflecting on the surface. The desirable condition is: for a bundle of rays
>> hitting the surface, 1) 70% of the rays will follow specular reflection,
>> 30% will be scattered after reflection. 2) for the scattered part, I want
>> them to be reflected within an angle (e.g. 30 degree) to the specular
>> reflected ray.
>>
>> Could you suggest me how to achieve the condition of 1 and 2 with
>> radiance? Is there any other suggestions on the setting of model or scene?
>>
>> 3.       Another question is: acknowledged that the emitted rays are not
>> evenly distributed for hemispherical sampling. I'm still wondering if it's
>> possible to evenly send rays with radiance.
>>
>> Thank you very much with best regards,
>>
>> Mengdi Guo
>>
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
>


-- 
Mengdi GUO
PhD Candidate
the University of Hong Kong
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160627/22712b43/attachment-0001.html>

From mcneil.andrew at gmail.com  Mon Jun 27 07:43:39 2016
From: mcneil.andrew at gmail.com (Andy McNeil)
Date: Mon, 27 Jun 2016 07:43:39 -0700
Subject: [Radiance-general] manipulate rtrace for desired outcome
In-Reply-To: <CAPK3KNEuFVOa_it77Oy82ZfRTQUdKiMU=FDvNUUz910tf9uY_w@mail.gmail.com>
References: <CAPK3KNFsT6_Xg0HLCvYCHOASriQZmZ+08A9ORAjZX9+ifScE8A@mail.gmail.com>
	<CAEFJVk9yt1KhYqsEcUCt-TVN0idNMyqV69Mx97v1Fn8m82KUVw@mail.gmail.com>
	<CAPK3KNEuFVOa_it77Oy82ZfRTQUdKiMU=FDvNUUz910tf9uY_w@mail.gmail.com>
Message-ID: <CAEFJVk92=iZcAoGipudWBxKv9audcsu7Ucsfeur9j-KFdUK17g@mail.gmail.com>

I assumed a total surface reflectance of 50%, with a split of 30:70 ratio
of diffuse to specular ratio. The roughness was a wild guess. Though I see
now that I flipped your diffuse - specular ratio, but you get the point.

Andy

On Mon, Jun 27, 2016 at 7:21 AM, Mengdi Guo <mengdi.guo1988 at gmail.com>
wrote:

> Dear Andy,
>
> I have one more question about this part of your reply:
>
> *The relative weight of specular vs. diffuse rays is a result of the
> material applied to the surface. if you use a plastic material such as
> below (with 15% diffuse reflectance, 35% specular reflectance, and 0.05
> roughness):*
>
> How do you get the value: '*5% diffuse reflectance, 35% specular
> reflectance, and 0.05 roughness' *from the setting of 'specular weight
> 30% and diffuse weight 70% after reflection'.
>
> *void plastic test70-30*
> *0*
> *0*
> *5 0.15 0.15 0.15 0.35 0.05*
>
> *then the specular rays will account for 30% of the final ray value and
> the diffuse rays will account for 70% of the final ray value.*
>
> Thanks a lot.
>
> Cheers,
> Mengdi
>
> On 23 June 2016 at 05:53, Andy McNeil <mcneil.andrew at gmail.com> wrote:
>
>> Mengdi,
>>
>> Answers inline below...
>>
>> 1.       No matter what parameters I?ve set for rtrace function, there?s
>>> only one ray in the output. Yet, I?m expecting multiple rays emitted from
>>> the receiver points to the light source, as described in radiance manual.
>>
>>
>> By default rtrace outputs the accumulated value of the input ray. If you
>> want it to output information for rays traced to arrive at the reported
>> value you should use -o with either t or T.  See the rtrace manual page for
>> more output options:
>> http://radiance-online.org/learning/documentation/manual-pages/pdfs/rtrace.pdf
>>
>> 2.       I?d also like to know what parameters can control reflections
>>> characters of rays. For instance, I want the rays to partly diffuse after
>>> reflecting on the surface. The desirable condition is: for a bundle of rays
>>> hitting the surface, 1) 70% of the rays will follow specular reflection,
>>> 30% will be scattered after reflection. 2) for the scattered part, I want
>>> them to be reflected within an angle (e.g. 30 degree) to the specular
>>> reflected ray.
>>>
>>
>> The relative weight of specular vs. diffuse rays is a result of the
>> material applied to the surface. if you use a plastic material such as
>> below (with 15% diffuse reflectance, 35% specular reflectance, and 0.05
>> roughness):
>> void plastic test70-30
>> 0
>> 0
>> 5 0.15 0.15 0.15 0.35 0.05
>>
>> then the specular rays will account for 30% of the final ray value and
>> the diffuse rays will account for 70% of the final ray value. However the
>> actual number of rays spawned are controlled by the -ad parameter for
>> diffuse rays and -ss parameter for specular rays, with the caveat that only
>> one ray is traced for the specular reflections if the roughness is 0,
>> otherwise you'd be tracing the same ray several times.
>>
>> It seems to me that you want pure specular and scattered specular rays
>> together, so you'll probably need want to use a plasdata material
>> definition. The reference manual provides info on materials:
>> http://radsite.lbl.gov/radiance/refer/refman.pdf
>>
>>
>>
>>> 3.       Another question is: acknowledged that the emitted rays are
>>> not evenly distributed for hemispherical sampling. I'm still wondering if
>>> it's possible to evenly send rays with radiance.
>>
>>
>> The spawned rays are random, but are distributed such that each ray as
>> equal influence on the result. This produces a non-biased estimate. If by
>> even you mean that you don't want a cosine factor on the distribution of
>> rays, you should look at plasdata. If however by evenly distributed you
>> don't want them to be randomized, I'm not sure that's possible without
>> going into the Radiance code, and doing this will result in a biased
>> estimate.
>>
>> John Mardaljevic gives a good presentation on how radiance spawns rays in
>> order to find a result:
>>
>> http://radiance-online.org/community/workshops/2014-london/presentations/day1/Mardaljevic_AmbientCrash.pdf
>>
>> And chapter 12 in Rendering with Radiance gives a detailed overview of
>> how this all works:
>> http://radiance-online.org/learning/documentation/book/rwrcontents
>>
>> Best,
>> Andy
>>
>> On Mon, Jun 13, 2016 at 10:56 PM, Mengdi Guo <mengdi.guo1988 at gmail.com>
>> wrote:
>>
>>> Hi,
>>>
>>>
>>>
>>> Currently I'm using the ray tracing engine of radiance, trying to figure
>>> out the ray paths connecting designated view points and light resources (in
>>> cylinder and polygon type). In this process, I've encountered some
>>> difficulties that I'd appreciate your assistance.
>>>
>>> I'm mainly using light as primitive type, since I want to figure out the
>>> possible ray paths between receiver point and artificial light sources.
>>> However the ray paths is not what I?ve expected.
>>>
>>> In the testing condition where there is one receiver and one polygon
>>> light sources directly exposed to each other. The polygon light source is
>>> the only light in this scene. The source and receiver are placed in the
>>> middle of two building blocks. I?m controlling rtrace function with the
>>> parameters ? ?ab? ? ?ad? ??dj? ?? ds? ?-st? ?-ss?.
>>>
>>> 1.       No matter what parameters I?ve set for rtrace function,
>>> there?s only one ray in the output. Yet, I?m expecting multiple rays
>>> emitted from the receiver points to the light source, as described in
>>> radiance manual.
>>>
>>> 2.       I?d also like to know what parameters can control reflections
>>> characters of rays. For instance, I want the rays to partly diffuse after
>>> reflecting on the surface. The desirable condition is: for a bundle of rays
>>> hitting the surface, 1) 70% of the rays will follow specular reflection,
>>> 30% will be scattered after reflection. 2) for the scattered part, I want
>>> them to be reflected within an angle (e.g. 30 degree) to the specular
>>> reflected ray.
>>>
>>> Could you suggest me how to achieve the condition of 1 and 2 with
>>> radiance? Is there any other suggestions on the setting of model or scene?
>>>
>>> 3.       Another question is: acknowledged that the emitted rays are
>>> not evenly distributed for hemispherical sampling. I'm still wondering if
>>> it's possible to evenly send rays with radiance.
>>>
>>> Thank you very much with best regards,
>>>
>>> Mengdi Guo
>>>
>>>
>>> _______________________________________________
>>> Radiance-general mailing list
>>> Radiance-general at radiance-online.org
>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>>
>>>
>>
>
>
> --
> Mengdi GUO
> PhD Candidate
> the University of Hong Kong
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160627/34e77097/attachment.html>

From viole.esc at gmail.com  Thu Jun 30 19:19:02 2016
From: viole.esc at gmail.com (Violeta Escobar Ruiz)
Date: Thu, 30 Jun 2016 21:19:02 -0500
Subject: [Radiance-general] how to get luminance false color images
Message-ID: <CABfqC4J5KMonRxPbOLu_07HtMUsbh6JncEt4qmkCSPBsFZSUGA@mail.gmail.com>

Hi.
I've been using the R-Y-O demo (http://www.jaloxa.eu/webhdr/demo.shtml) to
get luminance false color images, but it says that the program is currently
down.
I know there is a way to get those images from Radiance. I?ve been looking
through the documentation posted on the web site but its been really
difficult for me to understand.
I was wondering if there's an easier way to do it, since it was really easy
to do it on R-Y-O.

Thank you very much
-
Violeta Escobar Ruiz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160630/fcded459/attachment.html>

From mstock at umich.edu  Thu Jun 30 21:16:27 2016
From: mstock at umich.edu (Mark Stock)
Date: Fri, 1 Jul 2016 00:16:27 -0400
Subject: [Radiance-general] 3D-360 video rendered with Radiance
Message-ID: <CADoMKs3xN8giHu9pEZiiyz4j7rdYhwxDYcAfaieWFwN7jNHYhA@mail.gmail.com>

Folks,

I thought I'd let you know about my recently-completed 4-minute 3D-360
video that was rendered with Radiance. The subject is a dynamic
triangle mesh from a computational fluid dynamics simulation of a
sphere of fluid with a density discontinuity. (Lots of grey
cylinders.)

The original (2D rendering) video is here:
https://www.youtube.com/watch?v=OShSC1VyBi0

The new video (3D-360, for GearVR and other VR HMDs) is in multiple places:
https://www.youtube.com/watch?v=zGFMqEKiAGM
https://vimeo.com/173000788
https://www.facebook.com/mark.stock/posts/10153805081796376

I'll provide a direct download link for all you Radiance fans, who
know how hard this actually was:
http://markjstock.org/vr/MarkStock_SmokeWaterFire_UHDlo_360_TB.mp4

The rendering took 8 months on a 4.4GHz, 8-core Intel Haswell chip.
Each original frame was 11520x11520 (in HDR, of course), but reduced
to 3840x3840 for storage, and further reduced to 3840x2160 for
publishing. In all, almost 1 Terapixel of primary rays were traced.
The directory takes up ~600 GB. I used an rcalc/rtrace trick to
generate the 3D-360 frames. The command line for each frame looked
like:

cnt 11520 11520 | rcalc -f 3d360.cal -e
"XD=11520;YD=11520;X=0;Y=0;Z=0;IPD=0.02;EX=0;EZ=0" | rtrace -ab 2 -aa
0 -ad 32 -as 0 -dj 0.7 -ds 0.06 -u+ -dv- -x 11520 -y 11520 -n 3 -fac
scene0695.oct > img_0695temp.pic

I attached the 3d360.cal file in case anyone else is interested.

Have fun, and good night!

Mark
-------------- next part --------------
A non-text attachment was scrubbed...
Name: still_r_6000_1080p.png
Type: image/png
Size: 1457150 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160701/d6e508eb/attachment-0001.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 3d360.cal
Type: application/octet-stream
Size: 1730 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160701/d6e508eb/attachment-0001.obj>

From weiss at stahl-sonnenenergie.de  Thu Jun 30 21:47:18 2016
From: weiss at stahl-sonnenenergie.de (weiss at stahl-sonnenenergie.de)
Date: Fri, 1 Jul 2016 04:47:18 +0000
Subject: [Radiance-general] AUTOREPLY Radiance-general Digest, Vol 148,
	Issue 32
Message-ID: <064E57F6.577611EE@smtprelaypool.ispgateway.de>


Sehr geehrte Damen und Herren,

vielen Dank fr Ihre Nachricht.
unser Bro ist am 30.6. und 01.07. wegen unseres Broausflugs geschlossen. Ab Montag, 04.07. sind wir wieder fr sie da.


Mit freundlichen Gren

Volker Wei

Stahl+Wei
Basler Strae 55
D-79100 Freiburg

Tel.   +49-(0)761-38909-32
Zentrale                     -30
Fax.  +49-(0)761-38909-39

weiss at stahl-weiss.de
www.stahl-weiss.de


Send Radiance-general mailing list submissions to
	radiance-general at radiance-online.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://www.radiance-online.org/mailman/listinfo/radiance-general
or, via email, send a message with subject or body 'help' to
	radiance-general-request at radiance-online.org

You can reach the person managing the list at
	radiance-general-owner at radiance-online.org

When replying, please edit your Subject line so it is more specific
than "Re: Contents of Radiance-general digest..."


Today's Topics:

   1. how to get luminance false color images (Violeta Escobar Ruiz)
   2. 3D-360 video rendered with Radiance (Mark Stock)


----------------------------------------------------------------------

Message: 1
Date: Thu, 30 Jun 2016 21:19:02 -0500
From: Violeta Escobar Ruiz <viole.esc at gmail.com>
To: radiance-general at radiance-online.org
Subject: [Radiance-general] how to get luminance false color images
Message-ID:
	<CABfqC4J5KMonRxPbOLu_07HtMUsbh6JncEt4qmkCSPBsFZSUGA at mail.gmail.com>
Content-Type: text/plain; charset="utf-8"

Hi.
I've been using the R-Y-O demo (http://www.jaloxa.eu/webhdr/demo.shtml) to
get luminance false color images, but it says that the program is currently
down.
I know there is a way to get those images from Radiance. I?ve been looking
through the documentation posted on the web site but its been really
difficult for me to understand.
I was wondering if there's an easier way to do it, since it was really easy
to do it on R-Y-O.

Thank you very much
-
Violeta Escobar Ruiz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160630/fcded459/attachment-0001.html>

------------------------------

Message: 2
Date: Fri, 1 Jul 2016 00:16:27 -0400
From: Mark Stock <mstock at umich.edu>
To: radiance-general at radiance-online.org
Subject: [Radiance-general] 3D-360 video rendered with Radiance
Message-ID:
	<CADoMKs3xN8giHu9pEZiiyz4j7rdYhwxDYcAfaieWFwN7jNHYhA at mail.gmail.com>
Content-Type: text/plain; charset="utf-8"

Folks,

I thought I'd let you know about my recently-completed 4-minute 3D-360
video that was rendered with Radiance. The subject is a dynamic
triangle mesh from a computational fluid dynamics simulation of a
sphere of fluid with a density discontinuity. (Lots of grey
cylinders.)

The original (2D rendering) video is here:
https://www.youtube.com/watch?v=OShSC1VyBi0

The new video (3D-360, for GearVR and other VR HMDs) is in multiple places:
https://www.youtube.com/watch?v=zGFMqEKiAGM
https://vimeo.com/173000788
https://www.facebook.com/mark.stock/posts/10153805081796376

I'll provide a direct download link for all you Radiance fans, who
know how hard this actually was:
http://markjstock.org/vr/MarkStock_SmokeWaterFire_UHDlo_360_TB.mp4

The rendering took 8 months on a 4.4GHz, 8-core Intel Haswell chip.
Each original frame was 11520x11520 (in HDR, of course), but reduced
to 3840x3840 for storage, and further reduced to 3840x2160 for
publishing. In all, almost 1 Terapixel of primary rays were traced.
The directory takes up ~600 GB. I used an rcalc/rtrace trick to
generate the 3D-360 frames. The command line for each frame looked
like:

cnt 11520 11520 | rcalc -f 3d360.cal -e
"XD=11520;YD=11520;X=0;Y=0;Z=0;IPD=0.02;EX=0;EZ=0" | rtrace -ab 2 -aa
0 -ad 32 -as 0 -dj 0.7 -ds 0.06 -u+ -dv- -x 11520 -y 11520 -n 3 -fac
scene0695.oct > img_0695temp.pic

I attached the 3d360.cal file in case anyone else is interested.

Have fun, and good night!

Mark
-------------- next part --------------
A non-text attachment was scrubbed...
Name: still_r_6000_1080p.png
Type: image/png
Size: 1457150 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160701/d6e508eb/attachment.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 3d360.cal
Type: application/octet-stream
Size: 1730 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160701/d6e508eb/attachment.obj>

------------------------------

_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general


End of Radiance-general Digest, Vol 148, Issue 32
*************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160701/a06036e1/attachment.html>

From gregoryjward at gmail.com  Thu Jun 30 22:20:54 2016
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu, 30 Jun 2016 22:20:54 -0700
Subject: [Radiance-general] how to get luminance false color images
In-Reply-To: <CABfqC4J5KMonRxPbOLu_07HtMUsbh6JncEt4qmkCSPBsFZSUGA@mail.gmail.com>
References: <CABfqC4J5KMonRxPbOLu_07HtMUsbh6JncEt4qmkCSPBsFZSUGA@mail.gmail.com>
Message-ID: <0E1D7797-46D2-4D02-8BDD-E62D0B2810B7@lmi.net>

Hi Violeta,

Unfortunately, the command-line tools in Radiance are difficult to use if you are not used to them.  I am not sure what options Axel Jacobs uses for WebHDR, but you can try the following:

	falsecolor -s auto -i input.hdr | ra_tiff - falsec.tif

This will result in a linear luminance scale.  If you want a log scale with 1000:1 range (10^3:1), use:

	falsecolor -log 3 -s auto -i input.hdr | ra_tiff - falsecl.tif

If you have a Mac, you can download Photosphere, which has a more familiar application GUI from:

	http://www.anyhere.com/

Best,
-Greg

> From: Violeta Escobar Ruiz <viole.esc at gmail.com>
> Date: June 30, 2016 7:19:02 PM PDT
> 
> Hi.
> I've been using the R-Y-O demo (http://www.jaloxa.eu/webhdr/demo.shtml) to get luminance false color images, but it says that the program is currently down. 
> I know there is a way to get those images from Radiance. I?ve been looking through the documentation posted on the web site but its been really difficult for me to understand.
> I was wondering if there's an easier way to do it, since it was really easy to do it on R-Y-O.
> 
> Thank you very much
> -
> Violeta Escobar Ruiz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20160630/853b5745/attachment.html>

