From tbleicher at gmail.com  Sat Oct  1 05:52:16 2016
From: tbleicher at gmail.com (Thomas Bleicher)
Date: Sat, 1 Oct 2016 07:52:16 -0500
Subject: [Radiance-general] How to generate the image of shadow range?
In-Reply-To: <CACHiZWGfDjErKcRPznvQV13aDeo9OAzJarFRcbGCQV2HD-E9Rw@mail.gmail.com>
References: <CACHiZWGfDjErKcRPznvQV13aDeo9OAzJarFRcbGCQV2HD-E9Rw@mail.gmail.com>
Message-ID: <CAKGV-k2i19xtQpLFvvEV6LmMH+8BHFmgE1dyw98GcUyydidTCw@mail.gmail.com>

Wen-Hsin

If you have created the individual pictures as regular high quality rpict
renderings then the cumulative effect of multiple shadow against sunlit
surfaces can result in very dark core areas for the shadow. You can try
pcond with a linear response function (pcond -l input.hdr > output.hdr) to
bring the bright values back into a range where you can identify details in
the shadow.

A more advanced setup for this type of image is to create images with hard
shadows (low -ab values and -av of 0 0 0). You can extract the shadow
portion of these images as a difference to a base image. Then you add up
all the shadow-only images and overlay that as a last step over a rendering
with soft shadows to show the geometry. In this last step you can also
apply a color tint to the shadow image to make it stand out against the
background.

I don't know if there is a ready-to-use script out there to do all of these
steps. I expect it will take a bit of tinkering to find the right
combination of commands and command line arguments for your purpose.

Hth,
Thomas

On Thu, Sep 29, 2016 at 7:09 PM, Wen-hsin Chang <x.wenhsin at gmail.com> wrote:

> Dear Radiance users,
>
> I would like to generate a shadow range image to show the shadow movement
> in a period of time.
> I searched some reference and some of them indicate "pcomb" is able to
> combine a bunch of pictures into one hdr image.
> So I tried to use pcomb script to combine the hourly daylight images I
> have generated, but the overlaid part completely become dark color.
> I am not sure is this the correct method to do shadow range because I am
> not familiar with this script.
> I am wondering if you have any tips or examples can actually generate
> shadow range image?
>
> Cheers,
>
> --
> Wen-Hsin Chang
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161001/f48de465/attachment.html>

From munirsyadi at gmail.com  Tue Oct  4 03:34:44 2016
From: munirsyadi at gmail.com (A.M. Irsyadi)
Date: Tue, 4 Oct 2016 17:34:44 +0700
Subject: [Radiance-general] Getting Started
In-Reply-To: <CANeAMo+-NOvc8v=i4nTsjyv8PPKWF=6-HEcPdFtirVrGpte4ZQ@mail.gmail.com>
References: <CACL5kgRnqUurjni+M3FwPSj1X-UqzNgwKTOJ+ixfQ+QTzkjsEQ@mail.gmail.com>
 <BD8C9DE4-B676-4B3C-B1B9-96559443811E@lmi.net>
 <CACL5kgTivKHR3H1q20w8N7BH=wp-t+qxNG6Fvd_V8d-98ijxpw@mail.gmail.com>
 <A6691D7EACBAC74589C1134EB0758B7F01441DE4E3@HEFRMBX01.sofr.hefr.lan>
 <CANeAMo+-NOvc8v=i4nTsjyv8PPKWF=6-HEcPdFtirVrGpte4ZQ@mail.gmail.com>
Message-ID: <50D51552-4886-48B1-93CF-77184CADF3A2@gmail.com>

I installed Radiance on OSX 10.11.6 using this:
https://github.com/NREL/Radiance/releases/download/5.0/radiance-5.0.0-Darwin.dmg <https://github.com/NREL/Radiance/releases/download/5.0/radiance-5.0.0-Darwin.dmg>
in a tutorial: 
"Next you need to add "/usr/local/radiance/bin? to your system path, and you need to create a new system variable called ?RAYPATH? and set it to "/usr/local/radiance/lib?. You can/should also add "/usr/local/radiance/man? to your MANPATH system variable.?
please give a step-by-step guide to add this system variable on mac.
then, how to check whether properly installed or not.
Thanks,
Abdul

> On Mar 24, 2016, at 11:22 PM, Randolph M. Fritz <rmfritz3 at gmail.com> wrote:
> 
> Also, good introductions to the bash and csh shells, as well as Unix itself, are probably in order. But this is a lot of study. Still, the following introduction, from NYU's high-performance computing center, might perhaps be useful:
>   Introduction to Unix/Linux - https://wikis.nyu.edu/pages/viewpage.action?pageId=53859101 <https://wikis.nyu.edu/pages/viewpage.action?pageId=53859101> 
> 
> -- 
> Randolph M. Fritz, Lighting Design and Simulation
> +1 206 659-8617 || rmfritz3 at gmail.com <mailto:rmfritz3 at gmail.com>
> On Tue, Mar 22, 2016 at 9:28 AM, Compagnon Rapha?l <Raphael.Compagnon at hefr.ch <mailto:Raphael.Compagnon at hefr.ch>> wrote:
> Hi Abdul
> 
> You can also find an old (written 19 years ago...) Radiance tutorial from me on: http://radsite.lbl.gov/radiance/refer/index.html#cat4 <http://radsite.lbl.gov/radiance/refer/index.html#cat4>
> I can nevertheless ensure you that the basic radiance commands that are presented in this tutorial are remaining exactly the same in today's Radiance version. Since that time there are only a few commands that have changed their names, namely:
> rview became rvu
> gcalc became icalc
> 
> I also add the same remarks as Andy...
> 
> Hope this will of help.
> 
> Rapha?l
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org <mailto:Radiance-general at radiance-online.org>
> http://www.radiance-online.org/mailman/listinfo/radiance-general <http://www.radiance-online.org/mailman/listinfo/radiance-general>
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161004/fda5c52d/attachment.html>

From tbleicher at gmail.com  Tue Oct  4 06:22:10 2016
From: tbleicher at gmail.com (Thomas Bleicher)
Date: Tue, 4 Oct 2016 08:22:10 -0500
Subject: [Radiance-general] Getting Started
In-Reply-To: <50D51552-4886-48B1-93CF-77184CADF3A2@gmail.com>
References: <CACL5kgRnqUurjni+M3FwPSj1X-UqzNgwKTOJ+ixfQ+QTzkjsEQ@mail.gmail.com>
 <BD8C9DE4-B676-4B3C-B1B9-96559443811E@lmi.net>
 <CACL5kgTivKHR3H1q20w8N7BH=wp-t+qxNG6Fvd_V8d-98ijxpw@mail.gmail.com>
 <A6691D7EACBAC74589C1134EB0758B7F01441DE4E3@HEFRMBX01.sofr.hefr.lan>
 <CANeAMo+-NOvc8v=i4nTsjyv8PPKWF=6-HEcPdFtirVrGpte4ZQ@mail.gmail.com>
 <50D51552-4886-48B1-93CF-77184CADF3A2@gmail.com>
Message-ID: <CAKGV-k1URqisAacWH1qSaU7QS5mAtHf698HKSCTXQgYXawbaCg@mail.gmail.com>

Abdul

I am not familiar with the internals of the NREL installer. Perhaps it
already has done the job for you. Open a terminal and type

which rpict


If it comes back with a path like /usr/local/bin or /usr/local/radiance/bin
you are already set to use Radiance. The RAYPATH variable is not strictly
necessary but some scene setups expect it to be available.

A general discussion about setting environment variables in Mac OS (or the
previous versions) is here:

http://stackoverflow.com/questions/603785/environment-variables-in-mac-os-x/4567308#4567308

It's a few years old by now but I think most of this still applies. If you
are new to the Unix shell environment you can use this introduction to
setting variables:

http://osxdaily.com/2015/07/28/set-enviornment-variables-mac-os-x/

Please note that you can damage your user profile with these changes, which
could make it impossible to the terminal to clean up the mess. If you are
new to this you should ask around if someone has experience with Mac OS or
Linux and ask them to assist you. You can set up a second user and try your
modifications in that profile first. If it get's damaged you can just
delete it. In any case, make a backup!

Regards,
Thomas


On Tue, Oct 4, 2016 at 5:34 AM, A.M. Irsyadi <munirsyadi at gmail.com> wrote:

> I installed Radiance on OSX 10.11.6 using this:
> https://github.com/NREL/Radiance/releases/download/5.0/radiance-5.0.0-Darwin.dmg
>
> in a tutorial:
>
> "Next you need to add "/usr/local/radiance/bin? to your system path, and you need to create a new system variable called ?RAYPATH? and set it to "/usr/local/radiance/lib?. You can/should also add "/usr/local/radiance/man? to your MANPATH system variable.?
>
> please give a step-by-step guide to add this system variable on mac.
>
> then, how to check whether properly installed or not.
>
> Thanks,
>
> Abdul
>
>
> On Mar 24, 2016, at 11:22 PM, Randolph M. Fritz <rmfritz3 at gmail.com>
> wrote:
>
> Also, good introductions to the bash and csh shells, as well as Unix
> itself, are probably in order. But this is a lot of study. Still, the
> following introduction, from NYU's high-performance computing center, might
> perhaps be useful:
>   Introduction to Unix/Linux - https://wikis.nyu.edu/pages/
> viewpage.action?pageId=53859101
>
> --
> Randolph M. Fritz, Lighting Design and Simulation
> +1 206 659-8617 || rmfritz3 at gmail.com
>
> On Tue, Mar 22, 2016 at 9:28 AM, Compagnon Rapha?l <
> Raphael.Compagnon at hefr.ch> wrote:
>
>> Hi Abdul
>>
>> You can also find an old (written 19 years ago...) Radiance tutorial from
>> me on: http://radsite.lbl.gov/radiance/refer/index.html#cat4
>> I can nevertheless ensure you that the basic radiance commands that are
>> presented in this tutorial are remaining exactly the same in today's
>> Radiance version. Since that time there are only a few commands that have
>> changed their names, namely:
>> rview became rvu
>> gcalc became icalc
>>
>> I also add the same remarks as Andy...
>>
>> Hope this will of help.
>>
>> Rapha?l
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161004/855cbcb2/attachment.html>

From Robert.Guglielmetti at nrel.gov  Tue Oct  4 09:50:16 2016
From: Robert.Guglielmetti at nrel.gov (Guglielmetti, Robert)
Date: Tue, 4 Oct 2016 16:50:16 +0000
Subject: [Radiance-general] Getting Started
In-Reply-To: <CAKGV-k1URqisAacWH1qSaU7QS5mAtHf698HKSCTXQgYXawbaCg@mail.gmail.com>
References: <CACL5kgRnqUurjni+M3FwPSj1X-UqzNgwKTOJ+ixfQ+QTzkjsEQ@mail.gmail.com>
 <BD8C9DE4-B676-4B3C-B1B9-96559443811E@lmi.net>
 <CACL5kgTivKHR3H1q20w8N7BH=wp-t+qxNG6Fvd_V8d-98ijxpw@mail.gmail.com>
 <A6691D7EACBAC74589C1134EB0758B7F01441DE4E3@HEFRMBX01.sofr.hefr.lan>
 <CANeAMo+-NOvc8v=i4nTsjyv8PPKWF=6-HEcPdFtirVrGpte4ZQ@mail.gmail.com>
 <50D51552-4886-48B1-93CF-77184CADF3A2@gmail.com>
 <CAKGV-k1URqisAacWH1qSaU7QS5mAtHf698HKSCTXQgYXawbaCg@mail.gmail.com>
Message-ID: <D41936DF.289AB%Robert.Guglielmetti@nrel.gov>

The NREL (Mac) installer does not set them for you, sorry.  Andy McNeil used to have a YouTube video that showed exactly how to set these env vars, specifically for Radiance, but I can't find it. There are definitely links in the radiance-general archives.

I would definitely recommend setting the RAYPATH env var. Some of the Radiance internals rely upon it too, I believe ? it's not just certain scenes.

Here is what I put in my .bash_profile for Radiance to work; if you install Radiance with the NREL installer and don't change the default install location, these are the paths you want. :

## Radiance path crap
export PATH=$PATH:.:/usr/local/radiance/bin
export RAYPATH=.:/usr/local/radiance/lib
export MANPATH=$MANPATH:/usr/local/radiance/man
export MDIR=/usr/local/radiance/lib/

I forget what "MDIR" is for. You may not need that one. The MANPATH line adds the Radiance "man pages" (i.e., documentation) to your system's man page search path. That way you can simply type "man rcontrib" at the command to pull up the man page for rcontrib, for example.

Note that this .bash_profile is hidden, because the filename begins with a dot ("."). File lives in your home directory ("~"), aka /Users/[your_user_name]/.bash_profile. Very easy to create/edit this file from the command line using vi, or pico.

Good luck!

- Rob

On 10/4/16, 7:22 AM, "Thomas Bleicher" <tbleicher at gmail.com<mailto:tbleicher at gmail.com>> wrote:

Abdul

I am not familiar with the internals of the NREL installer. Perhaps it already has done the job for you. Open a terminal and type

which rpict

If it comes back with a path like /usr/local/bin or /usr/local/radiance/bin you are already set to use Radiance. The RAYPATH variable is not strictly necessary but some scene setups expect it to be available.

A general discussion about setting environment variables in Mac OS (or the previous versions) is here:

http://stackoverflow.com/questions/603785/environment-variables-in-mac-os-x/4567308#4567308

It's a few years old by now but I think most of this still applies. If you are new to the Unix shell environment you can use this introduction to setting variables:

http://osxdaily.com/2015/07/28/set-enviornment-variables-mac-os-x/

Please note that you can damage your user profile with these changes, which could make it impossible to the terminal to clean up the mess. If you are new to this you should ask around if someone has experience with Mac OS or Linux and ask them to assist you. You can set up a second user and try your modifications in that profile first. If it get's damaged you can just delete it. In any case, make a backup!

Regards,
Thomas


On Tue, Oct 4, 2016 at 5:34 AM, A.M. Irsyadi <munirsyadi at gmail.com<mailto:munirsyadi at gmail.com>> wrote:

I installed Radiance on OSX 10.11.6 using this:
https://github.com/NREL/Radiance/releases/download/5.0/radiance-5.0.0-Darwin.dmg

in a tutorial:

"Next you need to add "/usr/local/radiance/bin? to your system path, and you need to create a new system variable called ?RAYPATH? and set it to "/usr/local/radiance/lib?. You can/should also add "/usr/local/radiance/man? to your MANPATH system variable.?

please give a step-by-step guide to add this system variable on mac.

then, how to check whether properly installed or not.

Thanks,

Abdul

On Mar 24, 2016, at 11:22 PM, Randolph M. Fritz <rmfritz3 at gmail.com<mailto:rmfritz3 at gmail.com>> wrote:

Also, good introductions to the bash and csh shells, as well as Unix itself, are probably in order. But this is a lot of study. Still, the following introduction, from NYU's high-performance computing center, might perhaps be useful:
  Introduction to Unix/Linux - https://wikis.nyu.edu/pages/viewpage.action?pageId=53859101

--
Randolph M. Fritz, Lighting Design and Simulation
+1 206 659-8617<tel:%2B1%20206%20659-8617> || rmfritz3 at gmail.com<mailto:rmfritz3 at gmail.com>

On Tue, Mar 22, 2016 at 9:28 AM, Compagnon Rapha?l <Raphael.Compagnon at hefr.ch<mailto:Raphael.Compagnon at hefr.ch>> wrote:
Hi Abdul

You can also find an old (written 19 years ago...) Radiance tutorial from me on: http://radsite.lbl.gov/radiance/refer/index.html#cat4
I can nevertheless ensure you that the basic radiance commands that are presented in this tutorial are remaining exactly the same in today's Radiance version. Since that time there are only a few commands that have changed their names, namely:
rview became rvu
gcalc became icalc

I also add the same remarks as Andy...

Hope this will of help.

Rapha?l

_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org<mailto:Radiance-general at radiance-online.org>
http://www.radiance-online.org/mailman/listinfo/radiance-general

_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org<mailto:Radiance-general at radiance-online.org>
http://www.radiance-online.org/mailman/listinfo/radiance-general


_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org<mailto:Radiance-general at radiance-online.org>
http://www.radiance-online.org/mailman/listinfo/radiance-general




From stephen at coolshadow.com  Tue Oct  4 18:14:24 2016
From: stephen at coolshadow.com (Stephen Wasilewski)
Date: Tue, 4 Oct 2016 18:14:24 -0700
Subject: [Radiance-general] genBSDF multiple processes
Message-ID: <CAK5mS--VH71XaCwe9tL3T9ow9p3J7r=TuNR0U8Sw-_neS55SxA@mail.gmail.com>

I'm getting some curious (to me) behavior when running genBSDF to calculate
a rank 4 tensor tree (It also happens with '-t3').  When the sampling
resolution is 4 or 5 the program utilizes most of my processing (I notice
it starts 9 rcontrrib processes an 1 rfluxmtx process with '-n 8', so the
threads are each around 80%).  When I change the resolution to 6 (without
changing anything else) the processors top out at 25% and if I increase -n
it still uses no more than ~25% of my total cpu power.  There is plenty of
unused memory.

here is my command:
genBSDF -n 8 -c 10240 -f +b -r '-ab 10 -ad 1 -ss 0 -st .02' -t4 5 -dim 0
2.673 0 2.706 -1.207 0 -geom millimeter test.rad > test.xml

Does anyone know what is going on?
Is there something in the genBSDF program limiting this?
Is it a hardware limitation?
Is it some environmental variable (im running mac OSX 10.9.5)?

Thanks,

Stephen Wasilewski
*LOISOS *+* UBBELOHDE*
- - - - - - - - - - - - - - - - - - - - - - - - - - -
1917 Clement Avenue  Building 10A
Alameda, CA  94501 USA
- - - - - - - - - - - - - - - - - - - - - - - - - - -
510 521 3800 VOICE
510 521 3820 FAX
- - - - - - - - - - - - - - - - - - - - - - - - - - -
www.coolshadow.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161004/376c6ca1/attachment.html>

From gregoryjward at gmail.com  Tue Oct  4 19:07:08 2016
From: gregoryjward at gmail.com (Greg Ward)
Date: Tue, 4 Oct 2016 19:07:08 -0700
Subject: [Radiance-general] genBSDF multiple processes
In-Reply-To: <CAK5mS--VH71XaCwe9tL3T9ow9p3J7r=TuNR0U8Sw-_neS55SxA@mail.gmail.com>
References: <CAK5mS--VH71XaCwe9tL3T9ow9p3J7r=TuNR0U8Sw-_neS55SxA@mail.gmail.com>
Message-ID: <E218134D-528B-482B-8E83-6AC24256BC0A@lmi.net>

Hi Stephen,

The rcontrib command underpinning rfluxmtx and therefore genBSDF can become i/o bound if the model is not particularly complicated and/or there are few non-specular rays being generated.  If your system is purely specular, this is the sort of behavior I might expect.  As the number of receiving bins increases from -t4 5 to -t4 6, you go from 1024 output directions per input direction to 4096.  If you leave your sampling (-c) parameter at 2000, then you're actually sending fewer samples per incident direction than you have output bins.  This might be OK, depending on your model, but it means that the number of bin results being sent from one process to another exceeds the number of rays being calculated, thus i/o becomes the bottleneck over CPU if you have enough processes.  In a sense, you could increase your -c setting by a factor of 2 or 3 and get better accuracy in the same calculation time.  Try it and see if it doesn't improve your CPU utilization.

Remember that if your number of processes exceeds the number of physical cores (not virtual ones), then your time-linearity will go down dramatically, even if your CPU utilization shows 100%.

Cheers,
-Greg

> From: Stephen Wasilewski <stephen at coolshadow.com>
> Date: October 4, 2016 6:14:24 PM PDT
> 
> I'm getting some curious (to me) behavior when running genBSDF to calculate a rank 4 tensor tree (It also happens with '-t3').  When the sampling resolution is 4 or 5 the program utilizes most of my processing (I notice it starts 9 rcontrrib processes an 1 rfluxmtx process with '-n 8', so the threads are each around 80%).  When I change the resolution to 6 (without changing anything else) the processors top out at 25% and if I increase -n it still uses no more than ~25% of my total cpu power.  There is plenty of unused memory.  
> 
> here is my command:
> genBSDF -n 8 -c 10240 -f +b -r '-ab 10 -ad 1 -ss 0 -st .02' -t4 5 -dim 0 2.673 0 2.706 -1.207 0 -geom millimeter test.rad > test.xml
> 
> Does anyone know what is going on?
> Is there something in the genBSDF program limiting this?
> Is it a hardware limitation?
> Is it some environmental variable (im running mac OSX 10.9.5)?
> 
> Thanks,
> 
> Stephen Wasilewski
> LOISOS + UBBELOHDE
> - - - - - - - - - - - - - - - - - - - - - - - - - - - 
> 1917 Clement Avenue  Building 10A
> Alameda, CA  94501 USA
> - - - - - - - - - - - - - - - - - - - - - - - - - - - 
> 510 521 3800 VOICE
> 510 521 3820 FAX
> - - - - - - - - - - - - - - - - - - - - - - - - - - - 
> www.coolshadow.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161004/0c474873/attachment.html>

From sandeep00007 at yahoo.co.in  Wed Oct  5 08:25:25 2016
From: sandeep00007 at yahoo.co.in (sandeep pandey)
Date: Wed, 5 Oct 2016 15:25:25 +0000 (UTC)
Subject: [Radiance-general] 3-phase method
References: <365619381.8787548.1475681125702.ref@mail.yahoo.com>
Message-ID: <365619381.8787548.1475681125702@mail.yahoo.com>

Hi,?
I would like to know if the position of the sun is calculated at the end of each time-step or it is the average value over the time-step.
Sandeep
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161005/847ed8c1/attachment.html>

From stephen at coolshadow.com  Wed Oct  5 10:25:16 2016
From: stephen at coolshadow.com (Stephen Wasilewski)
Date: Wed, 5 Oct 2016 10:25:16 -0700
Subject: [Radiance-general] genBSDF multiple processes
In-Reply-To: <E218134D-528B-482B-8E83-6AC24256BC0A@lmi.net>
References: <CAK5mS--VH71XaCwe9tL3T9ow9p3J7r=TuNR0U8Sw-_neS55SxA@mail.gmail.com>
 <E218134D-528B-482B-8E83-6AC24256BC0A@lmi.net>
Message-ID: <CAK5mS-954p9DW2UfOBi9RtzyeE=FviGCyZnX27s=D43Qo0s8iw@mail.gmail.com>

Thanks Greg,

That makes sense, although it seems there might be something else going on
as well.

my model is purely specular and has no transmission only reflection.  I ran
through a number of -c options last night with '-t4 6':

-c 10240 (2.5 samples) took ~ 20 minutes
-c 40960 (10 samples) took ~ 1.5 hrs
-c 102400 (25 samples) took ~ 3.75 hrs

so it seems calculation time is scaling linear with my count.

I have a large number of polygons (the rad file is 31 MB) and my material
is a mirror with a brightfunc modifier (the glass_angular_effect you shared
a number of years ago.  does that introduce some other bottleneck?

Stephen Wasilewski
*LOISOS *+* UBBELOHDE*
- - - - - - - - - - - - - - - - - - - - - - - - - - -
1917 Clement Avenue  Building 10A
Alameda, CA  94501 USA
- - - - - - - - - - - - - - - - - - - - - - - - - - -
510 521 3800 VOICE
510 521 3820 FAX
- - - - - - - - - - - - - - - - - - - - - - - - - - -
www.coolshadow.com

On Tue, Oct 4, 2016 at 7:07 PM, Greg Ward <gregoryjward at gmail.com> wrote:

> Hi Stephen,
>
> The rcontrib command underpinning rfluxmtx and therefore genBSDF can
> become i/o bound if the model is not particularly complicated and/or there
> are few non-specular rays being generated.  If your system is purely
> specular, this is the sort of behavior I might expect.  As the number of
> receiving bins increases from -t4 5 to -t4 6, you go from 1024 output
> directions per input direction to 4096.  If you leave your sampling (-c)
> parameter at 2000, then you're actually sending fewer samples per incident
> direction than you have output bins.  This might be OK, depending on your
> model, but it means that the number of bin results being sent from one
> process to another exceeds the number of rays being calculated, thus i/o
> becomes the bottleneck over CPU if you have enough processes.  In a sense,
> you could increase your -c setting by a factor of 2 or 3 and get better
> accuracy in the same calculation time.  Try it and see if it doesn't
> improve your CPU utilization.
>
> Remember that if your number of processes exceeds the number of physical
> cores (not virtual ones), then your time-linearity will go down
> dramatically, even if your CPU utilization shows 100%.
>
> Cheers,
> -Greg
>
> *From: *Stephen Wasilewski <stephen at coolshadow.com>
>
> *Date: *October 4, 2016 6:14:24 PM PDT
>
>
> I'm getting some curious (to me) behavior when running genBSDF to
> calculate a rank 4 tensor tree (It also happens with '-t3').  When the
> sampling resolution is 4 or 5 the program utilizes most of my processing (I
> notice it starts 9 rcontrrib processes an 1 rfluxmtx process with '-n 8',
> so the threads are each around 80%).  When I change the resolution to 6
> (without changing anything else) the processors top out at 25% and if I
> increase -n it still uses no more than ~25% of my total cpu power.  There
> is plenty of unused memory.
>
> here is my command:
> genBSDF -n 8 -c 10240 -f +b -r '-ab 10 -ad 1 -ss 0 -st .02' -t4 5 -dim 0
> 2.673 0 2.706 -1.207 0 -geom millimeter test.rad > test.xml
>
> Does anyone know what is going on?
> Is there something in the genBSDF program limiting this?
> Is it a hardware limitation?
> Is it some environmental variable (im running mac OSX 10.9.5)?
>
> Thanks,
>
> Stephen Wasilewski
> *LOISOS *+* UBBELOHDE*
> - - - - - - - - - - - - - - - - - - - - - - - - - - -
> 1917 Clement Avenue  Building 10A
> Alameda, CA  94501 USA
> - - - - - - - - - - - - - - - - - - - - - - - - - - -
> 510 521 3800 VOICE
> 510 521 3820 FAX
> - - - - - - - - - - - - - - - - - - - - - - - - - - -
> www.coolshadow.com
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161005/2c449e59/attachment-0001.html>

From gregoryjward at gmail.com  Wed Oct  5 10:42:13 2016
From: gregoryjward at gmail.com (Greg Ward)
Date: Wed, 5 Oct 2016 10:42:13 -0700
Subject: [Radiance-general] genBSDF multiple processes
In-Reply-To: <CAK5mS-954p9DW2UfOBi9RtzyeE=FviGCyZnX27s=D43Qo0s8iw@mail.gmail.com>
References: <CAK5mS--VH71XaCwe9tL3T9ow9p3J7r=TuNR0U8Sw-_neS55SxA@mail.gmail.com>
 <E218134D-528B-482B-8E83-6AC24256BC0A@lmi.net>
 <CAK5mS-954p9DW2UfOBi9RtzyeE=FviGCyZnX27s=D43Qo0s8iw@mail.gmail.com>
Message-ID: <4BA38F3A-6A0B-4449-82C8-18BD82B6FA4E@lmi.net>

Hi Stephen,

Generally speaking, I would expect an increase in the -c option to improve CPU utilization.  As you note, you are seeing more of a linear relationship, which implies that the utilization is staying the same.  Did you check this in your process monitor?  You can run the "Sample Process" option to see further where the program is spending most of its time, though I'm not sure what we might learn from this in terms of i/o bottlenecks. 

If your materials are purely specular (zero roughness), then your ability to parallelize may be fundamentally limited by the low ray branching.  All the same, the run-times should be acceptable, so I'm not too concerned about optimizing for such cases.

-Greg

> From: Stephen Wasilewski <stephen at coolshadow.com>
> Date: October 5, 2016 10:25:16 AM PDT
> 
> Thanks Greg,  
> 
> That makes sense, although it seems there might be something else going on as well.
> 
> my model is purely specular and has no transmission only reflection.  I ran through a number of -c options last night with '-t4 6':
> 
> -c 10240 (2.5 samples) took ~ 20 minutes
> -c 40960 (10 samples) took ~ 1.5 hrs
> -c 102400 (25 samples) took ~ 3.75 hrs 
> 
> so it seems calculation time is scaling linear with my count.  
> 
> I have a large number of polygons (the rad file is 31 MB) and my material is a mirror with a brightfunc modifier (the glass_angular_effect you shared a number of years ago.  does that introduce some other bottleneck?
> 
> Stephen Wasilewski
> LOISOS + UBBELOHDE
> - - - - - - - - - - - - - - - - - - - - - - - - - - - 
> 1917 Clement Avenue  Building 10A
> Alameda, CA  94501 USA
> - - - - - - - - - - - - - - - - - - - - - - - - - - - 
> 510 521 3800 VOICE
> 510 521 3820 FAX
> - - - - - - - - - - - - - - - - - - - - - - - - - - - 
> www.coolshadow.com
> 
> On Tue, Oct 4, 2016 at 7:07 PM, Greg Ward <gregoryjward at gmail.com> wrote:
> Hi Stephen,
> 
> The rcontrib command underpinning rfluxmtx and therefore genBSDF can become i/o bound if the model is not particularly complicated and/or there are few non-specular rays being generated.  If your system is purely specular, this is the sort of behavior I might expect.  As the number of receiving bins increases from -t4 5 to -t4 6, you go from 1024 output directions per input direction to 4096.  If you leave your sampling (-c) parameter at 2000, then you're actually sending fewer samples per incident direction than you have output bins.  This might be OK, depending on your model, but it means that the number of bin results being sent from one process to another exceeds the number of rays being calculated, thus i/o becomes the bottleneck over CPU if you have enough processes.  In a sense, you could increase your -c setting by a factor of 2 or 3 and get better accuracy in the same calculation time.  Try it and see if it doesn't improve your CPU utilization.
> 
> Remember that if your number of processes exceeds the number of physical cores (not virtual ones), then your time-linearity will go down dramatically, even if your CPU utilization shows 100%.
> 
> Cheers,
> -Greg
> 
>> From: Stephen Wasilewski <stephen at coolshadow.com>
>> Date: October 4, 2016 6:14:24 PM PDT
>> 
>> I'm getting some curious (to me) behavior when running genBSDF to calculate a rank 4 tensor tree (It also happens with '-t3').  When the sampling resolution is 4 or 5 the program utilizes most of my processing (I notice it starts 9 rcontrrib processes an 1 rfluxmtx process with '-n 8', so the threads are each around 80%).  When I change the resolution to 6 (without changing anything else) the processors top out at 25% and if I increase -n it still uses no more than ~25% of my total cpu power.  There is plenty of unused memory.  
>> 
>> here is my command:
>> genBSDF -n 8 -c 10240 -f +b -r '-ab 10 -ad 1 -ss 0 -st .02' -t4 5 -dim 0 2.673 0 2.706 -1.207 0 -geom millimeter test.rad > test.xml
>> 
>> Does anyone know what is going on?
>> Is there something in the genBSDF program limiting this?
>> Is it a hardware limitation?
>> Is it some environmental variable (im running mac OSX 10.9.5)?
>> 
>> Thanks,
>> 
>> Stephen Wasilewski
>> LOISOS + UBBELOHDE
>> - - - - - - - - - - - - - - - - - - - - - - - - - - - 
>> 1917 Clement Avenue  Building 10A
>> Alameda, CA  94501 USA
>> - - - - - - - - - - - - - - - - - - - - - - - - - - - 
>> 510 521 3800 VOICE
>> 510 521 3820 FAX
>> - - - - - - - - - - - - - - - - - - - - - - - - - - - 
>> www.coolshadow.com
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
> 
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161005/00419ee3/attachment.html>

From stephen at coolshadow.com  Wed Oct  5 11:26:52 2016
From: stephen at coolshadow.com (Stephen Wasilewski)
Date: Wed, 5 Oct 2016 11:26:52 -0700
Subject: [Radiance-general] genBSDF multiple processes
In-Reply-To: <4BA38F3A-6A0B-4449-82C8-18BD82B6FA4E@lmi.net>
References: <CAK5mS--VH71XaCwe9tL3T9ow9p3J7r=TuNR0U8Sw-_neS55SxA@mail.gmail.com>
 <E218134D-528B-482B-8E83-6AC24256BC0A@lmi.net>
 <CAK5mS-954p9DW2UfOBi9RtzyeE=FviGCyZnX27s=D43Qo0s8iw@mail.gmail.com>
 <4BA38F3A-6A0B-4449-82C8-18BD82B6FA4E@lmi.net>
Message-ID: <CAK5mS-_H-asWmSPniWq9-teEVbcnZ82teF8F00+G3j_s_6VtrA@mail.gmail.com>

Greg,

you are correct, utilization does not change significantly.  You are also
right that the run time is totally acceptable.

It is nice to understand where the limitation is and that it is only true
for this 100% specular case.

Thanks,

Stephen Wasilewski
*LOISOS *+* UBBELOHDE*
- - - - - - - - - - - - - - - - - - - - - - - - - - -
1917 Clement Avenue  Building 10A
Alameda, CA  94501 USA
- - - - - - - - - - - - - - - - - - - - - - - - - - -
510 521 3800 VOICE
510 521 3820 FAX
- - - - - - - - - - - - - - - - - - - - - - - - - - -
www.coolshadow.com

On Wed, Oct 5, 2016 at 10:42 AM, Greg Ward <gregoryjward at gmail.com> wrote:

> Hi Stephen,
>
> Generally speaking, I would expect an increase in the -c option to improve
> CPU utilization.  As you note, you are seeing more of a linear
> relationship, which implies that the utilization is staying the same.  Did
> you check this in your process monitor?  You can run the "Sample Process"
> option to see further where the program is spending most of its time,
> though I'm not sure what we might learn from this in terms of i/o
> bottlenecks.
>
> If your materials are purely specular (zero roughness), then your ability
> to parallelize may be fundamentally limited by the low ray branching.  All
> the same, the run-times should be acceptable, so I'm not too concerned
> about optimizing for such cases.
>
> -Greg
>
> *From: *Stephen Wasilewski <stephen at coolshadow.com>
>
> *Date: *October 5, 2016 10:25:16 AM PDT
>
>
> Thanks Greg,
>
> That makes sense, although it seems there might be something else going on
> as well.
>
> my model is purely specular and has no transmission only reflection.  I
> ran through a number of -c options last night with '-t4 6':
>
> -c 10240 (2.5 samples) took ~ 20 minutes
> -c 40960 (10 samples) took ~ 1.5 hrs
> -c 102400 (25 samples) took ~ 3.75 hrs
>
> so it seems calculation time is scaling linear with my count.
>
> I have a large number of polygons (the rad file is 31 MB) and my material
> is a mirror with a brightfunc modifier (the glass_angular_effect you shared
> a number of years ago.  does that introduce some other bottleneck?
>
> Stephen Wasilewski
> *LOISOS *+* UBBELOHDE*
> - - - - - - - - - - - - - - - - - - - - - - - - - - -
> 1917 Clement Avenue  Building 10A
> Alameda, CA  94501 USA
> - - - - - - - - - - - - - - - - - - - - - - - - - - -
> 510 521 3800 VOICE
> 510 521 3820 FAX
> - - - - - - - - - - - - - - - - - - - - - - - - - - -
> www.coolshadow.com
>
> On Tue, Oct 4, 2016 at 7:07 PM, Greg Ward <gregoryjward at gmail.com> wrote:
>
>> Hi Stephen,
>>
>> The rcontrib command underpinning rfluxmtx and therefore genBSDF can
>> become i/o bound if the model is not particularly complicated and/or there
>> are few non-specular rays being generated.  If your system is purely
>> specular, this is the sort of behavior I might expect.  As the number of
>> receiving bins increases from -t4 5 to -t4 6, you go from 1024 output
>> directions per input direction to 4096.  If you leave your sampling (-c)
>> parameter at 2000, then you're actually sending fewer samples per incident
>> direction than you have output bins.  This might be OK, depending on your
>> model, but it means that the number of bin results being sent from one
>> process to another exceeds the number of rays being calculated, thus i/o
>> becomes the bottleneck over CPU if you have enough processes.  In a sense,
>> you could increase your -c setting by a factor of 2 or 3 and get better
>> accuracy in the same calculation time.  Try it and see if it doesn't
>> improve your CPU utilization.
>>
>> Remember that if your number of processes exceeds the number of physical
>> cores (not virtual ones), then your time-linearity will go down
>> dramatically, even if your CPU utilization shows 100%.
>>
>> Cheers,
>> -Greg
>>
>> *From: *Stephen Wasilewski <stephen at coolshadow.com>
>>
>> *Date: *October 4, 2016 6:14:24 PM PDT
>>
>>
>> I'm getting some curious (to me) behavior when running genBSDF to
>> calculate a rank 4 tensor tree (It also happens with '-t3').  When the
>> sampling resolution is 4 or 5 the program utilizes most of my processing (I
>> notice it starts 9 rcontrrib processes an 1 rfluxmtx process with '-n 8',
>> so the threads are each around 80%).  When I change the resolution to 6
>> (without changing anything else) the processors top out at 25% and if I
>> increase -n it still uses no more than ~25% of my total cpu power.  There
>> is plenty of unused memory.
>>
>> here is my command:
>> genBSDF -n 8 -c 10240 -f +b -r '-ab 10 -ad 1 -ss 0 -st .02' -t4 5 -dim 0
>> 2.673 0 2.706 -1.207 0 -geom millimeter test.rad > test.xml
>>
>> Does anyone know what is going on?
>> Is there something in the genBSDF program limiting this?
>> Is it a hardware limitation?
>> Is it some environmental variable (im running mac OSX 10.9.5)?
>>
>> Thanks,
>>
>> Stephen Wasilewski
>> *LOISOS *+* UBBELOHDE*
>> - - - - - - - - - - - - - - - - - - - - - - - - - - -
>> 1917 Clement Avenue  Building 10A
>> Alameda, CA  94501 USA
>> - - - - - - - - - - - - - - - - - - - - - - - - - - -
>> 510 521 3800 VOICE
>> 510 521 3820 FAX
>> - - - - - - - - - - - - - - - - - - - - - - - - - - -
>> www.coolshadow.com
>>
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161005/7d0c9622/attachment-0001.html>

From Christopher.Rush at arup.com  Thu Oct  6 09:08:37 2016
From: Christopher.Rush at arup.com (Christopher Rush)
Date: Thu, 6 Oct 2016 16:08:37 +0000
Subject: [Radiance-general] multi-processor rendering
Message-ID: <88079A360FAC7441AE93ECBF61998236313AA4DC@AMXExMb01.global.arup.com>

Several years ago I tried out rpiece but found it wasn't always reliable - at least not on the system I had been using. I found this following vwrays and rtrace command sequence to work well to get around this. This is for creating a few renderings of a single static scene (for example electric lighting, or single daylight condition). Of course there would be additional ambient parameters on the command line. So I have two questions in addition to opening this to general critique:

1. Has rpeice changed much over the past few years, and would it have any processing speed benefits if I were to try it again?
2. Would using rcontrib offer any processing speed benefits? (I started that way but then realized I should gain speed using the ambient file for rtrace)

Example successful command sequence using 6 processors:

view1="-x 4096 -y 2160 -vf view1.vf"
vwrays -ff $view | rtrace    -w -n 6 -af scene.amb -ffc $(vwrays -d $view) scene.oct > view1.hdr
vwrays -ff $view | rtrace -i -w -n 6 -af scene.amb -ffc $(vwrays -d $view) scene.oct > view1-i.hdr


Thanks for all feedback.
Chris
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161006/1bccd230/attachment.html>

From gregoryjward at gmail.com  Thu Oct  6 09:32:15 2016
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu, 6 Oct 2016 09:32:15 -0700
Subject: [Radiance-general] multi-processor rendering
In-Reply-To: <88079A360FAC7441AE93ECBF61998236313AA4DC@AMXExMb01.global.arup.com>
References: <88079A360FAC7441AE93ECBF61998236313AA4DC@AMXExMb01.global.arup.com>
Message-ID: <C35F5202-C366-480E-87BC-462EFBE1EB39@lmi.net>

Hi Chris,

If you would use -ps 1 on the command line of rpiece because you are doing specular sampling or setting -dj .7 (or whatever) to calculate penumbras, then your rtrace command will be just as fast as rpiece.  The main advantage of rpiece on large images is the image plane sampling it does.  Setting -ps 4 (the default) samples only 1 in 16 pixels to start, then subsamples in areas where it detects something going on.  This can be a big time-saver, especially in scenes with a lot of smoothly shaded areas.

The rad command will run rpiece for you if you set the -N option to the number of processes and the -v option to specify a single view you want rendered.  This is a much easier way to operate, and should be entirely reliable under Mac OS X and most versions of Linux.  You can run your own comparison against rtrace with vwrays and report back.  I'd be interested to hear what you find.

One more thing about rtrace is that it doesn't put your view in the header of the output, so if you want to use that output with programs that need the view, you will have to re-insert it.  The latest version of getinfo makes this a little easier, e.g.:

	vwrays ... | rtrace ... | getinfo -a "VIEW= $view" > view1.hdr

Cheers,
-Greg

> From: Christopher Rush <Christopher.Rush at arup.com>
> Date: October 6, 2016 9:08:37 AM PDT
> 
> Several years ago I tried out rpiece but found it wasn?t always reliable ? at least not on the system I had been using. I found this following vwrays and rtrace command sequence to work well to get around this. This is for creating a few renderings of a single static scene (for example electric lighting, or single daylight condition). Of course there would be additional ambient parameters on the command line. So I  have two questions in addition to opening this to general critique:
>  
> 1. Has rpeice changed much over the past few years, and would it have any processing speed benefits if I were to try it again?
> 2. Would using rcontrib offer any processing speed benefits? (I started that way but then realized I should gain speed using the ambient file for rtrace)
>  
> Example successful command sequence using 6 processors:
>  
> view1="-x 4096 -y 2160 -vf view1.vf"
> vwrays -ff $view | rtrace    -w -n 6 -af scene.amb -ffc $(vwrays -d $view) scene.oct > view1.hdr
> vwrays -ff $view | rtrace -i -w -n 6 -af scene.amb -ffc $(vwrays -d $view) scene.oct > view1-i.hdr
>  
>  
> Thanks for all feedback.
> Chris
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161006/f6154970/attachment.html>

From Christopher.Rush at arup.com  Fri Oct  7 06:20:36 2016
From: Christopher.Rush at arup.com (Christopher Rush)
Date: Fri, 7 Oct 2016 13:20:36 +0000
Subject: [Radiance-general] multi-processor rendering
In-Reply-To: <C35F5202-C366-480E-87BC-462EFBE1EB39@lmi.net>
References: <88079A360FAC7441AE93ECBF61998236313AA4DC@AMXExMb01.global.arup.com>
 <C35F5202-C366-480E-87BC-462EFBE1EB39@lmi.net>
Message-ID: <88079A360FAC7441AE93ECBF61998236313AB7A2@AMXExMb01.global.arup.com>

Great suggestion. I will test. I think I had tried the -N option with rad but didn't find it using multiple processors when just one view is in the .rif file (if my memory serves correctly). I didn't think to try specifically calling for just the one view along with the -N option.

-Chris

From: Greg Ward [mailto:gregoryjward at gmail.com]
Sent: Thursday, October 06, 2016 12:32 PM
To: Radiance general discussion
Subject: Re: [Radiance-general] multi-processor rendering

Hi Chris,

If you would use -ps 1 on the command line of rpiece because you are doing specular sampling or setting -dj .7 (or whatever) to calculate penumbras, then your rtrace command will be just as fast as rpiece.  The main advantage of rpiece on large images is the image plane sampling it does.  Setting -ps 4 (the default) samples only 1 in 16 pixels to start, then subsamples in areas where it detects something going on.  This can be a big time-saver, especially in scenes with a lot of smoothly shaded areas.

The rad command will run rpiece for you if you set the -N option to the number of processes and the -v option to specify a single view you want rendered.  This is a much easier way to operate, and should be entirely reliable under Mac OS X and most versions of Linux.  You can run your own comparison against rtrace with vwrays and report back.  I'd be interested to hear what you find.

One more thing about rtrace is that it doesn't put your view in the header of the output, so if you want to use that output with programs that need the view, you will have to re-insert it.  The latest version of getinfo makes this a little easier, e.g.:

                vwrays ... | rtrace ... | getinfo -a "VIEW= $view" > view1.hdr

Cheers,
-Greg



From: Christopher Rush <Christopher.Rush at arup.com<mailto:Christopher.Rush at arup.com>>

Date: October 6, 2016 9:08:37 AM PDT


Several years ago I tried out rpiece but found it wasn't always reliable - at least not on the system I had been using. I found this following vwrays and rtrace command sequence to work well to get around this. This is for creating a few renderings of a single static scene (for example electric lighting, or single daylight condition). Of course there would be additional ambient parameters on the command line. So I have two questions in addition to opening this to general critique:

1. Has rpeice changed much over the past few years, and would it have any processing speed benefits if I were to try it again?
2. Would using rcontrib offer any processing speed benefits? (I started that way but then realized I should gain speed using the ambient file for rtrace)

Example successful command sequence using 6 processors:

view1="-x 4096 -y 2160 -vf view1.vf"
vwrays -ff $view | rtrace    -w -n 6 -af scene.amb -ffc $(vwrays -d $view) scene.oct > view1.hdr
vwrays -ff $view | rtrace -i -w -n 6 -af scene.amb -ffc $(vwrays -d $view) scene.oct > view1-i.hdr


Thanks for all feedback.
Chris
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161007/5984b013/attachment.html>

From gregoryjward at gmail.com  Fri Oct  7 08:23:33 2016
From: gregoryjward at gmail.com (Greg Ward)
Date: Fri, 7 Oct 2016 08:23:33 -0700
Subject: [Radiance-general] multi-processor rendering
In-Reply-To: <88079A360FAC7441AE93ECBF61998236313AB7A2@AMXExMb01.global.arup.com>
References: <88079A360FAC7441AE93ECBF61998236313AA4DC@AMXExMb01.global.arup.com>
 <C35F5202-C366-480E-87BC-462EFBE1EB39@lmi.net>
 <88079A360FAC7441AE93ECBF61998236313AB7A2@AMXExMb01.global.arup.com>
Message-ID: <18C8634A-B72B-483F-A950-84ED536E461B@lmi.net>

Well, this feature is not exactly "new" anymore, but rad didn't always manage rpiece for you.  I added this facility back in 2011.  It should work the same if there is only one view in the file as when you use the -v option to specify a single view.

Cheers,
-Greg

> From: Christopher Rush <Christopher.Rush at arup.com>
> Date: October 7, 2016 6:20:36 AM PDT
> 
> Great suggestion. I will test. I think I had tried the -N option with rad but didn?t find it using multiple processors when just one view is in the .rif file (if my memory serves correctly). I didn?t think to try specifically calling for just the one view along with the -N option.
>  
> -Chris
>  
> From: Greg Ward [mailto:gregoryjward at gmail.com] 
> Sent: Thursday, October 06, 2016 12:32 PM
> To: Radiance general discussion
> Subject: Re: [Radiance-general] multi-processor rendering
>  
> Hi Chris,
>  
> If you would use -ps 1 on the command line of rpiece because you are doing specular sampling or setting -dj .7 (or whatever) to calculate penumbras, then your rtrace command will be just as fast as rpiece.  The main advantage of rpiece on large images is the image plane sampling it does.  Setting -ps 4 (the default) samples only 1 in 16 pixels to start, then subsamples in areas where it detects something going on.  This can be a big time-saver, especially in scenes with a lot of smoothly shaded areas.
>  
> The rad command will run rpiece for you if you set the -N option to the number of processes and the -v option to specify a single view you want rendered.  This is a much easier way to operate, and should be entirely reliable under Mac OS X and most versions of Linux.  You can run your own comparison against rtrace with vwrays and report back.  I'd be interested to hear what you find.
>  
> One more thing about rtrace is that it doesn't put your view in the header of the output, so if you want to use that output with programs that need the view, you will have to re-insert it.  The latest version of getinfo makes this a little easier, e.g.:
>  
>                 vwrays ... | rtrace ... | getinfo -a "VIEW= $view" > view1.hdr
>  
> Cheers,
> -Greg
> 
> 
> From: Christopher Rush <Christopher.Rush at arup.com>
> Date: October 6, 2016 9:08:37 AM PDT
>  
> Several years ago I tried out rpiece but found it wasn?t always reliable ? at least not on the system I had been using. I found this following vwrays and rtrace command sequence to work well to get around this. This is for creating a few renderings of a single static scene (for example electric lighting, or single daylight condition). Of course there would be additional ambient parameters on the command line. So I have two questions in addition to opening this to general critique:
>  
> 1. Has rpeice changed much over the past few years, and would it have any processing speed benefits if I were to try it again?
> 2. Would using rcontrib offer any processing speed benefits? (I started that way but then realized I should gain speed using the ambient file for rtrace)
>  
> Example successful command sequence using 6 processors:
>  
> view1="-x 4096 -y 2160 -vf view1.vf"
> vwrays -ff $view | rtrace    -w -n 6 -af scene.amb -ffc $(vwrays -d $view) scene.oct > view1.hdr
> vwrays -ff $view | rtrace -i -w -n 6 -af scene.amb -ffc $(vwrays -d $view) scene.oct > view1-i.hdr
>  
>  
> Thanks for all feedback.
> Chris
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161007/6339efbd/attachment-0001.html>

From gward at lmi.net  Sat Oct  8 10:43:03 2016
From: gward at lmi.net (Greg Ward)
Date: Sat, 8 Oct 2016 10:43:03 -0700
Subject: [Radiance-general] 3-phase method
In-Reply-To: <365619381.8787548.1475681125702@mail.yahoo.com>
References: <365619381.8787548.1475681125702.ref@mail.yahoo.com>
 <365619381.8787548.1475681125702@mail.yahoo.com>
Message-ID: <1F5C0A6D-E2B8-481F-AF6F-A14632872BDB@lmi.net>

Seems like no one answered this question, and for some reason, it was marked as spam.  I'm not sure if anyone even saw it...

What program are you asking about, exactly?  Are you referring to gendaymtx, DAYSIM, or something else?  Please be specific.

Cheers,
-Greg

Sent from my iPad

> On Oct 5, 2016, at 8:25 AM, sandeep pandey <sandeep00007 at yahoo.co.in> wrote:
> 
> Hi, 
> 
> I would like to know if the position of the sun is calculated at the end of each time-step or it is the average value over the time-step.
> 
> Sandeep
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161008/bb527597/attachment.html>

From sandeep00007 at yahoo.co.in  Sat Oct  8 12:28:01 2016
From: sandeep00007 at yahoo.co.in (sandeep pandey)
Date: Sat, 8 Oct 2016 19:28:01 +0000 (UTC)
Subject: [Radiance-general] 3-phase method
In-Reply-To: <813958857.432513.1475950472039@mail.yahoo.com>
References: <365619381.8787548.1475681125702.ref@mail.yahoo.com>
 <365619381.8787548.1475681125702@mail.yahoo.com>
 <1F5C0A6D-E2B8-481F-AF6F-A14632872BDB@lmi.net>
 <813958857.432513.1475950472039@mail.yahoo.com>
Message-ID: <521337022.462372.1475954881400@mail.yahoo.com>

Could you please also let me know if the BSDF files used in DAYSIM employing 3 phase method use only front transmission values of solar and visible spectrum or even back transmission values are used along with reflection front and back? I had read somewhere that it only uses transmission front values, but from results it does appear so.?
 

    On Saturday, 8 October 2016 8:14 PM, sandeep pandey <sandeep00007 at yahoo.co.in> wrote:
 

 Thank you for your response. The tool I am using is based on DAYSIM.?? 

    On Saturday, 8 October 2016 7:43 PM, Greg Ward <gward at lmi.net> wrote:
 

 Seems like no one answered this question, and for some reason, it was marked as spam. ?I'm not sure if anyone even saw it...
What program are you asking about, exactly? ?Are you referring to gendaymtx, DAYSIM, or something else? ?Please be specific.
Cheers,-Greg

Sent from my iPad
On Oct 5, 2016, at 8:25 AM, sandeep pandey <sandeep00007 at yahoo.co.in> wrote:


Hi,?
I would like to know if the position of the sun is calculated at the end of each time-step or it is the average value over the time-step.
Sandeep



   

   
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161008/b7940d41/attachment.html>

From kongzhewode at gmail.com  Thu Oct 13 14:43:10 2016
From: kongzhewode at gmail.com (Zhe Kong)
Date: Thu, 13 Oct 2016 16:43:10 -0500
Subject: [Radiance-general] Question about dctimestep
Message-ID: <CAEV5Nyc8MvSCu7tMRdAr-13F2ijrMCbijbxZT42LqN7_VEnm9w@mail.gmail.com>

Dear Radiance Users:
I am struggling with 3-phase method and run into an issue about dctimestep.
At the last step of the tutorial (
https://andymcneil.gitbooks.io/three-phase-method-tutorial/content/35_matrix_multiplication.html)
to use dctimestep to calculate illuminance for three shading systems:

$dctimestep results/photocells.vmx data/Clear.xml results/south.dmx
skies/12_21_15.skv rcalc -e '$1=179*($1*0.265+$2*0.670+$3*0.065)' >
results/illum_122115_clear.dat

At first I received the feedback below:

Usage: dctimestep [-n nsteps][-o ospec][-i{f|d|h}][-o{f|d}] DCspec [skyf]

or: dctimestep [-n nsteps][-o ospec][-i{f|d|h}][-o{f|d}] Vspec Tbsdf
Dmat.dat [skyf]

>From this post:
http://radiance-online.org/pipermail/radiance-general/2013-October/009833.html
 I think my dctimestep is not the newest one, so I download it from
http://www.radiance-online.org/cgi-bin/viewcvs.cgi/ray/src/util/dctimestep.c?annotate=2.37

My question is how to install it appropriate. I saved the file as
dctimestep and use $chmod a=r+w+x dctimestep, I got the errors as below:

/Users/zhekong/Radiance/usr/local/radiance/bin/dctimestep: line 2: static:
command not found

/Users/zhekong/Radiance/usr/local/radiance/bin/dctimestep: line 4:
/Applications: is a directory

/Users/zhekong/Radiance/usr/local/radiance/bin/dctimestep: line 5:
apply_overcast.bash: command not found

/Users/zhekong/Radiance/usr/local/radiance/bin/dctimestep: line 6:
apply_overcast.bash: command not found

/Users/zhekong/Radiance/usr/local/radiance/bin/dctimestep: line 7:
apply_overcast.bash: command not found

/Users/zhekong/Radiance/usr/local/radiance/bin/dctimestep: line 8: data/:
is a directory

and so on. The list is a bit long to include all. I don't think I install
it right. Could someone let me know how to replace dctimestep correctly, if
this is the problem, or what is the solution to make this step work?

Thank you very much in advance.


Zhe Kong









Zhe Kong
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161013/8487cd21/attachment.html>

From sarith at psu.edu  Thu Oct 13 14:48:56 2016
From: sarith at psu.edu (Sarith Subramaniam)
Date: Thu, 13 Oct 2016 17:48:56 -0400
Subject: [Radiance-general] Question about dctimestep
In-Reply-To: <CAEV5Nyc8MvSCu7tMRdAr-13F2ijrMCbijbxZT42LqN7_VEnm9w@mail.gmail.com>
References: <CAEV5Nyc8MvSCu7tMRdAr-13F2ijrMCbijbxZT42LqN7_VEnm9w@mail.gmail.com>
Message-ID: <081801d2259b$9a6f26e0$cf4d74a0$@psu.edu>

Hi Zhe,

 

If the command that you wrote in your email is the exact one that you used, then you should correct it by putting a | before rcalc as the output from dctimestep is being piped to rcalc through standard input.

 

This?..

$dctimestep results/photocells.vmx data/Clear.xml results/south.dmx skies/12_21_15.skv rcalc -e '$1=179*($1*0.265+$2*0.670+$3*0.065)' > results/illum_122115_clear.dat

should be ?. 

$dctimestep results/photocells.vmx data/Clear.xml results/south.dmx skies/12_21_15.skv | rcalc -e '$1=179*($1*0.265+$2*0.670+$3*0.065)' > results/illum_122115_clear.dat

Regards,

Sarith

From: Zhe Kong [mailto:kongzhewode at gmail.com] 
Sent: Thursday, October 13, 2016 5:43 PM
To: radiance-general at radiance-online.org
Subject: [Radiance-general] Question about dctimestep

 

Dear Radiance Users:

I am struggling with 3-phase method and run into an issue about dctimestep. 

At the last step of the tutorial (https://andymcneil.gitbooks.io/three-phase-method-tutorial/content/35_matrix_multiplication.html) to use dctimestep to calculate illuminance for three shading systems: 

$dctimestep results/photocells.vmx data/Clear.xml results/south.dmx skies/12_21_15.skv rcalc -e '$1=179*($1*0.265+$2*0.670+$3*0.065)' > results/illum_122115_clear.dat

At first I received the feedback below: 

Usage: dctimestep [-n nsteps][-o ospec][-i{f|d|h}][-o{f|d}] DCspec [skyf]

or: dctimestep [-n nsteps][-o ospec][-i{f|d|h}][-o{f|d}] Vspec Tbsdf Dmat.dat [skyf]

>From this post: http://radiance-online.org/pipermail/radiance-general/2013-October/009833.html  I think my dctimestep is not the newest one, so I download it from http://www.radiance-online.org/cgi-bin/viewcvs.cgi/ray/src/util/dctimestep.c?annotate=2.37

My question is how to install it appropriate. I saved the file as dctimestep and use $chmod a=r+w+x dctimestep, I got the errors as below: 

/Users/zhekong/Radiance/usr/local/radiance/bin/dctimestep: line 2: static: command not found

/Users/zhekong/Radiance/usr/local/radiance/bin/dctimestep: line 4: /Applications: is a directory

/Users/zhekong/Radiance/usr/local/radiance/bin/dctimestep: line 5: apply_overcast.bash: command not found

/Users/zhekong/Radiance/usr/local/radiance/bin/dctimestep: line 6: apply_overcast.bash: command not found

/Users/zhekong/Radiance/usr/local/radiance/bin/dctimestep: line 7: apply_overcast.bash: command not found

/Users/zhekong/Radiance/usr/local/radiance/bin/dctimestep: line 8: data/: is a directory

and so on. The list is a bit long to include all. I don't think I install it right. Could someone let me know how to replace dctimestep correctly, if this is the problem, or what is the solution to make this step work?

Thank you very much in advance. 

 

Zhe Kong

 

 

 

 

 

 

 

 

 

Zhe Kong

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161013/1157e843/attachment.html>

From kongzhewode at gmail.com  Fri Oct 14 14:52:36 2016
From: kongzhewode at gmail.com (Zhe Kong)
Date: Fri, 14 Oct 2016 16:52:36 -0500
Subject: [Radiance-general] Question about dctimestep
Message-ID: <CAEV5Nyfw-PtzB9_F_ebc1YVSqexwf=MYEVc_Sw_iQtGQ7QHebA@mail.gmail.com>

Hello Sarith:
Thank you for your reply. Yes, you are right. It's the '|' missing rather
than dctimestep version. Thank you for leading me to the right path.

Zhe

On Fri, Oct 14, 2016 at 2:00 PM, <
radiance-general-request at radiance-online.org> wrote:

> Send Radiance-general mailing list submissions to
>         radiance-general at radiance-online.org
>
> To subscribe or unsubscribe via the World Wide Web, visit
>         http://www.radiance-online.org/mailman/listinfo/radiance-general
> or, via email, send a message with subject or body 'help' to
>         radiance-general-request at radiance-online.org
>
> You can reach the person managing the list at
>         radiance-general-owner at radiance-online.org
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of Radiance-general digest..."
>
>
> Today's Topics:
>
>    1. Question about dctimestep (Zhe Kong)
>    2. Re: Question about dctimestep (Sarith Subramaniam)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Thu, 13 Oct 2016 16:43:10 -0500
> From: Zhe Kong <kongzhewode at gmail.com>
> To: radiance-general at radiance-online.org
> Subject: [Radiance-general] Question about dctimestep
> Message-ID:
>         <CAEV5Nyc8MvSCu7tMRdAr-13F2ijrMCbijbxZT42LqN7_VEnm9w@
> mail.gmail.com>
> Content-Type: text/plain; charset="utf-8"
>
> Dear Radiance Users:
> I am struggling with 3-phase method and run into an issue about dctimestep.
> At the last step of the tutorial (
> https://andymcneil.gitbooks.io/three-phase-method-
> tutorial/content/35_matrix_multiplication.html)
> to use dctimestep to calculate illuminance for three shading systems:
>
> $dctimestep results/photocells.vmx data/Clear.xml results/south.dmx
> skies/12_21_15.skv rcalc -e '$1=179*($1*0.265+$2*0.670+$3*0.065)' >
> results/illum_122115_clear.dat
>
> At first I received the feedback below:
>
> Usage: dctimestep [-n nsteps][-o ospec][-i{f|d|h}][-o{f|d}] DCspec [skyf]
>
> or: dctimestep [-n nsteps][-o ospec][-i{f|d|h}][-o{f|d}] Vspec Tbsdf
> Dmat.dat [skyf]
>
> >From this post:
> http://radiance-online.org/pipermail/radiance-general/
> 2013-October/009833.html
>  I think my dctimestep is not the newest one, so I download it from
> http://www.radiance-online.org/cgi-bin/viewcvs.cgi/ray/
> src/util/dctimestep.c?annotate=2.37
>
> My question is how to install it appropriate. I saved the file as
> dctimestep and use $chmod a=r+w+x dctimestep, I got the errors as below:
>
> /Users/zhekong/Radiance/usr/local/radiance/bin/dctimestep: line 2: static:
> command not found
>
> /Users/zhekong/Radiance/usr/local/radiance/bin/dctimestep: line 4:
> /Applications: is a directory
>
> /Users/zhekong/Radiance/usr/local/radiance/bin/dctimestep: line 5:
> apply_overcast.bash: command not found
>
> /Users/zhekong/Radiance/usr/local/radiance/bin/dctimestep: line 6:
> apply_overcast.bash: command not found
>
> /Users/zhekong/Radiance/usr/local/radiance/bin/dctimestep: line 7:
> apply_overcast.bash: command not found
>
> /Users/zhekong/Radiance/usr/local/radiance/bin/dctimestep: line 8: data/:
> is a directory
>
> and so on. The list is a bit long to include all. I don't think I install
> it right. Could someone let me know how to replace dctimestep correctly, if
> this is the problem, or what is the solution to make this step work?
>
> Thank you very much in advance.
>
>
> Zhe Kong
>
>
>
>
>
>
>
>
>
> Zhe Kong
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: <http://www.radiance-online.org/pipermail/radiance-
> general/attachments/20161013/8487cd21/attachment-0001.html>
>
> ------------------------------
>
> Message: 2
> Date: Thu, 13 Oct 2016 17:48:56 -0400
> From: "Sarith Subramaniam" <sarith at psu.edu>
> To: "'Radiance general discussion'"
>         <radiance-general at radiance-online.org>
> Subject: Re: [Radiance-general] Question about dctimestep
> Message-ID: <081801d2259b$9a6f26e0$cf4d74a0$@psu.edu>
> Content-Type: text/plain; charset="utf-8"
>
> Hi Zhe,
>
>
>
> If the command that you wrote in your email is the exact one that you
> used, then you should correct it by putting a | before rcalc as the output
> from dctimestep is being piped to rcalc through standard input.
>
>
>
> This?..
>
> $dctimestep results/photocells.vmx data/Clear.xml results/south.dmx
> skies/12_21_15.skv rcalc -e '$1=179*($1*0.265+$2*0.670+$3*0.065)' >
> results/illum_122115_clear.dat
>
> should be ?.
>
> $dctimestep results/photocells.vmx data/Clear.xml results/south.dmx
> skies/12_21_15.skv | rcalc -e '$1=179*($1*0.265+$2*0.670+$3*0.065)' >
> results/illum_122115_clear.dat
>
> Regards,
>
> Sarith
>
> From: Zhe Kong [mailto:kongzhewode at gmail.com]
> Sent: Thursday, October 13, 2016 5:43 PM
> To: radiance-general at radiance-online.org
> Subject: [Radiance-general] Question about dctimestep
>
>
>
> Dear Radiance Users:
>
> I am struggling with 3-phase method and run into an issue about dctimestep.
>
> At the last step of the tutorial (https://andymcneil.gitbooks.
> io/three-phase-method-tutorial/content/35_matrix_multiplication.html) to
> use dctimestep to calculate illuminance for three shading systems:
>
> $dctimestep results/photocells.vmx data/Clear.xml results/south.dmx
> skies/12_21_15.skv rcalc -e '$1=179*($1*0.265+$2*0.670+$3*0.065)' >
> results/illum_122115_clear.dat
>
> At first I received the feedback below:
>
> Usage: dctimestep [-n nsteps][-o ospec][-i{f|d|h}][-o{f|d}] DCspec [skyf]
>
> or: dctimestep [-n nsteps][-o ospec][-i{f|d|h}][-o{f|d}] Vspec Tbsdf
> Dmat.dat [skyf]
>
> >From this post: http://radiance-online.org/pipermail/radiance-general/
> 2013-October/009833.html  I think my dctimestep is not the newest one, so
> I download it from http://www.radiance-online.org/cgi-bin/viewcvs.cgi/ray/
> src/util/dctimestep.c?annotate=2.37
>
> My question is how to install it appropriate. I saved the file as
> dctimestep and use $chmod a=r+w+x dctimestep, I got the errors as below:
>
> /Users/zhekong/Radiance/usr/local/radiance/bin/dctimestep: line 2:
> static: command not found
>
> /Users/zhekong/Radiance/usr/local/radiance/bin/dctimestep: line 4:
> /Applications: is a directory
>
> /Users/zhekong/Radiance/usr/local/radiance/bin/dctimestep: line 5:
> apply_overcast.bash: command not found
>
> /Users/zhekong/Radiance/usr/local/radiance/bin/dctimestep: line 6:
> apply_overcast.bash: command not found
>
> /Users/zhekong/Radiance/usr/local/radiance/bin/dctimestep: line 7:
> apply_overcast.bash: command not found
>
> /Users/zhekong/Radiance/usr/local/radiance/bin/dctimestep: line 8: data/:
> is a directory
>
> and so on. The list is a bit long to include all. I don't think I install
> it right. Could someone let me know how to replace dctimestep correctly, if
> this is the problem, or what is the solution to make this step work?
>
> Thank you very much in advance.
>
>
>
> Zhe Kong
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
> Zhe Kong
>
>
>
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: <http://www.radiance-online.org/pipermail/radiance-
> general/attachments/20161013/1157e843/attachment-0001.html>
>
> ------------------------------
>
> Subject: Digest Footer
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
> ------------------------------
>
> End of Radiance-general Digest, Vol 152, Issue 9
> ************************************************
>



-- 
*Zhe Kong*
*PhD Student*
*University of Wisconsin - Milwaukee *
*School of Architecture and Urban Planning *
*2131 E. Hartford Ave, Milwaukee, WI 53211 *
*Office 327*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161014/b80616ae/attachment.html>

From neal at lewislighting.com  Fri Oct 21 13:32:26 2016
From: neal at lewislighting.com (neal at lewislighting.com)
Date: Fri, 21 Oct 2016 20:32:26 +0000
Subject: [Radiance-general] Daysim for Linux
Message-ID: <6412DA0088ED1A4E98A9FA4C75A51C18118F8E@P3PWEX2MB001.ex2.secureserver.net>

Hello All,

Does anyone have insight on where I might be able to find the source code for Daysim?  I need to put Daysim on a Linux workstation.

I cannot find source code for Daysim anywhere.  The Daysim website suggests it is bundled with the Windows executable, but all I get are .msi and .exe files for the Daysim and Daysim Legacy (respectively).

Many Thanks,

Neal

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161021/57d9d60a/attachment.html>

From paulina.sujanova at stuba.sk  Mon Oct 24 15:02:48 2016
From: paulina.sujanova at stuba.sk (=?UTF-8?B?UGF1bMOtbmEgxaB1amFub3bDoQ==?=)
Date: Tue, 25 Oct 2016 00:02:48 +0200
Subject: [Radiance-general] BSDFViewer - installation
Message-ID: <968d7032-fad4-c79d-e837-42fc34099a6e@stuba.sk>

Dear mailing list (most probably Andy McNeil),

sorry for the _yet another installation proble__m_:
I am not able to install the BSDFViewer (looked through all of the 
already given answers in the archives - without much progress).

All works well until:
/usr/bin/ld: badarg.o: relocation R_X86_64_32 against `.rodata.str1.1' 
can not be used when making a shared object; recompile with -fPIC
badarg.o: error adding symbols: Bad value
collect2: error: ld returned 1 exit status
In file included from libBSDF.h:2:0,
                  from libBSDF.cpp:13:
/usr/lib/jvm/java-8-openjdk-amd64/include/jni.h:45:20: fatal error: 
jni_md.h: No such file or directory
compilation terminated.
g++: error: libBSDF.o: No such file or directory
g++: error: libBSDF.so: No such file or directory
g++: fatal error: no input files
compilation terminated.
cp: cannot stat 'BSDFViewer/libBSDF.so': No such file or directory

I did install the /java development environment/, well but further, I am 
not able to move.

Thanks for any hints, and kind regards,

Paul?na

-- 
Paul?na ?ujanov?
PhD student
Department of Building Construction
Faculty of Civil Engineering
Slovak University of Technology in Bratislava

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161025/185ed746/attachment.html>

From xsujanova at stuba.sk  Tue Oct 25 04:06:07 2016
From: xsujanova at stuba.sk (Paulina Sujanova)
Date: Tue, 25 Oct 2016 13:06:07 +0200
Subject: [Radiance-general] BSDFViewer - installation/update
In-Reply-To: <968d7032-fad4-c79d-e837-42fc34099a6e@stuba.sk>
References: <968d7032-fad4-c79d-e837-42fc34099a6e@stuba.sk>
Message-ID: <web-63668272@stuba.sk>

Dear all,

in the meantime, I was able to get to just one error:
g++: error: libbsdf.so: No such file or directory
But I really am not anymore able to solve this. So please, please help.

Kind regards, 

Paul?na

On Tue, 25 Oct 2016 00:02:48 +0200
 Paul?na ?ujanov? <paulina.sujanova at stuba.sk> wrote:
>Dear mailing list (most probably Andy McNeil),
>
>sorry for the _yet another installation proble__m_:
>I am not able to install the BSDFViewer (looked through all of the already
>given answers in the archives - without much progress).
>
>All works well until:
>/usr/bin/ld: badarg.o: relocation R_X86_64_32 against `.rodata.str1.1' can not
>be used when making a shared object; recompile with -fPIC
>badarg.o: error adding symbols: Bad value
>collect2: error: ld returned 1 exit status
>In file included from libBSDF.h:2:0,
>                  from libBSDF.cpp:13:
>/usr/lib/jvm/java-8-openjdk-amd64/include/jni.h:45:20: fatal error: jni_md.h:
>No such file or directory
>compilation terminated.
>g++: error: libBSDF.o: No such file or directory
>g++: error: libBSDF.so: No such file or directory
>g++: fatal error: no input files
>compilation terminated.
>cp: cannot stat 'BSDFViewer/libBSDF.so': No such file or directory
>
>I did install the /java development environment/, well but further, I am not
>able to move.
>
>Thanks for any hints, and kind regards,
>
>Paul?na
>
>-- 
>Paul?na ?ujanov?
>PhD student
>Department of Building Construction
>Faculty of Civil Engineering
>Slovak University of Technology in Bratislava
>



From mcneil.andrew at gmail.com  Tue Oct 25 09:21:42 2016
From: mcneil.andrew at gmail.com (Andy McNeil)
Date: Tue, 25 Oct 2016 09:21:42 -0700
Subject: [Radiance-general] BSDFViewer - installation/update
In-Reply-To: <web-63668272@stuba.sk>
References: <968d7032-fad4-c79d-e837-42fc34099a6e@stuba.sk>
 <web-63668272@stuba.sk>
Message-ID: <CAEFJVk9aupf8_B9jJ6d8goK1X7DRmoKWNZnggzVngOcE9PQZjw@mail.gmail.com>

Hi Paulina,
First, libBSDF is only needed for tensor tree BSDFs. If you only need to
view klems BSDFs let me know and I can send you a version that doesn't
support tensortree and will save all this extra hassle.

Did you try adding the -fPIC flag to the g++ command for compiling the
library? I've added and removed this flag a few times. It seems that some
systems need it while other systems can't have it. I'm not a linux expert
so I'm not sure why the difference, or how to spot the difference.

Have you tried running as root?
sudo bash /install.sh
You'll might root permission to put the shared object in the /usr/lib
(though I wouldn't expect it to be necessary).

Can you check to see if /usr/lib even exists on your system? And that it
contains libBSDF.so?

Thanks,
Andy



On Tue, Oct 25, 2016 at 4:06 AM, Paulina Sujanova <xsujanova at stuba.sk>
wrote:

> Dear all,
>
> in the meantime, I was able to get to just one error:
> g++: error: libbsdf.so: No such file or directory
> But I really am not anymore able to solve this. So please, please help.
>
> Kind regards,
>
> Paul?na
>
> On Tue, 25 Oct 2016 00:02:48 +0200
>  Paul?na ?ujanov? <paulina.sujanova at stuba.sk> wrote:
> >Dear mailing list (most probably Andy McNeil),
> >
> >sorry for the _yet another installation proble__m_:
> >I am not able to install the BSDFViewer (looked through all of the already
> >given answers in the archives - without much progress).
> >
> >All works well until:
> >/usr/bin/ld: badarg.o: relocation R_X86_64_32 against `.rodata.str1.1'
> can not
> >be used when making a shared object; recompile with -fPIC
> >badarg.o: error adding symbols: Bad value
> >collect2: error: ld returned 1 exit status
> >In file included from libBSDF.h:2:0,
> >                  from libBSDF.cpp:13:
> >/usr/lib/jvm/java-8-openjdk-amd64/include/jni.h:45:20: fatal error:
> jni_md.h:
> >No such file or directory
> >compilation terminated.
> >g++: error: libBSDF.o: No such file or directory
> >g++: error: libBSDF.so: No such file or directory
> >g++: fatal error: no input files
> >compilation terminated.
> >cp: cannot stat 'BSDFViewer/libBSDF.so': No such file or directory
> >
> >I did install the /java development environment/, well but further, I am
> not
> >able to move.
> >
> >Thanks for any hints, and kind regards,
> >
> >Paul?na
> >
> >--
> >Paul?na ?ujanov?
> >PhD student
> >Department of Building Construction
> >Faculty of Civil Engineering
> >Slovak University of Technology in Bratislava
> >
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161025/430fdcf2/attachment.html>

From andre.kostro at gmail.com  Wed Oct 26 02:07:18 2016
From: andre.kostro at gmail.com (Andre K)
Date: Wed, 26 Oct 2016 11:07:18 +0200
Subject: [Radiance-general] BSDFViewer - installation/update
Message-ID: <CAB4o_ViybJfK7hj88rLrbzTf_WUUDHXhkpA+TAv8gjBycU=JCw@mail.gmail.com>

Hi,

i remember that i had problems with this in the past too. I got it working
in the end, but i cannot remember what was the key...  here is my modified
version of the install.sh file. Hope this can help.

While i m there, @ Andy, For the tensor tree visualization, is it normal
that you don't get the percent value for the outgoing patch when clicking
it (as you get for the Klems representation)

Best,
Andr?


cd BSDFViewer

make -f Rmakefile clean
make -f Rmakefile all

g++ -shared -fPIC -o libBSDF.so addobjnotify.o badarg.o biggerlib.o
bmalloc.o \
bmpfile.o bsdf.o bsdf_m.o bsdf_t.o byteswap.o caldefn.o calexpr.o calfunc.o
\
calprnt.o ccolor.o ccyrgb.o chanvalue.o clip.o color.o colrops.o dircode.o \
disk2square.o ealloc.o eputs.o error.o expandarg.o ezxml.o falsecolor.o \
fdate.o fgetline.o fgetval.o fgetword.o font.o fputword.o fropen.o fvect.o \
gethomedir.o getlibpath.o getpath.o header.o hilbert.o invmat4.o \
lamps.o linregr.o loadbsdf.o lookup.o mat4.o mgf_context.o mgf_object.o \
mgf_parser.o mgf_xf.o multisamp.o myhostname.o objset.o octree.o \
paths.o plocate.o portio.o process.o quit.o readfargs.o resolu.o rexpr.o \
savestr.o savqstr.o spec_rgb.o tcos.o tmap16bit.o tmapcolrs.o tmesh.o
tonemap.o \
unix_process.o urand.o urind.o wordfile.o words.o wputs.o xf.o zeroes.o

javac libBSDF.java

javah -o libBSDF.h libBSDF

JAVA_HOME=$(readlink -f /usr/bin/javac | sed "s:/bin/javac::")

g++ -shared -fPIC -I$JAVA_HOME/include \
    -o libBSDF.o -c libBSDF.cpp

g++ -shared  -I$JAVA_HOME/include \
    -o libBSDF.jnilib libBSDF.o libBSDF.so


On Tue, Oct 25, 2016 at 9:00 PM, <
radiance-general-request at radiance-online.org> wrote:

> Send Radiance-general mailing list submissions to
>         radiance-general at radiance-online.org
>
> To subscribe or unsubscribe via the World Wide Web, visit
>         http://www.radiance-online.org/mailman/listinfo/radiance-general
> or, via email, send a message with subject or body 'help' to
>         radiance-general-request at radiance-online.org
>
> You can reach the person managing the list at
>         radiance-general-owner at radiance-online.org
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of Radiance-general digest..."
>
>
> Today's Topics:
>
>    1. BSDFViewer - installation (Paul?na ?ujanov?)
>    2. Re: BSDFViewer - installation/update (Paulina Sujanova)
>    3. Re: BSDFViewer - installation/update (Andy McNeil)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Tue, 25 Oct 2016 00:02:48 +0200
> From: Paul?na ?ujanov? <paulina.sujanova at stuba.sk>
> To: radiance-general at radiance-online.org
> Subject: [Radiance-general] BSDFViewer - installation
> Message-ID: <968d7032-fad4-c79d-e837-42fc34099a6e at stuba.sk>
> Content-Type: text/plain; charset="utf-8"; Format="flowed"
>
> Dear mailing list (most probably Andy McNeil),
>
> sorry for the _yet another installation proble__m_:
> I am not able to install the BSDFViewer (looked through all of the
> already given answers in the archives - without much progress).
>
> All works well until:
> /usr/bin/ld: badarg.o: relocation R_X86_64_32 against `.rodata.str1.1'
> can not be used when making a shared object; recompile with -fPIC
> badarg.o: error adding symbols: Bad value
> collect2: error: ld returned 1 exit status
> In file included from libBSDF.h:2:0,
>                   from libBSDF.cpp:13:
> /usr/lib/jvm/java-8-openjdk-amd64/include/jni.h:45:20: fatal error:
> jni_md.h: No such file or directory
> compilation terminated.
> g++: error: libBSDF.o: No such file or directory
> g++: error: libBSDF.so: No such file or directory
> g++: fatal error: no input files
> compilation terminated.
> cp: cannot stat 'BSDFViewer/libBSDF.so': No such file or directory
>
> I did install the /java development environment/, well but further, I am
> not able to move.
>
> Thanks for any hints, and kind regards,
>
> Paul?na
>
> --
> Paul?na ?ujanov?
> PhD student
> Department of Building Construction
> Faculty of Civil Engineering
> Slovak University of Technology in Bratislava
>
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: <http://www.radiance-online.org/pipermail/radiance-
> general/attachments/20161025/185ed746/attachment-0001.html>
>
> ------------------------------
>
> Message: 2
> Date: Tue, 25 Oct 2016 13:06:07 +0200
> From: "Paulina Sujanova" <xsujanova at stuba.sk>
> To: <radiance-general at radiance-online.org>
> Subject: Re: [Radiance-general] BSDFViewer - installation/update
> Message-ID: <web-63668272 at stuba.sk>
> Content-Type: text/plain;charset=utf-8
>
> Dear all,
>
> in the meantime, I was able to get to just one error:
> g++: error: libbsdf.so: No such file or directory
> But I really am not anymore able to solve this. So please, please help.
>
> Kind regards,
>
> Paul?na
>
> On Tue, 25 Oct 2016 00:02:48 +0200
>  Paul?na ?ujanov? <paulina.sujanova at stuba.sk> wrote:
> >Dear mailing list (most probably Andy McNeil),
> >
> >sorry for the _yet another installation proble__m_:
> >I am not able to install the BSDFViewer (looked through all of the already
> >given answers in the archives - without much progress).
> >
> >All works well until:
> >/usr/bin/ld: badarg.o: relocation R_X86_64_32 against `.rodata.str1.1'
> can not
> >be used when making a shared object; recompile with -fPIC
> >badarg.o: error adding symbols: Bad value
> >collect2: error: ld returned 1 exit status
> >In file included from libBSDF.h:2:0,
> >                  from libBSDF.cpp:13:
> >/usr/lib/jvm/java-8-openjdk-amd64/include/jni.h:45:20: fatal error:
> jni_md.h:
> >No such file or directory
> >compilation terminated.
> >g++: error: libBSDF.o: No such file or directory
> >g++: error: libBSDF.so: No such file or directory
> >g++: fatal error: no input files
> >compilation terminated.
> >cp: cannot stat 'BSDFViewer/libBSDF.so': No such file or directory
> >
> >I did install the /java development environment/, well but further, I am
> not
> >able to move.
> >
> >Thanks for any hints, and kind regards,
> >
> >Paul?na
> >
> >--
> >Paul?na ?ujanov?
> >PhD student
> >Department of Building Construction
> >Faculty of Civil Engineering
> >Slovak University of Technology in Bratislava
> >
>
>
>
>
> ------------------------------
>
> Message: 3
> Date: Tue, 25 Oct 2016 09:21:42 -0700
> From: Andy McNeil <mcneil.andrew at gmail.com>
> To: Radiance general discussion <radiance-general at radiance-online.org>
> Subject: Re: [Radiance-general] BSDFViewer - installation/update
> Message-ID:
>         <CAEFJVk9aupf8_B9jJ6d8goK1X7DRmoKWNZnggzVngOc
> E9PQZjw at mail.gmail.com>
> Content-Type: text/plain; charset="utf-8"
>
> Hi Paulina,
> First, libBSDF is only needed for tensor tree BSDFs. If you only need to
> view klems BSDFs let me know and I can send you a version that doesn't
> support tensortree and will save all this extra hassle.
>
> Did you try adding the -fPIC flag to the g++ command for compiling the
> library? I've added and removed this flag a few times. It seems that some
> systems need it while other systems can't have it. I'm not a linux expert
> so I'm not sure why the difference, or how to spot the difference.
>
> Have you tried running as root?
> sudo bash /install.sh
> You'll might root permission to put the shared object in the /usr/lib
> (though I wouldn't expect it to be necessary).
>
> Can you check to see if /usr/lib even exists on your system? And that it
> contains libBSDF.so?
>
> Thanks,
> Andy
>
>
>
> On Tue, Oct 25, 2016 at 4:06 AM, Paulina Sujanova <xsujanova at stuba.sk>
> wrote:
>
> > Dear all,
> >
> > in the meantime, I was able to get to just one error:
> > g++: error: libbsdf.so: No such file or directory
> > But I really am not anymore able to solve this. So please, please help.
> >
> > Kind regards,
> >
> > Paul?na
> >
> > On Tue, 25 Oct 2016 00:02:48 +0200
> >  Paul?na ?ujanov? <paulina.sujanova at stuba.sk> wrote:
> > >Dear mailing list (most probably Andy McNeil),
> > >
> > >sorry for the _yet another installation proble__m_:
> > >I am not able to install the BSDFViewer (looked through all of the
> already
> > >given answers in the archives - without much progress).
> > >
> > >All works well until:
> > >/usr/bin/ld: badarg.o: relocation R_X86_64_32 against `.rodata.str1.1'
> > can not
> > >be used when making a shared object; recompile with -fPIC
> > >badarg.o: error adding symbols: Bad value
> > >collect2: error: ld returned 1 exit status
> > >In file included from libBSDF.h:2:0,
> > >                  from libBSDF.cpp:13:
> > >/usr/lib/jvm/java-8-openjdk-amd64/include/jni.h:45:20: fatal error:
> > jni_md.h:
> > >No such file or directory
> > >compilation terminated.
> > >g++: error: libBSDF.o: No such file or directory
> > >g++: error: libBSDF.so: No such file or directory
> > >g++: fatal error: no input files
> > >compilation terminated.
> > >cp: cannot stat 'BSDFViewer/libBSDF.so': No such file or directory
> > >
> > >I did install the /java development environment/, well but further, I am
> > not
> > >able to move.
> > >
> > >Thanks for any hints, and kind regards,
> > >
> > >Paul?na
> > >
> > >--
> > >Paul?na ?ujanov?
> > >PhD student
> > >Department of Building Construction
> > >Faculty of Civil Engineering
> > >Slovak University of Technology in Bratislava
> > >
> >
> >
> > _______________________________________________
> > Radiance-general mailing list
> > Radiance-general at radiance-online.org
> > http://www.radiance-online.org/mailman/listinfo/radiance-general
> >
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: <http://www.radiance-online.org/pipermail/radiance-
> general/attachments/20161025/430fdcf2/attachment-0001.html>
>
> ------------------------------
>
> Subject: Digest Footer
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
> ------------------------------
>
> End of Radiance-general Digest, Vol 152, Issue 12
> *************************************************
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161026/c8972ce3/attachment.html>

From mcneil.andrew at gmail.com  Wed Oct 26 18:05:44 2016
From: mcneil.andrew at gmail.com (Andy McNeil)
Date: Wed, 26 Oct 2016 18:05:44 -0700
Subject: [Radiance-general] BSDFViewer - installation/update
In-Reply-To: <CAB4o_ViybJfK7hj88rLrbzTf_WUUDHXhkpA+TAv8gjBycU=JCw@mail.gmail.com>
References: <CAB4o_ViybJfK7hj88rLrbzTf_WUUDHXhkpA+TAv8gjBycU=JCw@mail.gmail.com>
Message-ID: <CAEFJVk8O7e4S8C2TMTTUa1syxuNR2DwSqSosF+VYEeFSNuU6dg@mail.gmail.com>

>
> While i m there, @ Andy, For the tensor tree visualization, is it normal
> that you don't get the percent value for the outgoing patch when clicking
> it (as you get for the Klems representation)


Yes, this is normal. The falsecolor scale for tensor tree isn't percent of
incident light but instead the raw BSDF value. When the patches are all
different sizes you might have a large patch with relatively low intensity
that would have a large portion of the outgoing flux because of it's size.
Using raw BSDF value was the simplest way that I could come up with to
render the tensor tree BSDF. The raw BSDF value is kinda meaningless, so I
decided not to display anything.

Best,
Andy


On Wed, Oct 26, 2016 at 2:07 AM, Andre K <andre.kostro at gmail.com> wrote:

> Hi,
>
> i remember that i had problems with this in the past too. I got it working
> in the end, but i cannot remember what was the key...  here is my modified
> version of the install.sh file. Hope this can help.
>
> While i m there, @ Andy, For the tensor tree visualization, is it normal
> that you don't get the percent value for the outgoing patch when clicking
> it (as you get for the Klems representation)
>
> Best,
> Andr?
>
>
> cd BSDFViewer
>
> make -f Rmakefile clean
> make -f Rmakefile all
>
> g++ -shared -fPIC -o libBSDF.so addobjnotify.o badarg.o biggerlib.o
> bmalloc.o \
> bmpfile.o bsdf.o bsdf_m.o bsdf_t.o byteswap.o caldefn.o calexpr.o
> calfunc.o \
> calprnt.o ccolor.o ccyrgb.o chanvalue.o clip.o color.o colrops.o dircode.o
> \
> disk2square.o ealloc.o eputs.o error.o expandarg.o ezxml.o falsecolor.o \
> fdate.o fgetline.o fgetval.o fgetword.o font.o fputword.o fropen.o fvect.o
> \
> gethomedir.o getlibpath.o getpath.o header.o hilbert.o invmat4.o \
> lamps.o linregr.o loadbsdf.o lookup.o mat4.o mgf_context.o mgf_object.o \
> mgf_parser.o mgf_xf.o multisamp.o myhostname.o objset.o octree.o \
> paths.o plocate.o portio.o process.o quit.o readfargs.o resolu.o rexpr.o \
> savestr.o savqstr.o spec_rgb.o tcos.o tmap16bit.o tmapcolrs.o tmesh.o
> tonemap.o \
> unix_process.o urand.o urind.o wordfile.o words.o wputs.o xf.o zeroes.o
>
> javac libBSDF.java
>
> javah -o libBSDF.h libBSDF
>
> JAVA_HOME=$(readlink -f /usr/bin/javac | sed "s:/bin/javac::")
>
> g++ -shared -fPIC -I$JAVA_HOME/include \
>     -o libBSDF.o -c libBSDF.cpp
>
> g++ -shared  -I$JAVA_HOME/include \
>     -o libBSDF.jnilib libBSDF.o libBSDF.so
>
>
> On Tue, Oct 25, 2016 at 9:00 PM, <radiance-general-request@
> radiance-online.org> wrote:
>
>> Send Radiance-general mailing list submissions to
>>         radiance-general at radiance-online.org
>>
>> To subscribe or unsubscribe via the World Wide Web, visit
>>         http://www.radiance-online.org/mailman/listinfo/radiance-general
>> or, via email, send a message with subject or body 'help' to
>>         radiance-general-request at radiance-online.org
>>
>> You can reach the person managing the list at
>>         radiance-general-owner at radiance-online.org
>>
>> When replying, please edit your Subject line so it is more specific
>> than "Re: Contents of Radiance-general digest..."
>>
>>
>> Today's Topics:
>>
>>    1. BSDFViewer - installation (Paul?na ?ujanov?)
>>    2. Re: BSDFViewer - installation/update (Paulina Sujanova)
>>    3. Re: BSDFViewer - installation/update (Andy McNeil)
>>
>>
>> ----------------------------------------------------------------------
>>
>> Message: 1
>> Date: Tue, 25 Oct 2016 00:02:48 +0200
>> From: Paul?na ?ujanov? <paulina.sujanova at stuba.sk>
>> To: radiance-general at radiance-online.org
>> Subject: [Radiance-general] BSDFViewer - installation
>> Message-ID: <968d7032-fad4-c79d-e837-42fc34099a6e at stuba.sk>
>> Content-Type: text/plain; charset="utf-8"; Format="flowed"
>>
>> Dear mailing list (most probably Andy McNeil),
>>
>> sorry for the _yet another installation proble__m_:
>> I am not able to install the BSDFViewer (looked through all of the
>> already given answers in the archives - without much progress).
>>
>> All works well until:
>> /usr/bin/ld: badarg.o: relocation R_X86_64_32 against `.rodata.str1.1'
>> can not be used when making a shared object; recompile with -fPIC
>> badarg.o: error adding symbols: Bad value
>> collect2: error: ld returned 1 exit status
>> In file included from libBSDF.h:2:0,
>>                   from libBSDF.cpp:13:
>> /usr/lib/jvm/java-8-openjdk-amd64/include/jni.h:45:20: fatal error:
>> jni_md.h: No such file or directory
>> compilation terminated.
>> g++: error: libBSDF.o: No such file or directory
>> g++: error: libBSDF.so: No such file or directory
>> g++: fatal error: no input files
>> compilation terminated.
>> cp: cannot stat 'BSDFViewer/libBSDF.so': No such file or directory
>>
>> I did install the /java development environment/, well but further, I am
>> not able to move.
>>
>> Thanks for any hints, and kind regards,
>>
>> Paul?na
>>
>> --
>> Paul?na ?ujanov?
>> PhD student
>> Department of Building Construction
>> Faculty of Civil Engineering
>> Slovak University of Technology in Bratislava
>>
>> -------------- next part --------------
>> An HTML attachment was scrubbed...
>> URL: <http://www.radiance-online.org/pipermail/radiance-general/
>> attachments/20161025/185ed746/attachment-0001.html>
>>
>> ------------------------------
>>
>> Message: 2
>> Date: Tue, 25 Oct 2016 13:06:07 +0200
>> From: "Paulina Sujanova" <xsujanova at stuba.sk>
>> To: <radiance-general at radiance-online.org>
>> Subject: Re: [Radiance-general] BSDFViewer - installation/update
>> Message-ID: <web-63668272 at stuba.sk>
>> Content-Type: text/plain;charset=utf-8
>>
>> Dear all,
>>
>> in the meantime, I was able to get to just one error:
>> g++: error: libbsdf.so: No such file or directory
>> But I really am not anymore able to solve this. So please, please help.
>>
>> Kind regards,
>>
>> Paul?na
>>
>> On Tue, 25 Oct 2016 00:02:48 +0200
>>  Paul?na ?ujanov? <paulina.sujanova at stuba.sk> wrote:
>> >Dear mailing list (most probably Andy McNeil),
>> >
>> >sorry for the _yet another installation proble__m_:
>> >I am not able to install the BSDFViewer (looked through all of the
>> already
>> >given answers in the archives - without much progress).
>> >
>> >All works well until:
>> >/usr/bin/ld: badarg.o: relocation R_X86_64_32 against `.rodata.str1.1'
>> can not
>> >be used when making a shared object; recompile with -fPIC
>> >badarg.o: error adding symbols: Bad value
>> >collect2: error: ld returned 1 exit status
>> >In file included from libBSDF.h:2:0,
>> >                  from libBSDF.cpp:13:
>> >/usr/lib/jvm/java-8-openjdk-amd64/include/jni.h:45:20: fatal error:
>> jni_md.h:
>> >No such file or directory
>> >compilation terminated.
>> >g++: error: libBSDF.o: No such file or directory
>> >g++: error: libBSDF.so: No such file or directory
>> >g++: fatal error: no input files
>> >compilation terminated.
>> >cp: cannot stat 'BSDFViewer/libBSDF.so': No such file or directory
>> >
>> >I did install the /java development environment/, well but further, I am
>> not
>> >able to move.
>> >
>> >Thanks for any hints, and kind regards,
>> >
>> >Paul?na
>> >
>> >--
>> >Paul?na ?ujanov?
>> >PhD student
>> >Department of Building Construction
>> >Faculty of Civil Engineering
>> >Slovak University of Technology in Bratislava
>> >
>>
>>
>>
>>
>> ------------------------------
>>
>> Message: 3
>> Date: Tue, 25 Oct 2016 09:21:42 -0700
>> From: Andy McNeil <mcneil.andrew at gmail.com>
>> To: Radiance general discussion <radiance-general at radiance-online.org>
>> Subject: Re: [Radiance-general] BSDFViewer - installation/update
>> Message-ID:
>>         <CAEFJVk9aupf8_B9jJ6d8goK1X7DRmoKWNZnggzVngOcE9PQZjw at mail.
>> gmail.com>
>> Content-Type: text/plain; charset="utf-8"
>>
>> Hi Paulina,
>> First, libBSDF is only needed for tensor tree BSDFs. If you only need to
>> view klems BSDFs let me know and I can send you a version that doesn't
>> support tensortree and will save all this extra hassle.
>>
>> Did you try adding the -fPIC flag to the g++ command for compiling the
>> library? I've added and removed this flag a few times. It seems that some
>> systems need it while other systems can't have it. I'm not a linux expert
>> so I'm not sure why the difference, or how to spot the difference.
>>
>> Have you tried running as root?
>> sudo bash /install.sh
>> You'll might root permission to put the shared object in the /usr/lib
>> (though I wouldn't expect it to be necessary).
>>
>> Can you check to see if /usr/lib even exists on your system? And that it
>> contains libBSDF.so?
>>
>> Thanks,
>> Andy
>>
>>
>>
>> On Tue, Oct 25, 2016 at 4:06 AM, Paulina Sujanova <xsujanova at stuba.sk>
>> wrote:
>>
>> > Dear all,
>> >
>> > in the meantime, I was able to get to just one error:
>> > g++: error: libbsdf.so: No such file or directory
>> > But I really am not anymore able to solve this. So please, please help.
>> >
>> > Kind regards,
>> >
>> > Paul?na
>> >
>> > On Tue, 25 Oct 2016 00:02:48 +0200
>> >  Paul?na ?ujanov? <paulina.sujanova at stuba.sk> wrote:
>> > >Dear mailing list (most probably Andy McNeil),
>> > >
>> > >sorry for the _yet another installation proble__m_:
>> > >I am not able to install the BSDFViewer (looked through all of the
>> already
>> > >given answers in the archives - without much progress).
>> > >
>> > >All works well until:
>> > >/usr/bin/ld: badarg.o: relocation R_X86_64_32 against `.rodata.str1.1'
>> > can not
>> > >be used when making a shared object; recompile with -fPIC
>> > >badarg.o: error adding symbols: Bad value
>> > >collect2: error: ld returned 1 exit status
>> > >In file included from libBSDF.h:2:0,
>> > >                  from libBSDF.cpp:13:
>> > >/usr/lib/jvm/java-8-openjdk-amd64/include/jni.h:45:20: fatal error:
>> > jni_md.h:
>> > >No such file or directory
>> > >compilation terminated.
>> > >g++: error: libBSDF.o: No such file or directory
>> > >g++: error: libBSDF.so: No such file or directory
>> > >g++: fatal error: no input files
>> > >compilation terminated.
>> > >cp: cannot stat 'BSDFViewer/libBSDF.so': No such file or directory
>> > >
>> > >I did install the /java development environment/, well but further, I
>> am
>> > not
>> > >able to move.
>> > >
>> > >Thanks for any hints, and kind regards,
>> > >
>> > >Paul?na
>> > >
>> > >--
>> > >Paul?na ?ujanov?
>> > >PhD student
>> > >Department of Building Construction
>> > >Faculty of Civil Engineering
>> > >Slovak University of Technology in Bratislava
>> > >
>> >
>> >
>> > _______________________________________________
>> > Radiance-general mailing list
>> > Radiance-general at radiance-online.org
>> > http://www.radiance-online.org/mailman/listinfo/radiance-general
>> >
>> -------------- next part --------------
>> An HTML attachment was scrubbed...
>> URL: <http://www.radiance-online.org/pipermail/radiance-general/
>> attachments/20161025/430fdcf2/attachment-0001.html>
>>
>> ------------------------------
>>
>> Subject: Digest Footer
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
>> ------------------------------
>>
>> End of Radiance-general Digest, Vol 152, Issue 12
>> *************************************************
>>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161026/1b72f912/attachment-0001.html>

From paulina.sujanova at stuba.sk  Thu Oct 27 05:18:10 2016
From: paulina.sujanova at stuba.sk (=?UTF-8?B?UGF1bMOtbmEgxaB1amFub3bDoQ==?=)
Date: Thu, 27 Oct 2016 14:18:10 +0200
Subject: [Radiance-general] Radiance-general Digest, Vol 152, Issue 13
In-Reply-To: <mailman.81.1477530355.12160.radiance-general@radiance-online.org>
References: <mailman.81.1477530355.12160.radiance-general@radiance-online.org>
Message-ID: <0aba486a-724a-74bf-5955-c5bc8f52096d@stuba.sk>

Dear all, and most of all Andy McNeil,

I did everything as written - no changes so far. I would like to use the 
tensor tree preview, but however I am not sure whether it is worth the 
collective effort. So maybe, please, if you could send me the version 
only with klems, I would be thankful.

Otherwise to answer:

1. I did check the /usr/lib/liBSDF.so - its there.

2. I have added the -fPIC flags (that is also what Andre has written), 
but no changes.

3. I do run everything as root.

4. I have tried to install it on a different computer just to be sure 
(same system Ubuntu, java development environment installed, with and 
without -fPIC), but with the same outcome - g++: error: libBSDF.so: No 
such file or directory

Hmm, I do not know what more to do. So if you have any other ideas I 
would be thankful.
Thanks for all the help.


Kind regards,


Paul?na



On 27.10.2016 03:05, radiance-general-request at radiance-online.org wrote:
> Send Radiance-general mailing list submissions to
> 	radiance-general at radiance-online.org
>
> To subscribe or unsubscribe via the World Wide Web, visit
> 	http://www.radiance-online.org/mailman/listinfo/radiance-general
> or, via email, send a message with subject or body 'help' to
> 	radiance-general-request at radiance-online.org
>
> You can reach the person managing the list at
> 	radiance-general-owner at radiance-online.org
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of Radiance-general digest..."
>
>
> Today's Topics:
>
>     1. Re: BSDFViewer - installation/update (Andre K)
>     2. Re: BSDFViewer - installation/update (Andy McNeil)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Wed, 26 Oct 2016 11:07:18 +0200
> From: Andre K <andre.kostro at gmail.com>
> To: radiance-general at radiance-online.org
> Subject: Re: [Radiance-general] BSDFViewer - installation/update
> Message-ID:
> 	<CAB4o_ViybJfK7hj88rLrbzTf_WUUDHXhkpA+TAv8gjBycU=JCw at mail.gmail.com>
> Content-Type: text/plain; charset="utf-8"
>
> Hi,
>
> i remember that i had problems with this in the past too. I got it working
> in the end, but i cannot remember what was the key...  here is my modified
> version of the install.sh file. Hope this can help.
>
> While i m there, @ Andy, For the tensor tree visualization, is it normal
> that you don't get the percent value for the outgoing patch when clicking
> it (as you get for the Klems representation)
>
> Best,
> Andr?
>
>
> cd BSDFViewer
>
> make -f Rmakefile clean
> make -f Rmakefile all
>
> g++ -shared -fPIC -o libBSDF.so addobjnotify.o badarg.o biggerlib.o
> bmalloc.o \
> bmpfile.o bsdf.o bsdf_m.o bsdf_t.o byteswap.o caldefn.o calexpr.o calfunc.o
> \
> calprnt.o ccolor.o ccyrgb.o chanvalue.o clip.o color.o colrops.o dircode.o \
> disk2square.o ealloc.o eputs.o error.o expandarg.o ezxml.o falsecolor.o \
> fdate.o fgetline.o fgetval.o fgetword.o font.o fputword.o fropen.o fvect.o \
> gethomedir.o getlibpath.o getpath.o header.o hilbert.o invmat4.o \
> lamps.o linregr.o loadbsdf.o lookup.o mat4.o mgf_context.o mgf_object.o \
> mgf_parser.o mgf_xf.o multisamp.o myhostname.o objset.o octree.o \
> paths.o plocate.o portio.o process.o quit.o readfargs.o resolu.o rexpr.o \
> savestr.o savqstr.o spec_rgb.o tcos.o tmap16bit.o tmapcolrs.o tmesh.o
> tonemap.o \
> unix_process.o urand.o urind.o wordfile.o words.o wputs.o xf.o zeroes.o
>
> javac libBSDF.java
>
> javah -o libBSDF.h libBSDF
>
> JAVA_HOME=$(readlink -f /usr/bin/javac | sed "s:/bin/javac::")
>
> g++ -shared -fPIC -I$JAVA_HOME/include \
>      -o libBSDF.o -c libBSDF.cpp
>
> g++ -shared  -I$JAVA_HOME/include \
>      -o libBSDF.jnilib libBSDF.o libBSDF.so
>
>
> On Tue, Oct 25, 2016 at 9:00 PM, <
> radiance-general-request at radiance-online.org> wrote:
>
>> Send Radiance-general mailing list submissions to
>>          radiance-general at radiance-online.org
>>
>> To subscribe or unsubscribe via the World Wide Web, visit
>>          http://www.radiance-online.org/mailman/listinfo/radiance-general
>> or, via email, send a message with subject or body 'help' to
>>          radiance-general-request at radiance-online.org
>>
>> You can reach the person managing the list at
>>          radiance-general-owner at radiance-online.org
>>
>> When replying, please edit your Subject line so it is more specific
>> than "Re: Contents of Radiance-general digest..."
>>
>>
>> Today's Topics:
>>
>>     1. BSDFViewer - installation (Paul?na ?ujanov?)
>>     2. Re: BSDFViewer - installation/update (Paulina Sujanova)
>>     3. Re: BSDFViewer - installation/update (Andy McNeil)
>>
>>
>> ----------------------------------------------------------------------
>>
>> Message: 1
>> Date: Tue, 25 Oct 2016 00:02:48 +0200
>> From: Paul?na ?ujanov? <paulina.sujanova at stuba.sk>
>> To: radiance-general at radiance-online.org
>> Subject: [Radiance-general] BSDFViewer - installation
>> Message-ID: <968d7032-fad4-c79d-e837-42fc34099a6e at stuba.sk>
>> Content-Type: text/plain; charset="utf-8"; Format="flowed"
>>
>> Dear mailing list (most probably Andy McNeil),
>>
>> sorry for the _yet another installation proble__m_:
>> I am not able to install the BSDFViewer (looked through all of the
>> already given answers in the archives - without much progress).
>>
>> All works well until:
>> /usr/bin/ld: badarg.o: relocation R_X86_64_32 against `.rodata.str1.1'
>> can not be used when making a shared object; recompile with -fPIC
>> badarg.o: error adding symbols: Bad value
>> collect2: error: ld returned 1 exit status
>> In file included from libBSDF.h:2:0,
>>                    from libBSDF.cpp:13:
>> /usr/lib/jvm/java-8-openjdk-amd64/include/jni.h:45:20: fatal error:
>> jni_md.h: No such file or directory
>> compilation terminated.
>> g++: error: libBSDF.o: No such file or directory
>> g++: error: libBSDF.so: No such file or directory
>> g++: fatal error: no input files
>> compilation terminated.
>> cp: cannot stat 'BSDFViewer/libBSDF.so': No such file or directory
>>
>> I did install the /java development environment/, well but further, I am
>> not able to move.
>>
>> Thanks for any hints, and kind regards,
>>
>> Paul?na
>>
>> --
>> Paul?na ?ujanov?
>> PhD student
>> Department of Building Construction
>> Faculty of Civil Engineering
>> Slovak University of Technology in Bratislava
>>
>> -------------- next part --------------
>> An HTML attachment was scrubbed...
>> URL: <http://www.radiance-online.org/pipermail/radiance-
>> general/attachments/20161025/185ed746/attachment-0001.html>
>>
>> ------------------------------
>>
>> Message: 2
>> Date: Tue, 25 Oct 2016 13:06:07 +0200
>> From: "Paulina Sujanova" <xsujanova at stuba.sk>
>> To: <radiance-general at radiance-online.org>
>> Subject: Re: [Radiance-general] BSDFViewer - installation/update
>> Message-ID: <web-63668272 at stuba.sk>
>> Content-Type: text/plain;charset=utf-8
>>
>> Dear all,
>>
>> in the meantime, I was able to get to just one error:
>> g++: error: libbsdf.so: No such file or directory
>> But I really am not anymore able to solve this. So please, please help.
>>
>> Kind regards,
>>
>> Paul?na
>>
>> On Tue, 25 Oct 2016 00:02:48 +0200
>>   Paul?na ?ujanov? <paulina.sujanova at stuba.sk> wrote:
>>> Dear mailing list (most probably Andy McNeil),
>>>
>>> sorry for the _yet another installation proble__m_:
>>> I am not able to install the BSDFViewer (looked through all of the already
>>> given answers in the archives - without much progress).
>>>
>>> All works well until:
>>> /usr/bin/ld: badarg.o: relocation R_X86_64_32 against `.rodata.str1.1'
>> can not
>>> be used when making a shared object; recompile with -fPIC
>>> badarg.o: error adding symbols: Bad value
>>> collect2: error: ld returned 1 exit status
>>> In file included from libBSDF.h:2:0,
>>>                   from libBSDF.cpp:13:
>>> /usr/lib/jvm/java-8-openjdk-amd64/include/jni.h:45:20: fatal error:
>> jni_md.h:
>>> No such file or directory
>>> compilation terminated.
>>> g++: error: libBSDF.o: No such file or directory
>>> g++: error: libBSDF.so: No such file or directory
>>> g++: fatal error: no input files
>>> compilation terminated.
>>> cp: cannot stat 'BSDFViewer/libBSDF.so': No such file or directory
>>>
>>> I did install the /java development environment/, well but further, I am
>> not
>>> able to move.
>>>
>>> Thanks for any hints, and kind regards,
>>>
>>> Paul?na
>>>
>>> --
>>> Paul?na ?ujanov?
>>> PhD student
>>> Department of Building Construction
>>> Faculty of Civil Engineering
>>> Slovak University of Technology in Bratislava
>>>
>>
>>
>>
>> ------------------------------
>>
>> Message: 3
>> Date: Tue, 25 Oct 2016 09:21:42 -0700
>> From: Andy McNeil <mcneil.andrew at gmail.com>
>> To: Radiance general discussion <radiance-general at radiance-online.org>
>> Subject: Re: [Radiance-general] BSDFViewer - installation/update
>> Message-ID:
>>          <CAEFJVk9aupf8_B9jJ6d8goK1X7DRmoKWNZnggzVngOc
>> E9PQZjw at mail.gmail.com>
>> Content-Type: text/plain; charset="utf-8"
>>
>> Hi Paulina,
>> First, libBSDF is only needed for tensor tree BSDFs. If you only need to
>> view klems BSDFs let me know and I can send you a version that doesn't
>> support tensortree and will save all this extra hassle.
>>
>> Did you try adding the -fPIC flag to the g++ command for compiling the
>> library? I've added and removed this flag a few times. It seems that some
>> systems need it while other systems can't have it. I'm not a linux expert
>> so I'm not sure why the difference, or how to spot the difference.
>>
>> Have you tried running as root?
>> sudo bash /install.sh
>> You'll might root permission to put the shared object in the /usr/lib
>> (though I wouldn't expect it to be necessary).
>>
>> Can you check to see if /usr/lib even exists on your system? And that it
>> contains libBSDF.so?
>>
>> Thanks,
>> Andy
>>
>>
>>
>> On Tue, Oct 25, 2016 at 4:06 AM, Paulina Sujanova <xsujanova at stuba.sk>
>> wrote:
>>
>>> Dear all,
>>>
>>> in the meantime, I was able to get to just one error:
>>> g++: error: libbsdf.so: No such file or directory
>>> But I really am not anymore able to solve this. So please, please help.
>>>
>>> Kind regards,
>>>
>>> Paul?na
>>>
>>> On Tue, 25 Oct 2016 00:02:48 +0200
>>>   Paul?na ?ujanov? <paulina.sujanova at stuba.sk> wrote:
>>>> Dear mailing list (most probably Andy McNeil),
>>>>
>>>> sorry for the _yet another installation proble__m_:
>>>> I am not able to install the BSDFViewer (looked through all of the
>> already
>>>> given answers in the archives - without much progress).
>>>>
>>>> All works well until:
>>>> /usr/bin/ld: badarg.o: relocation R_X86_64_32 against `.rodata.str1.1'
>>> can not
>>>> be used when making a shared object; recompile with -fPIC
>>>> badarg.o: error adding symbols: Bad value
>>>> collect2: error: ld returned 1 exit status
>>>> In file included from libBSDF.h:2:0,
>>>>                   from libBSDF.cpp:13:
>>>> /usr/lib/jvm/java-8-openjdk-amd64/include/jni.h:45:20: fatal error:
>>> jni_md.h:
>>>> No such file or directory
>>>> compilation terminated.
>>>> g++: error: libBSDF.o: No such file or directory
>>>> g++: error: libBSDF.so: No such file or directory
>>>> g++: fatal error: no input files
>>>> compilation terminated.
>>>> cp: cannot stat 'BSDFViewer/libBSDF.so': No such file or directory
>>>>
>>>> I did install the /java development environment/, well but further, I am
>>> not
>>>> able to move.
>>>>
>>>> Thanks for any hints, and kind regards,
>>>>
>>>> Paul?na
>>>>
>>>> --
>>>> Paul?na ?ujanov?
>>>> PhD student
>>>> Department of Building Construction
>>>> Faculty of Civil Engineering
>>>> Slovak University of Technology in Bratislava
>>>>
>>>
>>> _______________________________________________
>>> Radiance-general mailing list
>>> Radiance-general at radiance-online.org
>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>>
>> -------------- next part --------------
>> An HTML attachment was scrubbed...
>> URL: <http://www.radiance-online.org/pipermail/radiance-
>> general/attachments/20161025/430fdcf2/attachment-0001.html>
>>
>> ------------------------------
>>
>> Subject: Digest Footer
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
>> ------------------------------
>>
>> End of Radiance-general Digest, Vol 152, Issue 12
>> *************************************************
>>
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161026/c8972ce3/attachment-0001.html>
>
> ------------------------------
>
> Message: 2
> Date: Wed, 26 Oct 2016 18:05:44 -0700
> From: Andy McNeil <mcneil.andrew at gmail.com>
> To: Radiance general discussion <radiance-general at radiance-online.org>
> Subject: Re: [Radiance-general] BSDFViewer - installation/update
> Message-ID:
> 	<CAEFJVk8O7e4S8C2TMTTUa1syxuNR2DwSqSosF+VYEeFSNuU6dg at mail.gmail.com>
> Content-Type: text/plain; charset="utf-8"
>
>> While i m there, @ Andy, For the tensor tree visualization, is it normal
>> that you don't get the percent value for the outgoing patch when clicking
>> it (as you get for the Klems representation)
>
> Yes, this is normal. The falsecolor scale for tensor tree isn't percent of
> incident light but instead the raw BSDF value. When the patches are all
> different sizes you might have a large patch with relatively low intensity
> that would have a large portion of the outgoing flux because of it's size.
> Using raw BSDF value was the simplest way that I could come up with to
> render the tensor tree BSDF. The raw BSDF value is kinda meaningless, so I
> decided not to display anything.
>
> Best,
> Andy
>
>
> On Wed, Oct 26, 2016 at 2:07 AM, Andre K <andre.kostro at gmail.com> wrote:
>
>> Hi,
>>
>> i remember that i had problems with this in the past too. I got it working
>> in the end, but i cannot remember what was the key...  here is my modified
>> version of the install.sh file. Hope this can help.
>>
>> While i m there, @ Andy, For the tensor tree visualization, is it normal
>> that you don't get the percent value for the outgoing patch when clicking
>> it (as you get for the Klems representation)
>>
>> Best,
>> Andr?
>>
>>
>> cd BSDFViewer
>>
>> make -f Rmakefile clean
>> make -f Rmakefile all
>>
>> g++ -shared -fPIC -o libBSDF.so addobjnotify.o badarg.o biggerlib.o
>> bmalloc.o \
>> bmpfile.o bsdf.o bsdf_m.o bsdf_t.o byteswap.o caldefn.o calexpr.o
>> calfunc.o \
>> calprnt.o ccolor.o ccyrgb.o chanvalue.o clip.o color.o colrops.o dircode.o
>> \
>> disk2square.o ealloc.o eputs.o error.o expandarg.o ezxml.o falsecolor.o \
>> fdate.o fgetline.o fgetval.o fgetword.o font.o fputword.o fropen.o fvect.o
>> \
>> gethomedir.o getlibpath.o getpath.o header.o hilbert.o invmat4.o \
>> lamps.o linregr.o loadbsdf.o lookup.o mat4.o mgf_context.o mgf_object.o \
>> mgf_parser.o mgf_xf.o multisamp.o myhostname.o objset.o octree.o \
>> paths.o plocate.o portio.o process.o quit.o readfargs.o resolu.o rexpr.o \
>> savestr.o savqstr.o spec_rgb.o tcos.o tmap16bit.o tmapcolrs.o tmesh.o
>> tonemap.o \
>> unix_process.o urand.o urind.o wordfile.o words.o wputs.o xf.o zeroes.o
>>
>> javac libBSDF.java
>>
>> javah -o libBSDF.h libBSDF
>>
>> JAVA_HOME=$(readlink -f /usr/bin/javac | sed "s:/bin/javac::")
>>
>> g++ -shared -fPIC -I$JAVA_HOME/include \
>>      -o libBSDF.o -c libBSDF.cpp
>>
>> g++ -shared  -I$JAVA_HOME/include \
>>      -o libBSDF.jnilib libBSDF.o libBSDF.so
>>
>>
>> On Tue, Oct 25, 2016 at 9:00 PM, <radiance-general-request@
>> radiance-online.org> wrote:
>>
>>> Send Radiance-general mailing list submissions to
>>>          radiance-general at radiance-online.org
>>>
>>> To subscribe or unsubscribe via the World Wide Web, visit
>>>          http://www.radiance-online.org/mailman/listinfo/radiance-general
>>> or, via email, send a message with subject or body 'help' to
>>>          radiance-general-request at radiance-online.org
>>>
>>> You can reach the person managing the list at
>>>          radiance-general-owner at radiance-online.org
>>>
>>> When replying, please edit your Subject line so it is more specific
>>> than "Re: Contents of Radiance-general digest..."
>>>
>>>
>>> Today's Topics:
>>>
>>>     1. BSDFViewer - installation (Paul?na ?ujanov?)
>>>     2. Re: BSDFViewer - installation/update (Paulina Sujanova)
>>>     3. Re: BSDFViewer - installation/update (Andy McNeil)
>>>
>>>
>>> ----------------------------------------------------------------------
>>>
>>> Message: 1
>>> Date: Tue, 25 Oct 2016 00:02:48 +0200
>>> From: Paul?na ?ujanov? <paulina.sujanova at stuba.sk>
>>> To: radiance-general at radiance-online.org
>>> Subject: [Radiance-general] BSDFViewer - installation
>>> Message-ID: <968d7032-fad4-c79d-e837-42fc34099a6e at stuba.sk>
>>> Content-Type: text/plain; charset="utf-8"; Format="flowed"
>>>
>>> Dear mailing list (most probably Andy McNeil),
>>>
>>> sorry for the _yet another installation proble__m_:
>>> I am not able to install the BSDFViewer (looked through all of the
>>> already given answers in the archives - without much progress).
>>>
>>> All works well until:
>>> /usr/bin/ld: badarg.o: relocation R_X86_64_32 against `.rodata.str1.1'
>>> can not be used when making a shared object; recompile with -fPIC
>>> badarg.o: error adding symbols: Bad value
>>> collect2: error: ld returned 1 exit status
>>> In file included from libBSDF.h:2:0,
>>>                    from libBSDF.cpp:13:
>>> /usr/lib/jvm/java-8-openjdk-amd64/include/jni.h:45:20: fatal error:
>>> jni_md.h: No such file or directory
>>> compilation terminated.
>>> g++: error: libBSDF.o: No such file or directory
>>> g++: error: libBSDF.so: No such file or directory
>>> g++: fatal error: no input files
>>> compilation terminated.
>>> cp: cannot stat 'BSDFViewer/libBSDF.so': No such file or directory
>>>
>>> I did install the /java development environment/, well but further, I am
>>> not able to move.
>>>
>>> Thanks for any hints, and kind regards,
>>>
>>> Paul?na
>>>
>>> --
>>> Paul?na ?ujanov?
>>> PhD student
>>> Department of Building Construction
>>> Faculty of Civil Engineering
>>> Slovak University of Technology in Bratislava
>>>
>>> -------------- next part --------------
>>> An HTML attachment was scrubbed...
>>> URL: <http://www.radiance-online.org/pipermail/radiance-general/
>>> attachments/20161025/185ed746/attachment-0001.html>
>>>
>>> ------------------------------
>>>
>>> Message: 2
>>> Date: Tue, 25 Oct 2016 13:06:07 +0200
>>> From: "Paulina Sujanova" <xsujanova at stuba.sk>
>>> To: <radiance-general at radiance-online.org>
>>> Subject: Re: [Radiance-general] BSDFViewer - installation/update
>>> Message-ID: <web-63668272 at stuba.sk>
>>> Content-Type: text/plain;charset=utf-8
>>>
>>> Dear all,
>>>
>>> in the meantime, I was able to get to just one error:
>>> g++: error: libbsdf.so: No such file or directory
>>> But I really am not anymore able to solve this. So please, please help.
>>>
>>> Kind regards,
>>>
>>> Paul?na
>>>
>>> On Tue, 25 Oct 2016 00:02:48 +0200
>>>   Paul?na ?ujanov? <paulina.sujanova at stuba.sk> wrote:
>>>> Dear mailing list (most probably Andy McNeil),
>>>>
>>>> sorry for the _yet another installation proble__m_:
>>>> I am not able to install the BSDFViewer (looked through all of the
>>> already
>>>> given answers in the archives - without much progress).
>>>>
>>>> All works well until:
>>>> /usr/bin/ld: badarg.o: relocation R_X86_64_32 against `.rodata.str1.1'
>>> can not
>>>> be used when making a shared object; recompile with -fPIC
>>>> badarg.o: error adding symbols: Bad value
>>>> collect2: error: ld returned 1 exit status
>>>> In file included from libBSDF.h:2:0,
>>>>                   from libBSDF.cpp:13:
>>>> /usr/lib/jvm/java-8-openjdk-amd64/include/jni.h:45:20: fatal error:
>>> jni_md.h:
>>>> No such file or directory
>>>> compilation terminated.
>>>> g++: error: libBSDF.o: No such file or directory
>>>> g++: error: libBSDF.so: No such file or directory
>>>> g++: fatal error: no input files
>>>> compilation terminated.
>>>> cp: cannot stat 'BSDFViewer/libBSDF.so': No such file or directory
>>>>
>>>> I did install the /java development environment/, well but further, I am
>>> not
>>>> able to move.
>>>>
>>>> Thanks for any hints, and kind regards,
>>>>
>>>> Paul?na
>>>>
>>>> --
>>>> Paul?na ?ujanov?
>>>> PhD student
>>>> Department of Building Construction
>>>> Faculty of Civil Engineering
>>>> Slovak University of Technology in Bratislava
>>>>
>>>
>>>
>>>
>>> ------------------------------
>>>
>>> Message: 3
>>> Date: Tue, 25 Oct 2016 09:21:42 -0700
>>> From: Andy McNeil <mcneil.andrew at gmail.com>
>>> To: Radiance general discussion <radiance-general at radiance-online.org>
>>> Subject: Re: [Radiance-general] BSDFViewer - installation/update
>>> Message-ID:
>>>          <CAEFJVk9aupf8_B9jJ6d8goK1X7DRmoKWNZnggzVngOcE9PQZjw at mail.
>>> gmail.com>
>>> Content-Type: text/plain; charset="utf-8"
>>>
>>> Hi Paulina,
>>> First, libBSDF is only needed for tensor tree BSDFs. If you only need to
>>> view klems BSDFs let me know and I can send you a version that doesn't
>>> support tensortree and will save all this extra hassle.
>>>
>>> Did you try adding the -fPIC flag to the g++ command for compiling the
>>> library? I've added and removed this flag a few times. It seems that some
>>> systems need it while other systems can't have it. I'm not a linux expert
>>> so I'm not sure why the difference, or how to spot the difference.
>>>
>>> Have you tried running as root?
>>> sudo bash /install.sh
>>> You'll might root permission to put the shared object in the /usr/lib
>>> (though I wouldn't expect it to be necessary).
>>>
>>> Can you check to see if /usr/lib even exists on your system? And that it
>>> contains libBSDF.so?
>>>
>>> Thanks,
>>> Andy
>>>
>>>
>>>
>>> On Tue, Oct 25, 2016 at 4:06 AM, Paulina Sujanova <xsujanova at stuba.sk>
>>> wrote:
>>>
>>>> Dear all,
>>>>
>>>> in the meantime, I was able to get to just one error:
>>>> g++: error: libbsdf.so: No such file or directory
>>>> But I really am not anymore able to solve this. So please, please help.
>>>>
>>>> Kind regards,
>>>>
>>>> Paul?na
>>>>
>>>> On Tue, 25 Oct 2016 00:02:48 +0200
>>>>   Paul?na ?ujanov? <paulina.sujanova at stuba.sk> wrote:
>>>>> Dear mailing list (most probably Andy McNeil),
>>>>>
>>>>> sorry for the _yet another installation proble__m_:
>>>>> I am not able to install the BSDFViewer (looked through all of the
>>> already
>>>>> given answers in the archives - without much progress).
>>>>>
>>>>> All works well until:
>>>>> /usr/bin/ld: badarg.o: relocation R_X86_64_32 against `.rodata.str1.1'
>>>> can not
>>>>> be used when making a shared object; recompile with -fPIC
>>>>> badarg.o: error adding symbols: Bad value
>>>>> collect2: error: ld returned 1 exit status
>>>>> In file included from libBSDF.h:2:0,
>>>>>                   from libBSDF.cpp:13:
>>>>> /usr/lib/jvm/java-8-openjdk-amd64/include/jni.h:45:20: fatal error:
>>>> jni_md.h:
>>>>> No such file or directory
>>>>> compilation terminated.
>>>>> g++: error: libBSDF.o: No such file or directory
>>>>> g++: error: libBSDF.so: No such file or directory
>>>>> g++: fatal error: no input files
>>>>> compilation terminated.
>>>>> cp: cannot stat 'BSDFViewer/libBSDF.so': No such file or directory
>>>>>
>>>>> I did install the /java development environment/, well but further, I
>>> am
>>>> not
>>>>> able to move.
>>>>>
>>>>> Thanks for any hints, and kind regards,
>>>>>
>>>>> Paul?na
>>>>>
>>>>> --
>>>>> Paul?na ?ujanov?
>>>>> PhD student
>>>>> Department of Building Construction
>>>>> Faculty of Civil Engineering
>>>>> Slovak University of Technology in Bratislava
>>>>>
>>>>
>>>> _______________________________________________
>>>> Radiance-general mailing list
>>>> Radiance-general at radiance-online.org
>>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>>>
>>> -------------- next part --------------
>>> An HTML attachment was scrubbed...
>>> URL: <http://www.radiance-online.org/pipermail/radiance-general/
>>> attachments/20161025/430fdcf2/attachment-0001.html>
>>>
>>> ------------------------------
>>>
>>> Subject: Digest Footer
>>>
>>> _______________________________________________
>>> Radiance-general mailing list
>>> Radiance-general at radiance-online.org
>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>>
>>>
>>> ------------------------------
>>>
>>> End of Radiance-general Digest, Vol 152, Issue 12
>>> *************************************************
>>>
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161026/1b72f912/attachment.html>
>
> ------------------------------
>
> Subject: Digest Footer
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
> ------------------------------
>
> End of Radiance-general Digest, Vol 152, Issue 13
> *************************************************

-- 
Paul?na ?ujanov?
PhD student
Department of Building Construction
Faculty of Civil Engineering
Slovak University of Technology in Bratislava



From achim.geissler at intergga.ch  Thu Oct 27 05:45:48 2016
From: achim.geissler at intergga.ch (Achim Geissler)
Date: Thu, 27 Oct 2016 14:45:48 +0200
Subject: [Radiance-general] Radiance-general Digest, Vol 152, Issue 13
In-Reply-To: <0aba486a-724a-74bf-5955-c5bc8f52096d@stuba.sk>
References: <mailman.81.1477530355.12160.radiance-general@radiance-online.org>
 <0aba486a-724a-74bf-5955-c5bc8f52096d@stuba.sk>
Message-ID: <001a01d23050$0c3df670$24b9e350$@intergga.ch>

Dear Paulina,

I did not follow all the answers, so maybe my thoughts are redundant:
a) did you always "make clean" after changing a compile switch? Usually it
is necessary to remove all old .o files to get a clean result
b) is the path "/usr/lib/" in your general search path for the linker or
included via -L in the link call?

FWIW.

Best
Achim

-----Urspr?ngliche Nachricht-----
Von: Paul?na ?ujanov? [mailto:paulina.sujanova at stuba.sk] 
Gesendet: Donnerstag, 27. Oktober 2016 14:18
An: radiance-general at radiance-online.org
Betreff: Re: [Radiance-general] Radiance-general Digest, Vol 152, Issue 13

Dear all, and most of all Andy McNeil,

I did everything as written - no changes so far. I would like to use the
tensor tree preview, but however I am not sure whether it is worth the
collective effort. So maybe, please, if you could send me the version only
with klems, I would be thankful.

Otherwise to answer:

1. I did check the /usr/lib/liBSDF.so - its there.

2. I have added the -fPIC flags (that is also what Andre has written), but
no changes.

3. I do run everything as root.

4. I have tried to install it on a different computer just to be sure (same
system Ubuntu, java development environment installed, with and without
-fPIC), but with the same outcome - g++: error: libBSDF.so: No such file or
directory

Hmm, I do not know what more to do. So if you have any other ideas I would
be thankful.
Thanks for all the help.


Kind regards,


Paul?na



On 27.10.2016 03:05, radiance-general-request at radiance-online.org wrote:
> Send Radiance-general mailing list submissions to
> 	radiance-general at radiance-online.org
>
> To subscribe or unsubscribe via the World Wide Web, visit
> 	http://www.radiance-online.org/mailman/listinfo/radiance-general
> or, via email, send a message with subject or body 'help' to
> 	radiance-general-request at radiance-online.org
>
> You can reach the person managing the list at
> 	radiance-general-owner at radiance-online.org
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of Radiance-general digest..."
>
>
> Today's Topics:
>
>     1. Re: BSDFViewer - installation/update (Andre K)
>     2. Re: BSDFViewer - installation/update (Andy McNeil)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Wed, 26 Oct 2016 11:07:18 +0200
> From: Andre K <andre.kostro at gmail.com>
> To: radiance-general at radiance-online.org
> Subject: Re: [Radiance-general] BSDFViewer - installation/update
> Message-ID:
> 	<CAB4o_ViybJfK7hj88rLrbzTf_WUUDHXhkpA+TAv8gjBycU=JCw at mail.gmail.com>
> Content-Type: text/plain; charset="utf-8"
>
> Hi,
>
> i remember that i had problems with this in the past too. I got it working
> in the end, but i cannot remember what was the key...  here is my modified
> version of the install.sh file. Hope this can help.
>
> While i m there, @ Andy, For the tensor tree visualization, is it normal
> that you don't get the percent value for the outgoing patch when clicking
> it (as you get for the Klems representation)
>
> Best,
> Andr?
>
>
> cd BSDFViewer
>
> make -f Rmakefile clean
> make -f Rmakefile all
>
> g++ -shared -fPIC -o libBSDF.so addobjnotify.o badarg.o biggerlib.o
> bmalloc.o \
> bmpfile.o bsdf.o bsdf_m.o bsdf_t.o byteswap.o caldefn.o calexpr.o
calfunc.o
> \
> calprnt.o ccolor.o ccyrgb.o chanvalue.o clip.o color.o colrops.o dircode.o
\
> disk2square.o ealloc.o eputs.o error.o expandarg.o ezxml.o falsecolor.o \
> fdate.o fgetline.o fgetval.o fgetword.o font.o fputword.o fropen.o fvect.o
\
> gethomedir.o getlibpath.o getpath.o header.o hilbert.o invmat4.o \
> lamps.o linregr.o loadbsdf.o lookup.o mat4.o mgf_context.o mgf_object.o \
> mgf_parser.o mgf_xf.o multisamp.o myhostname.o objset.o octree.o \
> paths.o plocate.o portio.o process.o quit.o readfargs.o resolu.o rexpr.o \
> savestr.o savqstr.o spec_rgb.o tcos.o tmap16bit.o tmapcolrs.o tmesh.o
> tonemap.o \
> unix_process.o urand.o urind.o wordfile.o words.o wputs.o xf.o zeroes.o
>
> javac libBSDF.java
>
> javah -o libBSDF.h libBSDF
>
> JAVA_HOME=$(readlink -f /usr/bin/javac | sed "s:/bin/javac::")
>
> g++ -shared -fPIC -I$JAVA_HOME/include \
>      -o libBSDF.o -c libBSDF.cpp
>
> g++ -shared  -I$JAVA_HOME/include \
>      -o libBSDF.jnilib libBSDF.o libBSDF.so
>
>
> On Tue, Oct 25, 2016 at 9:00 PM, <
> radiance-general-request at radiance-online.org> wrote:
>
>> Send Radiance-general mailing list submissions to
>>          radiance-general at radiance-online.org
>>
>> To subscribe or unsubscribe via the World Wide Web, visit
>>          http://www.radiance-online.org/mailman/listinfo/radiance-general
>> or, via email, send a message with subject or body 'help' to
>>          radiance-general-request at radiance-online.org
>>
>> You can reach the person managing the list at
>>          radiance-general-owner at radiance-online.org
>>
>> When replying, please edit your Subject line so it is more specific
>> than "Re: Contents of Radiance-general digest..."
>>
>>
>> Today's Topics:
>>
>>     1. BSDFViewer - installation (Paul?na ?ujanov?)
>>     2. Re: BSDFViewer - installation/update (Paulina Sujanova)
>>     3. Re: BSDFViewer - installation/update (Andy McNeil)
>>
>>
>> ----------------------------------------------------------------------
>>
>> Message: 1
>> Date: Tue, 25 Oct 2016 00:02:48 +0200
>> From: Paul?na ?ujanov? <paulina.sujanova at stuba.sk>
>> To: radiance-general at radiance-online.org
>> Subject: [Radiance-general] BSDFViewer - installation
>> Message-ID: <968d7032-fad4-c79d-e837-42fc34099a6e at stuba.sk>
>> Content-Type: text/plain; charset="utf-8"; Format="flowed"
>>
>> Dear mailing list (most probably Andy McNeil),
>>
>> sorry for the _yet another installation proble__m_:
>> I am not able to install the BSDFViewer (looked through all of the
>> already given answers in the archives - without much progress).
>>
>> All works well until:
>> /usr/bin/ld: badarg.o: relocation R_X86_64_32 against `.rodata.str1.1'
>> can not be used when making a shared object; recompile with -fPIC
>> badarg.o: error adding symbols: Bad value
>> collect2: error: ld returned 1 exit status
>> In file included from libBSDF.h:2:0,
>>                    from libBSDF.cpp:13:
>> /usr/lib/jvm/java-8-openjdk-amd64/include/jni.h:45:20: fatal error:
>> jni_md.h: No such file or directory
>> compilation terminated.
>> g++: error: libBSDF.o: No such file or directory
>> g++: error: libBSDF.so: No such file or directory
>> g++: fatal error: no input files
>> compilation terminated.
>> cp: cannot stat 'BSDFViewer/libBSDF.so': No such file or directory
>>
>> I did install the /java development environment/, well but further, I am
>> not able to move.
>>
>> Thanks for any hints, and kind regards,
>>
>> Paul?na
>>
>> --
>> Paul?na ?ujanov?
>> PhD student
>> Department of Building Construction
>> Faculty of Civil Engineering
>> Slovak University of Technology in Bratislava
>>
>> -------------- next part --------------
>> An HTML attachment was scrubbed...
>> URL: <http://www.radiance-online.org/pipermail/radiance-
>> general/attachments/20161025/185ed746/attachment-0001.html>
>>
>> ------------------------------
>>
>> Message: 2
>> Date: Tue, 25 Oct 2016 13:06:07 +0200
>> From: "Paulina Sujanova" <xsujanova at stuba.sk>
>> To: <radiance-general at radiance-online.org>
>> Subject: Re: [Radiance-general] BSDFViewer - installation/update
>> Message-ID: <web-63668272 at stuba.sk>
>> Content-Type: text/plain;charset=utf-8
>>
>> Dear all,
>>
>> in the meantime, I was able to get to just one error:
>> g++: error: libbsdf.so: No such file or directory
>> But I really am not anymore able to solve this. So please, please help.
>>
>> Kind regards,
>>
>> Paul?na
>>
>> On Tue, 25 Oct 2016 00:02:48 +0200
>>   Paul?na ?ujanov? <paulina.sujanova at stuba.sk> wrote:
>>> Dear mailing list (most probably Andy McNeil),
>>>
>>> sorry for the _yet another installation proble__m_:
>>> I am not able to install the BSDFViewer (looked through all of the
already
>>> given answers in the archives - without much progress).
>>>
>>> All works well until:
>>> /usr/bin/ld: badarg.o: relocation R_X86_64_32 against `.rodata.str1.1'
>> can not
>>> be used when making a shared object; recompile with -fPIC
>>> badarg.o: error adding symbols: Bad value
>>> collect2: error: ld returned 1 exit status
>>> In file included from libBSDF.h:2:0,
>>>                   from libBSDF.cpp:13:
>>> /usr/lib/jvm/java-8-openjdk-amd64/include/jni.h:45:20: fatal error:
>> jni_md.h:
>>> No such file or directory
>>> compilation terminated.
>>> g++: error: libBSDF.o: No such file or directory
>>> g++: error: libBSDF.so: No such file or directory
>>> g++: fatal error: no input files
>>> compilation terminated.
>>> cp: cannot stat 'BSDFViewer/libBSDF.so': No such file or directory
>>>
>>> I did install the /java development environment/, well but further, I am
>> not
>>> able to move.
>>>
>>> Thanks for any hints, and kind regards,
>>>
>>> Paul?na
>>>
>>> --
>>> Paul?na ?ujanov?
>>> PhD student
>>> Department of Building Construction
>>> Faculty of Civil Engineering
>>> Slovak University of Technology in Bratislava
>>>
>>
>>
>>
>> ------------------------------
>>
>> Message: 3
>> Date: Tue, 25 Oct 2016 09:21:42 -0700
>> From: Andy McNeil <mcneil.andrew at gmail.com>
>> To: Radiance general discussion <radiance-general at radiance-online.org>
>> Subject: Re: [Radiance-general] BSDFViewer - installation/update
>> Message-ID:
>>          <CAEFJVk9aupf8_B9jJ6d8goK1X7DRmoKWNZnggzVngOc
>> E9PQZjw at mail.gmail.com>
>> Content-Type: text/plain; charset="utf-8"
>>
>> Hi Paulina,
>> First, libBSDF is only needed for tensor tree BSDFs. If you only need to
>> view klems BSDFs let me know and I can send you a version that doesn't
>> support tensortree and will save all this extra hassle.
>>
>> Did you try adding the -fPIC flag to the g++ command for compiling the
>> library? I've added and removed this flag a few times. It seems that some
>> systems need it while other systems can't have it. I'm not a linux expert
>> so I'm not sure why the difference, or how to spot the difference.
>>
>> Have you tried running as root?
>> sudo bash /install.sh
>> You'll might root permission to put the shared object in the /usr/lib
>> (though I wouldn't expect it to be necessary).
>>
>> Can you check to see if /usr/lib even exists on your system? And that it
>> contains libBSDF.so?
>>
>> Thanks,
>> Andy
>>
>>
>>
>> On Tue, Oct 25, 2016 at 4:06 AM, Paulina Sujanova <xsujanova at stuba.sk>
>> wrote:
>>
>>> Dear all,
>>>
>>> in the meantime, I was able to get to just one error:
>>> g++: error: libbsdf.so: No such file or directory
>>> But I really am not anymore able to solve this. So please, please help.
>>>
>>> Kind regards,
>>>
>>> Paul?na
>>>
>>> On Tue, 25 Oct 2016 00:02:48 +0200
>>>   Paul?na ?ujanov? <paulina.sujanova at stuba.sk> wrote:
>>>> Dear mailing list (most probably Andy McNeil),
>>>>
>>>> sorry for the _yet another installation proble__m_:
>>>> I am not able to install the BSDFViewer (looked through all of the
>> already
>>>> given answers in the archives - without much progress).
>>>>
>>>> All works well until:
>>>> /usr/bin/ld: badarg.o: relocation R_X86_64_32 against `.rodata.str1.1'
>>> can not
>>>> be used when making a shared object; recompile with -fPIC
>>>> badarg.o: error adding symbols: Bad value
>>>> collect2: error: ld returned 1 exit status
>>>> In file included from libBSDF.h:2:0,
>>>>                   from libBSDF.cpp:13:
>>>> /usr/lib/jvm/java-8-openjdk-amd64/include/jni.h:45:20: fatal error:
>>> jni_md.h:
>>>> No such file or directory
>>>> compilation terminated.
>>>> g++: error: libBSDF.o: No such file or directory
>>>> g++: error: libBSDF.so: No such file or directory
>>>> g++: fatal error: no input files
>>>> compilation terminated.
>>>> cp: cannot stat 'BSDFViewer/libBSDF.so': No such file or directory
>>>>
>>>> I did install the /java development environment/, well but further, I
am
>>> not
>>>> able to move.
>>>>
>>>> Thanks for any hints, and kind regards,
>>>>
>>>> Paul?na
>>>>
>>>> --
>>>> Paul?na ?ujanov?
>>>> PhD student
>>>> Department of Building Construction
>>>> Faculty of Civil Engineering
>>>> Slovak University of Technology in Bratislava
>>>>
>>>
>>> _______________________________________________
>>> Radiance-general mailing list
>>> Radiance-general at radiance-online.org
>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>>
>> -------------- next part --------------
>> An HTML attachment was scrubbed...
>> URL: <http://www.radiance-online.org/pipermail/radiance-
>> general/attachments/20161025/430fdcf2/attachment-0001.html>
>>
>> ------------------------------
>>
>> Subject: Digest Footer
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
>> ------------------------------
>>
>> End of Radiance-general Digest, Vol 152, Issue 12
>> *************************************************
>>
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL:
<http://www.radiance-online.org/pipermail/radiance-general/attachments/20161
026/c8972ce3/attachment-0001.html>
>
> ------------------------------
>
> Message: 2
> Date: Wed, 26 Oct 2016 18:05:44 -0700
> From: Andy McNeil <mcneil.andrew at gmail.com>
> To: Radiance general discussion <radiance-general at radiance-online.org>
> Subject: Re: [Radiance-general] BSDFViewer - installation/update
> Message-ID:
> 	<CAEFJVk8O7e4S8C2TMTTUa1syxuNR2DwSqSosF+VYEeFSNuU6dg at mail.gmail.com>
> Content-Type: text/plain; charset="utf-8"
>
>> While i m there, @ Andy, For the tensor tree visualization, is it normal
>> that you don't get the percent value for the outgoing patch when clicking
>> it (as you get for the Klems representation)
>
> Yes, this is normal. The falsecolor scale for tensor tree isn't percent of
> incident light but instead the raw BSDF value. When the patches are all
> different sizes you might have a large patch with relatively low intensity
> that would have a large portion of the outgoing flux because of it's size.
> Using raw BSDF value was the simplest way that I could come up with to
> render the tensor tree BSDF. The raw BSDF value is kinda meaningless, so I
> decided not to display anything.
>
> Best,
> Andy
>
>
> On Wed, Oct 26, 2016 at 2:07 AM, Andre K <andre.kostro at gmail.com> wrote:
>
>> Hi,
>>
>> i remember that i had problems with this in the past too. I got it
working
>> in the end, but i cannot remember what was the key...  here is my
modified
>> version of the install.sh file. Hope this can help.
>>
>> While i m there, @ Andy, For the tensor tree visualization, is it normal
>> that you don't get the percent value for the outgoing patch when clicking
>> it (as you get for the Klems representation)
>>
>> Best,
>> Andr?
>>
>>
>> cd BSDFViewer
>>
>> make -f Rmakefile clean
>> make -f Rmakefile all
>>
>> g++ -shared -fPIC -o libBSDF.so addobjnotify.o badarg.o biggerlib.o
>> bmalloc.o \
>> bmpfile.o bsdf.o bsdf_m.o bsdf_t.o byteswap.o caldefn.o calexpr.o
>> calfunc.o \
>> calprnt.o ccolor.o ccyrgb.o chanvalue.o clip.o color.o colrops.o
dircode.o
>> \
>> disk2square.o ealloc.o eputs.o error.o expandarg.o ezxml.o falsecolor.o \
>> fdate.o fgetline.o fgetval.o fgetword.o font.o fputword.o fropen.o
fvect.o
>> \
>> gethomedir.o getlibpath.o getpath.o header.o hilbert.o invmat4.o \
>> lamps.o linregr.o loadbsdf.o lookup.o mat4.o mgf_context.o mgf_object.o \
>> mgf_parser.o mgf_xf.o multisamp.o myhostname.o objset.o octree.o \
>> paths.o plocate.o portio.o process.o quit.o readfargs.o resolu.o rexpr.o
\
>> savestr.o savqstr.o spec_rgb.o tcos.o tmap16bit.o tmapcolrs.o tmesh.o
>> tonemap.o \
>> unix_process.o urand.o urind.o wordfile.o words.o wputs.o xf.o zeroes.o
>>
>> javac libBSDF.java
>>
>> javah -o libBSDF.h libBSDF
>>
>> JAVA_HOME=$(readlink -f /usr/bin/javac | sed "s:/bin/javac::")
>>
>> g++ -shared -fPIC -I$JAVA_HOME/include \
>>      -o libBSDF.o -c libBSDF.cpp
>>
>> g++ -shared  -I$JAVA_HOME/include \
>>      -o libBSDF.jnilib libBSDF.o libBSDF.so
>>
>>
>> On Tue, Oct 25, 2016 at 9:00 PM, <radiance-general-request@
>> radiance-online.org> wrote:
>>
>>> Send Radiance-general mailing list submissions to
>>>          radiance-general at radiance-online.org
>>>
>>> To subscribe or unsubscribe via the World Wide Web, visit
>>>
http://www.radiance-online.org/mailman/listinfo/radiance-general
>>> or, via email, send a message with subject or body 'help' to
>>>          radiance-general-request at radiance-online.org
>>>
>>> You can reach the person managing the list at
>>>          radiance-general-owner at radiance-online.org
>>>
>>> When replying, please edit your Subject line so it is more specific
>>> than "Re: Contents of Radiance-general digest..."
>>>
>>>
>>> Today's Topics:
>>>
>>>     1. BSDFViewer - installation (Paul?na ?ujanov?)
>>>     2. Re: BSDFViewer - installation/update (Paulina Sujanova)
>>>     3. Re: BSDFViewer - installation/update (Andy McNeil)
>>>
>>>
>>> ----------------------------------------------------------------------
>>>
>>> Message: 1
>>> Date: Tue, 25 Oct 2016 00:02:48 +0200
>>> From: Paul?na ?ujanov? <paulina.sujanova at stuba.sk>
>>> To: radiance-general at radiance-online.org
>>> Subject: [Radiance-general] BSDFViewer - installation
>>> Message-ID: <968d7032-fad4-c79d-e837-42fc34099a6e at stuba.sk>
>>> Content-Type: text/plain; charset="utf-8"; Format="flowed"
>>>
>>> Dear mailing list (most probably Andy McNeil),
>>>
>>> sorry for the _yet another installation proble__m_:
>>> I am not able to install the BSDFViewer (looked through all of the
>>> already given answers in the archives - without much progress).
>>>
>>> All works well until:
>>> /usr/bin/ld: badarg.o: relocation R_X86_64_32 against `.rodata.str1.1'
>>> can not be used when making a shared object; recompile with -fPIC
>>> badarg.o: error adding symbols: Bad value
>>> collect2: error: ld returned 1 exit status
>>> In file included from libBSDF.h:2:0,
>>>                    from libBSDF.cpp:13:
>>> /usr/lib/jvm/java-8-openjdk-amd64/include/jni.h:45:20: fatal error:
>>> jni_md.h: No such file or directory
>>> compilation terminated.
>>> g++: error: libBSDF.o: No such file or directory
>>> g++: error: libBSDF.so: No such file or directory
>>> g++: fatal error: no input files
>>> compilation terminated.
>>> cp: cannot stat 'BSDFViewer/libBSDF.so': No such file or directory
>>>
>>> I did install the /java development environment/, well but further, I am
>>> not able to move.
>>>
>>> Thanks for any hints, and kind regards,
>>>
>>> Paul?na
>>>
>>> --
>>> Paul?na ?ujanov?
>>> PhD student
>>> Department of Building Construction
>>> Faculty of Civil Engineering
>>> Slovak University of Technology in Bratislava
>>>
>>> -------------- next part --------------
>>> An HTML attachment was scrubbed...
>>> URL: <http://www.radiance-online.org/pipermail/radiance-general/
>>> attachments/20161025/185ed746/attachment-0001.html>
>>>
>>> ------------------------------
>>>
>>> Message: 2
>>> Date: Tue, 25 Oct 2016 13:06:07 +0200
>>> From: "Paulina Sujanova" <xsujanova at stuba.sk>
>>> To: <radiance-general at radiance-online.org>
>>> Subject: Re: [Radiance-general] BSDFViewer - installation/update
>>> Message-ID: <web-63668272 at stuba.sk>
>>> Content-Type: text/plain;charset=utf-8
>>>
>>> Dear all,
>>>
>>> in the meantime, I was able to get to just one error:
>>> g++: error: libbsdf.so: No such file or directory
>>> But I really am not anymore able to solve this. So please, please help.
>>>
>>> Kind regards,
>>>
>>> Paul?na
>>>
>>> On Tue, 25 Oct 2016 00:02:48 +0200
>>>   Paul?na ?ujanov? <paulina.sujanova at stuba.sk> wrote:
>>>> Dear mailing list (most probably Andy McNeil),
>>>>
>>>> sorry for the _yet another installation proble__m_:
>>>> I am not able to install the BSDFViewer (looked through all of the
>>> already
>>>> given answers in the archives - without much progress).
>>>>
>>>> All works well until:
>>>> /usr/bin/ld: badarg.o: relocation R_X86_64_32 against `.rodata.str1.1'
>>> can not
>>>> be used when making a shared object; recompile with -fPIC
>>>> badarg.o: error adding symbols: Bad value
>>>> collect2: error: ld returned 1 exit status
>>>> In file included from libBSDF.h:2:0,
>>>>                   from libBSDF.cpp:13:
>>>> /usr/lib/jvm/java-8-openjdk-amd64/include/jni.h:45:20: fatal error:
>>> jni_md.h:
>>>> No such file or directory
>>>> compilation terminated.
>>>> g++: error: libBSDF.o: No such file or directory
>>>> g++: error: libBSDF.so: No such file or directory
>>>> g++: fatal error: no input files
>>>> compilation terminated.
>>>> cp: cannot stat 'BSDFViewer/libBSDF.so': No such file or directory
>>>>
>>>> I did install the /java development environment/, well but further, I
am
>>> not
>>>> able to move.
>>>>
>>>> Thanks for any hints, and kind regards,
>>>>
>>>> Paul?na
>>>>
>>>> --
>>>> Paul?na ?ujanov?
>>>> PhD student
>>>> Department of Building Construction
>>>> Faculty of Civil Engineering
>>>> Slovak University of Technology in Bratislava
>>>>
>>>
>>>
>>>
>>> ------------------------------
>>>
>>> Message: 3
>>> Date: Tue, 25 Oct 2016 09:21:42 -0700
>>> From: Andy McNeil <mcneil.andrew at gmail.com>
>>> To: Radiance general discussion <radiance-general at radiance-online.org>
>>> Subject: Re: [Radiance-general] BSDFViewer - installation/update
>>> Message-ID:
>>>          <CAEFJVk9aupf8_B9jJ6d8goK1X7DRmoKWNZnggzVngOcE9PQZjw at mail.
>>> gmail.com>
>>> Content-Type: text/plain; charset="utf-8"
>>>
>>> Hi Paulina,
>>> First, libBSDF is only needed for tensor tree BSDFs. If you only need to
>>> view klems BSDFs let me know and I can send you a version that doesn't
>>> support tensortree and will save all this extra hassle.
>>>
>>> Did you try adding the -fPIC flag to the g++ command for compiling the
>>> library? I've added and removed this flag a few times. It seems that
some
>>> systems need it while other systems can't have it. I'm not a linux
expert
>>> so I'm not sure why the difference, or how to spot the difference.
>>>
>>> Have you tried running as root?
>>> sudo bash /install.sh
>>> You'll might root permission to put the shared object in the /usr/lib
>>> (though I wouldn't expect it to be necessary).
>>>
>>> Can you check to see if /usr/lib even exists on your system? And that it
>>> contains libBSDF.so?
>>>
>>> Thanks,
>>> Andy
>>>
>>>
>>>
>>> On Tue, Oct 25, 2016 at 4:06 AM, Paulina Sujanova <xsujanova at stuba.sk>
>>> wrote:
>>>
>>>> Dear all,
>>>>
>>>> in the meantime, I was able to get to just one error:
>>>> g++: error: libbsdf.so: No such file or directory
>>>> But I really am not anymore able to solve this. So please, please help.
>>>>
>>>> Kind regards,
>>>>
>>>> Paul?na
>>>>
>>>> On Tue, 25 Oct 2016 00:02:48 +0200
>>>>   Paul?na ?ujanov? <paulina.sujanova at stuba.sk> wrote:
>>>>> Dear mailing list (most probably Andy McNeil),
>>>>>
>>>>> sorry for the _yet another installation proble__m_:
>>>>> I am not able to install the BSDFViewer (looked through all of the
>>> already
>>>>> given answers in the archives - without much progress).
>>>>>
>>>>> All works well until:
>>>>> /usr/bin/ld: badarg.o: relocation R_X86_64_32 against `.rodata.str1.1'
>>>> can not
>>>>> be used when making a shared object; recompile with -fPIC
>>>>> badarg.o: error adding symbols: Bad value
>>>>> collect2: error: ld returned 1 exit status
>>>>> In file included from libBSDF.h:2:0,
>>>>>                   from libBSDF.cpp:13:
>>>>> /usr/lib/jvm/java-8-openjdk-amd64/include/jni.h:45:20: fatal error:
>>>> jni_md.h:
>>>>> No such file or directory
>>>>> compilation terminated.
>>>>> g++: error: libBSDF.o: No such file or directory
>>>>> g++: error: libBSDF.so: No such file or directory
>>>>> g++: fatal error: no input files
>>>>> compilation terminated.
>>>>> cp: cannot stat 'BSDFViewer/libBSDF.so': No such file or directory
>>>>>
>>>>> I did install the /java development environment/, well but further, I
>>> am
>>>> not
>>>>> able to move.
>>>>>
>>>>> Thanks for any hints, and kind regards,
>>>>>
>>>>> Paul?na
>>>>>
>>>>> --
>>>>> Paul?na ?ujanov?
>>>>> PhD student
>>>>> Department of Building Construction
>>>>> Faculty of Civil Engineering
>>>>> Slovak University of Technology in Bratislava
>>>>>
>>>>
>>>> _______________________________________________
>>>> Radiance-general mailing list
>>>> Radiance-general at radiance-online.org
>>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>>>
>>> -------------- next part --------------
>>> An HTML attachment was scrubbed...
>>> URL: <http://www.radiance-online.org/pipermail/radiance-general/
>>> attachments/20161025/430fdcf2/attachment-0001.html>
>>>
>>> ------------------------------
>>>
>>> Subject: Digest Footer
>>>
>>> _______________________________________________
>>> Radiance-general mailing list
>>> Radiance-general at radiance-online.org
>>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>>
>>>
>>> ------------------------------
>>>
>>> End of Radiance-general Digest, Vol 152, Issue 12
>>> *************************************************
>>>
>>
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> http://www.radiance-online.org/mailman/listinfo/radiance-general
>>
>>
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL:
<http://www.radiance-online.org/pipermail/radiance-general/attachments/20161
026/1b72f912/attachment.html>
>
> ------------------------------
>
> Subject: Digest Footer
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
> ------------------------------
>
> End of Radiance-general Digest, Vol 152, Issue 13
> *************************************************

-- 
Paul?na ?ujanov?
PhD student
Department of Building Construction
Faculty of Civil Engineering
Slovak University of Technology in Bratislava


_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general



From Christopher.Rush at arup.com  Thu Oct 27 13:46:19 2016
From: Christopher.Rush at arup.com (Christopher Rush)
Date: Thu, 27 Oct 2016 20:46:19 +0000
Subject: [Radiance-general] multi-processor rendering
In-Reply-To: <C35F5202-C366-480E-87BC-462EFBE1EB39@lmi.net>
References: <88079A360FAC7441AE93ECBF61998236313AA4DC@AMXExMb01.global.arup.com>
 <C35F5202-C366-480E-87BC-462EFBE1EB39@lmi.net>
Message-ID: <88079A360FAC7441AE93ECBF61998236313FBA33@AMXExMb01.global.arup.com>

Reporting back to all:

Greg is correct, but with some caveats in my opinion. My preferred rendering parameters did include -dj 0.7 or whatever. Actually rad set -dj 0.9 without me noticing, and I applied -dj 0.6 in my script using rtrace. The rad command set -ps 2 and saved 5% of the calculation time using 3 processors compared to nearly the same settings with vwrays and rtrace. The rad command also did 2x oversampling in that 5% less time, so I admit it's not an apples-to-apples comparison. However I found much better rendering quality (in my opinion) using vwrays with rtrace for the slightly extra time, despite the lack of oversampling. You can see a partial comparison in the attached cropped partial image close-ups - which were processed with a mix of pcond options before compressing and cropping.

The scene is a complicated curving opaque reflective ceiling geometry with IES files placed amongst it. I've cropped that part of the image out for the sake of small files and not having to ask anyone for permission to share in-process design images. On the old machine I was using, took a little under 4 days when limiting to only 3 processors (to run both tests simultaneously).

In the vwrays and rtrace result there's none of the subdivision artifacts that I saw from rpiece. And I saw better ambient calculation consistency with vwrays-rtrace even though I tweaked the rad settings until the ambient parameters were approximately the same as my script. The rad command gives a crisper image within that rendering time because of the extra oversampling. The aliasing and slight blur isn't objectionable in the full rendering in my opinion, although I admit hard to judge from the snippets I'm sharing.

I tested also without the -dj setting (penumbras = false) for sake of time comparison even though I already knew the results weren't up to the quality I was looking for. In this case, rad and rpiece set -ps 4 and the calculation time was 20% less than with vwrays and rtrace. Obviously the shadow results were less accurate, but I also saw some of the same rendering artifacts as in the attached snippets.

My guess is that the time savings of rad might increase with additional processors due to compounding of the pixel processing efficiency. But I'm not which settings I'd need to tweak to get an equal rendering quality, and might always be able to see hints of the rpiece segments.


By the way, I had noted in a different email on this thread that I wasn't getting the expected rpiece behavior from rad. I discovered that was due to an outdated copy of rad from 2010 accidentally mixed into the set of binaries on that machine.

-Chris



From: Greg Ward [mailto:gregoryjward at gmail.com]
Sent: Thursday, October 06, 2016 12:32 PM
To: Radiance general discussion
Subject: Re: [Radiance-general] multi-processor rendering

Hi Chris,

If you would use -ps 1 on the command line of rpiece because you are doing specular sampling or setting -dj .7 (or whatever) to calculate penumbras, then your rtrace command will be just as fast as rpiece.  The main advantage of rpiece on large images is the image plane sampling it does.  Setting -ps 4 (the default) samples only 1 in 16 pixels to start, then subsamples in areas where it detects something going on.  This can be a big time-saver, especially in scenes with a lot of smoothly shaded areas.

The rad command will run rpiece for you if you set the -N option to the number of processes and the -v option to specify a single view you want rendered.  This is a much easier way to operate, and should be entirely reliable under Mac OS X and most versions of Linux.  You can run your own comparison against rtrace with vwrays and report back.  I'd be interested to hear what you find.

One more thing about rtrace is that it doesn't put your view in the header of the output, so if you want to use that output with programs that need the view, you will have to re-insert it.  The latest version of getinfo makes this a little easier, e.g.:

                vwrays ... | rtrace ... | getinfo -a "VIEW= $view" > view1.hdr

Cheers,
-Greg



From: Christopher Rush <Christopher.Rush at arup.com<mailto:Christopher.Rush at arup.com>>

Date: October 6, 2016 9:08:37 AM PDT


Several years ago I tried out rpiece but found it wasn't always reliable - at least not on the system I had been using. I found this following vwrays and rtrace command sequence to work well to get around this. This is for creating a few renderings of a single static scene (for example electric lighting, or single daylight condition). Of course there would be additional ambient parameters on the command line. So I have two questions in addition to opening this to general critique:

1. Has rpeice changed much over the past few years, and would it have any processing speed benefits if I were to try it again?
2. Would using rcontrib offer any processing speed benefits? (I started that way but then realized I should gain speed using the ambient file for rtrace)

Example successful command sequence using 6 processors:

view1="-x 4096 -y 2160 -vf view1.vf"
vwrays -ff $view | rtrace    -w -n 6 -af scene.amb -ffc $(vwrays -d $view) scene.oct > view1.hdr
vwrays -ff $view | rtrace -i -w -n 6 -af scene.amb -ffc $(vwrays -d $view) scene.oct > view1-i.hdr


Thanks for all feedback.
Chris
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161027/adde732a/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: closeup-vwrays_rtrace-compressed.jpg
Type: image/jpeg
Size: 21167 bytes
Desc: closeup-vwrays_rtrace-compressed.jpg
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161027/adde732a/attachment-0002.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: closeup-rad_rpiece-compressed.jpg
Type: image/jpeg
Size: 23340 bytes
Desc: closeup-rad_rpiece-compressed.jpg
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161027/adde732a/attachment-0003.jpg>

From katsuya.obara at arup.com  Thu Oct 27 01:29:58 2016
From: katsuya.obara at arup.com (Katsuya Obara)
Date: Thu, 27 Oct 2016 08:29:58 +0000
Subject: [Radiance-general] rpict command for photon mapping
Message-ID: <AAD4C5B99DCE7E4EA05016103A8F236B2C543E@E-AEXMBX10.global.arup.com>

Hi all,

I am trying to create rendering image using photon map.
Following the photon map extension user manual, I could run mkpmap command.
But when I try to run rpict command, it seems that they keep trying to run the command and failing as following image.
Can anyone advise me what is causing this problem and how to solve it.
Thank you very much for your help!

[cid:image001.jpg at 01D2306F.5B38D500]

Katsuya

____________________________________________________________
Electronic mail messages entering and leaving Arup  business
systems are scanned for acceptability of content and viruses
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161027/70154d57/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 140109 bytes
Desc: image001.jpg
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161027/70154d57/attachment-0001.jpg>

From gregoryjward at gmail.com  Thu Oct 27 17:36:01 2016
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu, 27 Oct 2016 17:36:01 -0700
Subject: [Radiance-general] rpict command for photon mapping
In-Reply-To: <AAD4C5B99DCE7E4EA05016103A8F236B2C543E@E-AEXMBX10.global.arup.com>
References: <AAD4C5B99DCE7E4EA05016103A8F236B2C543E@E-AEXMBX10.global.arup.com>
Message-ID: <6BBC131F-7EA9-4869-B7E7-A3CF03E1FDF4@lmi.net>

Can you offer any details about what process is starting all the (unsuccessful?) rpict commands?  It seems that there is no output redirection, so this is not even a command you would normally run.  What is running it for you?

Best,
-Greg

> From: Katsuya Obara <katsuya.obara at arup.com>
> Date: October 27, 2016 1:29:58 AM PDT
> 
> Hi all,
>  
> I am trying to create rendering image using photon map.
> Following the photon map extension user manual, I could run mkpmap command.
> But when I try to run rpict command, it seems that they keep trying to run the command and failing as following image.
> Can anyone advise me what is causing this problem and how to solve it.
> Thank you very much for your help!
>  
>  
> Katsuya
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161027/32533093/attachment.html>

From katsuya.obara at arup.com  Thu Oct 27 18:26:41 2016
From: katsuya.obara at arup.com (Katsuya Obara)
Date: Fri, 28 Oct 2016 01:26:41 +0000
Subject: [Radiance-general] rpict command for photon mapping
In-Reply-To: <6BBC131F-7EA9-4869-B7E7-A3CF03E1FDF4@lmi.net>
References: <AAD4C5B99DCE7E4EA05016103A8F236B2C543E@E-AEXMBX10.global.arup.com>
 <6BBC131F-7EA9-4869-B7E7-A3CF03E1FDF4@lmi.net>
Message-ID: <AAD4C5B99DCE7E4EA05016103A8F236B2C5615@E-AEXMBX10.global.arup.com>

Hi Greg,

Thank you for your reply.
Below is the command I tried to run for rpict.
rpict -t 60 -ap global.pmap 50 -ap caustic 200 -ab 1 -vf view.vf model.oct

Following your advice, I changed the command to add output redirection as below.
rpict -t 60 -ap global.pmap 50 -ap caustic 200 -ab 1 -vf view.vf model.oct >test.result

It seems that I could run command but it does not report any progress. Are there any specific format I should specify for output file?

Thank you!
Regards,
Katsuya

From: Greg Ward [mailto:gregoryjward at gmail.com]
Sent: Friday, October 28, 2016 8:36 AM
To: Radiance general discussion
Subject: Re: [Radiance-general] rpict command for photon mapping

Can you offer any details about what process is starting all the (unsuccessful?) rpict commands?  It seems that there is no output redirection, so this is not even a command you would normally run.  What is running it for you?

Best,
-Greg



From: Katsuya Obara <katsuya.obara at arup.com<mailto:katsuya.obara at arup.com>>

Date: October 27, 2016 1:29:58 AM PDT


Hi all,

I am trying to create rendering image using photon map.
Following the photon map extension user manual, I could run mkpmap command.
But when I try to run rpict command, it seems that they keep trying to run the command and failing as following image.
Can anyone advise me what is causing this problem and how to solve it.
Thank you very much for your help!


Katsuya

____________________________________________________________
Electronic mail messages entering and leaving Arup  business
systems are scanned for acceptability of content and viruses
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161028/72d8081e/attachment.html>

From rioboo at gmail.com  Fri Oct 28 00:08:09 2016
From: rioboo at gmail.com (goodriver laurus)
Date: Fri, 28 Oct 2016 08:08:09 +0100
Subject: [Radiance-general] Fwd: Creating new view types for Radiance
In-Reply-To: <CADr1nSGWFqn=SHCgqYWX5fPxfmo7hp_O=GoP4zNDd-F6zgGjzA@mail.gmail.com>
References: <CADr1nSGWFqn=SHCgqYWX5fPxfmo7hp_O=GoP4zNDd-F6zgGjzA@mail.gmail.com>
Message-ID: <CADr1nSFLpynKmLwYDUas2PMptu_U+kXrPw-UxpDRUtDkLV-2gQ@mail.gmail.com>

Dear all,

I would like to try a new view type for Radiance. So far I have included
the new type in image.c and included a reference in view.h. However, the
compilation is still not working for rpict. I wonder if that could be due
to the modifications I've made (I have already corrected a couple of small
errors) or because I would need to modify also other files. Basically, what
I am asking is what files should be considered in order to include an
alternative view type for rpict and vwrays.

Many thanks,

Victor Lopez-Rioboo Gil
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161028/deb823c5/attachment-0001.html>

From gregoryjward at gmail.com  Fri Oct 28 08:31:33 2016
From: gregoryjward at gmail.com (Greg Ward)
Date: Fri, 28 Oct 2016 08:31:33 -0700
Subject: [Radiance-general] rpict command for photon mapping
In-Reply-To: <AAD4C5B99DCE7E4EA05016103A8F236B2C5615@E-AEXMBX10.global.arup.com>
References: <AAD4C5B99DCE7E4EA05016103A8F236B2C543E@E-AEXMBX10.global.arup.com>
 <6BBC131F-7EA9-4869-B7E7-A3CF03E1FDF4@lmi.net>
 <AAD4C5B99DCE7E4EA05016103A8F236B2C5615@E-AEXMBX10.global.arup.com>
Message-ID: <DD6182F8-E966-4760-91F8-A96008D9ED69@lmi.net>

Hi Katsuya,

With the -t 60 option, you should at least get a "0% done" message after initialization.  Is that message even showing up?  You might not see reports every 60 seconds if the scanline writes take longer than that, but you should at least get the initialization output.  If you are not seeing that, then something else must be wrong with your command, or the photon map(s) are not loading correctly.  I don't know how to verify this, other than regenerating the maps and trying again.

What happens when you run the same command without the photon maps?  What happens when you run with the photon maps and -ab -1?

Does anyone else have experience/suggestions to offer?

Cheers,
-Greg

> From: Katsuya Obara <katsuya.obara at arup.com>
> Date: October 27, 2016 6:26:41 PM PDT
> 
> Hi Greg,
>  
> Thank you for your reply.
> Below is the command I tried to run for rpict.
> rpict -t 60 -ap global.pmap 50 -ap caustic 200 -ab 1 -vf view.vf model.oct
>  
> Following your advice, I changed the command to add output redirection as below.
> rpict -t 60 -ap global.pmap 50 -ap caustic 200 -ab 1 -vf view.vf model.oct >test.result
>  
> It seems that I could run command but it does not report any progress. Are there any specific format I should specify for output file?
>  
> Thank you!
> Regards,
> Katsuya
>  
> From: Greg Ward [mailto:gregoryjward at gmail.com] 
> To: Radiance general discussion
>  
> Can you offer any details about what process is starting all the (unsuccessful?) rpict commands?  It seems that there is no output redirection, so this is not even a command you would normally run.  What is running it for you?
>  
> Best,
> -Greg
> 
> 
> From: Katsuya Obara <katsuya.obara at arup.com>
> Date: October 27, 2016 1:29:58 AM PDT
>  
> Hi all,
>  
> I am trying to create rendering image using photon map.
> Following the photon map extension user manual, I could run mkpmap command.
> But when I try to run rpict command, it seems that they keep trying to run the command and failing as following image.
> Can anyone advise me what is causing this problem and how to solve it.
> Thank you very much for your help!
>  
>  
> Katsuya
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161028/4fca4314/attachment.html>

From gregoryjward at gmail.com  Fri Oct 28 09:36:45 2016
From: gregoryjward at gmail.com (Greg Ward)
Date: Fri, 28 Oct 2016 09:36:45 -0700
Subject: [Radiance-general] Creating new view types for Radiance
In-Reply-To: <CADr1nSFLpynKmLwYDUas2PMptu_U+kXrPw-UxpDRUtDkLV-2gQ@mail.gmail.com>
References: <CADr1nSGWFqn=SHCgqYWX5fPxfmo7hp_O=GoP4zNDd-F6zgGjzA@mail.gmail.com>
 <CADr1nSFLpynKmLwYDUas2PMptu_U+kXrPw-UxpDRUtDkLV-2gQ@mail.gmail.com>
Message-ID: <4429836C-16CE-4122-BAED-8103B9D4454E@lmi.net>

Hi Victor,

You are working in the right place.  Besides adding a macro for your view type to view.h, you need to implement the correct operations and checks in viewray() and viewloc() in image.c.  For full support, you should also look at util/rad.c and insert your view type in some switch statements therein.  Similarly, there is some code you need to write to split up your view for rpiece in util/rpiece.c.

Can you be more specific when you say that your compilation is not working?  Do you get compile errors, or is something going wrong at run-time?

Out of curiosity, what type are you adding?

Cheers,
-Greg

> From: goodriver laurus <rioboo at gmail.com>
> Date: October 28, 2016 12:08:09 AM PDT
> 
> Dear all,
> 
> I would like to try a new view type for Radiance. So far I have included the new type in image.c and included a reference in view.h. However, the compilation is still not working for rpict. I wonder if that could be due to the modifications I've made (I have already corrected a couple of small errors) or because I would need to modify also other files. Basically, what I am asking is what files should be considered in order to include an alternative view type for rpict and vwrays.
> 
> Many thanks,
> 
> Victor Lopez-Rioboo Gil
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161028/456d2010/attachment.html>

From rioboo at gmail.com  Sun Oct 30 02:58:26 2016
From: rioboo at gmail.com (Victor LRG)
Date: Sun, 30 Oct 2016 09:58:26 +0000
Subject: [Radiance-general] How to use the mailing list
Message-ID: <CADr1nSHSCvUvfuHqz6ch0AJiLiwfHoAoYpX9WqC4ha1QoV+uhQ@mail.gmail.com>

Dear all,

When opening the archives there is the following message under Using
Radiance-general: "To post a message to all the list members, send email to
radiance-general at radiance-online.org". I wonder if more information could
be included:

- How to replay: I've noticed that sometimes a topic creates a tree of
replies, but sometimes the topic is branched out.  Should I include Re: at
the beginning? What if I replay to another reply? Should it be Re: Re:?
Should I copy paste the entire message or just my reply? Should the name in
parentheses be changed when replying?

- Attachments: Can/should attachements be included? If so, how should it be
done? An image should be attached or included in the body of the text?

Sorry if the topic has been answered before. I remember seeing something
somewhere, but I cannot find it anymore.

Thanks,

Victor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161030/4346c8f1/attachment.html>

From gregoryjward at gmail.com  Sun Oct 30 08:34:44 2016
From: gregoryjward at gmail.com (Greg Ward)
Date: Sun, 30 Oct 2016 08:34:44 -0700
Subject: [Radiance-general] How to use the mailing list
In-Reply-To: <CADr1nSHSCvUvfuHqz6ch0AJiLiwfHoAoYpX9WqC4ha1QoV+uhQ@mail.gmail.com>
References: <CADr1nSHSCvUvfuHqz6ch0AJiLiwfHoAoYpX9WqC4ha1QoV+uhQ@mail.gmail.com>
Message-ID: <958ACF56-647C-48AC-B006-41D78DED20D4@lmi.net>

Hi Victor,

Thanks for your questions.  Some of this has been discussed before, such as policy regarding attachments.  While it's OK to include a small JPEG or graph in the body of e-mails, large files (i.e., HDR pictures, etc.) should be linked to a URL that has some reasonable longevity.  Generally, I like to keep e-mail sizes to under 250K, as people are often careless in replying, and attachments may tag along.

Regarding reply subjects, you should *never* reply to a digest e-mail, for those who are getting those.  Reply to the original e-mail instead, or change the subject to correspond to it at least, and don't include the whole digest with your reply(!)  I actually don't know what happens if you include multiple topics in your subject line -- I'm not sure how smart Mailman (our list software) is about that.  You could try it.

Cheers,
-Greg

> From: Victor LRG <rioboo at gmail.com>
> Date: October 30, 2016 2:58:26 AM PDT
> 
> Dear all,
> 
> When opening the archives there is the following message under Using Radiance-general: "To post a message to all the list members, send email to radiance-general at radiance-online.org". I wonder if more information could be included:
> 
> - How to replay: I've noticed that sometimes a topic creates a tree of replies, but sometimes the topic is branched out.  Should I include Re: at the beginning? What if I replay to another reply? Should it be Re: Re:? Should I copy paste the entire message or just my reply? Should the name in parentheses be changed when replying?
> 
> - Attachments: Can/should attachements be included? If so, how should it be done? An image should be attached or included in the body of the text?
> 
> Sorry if the topic has been answered before. I remember seeing something somewhere, but I cannot find it anymore.
> 
> Thanks,
> 
> Victor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161030/4a59c02a/attachment.html>

From weiss at stahl-sonnenenergie.de  Sun Oct 30 12:07:15 2016
From: weiss at stahl-sonnenenergie.de (weiss at stahl-sonnenenergie.de)
Date: Sun, 30 Oct 2016 19:07:15 +0000
Subject: [Radiance-general] AUTOREPLY Radiance-general Digest, Vol 152,
 Issue 19
Message-ID: <064E6C81.581652EE@smtprelaypool.ispgateway.de>


Sehr geehrte Damen und Herren,

vielen Dank fr Ihre Nachricht.
ich bin bis zum 04.09.2016 im Urlaub. Ihre Nachricht wird nicht automatisch weiter geleitet oder gelesen. Bitte wenden sie sich in dringenden Fllen an unsere Zentrale.

Mit freundlichen Gren

Volker Wei

Stahl+Wei
Basler Strae 55
D-79100 Freiburg

Tel.   +49-(0)761-38909-32
Zentrale                     -30
Fax.  +49-(0)761-38909-39

weiss at stahl-weiss.de
www.stahl-weiss.de


Send Radiance-general mailing list submissions to
	radiance-general at radiance-online.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://www.radiance-online.org/mailman/listinfo/radiance-general
or, via email, send a message with subject or body 'help' to
	radiance-general-request at radiance-online.org

You can reach the person managing the list at
	radiance-general-owner at radiance-online.org

When replying, please edit your Subject line so it is more specific
than "Re: Contents of Radiance-general digest..."


Today's Topics:

   1. How to use the mailing list (Victor LRG)
   2. Re: How to use the mailing list (Greg Ward)


----------------------------------------------------------------------

Message: 1
Date: Sun, 30 Oct 2016 09:58:26 +0000
From: Victor LRG <rioboo at gmail.com>
To: radiance-general at radiance-online.org
Subject: [Radiance-general] How to use the mailing list
Message-ID:
	<CADr1nSHSCvUvfuHqz6ch0AJiLiwfHoAoYpX9WqC4ha1QoV+uhQ at mail.gmail.com>
Content-Type: text/plain; charset="utf-8"

Dear all,

When opening the archives there is the following message under Using
Radiance-general: "To post a message to all the list members, send email to
radiance-general at radiance-online.org". I wonder if more information could
be included:

- How to replay: I've noticed that sometimes a topic creates a tree of
replies, but sometimes the topic is branched out.  Should I include Re: at
the beginning? What if I replay to another reply? Should it be Re: Re:?
Should I copy paste the entire message or just my reply? Should the name in
parentheses be changed when replying?

- Attachments: Can/should attachements be included? If so, how should it be
done? An image should be attached or included in the body of the text?

Sorry if the topic has been answered before. I remember seeing something
somewhere, but I cannot find it anymore.

Thanks,

Victor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161030/4346c8f1/attachment-0001.html>

------------------------------

Message: 2
Date: Sun, 30 Oct 2016 08:34:44 -0700
From: Greg Ward <gregoryjward at gmail.com>
To: Radiance general discussion <radiance-general at radiance-online.org>
Subject: Re: [Radiance-general] How to use the mailing list
Message-ID: <958ACF56-647C-48AC-B006-41D78DED20D4 at lmi.net>
Content-Type: text/plain; charset="us-ascii"

Hi Victor,

Thanks for your questions.  Some of this has been discussed before, such as policy regarding attachments.  While it's OK to include a small JPEG or graph in the body of e-mails, large files (i.e., HDR pictures, etc.) should be linked to a URL that has some reasonable longevity.  Generally, I like to keep e-mail sizes to under 250K, as people are often careless in replying, and attachments may tag along.

Regarding reply subjects, you should *never* reply to a digest e-mail, for those who are getting those.  Reply to the original e-mail instead, or change the subject to correspond to it at least, and don't include the whole digest with your reply(!)  I actually don't know what happens if you include multiple topics in your subject line -- I'm not sure how smart Mailman (our list software) is about that.  You could try it.

Cheers,
-Greg

> From: Victor LRG <rioboo at gmail.com>
> Date: October 30, 2016 2:58:26 AM PDT
> 
> Dear all,
> 
> When opening the archives there is the following message under Using Radiance-general: "To post a message to all the list members, send email to radiance-general at radiance-online.org". I wonder if more information could be included:
> 
> - How to replay: I've noticed that sometimes a topic creates a tree of replies, but sometimes the topic is branched out.  Should I include Re: at the beginning? What if I replay to another reply? Should it be Re: Re:? Should I copy paste the entire message or just my reply? Should the name in parentheses be changed when replying?
> 
> - Attachments: Can/should attachements be included? If so, how should it be done? An image should be attached or included in the body of the text?
> 
> Sorry if the topic has been answered before. I remember seeing something somewhere, but I cannot find it anymore.
> 
> Thanks,
> 
> Victor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161030/4a59c02a/attachment-0001.html>

------------------------------

Subject: Digest Footer

_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org
http://www.radiance-online.org/mailman/listinfo/radiance-general


------------------------------

End of Radiance-general Digest, Vol 152, Issue 19
*************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161030/0948b69a/attachment.html>

From katsuya.obara at arup.com  Sun Oct 30 18:17:12 2016
From: katsuya.obara at arup.com (Katsuya Obara)
Date: Mon, 31 Oct 2016 01:17:12 +0000
Subject: [Radiance-general] rpict command for photon mapping
In-Reply-To: <DD6182F8-E966-4760-91F8-A96008D9ED69@lmi.net>
References: <AAD4C5B99DCE7E4EA05016103A8F236B2C543E@E-AEXMBX10.global.arup.com>
 <6BBC131F-7EA9-4869-B7E7-A3CF03E1FDF4@lmi.net>
 <AAD4C5B99DCE7E4EA05016103A8F236B2C5615@E-AEXMBX10.global.arup.com>
 <DD6182F8-E966-4760-91F8-A96008D9ED69@lmi.net>
Message-ID: <AAD4C5B99DCE7E4EA05016103A8F236B2C5BE6@E-AEXMBX10.global.arup.com>

Hi Greg,

I even don't get "0% done".
Followings are the result when I tested your suggestion.
1.What happens when you run the same command without the photon maps?
I tried rpict -t 60 -ab 1 -vf view.vf model.oct >test.result. Even in this case, I couldn't get "0% done".
2. What happens when you run with the photon maps and -ab -1?
I tried rpict -t 60 -ap global.pmap 50 -ab -1 -vf view.vf model.oct >test.result. Also in this case, I couldn't get "0% done".

Does this mean that I have problem in rpict command not in photon maps?

Thank you for your help.
Regards,
Katsuya



From: Greg Ward [mailto:gregoryjward at gmail.com]
Sent: Friday, October 28, 2016 11:32 PM
To: Radiance general discussion
Subject: Re: [Radiance-general] rpict command for photon mapping

Hi Katsuya,

With the -t 60 option, you should at least get a "0% done" message after initialization.  Is that message even showing up?  You might not see reports every 60 seconds if the scanline writes take longer than that, but you should at least get the initialization output.  If you are not seeing that, then something else must be wrong with your command, or the photon map(s) are not loading correctly.  I don't know how to verify this, other than regenerating the maps and trying again.

What happens when you run the same command without the photon maps?  What happens when you run with the photon maps and -ab -1?

Does anyone else have experience/suggestions to offer?

Cheers,
-Greg



From: Katsuya Obara <katsuya.obara at arup.com<mailto:katsuya.obara at arup.com>>

Date: October 27, 2016 6:26:41 PM PDT


Hi Greg,

Thank you for your reply.
Below is the command I tried to run for rpict.
rpict -t 60 -ap global.pmap 50 -ap caustic 200 -ab 1 -vf view.vf model.oct

Following your advice, I changed the command to add output redirection as below.
rpict -t 60 -ap global.pmap 50 -ap caustic 200 -ab 1 -vf view.vf model.oct >test.result

It seems that I could run command but it does not report any progress. Are there any specific format I should specify for output file?

Thank you!
Regards,
Katsuya

From: Greg Ward [mailto:gregoryjward at gmail.com]
To: Radiance general discussion


Can you offer any details about what process is starting all the (unsuccessful?) rpict commands?  It seems that there is no output redirection, so this is not even a command you would normally run.  What is running it for you?

Best,
-Greg




From: Katsuya Obara <katsuya.obara at arup.com<mailto:katsuya.obara at arup.com>>

Date: October 27, 2016 1:29:58 AM PDT


Hi all,

I am trying to create rendering image using photon map.
Following the photon map extension user manual, I could run mkpmap command.
But when I try to run rpict command, it seems that they keep trying to run the command and failing as following image.
Can anyone advise me what is causing this problem and how to solve it.
Thank you very much for your help!


Katsuya
____________________________________________________________
Electronic mail messages entering and leaving Arup  business
systems are scanned for acceptability of content and viruses
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161031/2b22bdc3/attachment-0001.html>

From gregoryjward at gmail.com  Sun Oct 30 19:59:55 2016
From: gregoryjward at gmail.com (Greg Ward)
Date: Sun, 30 Oct 2016 19:59:55 -0700
Subject: [Radiance-general] rpict command for photon mapping
In-Reply-To: <AAD4C5B99DCE7E4EA05016103A8F236B2C5BE6@E-AEXMBX10.global.arup.com>
References: <AAD4C5B99DCE7E4EA05016103A8F236B2C543E@E-AEXMBX10.global.arup.com>
 <6BBC131F-7EA9-4869-B7E7-A3CF03E1FDF4@lmi.net>
 <AAD4C5B99DCE7E4EA05016103A8F236B2C5615@E-AEXMBX10.global.arup.com>
 <DD6182F8-E966-4760-91F8-A96008D9ED69@lmi.net>
 <AAD4C5B99DCE7E4EA05016103A8F236B2C5BE6@E-AEXMBX10.global.arup.com>
Message-ID: <40813B52-0108-45D6-877E-FA8DBD34B927@lmi.net>

Yes, there must be something wrong with the rpict command on your system.  Try running "rpict -version" and "rpict -defaults" with no other options.

If those don't return, then rpict is completely broken on your system.  Perhaps it is a 64/32-bit mode issue.  I have no idea.

Best,
-Greg

> From: Katsuya Obara <katsuya.obara at arup.com>
> Date: October 30, 2016 6:17:12 PM PDT
> 
> Hi Greg,
>  
> I even don?t get ?0% done?.
> Followings are the result when I tested your suggestion.
> 1.What happens when you run the same command without the photon maps?  
> I tried rpict ?t 60 ?ab 1 ?vf view.vf model.oct >test.result. Even in this case, I couldn?t get ?0% done?.
> 2. What happens when you run with the photon maps and -ab -1?
> I tried rpict -t 60 -ap global.pmap 50 -ab -1 -vf view.vf model.oct >test.result. Also in this case, I couldn?t get ?0% done?.
>  
> Does this mean that I have problem in rpict command not in photon maps?
>  
> Thank you for your help.
> Regards,
> Katsuya
>  
>  
>  
> From: Greg Ward [mailto:gregoryjward at gmail.com] 
> Sent: Friday, October 28, 2016 11:32 PM
> To: Radiance general discussion
> Subject: Re: [Radiance-general] rpict command for photon mapping
>  
> Hi Katsuya,
>  
> With the -t 60 option, you should at least get a "0% done" message after initialization.  Is that message even showing up?  You might not see reports every 60 seconds if the scanline writes take longer than that, but you should at least get the initialization output.  If you are not seeing that, then something else must be wrong with your command, or the photon map(s) are not loading correctly.  I don't know how to verify this, other than regenerating the maps and trying again.
>  
> What happens when you run the same command without the photon maps?  What happens when you run with the photon maps and -ab -1?
>  
> Does anyone else have experience/suggestions to offer?
>  
> Cheers,
> -Greg
> 
> 
> From: Katsuya Obara <katsuya.obara at arup.com>
> Date: October 27, 2016 6:26:41 PM PDT
>  
> Hi Greg,
>  
> Thank you for your reply.
> Below is the command I tried to run for rpict.
> rpict -t 60 -ap global.pmap 50 -ap caustic 200 -ab 1 -vf view.vf model.oct
>  
> Following your advice, I changed the command to add output redirection as below.
> rpict -t 60 -ap global.pmap 50 -ap caustic 200 -ab 1 -vf view.vf model.oct >test.result
>  
> It seems that I could run command but it does not report any progress. Are there any specific format I should specify for output file?
>  
> Thank you!
> Regards,
> Katsuya
>  
> From: Greg Ward [mailto:gregoryjward at gmail.com] 
> To: Radiance general discussion
> 
>  
> Can you offer any details about what process is starting all the (unsuccessful?) rpict commands?  It seems that there is no output redirection, so this is not even a command you would normally run.  What is running it for you?
>  
> Best,
> -Greg
> 
> 
> 
> From: Katsuya Obara <katsuya.obara at arup.com>
> Date: October 27, 2016 1:29:58 AM PDT
>  
> Hi all,
>  
> I am trying to create rendering image using photon map.
> Following the photon map extension user manual, I could run mkpmap command.
> But when I try to run rpict command, it seems that they keep trying to run the command and failing as following image.
> Can anyone advise me what is causing this problem and how to solve it.
> Thank you very much for your help!
>  
>  
> Katsuya
> ____________________________________________________________
> Electronic mail messages entering and leaving Arup  business
> systems are scanned for acceptability of content and viruses
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161030/2c7488f7/attachment.html>

From katsuya.obara at arup.com  Sun Oct 30 20:45:22 2016
From: katsuya.obara at arup.com (Katsuya Obara)
Date: Mon, 31 Oct 2016 03:45:22 +0000
Subject: [Radiance-general] rpict command for photon mapping
In-Reply-To: <40813B52-0108-45D6-877E-FA8DBD34B927@lmi.net>
References: <AAD4C5B99DCE7E4EA05016103A8F236B2C543E@E-AEXMBX10.global.arup.com>
 <6BBC131F-7EA9-4869-B7E7-A3CF03E1FDF4@lmi.net>
 <AAD4C5B99DCE7E4EA05016103A8F236B2C5615@E-AEXMBX10.global.arup.com>
 <DD6182F8-E966-4760-91F8-A96008D9ED69@lmi.net>
 <AAD4C5B99DCE7E4EA05016103A8F236B2C5BE6@E-AEXMBX10.global.arup.com>
 <40813B52-0108-45D6-877E-FA8DBD34B927@lmi.net>
Message-ID: <AAD4C5B99DCE7E4EA05016103A8F236B2C5D89@E-AEXMBX10.global.arup.com>

Hi Greg,

I could get return from following command you advise me.
rpict -version
RADIANCE 5.0 Official Release 2015/09/18 by G. Ward
rpict -defaults
-vtv                            # view type perspective
-vp 0.000000 0.000000 0.000000  # view point
-vd 0.000000 1.000000 0.000000  # view direction
-vu 0.000000 0.000000 1.000000  # view up
-vh 45.000000                   # view horizontal size
-vv 45.000000                   # view vertical size
-vo 0.000000                    # view fore clipping plane
-va 0.000000                    # view aft clipping plane
-vs 0.000000                    # view shift
-vl 0.000000                    # view lift
-x  512                         # x resolution
-y  512                         # y resolution
-pa 1.000000                    # pixel aspect ratio
-pj 0.670000                    # pixel jitter
-pm 0.000000                    # pixel motion
-pd 0.000000                    # pixel depth-of-field
-ps 4                           # pixel sample
-pt 0.050000                    # pixel threshold
-t  0                           # time between reports
-w+                             # warning messages on
-i-                             # irradiance calculation off
-u-                             # correlated quasi-Monte Carlo sampling
-bv+                            # back face visibility on
-dt 0.050000                    # direct threshold
-dc 0.500000                    # direct certainty
-dj 0.000000                    # direct jitter
-ds 0.250000                    # direct sampling
-dr 1                           # direct relays
-dp 512                         # direct pretest density
-dv+                            # direct visibility on
-ss 1.000000                    # specular sampling
-st 0.150000                    # specular threshold
-av 0.000000 0.000000 0.000000  # ambient value
-aw 0                           # ambient value weight
-ab 0                           # ambient bounces
-aa 0.200000                    # ambient accuracy
-ar 64                          # ambient resolution
-ad 512                         # ambient divisions
-as 128                         # ambient super-samples
-me 0.00e+000 0.00e+000 0.00e+000       # mist extinction coefficient
-ma 0.000000 0.000000 0.000000  # mist scattering albedo
-mg 0.000000                    # mist scattering eccentricity
-ms 0.000000                    # mist sampling distance
-lr 7                           # limit reflection
-lw 1.00e-003                   # limit weight
-am 0.0                         # max photon search radius

Could you come up any other idea why I cannot run rpict command?

Thank you.
Katsuya

From: Greg Ward [mailto:gregoryjward at gmail.com]
Sent: Monday, October 31, 2016 11:00 AM
To: Radiance general discussion
Subject: Re: [Radiance-general] rpict command for photon mapping

Yes, there must be something wrong with the rpict command on your system.  Try running "rpict -version" and "rpict -defaults" with no other options.

If those don't return, then rpict is completely broken on your system.  Perhaps it is a 64/32-bit mode issue.  I have no idea.

Best,
-Greg



From: Katsuya Obara <katsuya.obara at arup.com<mailto:katsuya.obara at arup.com>>

Date: October 30, 2016 6:17:12 PM PDT


Hi Greg,

I even don't get "0% done".
Followings are the result when I tested your suggestion.
1.What happens when you run the same command without the photon maps?
I tried rpict -t 60 -ab 1 -vf view.vf model.oct >test.result. Even in this case, I couldn't get "0% done".
2. What happens when you run with the photon maps and -ab -1?
I tried rpict -t 60 -ap global.pmap 50 -ab -1 -vf view.vf model.oct >test.result. Also in this case, I couldn't get "0% done".

Does this mean that I have problem in rpict command not in photon maps?

Thank you for your help.
Regards,
Katsuya



From: Greg Ward [mailto:gregoryjward at gmail.com]
Sent: Friday, October 28, 2016 11:32 PM
To: Radiance general discussion
Subject: Re: [Radiance-general] rpict command for photon mapping

Hi Katsuya,

With the -t 60 option, you should at least get a "0% done" message after initialization.  Is that message even showing up?  You might not see reports every 60 seconds if the scanline writes take longer than that, but you should at least get the initialization output.  If you are not seeing that, then something else must be wrong with your command, or the photon map(s) are not loading correctly.  I don't know how to verify this, other than regenerating the maps and trying again.

What happens when you run the same command without the photon maps?  What happens when you run with the photon maps and -ab -1?

Does anyone else have experience/suggestions to offer?

Cheers,
-Greg




From: Katsuya Obara <katsuya.obara at arup.com<mailto:katsuya.obara at arup.com>>

Date: October 27, 2016 6:26:41 PM PDT


Hi Greg,

Thank you for your reply.
Below is the command I tried to run for rpict.
rpict -t 60 -ap global.pmap 50 -ap caustic 200 -ab 1 -vf view.vf model.oct

Following your advice, I changed the command to add output redirection as below.
rpict -t 60 -ap global.pmap 50 -ap caustic 200 -ab 1 -vf view.vf model.oct >test.result

It seems that I could run command but it does not report any progress. Are there any specific format I should specify for output file?

Thank you!
Regards,
Katsuya

From: Greg Ward [mailto:gregoryjward at gmail.com]
To: Radiance general discussion



Can you offer any details about what process is starting all the (unsuccessful?) rpict commands?  It seems that there is no output redirection, so this is not even a command you would normally run.  What is running it for you?

Best,
-Greg





From: Katsuya Obara <katsuya.obara at arup.com<mailto:katsuya.obara at arup.com>>

Date: October 27, 2016 1:29:58 AM PDT


Hi all,

I am trying to create rendering image using photon map.
Following the photon map extension user manual, I could run mkpmap command.
But when I try to run rpict command, it seems that they keep trying to run the command and failing as following image.
Can anyone advise me what is causing this problem and how to solve it.
Thank you very much for your help!


Katsuya

____________________________________________________________
Electronic mail messages entering and leaving Arup  business
systems are scanned for acceptability of content and viruses
_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org<mailto:Radiance-general at radiance-online.org>
http://www.radiance-online.org/mailman/listinfo/radiance-general
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161031/6ca27378/attachment-0001.html>

From gregoryjward at gmail.com  Mon Oct 31 08:12:34 2016
From: gregoryjward at gmail.com (Greg Ward)
Date: Mon, 31 Oct 2016 08:12:34 -0700
Subject: [Radiance-general] rpict command for photon mapping
In-Reply-To: <AAD4C5B99DCE7E4EA05016103A8F236B2C5D89@E-AEXMBX10.global.arup.com>
References: <AAD4C5B99DCE7E4EA05016103A8F236B2C543E@E-AEXMBX10.global.arup.com>
 <6BBC131F-7EA9-4869-B7E7-A3CF03E1FDF4@lmi.net>
 <AAD4C5B99DCE7E4EA05016103A8F236B2C5615@E-AEXMBX10.global.arup.com>
 <DD6182F8-E966-4760-91F8-A96008D9ED69@lmi.net>
 <AAD4C5B99DCE7E4EA05016103A8F236B2C5BE6@E-AEXMBX10.global.arup.com>
 <40813B52-0108-45D6-877E-FA8DBD34B927@lmi.net>
 <AAD4C5B99DCE7E4EA05016103A8F236B2C5D89@E-AEXMBX10.global.arup.com>
Message-ID: <0473AE50-15C1-48B1-BC6D-10E0CCEB2A53@lmi.net>

OK, since you verified that rpict can at least run, but you are seeing no initialization message with -t 60 and no photon map or ambient file, this seems to imply that rpict is getting stuck trying to read the octree.  I have not seen this problem before.  Usually, if there is a problem with the octree, it will report an error an exit.  How was the octree generated?  Did you try re-generating it and running rpict again?

Cheers,
-Greg

> From: Katsuya Obara <katsuya.obara at arup.com>
> Date: October 30, 2016 8:45:22 PM PDT
> 
> Hi Greg,
>  
> I could get return from following command you advise me.
> rpict ?version
> RADIANCE 5.0 Official Release 2015/09/18 by G. Ward
> rpict ?defaults
> -vtv                            # view type perspective
> -vp 0.000000 0.000000 0.000000  # view point
> -vd 0.000000 1.000000 0.000000  # view direction
> -vu 0.000000 0.000000 1.000000  # view up
> -vh 45.000000                   # view horizontal size
> -vv 45.000000                   # view vertical size
> -vo 0.000000                    # view fore clipping plane
> -va 0.000000                    # view aft clipping plane
> -vs 0.000000                    # view shift
> -vl 0.000000                    # view lift
> -x  512                         # x resolution
> -y  512                         # y resolution
> -pa 1.000000                    # pixel aspect ratio
> -pj 0.670000                    # pixel jitter
> -pm 0.000000                    # pixel motion
> -pd 0.000000                    # pixel depth-of-field
> -ps 4                           # pixel sample
> -pt 0.050000                    # pixel threshold
> -t  0                           # time between reports
> -w+                             # warning messages on
> -i-                             # irradiance calculation off
> -u-                             # correlated quasi-Monte Carlo sampling
> -bv+                            # back face visibility on
> -dt 0.050000                    # direct threshold
> -dc 0.500000                    # direct certainty
> -dj 0.000000                    # direct jitter
> -ds 0.250000                    # direct sampling
> -dr 1                           # direct relays
> -dp 512                         # direct pretest density
> -dv+                            # direct visibility on
> -ss 1.000000                    # specular sampling
> -st 0.150000                    # specular threshold
> -av 0.000000 0.000000 0.000000  # ambient value
> -aw 0                           # ambient value weight
> -ab 0                           # ambient bounces
> -aa 0.200000                    # ambient accuracy
> -ar 64                          # ambient resolution
> -ad 512                         # ambient divisions
> -as 128                         # ambient super-samples
> -me 0.00e+000 0.00e+000 0.00e+000       # mist extinction coefficient
> -ma 0.000000 0.000000 0.000000  # mist scattering albedo
> -mg 0.000000                    # mist scattering eccentricity
> -ms 0.000000                    # mist sampling distance
> -lr 7                           # limit reflection
> -lw 1.00e-003                   # limit weight
> -am 0.0                         # max photon search radius
>  
> Could you come up any other idea why I cannot run rpict command?
>  
> Thank you.
> Katsuya
>  
> From: Greg Ward [mailto:gregoryjward at gmail.com] 
> Sent: Monday, October 31, 2016 11:00 AM
> To: Radiance general discussion
> Subject: Re: [Radiance-general] rpict command for photon mapping
>  
> Yes, there must be something wrong with the rpict command on your system.  Try running "rpict -version" and "rpict -defaults" with no other options.
>  
> If those don't return, then rpict is completely broken on your system.  Perhaps it is a 64/32-bit mode issue.  I have no idea.
>  
> Best,
> -Greg
> 
> 
> From: Katsuya Obara <katsuya.obara at arup.com>
> Date: October 30, 2016 6:17:12 PM PDT
>  
> Hi Greg,
>  
> I even don?t get ?0% done?.
> Followings are the result when I tested your suggestion.
> 1.What happens when you run the same command without the photon maps?  
> I tried rpict ?t 60 ?ab 1 ?vf view.vf model.oct >test.result. Even in this case, I couldn?t get ?0% done?.
> 2. What happens when you run with the photon maps and -ab -1?
> I tried rpict -t 60 -ap global.pmap 50 -ab -1 -vf view.vf model.oct >test.result. Also in this case, I couldn?t get ?0% done?.
>  
> Does this mean that I have problem in rpict command not in photon maps?
>  
> Thank you for your help.
> Regards,
> Katsuya
>  
>  
>  
> From: Greg Ward [mailto:gregoryjward at gmail.com] 
> Sent: Friday, October 28, 2016 11:32 PM
> To: Radiance general discussion
> Subject: Re: [Radiance-general] rpict command for photon mapping
>  
> Hi Katsuya,
>  
> With the -t 60 option, you should at least get a "0% done" message after initialization.  Is that message even showing up?  You might not see reports every 60 seconds if the scanline writes take longer than that, but you should at least get the initialization output.  If you are not seeing that, then something else must be wrong with your command, or the photon map(s) are not loading correctly.  I don't know how to verify this, other than regenerating the maps and trying again.
>  
> What happens when you run the same command without the photon maps?  What happens when you run with the photon maps and -ab -1?
>  
> Does anyone else have experience/suggestions to offer?
>  
> Cheers,
> -Greg
> 
> 
> 
> From: Katsuya Obara <katsuya.obara at arup.com>
> Date: October 27, 2016 6:26:41 PM PDT
>  
> Hi Greg,
>  
> Thank you for your reply.
> Below is the command I tried to run for rpict.
> rpict -t 60 -ap global.pmap 50 -ap caustic 200 -ab 1 -vf view.vf model.oct
>  
> Following your advice, I changed the command to add output redirection as below.
> rpict -t 60 -ap global.pmap 50 -ap caustic 200 -ab 1 -vf view.vf model.oct >test.result
>  
> It seems that I could run command but it does not report any progress. Are there any specific format I should specify for output file?
>  
> Thank you!
> Regards,
> Katsuya
>  
> From: Greg Ward [mailto:gregoryjward at gmail.com] 
> To: Radiance general discussion
> 
> 
>  
> Can you offer any details about what process is starting all the (unsuccessful?) rpict commands?  It seems that there is no output redirection, so this is not even a command you would normally run.  What is running it for you?
>  
> Best,
> -Greg
> 
> 
> 
> 
> From: Katsuya Obara <katsuya.obara at arup.com>
> Date: October 27, 2016 1:29:58 AM PDT
>  
> Hi all,
>  
> I am trying to create rendering image using photon map.
> Following the photon map extension user manual, I could run mkpmap command.
> But when I try to run rpict command, it seems that they keep trying to run the command and failing as following image.
> Can anyone advise me what is causing this problem and how to solve it.
> Thank you very much for your help!
>  
>  
> Katsuya
> ____________________________________________________________
> Electronic mail messages entering and leaving Arup  business
> systems are scanned for acceptability of content and viruses
> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161031/a8552725/attachment-0001.html>

From shakespe at indiana.edu  Mon Oct 31 08:40:33 2016
From: shakespe at indiana.edu (Shakespeare, Robert A.)
Date: Mon, 31 Oct 2016 15:40:33 +0000
Subject: [Radiance-general] rpict command for photon mapping
In-Reply-To: <0473AE50-15C1-48B1-BC6D-10E0CCEB2A53@lmi.net>
References: <AAD4C5B99DCE7E4EA05016103A8F236B2C543E@E-AEXMBX10.global.arup.com>
 <6BBC131F-7EA9-4869-B7E7-A3CF03E1FDF4@lmi.net>
 <AAD4C5B99DCE7E4EA05016103A8F236B2C5615@E-AEXMBX10.global.arup.com>
 <DD6182F8-E966-4760-91F8-A96008D9ED69@lmi.net>
 <AAD4C5B99DCE7E4EA05016103A8F236B2C5BE6@E-AEXMBX10.global.arup.com>
 <40813B52-0108-45D6-877E-FA8DBD34B927@lmi.net>
 <AAD4C5B99DCE7E4EA05016103A8F236B2C5D89@E-AEXMBX10.global.arup.com>,
 <0473AE50-15C1-48B1-BC6D-10E0CCEB2A53@lmi.net>
Message-ID: <E66BF0FD-E01D-4E68-8E31-C885489C7F7D@indiana.edu>

Rpict rvu objview all hang if there is an incomplete xform command... no file reference at the end.
Might be irrelevant in this situation, but sometimes the less obvious is what causes headaches.

Rob

Sent from my iPad

On Oct 31, 2016, at 11:14 AM, Greg Ward <gregoryjward at gmail.com<mailto:gregoryjward at gmail.com>> wrote:

OK, since you verified that rpict can at least run, but you are seeing no initialization message with -t 60 and no photon map or ambient file, this seems to imply that rpict is getting stuck trying to read the octree.  I have not seen this problem before.  Usually, if there is a problem with the octree, it will report an error an exit.  How was the octree generated?  Did you try re-generating it and running rpict again?

Cheers,
-Greg


From: Katsuya Obara <katsuya.obara at arup.com<mailto:katsuya.obara at arup.com>>

Date: October 30, 2016 8:45:22 PM PDT

Hi Greg,

I could get return from following command you advise me.
rpict ?version
RADIANCE 5.0 Official Release 2015/09/18 by G. Ward
rpict ?defaults
-vtv                            # view type perspective
-vp 0.000000 0.000000 0.000000  # view point
-vd 0.000000 1.000000 0.000000  # view direction
-vu 0.000000 0.000000 1.000000  # view up
-vh 45.000000                   # view horizontal size
-vv 45.000000                   # view vertical size
-vo 0.000000                    # view fore clipping plane
-va 0.000000                    # view aft clipping plane
-vs 0.000000                    # view shift
-vl 0.000000                    # view lift
-x  512                         # x resolution
-y  512                         # y resolution
-pa 1.000000                    # pixel aspect ratio
-pj 0.670000                    # pixel jitter
-pm 0.000000                    # pixel motion
-pd 0.000000                    # pixel depth-of-field
-ps 4                           # pixel sample
-pt 0.050000                    # pixel threshold
-t  0                           # time between reports
-w+                             # warning messages on
-i-                             # irradiance calculation off
-u-                             # correlated quasi-Monte Carlo sampling
-bv+                            # back face visibility on
-dt 0.050000                    # direct threshold
-dc 0.500000                    # direct certainty
-dj 0.000000                    # direct jitter
-ds 0.250000                    # direct sampling
-dr 1                           # direct relays
-dp 512                         # direct pretest density
-dv+                            # direct visibility on
-ss 1.000000                    # specular sampling
-st 0.150000                    # specular threshold
-av 0.000000 0.000000 0.000000  # ambient value
-aw 0                           # ambient value weight
-ab 0                           # ambient bounces
-aa 0.200000                    # ambient accuracy
-ar 64                          # ambient resolution
-ad 512                         # ambient divisions
-as 128                         # ambient super-samples
-me 0.00e+000 0.00e+000 0.00e+000       # mist extinction coefficient
-ma 0.000000 0.000000 0.000000  # mist scattering albedo
-mg 0.000000                    # mist scattering eccentricity
-ms 0.000000                    # mist sampling distance
-lr 7                           # limit reflection
-lw 1.00e-003                   # limit weight
-am 0.0                         # max photon search radius

Could you come up any other idea why I cannot run rpict command?

Thank you.
Katsuya

From: Greg Ward [mailto:gregoryjward at gmail.com]
Sent: Monday, October 31, 2016 11:00 AM
To: Radiance general discussion
Subject: Re: [Radiance-general] rpict command for photon mapping

Yes, there must be something wrong with the rpict command on your system.  Try running "rpict -version" and "rpict -defaults" with no other options.

If those don't return, then rpict is completely broken on your system.  Perhaps it is a 64/32-bit mode issue.  I have no idea.

Best,
-Greg



From: Katsuya Obara <katsuya.obara at arup.com<mailto:katsuya.obara at arup.com>>

Date: October 30, 2016 6:17:12 PM PDT


Hi Greg,

I even don?t get ?0% done?.
Followings are the result when I tested your suggestion.
1.What happens when you run the same command without the photon maps?
I tried rpict ?t 60 ?ab 1 ?vf view.vf model.oct >test.result. Even in this case, I couldn?t get ?0% done?.
2. What happens when you run with the photon maps and -ab -1?
I tried rpict -t 60 -ap global.pmap 50 -ab -1 -vf view.vf model.oct >test.result. Also in this case, I couldn?t get ?0% done?.

Does this mean that I have problem in rpict command not in photon maps?

Thank you for your help.
Regards,
Katsuya



From: Greg Ward [mailto:gregoryjward at gmail.com]
Sent: Friday, October 28, 2016 11:32 PM
To: Radiance general discussion
Subject: Re: [Radiance-general] rpict command for photon mapping

Hi Katsuya,

With the -t 60 option, you should at least get a "0% done" message after initialization.  Is that message even showing up?  You might not see reports every 60 seconds if the scanline writes take longer than that, but you should at least get the initialization output.  If you are not seeing that, then something else must be wrong with your command, or the photon map(s) are not loading correctly.  I don't know how to verify this, other than regenerating the maps and trying again.

What happens when you run the same command without the photon maps?  What happens when you run with the photon maps and -ab -1?

Does anyone else have experience/suggestions to offer?

Cheers,
-Greg




From: Katsuya Obara <katsuya.obara at arup.com<mailto:katsuya.obara at arup.com>>

Date: October 27, 2016 6:26:41 PM PDT


Hi Greg,

Thank you for your reply.
Below is the command I tried to run for rpict.
rpict -t 60 -ap global.pmap 50 -ap caustic 200 -ab 1 -vf view.vf model.oct

Following your advice, I changed the command to add output redirection as below.
rpict -t 60 -ap global.pmap 50 -ap caustic 200 -ab 1 -vf view.vf model.oct >test.result

It seems that I could run command but it does not report any progress. Are there any specific format I should specify for output file?

Thank you!
Regards,
Katsuya

From: Greg Ward [mailto:gregoryjward at gmail.com]
To: Radiance general discussion



Can you offer any details about what process is starting all the (unsuccessful?) rpict commands?  It seems that there is no output redirection, so this is not even a command you would normally run.  What is running it for you?

Best,
-Greg





From: Katsuya Obara <katsuya.obara at arup.com<mailto:katsuya.obara at arup.com>>

Date: October 27, 2016 1:29:58 AM PDT


Hi all,

I am trying to create rendering image using photon map.
Following the photon map extension user manual, I could run mkpmap command.
But when I try to run rpict command, it seems that they keep trying to run the command and failing as following image.
Can anyone advise me what is causing this problem and how to solve it.
Thank you very much for your help!


Katsuya

____________________________________________________________
Electronic mail messages entering and leaving Arup  business
systems are scanned for acceptability of content and viruses
_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org<mailto:Radiance-general at radiance-online.org>
http://www.radiance-online.org/mailman/listinfo/radiance-general
_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org<mailto:Radiance-general at radiance-online.org>
http://www.radiance-online.org/mailman/listinfo/radiance-general
_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org<mailto:Radiance-general at radiance-online.org>
http://www.radiance-online.org/mailman/listinfo/radiance-general
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161031/98e0956c/attachment-0001.html>

From rioboo at gmail.com  Sat Oct 29 06:18:42 2016
From: rioboo at gmail.com (Victor LRG)
Date: Sat, 29 Oct 2016 14:18:42 +0100
Subject: [Radiance-general] Creating new view types for Radiance (Greg
 Ward)
Message-ID: <CADr1nSE_bYFYmtTTaPJ5CSi6k38rJOt8yvOUthMmPhKzqL-TZg@mail.gmail.com>

Hi Greg,

Many thanks for that. The view type I am testing is equirectangular
(so I've called it VT_EQR). So far I have modified the following:

common/image.c: setview, viewray and viewloc

common/view.h: Macro for new view type.

util/rad.c: specview

util/rpiece.c: same as for VT_ANG

The compilation looked generally ok with makeall, but there is an
error in my modification of ray.c:
    rad.c: In function ?specview?:
    rad.c:1224:7: error: ?VT_EQR? undeclared (first use in this function)
It is strange because I could not see any of the other types declared there.
Despite the error, rpict seemed to be working, but other programs were
missing (pfilt and pcond at least). I think they were also missing
even before changing ray.c, is that possible?
I've made a quick test and the new projection type seems to work. I've
attached the results, but I'm not sure if they can be accessed from
the mailing list. I've rendered a horizontal squared view (-vh 120 -vv
120) for the following two scenarios and different view types (VT_PER,
VT_ANG, VT_CYL and VT_EQR):

1- From the centre of a checked sphere (meridians and parallels).

2- From the centre of a box with checked walls.

So far it seems to work!, but I haven't tested all options (vo, va,
vs, vl...). Is there a standard test to check view types?

Cheers,

Victor Lopez-Rioboo Gil

---------------------------------------------------------

Hi Victor,

You are working in the right place.  Besides adding a macro for your
view type to view.h, you need to implement the correct operations and
checks in viewray() and viewloc() in image.c.  For full support, you
should also look at util/rad.c and insert your view type in some
switch statements therein.  Similarly, there is some code you need to
write to split up your view for rpiece in util/rpiece.c.

Can you be more specific when you say that your compilation is not
working?  Do you get compile errors, or is something going wrong at
run-time?

Out of curiosity, what type are you adding?

Cheers,
-Greg

>* From: goodriver laurus <rioboo at gmail.com <http://www.radiance-online.org/mailman/listinfo/radiance-general>>
*>* Date: October 28, 2016 12:08:09 AM PDT
*> >* Dear all,
*> >* I would like to try a new view type for Radiance. So far I have
included the new type in image.c and included a reference in view.h.
However, the compilation is still not working for rpict. I wonder if
that could be due to the modifications I've made (I have already
corrected a couple of small errors) or because I would need to modify
also other files. Basically, what I am asking is what files should be
considered in order to include an alternative view type for rpict and
vwrays.
*> >* Many thanks,
*> >* Victor Lopez-Rioboo Gil*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161029/b87446b5/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: cage_cube_v1_ang.png
Type: image/png
Size: 24675 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161029/b87446b5/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: cage_cube_v1_cyl.png
Type: image/png
Size: 17766 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161029/b87446b5/attachment-0009.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: cage_cube_v1_eqr.png
Type: image/png
Size: 21986 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161029/b87446b5/attachment-0010.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: cage_cube_v1_per.png
Type: image/png
Size: 24425 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161029/b87446b5/attachment-0011.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: cage_sphere_v1_ang.png
Type: image/png
Size: 20018 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161029/b87446b5/attachment-0012.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: cage_sphere_v1_cyl.png
Type: image/png
Size: 12092 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161029/b87446b5/attachment-0013.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: cage_sphere_v1_eqr.png
Type: image/png
Size: 16766 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161029/b87446b5/attachment-0014.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: cage_sphere_v1_per.png
Type: image/png
Size: 20661 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161029/b87446b5/attachment-0015.png>

From rioboo at gmail.com  Mon Oct 31 02:08:44 2016
From: rioboo at gmail.com (Victor LRG)
Date: Mon, 31 Oct 2016 09:08:44 +0000
Subject: [Radiance-general] Creating new view types for Radiance
Message-ID: <CADr1nSHDVFHSWc2TqJLX=YRYiryurzW9VtvV-xM2dh1aXmJs_w@mail.gmail.com>

Hi Greg,

Many thanks for that. The view type I am testing is equirectangular
(so I've called it VT_EQR). So far I have modified the following:

common/image.c: setview, viewray and viewloc

common/view.h: Macro for new view type.

util/rad.c: specview

util/rpiece.c: same as for VT_ANG

The compilation looked generally ok with makeall, but there is an
error in my modification of ray.c:
    rad.c: In function ?specview?:
    rad.c:1224:7: error: ?VT_EQR? undeclared (first use in this function)
It is strange because I could not see any of the other types declared there.
Despite the error, rpict seemed to be working, but other programs were
missing (pfilt and pcond at least). I think they were also missing
even before changing ray.c, is that possible?
I've made a quick test and the new projection type seems to work. I've
rendered a squared view (-vh 120 -vv 60) for the following two
scenarios and different view types (VT_PER, VT_ANG, VT_CYL and
VT_EQR):

1- From the centre of a checked sphere (meridians and parallels).

2- From the centre of a box with checked walls.

So far it seems to work!, but I haven't tested all options (vo, va,
vs, vl...). Is there a standard test to check view types?

I've Included the images below. Hopefully they will display.

cube VT_PER

[image: Inline images 3]

cube VT_ANG

[image: Inline images 4]

cube VT_CYL

[image: Inline images 2]

cube VT_EQR

[image: Inline images 5]

sphere VT_PER

[image: Inline images 6]

sphere VT_ANG

[image: Inline images 7]

sphere VT_CYL

[image: Inline images 8]

sphere VT_EQR

[image: Inline images 9]

Cheers,

Victor Lopez-Rioboo Gil

---------------------------------------------------------

Hi Victor,

You are working in the right place.  Besides adding a macro for your
view type to view.h, you need to implement the correct operations and
checks in viewray() and viewloc() in image.c.  For full support, you
should also look at util/rad.c and insert your view type in some
switch statements therein.  Similarly, there is some code you need to
write to split up your view for rpiece in util/rpiece.c.

Can you be more specific when you say that your compilation is not
working?  Do you get compile errors, or is something going wrong at
run-time?

Out of curiosity, what type are you adding?

Cheers,
-Greg

>* From: goodriver laurus <rioboo at gmail.com <http://www.radiance-online.org/mailman/listinfo/radiance-general>>
*>* Date: October 28, 2016 12:08:09 AM PDT
*> >* Dear all,
*> >* I would like to try a new view type for Radiance. So far I have
included the new type in image.c and included a reference in view.h.
However, the compilation is still not working for rpict. I wonder if
that could be due to the modifications I've made (I have already
corrected a couple of small errors) or because I would need to modify
also other files. Basically, what I am asking is what files should be
considered in order to include an alternative view type for rpict and
vwrays.
*> >* Many thanks,
*> >* Victor Lopez-Rioboo Gil*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161031/9233e0c3/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: cage_cube_v1_ang.png
Type: image/png
Size: 23315 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161031/9233e0c3/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: cage_cube_v1_cyl.png
Type: image/png
Size: 17198 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161031/9233e0c3/attachment-0009.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: cage_sphere_v1_ang.png
Type: image/png
Size: 18757 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161031/9233e0c3/attachment-0010.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: cage_sphere_v1_cyl.png
Type: image/png
Size: 11541 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161031/9233e0c3/attachment-0011.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: cage_cube_v1_eqr.png
Type: image/png
Size: 20563 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161031/9233e0c3/attachment-0012.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: cage_sphere_v1_per.png
Type: image/png
Size: 19499 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161031/9233e0c3/attachment-0013.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: cage_cube_v1_per.png
Type: image/png
Size: 23113 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161031/9233e0c3/attachment-0014.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: cage_sphere_v1_eqr.png
Type: image/png
Size: 15677 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161031/9233e0c3/attachment-0015.png>

From gregoryjward at gmail.com  Mon Oct 31 10:38:13 2016
From: gregoryjward at gmail.com (Greg Ward)
Date: Mon, 31 Oct 2016 10:38:13 -0700
Subject: [Radiance-general] Creating new view types for Radiance
In-Reply-To: <CADr1nSHDVFHSWc2TqJLX=YRYiryurzW9VtvV-xM2dh1aXmJs_w@mail.gmail.com>
References: <CADr1nSHDVFHSWc2TqJLX=YRYiryurzW9VtvV-xM2dh1aXmJs_w@mail.gmail.com>
Message-ID: <7B6A3D6A-9553-4FE7-9007-1757BE6B7072@lmi.net>

Hi Victor,

I'm glad you got this working.  I don't know why you are getting a compile error from rad.c.  If you defined the VT_EQR type in view.h, that file gets included in rad.c and therefore should be defined.  Did you check your spelling?

If pfilt and pcond are missing, it could be because the TIFF library is not compiling properly.  Try removing "ra_tiff" and "normtiff" from the targets in src/px/Rmakefile and see if it builds then.  I don't know how to fix the TIFF compiles on all systems at this point.

Are you using the equirectangular view to generate HDR texture maps, or ??  It's also relatively straightforward to create such custom views using rcalc and rtrace, without modifying the source.  The trouble with modifying the source of course is that you have to do it again with each new release.

Cheers,
-Greg

> From: Victor LRG <rioboo at gmail.com>
> Date: October 31, 2016 2:08:44 AM PDT
> 
> Hi Greg,
> Many thanks for that. The view type I am testing is equirectangular (so I've called it VT_EQR). So far I have modified the following:
> common/image.c: setview, viewray and viewloc
> common/view.h: Macro for new view type.
> util/rad.c: specview
> util/rpiece.c: same as for VT_ANG
> 
> The compilation looked generally ok with makeall, but there is an error in my modification of ray.c:
>     rad.c: In function ?specview?:
>     rad.c:1224:7: error: ?VT_EQR? undeclared (first use in this function)
> It is strange because I could not see any of the other types declared there.
> Despite the error, rpict seemed to be working, but other programs were missing (pfilt and pcond at least). I think they were also missing even before changing ray.c, is that possible?
> I've made a quick test and the new projection type seems to work. I've rendered a squared view (-vh 120 -vv 60) for the following two scenarios and different view types (VT_PER, VT_ANG, VT_CYL and VT_EQR):
> 1- From the centre of a checked sphere (meridians and parallels).
> 2- From the centre of a box with checked walls.
> So far it seems to work!, but I haven't tested all options (vo, va, vs, vl...). Is there a standard test to check view types?
> I've Included the images below. Hopefully they will display.
> cube VT_PER
> 
> cube VT_ANG
> 
> cube VT_CYL
> 
> cube VT_EQR
> 
> sphere VT_PER
> 
> sphere VT_ANG
> 
> sphere VT_CYL
> 
> sphere VT_EQR
> 
> Cheers,
> Victor Lopez-Rioboo Gil
> ---------------------------------------------------------
> Hi Victor,
> 
> You are working in the right place.  Besides adding a macro for your view type to view.h, you need to implement the correct operations and checks in viewray() and viewloc() in image.c.  For full support, you should also look at util/rad.c and insert your view type in some switch statements therein.  Similarly, there is some code you need to write to split up your view for rpiece in util/rpiece.c.
> 
> Can you be more specific when you say that your compilation is not working?  Do you get compile errors, or is something going wrong at run-time?
> 
> Out of curiosity, what type are you adding?
> 
> Cheers,
> -Greg
> 
> > From: goodriver laurus <rioboo at gmail.com>
> > Date: October 28, 2016 12:08:09 AM PDT
> > 
> > Dear all,
> > 
> > I would like to try a new view type for Radiance. So far I have included the new type in image.c and included a reference in view.h. However, the compilation is still not working for rpict. I wonder if that could be due to the modifications I've made (I have already corrected a couple of small errors) or because I would need to modify also other files. Basically, what I am asking is what files should be considered in order to include an alternative view type for rpict and vwrays.
> > 
> > Many thanks,
> > 
> > Victor Lopez-Rioboo Gil
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161031/58393c8f/attachment.html>

From H.Saini at tue.nl  Mon Oct 31 11:48:53 2016
From: H.Saini at tue.nl (Saini, H.)
Date: Mon, 31 Oct 2016 18:48:53 +0000
Subject: [Radiance-general] gendaylit
Message-ID: <AEE4755A936C67498FA3A2C445A3840610EF8E6D@xserver30b.campus.tue.nl>

Hello everyone,

While using gendaylit, I receive the following warning message and error in the outputs:

# gendaylit 5 29 12 -L 925.2 249.348 -a 41.8 -o -12.2333
Warning: sun altitude below zero at time step 5 29 12.00, printing error sky
# Local solar time: 20.86
# Solar altitude and azimuth: -13.2 135.6

But if I use a '+' sign before hour then there is no warning message:

# gendaylit 5 29 +12 -L 925.2 249.348 -a 41.8 -o -12.2333
# Local solar time: 12.00
# Solar altitude and azimuth: 69.7 -0.0

Could you please tell me what would be the possible reason for such behaviour? I want to get solar altitude and azimuth angles based on standard time and not on local solar time.

PS: I am using these Windows command prompt to execute gendaylit.

Thanks,

Hemshikha

From jacobs.axel at gmail.com  Mon Oct 31 12:57:31 2016
From: jacobs.axel at gmail.com (Axel Jacobs)
Date: Mon, 31 Oct 2016 19:57:31 +0000
Subject: [Radiance-general] gendaylit
In-Reply-To: <AEE4755A936C67498FA3A2C445A3840610EF8E6D@xserver30b.campus.tue.nl>
References: <AEE4755A936C67498FA3A2C445A3840610EF8E6D@xserver30b.campus.tue.nl>
Message-ID: <ad5be360-dcc2-dea2-3040-c44a59f18750@gmail.com>

Hi Hemshikha,

you need to include the site meridian, not just lat/lon:

-m 0 (if your time zone is GMT)

The default is -m 120

[axel at localhost ~]$ gendaylit -defaults
-g 0.200000			# Ground plane reflectance
-t 0.100000			# Atmospheric betaturbidity
-a 37.815214			# Site latitude (degrees)
-o 122.040010			# Site longitude (degrees)
-m 120.000281			# Standard meridian (degrees)

Regards

Axel


On 31/10/16 18:48, Saini, H. wrote:
> Hello everyone,
>
> While using gendaylit, I receive the following warning message and error in the outputs:
>
> # gendaylit 5 29 12 -L 925.2 249.348 -a 41.8 -o -12.2333
> Warning: sun altitude below zero at time step 5 29 12.00, printing error sky
> # Local solar time: 20.86
> # Solar altitude and azimuth: -13.2 135.6
>
> But if I use a '+' sign before hour then there is no warning message:
>
> # gendaylit 5 29 +12 -L 925.2 249.348 -a 41.8 -o -12.2333
> # Local solar time: 12.00
> # Solar altitude and azimuth: 69.7 -0.0
>
> Could you please tell me what would be the possible reason for such behaviour? I want to get solar altitude and azimuth angles based on standard time and not on local solar time.
>
> PS: I am using these Windows command prompt to execute gendaylit.
>
> Thanks,
>
> Hemshikha
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>



From roland.schregle at gmail.com  Mon Oct 31 13:34:53 2016
From: roland.schregle at gmail.com (Roland Schregle)
Date: Mon, 31 Oct 2016 21:34:53 +0100
Subject: [Radiance-general] Radiance-general] rpict command for photon
 mapping
Message-ID: <hdlwnwfmrsdmdcptdbee34cc.1477946093280@email.android.com>

Hi all,

Indeed intriguing. But how did Katsuya get mkpmap to generate a photon map in the first place? It uses the standard octree parsing routines.

--Roland


"Shakespeare, Robert A." <shakespe at indiana.edu> wrote:
>Rpict rvu objview all hang if there is an incomplete xform command... no file reference at the end.
>
>Might be irrelevant in this situation, but sometimes the less obvious is what causes headaches.
>
>
>Rob
>
>Sent from my iPad
>
>
>On Oct 31, 2016, at 11:14 AM, Greg Ward <gregoryjward at gmail.com> wrote:
>
>OK, since you verified that rpict can at least run, but you are seeing no initialization message with -t 60 and no photon map or ambient file, this seems to imply that rpict is getting stuck trying to read the octree. ?I have not seen this problem before. ?Usually, if there is a problem with the octree, it will report an error an exit. ?How was the octree generated? ?Did you try re-generating it and running rpict again?
>
>
>Cheers,
>
>-Greg
>
>
>From: Katsuya Obara <katsuya.obara at arup.com>
>
>Date: October 30, 2016 8:45:22 PM PDT
>
>
><!-- /* Font Definitions */ @font-face 	{font-family:Helvetica; 	panose-1:2 11 6 4 2 2 2 2 2 4;} @font-face 	{font-family:PMingLiU; 	panose-1:2 2 5 0 0 0 0 0 0 0;} @font-face 	{font-family:"Cambria Math"; 	panose-1:2 4 5 3 5 4 6 3 2 4;} @font-face 	{font-family:Calibri; 	panose-1:2 15 5 2 2 2 4 3 2 4;} @font-face 	{font-family:"\@PMingLiU"; 	panose-1:2 2 5 0 0 0 0 0 0 0;} /* Style Definitions */ p.MsoNormal, li.MsoNormal, div.MsoNormal 	{margin:0in; 	margin-bottom:.0001pt; 	font-size:11.0pt; 	font-family:"Calibri","sans-serif"; 	mso-fareast-language:ZH-TW;} a:link, span.MsoHyperlink 	{mso-style-priority:99; 	color:#0563C1; 	text-decoration:underline;} a:visited, span.MsoHyperlinkFollowed 	{mso-style-priority:99; 	color:#954F72; 	text-decoration:underline;} p 	{mso-style-priority:99; 	mso-margin-top-alt:auto; 	margin-right:0in; 	mso-margin-bottom-alt:auto; 	margin-left:0in; 	font-size:11.0pt; 	font-family:"Calibri","sans-serif"; 	mso-fareast-language:ZH-TW;} p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph 	{mso-style-priority:34; 	margin-top:0in; 	margin-right:0in; 	margin-bottom:0in; 	margin-left:.5in; 	margin-bottom:.0001pt; 	font-size:11.0pt; 	font-family:"Calibri","sans-serif"; 	mso-fareast-language:ZH-TW;} span.EmailStyle19 	{mso-style-type:personal; 	font-family:"Times New Roman","serif"; 	color:black; 	font-weight:normal; 	font-style:normal; 	text-decoration:none none;} span.EmailStyle20 	{mso-style-type:personal; 	font-family:"Times New Roman","serif"; 	color:#0F5573; 	font-weight:normal; 	font-style:normal; 	text-decoration:none none;} span.EmailStyle21 	{mso-style-type:personal; 	font-family:"Times New Roman","serif"; 	color:#0F5573; 	font-weight:normal; 	font-style:normal; 	text-decoration:none none;} span.EmailStyle22 	{mso-style-type:personal-reply; 	font-family:"Times New Roman","serif"; 	color:#0F5573; 	font-weight:normal; 	font-style:normal; 	text-decoration:none none;} .MsoChpDefault 	{mso-style-type:export-only; 	font-size:10.0pt;} @page WordSection1 	{size:8.5in 11.0in; 	margin:1.0in 1.0in 1.0in 1.0in;} div.WordSection1 	{page:WordSection1;} -->
>
>Hi Greg,
>
>?
>
>I could get return from following command you advise me.
>
>rpict ?version
>
>RADIANCE 5.0 Official Release 2015/09/18 by G. Ward
>
>rpict ?defaults
>
>-vtv??????????????????????????? # view type perspective
>
>-vp 0.000000 0.000000 0.000000? # view point
>
>-vd 0.000000 1.000000 0.000000? # view direction
>
>-vu 0.000000 0.000000 1.000000? # view up
>
>-vh 45.000000?????????????????? # view horizontal size
>
>-vv 45.000000?????????????????? # view vertical size
>
>-vo 0.000000??????????????????? # view fore clipping plane
>
>-va 0.000000??????????????????? # view aft clipping plane
>
>-vs 0.000000??????????????????? # view shift
>
>-vl 0.000000??????????????????? # view lift
>
>-x? 512???????????????????????? # x resolution
>
>-y? 512???????????????????????? # y resolution
>
>-pa 1.000000??????????????????? # pixel aspect ratio
>
>-pj 0.670000??????????????????? # pixel jitter
>
>-pm 0.000000??????????????????? # pixel motion
>
>-pd 0.000000??????????????????? # pixel depth-of-field
>
>-ps 4?????????????????????????? # pixel sample
>
>-pt 0.050000??????????????????? # pixel threshold
>
>-t? 0?????????????????????????? # time between reports
>
>-w+???????????????????????????? # warning messages on
>
>-i-???????????????????????????? # irradiance calculation off
>
>-u-???????????????????????????? # correlated quasi-Monte Carlo sampling
>
>-bv+??????????????????????????? # back face visibility on
>
>-dt 0.050000??????????????????? # direct threshold
>
>-dc 0.500000??????????????????? # direct certainty
>
>-dj 0.000000??????????????????? # direct jitter
>
>-ds 0.250000??????????????????? # direct sampling
>
>-dr 1?????????????????????????? # direct relays
>
>-dp 512??????????? ?????????????# direct pretest density
>
>-dv+??????????????????????????? # direct visibility on
>
>-ss 1.000000??????????????????? # specular sampling
>
>-st 0.150000??????????????????? # specular threshold
>
>-av 0.000000 0.000000 0.000000? # ambient value
>
>-aw 0???? ??????????????????????# ambient value weight
>
>-ab 0?????????????????????????? # ambient bounces
>
>-aa 0.200000??????????????????? # ambient accuracy
>
>-ar 64????????????????????????? # ambient resolution
>
>-ad 512???????????????????????? # ambient divisions
>
>-as 128???????????????????????? # ambient super-samples
>
>-me 0.00e+000 0.00e+000 0.00e+000?????? # mist extinction coefficient
>
>-ma 0.000000 0.000000 0.000000? # mist scattering albedo
>
>-mg 0.000000??????????????????? # mist scattering eccentricity
>
>-ms 0.000000?? ?????????????????# mist sampling distance
>
>-lr 7?????????????????????????? # limit reflection
>
>-lw 1.00e-003?????????????????? # limit weight
>
>-am 0.0???????????????????????? # max photon search radius
>
>?
>
>Could you come up any other idea why I cannot run rpict command?
>
>?
>
>Thank you.
>
>Katsuya
>
>?
>
>From: Greg Ward [mailto:gregoryjward at gmail.com] 
>Sent: Monday, October 31, 2016 11:00 AM
>To: Radiance general discussion
>Subject: Re: [Radiance-general] rpict command for photon mapping
>
>?
>
>Yes, there must be something wrong with the rpict command on your system. ?Try running "rpict -version" and "rpict -defaults" with no other options.
>
>?
>
>If those don't return, then rpict is completely broken on your system. ?Perhaps it is a 64/32-bit mode issue. ?I have no idea.
>
>?
>
>Best,
>
>-Greg
>
>
>
>From: Katsuya Obara <katsuya.obara at arup.com>
>
>Date: October 30, 2016 6:17:12 PM PDT
>
>?
>
>Hi Greg,
>
>?
>
>I even don?t get ?0% done?.
>
>Followings are the result when I tested your suggestion.
>
>1.What happens when you run the same command without the photon maps? ?
>
>I tried rpict ?t 60 ?ab 1 ?vf view.vf model.oct >test.result. Even in this case, I couldn?t get ?0% done?. 
>
>2. What happens when you run with the photon maps and -ab -1?
>
>I tried rpict -t 60 -ap global.pmap 50 -ab -1 -vf view.vf model.oct >test.result. Also in this case, I couldn?t get ?0% done?.
>
>?
>
>Does this mean that I have problem in rpict command not in photon maps?
>
>?
>
>Thank you for your help.
>
>Regards,
>
>Katsuya
>
>?
>
>?
>
>?
>
>From: Greg Ward [mailto:gregoryjward at gmail.com] 
>Sent: Friday, October 28, 2016 11:32 PM
>To: Radiance general discussion
>Subject: Re: [Radiance-general] rpict command for photon mapping
>
>?
>
>Hi Katsuya,
>
>?
>
>With the -t 60 option, you should at least get a "0% done" message after initialization. ?Is that message even showing up? ?You might not see reports every 60 seconds if the scanline writes take longer than that, but you should at least get the initialization output. ?If you are not seeing that, then something else must be wrong with your command, or the photon map(s) are not loading correctly. ?I don't know how to verify this, other than regenerating the maps and trying again.
>
>?
>
>What happens when you run the same command without the photon maps? ?What happens when you run with the photon maps and -ab -1?
>
>?
>
>Does anyone else have experience/suggestions to offer?
>
>?
>
>Cheers,
>
>-Greg
>
>
>
>
>From: Katsuya Obara <katsuya.obara at arup.com>
>
>Date: October 27, 2016 6:26:41 PM PDT
>
>?
>
>Hi Greg, 
>
>?
>
>Thank you for your reply.
>
>Below is the command I tried to run for rpict.
>
>rpict -t 60 -ap global.pmap 50 -ap caustic 200 -ab 1 -vf view.vf model.oct
>
>?
>
>Following your advice, I changed the command to add output redirection as below.
>
>rpict -t 60 -ap global.pmap 50 -ap caustic 200 -ab 1 -vf view.vf model.oct >test.result
>
>?
>
>It seems that I could run command but it does not report any progress. Are there any specific format I should specify for output file?
>
>?
>
>Thank you!
>
>Regards,
>
>Katsuya
>
>?
>
>From: Greg Ward [mailto:gregoryjward at gmail.com] 
>To: Radiance general discussion
>
>
>?
>
>Can you offer any details about what process is starting all the (unsuccessful?) rpict commands? ?It seems that there is no output redirection, so this is not even a command you would normally run. ?What is running it for you?
>
>?
>
>Best,
>
>-Greg
>
>
>
>
>
>From: Katsuya Obara <katsuya.obara at arup.com>
>
>Date: October 27, 2016 1:29:58 AM PDT
>
>?
>
>Hi all,
>
>?
>
>I am trying to create rendering image using photon map.
>
>Following the photon map extension user manual, I could run mkpmap command.
>
>But when I try to run rpict command, it seems that they keep trying to run the command and failing as following image.
>
>Can anyone advise me what is causing this problem and how to solve it.
>
>Thank you very much for your help!
>
>?
>
>?
>
>Katsuya
>
>____________________________________________________________
>Electronic mail messages entering and leaving Arup? business
>systems are scanned for acceptability of content and viruses
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general at radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general at radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>_______________________________________________
>Radiance-general mailing list
>Radiance-general at radiance-online.org
>http://www.radiance-online.org/mailman/listinfo/radiance-general
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161031/b15a4a4e/attachment-0001.html>

From stephen at coolshadow.com  Mon Oct 31 16:08:52 2016
From: stephen at coolshadow.com (Stephen Wasilewski)
Date: Mon, 31 Oct 2016 16:08:52 -0700
Subject: [Radiance-general] texfunc with -aa 0
Message-ID: <CAK5mS-9+rP6yfzYQgMWG03TpcS1q3OzRQtatcYnvgcvRH4bcfQ@mail.gmail.com>

Does anyone know why a texfunc has no effect on the material it modifies
with -aa 0?  The same material/geometry/octree appear as expected with -aa
> 0.

Thanks,

Stephen Wasilewski
*LOISOS *+* UBBELOHDE*
- - - - - - - - - - - - - - - - - - - - - - - - - - -
1917 Clement Avenue  Building 10A
Alameda, CA  94501 USA
- - - - - - - - - - - - - - - - - - - - - - - - - - -
510 521 3800 VOICE
510 521 3820 FAX
- - - - - - - - - - - - - - - - - - - - - - - - - - -
www.coolshadow.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161031/5f9fd79f/attachment.html>

From gregoryjward at gmail.com  Mon Oct 31 16:26:18 2016
From: gregoryjward at gmail.com (Greg Ward)
Date: Mon, 31 Oct 2016 16:26:18 -0700
Subject: [Radiance-general] texfunc with -aa 0
In-Reply-To: <CAK5mS-9+rP6yfzYQgMWG03TpcS1q3OzRQtatcYnvgcvRH4bcfQ@mail.gmail.com>
References: <CAK5mS-9+rP6yfzYQgMWG03TpcS1q3OzRQtatcYnvgcvRH4bcfQ@mail.gmail.com>
Message-ID: <C792A2E6-D1B8-49A6-A7B7-BAB18A8166AA@lmi.net>

Hi Stephen,

A texfunc perturbs the surface normal, which should be visible at least in directly lit areas with -ab 0.  Are you saying that you have directly lit surfaces that look flat with a texfunc applied?  That would be unexpected.

In the shadows, there is nothing for a perturbation in the surface normal to affect, so everything looks the same as it would without the texfunc.  With -ab 1, you see variation again, as the surface normal influences the shading of the indirect component.

-Greg

> From: Stephen Wasilewski <stephen at coolshadow.com>
> Date: October 31, 2016 4:08:52 PM PDT
> 
> Does anyone know why a texfunc has no effect on the material it modifies with -aa 0?  The same material/geometry/octree appear as expected with -aa > 0.
> 
> Thanks,
>  
> Stephen Wasilewski
> LOISOS + UBBELOHDE
> - - - - - - - - - - - - - - - - - - - - - - - - - - - 
> 1917 Clement Avenue  Building 10A
> Alameda, CA  94501 USA
> - - - - - - - - - - - - - - - - - - - - - - - - - - - 
> 510 521 3800 VOICE
> 510 521 3820 FAX
> - - - - - - - - - - - - - - - - - - - - - - - - - - - 
> www.coolshadow.com
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161031/716c0022/attachment.html>

From j.a.sargent at gmail.com  Mon Oct 31 17:13:18 2016
From: j.a.sargent at gmail.com (Jon Sargent)
Date: Mon, 31 Oct 2016 17:13:18 -0700
Subject: [Radiance-general] texfunc with -aa 0
In-Reply-To: <C792A2E6-D1B8-49A6-A7B7-BAB18A8166AA@lmi.net>
References: <CAK5mS-9+rP6yfzYQgMWG03TpcS1q3OzRQtatcYnvgcvRH4bcfQ@mail.gmail.com>
 <C792A2E6-D1B8-49A6-A7B7-BAB18A8166AA@lmi.net>
Message-ID: <CAE4vRsZsh0ByvqGvJr1m-d89FgQQifv_XkUEK8tuQF8Y0b4z2g@mail.gmail.com>

Barring Greg's low-ab hypothesis, is it possible the "expected" texture you
see with -aa > 0 is really an interpolation artifact?

In my experience textfuncs should reveal themselves @ -aa 0.  E.g.,

shiny linoleum floor, perfectly smooth:


?

shiny linoleum floor, with wave and microbump texfunc modifiers:


?
?
(Both with -ab 2).

Jon

On Mon, Oct 31, 2016 at 4:26 PM, Greg Ward <gregoryjward at gmail.com> wrote:

> Hi Stephen,
>
> A texfunc perturbs the surface normal, which should be visible at least in
> directly lit areas with -ab 0.  Are you saying that you have directly lit
> surfaces that look flat with a texfunc applied?  That would be unexpected.
>
> In the shadows, there is nothing for a perturbation in the surface normal
> to affect, so everything looks the same as it would without the texfunc.
> With -ab 1, you see variation again, as the surface normal influences the
> shading of the indirect component.
>
> -Greg
>
> *From: *Stephen Wasilewski <stephen at coolshadow.com>
>
> *Date: *October 31, 2016 4:08:52 PM PDT
>
>
> Does anyone know why a texfunc has no effect on the material it modifies
> with -aa 0?  The same material/geometry/octree appear as expected with -aa
> > 0.
>
> Thanks,
>
> Stephen Wasilewski
> *LOISOS *+* UBBELOHDE*
> - - - - - - - - - - - - - - - - - - - - - - - - - - -
> 1917 Clement Avenue  Building 10A
> Alameda, CA  94501 USA
> - - - - - - - - - - - - - - - - - - - - - - - - - - -
> 510 521 3800 VOICE
> 510 521 3820 FAX
> - - - - - - - - - - - - - - - - - - - - - - - - - - -
> www.coolshadow.com
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> http://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161031/b30f99d4/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: MatTest_1_1_12.00_ClearSkyWithSun.jpg
Type: image/jpeg
Size: 60362 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161031/b30f99d4/attachment-0002.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: notex_1_1_12.00_ClearSkyWithSun.jpg
Type: image/jpeg
Size: 60574 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161031/b30f99d4/attachment-0003.jpg>

From katsuya.obara at arup.com  Mon Oct 31 20:23:55 2016
From: katsuya.obara at arup.com (Katsuya Obara)
Date: Tue, 1 Nov 2016 03:23:55 +0000
Subject: [Radiance-general] Radiance-general] rpict command for photon
 mapping
In-Reply-To: <hdlwnwfmrsdmdcptdbee34cc.1477946093280@email.android.com>
References: <hdlwnwfmrsdmdcptdbee34cc.1477946093280@email.android.com>
Message-ID: <AAD4C5B99DCE7E4EA05016103A8F236B2C6075@E-AEXMBX10.global.arup.com>

Hi Greg,

I have tried regenerating octree and run rpict again as following command.
oconv -f materials.mat Balcony.rad glass.rad inside.rad Volume.rad lightshelf.rad sky_M6D10T13.rad >model.oct
mkpmap -apg global.pmap 50000 -t 60 model.oct
I could run successfully until mkpmap and got global.pmap. But when I tried to run rpict as following, I get test.txt file just repeating following command.
rpict -t 60 -ap global.pmap 50 -ab -1 -vf view.vf model.oct >> test.txt

Are there any way to confirm whether calculated photon map file( in this case global.pmap) is correct or not?

Regards,
Katsuya

From: Roland Schregle [mailto:roland.schregle at gmail.com]
Sent: Tuesday, November 01, 2016 4:35 AM
To: Radiance general discussion
Subject: Re: [Radiance-general] Radiance-general] rpict command for photon mapping

Hi all,

Indeed intriguing. But how did Katsuya get mkpmap to generate a photon map in the first place? It uses the standard octree parsing routines.

--Roland


"Shakespeare, Robert A." <shakespe at indiana.edu<mailto:shakespe at indiana.edu>> wrote:
Rpict rvu objview all hang if there is an incomplete xform command... no file reference at the end.
Might be irrelevant in this situation, but sometimes the less obvious is what causes headaches.

Rob

Sent from my iPad

On Oct 31, 2016, at 11:14 AM, Greg Ward <gregoryjward at gmail.com<mailto:gregoryjward at gmail.com>> wrote:
OK, since you verified that rpict can at least run, but you are seeing no initialization message with -t 60 and no photon map or ambient file, this seems to imply that rpict is getting stuck trying to read the octree.  I have not seen this problem before.  Usually, if there is a problem with the octree, it will report an error an exit.  How was the octree generated?  Did you try re-generating it and running rpict again?

Cheers,
-Greg



From: Katsuya Obara <katsuya.obara at arup.com<mailto:katsuya.obara at arup.com>>

Date: October 30, 2016 8:45:22 PM PDT


Hi Greg,

I could get return from following command you advise me.
rpict ?version
RADIANCE 5.0 Official Release 2015/09/18 by G. Ward
rpict ?defaults
-vtv                            # view type perspective
-vp 0.000000 0.000000 0.000000  # view point
-vd 0.000000 1.000000 0.000000  # view direction
-vu 0.000000 0.000000 1.000000  # view up
-vh 45.000000                   # view horizontal size
-vv 45.000000                   # view vertical size
-vo 0.000000                    # view fore clipping plane
-va 0.000000                    # view aft clipping plane
-vs 0.000000                    # view shift
-vl 0.000000                    # view lift
-x  512                         # x resolution
-y  512                         # y resolution
-pa 1.000000                    # pixel aspect ratio
-pj 0.670000                    # pixel jitter
-pm 0.000000                    # pixel motion
-pd 0.000000                    # pixel depth-of-field
-ps 4                           # pixel sample
-pt 0.050000                    # pixel threshold
-t  0                           # time between reports
-w+                             # warning messages on
-i-                             # irradiance calculation off
-u-                             # correlated quasi-Monte Carlo sampling
-bv+                            # back face visibility on
-dt 0.050000                    # direct threshold
-dc 0.500000                    # direct certainty
-dj 0.000000                    # direct jitter
-ds 0.250000                    # direct sampling
-dr 1                           # direct relays
-dp 512                         # direct pretest density
-dv+                            # direct visibility on
-ss 1.000000                    # specular sampling
-st 0.150000                    # specular threshold
-av 0.000000 0.000000 0.000000  # ambient value
-aw 0                           # ambient value weight
-ab 0                           # ambient bounces
-aa 0.200000                    # ambient accuracy
-ar 64                          # ambient resolution
-ad 512                         # ambient divisions
-as 128                         # ambient super-samples
-me 0.00e+000 0.00e+000 0.00e+000       # mist extinction coefficient
-ma 0.000000 0.000000 0.000000  # mist scattering albedo
-mg 0.000000                    # mist scattering eccentricity
-ms 0.000000                    # mist sampling distance
-lr 7                           # limit reflection
-lw 1.00e-003                   # limit weight
-am 0.0                         # max photon search radius

Could you come up any other idea why I cannot run rpict command?

Thank you.
Katsuya

From: Greg Ward [mailto:gregoryjward at gmail.com]
Sent: Monday, October 31, 2016 11:00 AM
To: Radiance general discussion
Subject: Re: [Radiance-general] rpict command for photon mapping

Yes, there must be something wrong with the rpict command on your system.  Try running "rpict -version" and "rpict -defaults" with no other options.

If those don't return, then rpict is completely broken on your system.  Perhaps it is a 64/32-bit mode issue.  I have no idea.

Best,
-Greg


From: Katsuya Obara <katsuya.obara at arup.com<mailto:katsuya.obara at arup.com>>

Date: October 30, 2016 6:17:12 PM PDT


Hi Greg,

I even don?t get ?0% done?.
Followings are the result when I tested your suggestion.
1.What happens when you run the same command without the photon maps?
I tried rpict ?t 60 ?ab 1 ?vf view.vf model.oct >test.result. Even in this case, I couldn?t get ?0% done?.
2. What happens when you run with the photon maps and -ab -1?
I tried rpict -t 60 -ap global.pmap 50 -ab -1 -vf view.vf model.oct >test.result. Also in this case, I couldn?t get ?0% done?.

Does this mean that I have problem in rpict command not in photon maps?

Thank you for your help.
Regards,
Katsuya



From: Greg Ward [mailto:gregoryjward at gmail.com]
Sent: Friday, October 28, 2016 11:32 PM
To: Radiance general discussion
Subject: Re: [Radiance-general] rpict command for photon mapping

Hi Katsuya,

With the -t 60 option, you should at least get a "0% done" message after initialization.  Is that message even showing up?  You might not see reports every 60 seconds if the scanline writes take longer than that, but you should at least get the initialization output.  If you are not seeing that, then something else must be wrong with your command, or the photon map(s) are not loading correctly.  I don't know how to verify this, other than regenerating the maps and trying again.

What happens when you run the same command without the photon maps?  What happens when you run with the photon maps and -ab -1?

Does anyone else have experience/suggestions to offer?

Cheers,
-Greg



From: Katsuya Obara <katsuya.obara at arup.com<mailto:katsuya.obara at arup.com>>

Date: October 27, 2016 6:26:41 PM PDT


Hi Greg,

Thank you for your reply.
Below is the command I tried to run for rpict.
rpict -t 60 -ap global.pmap 50 -ap caustic 200 -ab 1 -vf view.vf model.oct

Following your advice, I changed the command to add output redirection as below.
rpict -t 60 -ap global.pmap 50 -ap caustic 200 -ab 1 -vf view.vf model.oct >test.result

It seems that I could run command but it does not report any progress. Are there any specific format I should specify for output file?

Thank you!
Regards,
Katsuya

From: Greg Ward [mailto:gregoryjward at gmail.com]
To: Radiance general discussion


Can you offer any details about what process is starting all the (unsuccessful?) rpict commands?  It seems that there is no output redirection, so this is not even a command you would normally run.  What is running it for you?

Best,
-Greg




From: Katsuya Obara <katsuya.obara at arup.com<mailto:katsuya.obara at arup.com>>

Date: October 27, 2016 1:29:58 AM PDT


Hi all,

I am trying to create rendering image using photon map.
Following the photon map extension user manual, I could run mkpmap command.
But when I try to run rpict command, it seems that they keep trying to run the command and failing as following image.
Can anyone advise me what is causing this problem and how to solve it.
Thank you very much for your help!


Katsuya

____________________________________________________________
Electronic mail messages entering and leaving Arup  business
systems are scanned for acceptability of content and viruses
_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org<mailto:Radiance-general at radiance-online.org>
http://www.radiance-online.org/mailman/listinfo/radiance-general
_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org<mailto:Radiance-general at radiance-online.org>
http://www.radiance-online.org/mailman/listinfo/radiance-general
_______________________________________________
Radiance-general mailing list
Radiance-general at radiance-online.org<mailto:Radiance-general at radiance-online.org>
http://www.radiance-online.org/mailman/listinfo/radiance-general
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20161101/3c78b17c/attachment-0001.html>

