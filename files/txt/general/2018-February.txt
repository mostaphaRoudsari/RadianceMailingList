From kalyanam at rhrk.uni-kl.de  Tue Feb  6 05:21:59 2018
From: kalyanam at rhrk.uni-kl.de (raghuram kalyanam)
Date: Tue, 6 Feb 2018 14:21:59 +0100
Subject: [Radiance-general] Faulty fisheye HDR, DGP always 1.0
Message-ID: <630D4677-442D-4EE1-91D4-84F3A5ADDFDD@rhrk.uni-kl.de>

Hi All,

I am trying to asses visual discomfort  using fisheye HDR images. We generated HDR image from a set of 360 degree LDRs and then converted to fisheye HDR ( using a custom made tools). The intension was to use these Fisheye HDRs as input to Evalglare and get DGP value. The Camera used is Ricoh Theta V 360 degree camera.

The problem I am facing is, the DGP calculated from the generated fisheye HDR with Evalglare is always 1.0. We did the calibration but I would like to have expert opinion from you people, what is going wrong with these set of images. Here is the link <https://seafile.rlp.net/f/0212995d110648d38032/?dl=1> to the pictures.

It would be great if anyone could identify the issue.

Best Regards,
Raghu

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20180206/a3eb3069/attachment.html>

From gregoryjward at gmail.com  Tue Feb  6 08:05:24 2018
From: gregoryjward at gmail.com (Greg Ward)
Date: Tue, 6 Feb 2018 08:05:24 -0800
Subject: [Radiance-general] Faulty fisheye HDR, DGP always 1.0
In-Reply-To: <630D4677-442D-4EE1-91D4-84F3A5ADDFDD@rhrk.uni-kl.de>
References: <630D4677-442D-4EE1-91D4-84F3A5ADDFDD@rhrk.uni-kl.de>
Message-ID: <590FB067-74B3-456D-B0E2-3E3F9C32BCAE@lmi.net>

Hi Raghu,

It looks like your HDR image header is missing the necessary view information.  Typically, this might be something like:

VIEW= -vta -vh 180 -vv 180

for a perspective such as yours.  You should be sure that your fisheye mapping corresponds to one of the standard Radiance types.

Best,
-Greg

> From: raghuram kalyanam <kalyanam at rhrk.uni-kl.de>
> Date: February 6, 2018 5:21:59 AM PST
> 
> Hi All,
> 
> I am trying to asses visual discomfort  using fisheye HDR images. We generated HDR image from a set of 360 degree LDRs and then converted to fisheye HDR ( using a custom made tools). The intension was to use these Fisheye HDRs as input to Evalglare and get DGP value. The Camera used is Ricoh Theta V 360 degree camera.
> 
> The problem I am facing is, the DGP calculated from the generated fisheye HDR with Evalglare is always 1.0. We did the calibration but I would like to have expert opinion from you people, what is going wrong with these set of images. Here is the link to the pictures.
> 
> It would be great if anyone could identify the issue.
> 
> Best Regards,
> Raghu
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20180206/0221ff36/attachment.html>

From kalyanam at rhrk.uni-kl.de  Tue Feb  6 09:05:41 2018
From: kalyanam at rhrk.uni-kl.de (raghuram kalyanam)
Date: Tue, 6 Feb 2018 18:05:41 +0100
Subject: [Radiance-general] Faulty fisheye HDR, DGP always 1.0
In-Reply-To: <590FB067-74B3-456D-B0E2-3E3F9C32BCAE@lmi.net>
References: <630D4677-442D-4EE1-91D4-84F3A5ADDFDD@rhrk.uni-kl.de>
 <590FB067-74B3-456D-B0E2-3E3F9C32BCAE@lmi.net>
Message-ID: <1DF6CE46-4230-491A-8191-2625D6549983@rhrk.uni-kl.de>

Hi Greg,

I added these options while passing to evalglare like below.

evalglare -vta -vh 180 -vv 180 <hdr file>, and it worked but it always gives 1.0 as DGP (even other parameters are out of bounds).

With out those options evalglare throws an error.

Apart from that

Are all the LDR?s provided, valid to combine into HDR?

I doubt if one or more of the LDR?s is the culprit (especially something to do with over or under exposure).

Best Regards,
Raghu

> On Feb 6, 2018, at 5:05 PM, Greg Ward <gregoryjward at gmail.com> wrote:
> 
> Hi Raghu,
> 
> It looks like your HDR image header is missing the necessary view information.  Typically, this might be something like:
> 
> VIEW= -vta -vh 180 -vv 180
> 
> for a perspective such as yours.  You should be sure that your fisheye mapping corresponds to one of the standard Radiance types.
> 
> Best,
> -Greg
> 
>> From: raghuram kalyanam <kalyanam at rhrk.uni-kl.de <mailto:kalyanam at rhrk.uni-kl.de>>
>> Date: February 6, 2018 5:21:59 AM PST
>> 
>> Hi All,
>> 
>> I am trying to asses visual discomfort  using fisheye HDR images. We generated HDR image from a set of 360 degree LDRs and then converted to fisheye HDR ( using a custom made tools). The intension was to use these Fisheye HDRs as input to Evalglare and get DGP value. The Camera used is Ricoh Theta V 360 degree camera.
>> 
>> The problem I am facing is, the DGP calculated from the generated fisheye HDR with Evalglare is always 1.0. We did the calibration but I would like to have expert opinion from you people, what is going wrong with these set of images. Here is the link <https://seafile.rlp.net/f/0212995d110648d38032/?dl=1> to the pictures.
>> 
>> It would be great if anyone could identify the issue.
>> 
>> Best Regards,
>> Raghu
>> 
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> https://www.radiance-online.org/mailman/listinfo/radiance-general

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20180206/5bec4f7d/attachment.html>

From jan.wienold at epfl.ch  Tue Feb  6 09:17:40 2018
From: jan.wienold at epfl.ch (Jan Wienold)
Date: Tue, 6 Feb 2018 18:17:40 +0100
Subject: [Radiance-general] Faulty fisheye HDR, DGP always 1.0
In-Reply-To: <630D4677-442D-4EE1-91D4-84F3A5ADDFDD@rhrk.uni-kl.de>
References: <630D4677-442D-4EE1-91D4-84F3A5ADDFDD@rhrk.uni-kl.de>
Message-ID: <b1c9851f-cad5-c306-2b40-6da25dd49d63@epfl.ch>

Hi Raghu,

it is very simple: your HDR image is simply not correct...

The luminance of your blue sky is more than 400000 cd/m2 and the floor 
has more than 200000 cd/m2? you really have a problem in your hdr 
generation or calibration... maybe you have used an additional factor 
179? in the image???

Of course with these high values DGP gets 1...

good luck
Jan



On 06.02.18 14:21, raghuram kalyanam wrote:
> Hi All,
>
> I am trying to asses visual discomfort ?using fisheye HDR images. We 
> generated HDR image from a set of 360 degree LDRs and then converted 
> to fisheye HDR ( using a custom made tools). The intension was to use 
> these Fisheye HDRs as input to Evalglare and get DGP value. The Camera 
> used is Ricoh Theta V 360 degree camera.
>
> The problem I am facing is, the DGP calculated from the generated 
> fisheye HDR with Evalglare is always 1.0. We did the calibration but I 
> would like to have expert opinion from you people, what is going wrong 
> with these set of images. Here is the link 
> <https://seafile.rlp.net/f/0212995d110648d38032/?dl=1>?to the pictures.
>
> It would be great if anyone could identify the issue.
>
> Best Regards,
> Raghu
>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> https://www.radiance-online.org/mailman/listinfo/radiance-general

-- 
Dr.-Ing.  Jan Wienold
Ecole Polytechnique F?d?rale de Lausanne (EPFL)
EPFL ENAC IA LIPID

http://people.epfl.ch/jan.wienold
LE 1 111 (Office)
Phone    +41 21 69 30849

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20180206/6f27008d/attachment-0001.html>

From gregoryjward at gmail.com  Tue Feb  6 09:18:43 2018
From: gregoryjward at gmail.com (Greg Ward)
Date: Tue, 6 Feb 2018 09:18:43 -0800
Subject: [Radiance-general] Faulty fisheye HDR, DGP always 1.0
In-Reply-To: <1DF6CE46-4230-491A-8191-2625D6549983@rhrk.uni-kl.de>
References: <630D4677-442D-4EE1-91D4-84F3A5ADDFDD@rhrk.uni-kl.de>
 <590FB067-74B3-456D-B0E2-3E3F9C32BCAE@lmi.net>
 <1DF6CE46-4230-491A-8191-2625D6549983@rhrk.uni-kl.de>
Message-ID: <A4665DE7-4779-4E6A-A9ED-A39AF795E359@lmi.net>

Hi Raghu,

We may need to wait to hear from Jan or someone who understands evalglare better than I do.  I don't think there is a problem with your HDR image as you generated it.

-Greg

> From: raghuram kalyanam <kalyanam at rhrk.uni-kl.de>
> Date: February 6, 2018 9:05:41 AM PST
> 
> Hi Greg,
> 
> I added these options while passing to evalglare like below.
> 
> evalglare -vta -vh 180 -vv 180 <hdr file>, and it worked but it always gives 1.0 as DGP (even other parameters are out of bounds).
> 
> With out those options evalglare throws an error.
> 
> Apart from that
> 
> Are all the LDR?s provided, valid to combine into HDR?
> 
> I doubt if one or more of the LDR?s is the culprit (especially something to do with over or under exposure).
> 
> Best Regards,
> Raghu
> 
>> On Feb 6, 2018, at 5:05 PM, Greg Ward <gregoryjward at gmail.com> wrote:
>> 
>> Hi Raghu,
>> 
>> It looks like your HDR image header is missing the necessary view information.  Typically, this might be something like:
>> 
>> VIEW= -vta -vh 180 -vv 180
>> 
>> for a perspective such as yours.  You should be sure that your fisheye mapping corresponds to one of the standard Radiance types.
>> 
>> Best,
>> -Greg
>> 
>>> From: raghuram kalyanam <kalyanam at rhrk.uni-kl.de>
>>> Date: February 6, 2018 5:21:59 AM PST
>>> 
>>> Hi All,
>>> 
>>> I am trying to asses visual discomfort  using fisheye HDR images. We generated HDR image from a set of 360 degree LDRs and then converted to fisheye HDR ( using a custom made tools). The intension was to use these Fisheye HDRs as input to Evalglare and get DGP value. The Camera used is Ricoh Theta V 360 degree camera.
>>> 
>>> The problem I am facing is, the DGP calculated from the generated fisheye HDR with Evalglare is always 1.0. We did the calibration but I would like to have expert opinion from you people, what is going wrong with these set of images. Here is the link to the pictures.
>>> 
>>> It would be great if anyone could identify the issue.
>>> 
>>> Best Regards,
>>> Raghu
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20180206/fa20e14c/attachment.html>

From jan.wienold at epfl.ch  Tue Feb  6 09:24:54 2018
From: jan.wienold at epfl.ch (Jan Wienold)
Date: Tue, 6 Feb 2018 18:24:54 +0100
Subject: [Radiance-general] Faulty fisheye HDR, DGP always 1.0
In-Reply-To: <A4665DE7-4779-4E6A-A9ED-A39AF795E359@lmi.net>
References: <630D4677-442D-4EE1-91D4-84F3A5ADDFDD@rhrk.uni-kl.de>
 <590FB067-74B3-456D-B0E2-3E3F9C32BCAE@lmi.net>
 <1DF6CE46-4230-491A-8191-2625D6549983@rhrk.uni-kl.de>
 <A4665DE7-4779-4E6A-A9ED-A39AF795E359@lmi.net>
Message-ID: <db8a0d61-a095-5975-8f81-ea105a9dad7d@epfl.ch>

was it taken on mercury ? ;-)

the luminances are far off... it sums up to more than 600000 lux
Jan


On 06.02.18 18:18, Greg Ward wrote:
> Hi Raghu,
>
> We may need to wait to hear from Jan or someone who understands 
> evalglare better than I do. ?I don't think there is a problem with 
> your HDR image as you generated it.
>
> -Greg
>
>> *From: *raghuram kalyanam <kalyanam at rhrk.uni-kl.de 
>> <mailto:kalyanam at rhrk.uni-kl.de>>
>>
>> *Date: *February 6, 2018 9:05:41 AM PST
>>
>> *
>> *
>>
>> Hi Greg,
>>
>> I added these options while passing to evalglare like below.
>>
>> evalglare -vta -vh 180 -vv 180 <hdr file>, and it worked but it 
>> always gives 1.0 as DGP (even other parameters are out of bounds).
>>
>> With out those options evalglare throws an error.
>>
>> Apart from that
>>
>> Are all the LDR?s provided, valid to combine into HDR?
>>
>> I doubt if one or more of the LDR?s is the culprit (especially 
>> something to do with over or under exposure).
>>
>> Best Regards,
>> Raghu
>>
>>> On Feb 6, 2018, at 5:05 PM, Greg Ward <gregoryjward at gmail.com 
>>> <mailto:gregoryjward at gmail.com>> wrote:
>>>
>>> Hi Raghu,
>>>
>>> It looks like your HDR image header is missing the necessary view 
>>> information. ?Typically, this might be something like:
>>>
>>> VIEW= -vta -vh 180 -vv 180
>>>
>>> for a perspective such as yours. ?You should be sure that your 
>>> fisheye mapping corresponds to one of the standard Radiance types.
>>>
>>> Best,
>>> -Greg
>>>
>>>> *From: *raghuram kalyanam <kalyanam at rhrk.uni-kl.de 
>>>> <mailto:kalyanam at rhrk.uni-kl.de>>
>>>> *Date: *February 6, 2018 5:21:59 AM PST
>>>> *
>>>> *
>>>> Hi All,
>>>>
>>>> I am trying to asses visual discomfort ?using fisheye HDR images. 
>>>> We generated HDR image from a set of 360 degree LDRs and then 
>>>> converted to fisheye HDR ( using a custom made tools). The 
>>>> intension was to use these Fisheye HDRs as input to Evalglare and 
>>>> get DGP value. The Camera used is Ricoh Theta V 360 degree camera.
>>>>
>>>> The problem I am facing is, the DGP calculated from the generated 
>>>> fisheye HDR with Evalglare is always 1.0. We did the calibration 
>>>> but I would like to have expert opinion from you people, what is 
>>>> going wrong with these set of images. Here is the link 
>>>> <https://seafile.rlp.net/f/0212995d110648d38032/?dl=1>?to the pictures.
>>>>
>>>> It would be great if anyone could identify the issue.
>>>>
>>>> Best Regards,
>>>> Raghu
>>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> https://www.radiance-online.org/mailman/listinfo/radiance-general

-- 
Dr.-Ing.  Jan Wienold
Ecole Polytechnique F?d?rale de Lausanne (EPFL)
EPFL ENAC IA LIPID

http://people.epfl.ch/jan.wienold
LE 1 111 (Office)
Phone    +41 21 69 30849

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20180206/b5e76564/attachment.html>

From gregoryjward at gmail.com  Tue Feb  6 09:45:19 2018
From: gregoryjward at gmail.com (Greg Ward)
Date: Tue, 6 Feb 2018 09:45:19 -0800
Subject: [Radiance-general] Faulty fisheye HDR, DGP always 1.0
In-Reply-To: <db8a0d61-a095-5975-8f81-ea105a9dad7d@epfl.ch>
References: <630D4677-442D-4EE1-91D4-84F3A5ADDFDD@rhrk.uni-kl.de>
 <590FB067-74B3-456D-B0E2-3E3F9C32BCAE@lmi.net>
 <1DF6CE46-4230-491A-8191-2625D6549983@rhrk.uni-kl.de>
 <A4665DE7-4779-4E6A-A9ED-A39AF795E359@lmi.net>
 <db8a0d61-a095-5975-8f81-ea105a9dad7d@epfl.ch>
Message-ID: <21BD07FC-4670-4573-900C-E62B62E1B4E0@lmi.net>

Ha.  Jan is right -- the HDR values are way off.  I should have looked at the result more closely and noticed that everything was too bright.

I can take your JPEGs and give them to Photosphere or hdrgen, combining them using a generic response function.  I cannot solve for the camera response with these inputs, which likely means that the camera is playing around with the tone curve on the different exposures.  This is a no-no, and indicates that the camera is probably not suitable for HDR capture.  Nevertheless, hdrgen can create something usable that does not agree at all with your result.

By the way, your shortest exposure is still clipping the sun, which means that your DGP won't be accurate for this scene, even if you can get your HDR builder to work unless you can get a shorter exposure.

Cheers,
-Greg

> From: Jan Wienold <jan.wienold at epfl.ch>
> Date: February 6, 2018 9:24:54 AM PST
> was it taken on mercury ? ;-)
> the luminances are far off... it sums up to more than 600000 lux 
> Jan 
> 
> 
> On 06.02.18 18:18, Greg Ward wrote:
>> Hi Raghu,
>> 
>> We may need to wait to hear from Jan or someone who understands evalglare better than I do.  I don't think there is a problem with your HDR image as you generated it.
>> 
>> -Greg
>> 
>>> From: raghuram kalyanam <kalyanam at rhrk.uni-kl.de>
>>> Date: February 6, 2018 9:05:41 AM PST
>>> 
>>> Hi Greg,
>>> 
>>> I added these options while passing to evalglare like below.
>>> 
>>> evalglare -vta -vh 180 -vv 180 <hdr file>, and it worked but it always gives 1.0 as DGP (even other parameters are out of bounds).
>>> 
>>> With out those options evalglare throws an error.
>>> 
>>> Apart from that
>>> 
>>> Are all the LDR?s provided, valid to combine into HDR?
>>> 
>>> I doubt if one or more of the LDR?s is the culprit (especially something to do with over or under exposure).
>>> 
>>> Best Regards,
>>> Raghu
>>> 
>>>> On Feb 6, 2018, at 5:05 PM, Greg Ward <gregoryjward at gmail.com> wrote:
>>>> 
>>>> Hi Raghu,
>>>> 
>>>> It looks like your HDR image header is missing the necessary view information.  Typically, this might be something like:
>>>> 
>>>> VIEW= -vta -vh 180 -vv 180
>>>> 
>>>> for a perspective such as yours.  You should be sure that your fisheye mapping corresponds to one of the standard Radiance types.
>>>> 
>>>> Best,
>>>> -Greg
>>>> 
>>>>> From: raghuram kalyanam <kalyanam at rhrk.uni-kl.de>
>>>>> Date: February 6, 2018 5:21:59 AM PST
>>>>> 
>>>>> Hi All,
>>>>> 
>>>>> I am trying to asses visual discomfort  using fisheye HDR images. We generated HDR image from a set of 360 degree LDRs and then converted to fisheye HDR ( using a custom made tools). The intension was to use these Fisheye HDRs as input to Evalglare and get DGP value. The Camera used is Ricoh Theta V 360 degree camera.
>>>>> 
>>>>> The problem I am facing is, the DGP calculated from the generated fisheye HDR with Evalglare is always 1.0. We did the calibration but I would like to have expert opinion from you people, what is going wrong with these set of images. Here is the link to the pictures.
>>>>> 
>>>>> It would be great if anyone could identify the issue.
>>>>> 
>>>>> Best Regards,
>>>>> Raghu
>>> 
>> 
>> 
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org
>> https://www.radiance-online.org/mailman/listinfo/radiance-general
> 
> -- 
> Dr.-Ing.  Jan Wienold
> Ecole Polytechnique F?d?rale de Lausanne (EPFL)
> EPFL ENAC IA LIPID
> 
> http://people.epfl.ch/jan.wienold
> LE 1 111 (Office)
> Phone    +41 21 69 30849
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> https://www.radiance-online.org/mailman/listinfo/radiance-general
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20180206/05a0d9bd/attachment-0001.html>

From gregoryjward at gmail.com  Tue Feb  6 09:46:23 2018
From: gregoryjward at gmail.com (Gregory J. Ward)
Date: Tue, 6 Feb 2018 09:46:23 -0800
Subject: [Radiance-general] Faulty fisheye HDR, DGP always 1.0
In-Reply-To: <21BD07FC-4670-4573-900C-E62B62E1B4E0@lmi.net>
References: <630D4677-442D-4EE1-91D4-84F3A5ADDFDD@rhrk.uni-kl.de>
 <590FB067-74B3-456D-B0E2-3E3F9C32BCAE@lmi.net>
 <1DF6CE46-4230-491A-8191-2625D6549983@rhrk.uni-kl.de>
 <A4665DE7-4779-4E6A-A9ED-A39AF795E359@lmi.net>
 <db8a0d61-a095-5975-8f81-ea105a9dad7d@epfl.ch>
 <21BD07FC-4670-4573-900C-E62B62E1B4E0@lmi.net>
Message-ID: <AE69EB41-E6D8-4625-8A89-183DA5BFB3CD@gmail.com>

P.S.  We should move this discussion to the HDRI mailing list, since it is not a problem with evalglare or any Radiance tools.

> From: Greg Ward <gward at lmi.net>
> Date: February 6, 2018 9:45:19 AM PST
> 
> Ha.  Jan is right -- the HDR values are way off.  I should have looked at the result more closely and noticed that everything was too bright.
> 
> I can take your JPEGs and give them to Photosphere or hdrgen, combining them using a generic response function.  I cannot solve for the camera response with these inputs, which likely means that the camera is playing around with the tone curve on the different exposures.  This is a no-no, and indicates that the camera is probably not suitable for HDR capture.  Nevertheless, hdrgen can create something usable that does not agree at all with your result.
> 
> By the way, your shortest exposure is still clipping the sun, which means that your DGP won't be accurate for this scene, even if you can get your HDR builder to work unless you can get a shorter exposure.
> 
> Cheers,
> -Greg
> 
>> From: Jan Wienold <jan.wienold at epfl.ch>
>> Date: February 6, 2018 9:24:54 AM PST
>> was it taken on mercury ? ;-)
>> the luminances are far off... it sums up to more than 600000 lux 
>> Jan 
>> 
>> 
>> On 06.02.18 18:18, Greg Ward wrote:
>>> Hi Raghu,
>>> 
>>> We may need to wait to hear from Jan or someone who understands evalglare better than I do.  I don't think there is a problem with your HDR image as you generated it.
>>> 
>>> -Greg
>>> 
>>>> From: raghuram kalyanam <kalyanam at rhrk.uni-kl.de>
>>>> Date: February 6, 2018 9:05:41 AM PST
>>>> 
>>>> Hi Greg,
>>>> 
>>>> I added these options while passing to evalglare like below.
>>>> 
>>>> evalglare -vta -vh 180 -vv 180 <hdr file>, and it worked but it always gives 1.0 as DGP (even other parameters are out of bounds).
>>>> 
>>>> With out those options evalglare throws an error.
>>>> 
>>>> Apart from that
>>>> 
>>>> Are all the LDR?s provided, valid to combine into HDR?
>>>> 
>>>> I doubt if one or more of the LDR?s is the culprit (especially something to do with over or under exposure).
>>>> 
>>>> Best Regards,
>>>> Raghu
>>>> 
>>>>> On Feb 6, 2018, at 5:05 PM, Greg Ward <gregoryjward at gmail.com> wrote:
>>>>> 
>>>>> Hi Raghu,
>>>>> 
>>>>> It looks like your HDR image header is missing the necessary view information.  Typically, this might be something like:
>>>>> 
>>>>> VIEW= -vta -vh 180 -vv 180
>>>>> 
>>>>> for a perspective such as yours.  You should be sure that your fisheye mapping corresponds to one of the standard Radiance types.
>>>>> 
>>>>> Best,
>>>>> -Greg
>>>>> 
>>>>>> From: raghuram kalyanam <kalyanam at rhrk.uni-kl.de>
>>>>>> Date: February 6, 2018 5:21:59 AM PST
>>>>>> 
>>>>>> Hi All,
>>>>>> 
>>>>>> I am trying to asses visual discomfort  using fisheye HDR images. We generated HDR image from a set of 360 degree LDRs and then converted to fisheye HDR ( using a custom made tools). The intension was to use these Fisheye HDRs as input to Evalglare and get DGP value. The Camera used is Ricoh Theta V 360 degree camera.
>>>>>> 
>>>>>> The problem I am facing is, the DGP calculated from the generated fisheye HDR with Evalglare is always 1.0. We did the calibration but I would like to have expert opinion from you people, what is going wrong with these set of images. Here is the link to the pictures.
>>>>>> 
>>>>>> It would be great if anyone could identify the issue.
>>>>>> 
>>>>>> Best Regards,
>>>>>> Raghu
>> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20180206/337b5467/attachment.html>

From kalyanam at rhrk.uni-kl.de  Tue Feb  6 09:57:53 2018
From: kalyanam at rhrk.uni-kl.de (Raghuram Kalyanam)
Date: Tue, 06 Feb 2018 18:57:53 +0100
Subject: [Radiance-general] Faulty fisheye HDR, DGP always 1.0
In-Reply-To: <db8a0d61-a095-5975-8f81-ea105a9dad7d@epfl.ch>
Message-ID: <093bdfe0-a95e-4608-b212-cfdd66bfe980@email.android.com>

An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20180206/b1630b75/attachment-0001.html>

From gregoryjward at gmail.com  Tue Feb  6 10:18:00 2018
From: gregoryjward at gmail.com (Greg Ward)
Date: Tue, 6 Feb 2018 10:18:00 -0800
Subject: [Radiance-general] Faulty fisheye HDR, DGP always 1.0
In-Reply-To: <093bdfe0-a95e-4608-b212-cfdd66bfe980@email.android.com>
References: <093bdfe0-a95e-4608-b212-cfdd66bfe980@email.android.com>
Message-ID: <EDFE214B-63FE-44A1-B689-692E723E6319@lmi.net>

Hi Raghu,

What you say does not jibe with what ximage or Photosphere report when probing your HDR image.  The values are all quite high for an interior space.  What program are you using to look at your result?

Cheers,
-Greg

> From: Raghuram Kalyanam <kalyanam at rhrk.uni-kl.de>
> Date: February 6, 2018 9:57:53 AM PST
> 
> Hi Jan,
> 
> We did the calibration and the results of spot luminance measured and calculated from HDR for the light source (calculated with custom made tool )  is very close. 
> 
> I want to compare the measured  Vertical eye illuminance with the one calculated with evalglare, but the results are out of bounds from evalglare, so i couldn't even compare. 
> 
> Could you suggest me anything  else i should be taking care of? Any ideas. 
> 
> Best Regards, 
> Raghu
> 
> 
> 
> On Feb 6, 2018 6:24 PM, Jan Wienold <jan.wienold at epfl.ch> wrote:
> was it taken on mercury ? ;-)
> the luminances are far off... it sums up to more than 600000 lux 
> Jan 
> 
> 
> On 06.02.18 18:18, Greg Ward wrote:
> Hi Raghu,
> 
> We may need to wait to hear from Jan or someone who understands evalglare better than I do.  I don't think there is a problem with your HDR image as you generated it.
> 
> -Greg
> 
> From: raghuram kalyanam <kalyanam at rhrk.uni-kl.de>
> Date: February 6, 2018 9:05:41 AM PST
> 
> Hi Greg,
> 
> I added these options while passing to evalglare like below.
> 
> evalglare -vta -vh 180 -vv 180 <hdr file>, and it worked but it always gives 1.0 as DGP (even other parameters are out of bounds).
> 
> With out those options evalglare throws an error.
> 
> Apart from that
> 
> Are all the LDR?s provided, valid to combine into HDR?
> 
> I doubt if one or more of the LDR?s is the culprit (especially something to do with over or under exposure).
> 
> Best Regards,
> Raghu
> 
> On Feb 6, 2018, at 5:05 PM, Greg Ward <gregoryjward at gmail.com> wrote:
> 
> Hi Raghu,
> 
> It looks like your HDR image header is missing the necessary view information.  Typically, this might be something like:
> 
> VIEW= -vta -vh 180 -vv 180
> 
> for a perspective such as yours.  You should be sure that your fisheye mapping corresponds to one of the standard Radiance types.
> 
> Best,
> -Greg
> 
> From: raghuram kalyanam <kalyanam at rhrk.uni-kl.de>
> Date: February 6, 2018 5:21:59 AM PST
> 
> Hi All,
> 
> I am trying to asses visual discomfort  using fisheye HDR images. We generated HDR image                     from a set of 360 degree LDRs and then converted to fisheye HDR ( using a custom made tools). The intension was to use these Fisheye HDRs as input to Evalglare and get DGP value. The Camera used is Ricoh Theta V 360 degree camera.
> 
> The problem I am facing is, the DGP calculated from the generated fisheye HDR with Evalglare is always 1.0. We did the calibration but I would like to have expert opinion from you people, what is going wrong with these set of images. Here is the link to the pictures.
> 
> It would be great if anyone could identify the issue.
> 
> Best Regards,
> Raghu
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20180206/b320f98e/attachment.html>

From jan.wienold at epfl.ch  Tue Feb  6 10:31:15 2018
From: jan.wienold at epfl.ch (Jan Wienold)
Date: Tue, 6 Feb 2018 19:31:15 +0100
Subject: [Radiance-general] Faulty fisheye HDR, DGP always 1.0
In-Reply-To: <093bdfe0-a95e-4608-b212-cfdd66bfe980@email.android.com>
References: <093bdfe0-a95e-4608-b212-cfdd66bfe980@email.android.com>
Message-ID: <9cba2d4e-5dc7-5bd1-0796-7275f8db0208@epfl.ch>

Hi Raghu,

The spot luminance measurements should ideally be done for several 
ranges for each HDR capturing (e.g. one reference area with 100cd/m2, 
another one with several thousands) and finally you compare the 
illuminance of the image with the measured one and you should reject any 
image with a deviation larger than 25% deviation of the illuminance. 
With a proper calibration you can be also within 10%.

Definitely the luminances of your image are totally off (=physically 
impossible, at least factor? 50 for the blue sky) - it has nothing to do 
with evalglare.

BTW. evalglare calculates the illuminance also for that image (617414.88 
lux) - there is no limit or "out of bounds". Just that your image has 
much too high luminances, so you get also an unrealistic illuminance...

It is hard to tell where the problem lies exactly, but definitely it is 
caused by your applied? hdr generation process.

Cheers

Jan


On 06.02.18 18:57, Raghuram Kalyanam wrote:
> Hi Jan,
>
> We did the calibration and the results of spot luminance measured and 
> calculated from HDR for the light source (calculated with custom made 
> tool )? is very close.
>
> I want to compare the measured? Vertical eye illuminance with the one 
> calculated with evalglare, but the results are out of bounds from 
> evalglare, so i couldn't even compare.
>
> Could you suggest me anything? else i should be taking care of? Any 
> ideas.
>
> Best Regards,
> Raghu
>
>
>
> On Feb 6, 2018 6:24 PM, Jan Wienold <jan.wienold at epfl.ch> wrote:
>
>     was it taken on mercury ? ;-)
>
>     the luminances are far off... it sums up to more than 600000 lux
>     Jan
>
>
>     On 06.02.18 18:18, Greg Ward wrote:
>
>         Hi Raghu,
>
>         We may need to wait to hear from Jan or someone who
>         understands evalglare better than I do. ?I don't think there
>         is a problem with your HDR image as you generated it.
>
>         -Greg
>
>             *From: *raghuram kalyanam <kalyanam at rhrk.uni-kl.de
>             <mailto:kalyanam at rhrk.uni-kl.de>>
>
>             *Date: *February 6, 2018 9:05:41 AM PST
>
>             *
>             *
>
>             Hi Greg,
>
>             I added these options while passing to evalglare like below.
>
>             evalglare -vta -vh 180 -vv 180 <hdr file>, and it worked
>             but it always gives 1.0 as DGP (even other parameters are
>             out of bounds).
>
>             With out those options evalglare throws an error.
>
>             Apart from that
>
>             Are all the LDR?s provided, valid to combine into HDR?
>
>             I doubt if one or more of the LDR?s is the culprit
>             (especially something to do with over or under exposure).
>
>             Best Regards,
>             Raghu
>
>                 On Feb 6, 2018, at 5:05 PM, Greg Ward
>                 <gregoryjward at gmail.com
>                 <mailto:gregoryjward at gmail.com>> wrote:
>
>                 Hi Raghu,
>
>                 It looks like your HDR image header is missing the
>                 necessary view information. ?Typically, this might be
>                 something like:
>
>                 VIEW= -vta -vh 180 -vv 180
>
>                 for a perspective such as yours. ?You should be sure
>                 that your fisheye mapping corresponds to one of the
>                 standard Radiance types.
>
>                 Best,
>                 -Greg
>
>                     *From: *raghuram kalyanam <kalyanam at rhrk.uni-kl.de
>                     <mailto:kalyanam at rhrk.uni-kl.de>>
>                     *Date: *February 6, 2018 5:21:59 AM PST
>                     *
>                     *
>
>                     Hi All,
>
>                     I am trying to asses visual discomfort ?using
>                     fisheye HDR images. We generated HDR image from a
>                     set of 360 degree LDRs and then converted to
>                     fisheye HDR ( using a custom made tools). The
>                     intension was to use these Fisheye HDRs as input
>                     to Evalglare and get DGP value. The Camera used is
>                     Ricoh Theta V 360 degree camera.
>
>                     The problem I am facing is, the DGP calculated
>                     from the generated fisheye HDR with Evalglare is
>                     always 1.0. We did the calibration but I would
>                     like to have expert opinion from you people, what
>                     is going wrong with these set of images. Here is
>                     the link
>                     <https://seafile.rlp.net/f/0212995d110648d38032/?dl=1>?to
>                     the pictures.
>
>                     It would be great if anyone could identify the issue.
>
>                     Best Regards,
>                     Raghu
>
>
>
>
>         _______________________________________________
>         Radiance-general mailing list
>         Radiance-general at radiance-online.org
>         <mailto:Radiance-general at radiance-online.org>
>         https://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
>     -- 
>     Dr.-Ing.  Jan Wienold
>     Ecole Polytechnique F?d?rale de Lausanne (EPFL)
>     EPFL ENAC IA LIPID
>
>     http://people.epfl.ch/jan.wienold
>     LE 1 111 (Office)
>     Phone    +41 21 69 30849
>
>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> https://www.radiance-online.org/mailman/listinfo/radiance-general

-- 
Dr.-Ing.  Jan Wienold
Ecole Polytechnique F?d?rale de Lausanne (EPFL)
EPFL ENAC IA LIPID

http://people.epfl.ch/jan.wienold
LE 1 111 (Office)
Phone    +41 21 69 30849

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20180206/40564164/attachment-0001.html>

From kynthia.chamilothori at epfl.ch  Thu Feb  8 07:40:41 2018
From: kynthia.chamilothori at epfl.ch (Chamilothori Kynthia)
Date: Thu, 8 Feb 2018 15:40:41 +0000
Subject: [Radiance-general] XYZ to RGB conversion - neutral color is not
 neutral
Message-ID: <9bb91873c4124410bb80020f41f3ce00@rexb.intranet.epfl.ch>

Dear Radiance community,

I would like your feedback on -another- XYZ to RBG conversion.
I have measurements in the XYZ colorspace from a CM-600d Konica Minolta Spectrophotometer with settings for a 2 degree standard observer and a D65 standard illuminant, both with the specular component included (SCI) and excluded (SCE).

First, I am assuming that I should use the SCE measurements for the plastic materials.
As an example, my SCE measurements of a white wall are X 81.05, Y 85.61 and Z 86.95.

When using the xyz_rgb.cal, the resulting color is R 73.3782327 G 90.3295341 B 86.8467252 - a clearly blue/green color!

Same thing happens when using the Colour Picker for Radiance (http://www.jaloxa.eu/resources/radiance/colour_picker/index.shtml) for a CIE XYZ (1931) input; but not when using the Colour Picker from an older page (http://www.jaloxa.eu/resources/radiance/cp4r.shtml), where the result is R 0.944 G 0.934 B 0.901.
The latter is a neutral color that looks correct, and is also the result when using easyrgb.com and specifying the observer and illuminant.

My guess is that I am missing a conversion regarding the illuminant - do you maybe have any input on what I am doing wrong with xyz_rgb.cal?

Thank you for your time and knowledge!
Kynthia


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20180208/a23e56b9/attachment.html>

From gregoryjward at gmail.com  Thu Feb  8 10:00:35 2018
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu, 8 Feb 2018 10:00:35 -0800
Subject: [Radiance-general] XYZ to RGB conversion - neutral color is not
 neutral
In-Reply-To: <9bb91873c4124410bb80020f41f3ce00@rexb.intranet.epfl.ch>
References: <9bb91873c4124410bb80020f41f3ce00@rexb.intranet.epfl.ch>
Message-ID: <A012F567-DFAA-4C12-A1E8-C7F7B67DD137@lmi.net>

Hi Kynthia,

Under what lighting does your wall look white?  Your Z value is larger than your Y value, indicating a blue tint under D65 (outdoor) illumination.  This is sometimes the case with white surfaces, where they add extra blue to make the wall appear whiter under interior lighting.  I don't think your color calculation is wrong, although the values are out of range for plastic by a factor of 100 because your measured values are in percent.

You should try measuring the XYZ values under EE (equal energy) white rather than D65.  This will avoid color shifts in your conversion, as xyz_rgb.cal assumes equal-energy white for the XYZ measurements, and this is the same illuminant Radiance assumes in its RGB color space.

Cheers,
-Greg

> From: Chamilothori Kynthia <kynthia.chamilothori at epfl.ch>
> Date: February 8, 2018 7:40:41 AM PST
> 
> Dear Radiance community,
>  
> I would like your feedback on -another- XYZ to RBG conversion.
> I have measurements in the XYZ colorspace from a CM-600d Konica Minolta Spectrophotometer with settings for a 2 degree standard observer and a D65 standard illuminant, both with the specular component included (SCI) and excluded (SCE).
>  
> First, I am assuming that I should use the SCE measurements for the plastic materials.
> As an example, my SCE measurements of a white wall are X 81.05, Y 85.61 and Z 86.95.
>  
> When using the xyz_rgb.cal, the resulting color is R 73.3782327 G 90.3295341 B 86.8467252 - a clearly blue/green color!
>  
> Same thing happens when using the Colour Picker for Radiance (http://www.jaloxa.eu/resources/radiance/colour_picker/index.shtml) for a CIE XYZ (1931) input; but not when using the Colour Picker from an older page (http://www.jaloxa.eu/resources/radiance/cp4r.shtml), where the result is R 0.944 G 0.934 B 0.901.
> The latter is a neutral color that looks correct, and is also the result when using easyrgb.com and specifying the observer and illuminant.
>  
> My guess is that I am missing a conversion regarding the illuminant - do you maybe have any input on what I am doing wrong with xyz_rgb.cal?
>  
> Thank you for your time and knowledge!
> Kynthia
>  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20180208/a9ecae05/attachment.html>

From kynthia.chamilothori at epfl.ch  Thu Feb  8 10:52:07 2018
From: kynthia.chamilothori at epfl.ch (Chamilothori Kynthia)
Date: Thu, 8 Feb 2018 18:52:07 +0000
Subject: [Radiance-general] XYZ to RGB conversion - neutral color is not
 neutral
In-Reply-To: <A012F567-DFAA-4C12-A1E8-C7F7B67DD137@lmi.net>
References: <9bb91873c4124410bb80020f41f3ce00@rexb.intranet.epfl.ch>
 <A012F567-DFAA-4C12-A1E8-C7F7B67DD137@lmi.net>
Message-ID: <7c6eb8021bb6412d978d9279df9aa6ad@rexb.intranet.epfl.ch>

Hi Greg,

Thanks for answering!
I thought of the same thing (after reading the corresponding Rendering for Radiance chapter) - but the wall looks white to me under daylight (and mixed daylight/artificial light). When using the values I got from xyz_rgb.cal (indeed, divided by 100, I forgot to add that! :)), the result is way too blue for my liking... (http://oi63.tinypic.com/2u7u60y.jpg).

If I understand correctly, the difference between the resulting RGB values when using xyz_rgb.cal/the new Colour Picker conversion and easyrgb.com/the older Colour Picker conversion is caused because of the illuminant assumptions (EE vs D65)? Do you think I can assume that the easyrgb.com conversion -where I can specify D65 as the illuminant- is then correct for my measurements?

Cheers - and thanks again for your help!
Kynthia

From: Greg Ward [mailto:gregoryjward at gmail.com]
Sent: 08 February 2018 19:01
To: Radiance general discussion <radiance-general at radiance-online.org>
Subject: Re: [Radiance-general] XYZ to RGB conversion - neutral color is not neutral

Hi Kynthia,

Under what lighting does your wall look white?  Your Z value is larger than your Y value, indicating a blue tint under D65 (outdoor) illumination.  This is sometimes the case with white surfaces, where they add extra blue to make the wall appear whiter under interior lighting.  I don't think your color calculation is wrong, although the values are out of range for plastic by a factor of 100 because your measured values are in percent.

You should try measuring the XYZ values under EE (equal energy) white rather than D65.  This will avoid color shifts in your conversion, as xyz_rgb.cal assumes equal-energy white for the XYZ measurements, and this is the same illuminant Radiance assumes in its RGB color space.

Cheers,
-Greg


From: Chamilothori Kynthia <kynthia.chamilothori at epfl.ch<mailto:kynthia.chamilothori at epfl.ch>>

Date: February 8, 2018 7:40:41 AM PST


Dear Radiance community,

I would like your feedback on -another- XYZ to RBG conversion.
I have measurements in the XYZ colorspace from a CM-600d Konica Minolta Spectrophotometer with settings for a 2 degree standard observer and a D65 standard illuminant, both with the specular component included (SCI) and excluded (SCE).

First, I am assuming that I should use the SCE measurements for the plastic materials.
As an example, my SCE measurements of a white wall are X 81.05, Y 85.61 and Z 86.95.

When using the xyz_rgb.cal, the resulting color is R 73.3782327 G 90.3295341 B 86.8467252 - a clearly blue/green color!

Same thing happens when using the Colour Picker for Radiance (http://www.jaloxa.eu/resources/radiance/colour_picker/index.shtml) for a CIE XYZ (1931) input; but not when using the Colour Picker from an older page (http://www.jaloxa.eu/resources/radiance/cp4r.shtml), where the result is R 0.944 G 0.934 B 0.901.
The latter is a neutral color that looks correct, and is also the result when using easyrgb.com<http://easyrgb.com> and specifying the observer and illuminant.

My guess is that I am missing a conversion regarding the illuminant - do you maybe have any input on what I am doing wrong with xyz_rgb.cal?

Thank you for your time and knowledge!
Kynthia

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20180208/fc014cbc/attachment-0001.html>

From gregoryjward at gmail.com  Thu Feb  8 11:57:08 2018
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu, 8 Feb 2018 11:57:08 -0800
Subject: [Radiance-general] XYZ to RGB conversion - neutral color is not
 neutral
In-Reply-To: <7c6eb8021bb6412d978d9279df9aa6ad@rexb.intranet.epfl.ch>
References: <9bb91873c4124410bb80020f41f3ce00@rexb.intranet.epfl.ch>
 <A012F567-DFAA-4C12-A1E8-C7F7B67DD137@lmi.net>
 <7c6eb8021bb6412d978d9279df9aa6ad@rexb.intranet.epfl.ch>
Message-ID: <4CB2740F-1C28-482F-9645-5F899D01A494@lmi.net>

Hi Kynthia,

I'm not sure how easyrgb.com does its calculations, but there is a known problem when converting between white points.  One method uses a von Kries transform to attempt to match white appearances via a color adaptation space, and another just gives you what you would measure with a colorimeter.  The xyz_rgb.cal program follows the colorimetric method, so if you took your measurements under bluish light, it will stay bluish even if your new color space has a warmer illuminant.

As I said, you would ideally set your Minolta to give you XYZ under EE illumination rather than D65.  However, one way to trick xyz_rgb.cal into doing a cheap white point adaptation is to tell it to give you the Radiance RGB's assuming a D65 white point rather than EE white.  To do so, you can run:

rcalc -f xyz_rgb.cal -e 'CIE_pri(i) = select(i, 0.640,0.330, 0.290,0.600, 0.150,0.060,0.3127,0.3290)' \
	-e '$1=R($1,$2,$3)/100;$2=G($1,$2,$3)/100;$3=B($1,$2,$3)/100'

You then give it your XYZ values on the input side, separated by spaces or tabs, one XYZ per line.  The output will be the RGB values.  For your wall, I get:

	Radiance RGB = 0.876 0.857 0.734

Note that the Radiance RGB primary chromaticities don't match the standard (sRGB) ones.  This is unfortunate, but historical as Radiance's color system predates even sRGB.

Cheers,
-Greg

> From: Chamilothori Kynthia <kynthia.chamilothori at epfl.ch>
> Date: February 8, 2018 10:52:07 AM PST
> 
> Hi Greg,
>  
> Thanks for answering!
> I thought of the same thing (after reading the corresponding Rendering for Radiance chapter) ? but the wall looks white to me under daylight (and mixed daylight/artificial light). When using the values I got from xyz_rgb.cal (indeed, divided by 100, I forgot to add that! :)), the result is way too blue for my liking? (http://oi63.tinypic.com/2u7u60y.jpg).
>  
> If I understand correctly, the difference between the resulting RGB values when using xyz_rgb.cal/the new Colour Picker conversion and easyrgb.com/the older Colour Picker conversion is caused because of the illuminant assumptions (EE vs D65)? Do you think I can assume that the easyrgb.com conversion ?where I can specify D65 as the illuminant- is then correct for my measurements?
>  
> Cheers ? and thanks again for your help!
> Kynthia
>  
> From: Greg Ward [mailto:gregoryjward at gmail.com] 
> Sent: 08 February 2018 19:01
> To: Radiance general discussion <radiance-general at radiance-online.org>
> Subject: Re: [Radiance-general] XYZ to RGB conversion - neutral color is not neutral
>  
> Hi Kynthia,
>  
> Under what lighting does your wall look white?  Your Z value is larger than your Y value, indicating a blue tint under D65 (outdoor) illumination.  This is sometimes the case with white surfaces, where they add extra blue to make the wall appear whiter under interior lighting.  I don't think your color calculation is wrong, although the values are out of range for plastic by a factor of 100 because your measured values are in percent.
>  
> You should try measuring the XYZ values under EE (equal energy) white rather than D65.  This will avoid color shifts in your conversion, as xyz_rgb.cal assumes equal-energy white for the XYZ measurements, and this is the same illuminant Radiance assumes in its RGB color space.
>  
> Cheers,
> -Greg
>  
> From: Chamilothori Kynthia <kynthia.chamilothori at epfl.ch>
> Date: February 8, 2018 7:40:41 AM PST
>  
> Dear Radiance community,
>  
> I would like your feedback on -another- XYZ to RBG conversion.
> I have measurements in the XYZ colorspace from a CM-600d Konica Minolta Spectrophotometer with settings for a 2 degree standard observer and a D65 standard illuminant, both with the specular component included (SCI) and excluded (SCE).
>  
> First, I am assuming that I should use the SCE measurements for the plastic materials.
> As an example, my SCE measurements of a white wall are X 81.05, Y 85.61 and Z 86.95.
>  
> When using the xyz_rgb.cal, the resulting color is R 73.3782327 G 90.3295341 B 86.8467252 - a clearly blue/green color!
>  
> Same thing happens when using the Colour Picker for Radiance (http://www.jaloxa.eu/resources/radiance/colour_picker/index.shtml) for a CIE XYZ (1931) input; but not when using the Colour Picker from an older page (http://www.jaloxa.eu/resources/radiance/cp4r.shtml), where the result is R 0.944 G 0.934 B 0.901.
> The latter is a neutral color that looks correct, and is also the result when using easyrgb.com and specifying the observer and illuminant.
>  
> My guess is that I am missing a conversion regarding the illuminant - do you maybe have any input on what I am doing wrong with xyz_rgb.cal?
>  
> Thank you for your time and knowledge!
> Kynthia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20180208/efe7b149/attachment.html>

From andrei.kolomenski at nasa.gov  Thu Feb  8 12:42:03 2018
From: andrei.kolomenski at nasa.gov (Kolomenski, Andrei (JSC-SF311)[WYLE LABORATORIES, INC.])
Date: Thu, 8 Feb 2018 20:42:03 +0000
Subject: [Radiance-general] XYZ to RGB conversion - neutral color is not
 neutral
In-Reply-To: <4CB2740F-1C28-482F-9645-5F899D01A494@lmi.net>
References: <9bb91873c4124410bb80020f41f3ce00@rexb.intranet.epfl.ch>
 <A012F567-DFAA-4C12-A1E8-C7F7B67DD137@lmi.net>
 <7c6eb8021bb6412d978d9279df9aa6ad@rexb.intranet.epfl.ch>
 <4CB2740F-1C28-482F-9645-5F899D01A494@lmi.net>
Message-ID: <AE55A995167B224DBBFA16500E3AB9B306EAF9E8@NDJSMBX202.ndc.nasa.gov>

Hi Kynthia & Greg,

I read your posts and I'm also curious about white point adaptation and how it applies to Radiance.

>From Greg's last comment, you recommended replacing the input white point chromaticity of equal energy white with chromaticity of D65 (x=0.3127,y=0.3290) in the xyz_rgb.cal calculation of the r,g,b components. What impact does this have, that you are not using the equal energy white point? As I understand Radiance computes luminance using equation: Luminance = 179 * (0.265*R + 0.670*G + 0.065*B), where 179 lumen/Watt is the standard luminous efficacy of equal energy white light. So does the r,g,b material definition needs to be defined for an equal energy white point in order to have correct luminance/illuminance estimations?

So given a reflectance spectrum under a D65 illuminant is a white point balancing transformation necessary to correctly define the Radiance material primitive?
Can the output of xyz_rgb.cal be safely used for the r,g,b material definition?

Thank you for the interesting and helpful discussion.

Kind Regards,
Andrei Kolomenski

From: Greg Ward [mailto:gregoryjward at gmail.com]
Sent: Thursday, February 08, 2018 1:57 PM
To: Radiance general discussion <radiance-general at radiance-online.org>
Subject: Re: [Radiance-general] XYZ to RGB conversion - neutral color is not neutral

Hi Kynthia,

I'm not sure how easyrgb.com<http://easyrgb.com> does its calculations, but there is a known problem when converting between white points.  One method uses a von Kries transform to attempt to match white appearances via a color adaptation space, and another just gives you what you would measure with a colorimeter.  The xyz_rgb.cal program follows the colorimetric method, so if you took your measurements under bluish light, it will stay bluish even if your new color space has a warmer illuminant.

As I said, you would ideally set your Minolta to give you XYZ under EE illumination rather than D65.  However, one way to trick xyz_rgb.cal into doing a cheap white point adaptation is to tell it to give you the Radiance RGB's assuming a D65 white point rather than EE white.  To do so, you can run:

rcalc -f xyz_rgb.cal -e 'CIE_pri(i) = select(i, 0.640,0.330, 0.290,0.600, 0.150,0.060,0.3127,0.3290)' \
               -e '$1=R($1,$2,$3)/100;$2=G($1,$2,$3)/100;$3=B($1,$2,$3)/100'

You then give it your XYZ values on the input side, separated by spaces or tabs, one XYZ per line.  The output will be the RGB values.  For your wall, I get:

               Radiance RGB = 0.876 0.857 0.734

Note that the Radiance RGB primary chromaticities don't match the standard (sRGB) ones.  This is unfortunate, but historical as Radiance's color system predates even sRGB.

Cheers,
-Greg



From: Chamilothori Kynthia <kynthia.chamilothori at epfl.ch<mailto:kynthia.chamilothori at epfl.ch>>

Date: February 8, 2018 10:52:07 AM PST


Hi Greg,

Thanks for answering!
I thought of the same thing (after reading the corresponding Rendering for Radiance chapter) - but the wall looks white to me under daylight (and mixed daylight/artificial light). When using the values I got from xyz_rgb.cal (indeed, divided by 100, I forgot to add that! :)), the result is way too blue for my liking... (http://oi63.tinypic.com/2u7u60y.jpg).

If I understand correctly, the difference between the resulting RGB values when using xyz_rgb.cal/the new Colour Picker conversion and easyrgb.com/the<http://easyrgb.com/the> older Colour Picker conversion is caused because of the illuminant assumptions (EE vs D65)? Do you think I can assume that the easyrgb.com<http://easyrgb.com> conversion -where I can specify D65 as the illuminant- is then correct for my measurements?

Cheers - and thanks again for your help!
Kynthia

From: Greg Ward [mailto:gregoryjward at gmail.com]
Sent: 08 February 2018 19:01
To: Radiance general discussion <radiance-general at radiance-online.org<mailto:radiance-general at radiance-online.org>>
Subject: Re: [Radiance-general] XYZ to RGB conversion - neutral color is not neutral

Hi Kynthia,

Under what lighting does your wall look white?  Your Z value is larger than your Y value, indicating a blue tint under D65 (outdoor) illumination.  This is sometimes the case with white surfaces, where they add extra blue to make the wall appear whiter under interior lighting.  I don't think your color calculation is wrong, although the values are out of range for plastic by a factor of 100 because your measured values are in percent.

You should try measuring the XYZ values under EE (equal energy) white rather than D65.  This will avoid color shifts in your conversion, as xyz_rgb.cal assumes equal-energy white for the XYZ measurements, and this is the same illuminant Radiance assumes in its RGB color space.

Cheers,
-Greg


From: Chamilothori Kynthia <kynthia.chamilothori at epfl.ch<mailto:kynthia.chamilothori at epfl.ch>>

Date: February 8, 2018 7:40:41 AM PST


Dear Radiance community,

I would like your feedback on -another- XYZ to RBG conversion.
I have measurements in the XYZ colorspace from a CM-600d Konica Minolta Spectrophotometer with settings for a 2 degree standard observer and a D65 standard illuminant, both with the specular component included (SCI) and excluded (SCE).

First, I am assuming that I should use the SCE measurements for the plastic materials.
As an example, my SCE measurements of a white wall are X 81.05, Y 85.61 and Z 86.95.

When using the xyz_rgb.cal, the resulting color is R 73.3782327 G 90.3295341 B 86.8467252 - a clearly blue/green color!

Same thing happens when using the Colour Picker for Radiance (http://www.jaloxa.eu/resources/radiance/colour_picker/index.shtml) for a CIE XYZ (1931) input; but not when using the Colour Picker from an older page (http://www.jaloxa.eu/resources/radiance/cp4r.shtml), where the result is R 0.944 G 0.934 B 0.901.
The latter is a neutral color that looks correct, and is also the result when using easyrgb.com<http://easyrgb.com> and specifying the observer and illuminant.

My guess is that I am missing a conversion regarding the illuminant - do you maybe have any input on what I am doing wrong with xyz_rgb.cal?

Thank you for your time and knowledge!
Kynthia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20180208/49fbcb82/attachment.html>

From kynthia.chamilothori at epfl.ch  Thu Feb  8 14:58:05 2018
From: kynthia.chamilothori at epfl.ch (Chamilothori Kynthia)
Date: Thu, 8 Feb 2018 22:58:05 +0000
Subject: [Radiance-general] XYZ to RGB conversion - neutral color is not
 neutral
In-Reply-To: <AE55A995167B224DBBFA16500E3AB9B306EAF9E8@NDJSMBX202.ndc.nasa.gov>
References: <9bb91873c4124410bb80020f41f3ce00@rexb.intranet.epfl.ch>
 <A012F567-DFAA-4C12-A1E8-C7F7B67DD137@lmi.net>
 <7c6eb8021bb6412d978d9279df9aa6ad@rexb.intranet.epfl.ch>
 <4CB2740F-1C28-482F-9645-5F899D01A494@lmi.net>,
 <AE55A995167B224DBBFA16500E3AB9B306EAF9E8@NDJSMBX202.ndc.nasa.gov>
Message-ID: <1518130684471.47760@epfl.ch>

Hi Greg, hi Andrei,


Andrei - very interesting points, I'm curious to see what the community has to say.

For your last question, I understood from Greg's comments that the output of xyz_rgb.cal is correct for measurements taken under equal energy illumination (so the assumed white point is indeed the one used for the measurement).


Unfortunately, from what I see in the manual, there is no equal energy illuminant setting (E) for the Konica Minolta CM-600d,  unless I'm missing something; I see only A/C/D/F variants. It seems to me that your clever trick with the white adaptation is the best way to go, Greg. Thank you both for the discussion and help!


Cheers,

Kynthia


________________________________
From: Kolomenski, Andrei (JSC-SF311)[WYLE LABORATORIES, INC.] <andrei.kolomenski at nasa.gov>
Sent: Thursday, February 8, 2018 9:42 PM
To: Radiance general discussion
Subject: Re: [Radiance-general] XYZ to RGB conversion - neutral color is not neutral

Hi Kynthia & Greg,

I read your posts and I?m also curious about white point adaptation and how it applies to Radiance.

>From Greg?s last comment, you recommended replacing the input white point chromaticity of equal energy white with chromaticity of D65 (x=0.3127,y=0.3290) in the xyz_rgb.cal calculation of the r,g,b components. What impact does this have, that you are not using the equal energy white point? As I understand Radiance computes luminance using equation: Luminance = 179 * (0.265*R + 0.670*G + 0.065*B), where 179 lumen/Watt is the standard luminous efficacy of equal energy white light. So does the r,g,b material definition needs to be defined for an equal energy white point in order to have correct luminance/illuminance estimations?

So given a reflectance spectrum under a D65 illuminant is a white point balancing transformation necessary to correctly define the Radiance material primitive?
Can the output of xyz_rgb.cal be safely used for the r,g,b material definition?

Thank you for the interesting and helpful discussion.

Kind Regards,
Andrei Kolomenski

From: Greg Ward [mailto:gregoryjward at gmail.com]
Sent: Thursday, February 08, 2018 1:57 PM
To: Radiance general discussion <radiance-general at radiance-online.org>
Subject: Re: [Radiance-general] XYZ to RGB conversion - neutral color is not neutral

Hi Kynthia,

I'm not sure how easyrgb.com<http://easyrgb.com> does its calculations, but there is a known problem when converting between white points.  One method uses a von Kries transform to attempt to match white appearances via a color adaptation space, and another just gives you what you would measure with a colorimeter.  The xyz_rgb.cal program follows the colorimetric method, so if you took your measurements under bluish light, it will stay bluish even if your new color space has a warmer illuminant.

As I said, you would ideally set your Minolta to give you XYZ under EE illumination rather than D65.  However, one way to trick xyz_rgb.cal into doing a cheap white point adaptation is to tell it to give you the Radiance RGB's assuming a D65 white point rather than EE white.  To do so, you can run:

rcalc -f xyz_rgb.cal -e 'CIE_pri(i) = select(i, 0.640,0.330, 0.290,0.600, 0.150,0.060,0.3127,0.3290)' \
               -e '$1=R($1,$2,$3)/100;$2=G($1,$2,$3)/100;$3=B($1,$2,$3)/100'

You then give it your XYZ values on the input side, separated by spaces or tabs, one XYZ per line.  The output will be the RGB values.  For your wall, I get:

               Radiance RGB = 0.876 0.857 0.734

Note that the Radiance RGB primary chromaticities don't match the standard (sRGB) ones.  This is unfortunate, but historical as Radiance's color system predates even sRGB.

Cheers,
-Greg



From: Chamilothori Kynthia <kynthia.chamilothori at epfl.ch<mailto:kynthia.chamilothori at epfl.ch>>

Date: February 8, 2018 10:52:07 AM PST


Hi Greg,

Thanks for answering!
I thought of the same thing (after reading the corresponding Rendering for Radiance chapter) ? but the wall looks white to me under daylight (and mixed daylight/artificial light). When using the values I got from xyz_rgb.cal (indeed, divided by 100, I forgot to add that! :)), the result is way too blue for my liking? (http://oi63.tinypic.com/2u7u60y.jpg).

If I understand correctly, the difference between the resulting RGB values when using xyz_rgb.cal/the new Colour Picker conversion and easyrgb.com/the<http://easyrgb.com/the> older Colour Picker conversion is caused because of the illuminant assumptions (EE vs D65)? Do you think I can assume that the easyrgb.com<http://easyrgb.com> conversion ?where I can specify D65 as the illuminant- is then correct for my measurements?

Cheers ? and thanks again for your help!
Kynthia

From: Greg Ward [mailto:gregoryjward at gmail.com]
Sent: 08 February 2018 19:01
To: Radiance general discussion <radiance-general at radiance-online.org<mailto:radiance-general at radiance-online.org>>
Subject: Re: [Radiance-general] XYZ to RGB conversion - neutral color is not neutral

Hi Kynthia,

Under what lighting does your wall look white?  Your Z value is larger than your Y value, indicating a blue tint under D65 (outdoor) illumination.  This is sometimes the case with white surfaces, where they add extra blue to make the wall appear whiter under interior lighting.  I don't think your color calculation is wrong, although the values are out of range for plastic by a factor of 100 because your measured values are in percent.

You should try measuring the XYZ values under EE (equal energy) white rather than D65.  This will avoid color shifts in your conversion, as xyz_rgb.cal assumes equal-energy white for the XYZ measurements, and this is the same illuminant Radiance assumes in its RGB color space.

Cheers,
-Greg


From: Chamilothori Kynthia <kynthia.chamilothori at epfl.ch<mailto:kynthia.chamilothori at epfl.ch>>

Date: February 8, 2018 7:40:41 AM PST


Dear Radiance community,

I would like your feedback on -another- XYZ to RBG conversion.
I have measurements in the XYZ colorspace from a CM-600d Konica Minolta Spectrophotometer with settings for a 2 degree standard observer and a D65 standard illuminant, both with the specular component included (SCI) and excluded (SCE).

First, I am assuming that I should use the SCE measurements for the plastic materials.
As an example, my SCE measurements of a white wall are X 81.05, Y 85.61 and Z 86.95.

When using the xyz_rgb.cal, the resulting color is R 73.3782327 G 90.3295341 B 86.8467252 - a clearly blue/green color!

Same thing happens when using the Colour Picker for Radiance (http://www.jaloxa.eu/resources/radiance/colour_picker/index.shtml) for a CIE XYZ (1931) input; but not when using the Colour Picker from an older page (http://www.jaloxa.eu/resources/radiance/cp4r.shtml), where the result is R 0.944 G 0.934 B 0.901.
The latter is a neutral color that looks correct, and is also the result when using easyrgb.com<http://easyrgb.com> and specifying the observer and illuminant.

My guess is that I am missing a conversion regarding the illuminant - do you maybe have any input on what I am doing wrong with xyz_rgb.cal?

Thank you for your time and knowledge!
Kynthia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20180208/97ce3a8c/attachment-0001.html>

From gregoryjward at gmail.com  Thu Feb  8 18:23:08 2018
From: gregoryjward at gmail.com (Greg Ward)
Date: Thu, 8 Feb 2018 18:23:08 -0800
Subject: [Radiance-general] XYZ to RGB conversion - neutral color is not
 neutral
In-Reply-To: <1518130684471.47760@epfl.ch>
References: <9bb91873c4124410bb80020f41f3ce00@rexb.intranet.epfl.ch>
 <A012F567-DFAA-4C12-A1E8-C7F7B67DD137@lmi.net>
 <7c6eb8021bb6412d978d9279df9aa6ad@rexb.intranet.epfl.ch>
 <4CB2740F-1C28-482F-9645-5F899D01A494@lmi.net>,
 <AE55A995167B224DBBFA16500E3AB9B306EAF9E8@NDJSMBX202.ndc.nasa.gov>
 <1518130684471.47760@epfl.ch>
Message-ID: <0C74BEF6-BFF4-4DF0-BFC6-484E2632BE7F@lmi.net>

Well, the problem with XYZ measurements of reflectance is that they require an illuminant, so that sort of forces your hand.  If you were measuring a light source, then setting an illuminant would make no sense, and I think this is why chroma meters (in contrast to reflectometers) don't have a white point setting.

The coefficients used for computing lumens from Radiance RGB values won't be affected much by your choice of illuminant, but if you want to get into the gory details of correct color rendering, you can start here:

	Ward, Greg, Elena Eydelberg-Vileshin, "Picture Perfect RGB Rendering Using Spectral Prefiltering and Sharp Color Primaries," Thirteenth Eurographics Workshop on Rendering (2002), P. Debevec and S. Gibson (Editors), June 2002.

Cheers,
-Greg

> From: Chamilothori Kynthia <kynthia.chamilothori at epfl.ch>
> Date: February 8, 2018 2:58:05 PM PST
> 
> Hi Greg, hi Andrei,
> 
> Andrei - very interesting points, I'm curious to see what the community has to say.
> For your last question, I understood from Greg's comments that the output of xyz_rgb.cal is correct for measurements taken under equal energy illumination (so the assumed white point is indeed the one used for the measurement).
> 
> Unfortunately, from what I see in the manual, there is no equal energy illuminant setting (E) for the Konica Minolta CM-600d,  unless I'm missing something; I see only A/C/D/F variants. It seems to me that your clever trick with the white adaptation is the best way to go, Greg. Thank you both for the discussion and help!
> 
> Cheers,
> Kynthia
> 
> From: Kolomenski, Andrei (JSC-SF311)[WYLE LABORATORIES, INC.] <andrei.kolomenski at nasa.gov>
> Sent: Thursday, February 8, 2018 9:42 PM
>  
> Hi Kynthia & Greg,
>  
> I read your posts and I?m also curious about white point adaptation and how it applies to Radiance.
>  
> From Greg?s last comment, you recommended replacing the input white point chromaticity of equal energy white with chromaticity of D65 (x=0.3127,y=0.3290) in the xyz_rgb.cal calculation of the r,g,b components. What impact does this have, that you are not using the equal energy white point? As I understand Radiance computes luminance using equation: Luminance = 179 * (0.265*R + 0.670*G + 0.065*B), where 179 lumen/Watt is the standard luminous efficacy of equal energy white light. So does the r,g,b material definition needs to be defined for an equal energy white point in order to have correct luminance/illuminance estimations?
>  
> So given a reflectance spectrum under a D65 illuminant is a white point balancing transformation necessary to correctly define the Radiance material primitive?
> Can the output of xyz_rgb.cal be safely used for the r,g,b material definition?
>  
> Thank you for the interesting and helpful discussion.
>  
> Kind Regards,
> Andrei Kolomenski
>  
> From: Greg Ward [mailto:gregoryjward at gmail.com] 
> Sent: Thursday, February 08, 2018 1:57 PM
>  
> Hi Kynthia,
>  
> I'm not sure how easyrgb.com does its calculations, but there is a known problem when converting between white points.  One method uses a von Kries transform to attempt to match white appearances via a color adaptation space, and another just gives you what you would measure with a colorimeter.  The xyz_rgb.cal program follows the colorimetric method, so if you took your measurements under bluish light, it will stay bluish even if your new color space has a warmer illuminant.
>  
> As I said, you would ideally set your Minolta to give you XYZ under EE illumination rather than D65.  However, one way to trick xyz_rgb.cal into doing a cheap white point adaptation is to tell it to give you the Radiance RGB's assuming a D65 white point rather than EE white.  To do so, you can run:
>  
> rcalc -f xyz_rgb.cal -e 'CIE_pri(i) = select(i, 0.640,0.330, 0.290,0.600, 0.150,0.060,0.3127,0.3290)' \
>                -e '$1=R($1,$2,$3)/100;$2=G($1,$2,$3)/100;$3=B($1,$2,$3)/100'
>  
> You then give it your XYZ values on the input side, separated by spaces or tabs, one XYZ per line.  The output will be the RGB values.  For your wall, I get:
>  
>                Radiance RGB = 0.876 0.857 0.734
>  
> Note that the Radiance RGB primary chromaticities don't match the standard (sRGB) ones.  This is unfortunate, but historical as Radiance's color system predates even sRGB.
>  
> Cheers,
> -Greg
> 
> 
> From: Chamilothori Kynthia <kynthia.chamilothori at epfl.ch>
> Date: February 8, 2018 10:52:07 AM PST
>  
> Hi Greg,
>  
> Thanks for answering!
> I thought of the same thing (after reading the corresponding Rendering for Radiance chapter) ? but the wall looks white to me under daylight (and mixed daylight/artificial light). When using the values I got from xyz_rgb.cal (indeed, divided by 100, I forgot to add that! :)), the result is way too blue for my liking? (http://oi63.tinypic.com/2u7u60y.jpg).
>  
> If I understand correctly, the difference between the resulting RGB values when using xyz_rgb.cal/the new Colour Picker conversion and easyrgb.com/the older Colour Picker conversion is caused because of the illuminant assumptions (EE vs D65)? Do you think I can assume that the easyrgb.com conversion ?where I can specify D65 as the illuminant- is then correct for my measurements?
>  
> Cheers ? and thanks again for your help!
> Kynthia
>  
> From: Greg Ward [mailto:gregoryjward at gmail.com] 
> Sent: 08 February 2018 19:01
> To: Radiance general discussion <radiance-general at radiance-online.org>
> Subject: Re: [Radiance-general] XYZ to RGB conversion - neutral color is not neutral
>  
> Hi Kynthia,
>  
> Under what lighting does your wall look white?  Your Z value is larger than your Y value, indicating a blue tint under D65 (outdoor) illumination.  This is sometimes the case with white surfaces, where they add extra blue to make the wall appear whiter under interior lighting.  I don't think your color calculation is wrong, although the values are out of range for plastic by a factor of 100 because your measured values are in percent.
>  
> You should try measuring the XYZ values under EE (equal energy) white rather than D65.  This will avoid color shifts in your conversion, as xyz_rgb.cal assumes equal-energy white for the XYZ measurements, and this is the same illuminant Radiance assumes in its RGB color space.
>  
> Cheers,
> -Greg
>  
> From: Chamilothori Kynthia <kynthia.chamilothori at epfl.ch>
> Date: February 8, 2018 7:40:41 AM PST
>  
> Dear Radiance community,
>  
> I would like your feedback on -another- XYZ to RBG conversion.
> I have measurements in the XYZ colorspace from a CM-600d Konica Minolta Spectrophotometer with settings for a 2 degree standard observer and a D65 standard illuminant, both with the specular component included (SCI) and excluded (SCE).
>  
> First, I am assuming that I should use the SCE measurements for the plastic materials.
> As an example, my SCE measurements of a white wall are X 81.05, Y 85.61 and Z 86.95.
>  
> When using the xyz_rgb.cal, the resulting color is R 73.3782327 G 90.3295341 B 86.8467252 - a clearly blue/green color!
>  
> Same thing happens when using the Colour Picker for Radiance (http://www.jaloxa.eu/resources/radiance/colour_picker/index.shtml) for a CIE XYZ (1931) input; but not when using the Colour Picker from an older page (http://www.jaloxa.eu/resources/radiance/cp4r.shtml), where the result is R 0.944 G 0.934 B 0.901.
> The latter is a neutral color that looks correct, and is also the result when using easyrgb.com and specifying the observer and illuminant.
>  
> My guess is that I am missing a conversion regarding the illuminant - do you maybe have any input on what I am doing wrong with xyz_rgb.cal?
>  
> Thank you for your time and knowledge!
> Kynthia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20180208/324d78f7/attachment.html>

From kalyanam at rhrk.uni-kl.de  Wed Feb 14 02:12:19 2018
From: kalyanam at rhrk.uni-kl.de (raghuram kalyanam)
Date: Wed, 14 Feb 2018 11:12:19 +0100
Subject: [Radiance-general] Faulty fisheye HDR, DGP always 1.0
In-Reply-To: <9cba2d4e-5dc7-5bd1-0796-7275f8db0208@epfl.ch>
References: <093bdfe0-a95e-4608-b212-cfdd66bfe980@email.android.com>
 <9cba2d4e-5dc7-5bd1-0796-7275f8db0208@epfl.ch>
Message-ID: <B90EAD9A-780C-492F-BF2B-6C397C85C87A@rhrk.uni-kl.de>

Hi Jan and Greg,

Thank you very much  for your  suggestions. Finally the issue seems to be solved. It is true that the problem is  in HDR generation process. We divided each of the pixel values by 179, then HDR seems to be in  radiance compatible format. Now the results of these HDR images from Evalglare are more meaningful.

Once again I thank you for your effort. 


Best Regards,
Raghu

> On Feb 6, 2018, at 7:31 PM, Jan Wienold <jan.wienold at epfl.ch> wrote:
> 
> Hi Raghu,
> 
> The spot luminance measurements should ideally be done for several ranges for each HDR capturing (e.g. one reference area with 100cd/m2, another one with several thousands) and finally you compare the illuminance of the image with the measured one and you should reject any image with a deviation larger than 25% deviation of the illuminance. With a proper calibration you can be also within 10%.
> 
> Definitely the luminances of your image are totally off (=physically impossible, at least factor  50 for the blue sky) - it has nothing to do with evalglare. 
> BTW. evalglare calculates the illuminance also for that image (617414.88 lux) - there is no limit or "out of bounds". Just that your image has much too high luminances, so you get also an unrealistic illuminance... 
> It is hard to tell where the problem lies exactly, but definitely it is caused by your applied  hdr generation process.
> 
> Cheers
> Jan
> 
> On 06.02.18 18:57, Raghuram Kalyanam wrote:
>> Hi Jan,
>> 
>> We did the calibration and the results of spot luminance measured and calculated from HDR for the light source (calculated with custom made tool )  is very close. 
>> 
>> I want to compare the measured  Vertical eye illuminance with the one calculated with evalglare, but the results are out of bounds from evalglare, so i couldn't even compare. 
>> 
>> Could you suggest me anything  else i should be taking care of? Any ideas. 
>> 
>> Best Regards, 
>> Raghu
>> 
>> 
>> 
>> On Feb 6, 2018 6:24 PM, Jan Wienold <jan.wienold at epfl.ch> <mailto:jan.wienold at epfl.ch> wrote:
>> was it taken on mercury ? ;-)
>> the luminances are far off... it sums up to more than 600000 lux 
>> Jan 
>> 
>> 
>> On 06.02.18 18:18, Greg Ward wrote:
>> Hi Raghu,
>> 
>> We may need to wait to hear from Jan or someone who understands evalglare better than I do.  I don't think there is a problem with your HDR image as you generated it.
>> 
>> -Greg
>> 
>> From: raghuram kalyanam <kalyanam at rhrk.uni-kl.de <mailto:kalyanam at rhrk.uni-kl.de>>
>> Date: February 6, 2018 9:05:41 AM PST
>> 
>> Hi Greg,
>> 
>> I added these options while passing to evalglare like below.
>> 
>> evalglare -vta -vh 180 -vv 180 <hdr file>, and it worked but it always gives 1.0 as DGP (even other parameters are out of bounds).
>> 
>> With out those options evalglare throws an error.
>> 
>> Apart from that
>> 
>> Are all the LDR?s provided, valid to combine into HDR?
>> 
>> I doubt if one or more of the LDR?s is the culprit (especially something to do with over or under exposure).
>> 
>> Best Regards,
>> Raghu
>> 
>> On Feb 6, 2018, at 5:05 PM, Greg Ward <gregoryjward at gmail.com <mailto:gregoryjward at gmail.com>> wrote:
>> 
>> Hi Raghu,
>> 
>> It looks like your HDR image header is missing the necessary view information.  Typically, this might be something like:
>> 
>> VIEW= -vta -vh 180 -vv 180
>> 
>> for a perspective such as yours.  You should be sure that your fisheye mapping corresponds to one of the standard Radiance types.
>> 
>> Best,
>> -Greg
>> 
>> From: raghuram kalyanam <kalyanam at rhrk.uni-kl.de <mailto:kalyanam at rhrk.uni-kl.de>>
>> Date: February 6, 2018 5:21:59 AM PST
>> 
>> Hi All,
>> 
>> I am trying to asses visual discomfort  using fisheye HDR images. We generated HDR image from a set of 360 degree LDRs and then converted to fisheye HDR ( using a custom made tools). The intension was to use these Fisheye HDRs as input to Evalglare and get DGP value. The Camera used is Ricoh Theta V 360 degree camera.
>> 
>> The problem I am facing is, the DGP calculated from the generated fisheye HDR with Evalglare is always 1.0. We did the calibration but I would like to have expert opinion from you people, what is going wrong with these set of images. Here is the link <https://seafile.rlp.net/f/0212995d110648d38032/?dl=1> to the pictures.
>> 
>> It would be great if anyone could identify the issue.
>> 
>> Best Regards,
>> Raghu
>> 
>> 
>> 
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org <mailto:Radiance-general at radiance-online.org>
>> https://www.radiance-online.org/mailman/listinfo/radiance-general <https://www.radiance-online.org/mailman/listinfo/radiance-general>
>> 
>> -- 
>> Dr.-Ing.  Jan Wienold
>> Ecole Polytechnique F?d?rale de Lausanne (EPFL)
>> EPFL ENAC IA LIPID
>> 
>> http://people.epfl.ch/jan.wienold <http://people.epfl.ch/jan.wienold>
>> LE 1 111 (Office)
>> Phone    +41 21 69 30849
>> 
>> 
>> 
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org <mailto:Radiance-general at radiance-online.org>
>> https://www.radiance-online.org/mailman/listinfo/radiance-general <https://www.radiance-online.org/mailman/listinfo/radiance-general>
> 
> -- 
> Dr.-Ing.  Jan Wienold
> Ecole Polytechnique F?d?rale de Lausanne (EPFL)
> EPFL ENAC IA LIPID
> 
> http://people.epfl.ch/jan.wienold <http://people.epfl.ch/jan.wienold>
> LE 1 111 (Office)
> Phone    +41 21 69 30849
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> https://www.radiance-online.org/mailman/listinfo/radiance-general

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20180214/1b0e7952/attachment.html>

From raghuram.kalyanam at bauing.uni-kl.de  Wed Feb 14 02:10:44 2018
From: raghuram.kalyanam at bauing.uni-kl.de (raghuram kalyanam)
Date: Wed, 14 Feb 2018 11:10:44 +0100
Subject: [Radiance-general] Faulty fisheye HDR, DGP always 1.0
In-Reply-To: <9cba2d4e-5dc7-5bd1-0796-7275f8db0208@epfl.ch>
References: <093bdfe0-a95e-4608-b212-cfdd66bfe980@email.android.com>
 <9cba2d4e-5dc7-5bd1-0796-7275f8db0208@epfl.ch>
Message-ID: <BBE698DF-0262-4CF1-B388-BAEEF51A50F2@bauing.uni-kl.de>

Hi Jan and Greg,

Thank you very much  for your  suggestions. Finally the issue seems to be solved. It is true that the problem is  in HDR generation process. We divided each of the pixel values by 179, then HDR seems to be in  radiance compatible format. Now the results of these HDR images from Evalglare are more meaningful.

Once again I thank you for your effort. 


Best Regards,
Raghu

> On Feb 6, 2018, at 7:31 PM, Jan Wienold <jan.wienold at epfl.ch> wrote:
> 
> Hi Raghu,
> 
> The spot luminance measurements should ideally be done for several ranges for each HDR capturing (e.g. one reference area with 100cd/m2, another one with several thousands) and finally you compare the illuminance of the image with the measured one and you should reject any image with a deviation larger than 25% deviation of the illuminance. With a proper calibration you can be also within 10%.
> 
> Definitely the luminances of your image are totally off (=physically impossible, at least factor  50 for the blue sky) - it has nothing to do with evalglare. 
> BTW. evalglare calculates the illuminance also for that image (617414.88 lux) - there is no limit or "out of bounds". Just that your image has much too high luminances, so you get also an unrealistic illuminance... 
> It is hard to tell where the problem lies exactly, but definitely it is caused by your applied  hdr generation process.
> 
> Cheers
> Jan
> 
> On 06.02.18 18:57, Raghuram Kalyanam wrote:
>> Hi Jan,
>> 
>> We did the calibration and the results of spot luminance measured and calculated from HDR for the light source (calculated with custom made tool )  is very close. 
>> 
>> I want to compare the measured  Vertical eye illuminance with the one calculated with evalglare, but the results are out of bounds from evalglare, so i couldn't even compare. 
>> 
>> Could you suggest me anything  else i should be taking care of? Any ideas. 
>> 
>> Best Regards, 
>> Raghu
>> 
>> 
>> 
>> On Feb 6, 2018 6:24 PM, Jan Wienold <jan.wienold at epfl.ch> <mailto:jan.wienold at epfl.ch> wrote:
>> was it taken on mercury ? ;-)
>> the luminances are far off... it sums up to more than 600000 lux 
>> Jan 
>> 
>> 
>> On 06.02.18 18:18, Greg Ward wrote:
>> Hi Raghu,
>> 
>> We may need to wait to hear from Jan or someone who understands evalglare better than I do.  I don't think there is a problem with your HDR image as you generated it.
>> 
>> -Greg
>> 
>> From: raghuram kalyanam <kalyanam at rhrk.uni-kl.de <mailto:kalyanam at rhrk.uni-kl.de>>
>> Date: February 6, 2018 9:05:41 AM PST
>> 
>> Hi Greg,
>> 
>> I added these options while passing to evalglare like below.
>> 
>> evalglare -vta -vh 180 -vv 180 <hdr file>, and it worked but it always gives 1.0 as DGP (even other parameters are out of bounds).
>> 
>> With out those options evalglare throws an error.
>> 
>> Apart from that
>> 
>> Are all the LDR?s provided, valid to combine into HDR?
>> 
>> I doubt if one or more of the LDR?s is the culprit (especially something to do with over or under exposure).
>> 
>> Best Regards,
>> Raghu
>> 
>> On Feb 6, 2018, at 5:05 PM, Greg Ward <gregoryjward at gmail.com <mailto:gregoryjward at gmail.com>> wrote:
>> 
>> Hi Raghu,
>> 
>> It looks like your HDR image header is missing the necessary view information.  Typically, this might be something like:
>> 
>> VIEW= -vta -vh 180 -vv 180
>> 
>> for a perspective such as yours.  You should be sure that your fisheye mapping corresponds to one of the standard Radiance types.
>> 
>> Best,
>> -Greg
>> 
>> From: raghuram kalyanam <kalyanam at rhrk.uni-kl.de <mailto:kalyanam at rhrk.uni-kl.de>>
>> Date: February 6, 2018 5:21:59 AM PST
>> 
>> Hi All,
>> 
>> I am trying to asses visual discomfort  using fisheye HDR images. We generated HDR image from a set of 360 degree LDRs and then converted to fisheye HDR ( using a custom made tools). The intension was to use these Fisheye HDRs as input to Evalglare and get DGP value. The Camera used is Ricoh Theta V 360 degree camera.
>> 
>> The problem I am facing is, the DGP calculated from the generated fisheye HDR with Evalglare is always 1.0. We did the calibration but I would like to have expert opinion from you people, what is going wrong with these set of images. Here is the link <https://seafile.rlp.net/f/0212995d110648d38032/?dl=1> to the pictures.
>> 
>> It would be great if anyone could identify the issue.
>> 
>> Best Regards,
>> Raghu
>> 
>> 
>> 
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org <mailto:Radiance-general at radiance-online.org>
>> https://www.radiance-online.org/mailman/listinfo/radiance-general <https://www.radiance-online.org/mailman/listinfo/radiance-general>
>> 
>> -- 
>> Dr.-Ing.  Jan Wienold
>> Ecole Polytechnique F?d?rale de Lausanne (EPFL)
>> EPFL ENAC IA LIPID
>> 
>> http://people.epfl.ch/jan.wienold <http://people.epfl.ch/jan.wienold>
>> LE 1 111 (Office)
>> Phone    +41 21 69 30849
>> 
>> 
>> 
>> _______________________________________________
>> Radiance-general mailing list
>> Radiance-general at radiance-online.org <mailto:Radiance-general at radiance-online.org>
>> https://www.radiance-online.org/mailman/listinfo/radiance-general <https://www.radiance-online.org/mailman/listinfo/radiance-general>
> 
> -- 
> Dr.-Ing.  Jan Wienold
> Ecole Polytechnique F?d?rale de Lausanne (EPFL)
> EPFL ENAC IA LIPID
> 
> http://people.epfl.ch/jan.wienold <http://people.epfl.ch/jan.wienold>
> LE 1 111 (Office)
> Phone    +41 21 69 30849
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> https://www.radiance-online.org/mailman/listinfo/radiance-general

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20180214/5cafa6fa/attachment-0001.html>

From J.Mardaljevic at lboro.ac.uk  Fri Feb 16 09:09:20 2018
From: J.Mardaljevic at lboro.ac.uk (John Mardaljevic)
Date: Fri, 16 Feb 2018 17:09:20 +0000
Subject: [Radiance-general] 2018 International Radiance Workshop (Feb update)
Message-ID: <98833ABF-3EB1-4352-A842-04D78473C351@lboro.ac.uk>

Dear Colleagues,

The 2018 International Radiance Workshop (3-5 September) webpage is up and abstract submission is open (please use the email link on the webpage):

http://climate-based-daylighting.com/doku.php?id=radiance2018

The page contains travel and accommodation information.

Thus far, the following are proposed for the tutorial/training day:

1.  Ambient calculation crash-course.  A perennial favourite giving a excellent 'under the hood' introduction to one of the keystone features of the Radiance system.

2.  A exposition of the 4 Component Method (4CM) daylight coefficient approach.  The 4 Component Method was, it seems, the first daylight coefficient implementation (originally devised in 1995).  It was revised in 2003, and tweaked since then.  The rationale for including it during the tutorial day is because knowing how the 4CM approach works makes it much easier to understand how all the other, subsequent, daylight coefficient formulations work.  Also, the rigorous validation that the 4CM approach was subjected to helps illustrate and explain many of the accuracy issues that apply to all the Radiance DC formulations.

Further suggestions are invited for the tutorial/training day ? either sessions you'd like to hear or give ? please send them to the organisers (Eleonora & myself) using the email link on the webpage.

-----

Presentation titles so far include:

-  Visual comfort with side-lit at restaurants under sunny climates (determined using DIVA and the multi-phase methods).

-  New metrics to evaluate quantity and quality of daylight for multi-zoned electrochromic glazing.

-  Meteorological data for climate-based daylight modelling.

-  Validation of HDR derived illuminance measurement in a conservation setting.

Looking forward to receiving many more in the next few weeks!

-----

Workshop costs are being finalised.  Rest assured, they will be in keeping with the long-standing Radiance tradition of affordability.  Also, accommodation in Lboro is fairly reasonably priced (see the webpage).  I know there are some other meetings are happening in Lboro that week, so if you are set on coming you may wish to book accommodation fairly soon.  The (very handy for the Workshop) Burleigh Court Hotel is likely to get fully booked that week.

Cheers
John

John Mardaljevic PhD FSLL FIBPSA
Professor of Building Daylight Modelling
School of Architecture, Building & Civil Engineering
Loughborough University
Loughborough
Leicestershire
LE11 3TU, UK

Tel: +44 1509 222630 (Direct)
Tel: +44 1509 228529 (Secretary)

j.mardaljevic at lboro.ac.uk

http://www.lboro.ac.uk/departments/abce/staff/john-mardaljevic

2018 International Radiance Workshop
3-5 September 2018, Loughborough University, UK

http://climate-based-daylighting.com/doku.php?id=radiance2018



From andrea89.zani at gmail.com  Wed Feb 21 11:48:53 2018
From: andrea89.zani at gmail.com (Andrea Zani)
Date: Wed, 21 Feb 2018 11:48:53 -0800
Subject: [Radiance-general] optics2glazedb error
Message-ID: <CA+pbveEBwAq2ZYt-vhaGdKsWJ7OZUd_iKsazfW-rtVh2Fwck6w@mail.gmail.com>

Hi everyone,

In the last weeks, I started working on glass angular behavior and color
appearance. I found Jack's program (glaze) really interesting.

I tried to create my glass database using optics2glazedb, but I am not able
to generate any output except for one glass, as you can see in the figure
attached.

Attached also some .rad files that I have exported from optics and I tried
to convert. I am using a virtual machine with Linux Mint.

Am I doing something wrong? Any suggestion?

Thank you so much in advance for your time.

Best,

-- 

*Andrea Zani*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20180221/b257c6ee/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: clear_12.rad
Type: application/octet-stream
Size: 683 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20180221/b257c6ee/attachment-0004.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: clearvision 8.rad
Type: application/octet-stream
Size: 702 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20180221/b257c6ee/attachment-0005.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: vision60t_6.rad
Type: application/octet-stream
Size: 686 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20180221/b257c6ee/attachment-0006.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: vision72t_10.rad
Type: application/octet-stream
Size: 691 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20180221/b257c6ee/attachment-0007.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Optics2glaze_error.PNG
Type: image/png
Size: 19276 bytes
Desc: not available
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20180221/b257c6ee/attachment-0001.png>

From mcneil.andrew at gmail.com  Tue Feb 27 10:12:37 2018
From: mcneil.andrew at gmail.com (Andy McNeil)
Date: Tue, 27 Feb 2018 10:12:37 -0800
Subject: [Radiance-general] optics2glazedb error
In-Reply-To: <CA+pbveEBwAq2ZYt-vhaGdKsWJ7OZUd_iKsazfW-rtVh2Fwck6w@mail.gmail.com>
References: <CA+pbveEBwAq2ZYt-vhaGdKsWJ7OZUd_iKsazfW-rtVh2Fwck6w@mail.gmail.com>
Message-ID: <CAEFJVk_tZ3vgQa0N=B3FiZFZ=YOCRsobKf-nTi7xfHk4wLE_kA@mail.gmail.com>

Andrea, underscores in the glazing system name causes problems with the
optics2rad script, which searches for underscores.

Try editing the files to change the first underscore but leave the second
underscore like this:

vision60t_6_glass
vision60t_6_front
vision60t_6_back

becomes:
vision60t-6_glass
vision60t-6_front
vision60t-6_back


The file then looks like this, and I think it should work:

void  glass       vision60t-6_glass
0
0
3     0.712     0.721     0.694

void  BRTDfunc    vision60t-6_front
10
      0.142     0.151     0.091
      0.653     0.661     0.637
      0 0 0
      .
0
9 0 0 0 0 0 0 0 0 0

void  BRTDfunc    vision60t-6_back
10
      0.079     0.118     0.162
      0.653     0.661     0.637
      0 0 0
      .
0
9 0 0 0 0 0 0 0 0 0



On Wed, Feb 21, 2018 at 11:48 AM, Andrea Zani <andrea89.zani at gmail.com>
wrote:

> Hi everyone,
>
> In the last weeks, I started working on glass angular behavior and color
> appearance. I found Jack's program (glaze) really interesting.
>
> I tried to create my glass database using optics2glazedb, but I am not
> able to generate any output except for one glass, as you can see in the
> figure attached.
>
> Attached also some .rad files that I have exported from optics and I tried
> to convert. I am using a virtual machine with Linux Mint.
>
> Am I doing something wrong? Any suggestion?
>
> Thank you so much in advance for your time.
>
> Best,
>
> --
>
> *Andrea Zani*
>
>
>
> _______________________________________________
> Radiance-general mailing list
> Radiance-general at radiance-online.org
> https://www.radiance-online.org/mailman/listinfo/radiance-general
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.radiance-online.org/pipermail/radiance-general/attachments/20180227/07b2d575/attachment.html>

